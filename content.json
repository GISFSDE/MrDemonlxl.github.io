{"pages":[{"title":"","text":"ã€ä¸ªäººç®€ä»‹ã€‘ åˆ†äº«ä¸çŸ¥å‡ºå¤„çš„ä¸€æ®µè¯ï¼š &quot;ä½ æ‰€æœ‰çš„çƒ¦æ¼éƒ½åœ¨äºä½ æƒ³å¾—å¤ªå¤šï¼Œè€Œåšå¾—å¤ªå°‘ã€‚&quot; æ— è®ºå¤šä¹ˆç²¾ç¾æµ©ç€šçš„ç»ä¸–è®¡åˆ’ï¼Œéƒ½åº”è¯¥ç‚¹ç‚¹æ»´æ»´èµ‹äºˆè¡ŒåŠ¨ã€‚ åœ¨è¿™é‡Œä½ å¯ä»¥å¾—åˆ°ä»€ä¹ˆ? ğŸ˜ æ•ˆç‡çš„ç§ç§åˆ©å™¨ï¼ ğŸ˜ Javaå…¨æ ˆæŠ€æœ¯å­¦ä¹ ï¼ ğŸ˜ ä»£ç ä¹‹å¤–çš„ä¸°å¯Œç”Ÿæ´»ï¼ ã€æ€»å†…å®¹å¯¼å›¾ã€‘ ã€å…³äºé­‘é­…å…ˆç”Ÿã€‘ ã€åŠ¨æ¼«äººç‰©ä»‹ç»ã€‘ é­‘é­…é­é­‰ï¼ˆchÄ« mÃ¨i wÇng liÇngï¼‰ï¼Œå½¢å½¢è‰²è‰²å¦–é­”é¬¼æ€ªï¼Œç°é€šæŒ‡åäººã€‚è€Œé­‘é­…å…ˆç”Ÿä¹ƒå¦–ä¸­ä¹‹é¦–ï¼ŒæŒæ§å¦–é­”ä¸‡ç‰©ï¼Œä¸“å…‹é­‘é­…é­é­‰ï¼Œå…¶é¢å®¹æ¸…ç§€ï¼Œåƒå˜ä¸‡åŒ–ï¼Œå–„å­¦å¥½æ€çŸ£ã€‚å…¶é—´è§éœ¸æˆˆã€BUGã€‘ï¼Œç¥¸å®³äººä¸–é—´ï¼Œä¾¿ä¹ ç¼–ç¨‹æœ¯ï¼Œä»æ­¤ä¸å½’è·¯ã€‚ ç»˜ç”»ä½œè€…: @YYu ã€è”ç³»æ–¹å¼ã€‘ å¦‚æœ‰ä»»ä½•äº¤æµéœ€æ±‚ï¼Œè¯·æ·»åŠ ä¸ªäººå¾®ä¿¡æˆ–ä¸ªäººå…¬ä¼—å· æ·»åŠ å‰è¯·å¤‡æ³¨æ¥ç”±ã€‚(à¹‘â€¾ ê‡´ â€¾à¹‘) å¾®ä¿¡æ‰«ç æˆ–ç‚¹å‡»é“¾æ¥å…³æ³¨æˆ‘å“¦ï¸¿(ï¿£ï¸¶ï¿£)ï¸¿ å‡¡äº‹é¢„åˆ™ç«‹ï¼Œä¸é¢„åˆ™åºŸã€‚ è®¡åˆ’ 2021-PLANS DAY è¯»ä¹¦ æ¯æ—¥ç®—æ³• æ¯æ—¥è‹±è¯­ ç†è´¢ï¼Œè®°è´¦ WEEK ç»˜ç”» å‰ä»– è¿åŠ¨ä¸¤æ¬¡ ç»ƒå­— MONTH æ€»ç»“ YEAR ç†Ÿç»ƒä¸€ä¸ªä»¥ä¸ŠæŠ€èƒ½ ç›®æ ‡ 2021-GOALS è¯»ä¹¦ ã€Šç¤¾ä¼šå¿ƒç†å­¦ã€‹ ã€Šå¤§é—®é¢˜ï¼šç®€æ˜å“²å­¦å¯¼è®ºã€‹ ã€Šå±€å¤–äººã€‹ ã€Šä¸‰ä½“ã€‹ ã€Šæˆ‘æ˜¯çŒ«ã€‹ ä¸“ä¸š è®¾è®¡æ¨¡å¼ä»£ç Demo ç½‘ç»œ JVM VUEé¡¹ç›® Linux éŸ³ä¹ å‰ä»–è°±æ‰’è°±å­¦ä¹  è¿åŠ¨ ç”»ç”» æ—¶é—´è½´è®°å½• æœ¬ç«™æ¨èç´¢å¼• æŠ€æœ¯çŸ¥è¯†ç‚¹ Javaå¹¶å‘çŸ¥è¯†ç‚¹ æ³•å¾‹æ³•è§„ æ³•å¾‹æ³•è§„æ•°æ®åº“ ä¸­åäººæ°‘å…±å’Œå›½å›½æ——æ³• ä¸­åäººæ°‘å…±å’Œå›½å®ªæ³• ä¸­åäººæ°‘å…±å’Œå›½æ¶ˆè´¹è€…æƒç›Šä¿æŠ¤æ³• ä¸­åäººæ°‘å…±å’Œå›½åˆ‘äº‹è¯‰è®¼æ³• ä¸­åäººæ°‘å…±å’Œå›½å©šå§»æ³• ä¸­åäººåå…±å’Œå›½ç½‘ç»œå®‰å…¨æ³• ä¸­åäººæ°‘å…±å’Œå›½åŠ³åŠ¨æ³• å…¶ä»– ç½‘æ˜“äº‘éŸ³ä¹æ­Œå•åˆ†äº«","link":"/about/index.html"},{"title":"","text":"ğŸˆğŸˆæ‘„å½±-å¹³é¢è®¾è®¡-ç»˜ç”»æ¬£èµğŸˆğŸˆ æ¯å¤©çœ‹ä¸€ç‚¹ï¼Œå®¡ç¾é«˜ä¸€ç‚¹ ğŸ˜Šè–‡è–‡å®‰Â·è¿ˆå°”ğŸ˜Š â€‹ è–‡è–‡å®‰Â·è¿ˆå°”ï¼ˆVivian Maierï¼‰ï¼Œ1926å¹´2æœˆ1æ—¥å‡ºç”Ÿäºç¾å›½çº½çº¦ï¼Œç¾å›½ä¸šä½™è¡—å¤´æ‘„å½±å¸ˆã€å®¶åº­ä¿å§†ã€‚è–‡è–‡å®‰æ˜¯æ³•å›½äººåè£”ï¼Œå‡ºç”Ÿåœ¨çº½çº¦ï¼Œä½†åœ¨æ³•å›½é•¿å¤§ï¼Œåå›åˆ°ç¾å›½å…ˆåç”Ÿæ´»åœ¨çº½çº¦å’ŒèŠåŠ å“¥ï¼Œå¥¹ä¸€ç”Ÿæ‹æ‘„äº†è¶…è¿‡10ä¸‡å¼ ç…§ç‰‡ã€‚2007å¹´ï¼ŒèŠåŠ å“¥å½“åœ°å†å²å­¦å®¶çº¦ç¿°Â·é©¬é²å¤«å‘ç°äº†å¥¹çš„å¤§é‡åº•ç‰‡å¹¶å¼€å§‹æ•´ç†ï¼Œæ­¤åå¥¹çš„ä½œå“ç™»ä¸Šç¾å›½ä»¥è‡³æ„å¤§åˆ©ã€é˜¿æ ¹å»·å’Œè‹±å›½ç­‰åœ°çš„æŠ¥çº¸ã€‚2009å¹´4æœˆ21æ—¥ç—…é€äºèŠåŠ å“¥ã€‚2010å¹´ï¼Œè–‡è–‡å®‰çš„ä½œå“å¼€å§‹åœ¨èŠåŠ å“¥è¿›è¡Œå±•å‡ºï¼Œæˆä¸ºæ‘„å½±åœˆä¸­çƒ­è®®çš„äººç‰©ï¼Œå¹¶è¢«è®¤å¯ä¸ºç¾å›½å½“ä»£æœ€é‡è¦çš„è¡—å¤´æ‘„å½±å¸ˆä¹‹ä¸€ã€‚ å›¾ç‰‡éƒ¨åˆ†æœé›†äºäº’è”ç½‘ï¼Œä¾µæƒè¯·ç•™è¨€ï¼Œé©¬ä¸Šå¤„ç†ğŸ˜Šã€‚","link":"/album/index.html"},{"title":"","text":"ç”³è¯·å‹é“¾é¡»çŸ¥ åŸåˆ™ä¸Šåªå’ŒæŠ€æœ¯ç±»åšå®¢äº¤æ¢ï¼Œä½†ä¸åŒ…æ‹¬å«æœ‰å’Œè‰²æƒ…ã€æš´åŠ›ã€æ”¿æ²»æ•æ„Ÿçš„ç½‘ç«™ã€‚ ä¸å’Œå‰½çªƒã€ä¾µæƒã€æ— è¯šä¿¡çš„ç½‘ç«™äº¤æ¢ï¼Œä¼˜å…ˆå’Œå…·æœ‰åŸåˆ›ä½œå“çš„ç½‘ç«™äº¤æ¢ã€‚ ç”³è¯·è¯·æä¾›ï¼šç«™ç‚¹åç§°ã€ç«™ç‚¹é“¾æ¥ã€ç«™ç‚¹æè¿°ã€logoæˆ–å¤´åƒï¼ˆä¸è¦è®¾ç½®é˜²ç›—é“¾ï¼‰ã€‚ æ’åä¸åˆ†å…ˆåï¼Œåˆ·æ–°åé‡æ’ï¼Œæ›´æ–°ä¿¡æ¯åè¯·ç•™è¨€å‘ŠçŸ¥ã€‚ ä¼šå®šæœŸæ¸…ç†å¾ˆä¹…å¾ˆä¹…ä¸æ›´æ–°çš„ã€ä¸ç¬¦åˆè¦æ±‚çš„å‹é“¾ï¼Œä¸å†å¦è¡Œé€šçŸ¥ã€‚ æœ¬ç«™ä¸å­˜å‚¨å‹é“¾å›¾ç‰‡ï¼Œå¦‚æœå‹é“¾å›¾ç‰‡æ¢äº†æ— æ³•æ›´æ–°ã€‚å›¾ç‰‡è£‚äº†çš„ä¼šæ›¿æ¢æˆé»˜è®¤å›¾ï¼Œéœ€è¦æ›´æ¢çš„è¯·ç•™è¨€å‘ŠçŸ¥ã€‚ æœ¬ç«™å‹é“¾ä¿¡æ¯å¦‚ä¸‹ï¼Œç”³è¯·å‹é“¾å‰è¯·å…ˆæ·»åŠ æœ¬ç«™ä¿¡æ¯ï¼š ç½‘ç«™å›¾æ ‡ï¼šhttps://mrdemonlxl.github.io/images/avatar.jpg ç½‘ç«™åç§°ï¼šé­‘é­…å…ˆç”Ÿ ç½‘ç«™åœ°å€ï¼šhttps://mrdemonlxl.github.io/ ç½‘ç«™ç®€ä»‹ï¼šJavaå…¨æ ˆå¼€å‘ï¼ŒæŠ€æœ¯åˆ†äº«ï¼Œç¨‹åºå‘˜çš„ç”Ÿæ´»åˆ†äº« åŠ è½½ä¸­ï¼Œç¨ç­‰å‡ ç§’...","link":"/friend/index.html"},{"title":"","text":"&nbsp;&nbsp;å¬å¬éŸ³ä¹ éŸ³ä¹æ’­æ”¾å™¨ç”±mePlayeræä¾›ï¼Œå¸ƒå±€å‚ç…§ç½‘å‹åšå®¢æ‰€ä½œï¼Œæ„Ÿè°¢ä½œè€…çš„è¾›å‹¤ä»˜å‡ºã€‚æ›´å¤šéŸ³ä¹åˆ†äº«è¯·æŸ¥çœ‹æ­Œå•ã€‚ &nbsp;&nbsp;çœ‹çœ‹è§†é¢‘ ->ç‚¹å‡»ä»¥ä¸‹æ¡ç›®å¼€å§‹æ’­æ”¾è§†é¢‘,å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š","link":"/media/index.html"},{"title":"","text":"å¥½é—®åˆ™è£•ï¼Œè‡ªç”¨åˆ™å°ã€‚â€”â€”ã€Šå°šä¹¦Â·ä»²è™ºä¹‹è¯°ã€‹","link":"/message/index.html"},{"title":"éŸ³ä¹æ­Œå•æ”¶è—","text":"ä¸ªäººå­¦ä¹ é£Ÿç”¨ï¼Œå¦‚æœ‰æ¨èè¯·ç•™è¨€æ­Œå•æˆ–æ­Œæ›²é“¾æ¥ã€‚ç‚¹å‡»å·¦ä¸‹è§’ç®­å¤´å¯å…¨å±€æ’­æ”¾å“¦ - ğŸ¤²ğŸ˜ æ¸©é¦¨æç¤ºï¼šé€‰æ‹©å–œæ¬¢çš„éŸ³ä¹åŒå‡»æ’­æ”¾ï¼Œç”±äºç‰ˆæƒåŸå› éƒ¨åˆ†ä¸èƒ½æ’­æ”¾ã€‚å¦‚æœå–œæ¬¢æ­Œå•æ”¶è—ä¸€ä¸‹ï¼Œå»ç½‘æ˜“äº‘éƒ½èƒ½æ’­æ”¾å“Ÿï¼","link":"/music/index.html"},{"title":"","text":"ç¢ç¢å¿µæ ‘æ´ tipsï¼šgithubç™»å½•åæŒ‰æ—¶é—´æ­£åºæŸ¥çœ‹ã€å¯ç‚¹èµåŠ â¤ï¸ã€Œ+99æ¬¡æŸ¥çœ‹ã€ ç¢ç¢å¿µåŠ è½½ä¸­ï¼Œè¯·ç¨ç­‰... $.getScript(\"/js/gitalk_self.min.js\", function () { var gitalk = new Gitalk({ clientID: '20ef8321698ab8c0c37b', clientSecret: '237515b7faa3e1097f2980762f772c6f02dbcbbb', id: '666666', repo: 'MrDemonlxl.github.io', owner: 'MrDemonlxl', admin: \"MrDemonlxl\", createIssueManually: true, distractionFreeMode: false }); gitalk.render('comment-container1'); });","link":"/self-talking/index.html"}],"posts":[{"title":"BUG","text":"ä¸€æ¬¡ç›¸è§ï¼Œç»ä¸å†è§ BUGåˆ†ç±»è§£å†³è®°å½•ï¼Œå¸¸è§æ’æŸ¥æ–¹æ³•ï¼Œå¸¸è§é¿å…æ–¹æ³•æ€»ç»“ã€‚ MYSQL Client does not support authentication protocol requested by server; 123mysql -hlocalhost -uroot -pALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';FLUSH PRIVILEGES; Unknown initial character set index '255' received from server. Initial client character set can be forced via the 'characterEncoding' property. 12String urlåæ·»åŠ ?useUnicode=true&amp;characterEncoding=utf8 mybatis urlåæ·»åŠ ?useUnicode=true&amp;characterEncoding=utf8 cannot open git-upload-pack IDEA è®¾ç½® è¯·æ±‚æœ‰å‚æ•°æœ‰ç‰¹æ®Šå­—ç¬¦ postå‚æ•°å†™bodyé‡Œé¢ tomcat connecteråŠ relaxedPathChars=&quot;|{}[]^&quot; relaxedQueryChars=&quot;|{}[]^&quot; 123456789101112131415161718192021222324252627package com.jeethink.framework.config;import org.apache.catalina.connector.Connector;import org.springframework.boot.web.embedded.tomcat.TomcatConnectorCustomizer;import org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;import org.springframework.boot.web.servlet.server.ConfigurableServletWebServerFactory;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;/** * è§£å†³é«˜ç‰ˆæœ¬Tomcatä¸æ”¯æŒåœ¨URLä¸­ä¼ å…¥ç‰¹æ®Šå­—ç¬¦ï¼ˆæ¯”å¦‚|ï¼‰çš„é—®é¢˜ */@Configurationpublic class TomcatServerConfig { @Bean public ConfigurableServletWebServerFactory webServerFactory() { TomcatServletWebServerFactory factory = new TomcatServletWebServerFactory(); factory.addConnectorCustomizers(new TomcatConnectorCustomizer() { @Override public void customize(Connector connector) { //å…è®¸ç‰¹æ®Šå­—ç¬¦ connector.setProperty(&quot;relaxedQueryChars&quot;, &quot;|{}[]&quot;); } }); return factory; }}","link":"/2021/02/24/Draft/2021/BUG/"},{"title":"é­‘é­…å…ˆç”Ÿ | CRUD","text":"å„ç§ CRUD å‘€ï¼ŒCRUDåªå­¦ä¸€æ¬¡ã€‚ ğŸ›©ï¸ SSM SpringBoot SpringCloud Redis","link":"/2021/12/13/Draft/2021/CRUD/"},{"title":"åšå®¢æ¨¡æ¿","text":"4630436162ade97ba2718b7d0c4b3b631d1cea453764294116f53c62984a56ccee1694c14ccb64fb54f8c30202167de89f7cf608014a104c10a21a4f1d77a64727bde928bfb8eb6078a4a923c466f0bcea3207c4a47cce2765396cf8004ee68a14e8e23c956c9acb4311d193a0952e02bbbbbc6468731b893359ee3df3be2d38216a3e3de5da7dd19fb7c2ce287eab5d088144ecc29ff0ff182aec2e83cb1a6fa941d3e6baa5107e5c45c08da4c6d8017c96803cc7ea4b73b8a2c188c8e3c71f17ab5d497305fb4acb167834b1a7ccc698ec42fc97118de40d781a775892bb78aa1a80d3ba0c6d680385730e6898143e4ec54811381b76f1eefa9f6ae7acb0548c35a332d8b95d8dc348768c06d6fe758830973253175d9eb525fffb134cdd831582a8b0e10686371a8a85547fd67a53dfdd61284f21b9b17854457340a63bbdef5ed48628ff89004a68635efd673e6e00571d1541f299377b85c92a017c52e4aa1b84d0c408c73fd63363001963dd6e917bd1fe88802e84e734fce4fad8a50ad8b1f0c71fc3a57c8fc774ea7a3a3e75923d63a924fad10d03eba3153d20f2b157e108653a975a3c639af2823eb7ea2052706e9d6b4090123dab7bf1f9baa12fc186b8afc3d1ecb8f17fc558cc99ef4ad43bbc0685871a12e9a0ddb00bd653b337f95c5288a942823fbe21957c67721838e8b4d716ce347e7d8f1d6a05c8b893f2539b4942af3426e3ee44fa37373052980a53405ada27f82e2664213a1313d67ac2fe4e89eeafa723fa2d4a15aa3863a3fa0f2a886e55b0d96b8f8a46e5fb0962f4227ab3757c761fe381180ddff553c9db590d2aa64336b82695902cd7454b4d0ea155ac89a9c737d718b2440b3e96607f85af06a4b0e0bdce394f6d8e74ad4af50bb0aac19c6ca07605b5ac99c4d87ebf030313b667008a160217bc0c654586127719af458f9fda0fdd809ba51d5cce5d85a05c5e78be8814fc211e26a6fd26f8bfe2c7cb32381a79e9ebe2d30720d9c8066a5ef0f06c54b42af2d22ee5f1638d60c02bfce0ef4bf7624c2f80330dbffd6bc95ec4f121b616462feec75530d3a2b28775d9c2e702440e8a7ee80106bb9600123fd8f0bb2c652fd220b1dca2fd2f5b88c2def45ec0c311df84d5b5f6a1e83f223b4bcab2277a6da766e0e24decd0b922f1592182e5ae643807073ac7659156b681166e59505187438aed5df76b232eba8087f559e7dc229947e51b36f7120167c80dc81ceb5b73bec4ff092268af8ac6301b0b3057730748bc1f88a15394e78cc2acdcc57c2ce6ec1086a7df784f9c37e142c05632352cc5e7eca6c2c0930404ad0504ffc82168be51333126d87cb2982837901ca9c978f32d58af46464123bb51c12bbd26cfb085f9b14981f640377e5e9115ced751a191b5af3dd11b38238feb06bc44ecd133e799d5e58e4ac3804519b4657129c87f12d389937fc7385a79ad86d708aaf7dfe96f34f1beed6479d3148d9f926223e7fbc4ed0d41ba0f233d94f8cf628211ca846886afe2358a9bc829d915bc1b279e1af4bff8450d9b63ea0a45f78903c220aeaebe630f15c928f86033665622f78be713531c3134eb95892555a8974f0088513762b36fa886d198fec9aa2a51d85d985efefa71a8a0f8a0588e3ab8302b7438b9b441aa674225e704c4ae49cb9cdb98d84672d0e91fb6c65a9b6668ab3b8eefee278e97de9c7148ff1be333729e7a310796fd14bb2b463eaa5c8e5596035cbbab9f15b9068a693cc78ba21c5e8eb48e6ce57679b074f3f90b89614b30b581cc27561676ac5dca08abf36ad9223f70f9e47a8a1bce8e1097e19d87db7ec274cd5318c6f0bb7af52d7d5d09c62589eccceda1865119f06c487af4d27e41feb722b89af36ded58c7ad1aa4540af529719867074ac3a1dd6b830bca62351f65966dd3e892668dcd501322bb1f3f67738e342e1cb6070d84ad3b04e9191114d6c22069c04a881865f5d952157c70fd7fc1c8b892e999bb2efdcf8cbe1172226023fa898064d94fda843012607f274802431e30400a874625e8089669acf35f7b2622aab406a4422db4532c515e3f98835c0960ff1ef4dbce6643cb071f53b98a314c46224ce013f25b7e3402b2f84bfb872493ef78fc657770bda86dc5eb6eb6c489c6688989e22a2847747f255d45778b7a2ea10990b3e5cb73dd56684bc7563ee5bac6696c6beacae307ac9eb0c20df6790adf92014b5e05a6c3378fa5c77b28cbb3e33ae8b5612e4b4dd8e090eabf0d1020ab055fb32852e50f65fd348c4747972db935a31d116cf967f10936efbb8fc3867c2aacd8b7bdce2f65e095cc6526783d9a6a6beac3d35dee9edbea12d850909917d78427b4c7f475179df5c87881b5b6af176baf19711478a94e20f05ca6c4421151c587f946dae480d1c251b7dd9d10febfa51c0a2f1fa2de05251a75011ef6c0bd9b5545f59518e75c867533a4af2f5897344fac3b7a6d0385d3410106580236d6a8193a03e8db60f9b7b32b23b35e7b30f1699b0c9575ae068c365aca4ab445ba7428f77103cc7b04b2107058a9effcb5213fd5ebae7ae98c048d7ca6faf160bb753b4243952ecf7b27c00c6724259b4d7ed85584adc557778809ba9ddc4c2013343f325e6b99f18ac9a6d0c46d24b4134ea37fc6828ce685337db620695cd6bf98002f9e21d191cf41e04707f056ed153b461fab6722e542a9d6241b7dca2041e9219866a31a21c93c7174febff948bd8bbe299014f0ee0768baa4002731e062d4786e0cf60b9775106fcba85b2501de9c20370c0bb4701d49ca1192a1992f0cd46bb5130d234fd201816c6d2801cc830b2659c85232dc049ccd64bf66f66cf39646731a90eee8ed5b3797318009eb91970c76f8e124f53d1cc1f440f122fb4330a59f07b8993c90bf7af38e6f20d7c18970c7b9ed35735d01a897af13ae850d69a2a54f394ef479b08dbe90b5f9c29c88c504648837f5db1a180aad667e0e1c167add754f27488974a2300b9650c233788089dfd82348d13a74276635d2941ce787121eabcb7e2bfb07aebf352532a79661e38f409f4a1b8d7113d76166903e4016d31ea576a2f58b47d0715f15d0cf87376acc368b9c5dffc515f2cdce95bf110153b89ffe752894ba002ff4f8af62a1d89a3d4a0d71fbf637527854bfd65921cde38376790f73754623f93633117b85678eac05225cada3de0c1c16a836d4c57c7ba909a3eaf8c67dcf624fc8934318f136d6a93eba84afb3a20cfcc83fd1859ad85f4e2d80f80002632a163cf4597fecfc36f6d3638b6f6e46f37c10423e421cc55e5d287027fcb36171651aff1821dcf3c579aece1b8e3b09feee7fe53c990feb162d172ae0a5c411e580f663ea1e78f3fdb3d44226c3d6a23595559d62360320be1d084e449c0c1bde00180cc8a370d8653565473ce02bae5a83b8d2a82e6017c9cd69cf11da248518252a0edf29f45afcea1c249ef019ac3ac91f3952462165bff82aa585068ba44a70b6ca4f1a20540a5f89e39ca5b6eafc4e11ef78bebf10f86a19533b37476e416b0adab58266651fa652dd0f1d10e33e1c1f2e3437ab1aa9dae8badd85274054a5f3a65179214a47e0745c8a02765260ac9b98255a53cc605ade136d7afc72082a291ee899118f8ab9b58a1d7608d7b156a170d5986091031492f049a79f10d327637c1665c28e3301e37ca8a5d539ae45e15f88125644f5620086acea103b771a123eeb1d9c3e875ca4b434ebcb2d135dc36b987361942b70fb2b2a2434a60e1e1b9f262060d4b6313b0300f6f2868f5ba9fdb4bddd6e07e6a7893a43ecb8ff7ae7b50abcf0dd021d6bf61c3653eb618b2949c5728b25228888846dd9ed637c4a5732827a39bb1b58ea45a70ecab8ff4a846befd2ddf178de327c9aa7acb04fd44db30b34dc4b8704686cecb3bf4b55c0f82dc463681b72d539a01dff2522da4929c27fe5dd4a916714dd06a047397eb9e6e2ac3fd7b7c9c6cd7d2a303618b38ce5ae49dcf1bc4467534f2cf028a72413e1702577bee4cc86bdec83d9e238ebd672f0b3ec61c3bd83a1f0f292b2acfcc08b3f136ca5b9413716eab68f85ee549c291a68231e4a9bf21a18ec27cd1a52913843d887879bde9d93d99ad0afb958efd601bf30ab9e8c04b009f7e0f00984c3a686e4f8fedae7f1064ab9025beef0da3b92c03f3ac75c0d3ba256cd8a9b82dbb13e84f992339739e982180aaeabb4dbc7e2fd9bb75aef5f4a80594e026f895e91b1dd6edd9096904ad1ead337eaed65ba4a1db60429ea0b1f0f6cb118ad625ee52eb2c73a28fc004802437492eab31d1850a754aeccd9bf74c684a504babdd62d82ca07483c0b668c72028a9382991ba0a4b66fdb5392aac4c40174c3a116b9e741b8809fd2f91fd6428476cfe5c0ff79e96ddd27927f40cf436f77095a7abd3fc97c4e38107b0ea0fbd93f3697d284f0814a12a9ce043a78171e60f4147c27492101cf5cc4aa127ed950a7ba8685c7db9dbf05a94d2adc752958290f732870af71e023884b3d8e59a7448ea06b3fc22b6c220079ccf0db471f404c8d4d5877dccfca3adb18986a823a85e3469b4d2ec9adfaaee39bae8ce09674e13d153dbb225d8d4656f68d4b83cdea449b0b00264c19bdfad5663d5728aedb7018dd4954be07ee212c0548375fa28da21481ac1d1a8399da45b6ffaf4c4fc0d0594e6f711d06c433f88dd0078659b74731db1aa564516ea71c3372b6e6e0b73dfa8255671a704424ced937123c9dc91346996eb0e6d455239a057e9f3f8e79ce171e162ac95d9c1ac4b293becf0b18f31aae2dd242ecc3c6cfd544e3f6671f059c5a3d8370acaf4ff192107dfa9868c2b03f78caa5c9ff8ebc460dc48fa21521997077d2301f1afcd572a9d21ae55ca8ef02f995dec3608b844ee7c0b40b8c48ca3393d2e7625805803ed97fa8b62d376d2ae6933add5523678239c0650ba1ee5ab144705ea720b97490c26078fe389ee03310c467842ff637d9b9115b42a1e14b51ce5496ea8cbfaa1def81154bdb0f65fb70b21b6c77537a48d68a818d7fe9660f37ca19c2d9ca09e3e6ea599011bb4e364a279dc5b14c58de8bf12250e650b1be3fcb9ce9105d03a29d395a40d2685ffde64e215842887f79c3de3e58408ab3e76729c27bfca5ebc724a6a357f11d36b2e2faea38774a233a5bb97843cf32c06fc9f1bd53e2ba5dbdeefbbd4e4aa4736d4722ac9ff93cb6e34c581c0e409ae643012ce37f492b0bf2d297e35c6d37817101d278f12f6675e1839d9672a50513a044d6cb640ada613c58147e8590bdc5b57857802cb1f1825e4a090921d0f6fd8cb4e3492b94c54d795e05888cd3fda67e001008f742790635da26de080cad71f7eb60d002c0438991048dcb85982deb7824714cb5bea2b833542e117c6c9639f081f52d28916e968556a4ba7882ecec96182ecabf784de2cae871e95fb3bb6c1e3a1851c2db58709719beef807ad132f146a6f8b1ba198cb0e15b093313fc0c56edcd4db59389a72a32c64876bee4991fad98e252f31c529f3bc02dea77d81edbc52a57558ada9550e4659422695aadfe82e987b08be35827403089a6d9a695f1a168a5864c6a939e9011b19fe4b08be24f75cefed39db34f368c226e98a7f582b7ce652cee6860fc15e48f421a5d82be7fa14e2ca9a98604c835cf0afccfe0d1cdcc16ffa52d05074981de0d33810cb41a7a4cdabed3e95c568466a97e402401af34e0be8c450e1c93256e4962c6696bf8055e45fde8c4c59496b293a53ad6965ea3b3e477b2352fba4f88d45bedb5605f9d9e8953f43260380cbd7f5f3fa5ac37f463a034b19ab8944edd62c7dbc3bd4ff5f483d32a1ed39cf5725882e57e5c53357fa998827894cc08f9a015b2470ffcb0a54d765e9a2aa3f74eb0cea6cbaf8da687c187c4528e441eba7e918a10ec93fd5b5d6eb248a7e7453ed0a782b8fee1cbbcdb6bd098a1782517ecc0653f02a1231d01f975082d039f6a5a43c2ec283c071f22714846169fb4beeb20bb92f90a748b6df63084bf90f52de12e7a9dc3168d9c5e58267c2afe4fae02296f54173fd96799a9c9364bc383b933e3dae3a8c3ef6f5c3b0b8a589a2384721730584e89b2e97e43eef13e24b2f5b559968e86da60d318fb9b517b31d12eebc988372d7a6b46749456c65b8afd4705f3ca78251f92b95c196c0d4724a480cbc260a477c06b24076bf30f9bae72cbd53949d760589272599a691ec639677a282a6961c5ae3ea3e8e47e1d5ef9332bc6ca4ceb6d4a7bcf1f72c6b19b5745cb6da78ba4e2f500fb865a6d5fc5b59289990448771956ff616bca023bed91e7303dc6f11702e7044c2db3fc8046a654a1fdd01fef715dec2359f9a0be5a0712c25afcd6a4cfcb0a7bad064e7d8c155e8ec1e80b3d13db8f826d3ad1f2072f6935c62c645778491f581522221eb54f161166d8ddffe273db3b7572fc146c98e8ef5421c16df57e847a45cc66a13ba9c494144ff28ddbb91c61015479df40dbb551acf97be82895cbdf37773259a20442543fb830036ca326808a212f043578cc4231f335767506f9d3aa9dc7e13646a892aee9e94f56b9fd05a85cabcff5b980fb180313d68b6c2495737413a3a1acc8f22f6205d02a3bf32440d68d379ba332f1c2c0ee7c08a24fc6e8b619cefa7b6208047a18c48f93c7242d058785068d334ec47e2ea2b431fd371bf5112f0dd38a0fec803706569bb6cda8be3fd076f1d7e0911ac700a727cf11e74a99aaa7d446f56057619393a75a8478b056889074b91a4ce8fcb868e90552d3b3c65da71f9277b3df5a9a6de07dde219e6d91296ec2497ed27b8ce1ec964e7962e469e4a8a526b52219c05f93272e6ac6dbca6fb1d76787eb95e43cfae3c52ddc08e29c267639e6445dbbc4bc8ea1e407f01f2051f98423d7c1afd1cf6c8de8280a å—¨ï¼Œè¯·å‡†ç¡®æ— è¯¯åœ°è¾“å…¥å¯†ç æŸ¥çœ‹å“Ÿï¼","link":"/2021/01/19/Draft/2021/Hexo%E4%BD%BF%E7%94%A8%E8%8C%83%E4%BE%8B/"},{"title":"Interesting Programs","text":"ä¸€äº›æœ‰è¶£çš„ç¼–ç¨‹é¡¹ç›®ï¼Œå›åˆ°ä¹è¶£æœ¬èº«ã€‚ ç¼–ç¨‹ç»˜ç”»ï¼Œå›¾å½¢ï¼Œæ·±åº¦å­¦ä¹ ç­‰CRUDæ„å¤–æœ‰è¶£çš„ä¸œè¥¿ã€‚ æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ï¼š WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ï¼š HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘ï¼š LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ï¼š è¿›åº¦ï¼šä¸Šç¯‡ ã€ã€‘ å¤§æ•°æ® æ·±åº¦å­¦ä¹  æœºå™¨å­¦ä¹  å¿«æŸ¥ å¼•ç”¨ï¼š","link":"/2022/03/10/Draft/2021/Interesting%20Programs/"},{"title":"Life","text":"4630436162ade97ba2718b7d0c4b3b63d28f4f8957eafc94ae2cbc2b301964471f4200ca57874ab01f66221d5fa6a76de2dd2c9f9abd86b65635bec1a56bfb16ad85973fb74f248b5d4391afaec1aac003a11a707868bcd350531cf8b23c0f2d65030c26c6539db6e354e7e94bbd2e9c49e92dc155a5e6017756821d4e5ddca9d1b9c432446ea4deb157daa36d263133a04db07abade8a12af48c70ceef27342940124e4b38e6b41f57d0b9d94e0849741aeaeff375ca287c7bfa28018fc9ff619af6d8ba0038cc35e78176023d32b7e1b09effa469bfb504bc7ee06c4966f79b3b1698cdcf7a9592db78171310f4076e44132b8083fc5358211b02f94da189d653a74683c179f920f97f1a6610edc2890f40ff40c9d4cf6df432d3e189abecc869ed61263d4129cef16f24e8e40b833948b160e6a27bd1608f445398cf93f87d76a4aa657912153bede5209aa3ac11215310f7867027ed4750e8458460f8a47e7d2f0c073b56410ba5086ba5877d7b38a10eabc3424d58ddb54ee498298f9f6da855fd7d263bc54a3a4449988cf5b4a3406bb2556c5f6e8e62cb28d872e934c083c70428f02639a8ae7844fbf7be6abea98a403f993d20656cd7ace03392c68d447173fc2694ec59a3409f090042b9bd5c4b8e77117ee0f840676455caf6b6e3afc1c226dd31027c6fa35e9071535ae81fd6e136c7d40c5b8f502dc5ff35255b4820acbed18e0d496a8d797cb822557a9bcee5bbb7809e1ecacf3b7d2a5de640a012257cf6640073afe48a63366a24d114eeaa825062404fa6b633bf00372d712c44cba081899b09a77cc70e286291770c96fe541431de7ac20ff0308d9b70ded57525ed1c4a38d9cc5d3324387bafa0eca935c71e66a355e89fbcc5251bc3c0028ac8e23db891758d4e4f02c994692c67f177c5c2b1ac14ded39e4471a87e0e075a41f1ba852c9299a5ff5610d8528c5d821cd8197e063041755f59c8f9eac45f5d29f4ecc28045af8fbba11879fe83a494413ac87072a4185f5967716a02bdc68041681a72464cd0cf31d0795059d69352198e6a2ba04b08fddbcf434206b4c412403f0e3a2b1b07fe72d37d46c20c135ee274d6ed3c3c452cacfcff78fecc8e573b60c48951cb3a48673bb5dd8352e405c5c086aba47932361b6a99646d1fec027da65269c908a9684065887d37e4960dfd76d45394fe8b9c7e5e5b6401ed85ba2f6ae2c5fb0255a27e057e3a5cac80977a5446a575445abf0ab0437885e8bf118aa956e3bed0bba83258ab76abb å—¨ï¼Œè¯·å‡†ç¡®æ— è¯¯åœ°è¾“å…¥å¯†ç æŸ¥çœ‹å“Ÿï¼","link":"/2022/03/12/Draft/2021/Life/"},{"title":"Markdown","text":"Markdownä½œä¸ºè‡ªåª’ä½“äººéå¸¸æ–¹ä¾¿çš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å†å„å¤§è‡ªåª’ä½“ç½‘ç«™é€šç”¨ï¼Œå®ç°ä¸€ç¯‡å¤šå‘çš„æ•ˆæœã€‚å…¶è¯­æ³•ç®€å•ï¼Œå‡ ä¹å¯ä»¥æŠ›å¼ƒé¼ æ ‡ï¼Œç”Ÿæˆä¸€åˆ‡æ ·å¼ã€‚ ç¬¦å· ç¬¦å·(è‹±æ–‡è¾“å…¥çŠ¶æ€ä¸‹ï¼Œå¼€å¤´è¾“å…¥â€œ:â€+è‹±æ–‡å­—æ¯æœ‰æç¤º) Markdownç®­å¤´çš„è¾“å…¥æ–¹æ³•æ±‡æ€» æ™®é€šç®­å¤´ ç®­å¤´å½¢çŠ¶ MarkDown $\\uparrow$ $\\uparrow$ $\\Uparrow$ $\\Uparrow$ $\\downarrow$ $\\downarrow$ $\\Downarrow$ $\\Downarrow$ $\\leftarrow$ $\\leftarrow$ $\\Leftarrow$ $\\Leftarrow$ $\\rightarrow$ $\\rightarrow$ $\\Rightarrow$ $\\Rightarrow$ $\\updownarrow$ $\\updownarrow$ $\\Updownarrow$ $\\Updownarrow$ $\\leftrightarrow$ $\\leftrightarrow$ $\\Leftrightarrow$ $\\Leftrightarrow$ é•¿ç®­å¤´ ç®­å¤´å½¢çŠ¶ MarkDown $\\longleftarrow$ $\\longleftarrow$ $\\Longleftarrow$ $\\Longleftarrow$ $\\longrightarrow$ $\\longrightarrow$ $\\Longrightarrow$ $\\Longrightarrow$ $\\longleftrightarrow$ $\\longleftrightarrow$ $\\Longleftrightarrow$ $\\Longleftrightarrow$ å…¶ä»–ç®­å¤´ ç®­å¤´å½¢çŠ¶ MarkDown $\\twoheadrightarrow$ $\\twoheadrightarrow$ $\\rightarrowtail$ $\\rightarrowtail$ $\\looparrowright$ $\\looparrowright$ $\\curvearrowright$ $\\curvearrowright$ $\\circlearrowright$ $\\circlearrowright$ $\\Rsh$ $\\Rsh$ $\\multimap$ $\\multimap$ $\\leftrightsquigarrow$ $\\leftrightsquigarrow$ $\\rightsquigarrow$ $\\rightsquigarrow$ $\\leadsto$ $\\leadsto$ $\\nearrow$ $\\nearrow$ $\\searrow$ $\\searrow$ $\\swarrow$ $\\swarrow$ $\\nwarrow$ $\\nwarrow$ $\\nleftarrow$ $\\nleftarrow$ $\\nLeftarrow$ $\\nLeftarrow$ $\\nrightarrow$ $\\nrightarrow$ $\\nRightarrow$ $\\nRightarrow$ $\\nleftrightarrow$ $\\nleftrightarrow$ $\\nLeftrightarrow$ $\\nLeftrightarrow$ $\\dashrightarrow$ $\\dashrightarrow$ $\\dashleftarrow$ $\\dashleftarrow$ $\\leftleftarrows$ $\\leftleftarrows$ $\\leftrightarrows$ $\\leftrightarrows$ $\\Lleftarrow$ $\\Lleftarrow$ $\\twoheadleftarrow$ $\\twoheadleftarrow$ $\\leftarrowtail$ $\\leftarrowtail$ $\\looparrowleft$ $\\looparrowleft$ $\\curvearrowleft$ $\\curvearrowleft$ ç®­å¤´å½¢çŠ¶ MarkDown $\\circlearrowleft$ $\\circlearrowleft$ $\\Lsh$ $\\Lsh$ $\\mapsto$ $\\mapsto$ $\\hookleftarrow$ $\\hookleftarrow$ $\\hookrightarrow$ $\\hookrightarrow$ $\\upharpoonright$ $\\upharpoonright$ $\\upharpoonleft$ $\\upharpoonleft$ $\\downharpoonright$ $\\downharpoonright$ $\\downharpoonleft$ $\\downharpoonleft$ $\\leftharpoonup$ $\\leftharpoonup$ $\\rightharpoonup$ $\\rightharpoonup$ $\\rightharpoondown$ $\\rightharpoondown$ $\\leftharpoondown$ $\\leftharpoondown$ $\\upuparrows$ $\\upuparrows$ $\\downdownarrows$ $\\downdownarrows$ $\\rightrightarrows$ $\\rightrightarrows$ $\\rightleftarrows$ $\\rightleftarrows$ $\\leftleftarrows$ $\\leftleftarrows$ $\\leftrightarrows$ $\\leftrightarrows$ $\\rightleftharpoons$ $\\rightleftharpoons$ $\\leftrightharpoons$ $\\leftrightharpoons$ åˆ†å‰²çº¿ LaTeXç¬¦å· è¯­æ³•ï¼š$\\clubsuit$ $\\triangleright$ æ ¼å¼ 1234567891011&amp;emsp;é¦–è¡Œç¼©è¿›~~åˆ é™¤çº¿~~~ç¼©å°~`ä»£ç ` --- åˆ†å‰²çº¿&lt;font color=red&gt;å­—ä½“é¢œè‰²&lt;/font&gt;+ç©ºæ ¼[ç©ºæ ¼]ç©ºæ ¼ å‹¾é€‰æ¡†[å†…å®¹æ–‡å­—](#æ ‡é¢˜) é¡µå†…è·³è½¬[å†…å®¹æ–‡å­—](è·³è½¬ç›®æ ‡æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„)ä¸‹åˆ’çº¿ html æ–¹æ³•ï¼š&lt;span style=&quot;border-bottom:2px dashed yellow;&quot;&gt;æ–‡å­—&lt;/span&gt;ä¸‹åˆ’çº¿ typory æ–¹æ³•ï¼ˆctrl+uï¼‰ï¼š &lt;u&gt;awdw&lt;/u&gt; å›¾ å›¾ç‰‡ï¼ˆhexoï¼‰ å›¾ + æ¨ªç«–å›¾ ![å¼ èŠ·æºª](https://wx1.sinaimg.cn/large/b5d1b710ly1g6bz7n92s7j212w0nr1kx.jpg) + æ¨ªå›¾4 ![v4](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191022182226.png) + ç«–å›¾5 ![ç”µæ± ](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024145940.jpg) å¯¼å›¾ çŠ¶æ€è½¬ç§»å›¾ stateDiagram %% å•ç¨‹ç”Ÿå‘½å‘¨æœŸèµ·ç‚¹æ˜¯å®å¿ƒåœ†ï¼Œç»ˆç‚¹æ˜¯åŒå¿ƒåœ†ï¼Œå†…åœ†ä¸ºå®å¿ƒã€‚ %%è¿™ä¸ªä¾‹å­åŒ…å«æ˜¯3ä¸ªçŠ¶æ€Still, Moving å’Œ Crash. ä»StillçŠ¶æ€å¯ä»¥è½¬ç§»åˆ°Movingï¼Œä»Movingå¯ä»¥è½¬ç§»åˆ°Still æˆ–è€… Crashã€‚ä¸èƒ½ä»Stillè½¬ç§»åˆ°Crash [*] --> Still Still --> [*] Still --> Moving: A transition note right of Moving Movingå¯ä»¥è½¬ç§»åˆ°Stillæˆ–è€…Crash end note Moving --> Still Moving --> Crash Crash --> [*] ç±»å›¾ classDiagram class Duck{ -String beakColor - double weight +swim() +quack() #count() +getPrice(count) double +someAbstractMethod() * -someStaticMethod() $ } class Shape{ %% This whole line is a comment classDiagram class Shape noOfVertices draw() } class Color{ RED BLUE GREEN WHITE BLACK } class Relation{ } classK ..> classL : ä¾èµ–å…³ç³» classA --|> classB : ç»§æ‰¿å…³ç³»ï¼ˆæ³›åŒ–ï¼‰ classM ..|> classN : å®ç°å…³ç³» classG --> classH : å…³è”å…³ç³» classE --o classF : èšåˆå…³ç³» classC --* classD : ç»„åˆå…³ç³» Customer \"1\" --> \"*\" Ticket Student \"1\" --> \"1..*\" Course Galaxy --> \"many\" Star : Contains Sky \"1\"--> \"1\" Sun Parent \"1\" -- \"0..2\" Children Person \"1\" -- \"2\" Eyes é¥¼å›¾ pie title Pie Chart \"Dogs\" : 386 \"Cats\" : 85 \"Rats\" : 150 \"Cows\" : 150 æ¸²æŸ“æ•ˆæœ graph LR id1(Start)-->id2(Stop) style id1 fill:#f9f,stroke:#333,stroke-width:4px; style id2 fill:#f00,stroke:#000,stroke-width:2px,stroke-dasharray:5,5; åŸºç¡€fontawesomeæ”¯æŒ graph TD B[\"fa:fa-twitter for peace\"] B-->C[fa:fa-ban forbidden] B-->D(fa:fa-spinner); B-->E(A fa:fa-camerra-retro perhaps?); è¿çº¿ graph TD A1==TEXT===B1 A2-->|text|B2 A3..-B3 èŠ‚ç‚¹å½¢çŠ¶ graph TD B[bname] C(cname) D((dname)) E>ename] F{fname} ç”˜ç‰¹å›¾ å…³é”®è¯è¯´æ˜ï¼š titleâ€”æ ‡é¢˜ dateFormatâ€”æ—¥æœŸæ ¼å¼ sectionâ€”æ¨¡å— Completedâ€”å·²ç»å®Œæˆ Activeâ€”å½“å‰æ­£åœ¨è¿›è¡Œ Futureâ€”åç»­å¾…å¤„ç† critâ€”å…³é”®é˜¶æ®µ gantt dateFormat YYYY-MM-DD title Adding GANTT diagram functionality to mermaid section A section Completed task :done, des1, 2014-01-06,2014-01-08 Active task :active, des2, 2014-01-09, 3d future task : des3, after des2, 5d future task2 : des4, after des3, 5d section Critical tasks Completed task in the critical line :crit, done, 2014-01-06,24h Implement parser and json :crit, done, after des1, 2d Create tests for parser :crit, active, 3d Future task in critical line :crit, 5d Create tests for renderer :2d Add to ,mermaid :1d æµç¨‹å›¾ graph TD A[æ–¹å½¢] -->B(åœ†è§’) B --> C{æ¡ä»¶a} C -->|a=1| D[ç»“æœ1] C -->|a=2| E[ç»“æœ2] F[ç«–å‘æµç¨‹å›¾] æ—¶åºå›¾ç¤ºä¾‹ 123456789Title:æ—¶åºå›¾ç¤ºä¾‹å®¢æˆ·ç«¯-&gt;æœåŠ¡ç«¯: æˆ‘æƒ³æ‰¾ä½ æ‹¿ä¸‹æ•°æ® SYNæœåŠ¡ç«¯--&gt;å®¢æˆ·ç«¯: æˆ‘æ”¶åˆ°ä½ çš„è¯·æ±‚å•¦ ACK+SYNå®¢æˆ·ç«¯-&gt;&gt;æœåŠ¡ç«¯: æˆ‘æ”¶åˆ°ä½ çš„ç¡®è®¤å•¦ï¼Œæˆ‘ä»¬å¼€å§‹é€šä¿¡å§ ACKNote right of æœåŠ¡ç«¯: æˆ‘æ˜¯ä¸€ä¸ªæœåŠ¡ç«¯Note left of å®¢æˆ·ç«¯: æˆ‘æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯Note over æœåŠ¡ç«¯,å®¢æˆ·ç«¯: TCP ä¸‰æ¬¡æ¡æ‰‹participant è§‚å¯Ÿè€… å…¬å¼ $$ \\mathbf{V}_1 \\times \\mathbf{V}_2 = \\begin{vmatrix} \\mathbf{i} &amp; \\mathbf{j} &amp; \\mathbf{k} \\ \\frac{\\partial X}{\\partial u} &amp; \\frac{\\partial Y}{\\partial u} &amp; 0 \\ \\frac{\\partial X}{\\partial v} &amp; \\frac{\\partial Y}{\\partial v} &amp; 0 \\ \\end{vmatrix} ${$tep1}{\\style{visibility:hidden}{(x+1)(x+1)}} $$ è¡¨æ ¼ ctl+å›è½¦æ–°å¢è¡Œ å·¦å¯¹é½ å³å¯¹é½ å±…ä¸­å¯¹é½ å•å…ƒæ ¼ å•å…ƒæ ¼ å•å…ƒæ ¼ å•å…ƒæ ¼ å•å…ƒæ ¼ å•å…ƒæ ¼ ä»£ç  1hello! Hexoå¯æŠ˜å  main.java >folded1å¯æŠ˜å ä»£ç å— è„šæ³¨ æ–‡å­—å†…å®¹ [1] todoåˆ—è¡¨ +ç©ºæ ¼[ç©ºæ ¼]ç©ºæ ¼ å‹¾é€‰æ¡†+ [ ] [ ] [ ] è¯»ä¹¦ ã€Šã€‹ ä¸“ä¸š ï¼ˆè®¾è®¡æ¨¡å¼ä»£ç Demoï¼Œ ç½‘ç»œï¼Œ JVMï¼Œ VUEé¡¹ç›®ï¼Œ Linuxï¼‰ éŸ³ä¹ å‰ä»–è°±æ‰’è°±å­¦ä¹  è¿åŠ¨ ç”»ç”» Typory è‡ªå®šä¹‰å…ƒç´ æ ·å¼ï¼ˆä¿®æ”¹CSSï¼‰ å¿«æ·é”® å…¶ä»– emojiã€å¤–å¯è®¿ã€‘ï¼ŒTypora å¿«æ·é”®WIN+ã€‚ ğŸˆğŸˆ ğŸ¤² ğŸ˜ inserted =&gt; inserted 29th =&gt; 29th H20 =&gt; H2O basic footnote[1:1] here is an inline footnote[^2](inline footnote) and another one[2] and another one[3] footnote content The HTML specification is maintained by the W3C. flowchat st=>start: Start|past:>http://www.google.com[blank] e=>end: End:>http://www.google.com op1=>operation: My Operation|past op2=>operation: Stuff|current sub1=>subroutine: My Subroutine|invalid cond=>condition: Yes or No?|approved:>http://www.google.com c2=>condition: Good idea|rejected io=>inputoutput: catch somethingâ€¦|request st->op1(right)->cond cond(yes, right)->c2 cond(no)->sub1(left)->op1 c2(yes)->io->e c2(no)->op2->e{\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12} var code = document.getElementById(\"flowchart-0-code\").value; var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-0-options\").value)); var diagram = flowchart.parse(code); diagram.drawSVG(\"flowchart-0\", options); basic footnote content â†©ï¸ â†©ï¸ paragraph â†©ï¸ footnote content with some markdown â†©ï¸","link":"/2022/03/10/Draft/2021/Markdown/"},{"title":"MyBatis-Plus","text":"MyBatis-Plus æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ï¼š WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ï¼š HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘ï¼š LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ï¼š è¿›åº¦ï¼šä¸Šç¯‡ ã€ã€‘ å¿«æŸ¥ å¼•ç”¨ï¼š","link":"/2022/03/10/Draft/2021/MyBatis-Plus/"},{"title":"NO GAME NO LIFE","text":"æ¸¸æˆäººç”Ÿ ğŸˆğŸˆğŸˆğŸ˜ å‰ä»–æ‰’è°±--æ•°ç»˜--è‹±è¯­--æ‘„å½± ğŸ˜ğŸˆğŸˆğŸˆ ç›®å‰å­¦ä¹ è·¯çº¿å†…å®¹ ä¼˜å…ˆç­‰çº§ å‰ä»–ä¹ç†ï¼Œæ‰’è°± ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ æ•°ç»˜ ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ è‹±è¯­ ğŸ˜ğŸ˜ğŸ˜ğŸ˜ æ‘„å½± ğŸ˜ğŸ˜ğŸ˜ğŸ˜ è¿åŠ¨ ğŸ˜ğŸ˜ğŸ˜ğŸ˜ è‡ªåª’ä½“ ğŸ˜ğŸ˜ğŸ˜ğŸ˜ å¹³é¢è®¾è®¡ ğŸ˜ğŸ˜ğŸ˜ğŸ˜ ç›®å‰å­¦ä¹ è·¯çº¿å†…å®¹ ä¼˜å…ˆç­‰çº§ éŸ³ä¹ å‰ä»–ï¼Œé’¢ç´ï¼Œå°¤å…‹é‡Œé‡Œï¼Œæ‹‡æŒ‡ç´ï¼Œç®«ï¼Œå£ç´ï¼Œæ¼”å”±ï¼Œè¯æ›² ç»˜ç”» æ•°ç»˜ è®¾è®¡ å¹³é¢ è¿åŠ¨ ç¯®çƒï¼Œç½‘çƒ è¯­è¨€ è‹±è¯­ï¼Œæ—¥è¯­ æ‘„å½± äººåƒï¼Œæ™¯è‰² è‡ªåª’ä½“ å‰ªè¾‘ï¼Œç‰¹æ•ˆ ä¿®å›¾ åŠå…¬æ•ˆç‡å·¥å…·é«˜ç«¯æ“ä½œ OFFICE","link":"/2021/02/25/Draft/2021/NO%20GAME%20NO%20LIFE/"},{"title":"Nginx","text":"Nginx(&quot;engine x&quot;)æ˜¯ä¸€æ¬¾æ˜¯ç”±ä¿„ç½—æ–¯çš„ç¨‹åºè®¾è®¡å¸ˆIgor Sysoevæ‰€å¼€å‘é«˜æ€§èƒ½çš„ Webå’Œ åå‘ä»£ç† æœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª IMAP/POP3/SMTP ä»£ç†æœåŠ¡å™¨ã€‚ åœ¨é«˜è¿æ¥å¹¶å‘çš„æƒ…å†µä¸‹ï¼ŒNginxæ˜¯ApacheæœåŠ¡å™¨ä¸é”™çš„æ›¿ä»£å“ã€‚ ä¸‹è½½ å®‰è£…éƒ¨ç½² â€‹ è§£å‹åä¸è¦ç›´æ¥ç‚¹å‡»exeï¼Œä¼šå¯¼è‡´ä¿®æ”¹é…ç½®åé‡å¯ã€åœæ­¢nginxæ— æ•ˆï¼Œéœ€è¦æ‰‹åŠ¨å…³é—­ä»»åŠ¡ç®¡ç†å™¨å†…çš„æ‰€æœ‰nginxè¿›ç¨‹ï¼Œå†å¯åŠ¨æ‰å¯ä»¥ã€‚ 12345start nginx//å¯åŠ¨æœåŠ¡nginx -s reload//é‡æ–°åŠ è½½é…ç½®å¹¶å¯åŠ¨nginx -s stop// å¿«é€Ÿåœæ­¢nginx -s quit//å®Œæ•´æœ‰åºçš„å…³é—­nginx -t // æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡® é…ç½®è‡ªå®šä¹‰nginx.conf æŒ‡ä»¤å¿…é¡»ä»¥åˆ†å·ç»“æŸ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136#user nobody;#==å·¥ä½œè¿›ç¨‹æ•°ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºcpuæ ¸å¿ƒæ•°worker_processes 1;#error_log logs/error.log;#error_log logs/error.log notice;#error_log logs/error.log info;#pid logs/nginx.pid;events { #==æœ€å¤§è¿æ¥æ•°ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºcpu*2048 worker_connections 1024;}http { include mime.types; default_type application/octet-stream; #log_format main '$remote_addr - $remote_user [$time_local] &quot;$request&quot; ' # '$status $body_bytes_sent &quot;$http_referer&quot; ' # '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'; #access_log logs/access.log main; sendfile on; #tcp_nopush on; #keepalive_timeout 0; #==å®¢æˆ·ç«¯é“¾æ¥è¶…æ—¶æ—¶é—´ keepalive_timeout 65; #gzip on; #å½“é…ç½®å¤šä¸ªserverèŠ‚ç‚¹æ—¶ï¼Œé»˜è®¤server namesçš„ç¼“å­˜åŒºå¤§å°å°±ä¸å¤Ÿäº†ï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®å¤§ä¸€ç‚¹ server_names_hash_bucket_size 512; #serverè¡¨ç¤ºè™šæ‹Ÿä¸»æœºå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç«™ç‚¹ï¼Œå¯ä»¥é…ç½®å¤šä¸ªserverèŠ‚ç‚¹æ­å»ºå¤šä¸ªç«™ç‚¹ #æ¯ä¸€ä¸ªè¯·æ±‚è¿›æ¥ç¡®å®šä½¿ç”¨å“ªä¸ªserverç”±server_nameç¡®å®š server { #ç«™ç‚¹ç›‘å¬ç«¯å£ listen 8800; #ç«™ç‚¹è®¿é—®åŸŸå server_name localhost; #ç¼–ç æ ¼å¼ï¼Œé¿å…urlå‚æ•°ä¹±ç  charset utf-8; #access_log logs/host.access.log main; #locationç”¨æ¥åŒ¹é…åŒä¸€åŸŸåä¸‹å¤šä¸ªURIçš„è®¿é—®è§„åˆ™ #æ¯”å¦‚åŠ¨æ€èµ„æºå¦‚ä½•è·³è½¬ï¼Œé™æ€èµ„æºå¦‚ä½•è·³è½¬ç­‰ #locationåé¢è·Ÿç€çš„/ä»£è¡¨åŒ¹é…è§„åˆ™ location / { #ç«™ç‚¹æ ¹ç›®å½•ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä½¿ç»å¯¹è·¯å¾„ root html; #é»˜è®¤ä¸»é¡µ index index.html index.htm; #è½¬å‘åç«¯ç«™ç‚¹åœ°å€ï¼Œä¸€èˆ¬ç”¨äºåšè½¯è´Ÿè½½ï¼Œè½®è¯¢åç«¯æœåŠ¡å™¨ #proxy_pass http://10.11.12.237:8080; #æ‹’ç»è¯·æ±‚ï¼Œè¿”å›403ï¼Œä¸€èˆ¬ç”¨äºæŸäº›ç›®å½•ç¦æ­¢è®¿é—® #deny all; #å…è®¸è¯·æ±‚ #allow all; add_header 'Access-Control-Allow-Origin' '*'; add_header 'Access-Control-Allow-Credentials' 'true'; add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS'; add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type'; #é‡æ–°å®šä¹‰æˆ–è€…æ·»åŠ å‘å¾€åç«¯æœåŠ¡å™¨çš„è¯·æ±‚å¤´ #ç»™è¯·æ±‚å¤´ä¸­æ·»åŠ å®¢æˆ·è¯·æ±‚ä¸»æœºå proxy_set_header Host $host; #ç»™è¯·æ±‚å¤´ä¸­æ·»åŠ å®¢æˆ·ç«¯IP proxy_set_header X-Real-IP $remote_addr; #å°†$remote_addrå˜é‡å€¼æ·»åŠ åœ¨å®¢æˆ·ç«¯â€œX-Forwarded-Forâ€è¯·æ±‚å¤´çš„åé¢ï¼Œå¹¶ä»¥é€—å·åˆ†éš”ã€‚ å¦‚æœå®¢æˆ·ç«¯è¯·æ±‚æœªæºå¸¦â€œX-Forwarded-Forâ€è¯·æ±‚å¤´ï¼Œ$proxy_add_x_forwarded_forå˜é‡å€¼å°†ä¸$remote_addrå˜é‡ç›¸åŒ proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; #ç»™è¯·æ±‚å¤´ä¸­æ·»åŠ å®¢æˆ·ç«¯çš„Cookie proxy_set_header Cookie $http_cookie; #å°†ä½¿ç”¨ä»£ç†æœåŠ¡å™¨çš„ä¸»åŸŸåå’Œç«¯å£å·æ¥æ›¿æ¢ã€‚å¦‚æœç«¯å£æ˜¯80ï¼Œå¯ä»¥ä¸åŠ ã€‚ proxy_redirect off; #æµè§ˆå™¨å¯¹ Cookie æœ‰å¾ˆå¤šé™åˆ¶ï¼Œå¦‚æœ Cookie çš„ Domain éƒ¨åˆ†ä¸å½“å‰é¡µé¢çš„ Domain ä¸åŒ¹é…å°±æ— æ³•å†™å…¥ã€‚ #æ‰€ä»¥å¦‚æœè¯·æ±‚ A åŸŸåï¼ŒæœåŠ¡å™¨ proxy_pass åˆ° B åŸŸåï¼Œç„¶å B æœåŠ¡å™¨è¾“å‡º Domian=B çš„ Cookieï¼Œ #å‰ç«¯çš„é¡µé¢ä¾ç„¶åœç•™åœ¨ A åŸŸåä¸Šï¼Œäºæ˜¯æµè§ˆå™¨å°±æ— æ³•å°† Cookie å†™å…¥ã€‚ #ä¸ä»…æ˜¯åŸŸåï¼Œæµè§ˆå™¨å¯¹ Path ä¹Ÿæœ‰é™åˆ¶ã€‚æˆ‘ä»¬ç»å¸¸ä¼š proxy_pass åˆ°ç›®æ ‡æœåŠ¡å™¨çš„æŸä¸ª Path ä¸‹ï¼Œ #ä¸æŠŠè¿™ä¸ª Path æš´éœ²ç»™æµè§ˆå™¨ã€‚è¿™æ—¶å€™å¦‚æœç›®æ ‡æœåŠ¡å™¨çš„ Cookie å†™æ­»äº† Path ä¹Ÿä¼šå‡ºç° Cookie æ— æ³•å†™å…¥çš„é—®é¢˜ã€‚ #è®¾ç½®â€œSet-Cookieâ€å“åº”å¤´ä¸­çš„domainå±æ€§çš„æ›¿æ¢æ–‡æœ¬ï¼Œå…¶å€¼å¯ä»¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å¼æˆ–ä¸€ä¸ªå¼•ç”¨çš„å˜é‡ #è½¬å‘åç«¯æœåŠ¡å™¨å¦‚æœéœ€è¦Cookieåˆ™éœ€è¦å°†cookie domainä¹Ÿè¿›è¡Œè½¬æ¢ï¼Œå¦åˆ™å‰ç«¯åŸŸåä¸åç«¯åŸŸåä¸ä¸€è‡´cookieå°±ä¼šæ— æ³•å­˜å– #é…ç½®è§„åˆ™ï¼šproxy_cookie_domain serverDomain(åç«¯æœåŠ¡å™¨åŸŸ) nginxDomain(nginxæœåŠ¡å™¨åŸŸ) proxy_cookie_domain localhost .testcaigou800.com; #å–æ¶ˆå½“å‰é…ç½®çº§åˆ«çš„æ‰€æœ‰proxy_cookie_domainæŒ‡ä»¤ #proxy_cookie_domain off; #ä¸åç«¯æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´ã€‚ä¸€èˆ¬ä¸å¯èƒ½å¤§äº75ç§’ï¼› proxy_connect_timeout 30; } #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } } #å½“éœ€è¦å¯¹åŒä¸€ç«¯å£ç›‘å¬å¤šä¸ªåŸŸåæ—¶ï¼Œä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼Œç«¯å£ç›¸åŒåŸŸåä¸åŒï¼Œserver_nameä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™è¿›è¡Œé…ç½® #ä½†è¦æ³¨æ„serverè¿‡å¤šéœ€è¦æ‰‹åŠ¨æ‰©å¤§server_names_hash_bucket_sizeç¼“å­˜åŒºå¤§å° server { listen 80; server_name www.abc.com; charset utf-8; location / { proxy_pass http://localhost:10001; } } server { listen 80; server_name aaa.abc.com; charset utf-8; location / { proxy_pass http://localhost:20002; } } åŠŸèƒ½ 1ï¼‰åå‘ä»£ç† æ­£å‘ä»£ç†ï¼šç‰¹å®šæƒ…å†µä¸‹ï¼Œä»£ç†ç”¨æˆ·è®¿é—®æœåŠ¡å™¨ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨çš„è®¾ç½®ä»£ç†æœåŠ¡å™¨çš„ipå’Œç«¯å£å·ã€‚ åå‘ä»£ç†ï¼šæ˜¯ç”¨æ¥ä»£ç†æœåŠ¡å™¨ï¼Œä»£ç†ç”¨æˆ·è¦è®¿é—®çš„ç›®æ ‡æœåŠ¡å™¨ã€‚ä»£ç†æœåŠ¡å™¨æ¥å—è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œçš„æœåŠ¡å™¨(æœåŠ¡é›†ç¾¤æ¨¡å¼)ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªæœåŠ¡å™¨ã€‚ Nginxåœ¨åå‘ä»£ç†ä¸Šï¼Œæä¾›çµæ´»çš„åŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„æ­£åˆ™é‡‡ç”¨ä¸åŒçš„è½¬å‘ç­–ç•¥ï¼Œå¦‚å›¾è®¾ç½®å¥½åä¸åŒçš„è¯·æ±‚å°±å¯ä»¥èµ°ä¸åŒçš„æœåŠ¡å™¨ã€‚ 2ï¼‰è´Ÿè½½å‡è¡¡ è´Ÿè½½å‡è¡¡ï¼šå¤šåœ¨é«˜å¹¶å‘æƒ…å†µä¸‹éœ€è¦ä½¿ç”¨ã€‚å…¶åŸç†å°±æ˜¯å°†æ•°æ®æµé‡åˆ†æ‘Šåˆ°å¤šä¸ªæœåŠ¡å™¨æ‰§è¡Œï¼Œå‡è½»æ¯å°æœåŠ¡å™¨çš„å‹åŠ›ï¼Œå¤šå°æœåŠ¡å™¨(é›†ç¾¤)å…±åŒå®Œæˆå·¥ä½œä»»åŠ¡ï¼Œä»è€Œæé«˜äº†æ•°æ®çš„ååé‡ã€‚ Nginxå¯ä½¿ç”¨çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æœ‰ï¼šè½®è¯¢ï¼ˆé»˜è®¤ï¼‰ã€æƒé‡ã€ip_hashã€url_hash(ç¬¬ä¸‰æ–¹)ã€fair(ç¬¬ä¸‰æ–¹)ã€‚ 3ï¼‰åŠ¨é™åˆ†ç¦» å¸¸ç”¨äºå‰åç«¯åˆ†ç¦»ï¼ŒNginxæä¾›çš„åŠ¨é™åˆ†ç¦»æ˜¯æŒ‡æŠŠåŠ¨æ€è¯·æ±‚å’Œé™æ€è¯·æ±‚åˆ†ç¦»å¼€ï¼Œåˆé€‚çš„æœåŠ¡å™¨å¤„ç†ç›¸åº”çš„è¯·æ±‚ï¼Œä½¿æ•´ä¸ªæœåŠ¡å™¨ç³»ç»Ÿçš„æ€§èƒ½ã€æ•ˆç‡æ›´é«˜ã€‚ Nginxå¯ä»¥æ ¹æ®é…ç½®å¯¹ä¸åŒçš„è¯·æ±‚åšä¸åŒè½¬å‘ï¼Œè¿™æ˜¯åŠ¨æ€åˆ†ç¦»çš„åŸºç¡€ã€‚é™æ€è¯·æ±‚å¯¹åº”çš„é™æ€èµ„æºå¯ä»¥ç›´æ¥æ”¾åœ¨Nginxä¸Šåšç¼“å†²ï¼Œæ›´å¥½çš„åšæ³•æ˜¯æ”¾åœ¨ç›¸åº”çš„ç¼“å†²æœåŠ¡å™¨ä¸Šã€‚åŠ¨æ€è¯·æ±‚ç”±ç›¸åº”çš„åç«¯æœåŠ¡å™¨å¤„ç†ã€‚","link":"/2021/02/24/Draft/2021/Nginx/"},{"title":"Office","text":"Officeé«˜çº§æ•™ç¨‹è®°å½•ï¼Œè¾¹ç”¨è¾¹è®°å½• WORD PPT EXCEL å‡½æ•°ç¯‡ æ›¿æ¢ =LEFT(C2835,LEN(C2835)-1)&amp;&quot;è·¯-æ•£ç›˜&quot; æå– =MIDï¼ˆï¼‰ ç»“åˆ =CONCATENATE(A2,B2) éšæœº =CHOOSE(RANDBETWEEN(1,2),&quot;å‡ºè®©&quot;,&quot;åˆ’æ‹¨&quot;) éšæœºæ•° =RANDBETWEEN(5,100) å¥‡å¶ =MOD(ROW(),2) æ›¿æ¢ï¼Œæ’å…¥ =REPLACE(A1,2,,&quot;09&quot;) æŸ¥æ‰¾ =FIND(&quot;K&quot;,A2,1) æ¨¡ç³ŠåŒ¹é…åˆ é™¤ è®¡ç®—é‡å¤æ•°é‡ Countifï¼ˆç»Ÿè®¡èŒƒå›´ï¼Œç»Ÿè®¡å¯¹è±¡ï¼‰ =INDEX(Sheet0!A:AA,ROW(),MATCH(INDIRECT((CHAR(COLUMN()+ 64)&amp;1)),Sheet0!A1:AA1,0))å¤åˆ¶å¯¹åº”åˆ—åå•å…ƒæ ¼","link":"/2022/03/10/Draft/2021/Office/"},{"title":"è®°å½•","text":"4630436162ade97ba2718b7d0c4b3b63d28f4f8957eafc94ae2cbc2b30196447e8d66bea8cd3f7a4327f65e3b64dbe93c997a3269120927578a7ba1bad71241b4fb28127a4e8b33a0e34c5726ad1c9843488a1c705882ffc8e7093b18bb9ffb2bb3b4cbeeb88878ded330d5d7876b232c7d7c12d28cd0bc2543c1a3af7b50338c3edf3702b05d599c0fa807f66c86bee7fcc324c92218da4c6a1f860a4d460fc33e51d457577f8908347481880e2aa0287b98dabeac1995aad3aeb80f998405aeb6363096c9911b26f345bcf4edab9d5a39ccfa42b81acfa1061510db12a6b63303993423eccb15c813da941da8dc5975f2c34bc9c1f5c4a32e470b7ed96bebf425025d4de8e086745289c8df28eb5ff5f210cb87679e7a9e2fa46bf7151976120ae669a9b7918369410dd84d7f800f70fbc0bef41458d2fda095e1ddb148120d966448d43ff7c857666f1fea73643c1ecbeae0d57aa23de1292e8e5bec5f380781f216d9756af3ba90683a9d603904c9fc430f24589dab7fb95861dc39c199295eeef91449f2ad8fb9321ddf394286444b139a85bf9e9556029bdb180eb5afa5436b631d761be20a4081913a905aa6826f6b91c9db2c627476e85db2b0c5532a6026680f9656c7eff1e0bd10e16740bf7c09247f4c5efb34a0504bace8d9670814e8f468d94dd04ccc9e65b59a8d6aff09fc770b50c8aa6f2cd82688e8d9d149206c098e110153bcf3731499b66e23bdb1ba27b8e28d61761e9da91a0e23db4aa184f17fdf54a84983cb22fd94e3131dd548cdd25ea4292a0b5fa97ceb9f35d4f86c6acc0a90016db661050d26715d5ef9b52a5c3a030b644ad51a8be8aff3a6dd82e14ad287127aed51516473cac6779db8be9279b41734a7817e17358a2fb397e948f98472c4a7ee9aa6b59e15df1c27f778a6d50e4a7210a955f4793946ad2333b86b67d217ac60fdce87c732dd6f74c40017a57bdb08510bc52198abbfd56ff830f5bcbb614dedfff8058cbe9d86b076efa0df663b125bf7f9551f77093e649b2ce18e3e7004bff526cadd6d650a9efef83525b1053496716a4a751bc9aac85a22b40e49102a3d8eccbcd0ef370d418e02067dc75af59ce90a6a22cdb6e048ab4f8c253100eccc3d66b3886776cb563aa5bf74fe00d32c86b86e0f370c659bc1772305bde9386ae75deac19b53fb68d29cbdf55eb90b2b4a078bd3801f1b7e7194fd4c310089537d1f0a674491a4c2b71b27353ce3bb707deea4a0bbafa1fedfbb9062fe1e28a024aae150f3ae556bc0e5ea87de1bf7d5c3beefc35c26b9bf29d7d9cc01d4d3f2e339b70820a776534ce8ab939418065de8d38f7303edbb29a2f2a10e36147d088ac4873fb15fef338d2498397b818486b32907d3ae6826dba0fbaa301400b5bca2916a2c329e1178fd231abfb1f0c179c0050cf33d09c891d845c15a6a455cf3b3174767a605fe532ac6cb58eee8289b07045386f36ab4c2527f5fc66ec0125d7c5c1e05ee6264ac0f542f4e01cf13424dc01e20a8f2faa0f0ab8970336913237f66c9308c6ac6521ae231463803ad8eeb9a349497b48be1929a61809bf058e684f141e72cc372efb10321ac571042d457ac8b08a1d7614e1dfa23b656727ae9dc5ce227e59c289688f854cdaacc4d85bd056e7117c444941c52283d90134671700bf04957e28377ffb4db2a5ba2f27e6c1672a13ee75a612d82d2920683cd841a5a35618b36cca3e092a8de15e9bdec894b22ff722c2a17028b6245c486e96992706292115abede30126c2ac5f15de5f8c39c8d8a56f35f3af4f286553eea1f3c5db76daa62d0241f8f9431bebbc7ae5ab4960c788e9dbf7b2511fa728b230aee8373da2b0dccdc74eb44d867a652b2106cae62e31090c4c107296a3b326572de20dedd289f6dba474bfe67fc05149400f82c8e6a3e66df92ea6d9fc4091354dcecf8ae9143aea2e6f5546adbec286cb58dace53f448f527814012ea69f770621e7510e37013a45915c8effd3b96ad73e83b79668b92c75d927c48245fa6b121e627fca1e2445605ec8f31313d6f1aa5ca261123bc0d05f0c4e00c71d80b86f01c5c43ce28e874cef6cc9184b8ef63ac8f62b4c5e1e99449782e71a0fcb2c3baf415b259334a8d48c391217816edfebc343566c588ec572cacffbc1ab17ca39cba116ee474d0dc8119929cfcf3b211004ae9644ff9034c7019cec448f13f766350cee924c447ca52b767b476bea2d883622bff9677dfa744c9642a783de69eb662fa21808baa8580fc593f45b3570e6a2eb3b33d35e5c26d77848e6141a9b52fee9411c14d6142783a676d756820d2db136f9da2fd1e8ef0ec44a55c4c5be2a301685aebcfad928067cce9606d9c453852437ee4fdc75c3f9f0e74629508b6efa22aaf922897d9c0ea0642f1d6613858d4eb1558b0ebbb61797f712ff57658d85d19660b58f367238f4cf88665a4b28321a65efa35f07ec4e4bfdea18363d57a4caa8dda920abb7d4df018bd1c03fc1ab9dd9907655fdfce4efdadcfc86f4b84458b283c8858fbc1ef9b0e8d3b66ba796885c7099478f52468104c2b71c366ca56d7878a67dfd95ded9eea207f8891146e70557681e94017e8bf899bc61c26fea4acc10435da71b07a02666458afec49d78e979e125f0b186f8aefb5dae32fbad7925419154343c5814e00218bb857a309deb298625f8217ccbadf7e21e08beda00f4e936e199ab7606540fc7b785ced919c988b169b32528d1aa1821e4dae3d92beed5207714ff7173c48f7448317a94a87125db410402714c6e8618079ef51c084b0df4a2272de67b4bb3ecf7462c28d2408404fb9ab577c814537eef9a9c589c575674854a4581f89f9124b699b00cdd3e5ec26b54e382d3d3df9c13b212a8848aef17645b909ab1b77ffa8d7033a35ebcd1bc43f3ec34cf4082762bf94cc1934c537044d8640115eb5cd8f7b872e565e656b8e9ce435ee7671d8c98164ed345402191e8a0b6e29e6adc9387919cf29d5a13b0e00c06e70115975a2da6f0f37873905760b5503e1377213f5dfb3941f624fd325bb2bebb6e5b85aa6fea1992a4dfb147132c2555b66d95f673bf00efb83279fe89f6567f47b4c47829e2c728b4c930dda08ec21f1cac64d47a53028398c4f4b148d72fa63bc724b4fb42c712173b9fd23a9d652f6040179801d098ab1b4adbbcf62b642bab18f26a912c0df1eb65a82265eac4784458d06c2a1a5fa1f4881f815e349760f1c94e0274a279d001a8865903b76f2616232c5ce03ebbfaae5ffcbf96beb6d7f69d414900675a09224bf16a29e2d178046810e33e060e7ba36bd428a8c50e4ba4f5c45431edf28d675f24c292eb6ea35d20ecfcd5c8318f5532ed961ccd00992312819eb00bc9c9a922215e17a7d2358a4b64dc749af0a293e08d0317a1bebc39b3d70cf27c4b40ad00883730ffe4d55c0fb01936c079c0a47a5ca90a921cd3c4eaab7260dffa38e4c1dc1533f58dacbe1b5047b57684c5e5b0c4d92bc580d6b01df05fa1030feeec243b536f1089c8c78cf1f14995b0f195c632e216e98e7aee0ab6d1d00b542def517563968134bb1e233a3ff1a14bc37d765314d2d990e01b5c6691fff37bfb79adc579c4d6c3225c78d9736e249279323dc5b6b3b60acd361e5e37e3713c4da62579b72d7eff018345db952ee06dd28c7c3288592 å—¨ï¼Œè¯·å‡†ç¡®æ— è¯¯åœ°è¾“å…¥å¯†ç æŸ¥çœ‹å“Ÿï¼","link":"/2022/03/12/Draft/2021/Record/"},{"title":"Software Engineer","text":"é«˜çº§å…¨æ ˆè½¯ä»¶å·¥ç¨‹å¸ˆå…»æˆè®° GISç ”å‘å·¥ç¨‹å¸ˆï¼Œå…¨æ ˆJavaå¼€å‘å·¥ç¨‹å¸ˆ ğŸˆğŸˆğŸˆğŸ˜ TODO ğŸ˜ğŸˆğŸˆğŸˆ ç®¡ç† äººé™…å…³ç³» åå¤§é¢†åŸŸ æŠ€æœ¯ è®¾è®¡æ¨¡å¼ Redis ç®—æ³• ç›®é¢˜(JavaåŸºç¡€æ·±å…¥ï¼Œå…¶ä»–é¢è¯•é¢˜) Springcloud ç›®å‰å­¦ä¹ è·¯çº¿å†…å®¹ ä¼˜å…ˆç­‰çº§ è®¾è®¡æ¨¡å¼ ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ Redis ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ RabbitMQ ğŸ˜ğŸ˜ğŸ˜ğŸ˜ æ•°æ®åº“ä¼˜åŒ– ğŸ˜ğŸ˜ğŸ˜ğŸ˜ ç½‘ç»œ ğŸ˜ğŸ˜ğŸ˜ğŸ˜ ç®—æ³• ğŸ˜ğŸ˜ğŸ˜ğŸ˜ SpringCloud ğŸ˜ğŸ˜ğŸ˜ğŸ˜ GIS ğŸ˜ğŸ˜ğŸ˜ğŸ˜ Linux ğŸ˜ğŸ˜ğŸ˜ JVM ğŸ˜ğŸ˜ Dubbo ğŸ˜ğŸ˜ ElasticSearch ğŸ˜ğŸ˜ Node.js ğŸ˜ğŸ˜ ES6 ğŸ˜ğŸ˜ Docker ğŸ˜ğŸ˜ åˆ†å¸ƒå¼ ğŸ˜ğŸ˜ é«˜å¹¶å‘ ğŸ˜ğŸ˜ Python ğŸ˜ğŸ˜ å­¦ä¹ å†…å®¹ é¡¹ç›®åç§° è¯¦ç»†å†…å®¹ è¿›åº¦è®°å½• è½¯ä»¶å·¥ç¨‹ ï¼ˆå¾®æœåŠ¡ï¼Œåˆ†å¸ƒå¼ï¼Œé«˜å¹¶å‘ï¼Œå¤šçº¿ç¨‹ï¼Œæ€§èƒ½è°ƒä¼˜ï¼Œç¼“å­˜ï¼Œæ¶ˆæ¯ï¼Œæœç´¢ï¼‰å…¶ä»–åº”ç”¨æœåŠ¡å™¨äº†è§£ã€‚ é¡¹ç›® ä¸ªäººåšå®¢ ä¸ªäººåšå®¢å®Œæˆ å‰ç«¯ VUEï¼ŒBootstrapï¼ŒJSï¼ŒHtmlï¼ŒJQueryï¼ŒAjaxï¼ŒThymeleaf,Axios åç«¯ åŸºç¡€æ·±å…¥ï¼Œä»£ç å¤šå†™ æ¡†æ¶ æ¡†æ¶æ‰å®æ·±å…¥ï¼ŒSpringCloudå°è¯•äº†è§£ æ•°æ®åº“ OracleåŸºç¡€ä½¿ç”¨ï¼ŒMySQL,ç´¢å¼•ï¼Œè§¦å‘å™¨ï¼Œå­˜å‚¨è¿‡ç¨‹ï¼Œä¼˜åŒ–ï¼ˆæ–‡ä»¶åŒ–ï¼Œä»è®¾è®¡åˆ°e-rå›¾åˆ°åˆ›å»ºï¼‰ï¼ŒRedis,MangoDB ç®—æ³• ç®—æ³•æœºè¯•é¢˜ è®¾è®¡æ¨¡å¼ Mybatisï¼ˆ 1ã€Builderæ¨¡å¼5ã€ç»„åˆæ¨¡å¼9ã€è¿­ä»£å™¨æ¨¡å¼2ã€å·¥å‚æ¨¡å¼3ã€å•ä¾‹æ¨¡å¼4ã€ä»£ç†6ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼7ã€é€‚é…å™¨æ¨¡å¼8ã€è£…é¥°è€…æ¨¡å¼ï¼‰Springï¼ˆ1.ç®€å•å·¥å‚2.å·¥å‚æ–¹æ³•3.å•ä¾‹æ¨¡å¼4.é€‚é…å™¨æ¨¡å¼5.è£…é¥°å™¨æ¨¡å¼6.ä»£ç†æ¨¡å¼7.è§‚å¯Ÿè€…æ¨¡å¼8.ç­–ç•¥æ¨¡å¼9.æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ï¼‰ ç½‘ç»œ åè®® ç³»ç»Ÿ Linuxå¸¸ç”¨å‘½ä»¤ï¼ŒJVM å·¥å…· Gitï¼ŒSVNé«˜çº§æ“ä½œï¼ŒPageoffice å®æ“ æœºè¯•é¢˜ ä¸­é—´ä»¶ RabbitMQ ElasticSearch Docker Dubbo æµ‹è¯• å•å…ƒæµ‹è¯• éƒ¨ç½² æœåŠ¡å™¨Jboss ç»´æŠ¤ å…¶ä»– Pythonã€ç†Ÿæ‚‰åŸºç¡€ã€‘å®‰å“ã€æœ‰æ—¶é—´äº†è§£ã€‘ å…¬å¸ springboot+mybatis+gis+vue+redis+æ¡†æ¶+åŸºç¡€å‰åç«¯æ•°æ®äº¤äº’+springcloudã€æœ‰æ—¶é—´äº†è§£ã€‘","link":"/2021/02/25/Draft/2021/Software%20Engineer/"},{"title":"SpringMVC","text":"SpringMVC æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ï¼š WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ï¼š HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘ï¼š LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ï¼š è¿›åº¦ï¼šã€ä¸€å¤© ã€‘ ç»¼åˆé—®é¢˜ è¿è¡Œæµç¨‹ï¼Ÿ å¸¸ç”¨æ³¨è§£ï¼Ÿ å¦‚ä½•è§£å†³ä¸­æ–‡ä¹±ç ï¼Ÿ é‡å®šå‘ï¼Ÿè½¬å‘ï¼Ÿ springmvcçš„æ§åˆ¶å™¨æ˜¯å•ä¾‹çš„å—?æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ ä¸€ã€ç®€ä»‹ äºŒã€æµç¨‹ DispatcherServletè°ƒç”¨é“¾ é‡è¦æˆå‘˜ 1234567891011121314151617181920212223242526272829303132333435// æ–‡ä»¶ä¸Šä¼ ç»„ä»¶/** MultipartResolver used by this servlet */private MultipartResolver multipartResolver;// èµ„æºå®šä½ç»„ä»¶/** LocaleResolver used by this servlet */private LocaleResolver localeResolver;// ä¸»é¢˜è§£æç»„ä»¶/** ThemeResolver used by this servlet */private ThemeResolver themeResolver;// å¤„ç†å™¨æ˜ å°„å™¨ç»„ä»¶é›†åˆ/** List of HandlerMappings used by this servlet */private List&lt;HandlerMapping&gt; handlerMappings;// å¤„ç†å™¨é€‚é…å™¨ç»„ä»¶é›†åˆ/** List of HandlerAdapters used by this servlet */private List&lt;HandlerAdapter&gt; handlerAdapters;// å¼‚å¸¸å¤„ç†è§£æå™¨é›†åˆ/** List of HandlerExceptionResolvers used by this servlet */private List&lt;HandlerExceptionResolver&gt; handlerExceptionResolvers;// è§†å›¾åè§£æå™¨/** RequestToViewNameTranslator used by this servlet */private RequestToViewNameTranslator viewNameTranslator;// é‡å®šå‘åŠFlashMapå­˜å‚¨ç»„ä»¶/** FlashMapManager used by this servlet */private FlashMapManager flashMapManager;// è§†å›¾è§£æç»„ä»¶é›†åˆ/** List of ViewResolvers used by this servlet */private List&lt;ViewResolver&gt; viewResolvers; æµç¨‹ DispatcherServlet ==&gt; HandlerMapping ==&gt; HandlerExecutionChain(Handlerã€HandlerInterceptor) ==&gt; HandlerAdapter ==&gt; Handler ==&gt; ModelAndView ==&gt;ViewResolver ==&gt; View ç¬¬ä¸€æ­¥ï¼šå‘èµ·è¯·æ±‚åˆ°å‰ç«¯æ§åˆ¶å™¨/ä¸­å¤®æ§åˆ¶å™¨(DispatcherServlet) ç¬¬äºŒæ­¥ï¼šå‰ç«¯æ§åˆ¶å™¨è¯·æ±‚å¤„ç†å™¨æ˜ å°„å™¨HandlerMappingæŸ¥æ‰¾ Handler ï¼ˆå¯ä»¥æ ¹æ®xmlé…ç½®ã€æ³¨è§£è¿›è¡ŒæŸ¥æ‰¾ï¼‰ ç¬¬ä¸‰æ­¥ï¼šå¤„ç†å™¨æ˜ å°„å™¨HandlerMappingå‘å‰ç«¯æ§åˆ¶å™¨è¿”å›Handlerï¼ŒHandlerMappingä¼šæŠŠè¯·æ±‚æ˜ å°„ä¸ºHandlerExecutionChainå¯¹è±¡ï¼ˆåŒ…å«ä¸€ä¸ªHandlerå¤„ç†å™¨ï¼ˆé¡µé¢æ§åˆ¶å™¨ï¼‰å¯¹è±¡ï¼Œå¤šä¸ªHandlerInterceptoræ‹¦æˆªå™¨å¯¹è±¡ï¼‰ï¼Œé€šè¿‡è¿™ç§ç­–ç•¥æ¨¡å¼ï¼Œå¾ˆå®¹æ˜“æ·»åŠ æ–°çš„æ˜ å°„ç­–ç•¥ ç¬¬å››æ­¥ï¼šå‰ç«¯æ§åˆ¶å™¨è°ƒç”¨å¤„ç†å™¨é€‚é…å™¨HandlerAdapterå»æ‰§è¡ŒHandler ç¬¬äº”æ­¥ï¼šå¤„ç†å™¨é€‚é…å™¨HandlerAdapterå°†ä¼šæ ¹æ®é€‚é…çš„ç»“æœå»æ‰§è¡ŒHandler ç¬¬å…­æ­¥ï¼šHandleræ‰§è¡Œå®Œæˆç»™é€‚é…å™¨è¿”å›ModelAndView ç¬¬ä¸ƒæ­¥ï¼šå¤„ç†å™¨é€‚é…å™¨HandlerAdapterå‘å‰ç«¯æ§åˆ¶å™¨è¿”å›ModelAndView ï¼ˆModelAndViewæ˜¯springmvcæ¡†æ¶çš„ä¸€ä¸ªåº•å±‚å¯¹è±¡ï¼ŒåŒ…æ‹¬ Modelå’Œviewï¼‰ ç¬¬å…«æ­¥ï¼šå‰ç«¯æ§åˆ¶å™¨è¯·æ±‚è§†å›¾è§£æå™¨ViewResolverå»è¿›è¡Œè§†å›¾è§£æ ï¼ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆçœŸæ­£çš„è§†å›¾(jsp)ï¼‰ï¼Œé€šè¿‡è¿™ç§ç­–ç•¥å¾ˆå®¹æ˜“æ›´æ¢å…¶ä»–è§†å›¾æŠ€æœ¯ï¼Œåªéœ€è¦æ›´æ”¹è§†å›¾è§£æå™¨å³å¯ ç¬¬ä¹æ­¥ï¼šè§†å›¾è§£æå™¨ViewResolverå‘å‰ç«¯æ§åˆ¶å™¨è¿”å›View ç¬¬åæ­¥ï¼šå‰ç«¯æ§åˆ¶å™¨è¿›è¡Œè§†å›¾æ¸²æŸ“ ï¼ˆè§†å›¾æ¸²æŸ“å°†æ¨¡å‹æ•°æ®(åœ¨ModelAndViewå¯¹è±¡ä¸­)å¡«å……åˆ°requeståŸŸï¼‰ ç¬¬åä¸€æ­¥ï¼šå‰ç«¯æ§åˆ¶å™¨å‘ç”¨æˆ·å“åº”ç»“æœ ä¸‰ã€æ‹¦æˆªå™¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455package com.jeethink.framework.interceptor;import java.lang.reflect.Method;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.springframework.stereotype.Component;import org.springframework.web.method.HandlerMethod;import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;import com.alibaba.fastjson.JSONObject;import com.jeethink.common.utils.ServletUtils;import com.jeethink.framework.interceptor.annotation.RepeatSubmit;import com.jeethink.framework.web.domain.AjaxResult;/** * é˜²æ­¢é‡å¤æäº¤æ‹¦æˆªå™¨ * @author å®˜æ–¹ç½‘å€ */@Componentpublic abstract class RepeatSubmitInterceptor extends HandlerInterceptorAdapter{ @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception { if (handler instanceof HandlerMethod) { HandlerMethod handlerMethod = (HandlerMethod) handler; Method method = handlerMethod.getMethod(); RepeatSubmit annotation = method.getAnnotation(RepeatSubmit.class); if (annotation != null) { if (this.isRepeatSubmit(request)) { AjaxResult ajaxResult = AjaxResult.error(&quot;ä¸å…è®¸é‡å¤æäº¤ï¼Œè¯·ç¨åå†è¯•&quot;); ServletUtils.renderString(response, JSONObject.toJSONString(ajaxResult)); return false; } } return true; } else { return super.preHandle(request, response, handler); } } /** * éªŒè¯æ˜¯å¦é‡å¤æäº¤ç”±å­ç±»å®ç°å…·ä½“çš„é˜²é‡å¤æäº¤çš„è§„åˆ™ * * @param httpServletRequest * @return * @throws Exception */ public abstract boolean isRepeatSubmit(HttpServletRequest request);} å››ã€é‡å®šå‘è½¬å‘ ï¼ˆ1ï¼‰è½¬å‘ï¼šåœ¨è¿”å›å€¼å‰é¢åŠ &quot;forward:&quot;ï¼Œè­¬å¦‚&quot;forward:user.do?name=method4&quot; ï¼ˆ2ï¼‰é‡å®šå‘ï¼šåœ¨è¿”å›å€¼å‰é¢åŠ &quot;redirect:&quot;ï¼Œè­¬å¦‚&quot;redirect:http://www.baidu.com&quot; äº”ã€å¸¸ç”¨æ³¨è§£ å¼•ç”¨ï¼š","link":"/2022/03/19/Draft/2021/SpringMVC/"},{"title":"TODO","text":"å·¥å…·ï¼šæ—¶å…‰åº æµç¨‹ï¼šæ‹Ÿè®¡åˆ’â€“ã€‹æ—¶å…‰åºâ€”ã€‹ç®€åŒ–è®°å½• chargingï¼š æ‰€æœ‰é¢˜ä¸æ–­åˆ·ï¼Œä¸æ–­å¤ä¹ ï¼Œä¸»æ¬¡åˆ†æ˜ã€‚ ç¡®å®šåœ°ç‚¹ å„ä¸ªæŠ€æœ¯æ¡†æ¶åŒ–å¤ä¹  èƒŒã€ANKIã€‘ æ—¶é—´ï¼š2.8-3.16ï¼ˆ36å¤©ï¼‰ 1-2ç‚¹ 6-12ç‚¹ å…­å°æ—¶å·¦å³ è·¯çº¿ï¼š ä»‹ç» é¡¹ç›® Redisï¼ˆå®è·µé«˜çº§éƒ¨åˆ†ï¼‰ã€MySQL ä¼˜åŒ–ï¼ˆç‰›å®¢ï¼‰ ã€MongoDB å®è·µ JUCã€IOã€NETã€é›†åˆã€JVM æ¡†æ¶åŒ–ã€lambda Javaåº”ç”¨ï¼ˆå·¥ä½œæµï¼‰ VUEç­‰å‰ç«¯çŸ¥è¯†ã€åœ°å›¾å¼€å‘ã€å°ç¨‹åº Linuxï¼ˆæœåŠ¡å™¨è¿ç”¨ï¼‰ SSM åº•å±‚ã€SpringBoot åº•å±‚ã€SpringCloud å®è·µ MQã€Dubbo ç»´æŠ¤å®æ–½ç­‰ è®¾è®¡ç½‘ç»œç®—æ³• å·¥å…·ï¼š ANKI ç‰›å®¢ ä¸‰å¤§æ–¹é¢ï¼šè‰ºæœ¯ã€æŠ€æœ¯ã€è‡ªåª’ä½“ ä¼˜å…ˆé¡ºåºï¼šæŠ€æœ¯ã€è‡ªåª’ä½“ è‰ºæœ¯ã€ç”Ÿæ´» è‡ªåª’ä½“ï¼š å¼•æµã€å†…å®¹ã€ è‰ºæœ¯ï¼š ä¹ç†ã€å”±æŠ€å·§ã€é’¢ç´åŸºç¡€ã€å‰ä»–æ·±å…¥ã€å…¶ä»–ä¹ç†æ·±å…¥åæ·±å…¥å­¦ä¹ ã€æ‘„å½±ã€é£æ ¼åŒ–ã€‘ã€ç”µå­ç»˜ç”»ã€å…´è¶£ã€‘ ç”Ÿæ´»ï¼š ä¸¤å‘¨æœ«å‡ºå»ä¸€å¤©ï¼ˆè¯¥å…³å¿ƒçš„äººï¼‰ã€ä¸€å‘¨è‡³å°‘è¿åŠ¨ä¸€æ¬¡ä¸ä¹…åã€æ³¨æ„å¥åº· è¯­è¨€ï¼š è‹±è¯­å£è¯­ï¼ˆéŸ³ä¹ç”µå½±ï¼‰ã€æ—¥è¯­æœªæ¥å†æœŸã€‚ è‡ªåª’ä½“ï¼š åˆ›å»ºç²¾ç¾æ–‡ç«  è‰ºæœ¯ï¼š é’¢ç´ ç”Ÿæ´» é¦–è¦è®¡åˆ’ SQLä¼˜åŒ– Redis å¼ºåˆ¶ä½¿ç”¨Redis ç½‘ç»œ è®¾è®¡æ¨¡å¼ ç®—æ³• JVM ä¹ç†bili Javaå¤šçº¿ç¨‹å¹¶å‘ã€IOã€NET æ¡†æ¶åŸç†ã€åˆ†å¸ƒå¼ã€ä¸­é—´ä»¶ MQ Dubbo MongoDB SpringCloud ElasticSearch Docker æ‹Ÿè®¡åˆ’ æ‹Ÿè®¡åˆ’ï¼Œåˆ†äºæ¯ä¸ªæœˆçš„ç›®æ ‡ è€ƒå®Œåè¡¥å……è½¯è€ƒç¬”è®°ï¼Œæ¯å‘¨ç»†åŒ–è®°å¿†ï¼Œé¡¹ç›®ç®¡ç†å¯¹åº”å®è·µ è®¾è®¡æ¨¡å¼ Javaå·¥ä½œæµ Pythonå¤ä¹  DevOps VUEè§†é¢‘ä¸€é Jenkins Nginx ç³»ç»Ÿè®¾è®¡ï¼ˆæ•°æ®åº“ï¼Œè½¯ä»¶æµç¨‹ï¼‰ Linuxç¯å¢ƒå¼€å‘éƒ¨ç½²ï¼Œç†Ÿæ‚‰shell å°è®¡åˆ’ å°è®¡åˆ’ï¼Œæœ‰ç©ºå°±åš çˆ¬è™«äº†è§£ï¼ŒPythonå¤ä¹  JAVAçŸ¥è¯†æ¯æ—¥ä¸€é¢˜ Android å›½å¤–æŠ€æœ¯ç½‘ç«™ ä¸¥æ ¼æ‰§è¡Œå¥–æƒ©åˆ¶åº¦ æ·±åº¦å­¦ä¹ å¤ä¹  ä¸€å‘¨ä¸€æ€è€ƒå‡ºç¯‡å…¬ä¼—å·æ–‡ç«  æ–‡ä»¶ä¸Šä¼ ä¸‹è½½æ¸…æ™°åŒ– å¹³å°å¼€å‘ ç¼–ç¨‹æ€æƒ³é‡ç‚¹æŸ¥çœ‹ Pageoffice å¥èº«å¼€å§‹è‚šè‚š å‘¨æœŸæ€»ç»“ å¾®ä¿¡å°ç¨‹åºèŠå¤©æé†’æœºå™¨äºº Postgresqlå­¦ä¹ å‡†å¤‡ å›ºå®šè®¡åˆ’ å›ºå®šè®¡åˆ’ï¼Œæ¯å¤©éƒ½åš ç®—æ³• è‹±è¯­ é¢é¢˜ [ ] MONTH-----å…­ è¿åŠ¨ä¸‰æ¬¡ æ•°ç ç»˜ç”»ä¸€æ¬¡ æ‘„å½± å‰ªè¾‘ å…¬ä¼—å·è¿è¥ WEEKğŸ¤² å‰ä»–ç»ƒä¹  DAY-2021.5.28 å›ºå®šè®¡åˆ’ [ ] MONTH-----äº” é¡¹ç®¡å¸ˆ MONTH-----å›› è¿åŠ¨ä¸‰æ¬¡ æ•°ç ç»˜ç”»ä¸€æ¬¡ æ‘„å½± å‰ªè¾‘ å…¬ä¼—å·è¿è¥ã€ç²‰ä¸å¼•å¯¼ï¼Œè‡ªåª’ä½“çŸ©é˜µæ­å»ºã€‘ RabbitMQåŸºç¡€ç¬¬ä¸€è½® springcloudç¬¬ä¸€è½® VUEå¤ä¹ ä¸€é WEEKğŸ¤²ğŸ¤²ğŸ¤² å‰ä»–ç»ƒä¹  è¿åŠ¨ DAY-2021.4.15 SpringCloudã€ã€‘ä¸€èŠ‚ é¡¹ç®¡å¸ˆåŸºç¡€ å››èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.4.14 SpringCloudã€ã€‘ä¸€èŠ‚ é¡¹ç®¡å¸ˆåŸºç¡€ å››èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.4.13 SpringCloudã€ã€‘ä¸€èŠ‚ é¡¹ç®¡å¸ˆåŸºç¡€ å››èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.4.12 SpringCloudã€ã€‘ä¸€èŠ‚ é¡¹ç®¡å¸ˆåŸºç¡€ ä¸¤èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† WEEKğŸ¤²ğŸ¤² å‰ä»–ç»ƒä¹  ### DAY-2021.4.11 SpringCloudã€ã€‘ä¸€èŠ‚ é¡¹ç®¡å¸ˆåŸºç¡€ ä¸¤èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† ### DAY-2021.4.8 SpringCloudã€ã€‘ä¸€èŠ‚ é¡¹ç®¡å¸ˆåŸºç¡€ ä¸¤èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† ### DAY-2021.4.7 SpringCloudã€ã€‘ä¸€èŠ‚ é¡¹ç®¡å¸ˆåŸºç¡€ ä¸¤èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.4.6 SpringCloudã€ã€‘ä¸€èŠ‚ é¡¹ç®¡å¸ˆåŸºç¡€ ä¸¤èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† WEEKğŸ¤² å‰ä»–ç»ƒä¹  è¿åŠ¨ DAY-2021.4.3 SpringCloudã€ã€‘ä¸€èŠ‚ é¡¹ç®¡å¸ˆåŸºç¡€ ä¸¤èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.4.2 SpringCloudã€ã€‘ä¸€èŠ‚ é¡¹ç®¡å¸ˆåŸºç¡€ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.4.1 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.31 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.30 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† WEEKğŸ¤²ğŸ¤²ğŸ¤²ğŸ¤² å‰ä»–ç»ƒä¹  è¿åŠ¨ MONTH------ä¸‰ è¿åŠ¨ä¸‰æ¬¡ æ•°ç ç»˜ç”»ä¸€æ¬¡ æ‘„å½± å‰ªè¾‘ å…¬ä¼—å·è¿è¥ã€ç²‰ä¸å¼•å¯¼ï¼Œè‡ªåª’ä½“çŸ©é˜µæ­å»ºã€‘ RabbitMQåŸºç¡€ç¬¬ä¸€è½® springcloudç¬¬ä¸€è½® WEEKğŸ¤² å‰ä»–ç»ƒä¹  è¿åŠ¨ WEEKğŸ¤²ğŸ¤² å‰ä»–ç»ƒä¹  WEEKğŸ¤²ğŸ¤²ğŸ¤² å‰ä»–ç»ƒä¹  è¿åŠ¨ WEEKğŸ¤²ğŸ¤²ğŸ¤²ğŸ¤² å‰ä»–ç»ƒä¹  è¿åŠ¨ DAY-2021.3.29 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.25 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.24 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.23 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ è™šæ‹Ÿæœºç¯å¢ƒå®‰è£… é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.22 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† RabbitMQ 7èŠ‚ é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.19 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.18 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.17 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.16 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.15 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.12 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.11 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.10 SpringCloudã€ã€‘ä¸€èŠ‚ è®¾è®¡æ¨¡å¼ã€ã€‘ä¸€ä¸ª è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™-æ–°é—»-ä¹¦ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ä¸€é¢˜ï¼Œä¸€çŸ¥è¯† é¢é¢˜ã€ã€‘ä¸€é¢˜ Redisã€ã€‘å›å¿† DAY-2021.3.9 SpringCloud è®¾è®¡æ¨¡å¼ è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ é¢é¢˜ Redis DAY-2021.3.8 SpringCloud è®¾è®¡æ¨¡å¼ è‹±è¯­ã€ä¸­åˆã€‘å¼ºåˆ¶å¤–è¯­ç½‘ç«™ï¼Œ100å•è¯åˆ· ç®—æ³•ã€ä¸­åˆã€‘ é¢é¢˜ Redis æ¨¡æ¿ MONTH-----å›› è¿åŠ¨ä¸‰æ¬¡ æ•°ç ç»˜ç”»ä¸€æ¬¡ æ‘„å½± å‰ªè¾‘ å…¬ä¼—å·è¿è¥ WEEKğŸ¤²ğŸ¤²ğŸ¤²ğŸ¤² å‰ä»–ç»ƒä¹  è¿åŠ¨ DAY-2021.3.9 SpringCloudã€ã€‘ä¸€èŠ‚ å›ºå®šè®¡åˆ’ DAY-2021.3.9 SpringCloudã€ã€‘ä¸€èŠ‚ å›ºå®šè®¡åˆ’ WEEKğŸ¤²ğŸ¤²ğŸ¤² å‰ä»–ç»ƒä¹  DAY-2021.3.9 SpringCloudã€ã€‘ä¸€èŠ‚ å›ºå®šè®¡åˆ’ WEEKğŸ¤²ğŸ¤² å‰ä»–ç»ƒä¹  è¿åŠ¨ DAY-2021.3.9 SpringCloudã€ã€‘ä¸€èŠ‚ å›ºå®šè®¡åˆ’ WEEKğŸ¤² å‰ä»–ç»ƒä¹  è¿åŠ¨ DAY-2021.3.9 SpringCloudã€ã€‘ä¸€èŠ‚ å›ºå®šè®¡åˆ’ FIXED RECORDS å¥èº«è®°å½• BUGæ’æŸ¥æ€»ç»“ é¡¹ç®¡å¸ˆæ€»ç»“ï¼Œå‘¨æœ«äº”èŠ‚è¯¾ å›¾ä¹¦é¦†å€Ÿé˜…ä¿¡ç®¡å¸ˆä¹¦ç±ï¼Œå‘¨å…­ è½¯è€ƒé«˜çº§å¤‡è€ƒ 11.10 äº¤è´¹æˆåŠŸçš„æŠ¥è€ƒäººå‘˜äº5æœˆ24æ—¥10:00è‡³28æ—¥16:00é€šè¿‡æµ™æ±Ÿè½¯ä»¶è€ƒè¯•ç½‘ä¸‹è½½å¹¶æ‰“å°è€ƒè¯•å‡†è€ƒè¯ï¼Œé€¾æœŸæœªæ‰“å°å‡†è€ƒè¯è§†ä¸ºæ”¾å¼ƒè€ƒè¯•ã€‚æŠ¥è€ƒäººå‘˜æŒ‰å‡†è€ƒè¯è§„å®šçš„æ—¶é—´ã€åœ°ç‚¹å’Œè¦æ±‚å‚åŠ è€ƒè¯•ã€‚","link":"/2021/02/24/Draft/2021/TODO/"},{"title":"æ¨¡æ¿","text":"ä»‹ç» æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ï¼š WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ï¼š HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºï¼ˆå®˜æ–¹æ–‡æ¡£ã€è§†é¢‘èµ„æºï¼‰ã€‘ï¼š LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ï¼š è¿›åº¦ï¼š ã€ã€‘ å¿«æŸ¥ ä¸€ã€ç®€ä»‹ çŸ¥è¯†èƒŒæ™¯ ç« èŠ‚æ€»ç»“ ç« èŠ‚é—®é¢˜ ã€‚ã€‚ã€‚ï¼Ÿ äºŒã€ å¼•ç”¨ï¼š","link":"/2022/03/19/Draft/2021/template/"},{"title":"ä¹¦å½±éŸ³","text":"è®°å½•ä¸å›å¿†æ‰èƒ½è®©é‚£äº›ç¾å¥½çš„ä¸ç¾å¥½çš„å­˜ç•™è„‘ä¸­ï¼Œé˜µé˜µå›è¡ä¸å‘é…µã€‚ å•æœˆæ›´æ–° BOOKS--OTHER ã€Šç™½å¤œè¡Œã€‹ï¼ˆä¸œé‡å¥å¾ï¼‰ ã€Šè§£å¿§æ‚è´§é“ºã€‹ï¼ˆä¸œé‡å¥å¾ï¼‰ ã€Šè®¸ä¸‰è§‚å–è¡€è®°ã€‹ï¼ˆä½™åï¼‰ ã€Šæˆ‘ä»¬ä»¨ã€‹ï¼ˆæ¨ç»›ï¼‰ ã€Šæˆ‘çš„å®¶ã€‹ï¼ˆå·´é‡‘ï¼‰ ã€Šå±€å¤–äººã€‹ ã€Šå°ç‹å­ã€‹ ã€Šæ¶æ„ã€‹ï¼ˆä¸œé‡å¥å¾ï¼‰ ã€Šæ‘†æ¸¡äººã€‹å…‹è±å°”éº¦å…‹ç¦å°” ã€Šå·å½±å­çš„äººã€‹ï¼ˆé©¬å…‹æç»´ï¼‰ ã€Šå²›ä¸Šä¹¦åº—ã€‹ï¼ˆä¸œé‡å¥å¾ï¼‰ ã€Šå«Œç–‘äººXçš„çŒ®èº«ã€‹ ã€Šæ´»ç€ã€‹ï¼ˆä½™åï¼‰ ã€Šç©†æ–¯æ—çš„è‘¬ç¤¼ã€‹ï¼ˆéœè¾¾ï¼‰ ã€Šä¹–ï¼Œæ‘¸æ‘¸å¤´ã€‹ï¼ˆå¤§å†°ï¼‰ ã€Šæ°´å½©ä»å…¥é—¨åˆ°ç²¾é€šã€‹ï¼ˆé£ä¹é¸Ÿï¼‰ ã€Šäººï¼Œè¯—æ„çš„æ –å±…ã€‹ï¼ˆæµ·å¾·æ ¼å°”ï¼‰ ã€Šæ˜æœé‚£äº›äº‹ã€‹å½“å¹´æ˜æœˆï¼ŒçŸ³é” ã€Šçœ‹è§ã€‹æŸ´é™ ã€Šæ··è¡€è±¹ç‹ã€‹æ²ˆçŸ³æºª ã€Šç‹¼ç‹æ¢¦ã€‹æ²ˆçŸ³æºª ã€Šç¬¬ä¸ƒå¤©ã€‹ä½™å ã€Šåœ°å¿ƒæ¸¸è®°ã€‹ ã€Šç›®é€ã€‹é¾™åº”å° ã€Šäººé—´å¤±æ ¼ã€‹ ã€Šåˆ«ä¸Šäº†æ‘„å½±çš„å½“ã€‹ ã€Šæ‹å‡ºæ˜æ˜ŸèŒƒã€‹ ã€Šäººåƒæ‘„å½±æ•™ç¨‹ã€‹ å”ä¸œå¹³ ã€Šå®‰å¾’ç”Ÿç«¥è¯ã€‹ BOOKS--MAJOR ã€ŠEffective Javaã€‹ ã€Šå›¾è§£HTTPã€‹ ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº3ã€‹ ã€Šè®¡ç®—æœºç½‘ç»œè‡ªé¡¶ä¸‹ä¸‹æ–¹æ³•ã€‹ ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹ 1.å®è·µå‡ºçœŸçŸ¥ï¼Œé€šç”¨æœ€å®è´µï¼Œæœ€æ–°ä¹äºæ±‚ï¼Œæ²Ÿé€šä¸å¯æ— ï¼Œç¯å¢ƒå½±å“å¤§ï¼Œåˆ‡ä¿èº«ä½“å¥½ï¼Œè–ªé…¬ç­‰é‡çº§ï¼Œå•é¡¹æ±‚å‘å±•ï¼Œå£°èª‰å»ºå“ç‰Œï¼Œä¸æ–­å­¦è¿›æ­¥ 2.è‹±è¯­å¾ˆé‡è¦ï¼Œé˜…è¯»ä¼˜ç§€é¡¹ç›®ï¼Œ ã€Šé˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œæ³°å±±ç‰ˆã€‹ 1.æ‰€æœ‰æ•°æ®åº“éƒ½è¦é…ç½®gmy_create(åˆ›å»ºæ—¶é—´)ã€gmt_modified(æ›´æ–°æ—¶é—´)ä¸”éœ€è¦è‡ªåŠ¨åŒ– MUSIC MOVIES ã€Šé“¶æ²³æŠ¤å«é˜Ÿ2ã€‹ ã€Šæ–°æœ¨ä¹ƒä¼Šã€‹ ã€ŠåŠ å‹’æ¯”æµ·ç›—1234ã€‹ ã€Šè¿™ä¸ªæ€æ‰‹ä¸å¤ªå†·ã€‹ ã€Šè‚–ç”³å…‹çš„æ•‘èµã€‹ ã€Šæ³°å¦å°¼å…‹å·ã€‹ ã€Šæ€¦åˆ¤å¿ƒåŠ¨ã€‹ ã€Šæ˜Ÿé™…ç©¿è¶Šã€‹ ã€Šæºä»£ç ã€‹ ã€Šé»‘å®¢å¸å›½ã€‹ ã€Šæ›¾ç»ã€‹ ã€Šçˆ±ä¸½ä¸çš„æ¢¦æ¸¸ä»™å¢ƒã€‹ ã€Šå†ˆä»æ³¢æ¬¡ã€‹ ã€Šå¤©ç©ºä¹‹åŸã€‹ ã€Šå˜å½¢é‡‘åˆš5ã€‹ ã€Šæœºå™¨ç®¡å®¶ã€‹ ã€Šç‹¬ç«‹æ—¥ã€‹ ã€Šå¹½çµè¡ŒåŠ¨é˜¿å°”æ³•é˜Ÿã€‹ ã€Šå¤ªç©ºæ—…å®¢ã€‹ ã€Šå¤ªç©ºä¸€å·ã€‹ ã€Šåœ°å¿ƒå¼•åŠ›ã€‹ ã€Šæš®å…‰ä¹‹åŸã€‹ ã€Šå¼‚å½¢ã€‹ ã€Šç«æ˜Ÿæ•‘æ´ã€‹ ã€Šç¾ä¸½äººç”Ÿã€‹ ã€Šæ·±å¤œé£Ÿå ‚ã€‹ ã€Šæˆ˜ç‹¼1/2ã€‹ ã€Šæ‘†æ¸¡äººã€‹ ã€Šå®‰å¾·å¾—æ¸¸æˆã€‹ ã€ŠåäºŒåªçŒ´å­ã€‹ ã€Šå°æ£®æ—ã€‹ ã€Šé€†ä¸–ç•Œã€‹ ã€Šé‡‘åˆšéª·é«…å²›ã€‹ ã€Šå¤æ´›ç‰¹çƒ¦æ¼ã€‹ ã€Šå·¦è€³ã€‹ ã€Šé’¢é“éª‘å£«ã€‹ ã€Šæ‰å¦–è®°ã€‹ ã€Šé‡è¿”20å²ã€‹ ã€Šæœºæ¢°å¸ˆã€‹ ã€Šæ”»å£³æœºåŠ¨é˜Ÿã€‹ ã€Šä¸€ä¸‡å…¬é‡Œçš„çº¦å®šã€‹ ã€Šç”ŸåŒ–å±æœºå…¨ã€‹ ã€Šè°‹æ€ä¼¼æ°´å¹´åã€‹ ã€Šç¬¬ä¹åŒºã€‹ ã€Šä¸å›ç›¸æ‹100æ¬¡ã€‹ ã€Šæ‚Ÿç©ºä¼ ã€‹ ã€Šåˆºå®¢ä¿¡æ¡ã€‹ ã€Šç»£æ˜¥åˆ€ï¼Œä¿®ç½—åœºã€‹ ã€Šæƒåˆ©çš„æ¸¸æˆ1234567ã€‹ å«Œç–‘äººXçš„çŒ®èº« å¯»æ¢¦ç¯æ¸¸è®° ç¼çº«æœºä¹é˜Ÿ æ•¦åˆ»å°”å…‹ æ´›ä¸½å¡” é­æ‹”123 è§£å¿§æ‚è´§åº— å‰ä»»3 ç¥å¥‡å¥³ä¾  èŠ³å è¢«å·èµ°çš„é‚£äº”å¹´ ä»ä½ çš„å…¨ä¸–ç•Œè·¯è¿‡ åˆ†æ‰‹åˆçº¦ å¤æ´›ç‰¹çƒ¦æ¼ åŒ†åŒ†é‚£å¹´ å¤±æ‹33å¤© æµ·ä¸Šé’¢ç´å¸ˆ å…¬ç‰›å†é™©è®° 179å°æ—¶ æœˆçƒ è®°å¿†å¤§å¸ˆ é»‘å¤©é¹… é“¶ç¿¼æ€æ‰‹ è¡€æˆ˜é’¢é”¯å²­ è‡ªæ€å°é˜Ÿ çœ‹ä¸è§çš„å®¢äºº äºŒä»£å¦–ç²¾ä¹‹ä»Šç”Ÿæœ‰å¹¸ æ¯”å¾—å…” å¤©ç©ºä¹‹çœ¼ å°èè‰çš„çŒ´ç¥å¤§å” å¼±ç‚¹ é˜¿ç”˜æ­£ä¼  å½“å¹¸ç¦æ¥æ•²é—¨ ç¡…è°·123 å›½ç‹çš„æ¼”è®² æˆ‘æ˜¯æ±Ÿå°ç™½ å½± ç»¿çš®ä¹¦ ç›—æ¢¦ç©ºé—´ è°ƒéŸ³å¸ˆ å°‘å¹´æ´¾çš„å¥‡å¹»æ¼‚æµ æ€¦ç„¶å¿ƒåŠ¨ éœ¸ç‹åˆ«å§¬ å¤ä»‡è€…è”ç›Ÿå›› èœ˜è››ä¾ å¹³è¡Œå®‡å®™ å¤´å·ç©å®¶ æ˜æ—¥è¾¹ç¼˜ å°æ—¶å…‰ ç–¯ç‹‚åŠ¨ç‰©åŸ é©¯é¾™é«˜æ‰‹12","link":"/2021/02/24/Draft/2021/%E4%B9%A6%E5%BD%B1%E9%9F%B3/"},{"title":"é­‘é­…å…ˆç”Ÿ | éŸ³ä¹","text":"ä¹ç†ã€å‰ä»–ã€å°¤å…‹é‡Œé‡Œã€é’¢ç´ã€æ‹‡æŒ‡ç´","link":"/2021/02/25/Draft/2021/%E4%B9%90%E7%90%86%E7%9F%A5%E8%AF%86/"},{"title":"äº”åˆ†é’Ÿæ­å»ºåœ¨çº¿åšå®¢","text":"åšå®¢å·²æˆä¸ºç¨‹åºå‘˜å­¦ä¹ ä¸è¾“å‡ºé‡è¦ä¸€ç¯ï¼Œå½“ä½ æ—¶é—´å®è´µæˆ–è€…æ²¡æœ‰å¿…è¦ä»é›¶æ„å»ºä¸ªäººåšå®¢çš„è¯ï¼Œä¸€ä¸ªå¯ä»¥è¿›è¡Œå¿«é€Ÿæ­å»ºçš„é™æ€åšå®¢å°±æ˜¾å¾—æ¯”è¾ƒé‡è¦äº†ã€‚ä¸ä½†ä¸°å¯Œçš„ä¸»é¢˜å¯ä»¥ä»»ä½ é€‰æ‹©ï¼Œå„ä¸ªç»„ä»¶è¿˜å¯ä»¥ä»»ä½ æ­é…ã€‚æœ‰çš„ç”šè‡³æ— éœ€æœåŠ¡å™¨å’ŒåŸŸåæ³¨å†Œï¼Œåˆ†åˆ†é’Ÿå®ç°è‡ªå·±åˆ†äº«çš„å°åŸºåœ°ã€‚ ç›®å‰æ¯”è¾ƒæµè¡Œçš„å¼€æºæ¡†æ¶æœ‰ Hexoã€WordPressã€VuePressã€Hugoã€Soloã€Halo ã€Jekyll ç™½å«–å…šã€æ— éœ€æœåŠ¡å™¨ï¼Œå…è´¹åŸŸåã€‘å–œæ¬¢çš„æ— ä¸ªäººåŸŸåæ— æ³•è¢«ç™¾åº¦æœç´¢ Jekyllã€Hugoã€Hexo æœ¬åšå®¢ä½¿ç”¨ Hexo æ¥ä¸‹æ¥å¼€å§‹Hexoåšå®¢å¿«é€Ÿæ­å»º ç¯å¢ƒå‡†å¤‡ Githubè´¦å·ï¼Œæ–°åº“å:ç”¨æˆ·å.github.io node.jsã€npmã€JSã€Git å®‰è£…ä¸åŸºç¡€å­¦ä¹  å›¾åºŠ Gitee+PicGo åˆæ­¥æ­å»º åˆ›å»ºåšå®¢æ–‡ä»¶å¤¹ï¼Œshift+å³é”®è¿›å…¥ç›®å½•cmd å®‰è£…hexo npm install -g hexo-cli åˆå§‹åŒ–æ–‡ä»¶å¤¹ hexo init hexo_blog è¿›å…¥åšå®¢æ–‡ä»¶å¤¹ cd E:\\my\\hexo_blog å®‰è£…åšå®¢éœ€è¦çš„ä¾èµ–æ–‡ä»¶ npm install Hexoå‘½ä»¤ hexo cl #æ¸…ç† hexo g #ç”Ÿæˆ hexo s #æœ¬åœ°æœåŠ¡ hexo d #å‘å¸ƒ æµ‹è¯•http://locakhost:4000 æˆ–127.0.0.1:4000 åˆæ­¥æ­å»ºå®Œæˆ Hexoç›¸å…³é…ç½® é¡¹ç›®ç›®å½•è¯´æ˜ _config.ymlé…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117title: åšå®¢åsubtitle: å‰¯æ ‡é¢˜description: åšå®¢æè¿°keywords: SEOæœç´¢å…³é”®è¯author: æ–‡ç« ä½œè€…language: zh-CN #è¯­è¨€timezone: ''#æ—¶åŒº# URL## If your site is put in a subdirectory, set url as 'http://example.com/child' and root as '/child/'url: http://MrDemonlxl.github.io #ç½‘å€root: /permalink: :year/:month/:day/:title/permalink_defaults:pretty_urls: trailing_index: true # Set to false to remove trailing 'index.html' from permalinks trailing_html: true # Set to false to remove trailing '.html' from permalinks# Directorysource_dir: sourcepublic_dir: publictag_dir: tagsarchive_dir: archivescategory_dir: categoriescode_dir: downloads/codei18n_dir: :langskip_render:# Writingnew_post_name: :title.md # File name of new postsdefault_layout: posttitlecase: false # Transform title into titlecaseexternal_link: enable: true # Open external links in new tab field: site # Apply to the whole site exclude: ''filename_case: 0render_drafts: falsepost_asset_folder: falserelative_link: falsefuture: truehighlight: enable: true line_number: true auto_detect: false tab_replace: '' wrap: true hljs: falseprismjs: enable: false preprocess: true line_number: true tab_replace: ''# Home page setting# path: Root path for your blogs index page. (default = '')# per_page: Posts displayed per page. (0 = disable pagination)# order_by: Posts order. (Order by date descending by default)index_generator: path: '' per_page: 10 order_by: -date# Category &amp; Tagdefault_category: uncategorizedcategory_map:tag_map:# Metadata elements## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/metameta_generator: true# Date / Time format## Hexo uses Moment.js to parse and display date## You can customize the date format as defined in## http://momentjs.com/docs/#/displaying/format/date_format: YYYY-MM-DDtime_format: HH:mm:ss## updated_option supports 'mtime', 'date', 'empty'updated_option: 'mtime'# Pagination## Set per_page to 0 to disable paginationper_page: 10pagination_dir: page# Include / Exclude file(s)## include:/exclude: options only apply to the 'source/' folderinclude:exclude:ignore:# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: amazing#landscape# Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy: type: git repo: https://github.com/MrDemonlxl/MrDemonlxl.github.io.git branch: maincomment: #è¯„è®º type: gitalk language: zh-CN #zh-CN #Localization language key, en, zh-CN and zh-TW are currently available. owner: MrDemonlxl # (required) GitHub user name repo: MrDemonlxl.github.io # (required) GitHub repository name client_id: # (required) OAuth application client id client_secret: # (required) OAuth application client secret admin: [''] create_issue_manually: true distraction_free_mode: false has_hot_recommend: true # æ˜¯å¦æœ‰çƒ­é—¨æ¨è has_latest_comment: true #æ˜¯å¦æœ‰æœ€æ–°è¯„è®º # ä¸»é¢˜é€‰æ‹© https://hexo.io/themes/ é€‰æ‹©å–œæ¬¢ä¸»é¢˜ï¼Œä¸‹è½½ç›¸åº”ä¸»é¢˜åŒ…æ”¾å…¥ä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œè¿›è¡Œå¯¹åº”ä¸»é¢˜è¯´æ˜é…ç½®ã€‚ # ç»§ç»­å­¦ä¹ å®Œå–„ https://hexo.io/zh-cn/docs/index.html # æ•ˆæœé¢„è§ˆ https://mrdemonlxl.github.io/","link":"/2021/02/18/Draft/2021/%E4%BA%94%E5%88%86%E9%92%9F%E6%90%AD%E5%BB%BA%E5%9C%A8%E7%BA%BF%E5%8D%9A%E5%AE%A2/"},{"title":"BUG","text":"èº«ä½“æ˜¯é©å‘½çš„æœ¬é’± è½¯ä»¶ï¼šå°çº¢ä¹¦ï¼Œè®°å½•å¿ƒå¾—ï¼Œè¯»ä¹¦ç”µå½±ç¬”è®°ï¼Œæ‘„å½±ï¼Œæ—…æ¸¸ ç¬¬ä¸€ä¸ªå°ç›®æ ‡ï¼šå‡æ‰å°è‚šè‚š å¥èº«è®¡åˆ’ï¼š è‡³å°‘æ¯å¤© 80 ä¸ªä»°å§èµ·å ä»£æ›¿æ–¹æ¡ˆï¼šç¯®çƒï¼Œè·‘æ­¥ è®°å½•ï¼š 2021.3.25 100ä»°å§èµ·å","link":"/2021/02/24/Draft/2021/%E5%81%A5%E8%BA%AB%E5%A4%96%E5%9E%8B/"},{"title":"æ–‡ä»¶ç›®å½•","text":"4630436162ade97ba2718b7d0c4b3b63d28f4f8957eafc94ae2cbc2b301964471c5819cc4f1e1cfda665d9951ce628c9dff1b10a4ff3e362deffadc82256c3e6a5727f03f2b135dd84188159cc981834f8d4cbfc0f6c072d358d525b270308801ee41a5daddb2ee9bcae0348bfb63e8465fec9db7abb9a26d50593722d2892d747d90e60e8a54944f70ced1a954ccabeebf12da639bc8e6a462f2ff687f5da2ea25bdad47d897d16b0180311814fed5685a4cbc006cda737b2869a2205daa94e1678af3235fc682661b861f2ba23c94e0ba3bec2d10fd6f28db7a95570de2ca11bd8164a8ef418d685dd4139a3f708a34e2643be643fc59725093ca20f88f0a43f7e432973cbb74a5dff1a3338ea41f1a35fd291268272c4ed76352e1da5f2549778b8a950993f586b13821a950320ab6814800c31346f74d47f2b96ac8eee079eaa9d1751dea6891b29726e376da9b7c5fabe21e4b4549002538a64c5ee517bb11d46aec74c54e3b42583244eab57f96ab447008e3573b242ec83d5db90d113ede681059c9e7a1e88410503e22430d62f79ef2667d004520c8ad7aa64a21b82cc8ba56b8401ed1ce9af6721c242658168b26372f1ab44c51f43a6d0eab764cf591f0acb84b0c0810e845c71d2cfb7b80a728a43e8f352b127070be719d49cd5a404a24743be99a7d2bdcffa25be060d1b16575e11998bf48a69098bdd721ed42fb200666efe12a5ae90debd7d93d6bf8cd9bb9daccb1d20d6cfc698821a7c8e4e20ec8ea097fe9485ec433018ff0ad17bccd6752f59189595b53552d96352446de0dd7813d8dcc20a6a21a4e7855a2ac0592b757beda4570c4f1a6aa6073cf17f2f22dc993a14749535eb4552047e6561f784e3d13badbafc4807af0fe4d9b5855dfebc3799b58077635c2d7e8345267b1e02eac5a595b48502d3574ef80a11d57934d8d1c764bced67823cacefc087a38be760353e2bf8e4d10b984af7850e9a36abfba3865cb2982830436275bf196b7ad2654b7a94851a47310f04a2a298e132c618fa444366b8e3a5f680e7c21f42cbd1999c58fe52bc60315cc664a3638a0dc945de6fb6e5402015f829ccce4222d76fc9ee3e5c1c8ac9fdd5b5afde2d2bcfdd5251cd10569dfa893c41240b811b35ac9ad51ba7d6b1f45b7e0071b304b7a85a596711207ed6579cb4b23be25afbd772d86490014352da79dd34c0526cf571a992b75620fd9f7b3fef6a585735c7927794e50a2a723d792545c7d73eb2049b046b255dd068e70caf876dc0b595fe39d42ebebc0ef469c1c73f1eee3328928d1c4b6f30cb1159a66c4dc9af5cc89d291343f83a86d8c425d34e0a5739bd6e901591eceafb15fb5605150f78794544be4fe259ba792441364dba01614d20316bc9bb9f63e58ef0c1e4005d43c7779835afebcf69477f10573d9bbaddcb79c611482e7ea67091454f49271d286410b8ce1196af0e0689a90e14710b698ca62903b45853f5f42ad2aa9656ff9fb44bca429f491ff07bf087840f7edb3e9a9fc66539d3fca6aae433941b7d58d5362fcdbcd52ff5e88abf74867aaf9bf06bda91ec7c34e640361dce104772f3937d7e8f45f399958cc64881d84d51ad17e40132c2f9cf6a5264758a291c08b41827d7ef737b6789425a42253aa7a25ff4d4b7746411fd393c2122eaebad4d66d05eb8428b5c941b2ec6cff9f86f8a3725df5bd642a1f7055595315dfc583e693d48b056e04a14823ef88d9e518843227e8c1270941de17b41444817291b3ec2997f397c69f7bf5ce9a6b9b6a8f4af2a988d84fd6f61bd1dc0ce27ba57f8282288aaf521df18a8e2a62c5cc557d1ffd352dead0d6914bc33f7275ac8cb7cf8eb5d1c6fc45a02fcfe6d82402eb0f509a08f17e9920d13026dd541cc0c400204ed9b5587f6ed380d82b7bb2561b1a560b21a08bd1e17112147c34ff47d0cf1f4d2b1615e1b52f8bf18f1deaa1e4adf876216a2de47cad05eea59460817b5a54099386903200ec876272d0ade6339ac249dbdf327198b90673686a216fd96b1b6b1aac6784c757523d728d2bd3869425fb723edc738fddfe802174e20c4310870e6ac49dce7735b639b401dd2ff7aaa5f7604eac2b500377a6992effc5e07d5b386b0395046b371881ed95b8933422e293d75fcb237fea71343fe5622daa8d5d54db009c6f95f453a9667b288aceb4be93581a4878c36f24b40ede44fa66276f4aa8a89280af7e7ddb1f244c22abd7d847e1a323195d2c480ac651f999ad88e50ecdefa86bb2c8b0add911c66fef0d2db906a763eefc2399c568059dd9c27459fba8cd9d420efa06ca042d64b0245ec33271cc91a834d7abdadf38635822ac45ad60815df37b932d2b166af35054efd9bea0947b1a214fbc0ce670651e89007da9624952e60fb711ca6599799464c5105a2f3970a1a4b502fddc86fe97c569f21736b21a87fef63e18dcba6025d2822184435da0d3abc15c111150f39adadfb393926bd3466bb4cfaeaf275e045a405c080417cf27aed9c8ccc817472b991cbf5ada426be24c414ae6e0578fff4ef8aec46471bdca896685fec474744eadbfbb33396801ac0379d00d177fa08238727938304e66a09e4be7d80e082d40c525334b747791b22f44affcc977dbbcec561c0143eccf4247ecd82345aeb7ced3ac36cbaa3dd7cb30b8a6f5f361f5e46565842570ef4d3505d3e132add2f76ca23fc27fec62515496a0da3c99a932790251d4cd903714d5b62428acb41daaafd073c6ffa8eaf9079b6e9d5a18b08556c1e0e975cd5d07232e520795f6f1f3fcbd6fdafb23af0b0a902bf829bbb74ae43cd13bc29ac326b0e9232f98dd5152ccb18dc7be22a4c49be53c8ecd2d67a148a3cfc1b2fbeeb83c6cad23f50f8bbccc46ac7c2843df0838d9de18a7f223e8c63c8baac1104396734379a3c085a2b54972aef980fea23a551d4651e77df58ddbb653d16ea81fa681ecebe3a0e50a2affcfae38e22ed03cbf559e61f13d78f7ffd527f1e507fd86be47ad363094c3e546fee7ba7138d0c8204e13541cac9d4cdb51be1f7ac1b1f43075a3b2023c054219614ddb9fdba0d4e71891bcdabc064200b6695a0dfcd6b6d27d991fa52ec10120903c2de34d55f229cc45911fcb18cad60be5cf06e12e7b4991fb31f2642c53fb90c85a7bb6b0541f77dbdd69cbc6623b286c6f6e5dc001a4334acf869e38beb0d0c69b655f7cd392c47636dff3a3f707fd08d80f3eb61d8b432b93ba3bfa963c1d19f36ae5bf020f0dd38f9bc8fa3a3600f89180c5f70e6f236bdbf412ea8be30f7fcc3b9ed8ce2144e291765929b26ce2e25ef064b40dc2a0d28a1d99eff87eb4401f63c1cb004575d23637b1d9d5b86cf3ded3d9f0e77756c9daaec3fbd84547a828718e89ea19ab966003cb2c9c4d34227988c53f887d015900a07fde02e2692e4bdab168baa9138d7acbc28b879d496c0460476323f70baa4656681ac2738974a0fe5baffc59a371b033d6bd77a7a1d6d2acb8fcd91a583b6dc9f9183faeedac78a3617c79f7546060e7a53a775415f4327ab296aef9c7c043ec3147919fcfa2af328228a52746e558ec7d10d30c6a6d30755f0b9ac75478db4eb8c77043106cd51e808db04c462824f12dd725e035ac34a5dc5c1bbd4472fe1269f95928ffbc734e3b21bc06e16590e3670e768aceb2df7c9b3d06d21ea8fd5b129f6dde21e842a847a283a02b366c87d341d95b3f1fb89389e28c48334a2caeeefe9538313819fbbd6fd65801d9e70261a2361741dd0e8ed86be0433c785d171d436814bd2312b608670f6d2a9e000aac918c618f90eac367bac1bb5795b53ba2b948005ca90ad6b1b1a55fdb4e3d7c6c37a17753e46b9767ee639ff23573a08710581c7418ab1dad446fce89f8e5b97864349a7c34c8f2e00c502 å—¨ï¼Œè¯·å‡†ç¡®æ— è¯¯åœ°è¾“å…¥å¯†ç æŸ¥çœ‹å“Ÿï¼","link":"/2022/03/12/Draft/2021/%E5%A4%A7%E7%BA%B2%E7%9B%AE%E5%BD%95/"},{"title":"å¦‚ä½•å­¦ä¹ ä¸€ä¸ªæ–°çŸ¥è¯†","text":"ä¸ªäººå­¦ä¹ æµç¨‹å·¥å…·è®°å½•ï¼Œå¦‚ä½•å°†ä¸€ä¸ªå­¦ä¹ ç›®æ ‡æœ€é«˜æ•ˆç‡åŒ– å­¦ä¹ ===ã€‹ç†Ÿç»ƒã€‹å¤§å¸ˆã€‹åˆ›é€  æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘ LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ å›é¡¾å››é—®ã€è¡¥å……ã€‘ WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘ LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ å·¥å…· Xmaind MarginNote Typora Anki å°è±¡ç¬”è®° ä¸“é¡¹å·¥å…· åšæœï¼ˆç¬”è®°åœ¨çº¿åŒæ­¥ï¼‰ ç™¾åº¦åœ¨çº¿è„‘å›¾ æµç¨‹ ç¡®å®šå®˜æ–¹æ–‡æ¡£ Google ä¸ºä»€ä¹ˆå­¦ã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆã€‘ï¼Œå­¦ä»€ä¹ˆã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ã€‘ï¼Œå¦‚ä½•å­¦ã€é‡å¤è¿ç”¨ï¼Œç›´æ¥èƒŒè¯µã€‘ï¼Œå­¦åˆ°å“ªã€ä¼šç”¨å³å¯ã€‘ èµ„æºå‡†å¤‡ Xmaindï¼ŒMarginNoteï¼ŒGoodnotesã€æ€ç»´å¯¼å›¾ï¼Œç¬”è®°ã€‘ï¼Œç™¾åº¦åœ¨çº¿è„‘å›¾ Typoraï¼Œå°è±¡ç¬”è®° å¯¼å…¥æ€ç»´å¯¼å›¾ Markdown ç¬”è®°ç»†åŒ–ï¼Œæ–¹ä¾¿æ•´ç†åˆ†äº« Anki è‰¾å®¾æµ©æ–¯è®°å¿†ç¨³å›º ç»“æ„åŒ–====ã€‹ç»†åŒ–====ã€‹å›ºåŒ–====ã€‹æ›´æ–° ä»£ç å­¦ä¹ ï¼šæ€è€ƒ&gt;æ•²ä»£ç &gt;çœ‹ æ–¹æ³• åˆ†ç±»å­¦ä¹  è‡ªé—®è‡ªç­” é‡å¤è®°å¿† å®æ“è¿ç”¨ æœ€é«˜æ ‡å‡† ç¬”è®°æ–¹æ³• åˆç†è®¡åˆ’ ç£ä¿ƒéªŒæ”¶ å®è·µå‘ç°æœªçŸ¥ å›ºå®šç¬”è®°æ¨¡æ¿å¹¶ä¸æ–­ç»†åŒ– 80%æ—¶é—´åœ¨åŸºç¡€ï¼Œ18%åœ¨æ¡†æ¶ï¼Œ2%åœ¨è‹±æ–‡ï¼Œè§†é¢‘æ›´ç»†ï¼Œåšå®¢æ›´å¿«ï¼Œå®˜æ–¹æ–‡æ¡£ä¸ºç‹ æŠ€æœ¯çš„è¿›æ­¥æ˜¯ä¸€ç‚¹ä¸€æ»´å®æ“è€Œæ¥çš„ ç½‘ç»œæ–¹æ³• è´¹æ›¼å­¦ä¹ æ³•","link":"/2021/02/09/Draft/2021/%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9F%A5%E8%AF%86/"},{"title":"å·¥å…·ç¯‡","text":"å·¥å…·ç¯‡ å·¥å…·ç¯‡ å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ ç¼–ç¨‹ IDEA GIT é”™è¯¯ï¼šgit@github.com: Permission denied (publickey) è§£å†³ï¼šåŸå› ï¼šå¯†åŒ™ä¸åŒ¹é… git config --global --list æ˜¾ç¤º git é…ç½®ä¿¡æ¯ git config --global user.name â€œyournameâ€ï¼Œgit config --global user.email â€œemail@email.com â€è®¾ç½®å…¨å±€ç”¨æˆ·åå’Œé‚®ç®± ssh-keygen -t rsa -C â€œé‚®ç®±â€ clip &lt; ~/.ssh/id_rsa.pub å¤åˆ¶å¯†åŒ™ï¼Œåœ¨githubè®¾ç½®ä¸­æ–°å»ºSSH keyç²˜è´´å³å¯ ç”µè„‘åº”ç”¨ Synergyé”®é¼ å…±äº«å·¥å…· åšæœäº‘ï¼Œæ–‡ä»¶åŒæ­¥å·¥å…· Quicker PicGO Snipaste ScreenToGif å­¦ä¹  æµç¨‹å›¾ åœ¨çº¿æµç¨‹å›¾ ProcessOn ç¦»çº¿æµç¨‹å›¾ XMaind ç½‘ç«™æ¨è è‰ºæœ¯ è®°å½• æ—¶å…‰åºã€å¤‡å¿˜ï¼Œæé†’ï¼ŒTODOã€‘ æ’ä»¶ Edge Vimium Navigating the page j, Scroll down (scrollDown) k, Scroll up (scrollUp) gg Scroll to the top of the page (scrollToTop) G Scroll to the bottom of the page (scrollToBottom) d Scroll a half page down (scrollPageDown) u Scroll a half page up (scrollPageUp) Scroll a full page down (scrollFullPageDown) Scroll a full page up (scrollFullPageUp) h Scroll left (scrollLeft) l Scroll right (scrollRight) r Reload the page (reload) yy Copy the current URL to the clipboard (copyCurrentUrl) p Open the clipboard's URL in the current tab (openCopiedUrlInCurrentTab) P Open the clipboard's URL in a new tab (openCopiedUrlInNewTab) i Enter insert mode (enterInsertMode) v Enter visual mode (enterVisualMode) gi Focus the first text input on the page (focusInput) f Open a link in the current tab (LinkHints.activateMode) F Open a link in a new tab (LinkHints.activateModeToOpenInNewTab) Open a link in a new tab &amp; switch to it (LinkHints.activateModeToOpenInNewForegroundTab) gf Select the next frame on the page (nextFrame) gF Select the page's main/top frame (mainFrame) Using the vomnibar o Open URL, bookmark or history entry (Vomnibar.activate) O Open URL, bookmark or history entry in a new tab (Vomnibar.activateInNewTab) b Open a bookmark (Vomnibar.activateBookmarks) B Open a bookmark in a new tab (Vomnibar.activateBookmarksInNewTab) T Search through your open tabs (Vomnibar.activateTabSelection) Using find / Enter find mode (enterFindMode) n Cycle forward to the next find match (performFind) N Cycle backward to the previous find match (performBackwardsFind) Navigating history H Go back in history (goBack) L Go forward in history (goForward) Manipulating tabs t Create new tab (createTab) J, gT Go one tab left (previousTab) K, gt Go one tab right (nextTab) ^ Go to previously-visited tab (visitPreviousTab) g0 Go to the first tab (firstTab) g$ Go to the last tab (lastTab) yt Duplicate current tab (duplicateTab) Pin or unpin current tab (togglePinTab) Mute or unmute current tab (toggleMuteTab) x Close current tab (removeTab) X Restore closed tab (restoreTab) Miscellaneous ? Show help (showHelp) åŠå…¬ï¼š æ›¿æ¢ =LEFT(C2835,LEN(C2835)-1)&amp;&quot;è·¯-æ•£ç›˜&quot; æå– =MIDï¼ˆï¼‰ ç»“åˆ =CONCATENATE(A2,B2) éšæœº =CHOOSE(RANDBETWEEN(1,2),&quot;å‡ºè®©&quot;,&quot;åˆ’æ‹¨&quot;) éšæœºæ•° =RANDBETWEEN(5,100) å¥‡å¶ =MOD(ROW(),2) æ›¿æ¢ï¼Œæ’å…¥ =REPLACE(A1,2,,&quot;09&quot;) æŸ¥æ‰¾ =FIND(&quot;K&quot;,A2,1) æ¨¡ç³ŠåŒ¹é…åˆ é™¤ è®¡ç®—é‡å¤æ•°é‡ Countifï¼ˆç»Ÿè®¡èŒƒå›´ï¼Œç»Ÿè®¡å¯¹è±¡ï¼‰ =INDEX(Sheet0!A:AA,ROW(),MATCH(INDIRECT((CHAR(COLUMN()+ 64)&amp;1)),Sheet0!A1:AA1,0))å¤åˆ¶å¯¹åº”åˆ—åå•å…ƒæ ¼","link":"/2022/03/10/Draft/2021/%E5%B7%A5%E5%85%B7%E7%AF%87/"},{"title":"å¼€å‘ä¿®ç”µè„‘","text":"ä»‹ç» å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚---ã€Šè®ºè¯­Â·å«çµå…¬ã€‹ ç¡¬è½¯ä»¶å„ç§çŸ¥è¯† æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ï¼š WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ï¼š HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘ï¼š LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ï¼š è¿›åº¦ï¼šä¸Šç¯‡ ã€ã€‘ å¿«æŸ¥ ä¸€ã€ç¡¬ä»¶ 1.ä¸»æ¿ å‚æ•°ï¼š 2.æ˜¾å¡ 3.å†…å­˜ 4.ç¡¬ç›˜ 5. äºŒã€ç³»ç»Ÿ ä¸‰ã€å·¥å…· CPU - Z æŸ¥çœ‹CPUç­‰ç›¸å…³ä¿¡æ¯ AID64 æŸ¥çœ‹å…¨éƒ¨ç”µè„‘ç¡¬ä»¶ä¿¡æ¯ XTU æµ‹è¯•ç¨³å®šæ€§ å››ã€æœåŠ¡å™¨ äº”ã€ å¼•ç”¨ï¼š","link":"/2022/03/10/Draft/2021/%E5%BC%80%E5%8F%91%E4%BF%AE%E7%94%B5%E8%84%91/"},{"title":"æ‘„å½±æ‘„åƒ","text":"æ‘„å½±æ‘„åƒï¼Œè®°å½•æŠ€æœ¯ï¼Œåˆ†æå¤§ä½¬ã€è‡ªå·±ä½œå“ä»¥ç£ä¿ƒè¿›æ­¥ã€‚ ä¸€ã€æ‘„å½± æ„å›¾ å·¥å…· ä¿®å›¾ åˆ›æ„ äºŒã€æ‘„åƒ å‰ªè¾‘ å·¥å…· ä¸‰ã€çœç¾ + æ¨ªç«–å›¾ ![]() + æ¨ªå›¾4 ![]() + ç«–å›¾5 ![]() å¼•ç”¨ï¼š","link":"/2022/03/12/Draft/2021/%E6%91%84%E5%BD%B1%E6%91%84%E5%83%8F/"},{"title":"é­‘é­…å…ˆç”Ÿ | æ¯æ—¥ç®—æ³•","text":"ä¸ºä»€ä¹ˆå­¦ï¼Ÿç¼–ç¨‹çš„çµé­‚ï¼Œä¸ç®¡ä»€ä¹ˆè¯­è¨€éƒ½å¾—éœ€è¦ã€‚ å¦‚ä½•å­¦ï¼Ÿå¤šæƒ³å¤šå†™å¤šç”¨ å­¦åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿå®é™…è¿ç”¨ é¢˜æºï¼šLeetcode ä¸€.åŸºæœ¬æ•°æ®ç»“æ„ ç¬¬ä¸€ç«  ç®—æ³•å®šä¹‰ åœ¨ç‰¹å®šè®¡ç®—æ¨¡å‹ä¸‹ï¼Œåœ¨ä¿¡æ¯å¤„ç†è¿‡ç¨‹ä¸­ä¸ºäº†è§£å†³æŸä¸€ç±»é—®é¢˜è€Œè®¾è®¡çš„ä¸€ä¸ªæŒ‡ä»¤åºåˆ—ã€‚ è¦ç´ ï¼š è¾“å…¥ï¼šå¾…å¤„ç†çš„ä¿¡æ¯ï¼Œå³å¯¹å…·ä½“é—®é¢˜çš„æè¿°ã€‚ è¾“å‡ºï¼šç»è¿‡å¤„ç†ä¹‹åå¾—åˆ°çš„ä¿¡æ¯ï¼Œå³é—®é¢˜çš„ç­”æ¡ˆã€‚ ç¡®å®šæ€§ï¼šä»»ä¸€ç®—æ³•éƒ½å¯ä»¥æè¿°ä¸ºç”±è‹¥å¹²ç§åŸºæœ¬æ“ä½œç»„æˆçš„åºåˆ—ã€‚ å¯è¡Œæ€§ï¼šåœ¨ç›¸åº”çš„è®¡ç®—æ¨¡å‹ä¸­ï¼Œæ¯ä¸€åŸºæœ¬æ“ä½œéƒ½å¯ä»¥å®ç°ï¼Œä¸”èƒ½å¤Ÿåœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆã€‚ æœ‰ç©·æ€§ï¼šå¯¹äºä»»ä½•è¾“å…¥ï¼ŒæŒ‰ç…§ç®—æ³•ï¼Œç»è¿‡æœ‰ç©·æ¬¡åŸºæœ¬æ“ä½œéƒ½å¯ä»¥å¾—åˆ°æ­£ç¡®çš„è¾“å‡ºã€‚ 1.2æ€§èƒ½åˆ†æé¢„è¯„ä»· ä¸‰ä¸ªå±‚æ¬¡ï¼šåˆæ³•ç¨‹åºï¼Œç¡®å®šå°ºåº¦åº¦é‡ç®—æ³•æ•ˆç‡ï¼Œé€šè¿‡å¯¹ç®—æ³•è®¾è®¡ç¼–å†™æ•ˆç‡é«˜ï¼Œèƒ½å¤„ç†å¤§è§„æ¨¡æ•°æ®çš„ç¨‹åºï¼Œ æ—¶é—´å¤æ‚åº¦ T(n) åº¦é‡ç®—æ³•æ‰§è¡Œé€Ÿåº¦å¹¶è¯„ä»·å…¶æ•ˆç‡ï¼Œç®—æ³•éœ€è¦å¤šå°‘æ—¶é—´æ‰èƒ½å¾—åˆ°ç»“æœ ==ã€‹é’ˆå¯¹ä¸åŒè§„æ¨¡çš„è¾“å…¥ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´å„æ˜¯å¤šå°‘ ==ã€‹ç»Ÿä¸€è§„æ¨¡ç®—æ³•å¤„ç†æ—¶é—´ä¹Ÿä¸ç›¸åŒ ç©ºé—´å¤æ‚åº¦ ç®—æ³•æ‰€éœ€å­˜å‚¨ç©ºé—´ 1.3 ç®—æ³•å¤æ‚åº¦åŠå…¶åˆ†æ 1.3.1 O(1)â¯â¯å–éæç«¯å…ƒç´  1.3.2 O(logn)â¯â¯è¿›åˆ¶è½¬æ¢ 1.3.3 O(n)â¯â¯æ•°ç»„æ±‚å’Œ 1.3.4 O(n2)â¯â¯èµ·æ³¡æ’åº 1.3.5 O(2r)â¯â¯å¹‚å‡½æ•° 1.4 è®¡ç®—æ¨¡å‹ 1.4.1 å¯è§£æ€§ 1.4.2 æœ‰æ•ˆå¯è§£ 1.4.3 ä¸‹ç•Œ 1.5 é€’å½’ 1.5.1 çº¿æ€§é€’å½’ 1.5.2 é€’å½’ç®—æ³•çš„å¤æ‚åº¦åˆ†æ 1.5.3 äºŒåˆ†é€’å½’ 1.5.4 å¤šåˆ†æ”¯é€’å½’ ç¬¬äºŒç«  æ ˆä¸é˜Ÿåˆ— æ ˆä¸é˜Ÿåˆ—æœ€ç®€å•åŸºæœ¬ï¼Œä½†ä¹Ÿæ˜¯æœ€é‡è¦çš„ã€‚JVMï¼ŒCPUï¼ŒJavaæä¾›å¯¹åº”å†…å»ºç±»ï¼Œ 2.1 æ ˆ åè¿›å…ˆå‡ºï¼ˆLast-in-first-outï¼ŒLIFOï¼‰ï¼Œæ¯”å¦‚æµè§ˆå™¨è®¿é—®è®°å½•ä¸å›é€€ï¼Œç¼–è¾‘å›é€€ã€‚ å…ƒç´ ï¼š æ ˆå®¹é‡ï¼Œæ ˆé¡¶æŒ‡é’ˆï¼Œåˆå§‹åŒ– è¿›æ ˆpush()ã€å‡ºæ ˆpop()ï¼ŒæŸ¥æ ˆé¡¶peek() Java java.util.Stack ï¼špush()ã€pop()ã€peek()ï¼ˆåŠŸèƒ½ç­‰ä»·äºtop()ï¼‰ã€getSize()ä»¥åŠempty()ï¼ˆåŠŸèƒ½ç­‰ä»·äºisEmpty()ï¼‰ åº”ç”¨ï¼šæ•°ç»„å€’ç½®ï¼Œæ‹¬å·åŒ¹é…ç®—æ³•ï¼Œ ä¸‰ç§å®ç°æ–¹å¼ æ•°ç»„ é“¾è¡¨ LinkedList 2.2 é˜Ÿåˆ— å…ˆè¿›å…ˆå‡ºï¼ˆFirst-In-First-Out, FIFOï¼‰ï¼Œç¾½æ¯›çƒç­’ 2.2.1 é˜Ÿåˆ—ADT Queue æ¥å£ å…ƒç´  é˜Ÿå¤´ã€é˜Ÿå°¾ã€é˜Ÿå°¾åŠ å…ƒç´ add()ï¼Œé˜Ÿå¤´åˆ é™¤å…ƒç´ poll(),æŸ¥é˜Ÿå¤´å…ƒç´ peek() 2.2.2 åŸºäºæ•°ç»„çš„å®ç° é¡ºåºæ•°ç»„ï¼Œæ•´ä½“ç§»åŠ¨ å¾ªç¯æ•°ç»„ï¼Œ æ€§èƒ½åˆ†æï¼ŒO(1)ã€‚ 2.2.3 é˜Ÿåˆ—åº”ç”¨å®ä¾‹ å¾ªç¯åˆ†é…å™¨ï¼ŒJosephus ç¯ 2.3 é“¾è¡¨ æ•°ç»„é•¿åº¦å¿…é¡»å›ºå®šï¼Œåœ¨ç©ºé—´æ•ˆç‡åŠé€‚åº”æ€§æ–¹é¢è¿˜å­˜åœ¨ä¸è¶³ã€‚ 2.3.1 å•é“¾è¡¨ å…ƒç´  é¦–èŠ‚ç‚¹ï¼Œæœ«èŠ‚ç‚¹ â€‹ é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ†åˆ«ç§°ä½œé“¾è¡¨çš„é¦–èŠ‚ç‚¹ï¼ˆHeadï¼‰å’Œæœ«èŠ‚ç‚¹ï¼ˆTailï¼‰ã€‚æœ«èŠ‚ç‚¹çš„ç‰¹å¾æ˜¯ï¼Œå…¶next å¼•ç”¨ä¸ºç©ºã€‚å¦‚æ­¤å®šä¹‰çš„é“¾è¡¨ï¼Œç§°ä½œå•é“¾è¡¨ï¼ˆSingly linkedlistï¼‰ã€‚ â€‹ ä¸æ•°ç»„ç±»ä¼¼ï¼Œå•é“¾è¡¨ä¸­çš„å…ƒç´ ä¹Ÿå…·æœ‰ä¸€ä¸ªçº¿æ€§æ¬¡åºâ¯â¯è‹¥P çš„next å¼•ç”¨æŒ‡å‘Sï¼Œåˆ™P å°±æ˜¯Sçš„ç›´æ¥å‰é©±ï¼Œè€ŒS æ˜¯P çš„ç›´æ¥åç»§ã€‚ä¸æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œå•é“¾è¡¨çš„é•¿åº¦ä¸å†å›ºå®šï¼Œè€Œæ˜¯å¯ä»¥æ ¹æ®å®é™…éœ€è¦ä¸æ–­å˜åŒ–ã€‚å¦‚æ­¤ä¸€æ¥ï¼ŒåŒ…å«n ä¸ªå…ƒç´ çš„å•é“¾è¡¨åªéœ€å ç”¨O(n)ç©ºé—´â¯â¯è¿™è¦æ¯”å®šé•¿æ•°ç»„æ›´ä¸ºçµæ´»ã€‚ 2.4 ä½ç½® 2.5 åŒç«¯é˜Ÿåˆ— ç¬¬ä¸‰ç«  å‘é‡ã€åˆ—è¡¨ä¸åºåˆ— â€‹ åºåˆ—ï¼ˆSequenceï¼‰ï¼Œå°±æ˜¯ä¾æ¬¡æ’åˆ—çš„å¤šä¸ªå¯¹è±¡ï¼Œå°±æ˜¯ä¸€ç»„å¯¹è±¡ä¹‹é—´çš„åç»§ä¸å‰é©±å…³ç³»ï¼Œæ˜¯æ•°æ®ç»“æ„è®¾è®¡çš„åŸºç¡€ã€‚ä¸¤ç§å…¸å‹çš„åºåˆ—ï¼šå‘é‡ï¼ˆVectorï¼‰å’Œåˆ—è¡¨ï¼ˆListï¼‰ã€‚ 3.1 å‘é‡ä¸æ•°ç»„ 3.1.1 å‘é‡ADT ç¬¬å››ç«  æ ‘ â€‹ å‰é¢æ‰€æœ‰çš„æ•°æ®ç»“æ„æ ¹æ®å…¶å®ç°æ–¹å¼ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºåŸºäºæ•°ç»„å®ç°å’ŒåŸºäºé“¾è¡¨å®ç°ï¼Œå…¶å„æœ‰é•¿çŸ­ï¼Œæ•°ç»„å–„æŸ¥æ‰¾è¯»å–ï¼Œä¿®æ”¹è€—æ—¶ï¼Œé“¾è¡¨åä¹‹ã€‚ä¸¤è€…æœ‰ç‚¹èƒ½ç»“åˆ?æ ‘æˆ–è®¸å¯ä»¥å›ç­”è¿™ä¸ªé—®é¢˜ã€‚ æœ¯è¯­åŠæ€§è´¨ èŠ‚ç‚¹çš„æ·±åº¦ã€æ ‘çš„æ·±åº¦ä¸é«˜åº¦ â€‹ æ ‘ä¸­çš„å…ƒç´ ä¹Ÿç§°ä½œèŠ‚ç‚¹ï¼ˆNodeï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„æ·±åº¦éƒ½æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ï¼›æ·±åº¦ä¸º0 çš„èŠ‚ç‚¹æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼Œç§°ä½œæ ‘æ ¹ï¼ˆRootï¼‰ï¼›å¯¹äºæ·±åº¦ä¸ºk (kâ‰¥1)çš„æ¯ä¸ªèŠ‚ç‚¹uï¼Œéƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ·±åº¦ä¸ºk-1 çš„èŠ‚ç‚¹v ä¸ä¹‹å¯¹åº”ï¼Œç§°ä½œu çš„çˆ¶äº²ï¼ˆParentï¼‰æˆ–çˆ¶èŠ‚ç‚¹ã€‚å®šä¹‰å››.2 è‹¥èŠ‚ç‚¹v æ˜¯èŠ‚ç‚¹u çš„çˆ¶äº²ï¼Œåˆ™u ç§°ä½œv çš„å­©å­ï¼ˆChildï¼‰ï¼Œå¹¶åœ¨äºŒè€…ä¹‹é—´å»ºç«‹ä¸€æ¡æ ‘è¾¹ï¼ˆEdgeï¼‰ã€‚åŒä¸€èŠ‚ç‚¹çš„å­©å­äº’ç§°â€œå…„å¼Ÿâ€ï¼ˆSiblingï¼‰ã€‚æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„æœ€å¤§æ·±åº¦ï¼Œç§°ä½œæ ‘çš„æ·±åº¦æˆ–é«˜åº¦ã€‚æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®ï¼Œæ€»æ˜¯ç­‰äºè¾¹æ•°åŠ ä¸€ã€‚ åº¦ã€å†…éƒ¨èŠ‚ç‚¹ä¸å¤–éƒ¨èŠ‚ç‚¹ â€‹ ä»»ä¸€èŠ‚ç‚¹çš„å­©å­æ•°ç›®ï¼Œç§°ä½œå®ƒçš„â€œåº¦â€ï¼ˆDegreeï¼‰ã€‚è‡³å°‘æ‹¥æœ‰ä¸€ä¸ªå­©å­çš„èŠ‚ç‚¹ç§°ä½œâ€œå†…éƒ¨èŠ‚ç‚¹â€ï¼ˆInternal nodeï¼‰ï¼›æ²¡æœ‰ä»»ä½•å­©å­çš„èŠ‚ç‚¹åˆ™ç§°ä½œ â€œå¤–éƒ¨èŠ‚ç‚¹â€ï¼ˆExternal nodeï¼‰æˆ–â€œå¶å­â€ï¼ˆLeafï¼‰ã€‚ è·¯å¾„ â€‹ ç”±æ ‘ä¸­k+1 èŠ‚ç‚¹é€šè¿‡æ ‘è¾¹é¦–å°¾è¡”æ¥è€Œæ„æˆçš„åºåˆ—{ (v0, v1), (v1, v2), â€¦, (vk-1, vk) | k â‰¥ 0}ï¼Œç§°ä½œæ ‘ä¸­é•¿åº¦ä¸ºk çš„ä¸€æ¡è·¯å¾„ï¼ˆPathï¼‰ã€‚ç”±å•ä¸ªèŠ‚ç‚¹ã€é›¶æ¡è¾¹æ„æˆçš„è·¯å¾„ä¹Ÿæ˜¯åˆæ³•çš„ï¼Œå…¶é•¿åº¦ä¸º0ã€‚æ ‘ä¸­ä»»ä½•ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´éƒ½å­˜åœ¨å”¯ä¸€çš„ä¸€æ¡è·¯å¾„ã€‚è‹¥v æ˜¯u çš„çˆ¶äº²ï¼Œåˆ™depth(v) + 1 = depth(u)ã€‚ä»æ ‘æ ¹é€šå¾€ä»»ä¸€èŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦ï¼Œæ°å¥½ç­‰äºè¯¥èŠ‚ç‚¹çš„æ·±åº¦ã€‚ ç¥–å…ˆã€åä»£ã€å­æ ‘å’ŒèŠ‚ç‚¹çš„é«˜åº¦ æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯è‡ªå·±çš„â€œç¥–å…ˆâ€ï¼ˆAncestorï¼‰ï¼Œä¹Ÿæ˜¯è‡ªå·±çš„â€œåä»£â€ï¼ˆDescendentï¼‰ï¼› è‹¥v æ˜¯u çš„çˆ¶èŠ‚ç‚¹çš„ç¥–å…ˆï¼Œåˆ™v ä¹Ÿæ˜¯u çš„ç¥–å…ˆï¼› è‹¥u çš„çˆ¶èŠ‚ç‚¹æ˜¯v çš„åä»£ï¼Œåˆ™u ä¹Ÿæ˜¯v çš„åä»£ã€‚ é™¤èŠ‚ç‚¹æœ¬èº«ä»¥å¤–çš„ç¥–å…ˆï¼ˆåä»£ï¼‰ï¼Œç§°ä½œçœŸç¥–å…ˆï¼ˆåä»£ï¼‰ã€‚ä»»ä¸€èŠ‚ç‚¹v çš„æ·±åº¦ï¼Œç­‰äºå…¶çœŸç¥–å…ˆçš„æ•°ç›®ã€‚ä»»ä¸€èŠ‚ç‚¹v çš„ç¥–å…ˆï¼Œåœ¨æ¯ä¸€æ·±åº¦ä¸Šæœ€å¤šåªæœ‰ä¸€ä¸ªã€‚æ ‘T ä¸­æ¯ä¸€èŠ‚ç‚¹v çš„æ‰€æœ‰åä»£ä¹Ÿæ„æˆä¸€æ£µæ ‘ï¼Œç§°ä½œT çš„â€œä»¥v ä¸ºæ ¹çš„å­æ ‘ï¼ˆSubtreeï¼‰â€è‹¥å­æ ‘v çš„æ·±åº¦ï¼ˆé«˜åº¦ï¼‰ä¸ºhï¼Œåˆ™ç§°v çš„é«˜åº¦ä¸ºhï¼Œè®°ä½œheight(v) = hã€‚å¯¹äºå¶å­èŠ‚ç‚¹u çš„ä»»ä½•ç¥–å…ˆvï¼Œå¿…æœ‰depth(v) + height(v) â‰¥ depth(u)ã€‚ å…±åŒç¥–å…ˆåŠæœ€ä½å…±åŒç¥–å…ˆ åœ¨æ ‘T ä¸­ï¼Œè‹¥èŠ‚ç‚¹u å’Œv éƒ½æ˜¯èŠ‚ç‚¹a çš„åä»£ï¼Œåˆ™ç§°èŠ‚ç‚¹a ä¸ºèŠ‚ç‚¹u å’Œv çš„å…±åŒç¥–å…ˆï¼ˆCommonancestorï¼‰ã€‚æ¯ä¸€å¯¹èŠ‚ç‚¹è‡³å°‘å­˜åœ¨ä¸€ä¸ªå…±åŒç¥–å…ˆã€‚åœ¨ä¸€å¯¹èŠ‚ç‚¹u å’Œv çš„æ‰€æœ‰å…±åŒç¥–å…ˆä¸­ï¼Œæ·±åº¦æœ€å¤§è€…ç§°ä¸ºå®ƒä»¬çš„æœ€ä½å…±åŒç¥–å…ˆï¼ˆLowerestcommon ancestorï¼‰ï¼Œè®°ä½œlca(u, v)ã€‚æ¯ä¸€å¯¹èŠ‚ç‚¹çš„æœ€ä½å…±åŒç¥–å…ˆå¿…å­˜åœ¨ä¸”å”¯ä¸€ã€‚ æœ‰åºæ ‘ã€m å‰æ ‘ åœ¨æ ‘T ä¸­ï¼Œè‹¥åœ¨æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­©å­ä¹‹é—´éƒ½å¯ä»¥å®šä¹‰æŸä¸€çº¿æ€§æ¬¡åºï¼Œåˆ™ç§°T ä¸ºä¸€æ£µâ€œæœ‰åºæ ‘ï¼ˆOrdered treeï¼‰â€æ¯ä¸ªå†…éƒ¨èŠ‚ç‚¹å‡ä¸ºm åº¦çš„æœ‰åºæ ‘ï¼Œç§°ä½œm å‰æ ‘ã€‚ äºŒå‰æ ‘ æ¯ä¸ªèŠ‚ç‚¹å‡ä¸è¶…è¿‡2 åº¦çš„æœ‰åºæ ‘ï¼Œç§°ä½œäºŒå‰æ ‘ï¼ˆBinary treeï¼‰ã€‚ä¸å«1 åº¦èŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œç§°ä½œçœŸäºŒå‰æ ‘ï¼ˆProper binary treeï¼‰ï¼Œå¦åˆ™ç§°ä½œéçœŸäºŒå‰æ ‘ ï¼ˆImproper binary treeï¼‰ã€‚åœ¨äºŒå‰æ ‘ä¸­ï¼Œæ·±åº¦ä¸ºk çš„èŠ‚ç‚¹ä¸è¶…è¿‡2k ä¸ªã€‚é«˜åº¦ä¸ºh çš„äºŒå‰æ ‘æœ€å¤šåŒ…å«2h+1-1 ä¸ªèŠ‚ç‚¹ã€‚ç”±n ä¸ªèŠ‚ç‚¹æ„æˆçš„äºŒå‰æ ‘ï¼Œé«˜åº¦è‡³å°‘ä¸ºâ£log2nâ¦ã€‚åœ¨äºŒå‰æ ‘ä¸­ï¼Œå¶å­æ€»æ˜¯æ¯”2 åº¦èŠ‚ç‚¹å¤šä¸€ä¸ªã€‚ æ»¡äºŒå‰æ ‘ä¸å®Œå…¨äºŒå‰æ ‘ è‹¥äºŒå‰æ ‘T ä¸­æ‰€æœ‰å¶å­çš„æ·±åº¦å®Œå…¨ç›¸åŒï¼Œåˆ™ç§°ä¹‹ä¸ºæ»¡äºŒå‰æ ‘ï¼ˆFull binary treeï¼‰é«˜åº¦ä¸ºh çš„äºŒå‰æ ‘æ˜¯æ»¡çš„ï¼Œå½“ä¸”ä»…å½“å®ƒæ‹¥æœ‰2h åŒ¹å¶å­ã€2h+1-1 ä¸ªèŠ‚ç‚¹ã€‚è‹¥åœ¨ä¸€æ£µæ»¡äºŒå‰æ ‘ä¸­ï¼Œä»æœ€å³ä¾§èµ·å°†ç›¸é‚»çš„è‹¥å¹²åŒ¹å¶å­èŠ‚ç‚¹æ‘˜é™¤æ‰ï¼Œåˆ™å¾—åˆ°çš„äºŒå‰æ ‘ç§°ä½œå®Œå…¨äºŒå‰æ ‘ï¼ˆComplete binary treeï¼‰ã€‚ç”±n ä¸ªèŠ‚ç‚¹æ„æˆçš„å®Œå…¨äºŒå‰æ ‘ï¼Œé«˜åº¦h = â£log2nâ¦ã€‚åœ¨ç”±å›ºå®šæ•°ç›®çš„èŠ‚ç‚¹æ‰€ç»„æˆçš„æ‰€æœ‰äºŒå‰æ ‘ä¸­ï¼Œå®Œå…¨äºŒå‰æ ‘çš„é«˜åº¦æœ€ä½ã€‚ ç¬¬äº”ç«  ä¼˜å…ˆé˜Ÿåˆ— ç¬¬å…­ç«  æ˜ å°„ä¸è¯å…¸ ç¬¬ä¸ƒç«  æŸ¥æ‰¾æ ‘ ç¬¬å…«ç«  ä¸² ç¬¬ä¹ç«  å›¾ äºŒã€å¸¸ç”¨ç®—æ³• æ’åº 1ã€å†’æ³¡æ’åº 2ã€é€‰æ‹©æ’åº 3ã€æ’å…¥æ’åº 4ã€å¸Œå°”æ’åº 5ã€å½’å¹¶æ’åº 6ã€å¿«é€Ÿæ’åº ç„¶ååŸºå‡†ä¸¤è¾¹åˆ†åˆ«å¿«é€Ÿæ’åº 7ã€å †æ’åº 8ã€è®¡æ•°æ’åº 9ã€æ¡¶æ’åº 10ã€åŸºæ•°æ’åº æŸ¥æ‰¾ 1. é¡ºåºæŸ¥æ‰¾ 2. äºŒåˆ†æŸ¥æ‰¾ 3. æ’å€¼æŸ¥æ‰¾ 4. æ–æ³¢é‚£å¥‘æŸ¥æ‰¾ 5. æ ‘è¡¨æŸ¥æ‰¾ 6. åˆ†å—æŸ¥æ‰¾ 7. å“ˆå¸ŒæŸ¥æ‰¾ ä¸‰ã€ç®—æ³•é¢˜ 2.18é¢˜ç›®ï¼šåºå·-é¢˜ç›® æ€è·¯1ï¼š 123æ€è·¯1ä¼˜ç‚¹ï¼šç¼ºç‚¹ï¼š ä»£ç 1ï¼š 1ä»£ç 1 æ€è·¯2ï¼š 123æ€è·¯2ä¼˜ç‚¹ï¼šç¼ºç‚¹ï¼š ä»£ç 2ï¼š 1ä»£ç 2 å‚è€ƒæ–‡çŒ®ï¼šæ•°æ®ç»“æ„é¢„ç®—æ³•(Javaæè¿°)é‚“ä¿Šè¾‰","link":"/2021/02/19/Draft/2021/%E6%AF%8F%E6%97%A5%E7%AE%97%E6%B3%95/"},{"title":"æ¶æ„å¸ˆ","text":"ç³»ç»Ÿè®¾è®¡ç»éªŒï¼Œæ¶æ„çŸ¥è¯†å­¦ä¹ è®°å½• æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ï¼š WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ï¼š HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºï¼ˆå®˜æ–¹æ–‡æ¡£ã€è§†é¢‘èµ„æºï¼‰ã€‘ï¼š LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ï¼š ä¸€ã€è®¾è®¡ç»éªŒ ç³»ç»Ÿè®¾è®¡ ç³»ç»Ÿåˆ†å±‚ SpringBoot æ•°æ®åº“è®¾è®¡ äºŒã€ å¼•ç”¨ï¼š","link":"/2022/03/19/Draft/2021/%E6%9E%B6%E6%9E%84%E5%B8%88/"},{"title":"é­‘é­…å…ˆç”Ÿ | ç¨‹åºå‘˜è‹±è¯­","text":"æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘å­¦ä¹ äº¤æµå¨±ä¹ WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ç¨‹åºå‘˜ä¸“ä¸šè¯æ±‡ï¼Œæ—¥å¸¸è‹±è¯­ HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘:Googleæ—¥å¸¸åŒ–ã€è‹±æ–‡æ–‡æ¡£æ—¥å¸¸åŒ–ã€è¯æ±‡è®°å¿† LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ç†Ÿç»ƒä½¿ç”¨ å›¾è§£æ—¥å¸¸è‹±è¯­å•è¯ é€šä¿—æ˜“æ‡‚çš„è‹±è¯­è¯­æ³• é’ˆå¯¹è®¡ç®—æœºè‹±è¯­ å£è¯­ç»ƒä¹ è®°å½• è‹±æ–‡æ–‡æ¡£è®°å½• JAVA Springå…¨å®¶æ¡¶","link":"/2021/02/25/Draft/2021/%E6%AF%8F%E6%97%A5%E8%8B%B1%E8%AF%AD/"},{"title":"é­‘é­…å…ˆç”Ÿ | æ¯æ—¥é¢é¢˜","text":"ä¿æŒåŸºç¡€çŸ¥è¯†çš„æ•æ„Ÿåº¦ï¼Œä»¥è‡³äºå¹³æ—¶çš„ä¸æ–­åº”ç”¨ã€‚ Javaåˆ·é¢˜ ä¸»è¦åˆ†ç±»ï¼š JVMï¼Œç½‘ç»œï¼ŒJavaåŸºç¡€ï¼Œç®—æ³•æ•°æ®ç»“æ„ï¼Œæ•°æ®åº“é«˜çº§çŸ¥è¯†ï¼Œæ¡†æ¶åŸç†ï¼Œè®¾è®¡æ¨¡å¼ï¼Œåˆ†å¸ƒå¼ JavaåŸºç¡€ æŸ¥çœ‹JAVAåŸºç¡€é¡¹ç›®å¹¶è¡¥å……ï¼ŒåŒ…å«javaåŸºç¡€ï¼Œ JVM ç½‘ç»œ ç®—æ³•æ•°æ®ç»“æ„ æ•°æ®åº“é«˜çº§çŸ¥è¯† æ¡†æ¶åŸç† è®¾è®¡æ¨¡å¼ åˆ†å¸ƒå¼","link":"/2021/03/01/Draft/2021/%E6%AF%8F%E6%97%A5%E9%9D%A2%E9%A2%98/"},{"title":"è‡ªåª’ä½“","text":"è‡ªåª’ä½“ç»éªŒã€è“å›¾ 2022-GOALS å¼•æµè¾“å‡º æ ¸å¿ƒäº§å“ï¼ˆç¬”è®°ç­‰æœ‰ä»·å€¼ç‰©ï¼‰ æ‘„å½±æ‘„åƒç¬”è®° 2021-GOALS å‰ç«¯æ ç›® Javaæ ç›® Pythonæ ç›® æ¯æ—¥ç®—æ³•æ ç›® è®¾è®¡æ¨¡å¼æ ç›® ç½‘ç»œçŸ¥è¯†æ ç›® éŸ³ä¹ä¹ç†æ ç›® èŒåœºç»éªŒæ ç›® è‰ºæœ¯æ¬£èµæ ç›® è®¾è®¡æ ç›® å·¥å…·æ ç›® è¯­è¨€æ ç›® è‡ªåª’ä½“çŸ©é˜µä¸åˆ†æ å—ä¼—ã€æ–¹å‘ã€ æŠ–éŸ³ã€è‰ºæœ¯ï¼Œç”Ÿæ´»ï¼Œå‰ªè¾‘ï¼ŒVlogã€‘çŸ­è§†é¢‘ VUEã€Vlogã€‘é•¿è§†é¢‘ bilibiliã€åˆé›†ã€‘é•¿è§†é¢‘ å¤´æ¡ã€çŸ¥è¯†ï¼Œæ–°é—»ã€‘ çŸ¥ä¹ã€ç”Ÿæ´»ã€çŸ¥è¯†ã€‘ CSDNã€ä¸“ä¸šçŸ¥è¯†ã€‘ å¾®åšã€å®£ä¼ ã€‘ ç®€ä¹¦ã€æ–‡å­—ã€‘ å°çº¢ä¹¦ã€æ—¶å°šã€ç”Ÿæ´»ã€‘ è±†ç“£ã€è®°å½•è‰ºæœ¯ã€‘ å…¬ä¼—å·ã€è¾“å‡ºã€‘ æ ¸å¿ƒæ–¹å‘ æŠ€æœ¯åˆ†äº«ã€äº¤æµã€ç”Ÿæ´»åˆ†äº« è‡ªåª’ä½“çŸ¥è¯† æ’ç‰ˆ å¼•æµ å˜ç° è‡ªåª’ä½“ç»éªŒ","link":"/2021/02/09/Draft/2021/%E8%87%AA%E5%AA%92%E4%BD%93/"},{"title":"é­‘é­…å…ˆç”Ÿ | èµ„æºç¯‡","text":"JVM ä¸ä¸Šå±‚æŠ€æœ¯ é­‘é­…å…ˆç”Ÿ | èµ„æºç¯‡ é­‘é­…å…ˆç”Ÿ | èµ„æºç¯‡ ä¸€.ç¨‹åºå‘˜ä¹¦å±‹ï¼ˆç¼–ç¨‹ç›¸å…³ï¼ŒKindle ç›¸å…³ ä¸€å…±112ä¸ª G èµ„æºï¼‰ Javaèµ„æº101ä¸ª G å›Šæ‹¬å¤§éƒ¨åˆ† Java å¼€å‘å°ç™½åˆ°å…¨æ ˆå¤§ç¥æ‰€éœ€é˜…è¯»å…¨éƒ¨ä¹¦ç±ï¼Œè®¾è®¡æ¨¡å¼ã€ç½‘ç»œã€ç®—æ³•ã€æ¡†æ¶ã€èŒåœºç»éªŒ â€‹ å…³æ³¨å…¬ä¼—å·å‘é€ å°ä¹¦å±‹ è·å–ä¸‹è½½é“¾æ¥ ä¸ä»…å¦‚æ­¤ï¼Œè¿˜æœ‰ Kindle å„ç±»ç”µå­ä¹¦ç±11ä¸ªG ç´¢å¼•åœ¨æ­¤ç‚¹å‡» æœç´¢ä¹‹åæœ‰éœ€è¦çš„ å…³æ³¨å…¬ä¼—å·å‘é€ Kindleè·å–ä¸‹è½½é“¾æ¥ï¼ äºŒ.å­¦ä¹ ç½‘ç«™ï¼ˆæŒç»­æ›´æ–°ä¸­ï¼‰ 1.ç¼–ç¨‹ç½‘ç«™ï¼š Refactoring.Guru â€‹ è®¾è®¡æ¨¡å¼åœ¨çº¿å­¦ä¹ ï¼Œç¨‹åºå‘˜ä¹‹é—´çš„æ²Ÿé€šè¯­è¨€ï¼Œå­¦ä¹ å¿…ä¸å¯å°‘çš„çŸ¥è¯†ï¼Œæœ‰å„ç§ä»£ç ç¤ºèŒƒï¼ŒUMLå›¾ï¼ŒåŠ¨æ¼«æ¼”ç¤ºã€‚ Visualgo â€‹ ç®—æ³•åœ¨çº¿å¯è§†åŒ–è¿‡ç¨‹ï¼Œç†è§£æ›´åŠ å®¹æ˜“ï¼Œè¿‡ç¨‹é€Ÿåº¦å¯è°ƒï¼Œæ­¥éª¤å¯æ§ï¼Œä»£ç å¯è§‚ã€‚ Github â€‹ å°†è‡ªå·±çš„å­¦ä¹ ä»£ç è¿›è¡Œç‰ˆæœ¬åŒ–ç®¡ç†ï¼Œå°†å­¦ä¹ èµ„æºæ•´ç†å½’çº³ï¼Œå­¦ä¹ åˆ«äººçš„ä¼˜ç§€é¡¹ç›®ï¼Œè·å–å…¨çƒæœ€æ–°èµ„æºï¼Œå¥½å¤„å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œæ¯ä¸ªç¨‹åºå‘˜éƒ½äº†è§£ã€‚ CSDN â€‹ ä¸€ä¸ªäººçš„æˆå°±å¾€å¾€ä¸åœ¨äºå¾—åˆ°å¤šå°‘ï¼Œè€Œåœ¨äºè¾“å‡ºå¤šå°‘ï¼Œä¸€ä¸ªæœ‰è´¡çŒ®çš„ç¨‹åºå‘˜å¾€å¾€æ˜¯ä¼šåˆ†äº«çš„ã€‚è¿™ä¸ªåšå®¢ç½‘ç«™æ±‡èšå¾ˆå¤šå¤§ç‰›ï¼Œä¹Ÿæœ‰å¾ˆå¤š demoï¼Œè®©ä½ å¯ä»¥ä¸é‡å¤é€ è½®å­ã€‚ 2.è®¾è®¡ç½‘ç«™ï¼š doyoudo â€‹ å­¦ä¹  Aeã€Psã€Prã€C4Dã€ä¹ç†ç­‰ç­‰ã€‚å°è±¡ä¸­å°ç™½è€å¸ˆçš„ç”ŸåŠ¨è¯¾å ‚æ˜¯è®©æˆ‘å¯¹è®¾è®¡æ„Ÿå…´è¶£ç¬¬ä¸€åŸå› ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªè®©æˆ‘æœ‰æƒ³ä¸Šä»˜è´¹è¯¾å†²åŠ¨çš„å­¦ä¹ ç½‘ç«™ã€‚ Colordrop â€‹ é…è‰²ç½‘ç«™ï¼Œç›´è§‚ä¸”å¤åˆ¶æ–¹ä¾¿ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„é…è‰²äº†ã€‚ åˆ›å®¢è´´ â€‹ ä¸ä¼š PS æ²¡å…³ç³»ï¼Œåˆ›å®¢è´´ç›´æ¥æ‹‰åŠ¨ä¿®æ”¹å…ƒç´ ï¼Œä¸€åˆ‡éƒ½ç›´æ¥è®¾è®¡å¥½äº†ï¼Œå°ç™½å¼æ‹–åŠ¨ä¾¿å¯å¿«é€Ÿå®Œæˆè®¾è®¡æ›´æ”¹ï¼Œè¿˜å¯ä»¥ç›´æ¥ä¿®æ”¹ GIF åŠ¨å›¾ï¼ 3.é€šç”¨ç½‘ç«™ï¼š Bilibili ä¸ä»…ä»…æœ‰é¬¼ç•œï¼Œä½ æƒ³æœ‰çš„æ•™ç¨‹éƒ½æœ‰ï¼Œæ‘„å½±ã€è®¾è®¡ã€ç¼–ç¨‹ã€ç»˜ç”»ç­‰ï¼Œæ˜¯ç°ä»£å­¦ä¹ è€…ä¸å¯ç¼ºå°‘èšé›†åœ°ã€‚ Coursera å›½å¤–å­¦ä¹ ç½‘ç«™ï¼Œå…è´¹èµ„æºå¾ˆå¤šï¼Œå¯ä»¥æ¥è§¦æ›´åŠ åŠæ—¶çš„çŸ¥è¯†ã€‚ ä¸‰.è½¯ä»¶æ¨èï¼ˆæŒç»­æ›´æ–°ä¸­ï¼‰ ç”µè„‘ç¯‡ è‹±è¯­è¯­æ³•ä¹¦å†™çº æ­£ï¼Œæ¯•ç«Ÿè¯­æ³•çº æ­£é™¤äº†è€å¸ˆå°±åªæœ‰ä»–äº†ã€‚ è‡ªåª’ä½“å¿…å¤‡ï¼ŒMarkdownæœ€ä½³åˆ©å™¨ã€‚ å­—ä½“ä¸­å¤®ç®¡ç†ï¼Œå…è´¹å•†ç”¨å°±å¤Ÿä½ ç”¨ä¸€è¾ˆå­äº†ï¼Œç‰ˆæƒé—®é¢˜ä¸ç”¨è€ƒè™‘äº† Markdownå›¾åºŠç®¡ç†ä¼˜ç§€è½¯ä»¶ä¹‹ä¸€ æœ‰ä»–è¿˜è¦å•¥ç™¾åº¦äº‘ï¼Œé…åˆchromeä½¿ç”¨æ›´é¦™ ä½ æœ‰ä¸ªipadæ”¾é‚£ç›–æ³¡é¢ä¸å¦‚æ‹¿æ¥ç”¨ä½œä½ çš„ç¬¬äºŒå±å¹• è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿æœ€ä½³å®è·µï¼Œè®°å¿†ä»»ä½•çŸ¥è¯†ï¼Œè‡ªä¸»å¡ç‰‡å½¢å¼ ç›®å‰ä½¿ç”¨è¿‡çš„æœ€ä½³æ€ç»´å¯¼å›¾è½¯ä»¶ ä¸‰ç«¯äº’ä¼ æ–‡ä»¶ï¼Œæ— ç¼åŒæ­¥ï¼Œåœ¨é¸¿è’™ç³»ç»Ÿå‡ºæ¥ä¹‹å‰å®ƒå¯èƒ½ä¸€ç›´æ˜¯æˆ‘çš„ä¸»åŠ› å®‰å“å¯ç”¨ï¼Œç”µè„‘æ“æ§æ‰‹æœºï¼Œå¯æ— çº¿æ§åˆ¶ï¼Œä¸Šç­åˆ’æ°´åˆ©å™¨ï¼Œå…è´¹å¼€æº æŠ“åŒ…ï¼Œæµ‹è¯•ï¼Œç½‘ç»œæ¨¡æ‹Ÿï¼Œæ–°ä¸–ç•Œï¼Œä¸€ä¸å°å¿ƒä»æŠ“åŒ…åˆ°å…¥ç‹± æµè§ˆå™¨æ’ä»¶ â€‹ chromeæœ‰äº†å®ƒï¼Œå•¥ä¼šå‘˜éƒ½ä¸ç”¨å¼€ã€‚ â€‹ æœ‰äº†å®ƒï¼Œä»»ä½•å¤æ‚é¡µé¢éƒ½å¯ä»¥å˜å¾—å°æ¸…æ–°ã€‚ ipadç¯‡ ï¼ˆå¾…æ›´æ–°[å¦‚ä½•æŠ“åŒ…è·å–å„ç§å›´å“çš®ï¼Œå¦‚ä½•é«˜æ•ˆç‡åˆ©ç”¨å­¦ä¹ è½¯ä»¶]ï¼‰ æ‰‹æœºç¯‡ ï¼ˆå¾…æ›´æ–°[å„ç§é»‘ç§‘æŠ€å°å·¥å…·]ï¼‰ â€‹ é­‘é­…å…ˆç”Ÿï¼Œä¸€åªæ‹¼ææˆä¸ºé­‘é­…å¤§èƒ½çš„å°é¬¼(â—â€”â—) å››.è®¾è®¡èµ„æºï¼ˆæŒç»­æ›´æ–°ä¸­ï¼‰ â€‹ åŒ…æ‹¬å„å¤§æµ·æŠ¥ï¼Œå­—ä½“ï¼Œç¬”åˆ·ï¼Œç´ æï¼ŒLOGOï¼Œå…¨å®¶æ¡¶ç­‰ç­‰ï¼Œå…¬ä¼—å·å›å¤è®¾è®¡èµ„æºè·å–ä¸‹è½½é“¾æ¥ â€‹ ! äº”.è§†é¢‘èµ„æºï¼ˆæŒç»­æ›´æ–°ä¸­ï¼‰ Javaï¼ŒPythonç›¸å…³åŸºç¡€åˆ°æ¶æ„è¯¾ç¨‹ï¼Œé¡¹ç›®å®æˆ˜ â€‹ â€‹ éŸ³ä¹ç›¸å…³ â€‹ å‰ä»–ï¼Œå°¤å…‹é‡Œé‡Œï¼Œä¹ç†ï¼Œç¼–æ›²ï¼Œä½œè¯ï¼Œç›¸å…³è½¯ä»¶ï¼Œå£°æº â€‹ â€‹ ç»˜ç”» è¯­è¨€ æ‘„å½± â€‹ åŒ…å«ç¾å›½æ‘„å½±å­¦é™¢æ‘„å½±æ•™æï¼Œå­¦ä¹ æ‘„å½±ä¸å¯ç¼ºå°‘çš„ä¹¦ç± æœ€åæƒ³è¯´ï¼Œèµ„æºè™½å¤šï¼Œä½†å¦‚æœåªå½“ä¸€ä¸ªæ”¶è—å…šé‚£æ°¸è¿œä¸ä¼šæ˜¯ä½ çš„ã€‚åªæœ‰åœ¨è¿™é£é€Ÿå‘å±•çš„æ—¶ä»£ï¼Œå¸å»æµ®èºï¼Œä¸€ç‚¹ç‚¹æ¶ˆåŒ–ï¼Œæ‰ä¼šè®©æˆä¸ºä½ èŒå£®æˆé•¿çš„å…»åˆ†ã€‚ â€‹ èµ„æºåˆ†äº«ï¼Œéƒ¨åˆ†èµ„æºè¯·å‹¿ä½œå•†ä¸šç”¨é€”ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè”ç³»åˆ é™¤ã€‚å¦‚æœæœ‰èƒ½åŠ›ï¼Œè¯·æ”¯æŒæ­£ç‰ˆï¼","link":"/2022/03/10/Draft/2021/%E8%B5%84%E6%BA%90%E7%AF%87/"},{"title":"æ€ç»´é—ªå…‰","text":"çªç„¶æƒ³åˆ°çš„äº›ä¸œè¥¿ã€‚ã€‚ ä¼—æ–‡ é—ªå…‰ï¼šå…¬ä¼—æ–‡æ¡£ï¼Œå…±åŒç¼–å†™ä¸€ä¸ªç¬”è®°ï¼Œæ¯äººå¯ä¸Šäº¤ç¬”è®°å®Œå–„ï¼Œé€šè¿‡æŠ•ç¥¨å†³å®šæ˜¯å¦ä¿®æ”¹ï¼Œä»¥æ­¤ä¸å†æ¯ä¸ªäººéƒ½åšç›¸åŒçš„ç¬”è®°ï¼Œå¤šäººå®Œå–„åŒä¸€ä¸ªç¬”è®°ã€‚ æŠ€æœ¯ï¼š é¦–é¡µ ç°åœ¨çš„é¦–é¡µéƒ½ä¸‘ï¼Œä¹¦ç­¾æ”¶è—ï¼ŒåŠ¨æ€æ’åï¼Œä¹¦ç­¾åˆ†ç±»ï¼ŒTODOç»„ä»¶ï¼Œæç¾UI","link":"/2022/03/10/Draft/2021/%E9%97%AA%E5%85%89/"},{"title":"BUG","text":"é¡¹ç›®ç®¡ç†ï¼Œé¡¹ç›®ç»éªŒï¼Œå¼€å‘ä¹‹å¤–ã€å®æ–½ï¼Œæµ‹è¯•ï¼Œç»´æŠ¤ï¼Œéƒ¨ç½²ã€‘ é¡¹ç›®æ€»ç»“ï¼Œå¼€å‘ä¹‹å¤–æŠ€èƒ½æå‡","link":"/2021/02/24/Draft/2021/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/"},{"title":"ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè®ºæ–‡æ¨¡æ¿","text":"æ¶æ„ ä¸€ã€é¡¹ç›®èƒŒæ™¯(é¡¹ç›®åŸºæœ¬æƒ…å†µä»‹ç»ã€é¡¹ç›®ç‰¹ç‚¹ã€è¦è®ºè¿°çš„è®ºç‚¹) äºŒã€æå‡ºè®ºç‚¹(æè¿°å¯¹Ã—Ã—ç®¡ç†çš„é‡è¦æ€§çš„è®¤è¯†) â€‹ 2020å¹´6æœˆï¼Œæˆ‘å‚åŠ äº†â•³â•³å¸‚èµ„æºå±€å‘èµ·çš„â€œåŸå¸‚å¤§è„‘â€ä¸€åœ°ä¸€ç ååŒå¹³å°ç³»ç»Ÿçš„å»ºè®¾å·¥ä½œï¼Œæ‹…ä»»æ‰¿å»ºæ–¹é¡¹ç›®ç»ç†ï¼Œè¯¥ä¿¡æ¯ç»¼åˆç®¡ç†å¹³å°ç³»ç»Ÿçš„ä¸»è¦æ¨¡å—åŒ…æ‹¬å¹³å°é—¨æˆ·ã€â€œå¤šè§„åˆä¸€â€ä¸šåŠ¡ååŒç³»ç»Ÿä¼˜åŒ–ã€è¡Œæ”¿å®¡æ‰¹ä¸šåŠ¡æ•´åˆã€åœŸåœ°ç å»ºè®¾ã€æ•°å­—é©¾é©¶èˆ±è§„åˆ’å’Œè‡ªç„¶èµ„æºç³»ç»Ÿã€é©¾é©¶èˆ±æŒ‡æ ‡åº“å»ºè®¾ç­‰9ä¸ªä¸šåŠ¡ç®¡ç†æ¨¡å—ï¼Œå»ºè®¾è´¹ç”¨780ä¸‡äººæ°‘å¸ï¼Œè¯¥é¡¹ç›®äº2021å¹´6æœˆé€šè¿‡äº†ä¸šä¸»æ–¹çš„éªŒæ”¶ä¸Šçº¿è¿è¡Œå,èµ¢å¾—äº†ç”¨æˆ·çš„ä¸€è‡´å¥½è¯„ï¼Œä½¿é¡¹ç›®è·å¾—äº†åœ†æ»¡æˆåŠŸã€‚æœ¬æ–‡ç»“åˆæˆ‘çš„å®é™…ç»éªŒ,ä»¥è¯¥é¡¹ç›®ä¸ºä¾‹,è®¨è®ºäº†ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®å»ºè®¾è¿‡ç¨‹ä¸­çš„XXç®¡ç†,ä¸»è¦ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œäº†é˜è¿°:XXXXXç­‰è¿‡ç¨‹å†…å®¹ï¼Œæœ‰æ•ˆæé«˜äº†XXç®¡ç†æ°´å¹³ï¼Œæ»¡è¶³äº†é¡¹ç›®å¹²ç³»äººéœ€æ±‚å’ŒæœŸæœ›ã€‚ â€‹ 2018å¹´12æœˆï¼Œâ€œå¤šè§„åˆä¸€â€ä¸šåŠ¡ååŒç³»ç»Ÿä¸­â€œå¤šè§„å…±äº«â€ã€â€œé¡¹ç›®ç”Ÿæˆâ€ç­‰æ¨¡å—ä¸ºå„éƒ¨é—¨æä¾›äº†éå¸¸ä¾¿æ·å’Œå¿«é€Ÿçš„æœåŠ¡ï¼Œå–å¾—äº†è‰¯å¥½çš„æ•ˆç›Šã€‚éšç€ç³»ç»Ÿåº”ç”¨çš„ä¸æ–­æ·±å…¥ï¼Œç”¨æˆ·å¯¹â€œé¡¹ç›®ç”Ÿæˆâ€ç­‰åº”ç”¨åœºæ™¯æå‡ºäº†æ›´é«˜çš„ä½¿ç”¨è¦æ±‚ï¼Œå¦‚ï¼šé¡¹ç›®ç±»å‹ã€ä¸šåŠ¡ç±»å‹ç»†åŒ–ä¸è¶³ï¼Œå¯¼è‡´åœ¨å®é™…å·¥ä½œè¿‡ç¨‹ä¸­å­˜åœ¨ç›²åŒºï¼Œå½±å“äº†éƒ¨åˆ†é¡¹ç›®çš„æ¨è¿›ç­‰ã€‚å¦ä¸€æ–¹é¢ï¼Œéƒ¨é—¨å¹³å°å„è‡ªä¸ºæ”¿ã€ç³»ç»Ÿé—´çš„æ•°æ®å­˜åœ¨å£å’ï¼Œå¯¼è‡´æ— æ³•æœ‰æ•ˆçš„è¿›è¡Œæ•°æ®å…±äº«ï¼Œæ— æ³•å®ç°é¡¹ç›®å®¡æ‰¹å‡ææ–™ã€å‡æ—¶é—´ã€å‡ç¯èŠ‚ï¼Œæ€¥éœ€å¯¹åŸç³»ç»Ÿçš„å„åº”ç”¨åœºæ™¯è¿›è¡Œä¼˜åŒ–ã€‚æ­å·å¸‚XXèµ„æºå±€æˆç«‹åï¼Œä¸ºå°½å¿«è½å®æœºæ„æ”¹é©è¦æ±‚ï¼Œé‡Šæ”¾æ”¹é©çº¢åˆ©ï¼Œä»¥è‡ªç„¶èµ„æºâ€œä¸¤ç»Ÿä¸€â€å’Œä¸šåŠ¡éœ€æ±‚ä¸ºæ ¹æœ¬å‡ºå‘ç‚¹ï¼Œèšç„¦ä¸­å¿ƒå·¥ä½œï¼Œç«‹è¶³å·²æœ‰åŸºç¡€ï¼Œç»Ÿç­¹æ•´åˆç°æœ‰èµ„æºï¼Œç§¯æå¼€å±•ç«‹è¶³â€œä¸€å—åœŸåœ°ä¸€ä»¶äº‹â€å…¨æœåŠ¡å·¥ä½œï¼Œç”±æ­¤ä¸€åœ°ä¸€ç ååŒå¹³å°åº”è¿è€Œç”Ÿã€‚è¯¥é¡¹ç›®é‡‡ç”¨äº†å…¬å¼€æ‹›æ ‡çš„æ–¹å¼ï¼Œæˆ‘å…¬å¸å‚ä¸äº†æŠ•æ ‡å¹¶é¡ºåˆ©ä¸­æ ‡ï¼Œäº2020å¹´6æœˆç­¾è®¢äº†åˆåŒï¼Œéšåæˆç«‹äº†ä¸“é—¨é¡¹ç›®å°ç»„ï¼Œä»»å‘½æˆ‘ä¸ºé¡¹ç›®ç»ç†ã€‚æˆ‘å…¬å¸çš„ç»„ç»‡æ–¹å¼ä¸ºé¡¹ç›®å‹ï¼Œé¡¹ç›®æˆå‘˜ç›´æ¥å½’å±é¡¹ç›®ç»ç†é¢†å¯¼ï¼Œæˆ‘ç»„æ ¸å¿ƒæˆå‘˜å…±15äººã€‚è€ƒè™‘åˆ°é¡¹ç›®çš„å¤æ‚æ€§ã€å„åŒºå¿åœ°ç†ä½ç½®ä¸é›†ä¸­ç­‰åŸå› ï¼Œç³»ç»Ÿé‡‡ç”¨JAVAè¯­è¨€å¼€å‘ï¼Œé¡¹ç›®ç»„å†³å®šæ­¤é¡¹ç›®é‡‡ç”¨SSMçš„ä¸‰å±‚b/sæ¶æ„æ¨¡å¼ï¼Œåœ°å›¾åŸºäºleafletçš„WebGISå¯è§†åŒ–ï¼Œæ•°æ®åº“ä½¿ç”¨Postgresï¼Œè¿™æ ·çš„è®¾è®¡æœ‰åˆ©äºåæœŸçš„ç»´æŠ¤åŠæ‰©å±•ã€‚é¡¹ç›®å…±åˆ†ä¸ºæ•°å­—é©¾é©¶èˆ±è§„åˆ’å’Œè‡ªç„¶èµ„æºç³»ç»Ÿã€â€œä¸€åœ°ä¸€ç â€ååŒæœåŠ¡å¹³å°ç­‰å­ç³»ç»Ÿã€‚ç»è¿‡å…¨ç»„æˆå‘˜çš„å…±åŒåŠªåŠ›ï¼Œé¡¹ç›®äº2021å¹´6æœˆé¡ºåˆ©é€šè¿‡éªŒæ”¶ï¼Œç›®å‰è¿è¡Œæƒ…å†µè‰¯å¥½ã€‚ â€‹ ç”±äºè¯¥ç³»ç»Ÿå…·æœ‰å»ºè®¾è§„æ¨¡å¤§ï¼ˆæ¶µç›–ç‰©ä»·éƒ¨é—¨å‡ ä¹æ‰€æœ‰ä¸šåŠ¡ï¼‰ï¼Œå»ºè®¾æ—¶é—´ç´§ï¼ˆå»ºè®¾æœŸé™ä¸ºä¸€å¹´ï¼‰ï¼Œæ¶‰åŠçš„å¹²ç³»äººå¤šï¼ˆå†…éƒ¨å¹²ç³»äººåŒ…æ‹¬é¡¹ç›®ç»„å„ç±»æˆå‘˜ã€å…¬å¸é¢†å¯¼å’Œç›¸å…³éƒ¨é—¨äººå‘˜ï¼Œå¤–éƒ¨å¹²ç³»äººä¸ä»…åŒ…æ‹¬å¸‚å±€å„ç§‘å®¤ï¼Œä¹ŸåŒ…æ‹¬12ä¸ªåŒºå¿ç‰©ä»·å±€çš„ç›¸å…³äººå‘˜ã€è¿è¥å•†ç­‰ï¼‰ï¼Œå‚ä¸çš„é¡¹ç›®æˆå‘˜å¤šï¼ˆé«˜å³°æ—¶è¾¾åˆ°60äººï¼Œæˆ‘å°†å°ç»„æˆå‘˜åˆ†ä¸ºç¡¬ä»¶é›†æˆéƒ¨ç½²ç»„ã€æ•°æ®ä¸­å¿ƒç»„ã€è½¯ä»¶å¼€å‘ç»„ã€å¹³å°æµ‹è¯•ç»„ï¼ˆå››ä¸ªå°ç»„ï¼‰ï¼ŒåŠŸèƒ½å¤æ‚ç­‰ç‰¹ç‚¹ï¼Œä¸ºäº†ä¿è¯é¡¹ç›®åœ†æ»¡å®Œæˆï¼Œæˆ‘ç»„å»ºäº†å¼ºçŸ©é˜µçš„é¡¹ç›®ç»„ç»‡ç»“æ„ï¼Œé€šè¿‡æœ‰æ•ˆçš„é¡¹ç›®ç®¡ç†ï¼Œç‰¹åˆ«æ˜¯å‡ºè‰²çš„XXç®¡ç†ï¼Œå¸¦é¢†é¡¹ç›®å›¢é˜Ÿå…¨ä½“æˆå‘˜ç»è¿‡å¥‹æˆ˜è·å¾—äº†è‰¯å¥½çš„ç»©æ•ˆï¼Œå–å¾—äº†é¡¹ç›®çš„æˆåŠŸã€‚æœ¬æ–‡å°†å›´ç»•è¯¥é¡¹ç›®çš„XXç®¡ç†è¿›è¡Œé‡ç‚¹è®¨è®ºã€‚ ä¸‰ã€æŒ‰ç…§æ‰€æ¶‰åŠç®¡ç†é¢†åŸŸçš„è¿‡ç¨‹åˆ†æ®µè¿›è¡Œè®ºè¿°(å…ˆç»™å‡ºæ¯ä¸ªè¿‡ç¨‹çš„å®šä¹‰ã€è¾“å…¥ã€è¾“å‡ºã€å·¥å…·ä¸æ–¹æ³•ï¼Œå†ç»“åˆåšè¿‡çš„é¡¹ç›®æè¿°é¡¹ç›®ä¸­æ˜¯å¦‚ä½•åšçš„) ä¸€ã€ äºŒã€ ä¸‰ã€ å››ã€ äº”ã€ å››ã€å°ç»“(å¯¹ä¸Šé¢çš„è®ºè¿°è¿›è¡Œä¸€ä¸‹å°ç»“) äº”ã€åˆ†æé¡¹ç›®å­˜åœ¨çš„é—®é¢˜åŠæ”¹è¿›çš„å»ºè®®(å†™å¤Ÿä¸‰æ¡å°±å¯ä»¥äº†) å…­ã€æ€»ç»“(ä¸»è¦æ˜¯å†™é¡¹ç›®ä½“ä¼šï¼Œæ¯”å¦‚é€šè¿‡é¡¹ç›®å®æ–½ï¼Œè‡ªå·±è‡ªè§‰åº”ç”¨é¡¹ç›®ç®¡ç†çŸ¥è¯†ã€å·¥å…·ã€æŠ€æœ¯ï¼Œå¯¹æˆåŠŸå®æ–½é¡¹ç›®æ‰€èµ·çš„ç§¯æä½œç”¨ç­‰)ã€‚ â€‹ ç»è¿‡æˆ‘ä»¬å›¢é˜Ÿä¸æ‡ˆçš„åŠªåŠ›ï¼Œå†æ—¶1 å¹´ï¼Œæœ¬é¡¹ç›®ç»ˆäºäº2021å¹´6æœˆï¼Œé€šè¿‡äº†ä¸šä¸»æ–¹ç»„ç»‡çš„éªŒæ”¶ï¼Œå®ç°ä»è§„åˆ’ç¼–åˆ¶å’Œå®æ–½ã€èµ„æºä¿æŠ¤å’Œåˆ©ç”¨ã€ç¡®æƒç™»è®°ã€åœ°ç†èµ„æºç­‰å¤šæ–¹é¢è¿›è¡Œä¸šåŠ¡å’Œæ•°æ®çš„èåˆï¼Œæ¶µç›–äº†è§„èµ„å±€ç»Ÿä¸€è¡Œä½¿å…¨æ°‘æ‰€æœ‰è‡ªç„¶èµ„æºèµ„äº§æ‰€æœ‰è€…èŒè´£ï¼Œç»Ÿä¸€è¡Œä½¿æ‰€æœ‰å›½åœŸç©ºé—´ç”¨é€”ç®¡åˆ¶å’Œç”Ÿæ€ä¿æŠ¤ä¿®å¤èŒè´£ã€‚é€šè¿‡é—¨æˆ·ä¸²è”â€œå¤šè§„åˆä¸€â€ä¸šåŠ¡ååŒç³»ç»Ÿã€è¡Œæ”¿å®¡æ‰¹ç³»ç»Ÿã€ä¸åŠ¨äº§ç™»è®°ç³»ç»Ÿç­‰ä¸‰å¤§ç³»ç»Ÿï¼Œä»¥æ¨¡å—åŒ–å½¢å¼ï¼Œæ­å»ºå¤šè§„å…±äº«ã€ç¼–åˆ¶ç»Ÿç­¹ã€é¡¹ç›®ç”Ÿæˆã€å®æ–½ç›‘æµ‹ã€ç«‹é¡¹ç”¨åœ°è§„åˆ’è®¸å¯ã€å·¥ç¨‹è®¸å¯ã€æ–½å·¥è®¸å¯ã€ç«£å·¥éªŒæ”¶ã€ç¡®æƒç™»è®°ç­‰9ä¸ªåº”ç”¨åœºæ™¯ã€‚æœ¬é¡¹ç›®çš„æˆåŠŸåœ¨æŸäº›æ–¹é¢å¾—ç›Šäºæˆ‘æˆåŠŸçš„xx ç®¡ç†ï¼Œåœ¨æ­¤æˆ‘æ€»ç»“ä¸€ä¸‹å‡ æ¡ç®¡ç†ç»éªŒï¼šï¼ˆ1ï¼‰é‡è§†é¡¹ç›®çš„è°ƒç ”ï¼Œå……åˆ†äº†è§£é¡¹ç›®éœ€æ±‚ä¸èŒƒå›´ï¼›ï¼ˆ2ï¼‰æ ‘ç«‹æ­£ç¡®çš„æ€æƒ³ï¼Œé‡‡ç”¨é€‚å½“çš„æ–¹æ³•ã€éµå¾ªä¸€å®šçš„æµç¨‹ï¼Œä¸¥æ ¼æŒ‰ç…§è¿›åº¦ç®¡ç†çš„è¦æ±‚åšå¥½æ´»åŠ¨å®šä¹‰ã€æ´»åŠ¨æ’åºã€æ´»åŠ¨çš„èµ„æºä¼°ç®—ã€æ´»åŠ¨çš„å†æ—¶ä¼°ç®—ã€ç¼–åˆ¶è¿›åº¦è®¡åˆ’ã€è¿›åº¦æ§åˆ¶å·¥ä½œï¼›ï¼ˆ3ï¼‰å»ºç«‹é—®é¢˜è·Ÿè¸ªæœºåˆ¶ï¼Œå¯¹æ¯ä¸ªé˜¶æ®µçš„é—®é¢˜è¿›è¡Œè®°å½•å’Œè·Ÿè¸ªï¼Œå°†æ¯ä¸ªé—®é¢˜è½å®åˆ°å…·ä½“è´Ÿè´£äººã€‚ â€‹ å½“ç„¶ï¼Œåœ¨æœ¬é¡¹ç›®ä¸­ï¼Œè¿˜æœ‰ä¸€äº›ä¸è¶³ä¹‹å¤„ï¼Œæ¯”å¦‚ï¼šåœ¨é¡¹ç›®çš„å®æ–½è¿‡ç¨‹ä¸­ï¼Œç”±äºé¡¹ç›®ç»„2 åæˆå‘˜å› ä¸ºè‡ªèº«åŸå› çªç„¶ç¦»èŒï¼Œå¯¼è‡´é¡¹ç›®çš„å›¢é˜Ÿå»ºè®¾å‡ºç°ä¸€äº›å°é—®é¢˜ï¼Œè¿˜æœ‰ï¼Œæ›¾ç»ç”±äºç–«æƒ…åŸå› å¯¼è‡´ä¸€ä½æŠ€æœ¯äººå‘˜å±…å®¶éš”ç¦»åœ¨å®¶åŠå…¬å½±å“äº†äº›é¡¹ç›®è¿›åº¦ï¼Œä¸è¿‡ï¼Œç»è¿‡æˆ‘åæœŸçš„çº åï¼Œå¹¶æ²¡æœ‰å¯¹é¡¹ç›®äº§ç”Ÿä»€ä¹ˆå½±å“ã€‚åœ¨åç»­çš„å­¦ä¹ å’Œå·¥ä½œä¸­ï¼Œæˆ‘å°†ä¸æ–­çš„å……ç”µå­¦ä¹ ï¼Œå’ŒåŒè¡Œè¿›è¡Œäº¤æµï¼Œæå‡è‡ªå·±çš„ä¸šåŠ¡å’Œç®¡ç†æ°´å¹³ï¼ŒåŠ›äº‰ä¸ºæˆ‘å›½ä¿¡æ¯åŒ–å»ºè®¾åšå‡ºè‡ªå·±çš„åŠªåŠ›ã€‚","link":"/2021/03/29/Draft/2021/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E8%AE%BA%E6%96%87%E6%A8%A1%E6%9D%BF/"},{"title":"Dubbo","text":"åˆ†å¸ƒå¼RPCæ¡†æ¶Apache Dubbo 1. è½¯ä»¶æ¶æ„çš„æ¼”è¿›è¿‡ç¨‹ è½¯ä»¶æ¶æ„çš„å‘å±•ç»å†äº†ç”±å•ä½“æ¶æ„ã€å‚ç›´æ¶æ„ã€SOAæ¶æ„åˆ°å¾®æœåŠ¡æ¶æ„çš„æ¼”è¿›è¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬åˆ†åˆ«äº†è§£ä¸€ä¸‹è¿™å‡ ä¸ªæ¶æ„ã€‚ 1.1 å•ä½“æ¶æ„ æ¶æ„è¯´æ˜ï¼š â€‹ å…¨éƒ¨åŠŸèƒ½é›†ä¸­åœ¨ä¸€ä¸ªé¡¹ç›®å†…ï¼ˆAll in oneï¼‰ã€‚ æ¶æ„ä¼˜ç‚¹ï¼š â€‹ æ¶æ„ç®€å•ï¼Œå‰æœŸå¼€å‘æˆæœ¬ä½ã€å¼€å‘å‘¨æœŸçŸ­ï¼Œé€‚åˆå°å‹é¡¹ç›®ã€‚ æ¶æ„ç¼ºç‚¹ï¼š â€‹ å…¨éƒ¨åŠŸèƒ½é›†æˆåœ¨ä¸€ä¸ªå·¥ç¨‹ä¸­ï¼Œå¯¹äºå¤§å‹é¡¹ç›®ä¸æ˜“å¼€å‘ã€æ‰©å±•å’Œç»´æŠ¤ã€‚ â€‹ æŠ€æœ¯æ ˆå—é™ï¼Œåªèƒ½ä½¿ç”¨ä¸€ç§è¯­è¨€å¼€å‘ã€‚ â€‹ ç³»ç»Ÿæ€§èƒ½æ‰©å±•åªèƒ½é€šè¿‡æ‰©å±•é›†ç¾¤èŠ‚ç‚¹ï¼Œæˆæœ¬é«˜ã€‚ 1.2 å‚ç›´æ¶æ„ æ¶æ„è¯´æ˜ï¼š â€‹ æŒ‰ç…§ä¸šåŠ¡è¿›è¡Œåˆ‡å‰²ï¼Œå½¢æˆå°çš„å•ä½“é¡¹ç›®ã€‚ æ¶æ„ä¼˜ç‚¹ï¼š â€‹ æŠ€æœ¯æ ˆå¯æ‰©å±•ï¼ˆä¸åŒçš„ç³»ç»Ÿå¯ä»¥ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ç¼–å†™ï¼‰ã€‚ æ¶æ„ç¼ºç‚¹ï¼š â€‹ åŠŸèƒ½é›†ä¸­åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä¸åˆ©äºå¼€å‘ã€æ‰©å±•ã€ç»´æŠ¤ã€‚ â€‹ ç³»ç»Ÿæ‰©å¼ åªèƒ½é€šè¿‡é›†ç¾¤çš„æ–¹å¼ã€‚ â€‹ é¡¹ç›®ä¹‹é—´åŠŸèƒ½å†—ä½™ã€æ•°æ®å†—ä½™ã€è€¦åˆæ€§å¼ºã€‚ 1.3 SOAæ¶æ„ SOAå…¨ç§°ä¸ºService-Oriented Architectureï¼Œå³é¢å‘æœåŠ¡çš„æ¶æ„ã€‚å®ƒå¯ä»¥æ ¹æ®éœ€æ±‚é€šè¿‡ç½‘ç»œå¯¹æ¾æ•£è€¦åˆçš„ç²—ç²’åº¦åº”ç”¨ç»„ä»¶(æœåŠ¡)è¿›è¡Œåˆ†å¸ƒå¼éƒ¨ç½²ã€ç»„åˆå’Œä½¿ç”¨ã€‚ä¸€ä¸ªæœåŠ¡é€šå¸¸ä»¥ç‹¬ç«‹çš„å½¢å¼å­˜åœ¨äºæ“ä½œç³»ç»Ÿè¿›ç¨‹ä¸­ã€‚ ç«™åœ¨åŠŸèƒ½çš„è§’åº¦ï¼ŒæŠŠä¸šåŠ¡é€»è¾‘æŠ½è±¡æˆå¯å¤ç”¨çš„æœåŠ¡ï¼Œé€šè¿‡æœåŠ¡çš„ç¼–æ’å®ç°ä¸šåŠ¡çš„å¿«é€Ÿå†ç”Ÿï¼Œç›®çš„ï¼šæŠŠåŸå…ˆå›ºæœ‰çš„ä¸šåŠ¡åŠŸèƒ½è½¬å˜ä¸ºé€šç”¨çš„ä¸šåŠ¡æœåŠ¡ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘çš„å¿«é€Ÿå¤ç”¨ã€‚ æ¶æ„è¯´æ˜ï¼š â€‹ å°†é‡å¤åŠŸèƒ½æˆ–æ¨¡å—æŠ½å–æˆç»„ä»¶çš„å½¢å¼ï¼Œå¯¹å¤–æä¾›æœåŠ¡ï¼Œåœ¨é¡¹ç›®ä¸æœåŠ¡ä¹‹é—´ä½¿ç”¨ESBï¼ˆä¼ä¸šæœåŠ¡æ€»çº¿ï¼‰çš„å½¢å¼ä½œä¸ºé€šä¿¡çš„æ¡¥æ¢ã€‚ æ¶æ„ä¼˜ç‚¹ï¼š â€‹ é‡å¤åŠŸèƒ½æˆ–æ¨¡å—æŠ½å–ä¸ºæœåŠ¡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ â€‹ å¯é‡ç”¨æ€§é«˜ã€‚ â€‹ å¯ç»´æŠ¤æ€§é«˜ã€‚ æ¶æ„ç¼ºç‚¹ï¼š â€‹ å„ç³»ç»Ÿä¹‹é—´ä¸šåŠ¡ä¸åŒï¼Œå¾ˆéš¾ç¡®è®¤åŠŸèƒ½æˆ–æ¨¡å—æ˜¯é‡å¤çš„ã€‚ â€‹ æŠ½å–æœåŠ¡çš„ç²’åº¦å¤§ã€‚ â€‹ ç³»ç»Ÿå’ŒæœåŠ¡ä¹‹é—´è€¦åˆåº¦é«˜ã€‚ 1.4 å¾®æœåŠ¡æ¶æ„ æ¶æ„è¯´æ˜ï¼š â€‹ å°†ç³»ç»ŸæœåŠ¡å±‚å®Œå…¨ç‹¬ç«‹å‡ºæ¥ï¼ŒæŠ½å–ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å¾®æœåŠ¡ã€‚ â€‹ æŠ½å–çš„ç²’åº¦æ›´ç»†ï¼Œéµå¾ªå•ä¸€åŸåˆ™ã€‚ â€‹ é‡‡ç”¨è½»é‡çº§æ¡†æ¶åè®®ä¼ è¾“ã€‚ æ¶æ„ä¼˜ç‚¹ï¼š â€‹ æœåŠ¡æ‹†åˆ†ç²’åº¦æ›´ç»†ï¼Œæœ‰åˆ©äºæé«˜å¼€å‘æ•ˆç‡ã€‚ â€‹ å¯ä»¥é’ˆå¯¹ä¸åŒæœåŠ¡åˆ¶å®šå¯¹åº”çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚ â€‹ é€‚ç”¨äºäº’è”ç½‘æ—¶ä»£ï¼Œäº§å“è¿­ä»£å‘¨æœŸæ›´çŸ­ã€‚ æ¶æ„ç¼ºç‚¹ï¼š â€‹ ç²’åº¦å¤ªç»†å¯¼è‡´æœåŠ¡å¤ªå¤šï¼Œç»´æŠ¤æˆæœ¬é«˜ã€‚ â€‹ åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘çš„æŠ€æœ¯æˆæœ¬é«˜ï¼Œå¯¹å›¢é˜Ÿçš„æŒ‘æˆ˜å¤§ã€‚ 2. Apache Dubboæ¦‚è¿° 2.1 Dubboç®€ä»‹ Apache Dubboæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„Java RPCæ¡†æ¶ã€‚å…¶å‰èº«æ˜¯é˜¿é‡Œå·´å·´å…¬å¸å¼€æºçš„ä¸€ä¸ªé«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºJava RPCæ¡†æ¶ï¼Œå¯ä»¥å’ŒSpringæ¡†æ¶æ— ç¼é›†æˆã€‚ ä»€ä¹ˆæ˜¯RPCï¼Ÿ RPCå…¨ç§°ä¸ºremote procedure callï¼Œå³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚æ¯”å¦‚ä¸¤å°æœåŠ¡å™¨Aå’ŒBï¼ŒAæœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸€ä¸ªåº”ç”¨ï¼ŒBæœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸€ä¸ªåº”ç”¨ï¼ŒAæœåŠ¡å™¨ä¸Šçš„åº”ç”¨æƒ³è°ƒç”¨BæœåŠ¡å™¨ä¸Šçš„åº”ç”¨æä¾›çš„æ–¹æ³•ï¼Œç”±äºä¸¤ä¸ªåº”ç”¨ä¸åœ¨ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ç½‘ç»œæ¥è¡¨è¾¾è°ƒç”¨çš„è¯­ä¹‰å’Œä¼ è¾¾è°ƒç”¨çš„æ•°æ®ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯RPCå¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„æŠ€æœ¯ï¼Œè€Œæ˜¯æŒ‡æ•´ä¸ªç½‘ç»œè¿œç¨‹è°ƒç”¨è¿‡ç¨‹ã€‚ RPCæ˜¯ä¸€ä¸ªæ³›åŒ–çš„æ¦‚å¿µï¼Œä¸¥æ ¼æ¥è¯´ä¸€åˆ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æ‰‹æ®µéƒ½å±äºRPCèŒƒç•´ã€‚å„ç§å¼€å‘è¯­è¨€éƒ½æœ‰è‡ªå·±çš„RPCæ¡†æ¶ã€‚Javaä¸­çš„RPCæ¡†æ¶æ¯”è¾ƒå¤šï¼Œå¹¿æ³›ä½¿ç”¨çš„æœ‰RMIã€Hessianã€Dubboç­‰ã€‚ Dubboå®˜ç½‘åœ°å€ï¼šhttp://dubbo.apache.org Dubboæä¾›äº†ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼šé¢å‘æ¥å£çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œæ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡ï¼Œä»¥åŠæœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ã€‚ 2.2 Dubboæ¶æ„ Dubboæ¶æ„å›¾ï¼ˆDubboå®˜æ–¹æä¾›ï¼‰å¦‚ä¸‹ï¼š èŠ‚ç‚¹è§’è‰²è¯´æ˜ï¼š èŠ‚ç‚¹ è§’è‰²åç§° Provider æš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ Consumer è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ Registry æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ³¨å†Œä¸­å¿ƒ Monitor ç»Ÿè®¡æœåŠ¡çš„è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´çš„ç›‘æ§ä¸­å¿ƒ Container æœåŠ¡è¿è¡Œå®¹å™¨ è™šçº¿éƒ½æ˜¯å¼‚æ­¥è®¿é—®ï¼Œå®çº¿éƒ½æ˜¯åŒæ­¥è®¿é—® è“è‰²è™šçº¿:åœ¨å¯åŠ¨æ—¶å®Œæˆçš„åŠŸèƒ½ çº¢è‰²è™šçº¿(å®çº¿)éƒ½æ˜¯ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ‰§è¡Œçš„åŠŸèƒ½ è°ƒç”¨å…³ç³»è¯´æ˜: æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ã€‚ æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚ æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚ æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚ æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚ æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚ 3. æœåŠ¡æ³¨å†Œä¸­å¿ƒZookeeper é€šè¿‡å‰é¢çš„Dubboæ¶æ„å›¾å¯ä»¥çœ‹åˆ°ï¼ŒRegistryï¼ˆæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼‰åœ¨å…¶ä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚Dubboå®˜æ–¹æ¨èä½¿ç”¨Zookeeperä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚ 3.1 Zookeeperä»‹ç» Zookeeper æ˜¯ Apache Hadoop çš„å­é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªæ ‘å‹çš„ç›®å½•æœåŠ¡ï¼Œæ”¯æŒå˜æ›´æ¨é€ï¼Œé€‚åˆä½œä¸º Dubbo æœåŠ¡çš„æ³¨å†Œä¸­å¿ƒï¼Œå·¥ä¸šå¼ºåº¦è¾ƒé«˜ï¼Œå¯ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå¹¶æ¨èä½¿ç”¨ ã€‚ ä¸ºäº†ä¾¿äºç†è§£Zookeeperçš„æ ‘å‹ç›®å½•æœåŠ¡ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬ç”µè„‘çš„æ–‡ä»¶ç³»ç»Ÿ(ä¹Ÿæ˜¯ä¸€ä¸ªæ ‘å‹ç›®å½•ç»“æ„)ï¼š æˆ‘çš„ç”µè„‘å¯ä»¥åˆ†ä¸ºå¤šä¸ªç›˜ç¬¦ï¼ˆä¾‹å¦‚Cã€Dã€Eç­‰ï¼‰ï¼Œæ¯ä¸ªç›˜ç¬¦ä¸‹å¯ä»¥åˆ›å»ºå¤šä¸ªç›®å½•ï¼Œæ¯ä¸ªç›®å½•ä¸‹é¢å¯ä»¥åˆ›å»ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºå­ç›®å½•ï¼Œæœ€ç»ˆæ„æˆäº†ä¸€ä¸ªæ ‘å‹ç»“æ„ã€‚é€šè¿‡è¿™ç§æ ‘å‹ç»“æ„çš„ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ–‡ä»¶åˆ†é—¨åˆ«ç±»çš„è¿›è¡Œå­˜æ”¾ï¼Œæ–¹ä¾¿æˆ‘ä»¬åæœŸæŸ¥æ‰¾ã€‚è€Œä¸”ç£ç›˜ä¸Šçš„æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„è®¿é—®è·¯å¾„ï¼Œä¾‹å¦‚ï¼šC:\\Windows\\itcast\\hello.txtã€‚ Zookeeperæ ‘å‹ç›®å½•æœåŠ¡ï¼š æµç¨‹è¯´æ˜ï¼š æœåŠ¡æä¾›è€…(Provider)å¯åŠ¨æ—¶: å‘ /dubbo/com.foo.BarService/providers ç›®å½•ä¸‹å†™å…¥è‡ªå·±çš„ URL åœ°å€ æœåŠ¡æ¶ˆè´¹è€…(Consumer)å¯åŠ¨æ—¶: è®¢é˜… /dubbo/com.foo.BarService/providers ç›®å½•ä¸‹çš„æä¾›è€… URL åœ°å€ã€‚å¹¶å‘ /dubbo/com.foo.BarService/consumers ç›®å½•ä¸‹å†™å…¥è‡ªå·±çš„ URL åœ°å€ ç›‘æ§ä¸­å¿ƒ(Monitor)å¯åŠ¨æ—¶: è®¢é˜… /dubbo/com.foo.BarService ç›®å½•ä¸‹çš„æ‰€æœ‰æä¾›è€…å’Œæ¶ˆè´¹è€… URL åœ°å€ 3.2 å®‰è£…Zookeeper ä¸‹è½½åœ°å€ï¼šhttp://archive.apache.org/dist/zookeeper/ æœ¬è¯¾ç¨‹ä½¿ç”¨çš„Zookeeperç‰ˆæœ¬ä¸º3.4.6ï¼Œä¸‹è½½å®Œæˆåå¯ä»¥è·å¾—åç§°ä¸ºzookeeper-3.4.6.tar.gzçš„å‹ç¼©æ–‡ä»¶ã€‚ å®‰è£…æ­¥éª¤ï¼š ç¬¬ä¸€æ­¥ï¼šå®‰è£… jdkï¼ˆç•¥ï¼‰ ç¬¬äºŒæ­¥ï¼šæŠŠ zookeeper çš„å‹ç¼©åŒ…ï¼ˆzookeeper-3.4.6.tar.gzï¼‰ä¸Šä¼ åˆ° linux ç³»ç»Ÿ ç¬¬ä¸‰æ­¥ï¼šè§£å‹ç¼©å‹ç¼©åŒ… â€‹ tar -zxvf zookeeper-3.4.6.tar.gz ç¬¬å››æ­¥ï¼šè¿›å…¥zookeeper-3.4.6ç›®å½•ï¼Œåˆ›å»ºdataç›®å½• â€‹ mkdir data ç¬¬äº”æ­¥ï¼šè¿›å…¥confç›®å½• ï¼ŒæŠŠzoo_sample.cfg æ”¹åä¸ºzoo.cfg â€‹ cd conf â€‹ mv zoo_sample.cfg zoo.cfg ç¬¬å…­æ­¥ï¼šæ‰“å¼€zoo.cfgæ–‡ä»¶, ä¿®æ”¹dataå±æ€§ï¼šdataDir=/root/zookeeper-3.4.6/data 3.3 å¯åŠ¨ã€åœæ­¢Zookeeper è¿›å…¥Zookeeperçš„binç›®å½•ï¼Œå¯åŠ¨æœåŠ¡å‘½ä»¤ ./zkServer.sh start åœæ­¢æœåŠ¡å‘½ä»¤ ./zkServer.sh stop æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼š ./zkServer.sh status 4. Dubboå¿«é€Ÿå…¥é—¨ Dubboä½œä¸ºä¸€ä¸ªRPCæ¡†æ¶ï¼Œå…¶æœ€æ ¸å¿ƒçš„åŠŸèƒ½å°±æ˜¯è¦å®ç°è·¨ç½‘ç»œçš„è¿œç¨‹è°ƒç”¨ã€‚æœ¬å°èŠ‚å°±æ˜¯è¦åˆ›å»ºä¸¤ä¸ªåº”ç”¨ï¼Œä¸€ä¸ªä½œä¸ºæœåŠ¡çš„æä¾›æ–¹ï¼Œä¸€ä¸ªä½œä¸ºæœåŠ¡çš„æ¶ˆè´¹æ–¹ã€‚é€šè¿‡Dubboæ¥å®ç°æœåŠ¡æ¶ˆè´¹æ–¹è¿œç¨‹è°ƒç”¨æœåŠ¡æä¾›æ–¹çš„æ–¹æ³•ã€‚ 4.1 æœåŠ¡æä¾›æ–¹å¼€å‘ å¼€å‘æ­¥éª¤ï¼š ï¼ˆ1ï¼‰åˆ›å»ºmavenå·¥ç¨‹ï¼ˆæ‰“åŒ…æ–¹å¼ä¸ºwarï¼‰dubbodemo_providerï¼Œåœ¨pom.xmlæ–‡ä»¶ä¸­å¯¼å…¥å¦‚ä¸‹åæ ‡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192&lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;spring.version&gt;5.0.5.RELEASE&lt;/spring.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jms&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;!-- dubboç›¸å…³ --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;dubbo&lt;/artifactId&gt; &lt;version&gt;2.6.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt; &lt;artifactId&gt;zookeeper&lt;/artifactId&gt; &lt;version&gt;3.4.7&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.github.sgroschupf&lt;/groupId&gt; &lt;artifactId&gt;zkclient&lt;/artifactId&gt; &lt;version&gt;0.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javassist&lt;/groupId&gt; &lt;artifactId&gt;javassist&lt;/artifactId&gt; &lt;version&gt;3.12.1.GA&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.47&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;2.3.2&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt; &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;!-- æŒ‡å®šç«¯å£ --&gt; &lt;port&gt;8081&lt;/port&gt; &lt;!-- è¯·æ±‚è·¯å¾„ --&gt; &lt;path&gt;/&lt;/path&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; ï¼ˆ2ï¼‰é…ç½®web.xmlæ–‡ä»¶ 1234567891011121314&lt;!DOCTYPE web-app PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot; &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt;&lt;web-app&gt; &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:applicationContext*.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt;&lt;/web-app&gt; ï¼ˆ3ï¼‰åˆ›å»ºæœåŠ¡æ¥å£ 1234package com.itheima.service;public interface HelloService { public String sayHello(String name);} ï¼ˆ4ï¼‰åˆ›å»ºæœåŠ¡å®ç°ç±» 12345678910package com.itheima.service.impl;import com.alibaba.dubbo.config.annotation.Service;import com.itheima.service.HelloService;@Servicepublic class HelloServiceImpl implements HelloService { public String sayHello(String name) { return &quot;hello &quot; + name; }} æ³¨æ„ï¼šæœåŠ¡å®ç°ç±»ä¸Šä½¿ç”¨çš„Serviceæ³¨è§£æ˜¯Dubboæä¾›çš„ï¼Œç”¨äºå¯¹å¤–å‘å¸ƒæœåŠ¡ ï¼ˆ5ï¼‰åœ¨src/main/resourcesä¸‹åˆ›å»ºapplicationContext-service.xml 123456789101112131415161718192021222324&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:dubbo=&quot;http://code.alibabatech.com/schema/dubbo&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!-- å½“å‰åº”ç”¨åç§°ï¼Œç”¨äºæ³¨å†Œä¸­å¿ƒè®¡ç®—åº”ç”¨é—´ä¾èµ–å…³ç³»ï¼Œæ³¨æ„ï¼šæ¶ˆè´¹è€…å’Œæä¾›è€…åº”ç”¨åä¸è¦ä¸€æ · --&gt; &lt;dubbo:application name=&quot;dubbodemo_provider&quot; /&gt; &lt;!-- è¿æ¥æœåŠ¡æ³¨å†Œä¸­å¿ƒzookeeper ipä¸ºzookeeperæ‰€åœ¨æœåŠ¡å™¨çš„ipåœ°å€--&gt; &lt;dubbo:registry address=&quot;zookeeper://192.168.134.129:2181&quot;/&gt; &lt;!-- æ³¨å†Œ åè®®å’Œport ç«¯å£é»˜è®¤æ˜¯20880 --&gt; &lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;20881&quot;&gt;&lt;/dubbo:protocol&gt; &lt;!-- æ‰«ææŒ‡å®šåŒ…ï¼ŒåŠ å…¥@Serviceæ³¨è§£çš„ç±»ä¼šè¢«å‘å¸ƒä¸ºæœåŠ¡ --&gt; &lt;dubbo:annotation package=&quot;com.itheima.service.impl&quot; /&gt;&lt;/beans&gt; ï¼ˆ6ï¼‰å¯åŠ¨æœåŠ¡ tomcat7:run 4.2 æœåŠ¡æ¶ˆè´¹æ–¹å¼€å‘ å¼€å‘æ­¥éª¤ï¼š ï¼ˆ1ï¼‰åˆ›å»ºmavenå·¥ç¨‹ï¼ˆæ‰“åŒ…æ–¹å¼ä¸ºwarï¼‰dubbodemo_consumerï¼Œpom.xmlé…ç½®å’Œä¸Šé¢æœåŠ¡æä¾›è€…ç›¸åŒï¼Œåªéœ€è¦å°†Tomcatæ’ä»¶çš„ç«¯å£å·æ”¹ä¸º8082å³å¯ ï¼ˆ2ï¼‰é…ç½®web.xmlæ–‡ä»¶ 1234567891011121314151617181920&lt;!DOCTYPE web-app PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot; &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt;&lt;web-app&gt; &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;!-- æŒ‡å®šåŠ è½½çš„é…ç½®æ–‡ä»¶ ï¼Œé€šè¿‡å‚æ•°contextConfigLocationåŠ è½½ --&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:applicationContext-web.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;*.do&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; ï¼ˆ3ï¼‰å°†æœåŠ¡æä¾›è€…å·¥ç¨‹ä¸­çš„HelloServiceæ¥å£å¤åˆ¶åˆ°å½“å‰å·¥ç¨‹ ï¼ˆ4ï¼‰ç¼–å†™Controller 12345678910111213141516171819202122package com.itheima.controller;import com.alibaba.dubbo.config.annotation.Reference;import com.itheima.service.HelloService;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;@Controller@RequestMapping(&quot;/demo&quot;)public class HelloController { @Reference private HelloService helloService; @RequestMapping(&quot;/hello&quot;) @ResponseBody public String getName(String name){ //è¿œç¨‹è°ƒç”¨ String result = helloService.sayHello(name); System.out.println(result); return result; }} æ³¨æ„ï¼šControllerä¸­æ³¨å…¥HelloServiceä½¿ç”¨çš„æ˜¯Dubboæä¾›çš„@Referenceæ³¨è§£ ï¼ˆ5ï¼‰åœ¨src/main/resourcesä¸‹åˆ›å»ºapplicationContext-web.xml 1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:dubbo=&quot;http://code.alibabatech.com/schema/dubbo&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!-- å½“å‰åº”ç”¨åç§°ï¼Œç”¨äºæ³¨å†Œä¸­å¿ƒè®¡ç®—åº”ç”¨é—´ä¾èµ–å…³ç³»ï¼Œæ³¨æ„ï¼šæ¶ˆè´¹è€…å’Œæä¾›è€…åº”ç”¨åä¸è¦ä¸€æ · --&gt; &lt;dubbo:application name=&quot;dubbodemo-consumer&quot; /&gt; &lt;!-- è¿æ¥æœåŠ¡æ³¨å†Œä¸­å¿ƒzookeeper ipä¸ºzookeeperæ‰€åœ¨æœåŠ¡å™¨çš„ipåœ°å€--&gt; &lt;dubbo:registry address=&quot;zookeeper://192.168.134.129:2181&quot;/&gt; &lt;!-- æ‰«æçš„æ–¹å¼æš´éœ²æ¥å£ --&gt; &lt;dubbo:annotation package=&quot;com.itheima.controller&quot; /&gt;&lt;/beans&gt; ï¼ˆ6ï¼‰è¿è¡Œæµ‹è¯• tomcat7:runå¯åŠ¨ åœ¨æµè§ˆå™¨è¾“å…¥http://localhost:8082/demo/hello.do?name=Jackï¼ŒæŸ¥çœ‹æµè§ˆå™¨è¾“å‡ºç»“æœ **æ€è€ƒä¸€ï¼š**ä¸Šé¢çš„Dubboå…¥é—¨æ¡ˆä¾‹ä¸­æˆ‘ä»¬æ˜¯å°†HelloServiceæ¥å£ä»æœåŠ¡æä¾›è€…å·¥ç¨‹(dubbodemo_provider)å¤åˆ¶åˆ°æœåŠ¡æ¶ˆè´¹è€…å·¥ç¨‹(dubbodemo_consumer)ä¸­ï¼Œè¿™ç§åšæ³•æ˜¯å¦åˆé€‚ï¼Ÿè¿˜æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼ï¼Ÿ **ç­”ï¼š**è¿™ç§åšæ³•æ˜¾ç„¶æ˜¯ä¸å¥½çš„ï¼ŒåŒä¸€ä¸ªæ¥å£è¢«å¤åˆ¶äº†ä¸¤ä»½ï¼Œä¸åˆ©äºåæœŸç»´æŠ¤ã€‚æ›´å¥½çš„æ–¹å¼æ˜¯å•ç‹¬åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼Œå°†æ­¤æ¥å£åˆ›å»ºåœ¨è¿™ä¸ªmavenå·¥ç¨‹ä¸­ã€‚éœ€è¦ä¾èµ–æ­¤æ¥å£çš„å·¥ç¨‹åªéœ€è¦åœ¨è‡ªå·±å·¥ç¨‹çš„pom.xmlæ–‡ä»¶ä¸­å¼•å…¥mavenåæ ‡å³å¯ã€‚ **æ€è€ƒäºŒï¼š**åœ¨æœåŠ¡æ¶ˆè´¹è€…å·¥ç¨‹(dubbodemo_consumer)ä¸­åªæ˜¯å¼•ç”¨äº†HelloServiceæ¥å£ï¼Œå¹¶æ²¡æœ‰æä¾›å®ç°ç±»ï¼ŒDubboæ˜¯å¦‚ä½•åšåˆ°è¿œç¨‹è°ƒç”¨çš„ï¼Ÿ **ç­”ï¼š**Dubboåº•å±‚æ˜¯åŸºäºä»£ç†æŠ€æœ¯ä¸ºHelloServiceæ¥å£åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè¿œç¨‹è°ƒç”¨æ˜¯é€šè¿‡æ­¤ä»£ç†å¯¹è±¡å®Œæˆçš„ã€‚å¯ä»¥é€šè¿‡å¼€å‘å·¥å…·çš„debugåŠŸèƒ½æŸ¥çœ‹æ­¤ä»£ç†å¯¹è±¡çš„å†…éƒ¨ç»“æ„ã€‚å¦å¤–ï¼ŒDubboå®ç°ç½‘ç»œä¼ è¾“åº•å±‚æ˜¯åŸºäºNettyæ¡†æ¶å®Œæˆçš„ã€‚ **æ€è€ƒä¸‰ï¼š**ä¸Šé¢çš„Dubboå…¥é—¨æ¡ˆä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨Zookeeperä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡æä¾›è€…éœ€è¦å°†è‡ªå·±çš„æœåŠ¡ä¿¡æ¯æ³¨å†Œåˆ°Zookeeperï¼ŒæœåŠ¡æ¶ˆè´¹è€…éœ€è¦ä»Zookeeperè®¢é˜…è‡ªå·±æ‰€éœ€è¦çš„æœåŠ¡ï¼Œæ­¤æ—¶ZookeeperæœåŠ¡å°±å˜å¾—éå¸¸é‡è¦äº†ï¼Œé‚£å¦‚ä½•é˜²æ­¢Zookeeperå•ç‚¹æ•…éšœå‘¢ï¼Ÿ **ç­”ï¼š**Zookeeperå…¶å®æ˜¯æ”¯æŒé›†ç¾¤æ¨¡å¼çš„ï¼Œå¯ä»¥é…ç½®Zookeeperé›†ç¾¤æ¥è¾¾åˆ°ZookeeperæœåŠ¡çš„é«˜å¯ç”¨ï¼Œé˜²æ­¢å‡ºç°å•ç‚¹æ•…éšœã€‚ 5. Dubboç®¡ç†æ§åˆ¶å° æˆ‘ä»¬åœ¨å¼€å‘æ—¶ï¼Œéœ€è¦çŸ¥é“Zookeeperæ³¨å†Œä¸­å¿ƒéƒ½æ³¨å†Œäº†å“ªäº›æœåŠ¡ï¼Œæœ‰å“ªäº›æ¶ˆè´¹è€…æ¥æ¶ˆè´¹è¿™äº›æœåŠ¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡éƒ¨ç½²ä¸€ä¸ªç®¡ç†ä¸­å¿ƒæ¥å®ç°ã€‚å…¶å®ç®¡ç†ä¸­å¿ƒå°±æ˜¯ä¸€ä¸ªwebåº”ç”¨ï¼Œéƒ¨ç½²åˆ°tomcatå³å¯ã€‚ 5.1 å®‰è£… å®‰è£…æ­¥éª¤ï¼š ï¼ˆ1ï¼‰å°†èµ„æ–™ä¸­çš„dubbo-admin-2.6.0.waræ–‡ä»¶å¤åˆ¶åˆ°tomcatçš„webappsç›®å½•ä¸‹ ï¼ˆ2ï¼‰å¯åŠ¨tomcatï¼Œæ­¤waræ–‡ä»¶ä¼šè‡ªåŠ¨è§£å‹ ï¼ˆ3ï¼‰ä¿®æ”¹WEB-INFä¸‹çš„dubbo.propertiesæ–‡ä»¶ï¼Œæ³¨æ„dubbo.registry.addresså¯¹åº”çš„å€¼éœ€è¦å¯¹åº”å½“å‰ä½¿ç”¨çš„Zookeeperçš„ipåœ°å€å’Œç«¯å£å· â€‹ dubbo.registry.address=zookeeper://192.168.134.129:2181 â€‹ dubbo.admin.root.password=root â€‹ dubbo.admin.guest.password=guest ï¼ˆ4ï¼‰é‡å¯tomcat 5.2 ä½¿ç”¨ æ“ä½œæ­¥éª¤ï¼š ï¼ˆ1ï¼‰è®¿é—®http://localhost:8080/dubbo-admin-2.6.0/ï¼Œè¾“å…¥ç”¨æˆ·å(root)å’Œå¯†ç (root) ï¼ˆ2ï¼‰å¯åŠ¨æœåŠ¡æä¾›è€…å·¥ç¨‹å’ŒæœåŠ¡æ¶ˆè´¹è€…å·¥ç¨‹ï¼Œå¯ä»¥åœ¨æŸ¥çœ‹åˆ°å¯¹åº”çš„ä¿¡æ¯ 6. Dubboç›¸å…³é…ç½®è¯´æ˜ 6.1 åŒ…æ‰«æ 1&lt;dubbo:annotation package=&quot;com.itheima.service&quot; /&gt; æœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…éƒ½éœ€è¦é…ç½®ï¼Œè¡¨ç¤ºåŒ…æ‰«æï¼Œä½œç”¨æ˜¯æ‰«ææŒ‡å®šåŒ…(åŒ…æ‹¬å­åŒ…)ä¸‹çš„ç±»ã€‚ å¦‚æœä¸ä½¿ç”¨åŒ…æ‰«æï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¦‚ä¸‹é…ç½®çš„æ–¹å¼æ¥å‘å¸ƒæœåŠ¡ï¼š 12&lt;bean id=&quot;helloService&quot; class=&quot;com.itheima.service.impl.HelloServiceImpl&quot; /&gt;&lt;dubbo:service interface=&quot;com.itheima.api.HelloService&quot; ref=&quot;helloService&quot; /&gt; ä½œä¸ºæœåŠ¡æ¶ˆè´¹è€…ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹é…ç½®æ¥å¼•ç”¨æœåŠ¡ï¼š 12&lt;!-- ç”Ÿæˆè¿œç¨‹æœåŠ¡ä»£ç†ï¼Œå¯ä»¥å’Œæœ¬åœ°beanä¸€æ ·ä½¿ç”¨helloService --&gt;&lt;dubbo:reference id=&quot;helloService&quot; interface=&quot;com.itheima.api.HelloService&quot; /&gt; ä¸Šé¢è¿™ç§æ–¹å¼å‘å¸ƒå’Œå¼•ç”¨æœåŠ¡ï¼Œä¸€ä¸ªé…ç½®é¡¹(dubbo:serviceã€dubbo:reference)åªèƒ½å‘å¸ƒæˆ–è€…å¼•ç”¨ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœæœ‰å¤šä¸ªæœåŠ¡ï¼Œè¿™ç§æ–¹å¼å°±æ¯”è¾ƒç¹çäº†ã€‚æ¨èä½¿ç”¨åŒ…æ‰«ææ–¹å¼ã€‚ 6.2 åè®® 1&lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;20880&quot;/&gt; ä¸€èˆ¬åœ¨æœåŠ¡æä¾›è€…ä¸€æ–¹é…ç½®ï¼Œå¯ä»¥æŒ‡å®šä½¿ç”¨çš„åè®®åç§°å’Œç«¯å£å·ã€‚ å…¶ä¸­Dubboæ”¯æŒçš„åè®®æœ‰ï¼šdubboã€rmiã€hessianã€httpã€webserviceã€restã€redisç­‰ã€‚ æ¨èä½¿ç”¨çš„æ˜¯dubboåè®®ã€‚ dubbo åè®®é‡‡ç”¨å•ä¸€é•¿è¿æ¥å’Œ NIO å¼‚æ­¥é€šè®¯ï¼Œé€‚åˆäºå°æ•°æ®é‡å¤§å¹¶å‘çš„æœåŠ¡è°ƒç”¨ï¼Œä»¥åŠæœåŠ¡æ¶ˆè´¹è€…æœºå™¨æ•°è¿œå¤§äºæœåŠ¡æä¾›è€…æœºå™¨æ•°çš„æƒ…å†µã€‚ä¸é€‚åˆä¼ é€å¤§æ•°æ®é‡çš„æœåŠ¡ï¼Œæ¯”å¦‚ä¼ æ–‡ä»¶ï¼Œä¼ è§†é¢‘ç­‰ï¼Œé™¤éè¯·æ±‚é‡å¾ˆä½ã€‚ ä¹Ÿå¯ä»¥åœ¨åŒä¸€ä¸ªå·¥ç¨‹ä¸­é…ç½®å¤šä¸ªåè®®ï¼Œä¸åŒæœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„åè®®ï¼Œä¾‹å¦‚ï¼š 1234567&lt;!-- å¤šåè®®é…ç½® --&gt;&lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;20880&quot; /&gt;&lt;dubbo:protocol name=&quot;rmi&quot; port=&quot;1099&quot; /&gt;&lt;!-- ä½¿ç”¨dubboåè®®æš´éœ²æœåŠ¡ --&gt;&lt;dubbo:service interface=&quot;com.itheima.api.HelloService&quot; ref=&quot;helloService&quot; protocol=&quot;dubbo&quot; /&gt;&lt;!-- ä½¿ç”¨rmiåè®®æš´éœ²æœåŠ¡ --&gt;&lt;dubbo:service interface=&quot;com.itheima.api.DemoService&quot; ref=&quot;demoService&quot; protocol=&quot;rmi&quot; /&gt; 6.3 å¯åŠ¨æ—¶æ£€æŸ¥ 1&lt;dubbo:consumer check=&quot;false&quot;/&gt; ä¸Šé¢è¿™ä¸ªé…ç½®éœ€è¦é…ç½®åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¸€æ–¹ï¼Œå¦‚æœä¸é…ç½®é»˜è®¤checkå€¼ä¸ºtrueã€‚Dubbo ç¼ºçœä¼šåœ¨å¯åŠ¨æ—¶æ£€æŸ¥ä¾èµ–çš„æœåŠ¡æ˜¯å¦å¯ç”¨ï¼Œä¸å¯ç”¨æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œé˜»æ­¢ Spring åˆå§‹åŒ–å®Œæˆï¼Œä»¥ä¾¿ä¸Šçº¿æ—¶ï¼Œèƒ½åŠæ—©å‘ç°é—®é¢˜ã€‚å¯ä»¥é€šè¿‡å°†checkå€¼æ”¹ä¸ºfalseæ¥å…³é—­æ£€æŸ¥ã€‚ å»ºè®®åœ¨å¼€å‘é˜¶æ®µå°†checkå€¼è®¾ç½®ä¸ºfalseï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ”¹ä¸ºtrueã€‚ 6.4 è´Ÿè½½å‡è¡¡ è´Ÿè½½å‡è¡¡ï¼ˆLoad Balanceï¼‰ï¼šå…¶å®å°±æ˜¯å°†è¯·æ±‚åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šè¿›è¡Œæ‰§è¡Œï¼Œä»è€Œå…±åŒå®Œæˆå·¥ä½œä»»åŠ¡ã€‚ åœ¨é›†ç¾¤è´Ÿè½½å‡è¡¡æ—¶ï¼ŒDubbo æä¾›äº†å¤šç§å‡è¡¡ç­–ç•¥ï¼ˆåŒ…æ‹¬éšæœºã€è½®è¯¢ã€æœ€å°‘æ´»è·ƒè°ƒç”¨æ•°ã€ä¸€è‡´æ€§Hashï¼‰ï¼Œç¼ºçœä¸ºrandoméšæœºè°ƒç”¨ã€‚ é…ç½®è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œæ—¢å¯ä»¥åœ¨æœåŠ¡æä¾›è€…ä¸€æ–¹é…ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¸€æ–¹é…ç½®ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516@Controller@RequestMapping(&quot;/demo&quot;)public class HelloController { //åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¸€æ–¹é…ç½®è´Ÿè½½å‡è¡¡ç­–ç•¥ @Reference(check = false,loadbalance = &quot;random&quot;) private HelloService helloService; @RequestMapping(&quot;/hello&quot;) @ResponseBody public String getName(String name){ //è¿œç¨‹è°ƒç”¨ String result = helloService.sayHello(name); System.out.println(result); return result; }} 1234567//åœ¨æœåŠ¡æä¾›è€…ä¸€æ–¹é…ç½®è´Ÿè½½å‡è¡¡@Service(loadbalance = &quot;random&quot;)public class HelloServiceImpl implements HelloService { public String sayHello(String name) { return &quot;hello &quot; + name; }} å¯ä»¥é€šè¿‡å¯åŠ¨å¤šä¸ªæœåŠ¡æä¾›è€…æ¥è§‚å¯ŸDubboè´Ÿè½½å‡è¡¡æ•ˆæœã€‚ æ³¨æ„ï¼šå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨ä¸€å°æœºå™¨ä¸Šå¯åŠ¨å¤šä¸ªæœåŠ¡æä¾›è€…ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹tomcatçš„ç«¯å£å·å’ŒDubboæœåŠ¡çš„ç«¯å£å·æ¥é˜²æ­¢ç«¯å£å†²çªã€‚ åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¤šä¸ªæœåŠ¡æä¾›è€…æ˜¯åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼Œæ‰€ä»¥ä¸å­˜åœ¨ç«¯å£å†²çªé—®é¢˜ã€‚ 7. è§£å†³Dubboæ— æ³•å‘å¸ƒè¢«äº‹åŠ¡ä»£ç†çš„Serviceé—®é¢˜ å‰é¢æˆ‘ä»¬å·²ç»å®Œæˆäº†Dubboçš„å…¥é—¨æ¡ˆä¾‹ï¼Œé€šè¿‡å…¥é—¨æ¡ˆä¾‹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é€šè¿‡Dubboæä¾›çš„æ ‡ç­¾é…ç½®å°±å¯ä»¥è¿›è¡ŒåŒ…æ‰«æï¼Œæ‰«æåˆ°@Serviceæ³¨è§£çš„ç±»å°±å¯ä»¥è¢«å‘å¸ƒä¸ºæœåŠ¡ã€‚ ä½†æ˜¯æˆ‘ä»¬å¦‚æœåœ¨æœåŠ¡æä¾›è€…ç±»ä¸ŠåŠ å…¥@Transactionaläº‹åŠ¡æ§åˆ¶æ³¨è§£åï¼ŒæœåŠ¡å°±å‘å¸ƒä¸æˆåŠŸäº†ã€‚åŸå› æ˜¯äº‹åŠ¡æ§åˆ¶çš„åº•å±‚åŸç†æ˜¯ä¸ºæœåŠ¡æä¾›è€…ç±»åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè€Œé»˜è®¤æƒ…å†µä¸‹Springæ˜¯åŸºäºJDKåŠ¨æ€ä»£ç†æ–¹å¼åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè€Œæ­¤ä»£ç†å¯¹è±¡çš„å®Œæ•´ç±»åä¸ºcom.sun.proxy.$Proxy42ï¼ˆæœ€åä¸¤ä½æ•°å­—ä¸æ˜¯å›ºå®šçš„ï¼‰ï¼Œå¯¼è‡´Dubboåœ¨å‘å¸ƒæœåŠ¡å‰è¿›è¡ŒåŒ…åŒ¹é…æ—¶æ— æ³•å®ŒæˆåŒ¹é…ï¼Œè¿›è€Œæ²¡æœ‰è¿›è¡ŒæœåŠ¡çš„å‘å¸ƒã€‚ 7.1 é—®é¢˜å±•ç¤º åœ¨å…¥é—¨æ¡ˆä¾‹çš„æœåŠ¡æä¾›è€…dubbodemo_providerå·¥ç¨‹åŸºç¡€ä¸Šè¿›è¡Œå±•ç¤º æ“ä½œæ­¥éª¤ï¼š ï¼ˆ1ï¼‰åœ¨pom.xmlæ–‡ä»¶ä¸­å¢åŠ mavenåæ ‡ 123456789101112131415&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.47&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.6&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt;&lt;/dependency&gt; ï¼ˆ2ï¼‰åœ¨applicationContext-service.xmlé…ç½®æ–‡ä»¶ä¸­åŠ å…¥æ•°æ®æºã€äº‹åŠ¡ç®¡ç†å™¨ã€å¼€å¯äº‹åŠ¡æ³¨è§£çš„ç›¸å…³é…ç½® 1234567891011121314&lt;!--æ•°æ®æº--&gt;&lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot; destroy-method=&quot;close&quot;&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt; &lt;property name=&quot;password&quot; value=&quot;root&quot; /&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/test&quot; /&gt;&lt;/bean&gt;&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;&lt;/bean&gt;&lt;!--å¼€å¯äº‹åŠ¡æ§åˆ¶çš„æ³¨è§£æ”¯æŒ--&gt;&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt; ä¸Šé¢è¿æ¥çš„æ•°æ®åº“å¯ä»¥è‡ªè¡Œåˆ›å»º ï¼ˆ3ï¼‰åœ¨HelloServiceImplç±»ä¸ŠåŠ å…¥@Transactionalæ³¨è§£ ï¼ˆ4ï¼‰å¯åŠ¨æœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…ï¼Œå¹¶è®¿é—® ä¸Šé¢çš„é”™è¯¯ä¸ºæ²¡æœ‰å¯ç”¨çš„æœåŠ¡æä¾›è€… æŸ¥çœ‹dubboç®¡ç†æ§åˆ¶å°å‘ç°æœåŠ¡å¹¶æ²¡æœ‰å‘å¸ƒï¼Œå¦‚ä¸‹ï¼š å¯ä»¥é€šè¿‡æ–­ç‚¹è°ƒè¯•çš„æ–¹å¼æŸ¥çœ‹Dubboæ‰§è¡Œè¿‡ç¨‹ï¼ŒDubboé€šè¿‡AnnotationBeançš„postProcessAfterInitializationæ–¹æ³•è¿›è¡Œå¤„ç† 7.2 è§£å†³æ–¹æ¡ˆ é€šè¿‡ä¸Šé¢çš„æ–­ç‚¹è°ƒè¯•å¯ä»¥çœ‹åˆ°ï¼Œåœ¨HelloServiceImplç±»ä¸ŠåŠ å…¥äº‹åŠ¡æ³¨è§£åï¼ŒSpringä¼šä¸ºæ­¤ç±»åŸºäºJDKåŠ¨æ€ä»£ç†æŠ€æœ¯åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œåˆ›å»ºçš„ä»£ç†å¯¹è±¡å®Œæ•´ç±»åä¸ºcom.sun.proxy.$Proxy35ï¼Œå¯¼è‡´Dubboåœ¨è¿›è¡ŒåŒ…åŒ¹é…æ—¶æ²¡æœ‰æˆåŠŸï¼ˆå› ä¸ºæˆ‘ä»¬åœ¨å‘å¸ƒæœåŠ¡æ—¶æ‰«æçš„åŒ…ä¸ºcom.itheima.serviceï¼‰ï¼Œæ‰€ä»¥åé¢çœŸæ­£å‘å¸ƒæœåŠ¡çš„ä»£ç æ²¡æœ‰æ‰§è¡Œã€‚ è§£å†³æ–¹å¼æ“ä½œæ­¥éª¤ï¼š ï¼ˆ1ï¼‰ä¿®æ”¹applicationContext-service.xmlé…ç½®æ–‡ä»¶ï¼Œå¼€å¯äº‹åŠ¡æ§åˆ¶æ³¨è§£æ”¯æŒæ—¶æŒ‡å®šproxy-target-classå±æ€§ï¼Œå€¼ä¸ºtrueã€‚å…¶ä½œç”¨æ˜¯ä½¿ç”¨cglibä»£ç†æ–¹å¼ä¸ºServiceç±»åˆ›å»ºä»£ç†å¯¹è±¡ 12&lt;!--å¼€å¯äº‹åŠ¡æ§åˆ¶çš„æ³¨è§£æ”¯æŒ--&gt;&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; proxy-target-class=&quot;true&quot;/&gt; ï¼ˆ2ï¼‰ä¿®æ”¹HelloServiceImplç±»ï¼Œåœ¨Serviceæ³¨è§£ä¸­åŠ å…¥interfaceClasså±æ€§ï¼Œå€¼ä¸ºHelloService.classï¼Œä½œç”¨æ˜¯æŒ‡å®šæœåŠ¡çš„æ¥å£ç±»å‹ 1234567@Service(interfaceClass = HelloService.class)@Transactionalpublic class HelloServiceImpl implements HelloService { public String sayHello(String name) { return &quot;hello &quot; + name; }} æ­¤å¤„ä¹Ÿæ˜¯å¿…é¡»è¦ä¿®æ”¹çš„ï¼Œå¦åˆ™ä¼šå¯¼è‡´å‘å¸ƒçš„æœåŠ¡æ¥å£ä¸ºSpringProxyï¼Œè€Œä¸æ˜¯HelloServiceæ¥å£ï¼Œå¦‚ä¸‹ï¼š","link":"/2021/02/24/Draft/2021/Dubbo/"},{"title":"é­‘é­…å…ˆç”Ÿ | ä¸šåŠ¡æŠ€æœ¯","text":"æ‰€æœ‰çš„æŠ€æœ¯éƒ½æ˜¯ä¸ºäº†æ›´å¥½çš„è§£å†³ä¸šåŠ¡ èœé¸Ÿä¸€ç«™ï¼š å›¾ä¾‹ï¼š è®°å½• è¿›è¡Œä¸­ å®Œæˆ æ—¥å¿—è®°å½•ï¼ˆtomcatã€mysqlï¼‰ Excelæ•°æ®æ“ä½œ æ–‡ä»¶ä¸Šä¼ ä¸‹è½½è§£æåˆ°æ•°æ®åº“ é›†æˆè‡ªå·±çš„Javaå‰åå°æ¡†æ¶ CURDï¼ˆæ‰€æœ‰æ¡†æ¶ï¼‰ ç½‘ç»œé€šä¿¡ å•å…ƒæµ‹è¯• å®é™…ä¸šåŠ¡ åŠ å¯†è§£å¯†ã€AES(CBC)ã€‘ ç¼“å­˜ hutoolï¼ˆJAVAå·¥å…·ç±»åŒ…ï¼‰ æ‰«ç ç™»å½• å›¾ç‰‡å¤„ç† jeekinsä¸éƒ¨ç½²å®æ–½ åŠ¨æ€è¡¨å•è®¾è®¡ä¸å®ç° éªŒè¯ç  å¤–éƒ¨æ¥å£åº”ç”¨ å·¥ä½œæµ JWT spring security ä»£ç ç”Ÿæˆ æ•°æ®åº“è®¾è®¡(è§MySQLä¼˜åŒ–) æ–‡ä»¶æ ¼å¼è½¬æ¢ï¼ˆword--ã€‹pdfï¼‰ æ•°æ®æ ¼å¼è½¬æ¢ å·¥å…·ç±»åˆé›† åˆ†é¡µ è·¨åŸŸ å•ç‚¹ç™»å½• å¤–å‘æ¥å£è§„èŒƒtokenéªŒè¯ æ”¯ä»˜ çŸ­ä¿¡ åå°åˆ›å»ºæ•°æ®ã€åˆ›å»ºæ—¶é—´ï¼Œidï¼Œåˆå§‹æ•°æ®ã€‘ ç›®å½•å¯å‚è€ƒkuangstudy æ•°æ®æ ¼å¼ æƒé™ç®¡ç† JDKé«˜ç‰ˆæœ¬ å¼€æºç›¸å…³ å¼€æºé¡¹ç›®ç ”ç©¶ï¼šJEECG BOOT ä½ä»£ç å¼€å‘å¹³å°ã€å­¦ä¹ ä¸šåŠ¡ï¼šä»£ç ç”Ÿæˆï¼Œå·¥ä½œæµï¼Œæ–‡ä»¶ç®¡ç†ï¼Œå•ç‚¹ç™»å½•ï¼Œæ•°æ®æ€§èƒ½ç›‘æ§ï¼Œæ¶ˆæ¯ä¸­å¿ƒã€‘æ–‡æ¡£ å·¥å…·ç±»ã€æ–‡ä»¶ã€Excelã€å›¾ç‰‡ã€Wordç­‰ã€‘ã€ç½‘ç»œã€å®‰å…¨ã€Xssã€‘ã€æ ¼å¼ã€çº¿ç¨‹ã€æ–‡æœ¬ã€æ—¥æœŸï¼Œjsonã€‘ã€æ—¥å¿—ã€ã€‘ å¼€æºé˜…è¯» å¼€æºé¡¹ç›® JEECG ç¯å¢ƒï¼š 123456789101112npm i yarn -gyarn config set registry https://registry.npm.taobao.org --globalyarn config set disturl https://npm.taobao.org/dist --globalyarn install yarnå¸¸ç”¨å‘½ä»¤yarn / yarn install ç­‰åŒäºnpm install æ‰¹é‡å®‰è£…ä¾èµ–yarn add xxx ç­‰åŒäº npm install xxx â€”save å®‰è£…æŒ‡å®šåŒ…åˆ°æŒ‡å®šä½ç½®yarn remove xxx ç­‰åŒäº npm uninstall xxx â€”save å¸è½½æŒ‡å®šåŒ…yarn add xxx â€”dev ç­‰åŒäº npm install xxx â€”save-devyarn upgrade ç­‰åŒäº npm update å‡çº§å…¨éƒ¨åŒ…yarn global add xxx ç­‰åŒäº npm install xxx -g å…¨å±€å®‰è£…æŒ‡å®šåŒ… CRUD æ‰€æœ‰çŸ¥è¯†ä»CRUDå¼€å§‹ SSM SpringBoot SpringCloud æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ ç›¸å…³å¯¹è±¡ï¼š 1ã€MultipartFile å’Œ CommonsMultipartFileéƒ½æ˜¯ç”¨æ¥æ¥æ”¶ä¸Šä¼ çš„æ–‡ä»¶æµçš„ ï¼ 2ã€MultipartFileæ˜¯ä¸€ä¸ªæ¥å£ï¼ŒCommonsMultipartFileæ˜¯MultipartFileæ¥å£çš„å®ç°ç±» ï¼ 3ã€ä½¿ç”¨MultipartFileä½œä¸ºå½¢å‚æ¥æ”¶ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œç›´æ¥ç”¨å³å¯ã€‚CommonsMultipartFileä½œä¸ºå½¢å‚æ¥æ”¶ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå¿…éœ€æ·»åŠ @RequestParamæ³¨è§£ï¼ˆå¦åˆ™ä¼šæŠ¥é”™ï¼šexception is java.lang.NoSuchMethodException: org.springframework.web.multipart.commons.CommonsMultipartFileï¼‰ 12MultipartFile æ–‡ä»¶è·¯å¾„ï¼š 1HttpServletRequest req Servletè·å–å½“å‰é¡¹ç›®çš„ä¸Šä¸‹æ–‡è·¯å¾„ï¼ˆwebæ–‡ä»¶ä¸‹çš„è·¯å¾„ï¼‰ï¼š 1req.getContextPath() Servletè·å–å½“å‰é¡¹ç›®çš„ä¸Šä¸‹æ–‡çš„ç»å¯¹è·¯å¾„ï¼ˆwebæ–‡ä»¶ä¸‹çš„è·¯å¾„ï¼‰ï¼š 1req.getServletContext().getRealPath(); è·å–Javaç¨‹åºä¸­çš„resourcesæ–‡ä»¶è·¯å¾„ï¼š 1Resources.getResourceAsStream() å‰åç«¯äº¤äº’ï¼š è·¨åŸŸ è§£å†³æ ¹æœ¬åŸç† ä»€ä¹ˆæƒ…å†µä¼šè·¨åŸŸ åŒä¸€åè®®ï¼Œ å¦‚httpæˆ–https åŒä¸€IPåœ°å€, å¦‚127.0.0.1 åŒä¸€ç«¯å£, å¦‚8080 ä»¥ä¸Šä¸‰ä¸ªæ¡ä»¶ä¸­æœ‰ä¸€ä¸ªæ¡ä»¶ä¸åŒå°±ä¼šäº§ç”Ÿè·¨åŸŸé—®é¢˜ã€‚ è§£å†³æ–¹æ¡ˆ å‰ç«¯è§£å†³æ–¹æ¡ˆ ä½¿ç”¨JSONPæ–¹å¼å®ç°è·¨åŸŸè°ƒç”¨ï¼› ä½¿ç”¨NodeJSæœåŠ¡å™¨åšä¸ºæœåŠ¡ä»£ç†ï¼Œå‰ç«¯å‘èµ·è¯·æ±‚åˆ°NodeJSæœåŠ¡å™¨ï¼Œ NodeJSæœåŠ¡å™¨ä»£ç†è½¬å‘è¯·æ±‚åˆ°åç«¯æœåŠ¡å™¨ï¼› åç«¯è§£å†³æ–¹æ¡ˆ nginxåå‘ä»£ç†è§£å†³è·¨åŸŸ æœåŠ¡ç«¯è®¾ç½®Response Header(å“åº”å¤´éƒ¨)çš„Access-Control-Allow-Origin åœ¨éœ€è¦è·¨åŸŸè®¿é—®çš„ç±»å’Œæ–¹æ³•ä¸­è®¾ç½®å…è®¸è·¨åŸŸè®¿é—®ï¼ˆå¦‚Springä¸­ä½¿ç”¨@CrossOriginæ³¨è§£ï¼‰ï¼› ç»§æ‰¿ä½¿ç”¨Spring Webçš„CorsFilterï¼ˆé€‚ç”¨äºSpring MVCã€Spring Bootï¼‰ å®ç°WebMvcConfigureræ¥å£ï¼ˆé€‚ç”¨äºSpring Bootï¼‰ WebService ç®€ä»‹ è·¨ç¼–ç¨‹è¯­è¨€å’Œè·¨æ“ä½œç³»ç»Ÿå¹³å°çš„è¿œç¨‹è°ƒç”¨æŠ€æœ¯ åŸç† XML,SOAPå’ŒWSDLå°±æ˜¯æ„æˆWebServiceå¹³å°çš„ä¸‰å¤§æŠ€æœ¯ ã€‚ WebServiceé‡‡ç”¨Httpåè®®æ¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚WebServiceä½¿ç”¨XMLæ¥å°è£…æ•°æ®ï¼ŒXMLä¸»è¦çš„ä¼˜ç‚¹åœ¨äºå®ƒæ˜¯è·¨å¹³å°çš„ã€‚ WebServiceé€šè¿‡HTTPåè®®å‘é€è¯·æ±‚å’Œæ¥æ”¶ç»“æœæ—¶ï¼Œå‘é€çš„è¯·æ±‚å†…å®¹å’Œç»“æœå†…å®¹éƒ½é‡‡ç”¨XMLæ ¼å¼å°è£…ï¼Œå¹¶å¢åŠ äº†ä¸€äº›ç‰¹å®šçš„HTTPæ¶ˆæ¯å¤´ï¼Œä»¥è¯´æ˜HTTPæ¶ˆæ¯çš„å†…å®¹æ ¼å¼ï¼Œè¿™äº›ç‰¹å®šçš„HTTPæ¶ˆæ¯å¤´å’ŒXMLå†…å®¹æ ¼å¼å°±æ˜¯SOAPåè®®è§„å®šçš„ã€‚ WebServiceæœåŠ¡å™¨ç«¯é¦–å…ˆè¦é€šè¿‡ä¸€ä¸ªWSDLæ–‡ä»¶æ¥è¯´æ˜è‡ªå·±æœ‰ä»€ä¹ˆæœåŠ¡å¯ä»¥å¯¹å¤–è°ƒç”¨ã€‚ç®€å•çš„è¯´ï¼ŒWSDLå°±åƒæ˜¯ä¸€ä¸ªè¯´æ˜ä¹¦ï¼Œç”¨äºæè¿°WebServiceåŠå…¶æ–¹æ³•ã€å‚æ•°å’Œè¿”å›å€¼ã€‚ WSDLæ–‡ä»¶ä¿å­˜åœ¨WebæœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡ä¸€ä¸ªurlåœ°å€å°±å¯ä»¥è®¿é—®åˆ°å®ƒã€‚å®¢æˆ·ç«¯è¦è°ƒç”¨ä¸€ä¸ªWebServiceæœåŠ¡ä¹‹å‰ï¼Œè¦çŸ¥é“è¯¥æœåŠ¡çš„WSDLæ–‡ä»¶çš„åœ°å€ã€‚WebServiceæœåŠ¡æä¾›å•†å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æš´éœ²å®ƒçš„WSDLæ–‡ä»¶åœ°å€ï¼š1.æ³¨å†Œåˆ°UDDIæœåŠ¡å™¨ï¼Œä»¥ä¾¿è¢«äººæŸ¥æ‰¾ï¼›2.ç›´æ¥å‘Šè¯‰ç»™å®¢æˆ·ç«¯è°ƒç”¨è€…ã€‚ RESTful ç®€ä»‹ æ•°æ®æ ¼å¼ JSON æ•°æ®ç¤ºä¾‹ 1234567{ &quot;sites&quot;: [ { &quot;name&quot;:&quot;a&quot; , &quot;url&quot;:&quot;www.runoob.com&quot; }, { &quot;name&quot;:&quot;b&quot; , &quot;url&quot;:&quot;www.google.com&quot; }, { &quot;name&quot;:&quot;c&quot; , &quot;url&quot;:&quot;www.weibo.com&quot; } ]} ä¸åŒæ•°æ®ç›¸äº’è½¬æ¢æ–¹å¼ å­—ç¬¦ä¸²ï¼ŒMapï¼Œå¯¹è±¡ï¼ŒJSONObjectï¼ˆæ— åºï¼‰ï¼ŒJSONArrayï¼ˆæœ‰åºï¼‰ï¼ŒJavaæ•°ç»„ å­—ç¬¦ä¸²2Json 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849```### åˆ¤æ–­æ˜¯å¦åŒ…å«.has### CRUD### å–å€¼```javastatic Map analysisJsonResultMap = new HashMap(); public static Map analysisJson(Object objJson) { //å¦‚æœobjä¸ºjsonæ•°ç»„ if (objJson instanceof JSONArray) { JSONArray objArray = (JSONArray) objJson; for (int i = 0; i &lt; objArray.size(); i++) { analysisJson(objArray.get(i)); } } //å¦‚æœä¸ºjsonå¯¹è±¡ else if (objJson instanceof JSONObject) { JSONObject jsonObject = (JSONObject) objJson; Iterator it = jsonObject.keySet().iterator(); while (it.hasNext()) { String key = it.next().toString(); Object object = jsonObject.get(key); //å¦‚æœå¾—åˆ°çš„æ˜¯æ•°ç»„ if (object instanceof JSONArray) { JSONArray objArray = (JSONArray) object; analysisJson(objArray); } //å¦‚æœkeyä¸­æ˜¯ä¸€ä¸ªjsonå¯¹è±¡ else if (object instanceof JSONObject) { analysisJson((JSONObject) object); } //å¦‚æœkeyä¸­æ˜¯å…¶ä»– else { System.out.println(&quot;[&quot; + key + &quot;]:&quot; + object.toString() + &quot; &quot;); analysisJsonResultMap.put(key, object.toString()); } } } return analysisJsonResultMap; } å¼€æºç›¸å…³ https://www.runoob.com/w3cnote/open-source-license.html å•å…ƒæµ‹è¯• JUnit éå¸¸ç®€å•åœ°ç»„ç»‡æµ‹è¯•ä»£ç ï¼Œå¹¶éšæ—¶è¿è¡Œå®ƒä»¬ï¼ŒJUnitå°±ä¼šç»™å‡ºæˆåŠŸçš„æµ‹è¯•å’Œå¤±è´¥çš„æµ‹è¯•ï¼Œ è¿˜å¯ä»¥ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼Œä¸ä»…åŒ…å«æµ‹è¯•çš„æˆåŠŸç‡ï¼Œè¿˜å¯ä»¥ç»Ÿè®¡æµ‹è¯•çš„ä»£ç è¦†ç›–ç‡ï¼Œå³è¢«æµ‹è¯•çš„ä»£ç æœ¬èº«æœ‰å¤šå°‘ç»è¿‡äº†æµ‹è¯•ã€‚ å¯¹äºé«˜è´¨é‡çš„ä»£ç æ¥è¯´ï¼Œæµ‹è¯•è¦†ç›–ç‡åº”è¯¥åœ¨80%ä»¥ä¸Šã€‚ æ­¤å¤–ï¼Œå‡ ä¹æ‰€æœ‰çš„IDEå·¥å…·éƒ½é›†æˆäº†JUnitï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨IDEä¸­ç¼–å†™å¹¶è¿è¡ŒJUnitæµ‹è¯•ã€‚ ä¸€æ˜¯å•å…ƒæµ‹è¯•ä»£ç æœ¬èº«å¿…é¡»éå¸¸ç®€å•ï¼Œèƒ½ä¸€ä¸‹çœ‹æ˜ç™½ï¼Œå†³ä¸èƒ½å†ä¸ºæµ‹è¯•ä»£ç ç¼–å†™æµ‹è¯•ï¼› äºŒæ˜¯æ¯ä¸ªå•å…ƒæµ‹è¯•åº”å½“äº’ç›¸ç‹¬ç«‹ï¼Œä¸ä¾èµ–è¿è¡Œçš„é¡ºåºï¼› ä¸‰æ˜¯æµ‹è¯•æ—¶ä¸ä½†è¦è¦†ç›–å¸¸ç”¨æµ‹è¯•ç”¨ä¾‹ï¼Œè¿˜è¦ç‰¹åˆ«æ³¨æ„æµ‹è¯•è¾¹ç•Œæ¡ä»¶ï¼Œä¾‹å¦‚è¾“å…¥ä¸º0ï¼Œnullï¼Œç©ºå­—ç¬¦ä¸²&quot;&quot;ç­‰æƒ…å†µã€‚ æµ‹è¯•å¯å›æ»š Junit4 or 5 ? 1234567891011121314151617181920212223242526272829303132333435//junit5 Spring Boot 2.2.Xä»¥åimport org.junit.jupiter.api.Test;//junit4 Spring Boot 2.2.Xä»¥åimport org.junit.Test;//POM//junit4&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.13.1&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;//junit5&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt; &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt;- JUnit â€” The de-facto standard for unit testing Java applications.- Spring Test &amp; Spring Boot Test â€” Utilities and integration test support for Spring Boot applications.- AssertJ â€” A fluent assertion library.- Hamcrest â€” A library of matcher objects (also known as constraints or predicates).- Mockito â€” A Java mocking framework.- JSONassert â€” An assertion library for JSON.- JsonPath â€” XPath for JSON. Spring Boot 2.2 ä¹‹åçš„ pom.xml IDEA Ctrl+Shift+T (Window) åˆ›å»ºæµ‹è¯•ç±» æ³¨è§£å˜åŒ– @RunWith(SpringRunner.class) + @SpringBootTest =====ã€‹ @SpringBootTest 123456//JUnit4@RunWith(SpringRunner.class)@SpringBootTest//JUnit5//@RunWithè¢«@ExtendWithæ›¿æ¢ã€‚åŒæ—¶æœ‰ä¸‹@SpringBootTestæºç å¾—çŸ¥@SpringBootTeståŒ…å«@ExtendWith@SpringBootTest 1234567@Target({ElementType.TYPE})@Retention(RetentionPolicy.RUNTIME)@Documented@Inherited@BootstrapWith(SpringBootTestContextBootstrapper.class)@ExtendWith({SpringExtension.class})public @interface SpringBootTest { æ€»ç»“ Junit4 Junit5 Before BeforeEach After AfterEach BeforeClass BeforeAll AfterClass AfterAll Category Tag RunWith ExtendWith Rule ExtendWith ClassRule RegisterExtension Junit5å¸¸ç”¨æ³¨è§£ @BeforeClassï¼šé’ˆå¯¹æ‰€æœ‰æµ‹è¯•ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼Œä¸”å¿…é¡»ä¸ºstatic void @Beforeï¼šåˆå§‹åŒ–æ–¹æ³•ï¼Œæ‰§è¡Œå½“å‰æµ‹è¯•ç±»çš„æ¯ä¸ªæµ‹è¯•æ–¹æ³•å‰æ‰§è¡Œã€‚ @Testï¼šæµ‹è¯•æ–¹æ³•ï¼Œåœ¨è¿™é‡Œå¯ä»¥æµ‹è¯•æœŸæœ›å¼‚å¸¸å’Œè¶…æ—¶æ—¶é—´ @Afterï¼šé‡Šæ”¾èµ„æºï¼Œæ‰§è¡Œå½“å‰æµ‹è¯•ç±»çš„æ¯ä¸ªæµ‹è¯•æ–¹æ³•åæ‰§è¡Œ @AfterClassï¼šé’ˆå¯¹æ‰€æœ‰æµ‹è¯•ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼Œä¸”å¿…é¡»ä¸ºstatic void @Ignoreï¼šå¿½ç•¥çš„æµ‹è¯•æ–¹æ³•ï¼ˆåªåœ¨æµ‹è¯•ç±»çš„æ—¶å€™ç”Ÿæ•ˆï¼Œå•ç‹¬æ‰§è¡Œè¯¥æµ‹è¯•æ–¹æ³•æ— æ•ˆï¼‰ @RunWith:å¯ä»¥æ›´æ”¹æµ‹è¯•è¿è¡Œå™¨ ï¼Œç¼ºçœå€¼ org.junit.runner.Runner ä¸€ä¸ªå•å…ƒæµ‹è¯•ç±»æ‰§è¡Œé¡ºåºä¸ºï¼š @BeforeClass â€“&gt; @Before â€“&gt; @Test â€“&gt; @After â€“&gt; @AfterClass æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•çš„è°ƒç”¨é¡ºåºä¸ºï¼š @Before â€“&gt; @Test â€“&gt; @After æ–­è¨€(assertThat) åŸºç¡€è¯­æ³• assertThat( [value], [matcher statement] ); value æ˜¯æ¥ä¸‹æ¥æƒ³è¦æµ‹è¯•çš„å˜é‡å€¼ï¼› matcher statement æ˜¯ä½¿ç”¨ Hamcrest åŒ¹é…ç¬¦æ¥è¡¨è¾¾çš„å¯¹å‰é¢å˜é‡æ‰€æœŸæœ›çš„å€¼çš„å£°æ˜ï¼Œå¦‚æœ value å€¼ä¸ matcher statement æ‰€è¡¨è¾¾çš„æœŸæœ›å€¼ç›¸ç¬¦ï¼Œåˆ™æµ‹è¯•æˆåŠŸï¼Œå¦åˆ™æµ‹è¯•å¤±è´¥ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import static org.junit.Assert.*;å­—ç¬¦ç›¸å…³åŒ¹é…ç¬¦/**equalToåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„testedValueç­‰äºexpectedValueï¼Œ* equalToå¯ä»¥æ–­è¨€æ•°å€¼ä¹‹é—´ï¼Œå­—ç¬¦ä¸²ä¹‹é—´å’Œå¯¹è±¡ä¹‹é—´æ˜¯å¦ç›¸ç­‰ï¼Œç›¸å½“äºObjectçš„equalsæ–¹æ³•*/assertThat(testedValue, equalTo(expectedValue));/**equalToIgnoringCaseåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„å­—ç¬¦ä¸²testedString*åœ¨å¿½ç•¥å¤§å°å†™çš„æƒ…å†µä¸‹ç­‰äºexpectedString*/assertThat(testedString, equalToIgnoringCase(expectedString));/**equalToIgnoringWhiteSpaceåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„å­—ç¬¦ä¸²testedString*åœ¨å¿½ç•¥å¤´å°¾çš„ä»»æ„ä¸ªç©ºæ ¼çš„æƒ…å†µä¸‹ç­‰äºexpectedStringï¼Œ*æ³¨æ„ï¼šå­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼ä¸èƒ½è¢«å¿½ç•¥*/assertThat(testedString, equalToIgnoringWhiteSpace(expectedString);/**containsStringåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„å­—ç¬¦ä¸²testedStringåŒ…å«å­å­—ç¬¦ä¸²subString**/assertThat(testedString, containsString(subString) );/**endsWithåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„å­—ç¬¦ä¸²testedStringä»¥å­å­—ç¬¦ä¸²suffixç»“å°¾*/assertThat(testedString, endsWith(suffix));/**startsWithåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„å­—ç¬¦ä¸²testedStringä»¥å­å­—ç¬¦ä¸²prefixå¼€å§‹*/assertThat(testedString, startsWith(prefix));ä¸€èˆ¬åŒ¹é…ç¬¦/**nullValue()åŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹objectçš„å€¼ä¸ºnull*/assertThat(object,nullValue());/**notNullValue()åŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹objectçš„å€¼ä¸ä¸ºnull*/assertThat(object,notNullValue());/**isåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„objectç­‰äºåé¢ç»™å‡ºåŒ¹é…è¡¨è¾¾å¼*/assertThat(testedString, is(equalTo(expectedValue)));/**isåŒ¹é…ç¬¦ç®€å†™åº”ç”¨ä¹‹ä¸€ï¼Œis(equalTo(x))çš„ç®€å†™ï¼Œæ–­è¨€testedValueç­‰äºexpectedValue*/assertThat(testedValue, is(expectedValue));/**isåŒ¹é…ç¬¦ç®€å†™åº”ç”¨ä¹‹äºŒï¼Œis(instanceOf(SomeClass.class))çš„ç®€å†™ï¼Œ*æ–­è¨€testedObjectä¸ºCheddarçš„å®ä¾‹*/assertThat(testedObject, is(Cheddar.class));/**notåŒ¹é…ç¬¦å’ŒisåŒ¹é…ç¬¦æ­£å¥½ç›¸åï¼Œæ–­è¨€è¢«æµ‹çš„objectä¸ç­‰äºåé¢ç»™å‡ºçš„object*/assertThat(testedString, not(expectedString));/**allOfåŒ¹é…ç¬¦æ–­è¨€ç¬¦åˆæ‰€æœ‰æ¡ä»¶ï¼Œç›¸å½“äºâ€œä¸â€ï¼ˆ&amp;&amp;ï¼‰*/assertThat(testedNumber, allOf( greaterThan(8), lessThan(16) ) );/**anyOfåŒ¹é…ç¬¦æ–­è¨€ç¬¦åˆæ¡ä»¶ä¹‹ä¸€ï¼Œç›¸å½“äºâ€œæˆ–â€ï¼ˆ||ï¼‰*/assertThat(testedNumber, anyOf( greaterThan(16), lessThan(8) ) );æ•°å€¼ç›¸å…³åŒ¹é…ç¬¦/**closeToåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„æµ®ç‚¹å‹æ•°testedDoubleåœ¨20.0Â¡Ã€0.5èŒƒå›´ä¹‹å†…*/assertThat(testedDouble, closeTo( 20.0, 0.5 ));/**greaterThanåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„æ•°å€¼testedNumberå¤§äº16.0*/assertThat(testedNumber, greaterThan(16.0));/** lessThanåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„æ•°å€¼testedNumberå°äº16.0*/assertThat(testedNumber, lessThan (16.0));/** greaterThanOrEqualToåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„æ•°å€¼testedNumberå¤§äºç­‰äº16.0*/assertThat(testedNumber, greaterThanOrEqualTo (16.0));/** lessThanOrEqualToåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„testedNumberå°äºç­‰äº16.0*/assertThat(testedNumber, lessThanOrEqualTo (16.0));é›†åˆç›¸å…³åŒ¹é…ç¬¦/**hasEntryåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„Mapå¯¹è±¡mapObjectå«æœ‰ä¸€ä¸ªé”®å€¼ä¸º&quot;key&quot;å¯¹åº”å…ƒç´ å€¼ä¸º&quot;value&quot;çš„Entryé¡¹*/assertThat(mapObject, hasEntry(&quot;key&quot;, &quot;value&quot; ) );/**hasItemåŒ¹é…ç¬¦è¡¨æ˜è¢«æµ‹çš„è¿­ä»£å¯¹è±¡iterableObjectå«æœ‰å…ƒç´ elementé¡¹åˆ™æµ‹è¯•é€šè¿‡*/assertThat(iterableObject, hasItem (element));/** hasKeyåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„Mapå¯¹è±¡mapObjectå«æœ‰é”®å€¼â€œkeyâ€*/assertThat(mapObject, hasKey (&quot;key&quot;));/** hasValueåŒ¹é…ç¬¦æ–­è¨€è¢«æµ‹çš„Mapå¯¹è±¡mapObjectå«æœ‰å…ƒç´ å€¼value*/assertThat(mapObject, hasValue(value)); å¯è¡¨è¾¾å…¨éƒ¨çš„æµ‹è¯•æ€æƒ³ã€‚ Springboot å¯è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ä»£ç  IDEA Ctrl + Shift +T ç”Ÿæˆæµ‹è¯•ç±» Service 123456789101112131415161718192021import org.junit.Assert;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;import static org.hamcrest.CoreMatchers.*;@RunWith(SpringRunner.class)@SpringBootTestpublic class LearnServiceTest { @Autowired private LearnService learnService; @Test public void getLearn(){ LearnResource learnResource=learnService.selectByKey(1001L); Assert.assertThat(learnResource.getAuthor(),is(&quot;å˜Ÿå˜ŸMDç‹¬ç«‹åšå®¢&quot;)); }} Controller MockMvcï¼šå¯ä»¥ä¸å¯åŠ¨å·¥ç¨‹æµ‹è¯•æ¥å£ï¼ŒMockMvc å®ç°äº†å¯¹ Http è¯·æ±‚çš„æ¨¡æ‹Ÿï¼Œèƒ½å¤Ÿç›´æ¥ä½¿ç”¨ç½‘ç»œçš„å½¢å¼ï¼Œè½¬æ¢åˆ° Controller çš„è°ƒç”¨ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æµ‹è¯•é€Ÿåº¦å¿«ã€ä¸ä¾èµ–ç½‘ç»œç¯å¢ƒï¼Œè€Œä¸”æä¾›äº†ä¸€å¥—éªŒè¯çš„å·¥å…·ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—è¯·æ±‚çš„éªŒè¯ç»Ÿä¸€è€Œä¸”å¾ˆæ–¹ä¾¿ã€‚ mockMvc.performæ‰§è¡Œä¸€ä¸ªè¯·æ±‚ MockMvcRequestBuilders.get(â€œ/user/1â€)æ„é€ ä¸€ä¸ªè¯·æ±‚ï¼ŒPostè¯·æ±‚å°±ç”¨.postæ–¹æ³• contentType(MediaType.APPLICATION_JSON_UTF8)ä»£è¡¨å‘é€ç«¯å‘é€çš„æ•°æ®æ ¼å¼æ˜¯application/json;charset=UTF-8 accept(MediaType.APPLICATION_JSON_UTF8)ä»£è¡¨å®¢æˆ·ç«¯å¸Œæœ›æ¥å—çš„æ•°æ®ç±»å‹ä¸ºapplication/json;charset=UTF-8 session(session)æ³¨å…¥ä¸€ä¸ªsessionï¼Œè¿™æ ·æ‹¦æˆªå™¨æ‰å¯ä»¥é€šè¿‡ ResultActions.andExpectæ·»åŠ æ‰§è¡Œå®Œæˆåçš„æ–­è¨€ ResultActions.andExpect(MockMvcResultMatchers.status().isOk())æ–¹æ³•çœ‹è¯·æ±‚çš„çŠ¶æ€å“åº”ç æ˜¯å¦ä¸º200å¦‚æœä¸æ˜¯åˆ™æŠ›å¼‚å¸¸ï¼Œæµ‹è¯•ä¸é€šè¿‡ andExpect(MockMvcResultMatchers.jsonPath(â€œ$.authorâ€).value(â€œå˜Ÿå˜ŸMDç‹¬ç«‹åšå®¢â€))è¿™é‡ŒjsonPathç”¨æ¥è·å–authorå­—æ®µæ¯”å¯¹æ˜¯å¦ä¸ºå˜Ÿå˜ŸMDç‹¬ç«‹åšå®¢,ä¸æ˜¯å°±æµ‹è¯•ä¸é€šè¿‡ ResultActions.andDoæ·»åŠ ä¸€ä¸ªç»“æœå¤„ç†å™¨ï¼Œè¡¨ç¤ºè¦å¯¹ç»“æœåšç‚¹ä»€ä¹ˆäº‹æƒ…ï¼Œæ¯”å¦‚æ­¤å¤„ä½¿ç”¨MockMvcResultHandlers.print()è¾“å‡ºæ•´ä¸ªå“åº”ç»“æœä¿¡æ¯ å•å…ƒæµ‹è¯•å›æ»š æµ‹è¯•çš„åƒåœ¾æ•°æ®æ¸…ç†ï¼Œæ·»åŠ æ³¨è§£ @Transactional é»˜è®¤å¼•æ“æ˜¯InnoDBæœ‰æ•ˆï¼ŒMyISAMï¼ˆMySQL5.5ä¹‹å‰é»˜è®¤å¼•æ“ï¼‰ä¸æ”¯æŒäº‹åŠ¡ã€ä¹Ÿä¸æ”¯æŒå¤–é”® æƒ³å…³é—­å›æ»šï¼Œåªè¦åŠ ä¸Š@Rollback(false)æ³¨è§£å³å¯ã€‚@Rollbackè¡¨ç¤ºäº‹åŠ¡æ‰§è¡Œå®Œå›æ»šï¼Œæ”¯æŒä¼ å…¥ä¸€ä¸ªå‚æ•°valueï¼Œé»˜è®¤trueå³å›æ»šï¼Œfalseä¸å›æ»šã€‚ ä¿®æ”¹é»˜è®¤æ•°æ®åº“å¼•æ“çš„æ­¥éª¤ MyISAMé€‚åˆï¼š(1)åšå¾ˆå¤šcount çš„è®¡ç®—ï¼›(2)æ’å…¥ä¸é¢‘ç¹ï¼ŒæŸ¥è¯¢éå¸¸é¢‘ç¹ï¼›(3)æ²¡æœ‰äº‹åŠ¡ã€‚ InnoDBé€‚åˆï¼š(1)å¯é æ€§è¦æ±‚æ¯”è¾ƒé«˜ï¼Œæˆ–è€…è¦æ±‚äº‹åŠ¡ï¼›(2)è¡¨æ›´æ–°å’ŒæŸ¥è¯¢éƒ½ç›¸å½“çš„é¢‘ç¹ï¼Œå¹¶ä¸”è¡¨é”å®šçš„æœºä¼šæ¯”è¾ƒå¤§çš„æƒ…å†µã€‚(4)æ€§èƒ½è¾ƒå¥½çš„æœåŠ¡å™¨ï¼Œæ¯”å¦‚å•ç‹¬çš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œåƒé˜¿é‡Œäº‘çš„å…³ç³»å‹æ•°æ®åº“RDSå°±æ¨èä½¿ç”¨InnoDBå¼•æ“ã€‚ show variables like '%storage_engine%'; show create table user; ALTER TABLE user ENGINE=INNODB; TextNG æ³¨è§£è·Ÿjunitå·®ä¸å¤šï¼Œä½†æ˜¯åŠŸèƒ½æ›´å¤šã€‚ Swagger UI æ¥å£æ–‡æ¡£ï¼Œæ¥å£æµ‹è¯• å¯åŠ¨ç±»æ·»åŠ æ³¨è§£@EnableSwagger2Doc 123456789101112131415161718192021222324252627282930313233343536@Apiï¼šç”¨åœ¨è¯·æ±‚çš„ç±»ä¸Šï¼Œè¡¨ç¤ºå¯¹ç±»çš„è¯´æ˜ tags=&quot;è¯´æ˜è¯¥ç±»çš„ä½œç”¨ï¼Œå¯ä»¥åœ¨UIç•Œé¢ä¸Šçœ‹åˆ°çš„æ³¨è§£&quot; value=&quot;è¯¥å‚æ•°æ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œåœ¨UIç•Œé¢ä¸Šä¹Ÿçœ‹åˆ°ï¼Œæ‰€ä»¥ä¸éœ€è¦é…ç½®&quot; @ApiOperationï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¯´æ˜æ–¹æ³•çš„ç”¨é€”ã€ä½œç”¨ value=&quot;è¯´æ˜æ–¹æ³•çš„ç”¨é€”ã€ä½œç”¨&quot; notes=&quot;æ–¹æ³•çš„å¤‡æ³¨è¯´æ˜&quot; @ApiImplicitParamsï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å‚æ•°è¯´æ˜ @ApiImplicitParamï¼šç”¨åœ¨@ApiImplicitParamsæ³¨è§£ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªè¯·æ±‚å‚æ•°çš„å„ä¸ªæ–¹é¢ nameï¼šå‚æ•°å valueï¼šå‚æ•°çš„æ±‰å­—è¯´æ˜ã€è§£é‡Š requiredï¼šå‚æ•°æ˜¯å¦å¿…é¡»ä¼  paramTypeï¼šå‚æ•°æ”¾åœ¨å“ªä¸ªåœ°æ–¹ Â· header --&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestHeader Â· query --&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestParam Â· pathï¼ˆç”¨äºrestfulæ¥å£ï¼‰--&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@PathVariable Â· bodyï¼ˆä¸å¸¸ç”¨ï¼‰ Â· formï¼ˆä¸å¸¸ç”¨ï¼‰ dataTypeï¼šå‚æ•°ç±»å‹ï¼Œé»˜è®¤Stringï¼Œå…¶å®ƒå€¼dataType=&quot;Integer&quot; defaultValueï¼šå‚æ•°çš„é»˜è®¤å€¼ @ApiResponsesï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å“åº” @ApiResponseï¼šç”¨åœ¨@ApiResponsesä¸­ï¼Œä¸€èˆ¬ç”¨äºè¡¨è¾¾ä¸€ä¸ªé”™è¯¯çš„å“åº”ä¿¡æ¯ codeï¼šæ•°å­—ï¼Œä¾‹å¦‚400 messageï¼šä¿¡æ¯ï¼Œä¾‹å¦‚&quot;è¯·æ±‚å‚æ•°æ²¡å¡«å¥½&quot; responseï¼šæŠ›å‡ºå¼‚å¸¸çš„ç±» @ApiModelï¼šç”¨äºå“åº”ç±»ä¸Šï¼Œè¡¨ç¤ºä¸€ä¸ªè¿”å›å“åº”æ•°æ®çš„ä¿¡æ¯ ï¼ˆè¿™ç§ä¸€èˆ¬ç”¨åœ¨poståˆ›å»ºçš„æ—¶å€™ï¼Œä½¿ç”¨@RequestBodyè¿™æ ·çš„åœºæ™¯ï¼Œ è¯·æ±‚å‚æ•°æ— æ³•ä½¿ç”¨@ApiImplicitParamæ³¨è§£è¿›è¡Œæè¿°çš„æ—¶å€™ï¼‰ @ApiModelPropertyï¼šç”¨åœ¨å±æ€§ä¸Šï¼Œæè¿°å“åº”ç±»çš„å±æ€§ httpè½¬https ä¸¤è€…åŒºåˆ«ï¼š httpsï¼šä¼˜ï¼š 1.æ•°æ®åŠ å¯† 2.SSLå®‰å…¨æœºåˆ¶ã€å®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨-&gt;æœåŠ¡å™¨æŠŠæ•°å­—è¯ä¹¦+å…¬ç”¨å¯†åŒ™ å‘ç»™å®¢æˆ·ç«¯-&gt;å®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨ï¼Œç¡®ä¿è®¿é—®çš„æ˜¯æ­£ç¡®çš„æœåŠ¡å™¨ï¼ˆä¸æ˜¯é’“é±¼ç½‘ç«™ï¼‰-&gt;å®¢æˆ·ç«¯ç”Ÿäº§ä¼šè¯å¯†åŒ™å¹¶ç”¨å…¬ç”¨å¯†åŒ™è¿›è¡ŒåŠ å¯†å†æ¬¡å‘ç»™æœåŠ¡å™¨-&gt;æœåŠ¡å™¨ç”¨ç§äººå¯†åŒ™è¿›è¡Œè§£å¯†ï¼ˆä¹Ÿå°±ç›¸å½“äºéªŒè¯å®¢æˆ·ç«¯ï¼‰ï¼ŒéªŒè¯æˆåŠŸå»ºç«‹èµ·ä¸€æ¡å®‰å…¨çš„æ•°æ®ä¼ é€’é€šé“-&gt;æœåŠ¡å™¨æŠŠå®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®æ‰“åŒ…åŠ å¯†å‘é€ç»™å®¢æˆ·ç«¯-&gt;å®¢æˆ·ç«¯æµè§ˆå™¨æ¥æ”¶æ•°æ®å¹¶è§£æ 3.å®‰å…¨æ ‡è¯†ï¼Œæé«˜ç”¨æˆ·ä¿¡ä»»æ„Ÿ æ­¥éª¤ï¼š ç”³è¯·SSLè¯ä¹¦ å®‰è£…è¯ä¹¦ã€‚ æ•´æ”¹ç½‘ç«™é“¾æ¥ å…¨ç«™åš301è½¬å‘ï¼Œå‡å°‘ç½‘ç«™æƒé‡çš„æµå¤± ç›¸å…³ æœåŠ¡å™¨ çš„ 80ã€8080ã€443ï¼ˆhttpsé»˜è®¤ï¼‰ç«¯å£å¼€æ”¾éœ€è¦å¤‡æ¡ˆã€‚ nginx ã€winã€‘ è´­ä¹°sslè¯ä¹¦è·å¾—keyå’Œpemæ–‡ä»¶ 123456789101112131415161718192021222324252627server { listen 8080 ssl; server_name aaa.bbb.com; ssl on; ssl_certificate E:/tys/nginx-1.12.2/key_pem//hzsgis.pem; ssl_certificate_key E:/tys/nginx-1.12.2/key_pem/hzsgis.key; ssl_session_cache shared:SSL:1m; ssl_session_timeout 20m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; #charset koi8-r; #access_log logs/host.access.log main; location /main/map3d/rest { #add_header 'Access-Control-Allow-Headers' '*'; proxy_pass http://111.111.11.11:1111/main/map3d/rest; } #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html { root html; }} nginx ã€Linuxã€‘ è´­ä¹°sslè¯ä¹¦è·å¾—keyå’Œpemæ–‡ä»¶å¹¶æ·»åŠ åˆ°nginxç›®å½•ä¸‹ æ”¹443ç«¯å£é…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224#user nobody;worker_processes 1;#error_log logs/error.log;#error_log logs/error.log notice;#error_log logs/error.log info;#pid logs/nginx.pid;events { worker_connections 1024;}http { include mime.types; default_type application/octet-stream; #log_format main '$remote_addr - $remote_user [$time_local] &quot;$request&quot; ' # '$status $body_bytes_sent &quot;$http_referer&quot; ' # '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'; #access_log logs/access.log main; sendfile on; #tcp_nopush on; #keepalive_timeout 0; keepalive_timeout 65; #gzip on; upstream jq_one{server 10.32.250.176:8080 weight=5;server 10.32.250.177:8080 weight=5;}upstream jq_two{server 10.32.250.178:8080 weight=5;server 10.32.250.179:8080 weight=5;}server {listen 8080;server_name localhost;#charset koi8-r;#access_log logs/host.access.log main;location / {root html;index index.html index.htm;proxy_pass http://jq_two;proxy_set_header Host $http_host;proxy_set_header X-Real-IP $remote_addr;proxy_set_header REMOTE-HOST $remote_addr;proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;}} server { listen 80; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; location / { root html; index index.html index.htm; proxy_pass http://jq_one; proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header REMOTE-HOST $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \\.php$ { # proxy_pass http://127.0.0.1; #} # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \\.php$ { # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #} # deny access to .htaccess files, if Apache's document root # concurs with nginx's one # #location ~ /\\.ht { # deny all; #} } server { listen 443 ssl; server_name fyditu.fuyang.gov.cn; ssl_certificate /usr/local/nginx/key_pem//fyditu.fuyang.gov.cn_bundle.pem; ssl_certificate_key /usr/local/nginx/key_pem//fyditu.fuyang.gov.cn.key; ssl_session_cache shared:SSL:1m; ssl_session_timeout 20m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; #charset koi8-r; #access_log logs/host.access.log main; location / { root html; index index.html index.htm; proxy_pass http://jq_one; proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header REMOTE-HOST $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \\.php$ { # proxy_pass http://127.0.0.1; #} # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \\.php$ { # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #} # deny access to .htaccess files, if Apache's document root # concurs with nginx's one # #location ~ /\\.ht { # deny all; #} } # another virtual host using mix of IP-, name-, and port-based configuration # #server { # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / { # root html; # index index.html index.htm; # } #} # HTTPS server # #server { # listen 443 ssl; # server_name localhost; # ssl_certificate cert.pem; # ssl_certificate_key cert.key; # ssl_session_cache shared:SSL:1m; # ssl_session_timeout 5m; # ssl_ciphers HIGH:!aNULL:!MD5; # ssl_prefer_server_ciphers on; # location / { # root html; # index index.html index.htm; # } #}} æ£€éªŒé…ç½®æ–‡ä»¶ 12/usr/local/nginx/sbin å®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ./nginx -t nginxå®‰è£…SSLæ¨¡å— 123456#è¿›å…¥nginxæºç æ–‡ä»¶å¤¹æ‰§è¡Œï¼Œ/usr/local/nginxä¸ºå®‰è£…æ–‡ä»¶å¤¹./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module#æ›¿æ¢å®‰è£… émake installè¦†ç›–å®‰è£…make#å¤‡ä»½cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak é‡å¯ 12345678910111213#æŸ¥çœ‹nginxç«¯å£å·ps -ef|grep nginx#å…³é—­è¿›ç¨‹kill -QUIT ç«¯å£å·#ä»æºç æ–‡ä»¶å¤¹å¤åˆ¶åˆ°å®‰è£…æ–‡ä»¶å¤¹cp ./objs/nginx /usr/local/nginx/sbin/#å…ˆåˆ‡æ¢åˆ°sbinç›®å½•cd /usr/local/nginx/sbin/#æ£€æµ‹nginxçš„é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯./niginx -t#å¯åŠ¨/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf å¼€é€š443ç«¯å£ 123456789101112131415161718#1.å…ˆæŸ¥çœ‹æœåŠ¡å™¨é˜²ç«å¢™å¼€æ”¾çš„ç«¯å£firewall-cmd --zone=public --list-ports //æŸ¥çœ‹é˜²ç«å¢™çš„å¼€æ”¾ç«¯å£#2.å…è®¸é˜²ç«å¢™æ”¾è¡Œ443ç«¯å£# å‘½ä»¤å«ä¹‰ï¼š# --zone #ä½œç”¨åŸŸ# --add-port=443/tcp #æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£/é€šè®¯åè®®# --permanent #ä»£è¡¨æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆfirewall-cmd --zone=public --add-port=443/tcp --permanent#3.é‡å¯é˜²ç«å¢™firewall-cmd --reload1.systemctl start firewalld.serviceï¼ˆå¼€å¯é˜²ç«å¢™ï¼‰2.systemctl stop firewalld.serviceï¼ˆå¼€å¯é˜²ç«å¢™ï¼‰3.service firewalld restartï¼ˆé‡å¯é˜²ç«å¢™ï¼‰4.firewall-cmd --zone=public --add-port=4400-4600/udp --permanen(æŒ‡å®šç«¯å£èŒƒå›´ä¸º4400-4600é€šè¿‡é˜²ç«å¢™)Warning: ALREADY_ENABLED: 3306:tcpï¼ˆè¯´æ˜3306ç«¯å£é€šè¿‡æˆåŠŸï¼‰5.firewall-cmd --zone=public --remove-port=80/tcp --permanentï¼ˆå…³é—­æŒ‡å®šç«¯å£ï¼‰6.firewall-cmd --zone=public --list-portsï¼ˆæŸ¥çœ‹é€šè¿‡çš„ç«¯å£ï¼‰7.æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ ï¼šfirewall-cmd --state å®šæ—¶ä»»åŠ¡ SpringBoot @Scheduledæ³¨è§£ï¼Œæ¥å£SchedulingConfigurer,Quartz å·¥ä½œæµ Activit åˆ†åº“åˆ†è¡¨ åœ¨è®¿é—®é‡è¿æ¥æ•°æˆ–è€…æ•°æ®é‡å¤§çš„ç»„åˆæƒ…å†µä¸‹é€‰æ‹©ä¸åŒåˆ†åº“åˆ†è¡¨æ–¹æ¡ˆã€‚æ ¹æ®æ•°æ®è®¿é—®é‡ï¼Œå•åº“æ‰¿å—é‡é€‰æ‹©åˆ†å¤šå°‘ã€‚æ ¹æ®è¡¨ä¿¡æ¯é€‰æ‹©æ°´å¹³ã€æ¯”å¦‚ä¸åŒç­‰çº§ã€‘æˆ–å‚ç›´æ‹†åˆ†ï¼ˆæ¯”å¦‚ä¹°å®¶ä¹°å®¶ä¿¡æ¯ï¼‰ï¼Œ å¤šæ•°æ®æºï¼Œä¸»ä»å¤åˆ¶ æŠ€æœ¯ç»†èŠ‚æ€è€ƒ","link":"/2021/03/01/Draft/2021/JAVA%E5%BA%94%E7%94%A8/"},{"title":"SpringCloud","text":"æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘å¾®æœåŠ¡ï¼Œä¸»æµ WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘eurekaæ³¨å†Œä¸­å¿ƒï¼ŒGatewayç½‘å…³ï¼ŒRibbonè´Ÿè½½å‡è¡¡ï¼ŒFeignæœåŠ¡è°ƒç”¨ï¼ŒHystrixç†”æ–­å™¨ç­‰ï¼Œspringcloudalibaba HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘:bilibiliï¼Œå®˜ç½‘ LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘å½“å‰é˜¶æ®µç†Ÿç»ƒè¿ç”¨ Spring Cloud ã€Hoxtonã€‘ 1. ç³»ç»Ÿæ¶æ„æ¼”å˜ éšç€äº’è”ç½‘çš„å‘å±•ï¼Œç½‘ç«™åº”ç”¨çš„è§„æ¨¡ä¸æ–­æ‰©å¤§ã€‚éœ€æ±‚çš„æ¿€å¢ï¼Œå¸¦æ¥çš„æ˜¯æŠ€æœ¯ä¸Šçš„å‹åŠ›ã€‚ç³»ç»Ÿæ¶æ„ä¹Ÿå› æ­¤ä¹Ÿä¸æ–­çš„æ¼” è¿›ã€å‡çº§ã€è¿­ä»£ã€‚ä»å•ä¸€åº”ç”¨ï¼Œåˆ°å‚ç›´æ‹†åˆ†ï¼Œåˆ°åˆ†å¸ƒå¼æœåŠ¡ï¼Œåˆ°SOAï¼Œä»¥åŠç°åœ¨ç«çƒ­çš„å¾®æœåŠ¡æ¶æ„ï¼Œè¿˜æœ‰åœ¨Google å¸¦é¢†ä¸‹æ¥åŠ¿æ±¹æ¶Œçš„Service Meshã€‚ 1.1. é›†ä¸­å¼æ¶æ„ å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚ ä¼˜ç‚¹ï¼š ç³»ç»Ÿå¼€å‘é€Ÿåº¦å¿« ç»´æŠ¤æˆæœ¬ä½ é€‚ç”¨äºå¹¶å‘è¦æ±‚è¾ƒä½çš„ç³»ç»Ÿ ç¼ºç‚¹ï¼š ä»£ç è€¦åˆåº¦é«˜ï¼ŒåæœŸç»´æŠ¤å›°éš¾ æ— æ³•é’ˆå¯¹ä¸åŒæ¨¡å—è¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ– æ— æ³•æ°´å¹³æ‰©å±• å•ç‚¹å®¹é”™ç‡ä½ï¼Œå¹¶å‘èƒ½åŠ›å·® 1.2. å‚ç›´æ‹†åˆ† â€‹ å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæ­¤æ—¶ä¸ºäº†åº”å¯¹æ›´é«˜çš„å¹¶å‘å’Œä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬æ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿè¿›è¡Œæ‹† åˆ†ï¼š ä¼˜ç‚¹ï¼š ç³»ç»Ÿæ‹†åˆ†å®ç°äº†æµé‡åˆ†æ‹…ï¼Œè§£å†³äº†å¹¶å‘é—®é¢˜ å¯ä»¥é’ˆå¯¹ä¸åŒæ¨¡å—è¿›è¡Œä¼˜åŒ– æ–¹ä¾¿æ°´å¹³æ‰©å±•ï¼Œè´Ÿè½½å‡è¡¡ï¼Œå®¹é”™ç‡æé«˜ ç¼ºç‚¹ï¼š ç³»ç»Ÿé—´ç›¸äº’ç‹¬ç«‹ï¼Œä¼šæœ‰å¾ˆå¤šé‡å¤å¼€å‘å·¥ä½œï¼Œå½±å“å¼€å‘æ•ˆç‡ 1.3. åˆ†å¸ƒå¼æœåŠ¡ â€‹ å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚ ä¼˜ç‚¹ï¼š å°†åŸºç¡€æœåŠ¡è¿›è¡Œäº†æŠ½å–ï¼Œç³»ç»Ÿé—´ç›¸äº’è°ƒç”¨ï¼Œæé«˜äº†ä»£ç å¤ç”¨å’Œå¼€å‘æ•ˆç‡ ç¼ºç‚¹ï¼š ç³»ç»Ÿé—´è€¦åˆåº¦å˜é«˜ï¼Œè°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤ 1.4. é¢å‘æœåŠ¡æ¶æ„ï¼ˆSOAï¼‰ â€‹ SOAï¼ˆService Oriented Architectureï¼‰é¢å‘æœåŠ¡çš„æ¶æ„ï¼šå®ƒæ˜¯ä¸€ç§è®¾è®¡æ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«å¤šä¸ªæœåŠ¡ï¼Œ æœåŠ¡ä¹‹é—´é€šè¿‡ç›¸äº’ä¾èµ–æœ€ç»ˆæä¾›ä¸€ç³»åˆ—çš„åŠŸèƒ½ã€‚ä¸€ä¸ªæœåŠ¡ é€šå¸¸ä»¥ç‹¬ç«‹çš„å½¢å¼å­˜åœ¨ä¸æ“ä½œç³»ç»Ÿè¿›ç¨‹ä¸­ã€‚å„ä¸ªæœåŠ¡ä¹‹é—´ é€šè¿‡ç½‘ç»œè°ƒç”¨ã€‚SOAç»“æ„å›¾ï¼š ESBï¼ˆä¼ä¸šæœåŠ¡æ€»çº¿ï¼‰ï¼Œç®€å• æ¥è¯´ ESB å°±æ˜¯ä¸€æ ¹ç®¡é“ï¼Œç”¨æ¥è¿æ¥å„ä¸ªæœåŠ¡èŠ‚ç‚¹ã€‚ä¸ºäº†é›† æˆä¸åŒç³»ç»Ÿï¼Œä¸åŒåè®®çš„æœåŠ¡ï¼ŒESB åšäº†æ¶ˆæ¯çš„è½¬åŒ–è§£é‡Šå’Œè·¯ç”±å·¥ä½œï¼Œè®©ä¸åŒçš„æœåŠ¡äº’è”äº’é€šã€‚ SOAç¼ºç‚¹ï¼šæ¯ä¸ªä¾›åº”å•†æä¾›çš„ESBäº§å“æœ‰åå·®ï¼Œè‡ªèº«å®ç°è¾ƒä¸ºå¤æ‚ï¼›åº”ç”¨æœåŠ¡ç²’åº¦è¾ƒå¤§ï¼ŒESBé›†æˆæ•´åˆæ‰€æœ‰æœåŠ¡å’Œå è®®ã€æ•°æ®è½¬æ¢ä½¿å¾—è¿ç»´ã€æµ‹è¯•éƒ¨ç½²å›°éš¾ã€‚æ‰€æœ‰æœåŠ¡éƒ½é€šè¿‡ä¸€ä¸ªé€šè·¯é€šä¿¡ï¼Œç›´æ¥é™ä½äº†é€šä¿¡é€Ÿåº¦ã€‚ 1.5. å¾®æœåŠ¡æ¶æ„ â€‹ å¾®æœåŠ¡æ¶æ„æ˜¯ä½¿ç”¨ä¸€å¥—å°æœåŠ¡æ¥å¼€å‘å•ä¸ªåº”ç”¨çš„æ–¹å¼æˆ–é€”å¾„ï¼Œæ¯ä¸ªæœåŠ¡åŸºäºå•ä¸€ä¸šåŠ¡èƒ½åŠ›æ„å»ºï¼Œè¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼Œå¹¶ä½¿ç”¨è½»é‡çº§æœºåˆ¶é€šä¿¡ï¼Œé€šå¸¸æ˜¯HTTP APIï¼Œå¹¶èƒ½å¤Ÿé€šè¿‡è‡ªåŠ¨åŒ–éƒ¨ç½²æœºåˆ¶æ¥ç‹¬ç«‹éƒ¨ç½²ã€‚è¿™äº›æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å®ç°ï¼Œä»¥åŠä¸åŒæ•°æ®å­˜å‚¨æŠ€æœ¯ï¼Œå¹¶ä¿æŒæœ€ä½é™åº¦çš„é›†ä¸­å¼ç®¡ç†ã€‚å¾®æœåŠ¡ç»“æ„å›¾ï¼š API Gatewayç½‘å…³æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæ˜¯ç³»ç»Ÿçš„å”¯ä¸€å…¥å£ã€‚ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯æä¾›ä¸€ä¸ªå®šåˆ¶çš„APIã€‚APIç½‘å…³æ ¸å¿ƒæ˜¯ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯å’Œæ¶ˆè´¹ç«¯éƒ½é€šè¿‡ç»Ÿä¸€çš„ç½‘å…³æ¥å…¥å¾®æœåŠ¡ï¼Œåœ¨ç½‘å…³å±‚å¤„ç†æ‰€æœ‰çš„éä¸šåŠ¡åŠŸèƒ½ã€‚å¦‚å®ƒè¿˜å¯ä»¥å…·æœ‰å…¶å®ƒèŒè´£ï¼Œå¦‚èº«ä»½éªŒè¯ã€ç›‘æ§ã€è´Ÿè½½å‡è¡¡ã€ç¼“å­˜ã€è¯·æ±‚åˆ†ç‰‡ä¸ç®¡ç†ã€é™æ€å“åº”å¤„ç†ã€‚é€šå¸¸ï¼Œç½‘å…³æä¾›RESTful/HTTPçš„æ–¹å¼è®¿é—®æœåŠ¡ã€‚è€ŒæœåŠ¡ç«¯é€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæœåŠ¡æ³¨å†Œå’Œç®¡ç†ã€‚ å¾®æœåŠ¡çš„ç‰¹ç‚¹ï¼š å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡ä¸­æ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œåšåˆ°å•ä¸€èŒè´£ å¾®ï¼šå¾®æœåŠ¡çš„æœåŠ¡æ‹†åˆ†ç²’åº¦å¾ˆå°ï¼Œä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·ç®¡ç†å°±å¯ä»¥ä½œä¸ºä¸€ä¸ªæœåŠ¡ã€‚æ¯ä¸ªæœåŠ¡è™½å°ï¼Œä½†â€œäº”è„ä¿±å…¨â€ã€‚ é¢å‘æœåŠ¡ï¼šé¢å‘æœåŠ¡æ˜¯è¯´æ¯ä¸ªæœåŠ¡éƒ½è¦å¯¹å¤–æš´éœ²Resté£æ ¼æœåŠ¡æ¥å£APIã€‚å¹¶ä¸å…³å¿ƒæœåŠ¡çš„æŠ€æœ¯å®ç°ï¼Œåšåˆ°ä¸å¹³å°å’Œè¯­è¨€æ— å…³ï¼Œä¹Ÿä¸é™å®šç”¨ä»€ä¹ˆæŠ€æœ¯å®ç°ï¼Œåªè¦æä¾›Restçš„æ¥å£å³å¯ã€‚ è‡ªæ²»ï¼šè‡ªæ²»æ˜¯è¯´æœåŠ¡é—´äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰° å›¢é˜Ÿç‹¬ç«‹ï¼šæ¯ä¸ªæœåŠ¡éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼€å‘å›¢é˜Ÿï¼Œäººæ•°ä¸èƒ½è¿‡å¤šã€‚ æŠ€æœ¯ç‹¬ç«‹ï¼šå› ä¸ºæ˜¯é¢å‘æœåŠ¡ï¼Œæä¾›Restæ¥å£ï¼Œä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ²¡æœ‰åˆ«äººå¹²æ¶‰ å‰åç«¯åˆ†ç¦»ï¼šé‡‡ç”¨å‰åç«¯åˆ†ç¦»å¼€å‘ï¼Œæä¾›ç»Ÿä¸€Restæ¥å£ï¼Œåç«¯ä¸ç”¨å†ä¸ºPCã€ç§»åŠ¨ç«¯å¼€å‘ä¸åŒæ¥å£ æ•°æ®åº“åˆ†ç¦»ï¼šæ¯ä¸ªæœåŠ¡éƒ½ä½¿ç”¨è‡ªå·±çš„æ•°æ®æº éƒ¨ç½²ç‹¬ç«‹ï¼šæœåŠ¡é—´è™½ç„¶æœ‰è°ƒç”¨ï¼Œä½†è¦åšåˆ°æœåŠ¡é‡å¯ä¸å½±å“å…¶å®ƒæœåŠ¡ã€‚æœ‰åˆ©äºæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ã€‚æ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¯å¤ç”¨ï¼Œå¯æ›¿æ¢ï¼Œé™ä½è€¦åˆï¼Œæ˜“ç»´æŠ¤ å¾®æœåŠ¡æ¶æ„ä¸SOAéƒ½æ˜¯å¯¹ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ï¼›å¾®æœåŠ¡æ¶æ„åŸºäºSOAæ€æƒ³ï¼Œå¯ä»¥æŠŠå¾®æœåŠ¡å½“åšå»é™¤äº†ESBçš„SOAã€‚ESBæ˜¯SOAæ¶æ„ä¸­çš„ä¸­å¿ƒæ€»çº¿ï¼Œè®¾è®¡å›¾å½¢åº”è¯¥æ˜¯æ˜Ÿå½¢çš„ï¼Œè€Œå¾®æœåŠ¡æ˜¯å»ä¸­å¿ƒåŒ–çš„åˆ†å¸ƒå¼è½¯ä»¶æ¶æ„ã€‚ä¸¤è€…æ¯”è¾ƒç±»ä¼¼ï¼Œä½†å…¶å®ä¹Ÿæœ‰ä¸€äº›å·®åˆ«ï¼š æœåŠ¡è°ƒç”¨æ–¹å¼123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178### 2.1. RPCå’ŒHTTPæ— è®ºæ˜¯å¾®æœåŠ¡è¿˜æ˜¯SOAï¼Œéƒ½é¢ä¸´ç€æœåŠ¡é—´çš„è¿œç¨‹è°ƒç”¨ã€‚é‚£ä¹ˆæœåŠ¡é—´çš„è¿œç¨‹è°ƒç”¨æ–¹å¼æœ‰å“ªäº›å‘¢ï¼Ÿå¸¸è§çš„è¿œç¨‹è°ƒç”¨æ–¹å¼æœ‰ä»¥ä¸‹2ç§ï¼š### {0}**RPC**ï¼šRemote Produce Callè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ŒRPCåŸºäºSocketï¼Œå·¥ä½œåœ¨ä¼šè¯å±‚ã€‚è‡ªå®šä¹‰æ•°æ®æ ¼å¼ï¼Œé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ã€‚æ—©æœŸçš„webserviceï¼Œç°åœ¨çƒ­é—¨çš„dubboï¼Œéƒ½æ˜¯RPCçš„å…¸å‹ä»£è¡¨### {0}**Http**ï¼šhttpå…¶å®æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼ŒåŸºäºTCPï¼Œå·¥ä½œåœ¨åº”ç”¨å±‚ï¼Œè§„å®šäº†æ•°æ®ä¼ è¾“çš„æ ¼å¼ã€‚ç°åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸æœåŠ¡ç«¯é€šä¿¡åŸºæœ¬éƒ½æ˜¯é‡‡ç”¨Httpåè®®ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œè¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚ç¼ºç‚¹æ˜¯æ¶ˆæ¯å°è£…è‡ƒè‚¿ï¼Œä¼˜åŠ¿æ˜¯å¯¹æœåŠ¡çš„æä¾›å’Œè°ƒç”¨æ–¹æ²¡æœ‰ä»»ä½•æŠ€æœ¯é™å®šï¼Œè‡ªç”±çµæ´»ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡ç†å¿µã€‚ç°åœ¨çƒ­é—¨çš„Resté£æ ¼ï¼Œå°±å¯ä»¥é€šè¿‡httpåè®®æ¥å®ç°ã€‚åŒºåˆ«ï¼šRPCçš„æœºåˆ¶æ˜¯æ ¹æ®è¯­è¨€çš„APIï¼ˆlanguage APIï¼‰æ¥å®šä¹‰çš„ï¼Œè€Œä¸æ˜¯æ ¹æ®åŸºäºç½‘ç»œçš„åº”ç”¨æ¥å®šä¹‰çš„ã€‚å¦‚æœä½ ä»¬å…¬å¸å…¨éƒ¨é‡‡ç”¨JavaæŠ€æœ¯æ ˆï¼Œé‚£ä¹ˆä½¿ç”¨Dubboä½œä¸ºå¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ç›¸åï¼Œå¦‚æœå…¬å¸çš„æŠ€æœ¯æ ˆå¤šæ ·åŒ–ï¼Œè€Œä¸”ä½ æ›´é’çSpringå®¶æ—ï¼Œé‚£ä¹ˆSpring Cloudæ­å»ºå¾®æœåŠ¡æ˜¯ä¸äºŒä¹‹é€‰ã€‚åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œä¼šé€‰æ‹©Spring Cloudå¥—ä»¶ï¼Œå› æ­¤ä¼šä½¿ç”¨Httpæ–¹å¼æ¥å®ç°æœåŠ¡é—´è°ƒç”¨ã€‚### 2.2. Httpå®¢æˆ·ç«¯å·¥å…·æ—¢ç„¶å¾®æœåŠ¡é€‰æ‹©äº†Httpï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è€ƒè™‘è‡ªå·±æ¥å®ç°å¯¹è¯·æ±‚å’Œå“åº”çš„å¤„ç†ã€‚ä¸è¿‡å¼€æºä¸–ç•Œå·²ç»æœ‰å¾ˆå¤šçš„httpå®¢æˆ·ç«¯å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åšè¿™äº›äº‹æƒ…ï¼Œä¾‹å¦‚ï¼šHttpClientOKHttpURLConnectionä¸è¿‡è¿™äº›ä¸åŒçš„å®¢æˆ·ç«¯ï¼ŒAPIå„ä¸ç›¸åŒã€‚è€ŒSpringä¹Ÿæœ‰å¯¹httpçš„å®¢æˆ·ç«¯è¿›è¡Œå°è£…ï¼Œæä¾›äº†å·¥å…·ç±»å«**RestTemplate**ã€‚### 2.3. Springçš„RestTemplateSpringæä¾›äº†ä¸€ä¸ªRestTemplateæ¨¡æ¿å·¥å…·ç±»ï¼Œå¯¹åŸºäºHttpçš„å®¢æˆ·ç«¯è¿›è¡Œäº†å°è£…ï¼Œå¹¶ä¸”å®ç°äº†å¯¹è±¡ä¸jsonçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œéå¸¸æ–¹ä¾¿ã€‚RestTemplateå¹¶æ²¡æœ‰é™å®šHttpçš„å®¢æˆ·ç«¯ç±»å‹ï¼Œè€Œæ˜¯è¿›è¡Œäº†æŠ½è±¡ï¼Œç›®å‰å¸¸ç”¨çš„3ç§éƒ½æœ‰æ”¯æŒï¼šHttpClientOkHttpJDKåŸç”Ÿçš„URLConnectionï¼ˆé»˜è®¤çš„ï¼‰## 3.Springcloudç»¼è¿°ç‰ˆæœ¬å‘½åï¼šä¼¦æ•¦åœ°é“ç«™å­—æ¯é¡ºåºå®éªŒç¯å¢ƒ![image-20210803191107717](https://gitee.com/mychimei/picture/raw/master/work/image-20210803191107717.png)## åœæ›´ã€å‡çº§ã€æ›¿æ¢ ![image-20210803192154130](https://gitee.com/mychimei/picture/raw/master/work/image-20210803192154130.png)## çˆ¶å·¥ç¨‹åˆ›å»º### åˆ›å»ºå·¥ç¨‹å‰å‡†å¤‡&gt; çº¦å®šã€‹é…ç½®ã€‹ç¼–ç #### ç¼–ç UTF-8å…¨å¥—ä½œç”¨![image-20210803195102713](https://gitee.com/mychimei/picture/raw/master/work/image-20210803195102713.png)#### æ³¨è§£ç”Ÿæ•ˆæ¿€æ´»ä½œç”¨![image-20210803195303082](https://gitee.com/mychimei/picture/raw/master/work/image-20210803195303082.png)#### JAVAç¼–è¯‘ç‰ˆæœ¬![image-20210803195348074](https://gitee.com/mychimei/picture/raw/master/work/image-20210803195348074.png)#### æ–‡ä»¶è¿‡æ»¤ä½œç”¨ï¼Œå…³é—­å¯¹åº”æ–‡ä»¶ideaå¯è§![image-20210803195603866](https://gitee.com/mychimei/picture/raw/master/work/image-20210803195603866.png)## Eurekaã€å¤§æ¥¼è€æ¿ã€‘# Spring Cloud [Finchley]â€‹ ä¸€ç³»åˆ—æ¡†æ¶æœ‰åºé›†åˆï¼Œå°è£…åå±è”½äº†å¤æ‚çš„é…ç½®å’Œå®ç°åŸç†ã€‚Spring Cloudä¸ºå¼€å‘äººå‘˜æä¾›äº†å·¥å…·ï¼Œä»¥å¿«é€Ÿæ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸€äº›å¸¸è§æ¨¡å¼ï¼ˆä¾‹å¦‚ï¼Œé…ç½®ç®¡ç†ï¼ŒæœåŠ¡å‘ç°ï¼Œæ–­è·¯å™¨ï¼Œæ™ºèƒ½è·¯ç”±ï¼Œå¾®ä»£ç†ï¼Œæ§åˆ¶æ€»çº¿ï¼Œä¸€æ¬¡æ€§ä»¤ç‰Œï¼Œå…¨å±€é”ï¼Œé¢†å¯¼é€‰ä¸¾ï¼Œåˆ†å¸ƒå¼ä¼šè¯ï¼Œç¾¤é›†çŠ¶æ€ï¼‰ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„åè°ƒå¯¼è‡´æ ·æ¿å¼æ ·ï¼Œå¹¶ä¸”ä½¿ç”¨Spring Cloudå¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿç«™èµ·æ¥å®ç°è¿™äº›æ ·æ¿çš„æœåŠ¡å’Œåº”ç”¨ç¨‹åºã€‚å®ƒä»¬å°†åœ¨ä»»ä½•åˆ†å¸ƒå¼ç¯å¢ƒä¸­éƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼ŒåŒ…æ‹¬å¼€å‘äººå‘˜è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œè£¸æœºæ•°æ®ä¸­å¿ƒä»¥åŠè¯¸å¦‚Cloud Foundryä¹‹ç±»çš„æ‰˜ç®¡å¹³å°ã€‚## 1.ç³»ç»Ÿæ¶æ„æ¼”å˜&lt;pre class=&quot;mermaid&quot;&gt;é›†ä¸­å¼æ¶æ„å‚ç›´æ‹†åˆ†åˆ†å¸ƒå¼æœåŠ¡SOAé¢å‘æœåŠ¡æ¶æ„å¾®æœåŠ¡æ¶æ„&lt;/pre&gt;### å¾®æœåŠ¡æ¶æ„ ä¸€å¥—ä½¿ç”¨å°æœåŠ¡æˆ–è€…å•ä¸€ä¸šåŠ¡æ¥å¼€å‘å•ä¸ªåº”ç”¨çš„æ–¹å¼æˆ–é€”å¾„ã€‚#### å¾®æœåŠ¡æ¶æ„ç‰¹ç‚¹ï¼š- å•ä¸€èŒè´£- æœåŠ¡ç²’åº¦å°- é¢å‘æœåŠ¡ï¼ˆå¯¹å¤–æš´éœ²REST apiï¼‰- æœåŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹ä¸ä½¿ç”¨ESBçš„SOAæ¶æ„çš„åŒºåˆ«ï¼šå¾®æœåŠ¡æ¶æ„æ²¡æœ‰ä½¿ç”¨ESBï¼Œæœ‰æœåŠ¡æ²»ç†æ³¨å†Œä¸­å¿ƒï¼›ä¸šåŠ¡ç²’åº¦å°ã€‚## 2.æœåŠ¡è°ƒç”¨æ–¹å¼- RPCï¼šåŸºäºsocketï¼Œé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ï¼›webserviceã€dubbo- HTTPï¼šåŸºäºTCPï¼Œå°è£…æ¯”è¾ƒè‡ƒè‚¿ï¼›å¯¹æœåŠ¡å’Œè°ƒç”¨æ–¹æ²¡æœ‰ä»»ä½•æŠ€æœ¯ã€è¯­è¨€çš„é™å®šï¼Œè‡ªç”±çµæ´»ï¼›RESTfulï¼ŒSpring Cloudä¸€èˆ¬æƒ…å†µä¸‹æœ‰å¦‚ä¸‹ä¸‰ç§httpå®¢æˆ·ç«¯å·¥å…·ç±»åŒ…éƒ½å¯ä»¥æ–¹ä¾¿çš„è¿›è¡ŒhttpæœåŠ¡è°ƒç”¨ï¼š- httpClient- okHttp- JDKåŸç”ŸURLConnectionspring æä¾›äº†RestTemplateçš„å·¥å…·ç±»å¯¹ä¸Šè¿°çš„3ç§httpå®¢æˆ·ç«¯å·¥å…·ç±»è¿›è¡Œäº†å°è£…ï¼Œå¯åœ¨springé¡¹ç›®ä¸­ä½¿ç”¨RestTemplateè¿›è¡ŒæœåŠ¡è°ƒç”¨ã€‚### **å°ç»“**ï¼š```java1@RunWith(SpringRunner.class)2@SpringBootTest3public class RestTemplateTest {4â€‹5 @Autowired6 private RestTemplate restTemplate;7â€‹8 @Test9 public void test(){10 String url = &quot;http://localhost/user/8&quot;;11 //restTemplateå¯ä»¥å¯¹jsonæ ¼å¼å­—ç¬¦ä¸²è¿›è¡Œååºåˆ—åŒ–12 User user = restTemplate.getForObject(url, User.class);13 System.out.println(user);14 }15}16â€‹ 3.SpringCloudæ¦‚è¿° æ•´åˆçš„ç»„ä»¶å¯ä»¥æœ‰å¾ˆå¤šç»„ä»¶ï¼›å¸¸è§çš„ç»„ä»¶æœ‰ï¼šeurekaæ³¨å†Œä¸­å¿ƒï¼ŒGatewayç½‘å…³ï¼ŒRibbonè´Ÿè½½å‡è¡¡ï¼ŒFeignæœåŠ¡è°ƒç”¨ï¼ŒHystrixç†”æ–­å™¨ã€‚åœ¨æœ‰éœ€è¦çš„æ—¶å€™é¡¹ç›®æ·»åŠ å¯¹äºçš„å¯åŠ¨å™¨ä¾èµ–å³å¯ã€‚ ç‰ˆæœ¬ç‰¹å¾ï¼šä»¥è‹±æ–‡å•è¯å‘½åï¼ˆä¼¦æ•¦åœ°é“ç«™åï¼‰ 4.åˆ›å»ºå¾®æœåŠ¡å·¥ç¨‹ çˆ¶å·¥ç¨‹springcloudï¼šæ·»åŠ spring bootçˆ¶åæ ‡å’Œç®¡ç†å…¶å®ƒç»„ä»¶çš„ä¾èµ– ç”¨æˆ·æœåŠ¡å·¥ç¨‹user-serviceï¼šæ•´åˆmybatisæŸ¥è¯¢æ•°æ®åº“ä¸­ç”¨æˆ·æ•°æ®ï¼›æä¾›æŸ¥è¯¢ç”¨æˆ·æœåŠ¡ æœåŠ¡æ¶ˆè´¹å·¥ç¨‹consumer-demoï¼šåˆ©ç”¨æŸ¥è¯¢ç”¨æˆ·æœåŠ¡è·å–ç”¨æˆ·æ•°æ®å¹¶è¾“å‡ºåˆ°æµè§ˆå™¨ 5.æ­å»ºé…ç½®Serviceå·¥ç¨‹ æ·»åŠ å¯åŠ¨å™¨ä¾èµ–ï¼ˆwebã€é€šç”¨Mapperï¼‰ï¼› åˆ›å»ºå¯åŠ¨å¼•å¯¼ç±»å’Œé…ç½®æ–‡ä»¶ï¼› ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°ï¼› ç¼–å†™æµ‹è¯•ä»£ç ï¼ˆUserMapperï¼ŒUserServiceï¼ŒUserControllerï¼‰ï¼› æµ‹è¯• 6.æ­å»ºé…ç½®Clientå·¥ç¨‹ æ·»åŠ å¯åŠ¨å™¨ä¾èµ–ï¼› åˆ›å»ºå¯åŠ¨å¼•å¯¼ç±»ï¼ˆæ³¨å†ŒRestTemplateï¼‰å’Œé…ç½®æ–‡ä»¶ï¼› ç¼–å†™æµ‹è¯•ä»£ç ï¼ˆConsumerControllerä¸­ä½¿ç”¨restTemplateè®¿é—®æœåŠ¡è·å–æ•°æ®ï¼‰ æµ‹è¯• 7.é—®é¢˜ æœåŠ¡ç®¡ç† å¦‚ä½•è‡ªåŠ¨æ³¨å†Œå’Œå‘ç° å¦‚ä½•å®ç°çŠ¶æ€ç›‘ç®¡ å¦‚ä½•å®ç°åŠ¨æ€è·¯ç”± æœåŠ¡å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡ æœåŠ¡å¦‚ä½•è§£å†³å®¹ç¾é—®é¢˜ æœåŠ¡å¦‚ä½•å®ç°ç»Ÿä¸€é…ç½® ä¸Šè¿°é—®é¢˜é€šè¿‡springcloudå„ç§ç»„ä»¶è§£å†³ 8.Eureka Eurekaçš„ä¸»è¦åŠŸèƒ½æ˜¯è¿›è¡ŒæœåŠ¡ç®¡ç†ï¼Œå®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼Œè¿”å›æœåŠ¡åœ°å€åˆ—è¡¨ã€‚ 8.1Eureka-server Eurekaæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒåªåšæœåŠ¡æ³¨å†Œï¼›è‡ªèº«å¹¶ä¸æä¾›æœåŠ¡ä¹Ÿä¸æ¶ˆè´¹æœåŠ¡ã€‚å¯ä»¥æ­å»ºwebå·¥ç¨‹ä½¿ç”¨Eurekaï¼Œå¯ä»¥ä½¿ç”¨Spring Bootæ–¹å¼æ­å»ºã€‚ æ­å»ºæ­¥éª¤ï¼š åˆ›å»ºå·¥ç¨‹ï¼› æ·»åŠ å¯åŠ¨å™¨ä¾èµ–ï¼› ç¼–å†™å¯åŠ¨å¼•å¯¼ç±»ï¼ˆæ·»åŠ Eurekaçš„æœåŠ¡æ³¨è§£ï¼‰å’Œé…ç½®æ–‡ä»¶ï¼› ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆç«¯å£ï¼Œåº”ç”¨åç§°...ï¼‰ï¼› å¯åŠ¨æµ‹è¯• 8.2æœåŠ¡æ³¨å†Œä¸å‘ç° æœåŠ¡æ³¨å†Œï¼šåœ¨æœåŠ¡æä¾›å·¥ç¨‹user-serviceä¸Šæ·»åŠ Eurekaå®¢æˆ·ç«¯ä¾èµ–ï¼›è‡ªåŠ¨å°†æœåŠ¡æ³¨å†Œåˆ°EurekaServeræœåŠ¡åœ°å€åˆ—è¡¨ã€‚ æ·»åŠ ä¾èµ–ï¼› æ”¹é€ å¯åŠ¨å¼•å¯¼ç±»ï¼›æ·»åŠ å¼€å¯Eurekaå®¢æˆ·ç«¯å‘ç°çš„æ³¨è§£ï¼› ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼›è®¾ç½®Eureka æœåŠ¡åœ°å€ æœåŠ¡å‘ç°ï¼šåœ¨æœåŠ¡æ¶ˆè´¹å·¥ç¨‹consumer-demoä¸Šæ·»åŠ Eurekaå®¢æˆ·ç«¯ä¾èµ–ï¼›å¯ä»¥ä½¿ç”¨å·¥å…·ç±»æ ¹æ®æœåŠ¡åç§°è·å–å¯¹åº”çš„æœåŠ¡åœ°å€åˆ—è¡¨ã€‚ æ·»åŠ ä¾èµ–ï¼› æ”¹é€ å¯åŠ¨å¼•å¯¼ç±»ï¼›æ·»åŠ å¼€å¯Eurekaå®¢æˆ·ç«¯å‘ç°çš„æ³¨è§£ï¼› ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼›è®¾ç½®Eureka æœåŠ¡åœ°å€ï¼› æ”¹é€ å¤„ç†å™¨ç±»Controllerï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·ç±»DiscoveryClientæ ¹æ®æœåŠ¡åç§°è·å–å¯¹åº”æœåŠ¡åœ°å€åˆ—è¡¨ã€‚ 8.3é«˜å¯ç”¨é…ç½® â€‹ å°†Eureka Serverä½œä¸ºä¸€ä¸ªæœåŠ¡æ³¨å†Œåˆ°å…¶å®ƒEureka Serverï¼Œè¿™æ ·å¤šä¸ªEureka Serverä¹‹é—´å°±èƒ½å¤Ÿäº’ç›¸å‘ç°å¯¹æ–¹ï¼ŒåŒæ­¥æœåŠ¡ï¼Œå®ç°Eureka Serveré›†ç¾¤ã€‚ 9.è´Ÿè½½å‡è¡¡Ribbon Ribbonæä¾›äº†è½®è¯¢ã€éšæœºä¸¤ç§è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ˆé»˜è®¤æ˜¯è½®è¯¢ï¼‰å¯ä»¥å®ç°ä»åœ°å€åˆ—è¡¨ä¸­ä½¿ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•è·å–åœ°å€è¿›è¡ŒæœåŠ¡è°ƒç”¨ã€‚ 9.1Ribbonåº”ç”¨ åœ¨å®ä¾‹åŒ–RestTemplateçš„æ—¶å€™ä½¿ç”¨@LoadBalancedï¼ŒæœåŠ¡åœ°å€ç›´æ¥å¯ä»¥ä½¿ç”¨æœåŠ¡åã€‚ 10.ç†”æ–­å™¨Hystrixï¼ˆè±ªçŒªï¼‰ Hystrixæ˜¯ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œç”¨äºéš”ç¦»è®¿é—®è¿œç¨‹æœåŠ¡ï¼Œé˜²æ­¢å‡ºç°çº§è”å¤±è´¥ã€‚ 10.1çº¿ç¨‹éš”ç¦»&amp;æœåŠ¡é™çº§ Hystrixè§£å†³é›ªå´©æ•ˆåº”ï¼š çº¿ç¨‹éš”ç¦»ï¼šç”¨æˆ·è¯·æ±‚ä¸ç›´æ¥è®¿é—®æœåŠ¡ï¼Œè€Œæ˜¯ä½¿ç”¨çº¿ç¨‹æ± ä¸­ç©ºé—²çš„çº¿ç¨‹è®¿é—®æœåŠ¡ï¼ŒåŠ é€Ÿå¤±è´¥åˆ¤æ–­æ—¶é—´ã€‚ æœåŠ¡é™çº§ï¼šåŠæ—¶è¿”å›æœåŠ¡è°ƒç”¨å¤±è´¥çš„ç»“æœï¼Œè®©çº¿ç¨‹ä¸å› ä¸ºç­‰å¾…æœåŠ¡è€Œé˜»å¡ã€‚ å°ç»“ï¼š æ·»åŠ ä¾èµ– 123456781 &lt;dependency&gt;2 &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;3 &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;4 &lt;/dependency&gt; å¼€å¯ç†”æ–­ é™çº§é€»è¾‘ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273741@RestController2@RequestMapping(&quot;/consumer&quot;)3@Slf4j4@DefaultProperties(defaultFallback = &quot;defaultFallback&quot;)5public class ConsumerController {6â€‹7 @Autowired8 private RestTemplate restTemplate;9â€‹10 @Autowired11 private DiscoveryClient discoveryClient;12â€‹13 @GetMapping(&quot;/{id}&quot;)14 //@HystrixCommand(fallbackMethod = &quot;queryByIdFallback&quot;)15 @HystrixCommand16 public String queryById(@PathVariable Long id){17 /*String url = &quot;http://localhost:9091/user/&quot;+id;18 19 //è·å–eurekaä¸­æ³¨å†Œçš„user-serviceçš„å®ä¾‹20 List&lt;ServiceInstance&gt; serviceInstances = discoveryClient.getInstances(&quot;user-service&quot;);21 ServiceInstance serviceInstance = serviceInstances.get(0);22â€‹23 url = &quot;http://&quot; + serviceInstance.getHost() + &quot;:&quot; + serviceInstance.getPort() + &quot;/user/&quot; + id;*/24 String url = &quot;http://user-service/user/&quot; + id;25 return restTemplate.getForObject(url, String.class);26 }27â€‹28 public String queryByIdFallback(Long id){29 log.error(&quot;æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯å¤±è´¥ã€‚idï¼š{}&quot;, id);30 return &quot;å¯¹ä¸èµ·ï¼Œç½‘ç»œå¤ªæ‹¥æŒ¤äº†ï¼&quot;;31 }32â€‹33 public String defaultFallback(){34 return &quot;é»˜è®¤æç¤ºï¼šå¯¹ä¸èµ·ï¼Œç½‘ç»œå¤ªæ‹¥æŒ¤äº†ï¼&quot;;35 }36}37â€‹ ä¿®æ”¹è¶…æ—¶é…ç½® 12345678910111213141hystrix:2 command:3 default:4 execution:5 isolation:6 thread:7 timeoutInMilliseconds: 2000 10.2æœåŠ¡ç†”æ–­ â€‹ åœ¨æœåŠ¡ç†”æ–­ä¸­ï¼Œä½¿ç”¨çš„ç†”æ–­å™¨ï¼Œä¹Ÿå«æ–­è·¯å™¨ï¼Œå…¶è‹±æ–‡å•è¯ä¸ºï¼šCircuit Breaker â€‹ ç†”æ–­æœºåˆ¶ä¸å®¶é‡Œä½¿ç”¨çš„ç”µè·¯ç†”æ–­åŸç†ç±»ä¼¼ï¼›å½“å¦‚æœç”µè·¯å‘ç”ŸçŸ­è·¯çš„æ—¶å€™èƒ½ç«‹åˆ»ç†”æ–­ç”µè·¯ï¼Œé¿å…å‘ç”Ÿç¾éš¾ã€‚åœ¨åˆ†å¸ƒå¼ç³» ç»Ÿä¸­åº”ç”¨æœåŠ¡ç†”æ–­åï¼›æœåŠ¡è°ƒç”¨æ–¹å¯ä»¥è‡ªå·±è¿›è¡Œåˆ¤æ–­å“ªäº›æœåŠ¡ååº”æ…¢æˆ–å­˜åœ¨å¤§é‡è¶…æ—¶ï¼Œå¯ä»¥é’ˆå¯¹è¿™äº›æœåŠ¡è¿›è¡Œä¸»åŠ¨ç†” æ–­ï¼Œé˜²æ­¢æ•´ä¸ªç³»ç»Ÿè¢«æ‹–å®ã€‚ â€‹ Hystrixçš„æœåŠ¡ç†”æ–­æœºåˆ¶ï¼Œå¯ä»¥å®ç°å¼¹æ€§å®¹é”™ï¼›å½“æœåŠ¡è¯·æ±‚æƒ…å†µå¥½è½¬ä¹‹åï¼Œå¯ä»¥è‡ªåŠ¨é‡è¿ã€‚é€šè¿‡æ–­è·¯çš„æ–¹å¼ï¼Œå°†åç»­ è¯·æ±‚ç›´æ¥æ‹’ç»ï¼Œä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤5ç§’ï¼‰ä¹‹åå…è®¸éƒ¨åˆ†è¯·æ±‚é€šè¿‡ï¼Œå¦‚æœè°ƒç”¨æˆåŠŸåˆ™å›åˆ°æ–­è·¯å™¨å…³é—­çŠ¶æ€ï¼Œå¦åˆ™ç»§ç»­æ‰“ å¼€ï¼Œæ‹’ç»è¯·æ±‚çš„æœåŠ¡ã€‚ Hystrixçš„ç†”æ–­çŠ¶æ€æœºæ¨¡å‹ï¼š çŠ¶æ€æœºæœ‰3ä¸ªçŠ¶æ€ï¼š Closedï¼šå…³é—­çŠ¶æ€ï¼ˆæ–­è·¯å™¨å…³é—­ï¼‰ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½æ­£å¸¸è®¿é—®ã€‚ Openï¼šæ‰“å¼€çŠ¶æ€ï¼ˆæ–­è·¯å™¨æ‰“å¼€ï¼‰ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«é™çº§ã€‚Hystrixä¼šå¯¹è¯·æ±‚æƒ…å†µè®¡æ•°ï¼Œå½“ä¸€å®šæ—¶é—´å†…å¤±è´¥è¯·æ±‚ç™¾ åˆ†æ¯”è¾¾åˆ°é˜ˆå€¼ï¼Œåˆ™è§¦å‘ç†”æ–­ï¼Œæ–­è·¯å™¨ä¼šå®Œå…¨æ‰“å¼€ã€‚é»˜è®¤å¤±è´¥æ¯”ä¾‹çš„é˜ˆå€¼æ˜¯50%ï¼Œè¯·æ±‚æ¬¡æ•°æœ€å°‘ä¸ä½äº20æ¬¡ã€‚ Half Openï¼šåŠå¼€çŠ¶æ€ï¼Œä¸æ˜¯æ°¸ä¹…çš„ï¼Œæ–­è·¯å™¨æ‰“å¼€åä¼šè¿›å…¥ä¼‘çœ æ—¶é—´ï¼ˆé»˜è®¤æ˜¯5Sï¼‰ã€‚éšåæ–­è·¯å™¨ä¼šè‡ªåŠ¨è¿›å…¥åŠå¼€ çŠ¶æ€ã€‚æ­¤æ—¶ä¼šé‡Šæ”¾éƒ¨åˆ†è¯·æ±‚é€šè¿‡ï¼Œè‹¥è¿™äº›è¯·æ±‚éƒ½æ˜¯å¥åº·çš„ï¼Œåˆ™ä¼šå…³é—­æ–­è·¯å™¨ï¼Œå¦åˆ™ç»§ç»­ä¿æŒæ‰“å¼€ï¼Œå†æ¬¡è¿›è¡Œä¼‘ çœ è®¡æ—¶ã€‚ 11.æœåŠ¡æ¶ˆè´¹è€…ï¼ˆFeignï¼‰ 11.1ç®€ä»‹ â€‹ Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„ä¼ªHttpå®¢æˆ·ç«¯ï¼Œå®ƒä½¿å¾—å†™Httpå®¢æˆ·ç«¯å˜å¾—æ›´ç®€å•ã€‚ä½¿ç”¨Feignï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶æ³¨è§£ã€‚å®ƒå…·æœ‰å¯æ’æ‹”çš„æ³¨è§£ç‰¹æ€§ï¼Œå¯ä½¿ç”¨Feign æ³¨è§£å’ŒJAX-RSæ³¨è§£ã€‚Feignæ”¯æŒå¯æ’æ‹”çš„ç¼–ç å™¨å’Œè§£ç å™¨ã€‚Feigné»˜è®¤é›†æˆäº†Ribbonï¼Œå¹¶å’ŒEurekaç»“åˆï¼Œé»˜è®¤å®ç°äº†è´Ÿè½½å‡è¡¡çš„æ•ˆæœã€‚ ç®€è€Œè¨€ä¹‹ï¼š Feign é‡‡ç”¨çš„æ˜¯åŸºäºæ¥å£çš„æ³¨è§£ Feign æ•´åˆäº†ribbonï¼Œå…·æœ‰è´Ÿè½½å‡è¡¡çš„èƒ½åŠ› æ•´åˆäº†Hystrixï¼Œå…·æœ‰ç†”æ–­çš„èƒ½åŠ› 12.æ–­è·¯å™¨ï¼ˆHystrixï¼‰ â€‹ åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ ¹æ®ä¸šåŠ¡æ¥æ‹†åˆ†æˆä¸€ä¸ªä¸ªçš„æœåŠ¡ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´å¯ä»¥ç›¸äº’è°ƒç”¨ï¼ˆRPCï¼‰ï¼Œåœ¨Spring Cloudå¯ä»¥ç”¨RestTemplate+Ribbonå’ŒFeignæ¥è°ƒç”¨ã€‚ä¸ºäº†ä¿è¯å…¶é«˜å¯ç”¨ï¼Œå•ä¸ªæœåŠ¡é€šå¸¸ä¼šé›†ç¾¤éƒ¨ç½²ã€‚ç”±äºç½‘ç»œåŸå› æˆ–è€…è‡ªèº«çš„åŸå› ï¼ŒæœåŠ¡å¹¶ä¸èƒ½ä¿è¯100%å¯ç”¨ï¼Œå¦‚æœå•ä¸ªæœåŠ¡å‡ºç°é—®é¢˜ï¼Œè°ƒç”¨è¿™ä¸ªæœåŠ¡å°±ä¼šå‡ºç°çº¿ç¨‹é˜»å¡ï¼Œæ­¤æ—¶è‹¥æœ‰å¤§é‡çš„è¯·æ±‚æ¶Œå…¥ï¼ŒServletå®¹å™¨çš„çº¿ç¨‹èµ„æºä¼šè¢«æ¶ˆè€—å®Œæ¯•ï¼Œå¯¼è‡´æœåŠ¡ç˜«ç—ªã€‚æœåŠ¡ä¸æœåŠ¡ä¹‹é—´çš„ä¾èµ–æ€§ï¼Œæ•…éšœä¼šä¼ æ’­ï¼Œä¼šå¯¹æ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿé€ æˆç¾éš¾æ€§çš„ä¸¥é‡åæœï¼Œè¿™å°±æ˜¯æœåŠ¡æ•…éšœçš„â€œé›ªå´©â€æ•ˆåº”ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸šç•Œæå‡ºäº†æ–­è·¯å™¨æ¨¡å‹ã€‚ 12.1æ–­è·¯å™¨ç®€ä»‹ â€‹ Netflix has created a library called Hystrix that implements the circuit breaker pattern. In a microservice architecture it is common to have multiple layers of service calls.Netflix. å¼€æºäº†Hystrixç»„ä»¶ï¼Œå®ç°äº†æ–­è·¯å™¨æ¨¡å¼ï¼ŒSpringCloudå¯¹è¿™ä¸€ç»„ä»¶è¿›è¡Œäº†æ•´åˆã€‚ åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€ä¸ªè¯·æ±‚éœ€è¦è°ƒç”¨å¤šä¸ªæœåŠ¡æ˜¯éå¸¸å¸¸è§çš„ã€‚è¾ƒåº•å±‚çš„æœåŠ¡å¦‚æœå‡ºç°æ•…éšœï¼Œä¼šå¯¼è‡´è¿é”æ•…éšœã€‚å½“å¯¹ç‰¹å®šçš„æœåŠ¡çš„è°ƒç”¨çš„ä¸å¯ç”¨è¾¾åˆ°ä¸€ä¸ªé˜€å€¼ï¼ˆHystric æ˜¯5ç§’20æ¬¡ï¼‰ æ–­è·¯å™¨å°†ä¼šè¢«æ‰“å¼€ã€‚æ–­è·¯æ‰“å¼€åï¼Œå¯ç”¨é¿å…è¿é”æ•…éšœï¼Œfallbackæ–¹æ³•å¯ä»¥ç›´æ¥è¿”å›ä¸€ä¸ªå›ºå®šå€¼ã€‚ 13.è·¯ç”±ç½‘å…³(zuul) â€‹ Zuulçš„ä¸»è¦åŠŸèƒ½æ˜¯è·¯ç”±è½¬å‘å’Œè¿‡æ»¤å™¨ã€‚è·¯ç”±åŠŸèƒ½æ˜¯å¾®æœåŠ¡çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚ï¼api/userè½¬å‘åˆ°åˆ°useræœåŠ¡ï¼Œ/api/shopè½¬å‘åˆ°åˆ°shopæœåŠ¡ã€‚zuulé»˜è®¤å’ŒRibbonç»“åˆå®ç°äº†è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½ã€‚ zuulæœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š Authentication Insights Stress Testing Canary Testing Dynamic Routing Service Migration Load Shedding Security Static Response handling Active/Active traffic management æœåŠ¡è¿‡æ»¤ filterTypeï¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä»£è¡¨è¿‡æ»¤å™¨çš„ç±»å‹ï¼Œåœ¨zuulä¸­å®šä¹‰äº†å››ç§ä¸åŒç”Ÿå‘½å‘¨æœŸçš„è¿‡æ»¤å™¨ç±»å‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š preï¼šè·¯ç”±ä¹‹å‰ routingï¼šè·¯ç”±ä¹‹æ—¶ postï¼š è·¯ç”±ä¹‹å errorï¼šå‘é€é”™è¯¯è°ƒç”¨ filterOrderï¼šè¿‡æ»¤çš„é¡ºåº shouldFilterï¼šè¿™é‡Œå¯ä»¥å†™é€»è¾‘åˆ¤æ–­ï¼Œæ˜¯å¦è¦è¿‡æ»¤ï¼Œæœ¬æ–‡true,æ°¸è¿œè¿‡æ»¤ã€‚ runï¼šè¿‡æ»¤å™¨çš„å…·ä½“é€»è¾‘ã€‚å¯ç”¨å¾ˆå¤æ‚ï¼ŒåŒ…æ‹¬æŸ¥sqlï¼Œnosqlå»åˆ¤æ–­è¯¥è¯·æ±‚åˆ°åº•æœ‰æ²¡æœ‰æƒé™è®¿é—®ã€‚ 14.åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ(Spring Cloud Config) â€‹ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç”±äºæœåŠ¡æ•°é‡å·¨å¤šï¼Œä¸ºäº†æ–¹ä¾¿æœåŠ¡é…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†ï¼Œå®æ—¶æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒç»„ä»¶ã€‚åœ¨Spring Cloudä¸­ï¼Œæœ‰åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒç»„ä»¶spring cloud config ï¼Œå®ƒæ”¯æŒé…ç½®æœåŠ¡æ”¾åœ¨é…ç½®æœåŠ¡çš„å†…å­˜ä¸­ï¼ˆå³æœ¬åœ°ï¼‰ï¼Œä¹Ÿæ”¯æŒæ”¾åœ¨è¿œç¨‹Gitä»“åº“ä¸­ã€‚åœ¨spring cloud config ç»„ä»¶ä¸­ï¼Œåˆ†ä¸¤ä¸ªè§’è‰²ï¼Œä¸€æ˜¯config serverï¼ŒäºŒæ˜¯config clientã€‚ 15. é«˜å¯ç”¨çš„åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ(Spring Cloud Config) â€‹ å½“æœåŠ¡å®ä¾‹å¾ˆå¤šæ—¶ï¼Œéƒ½ä»é…ç½®ä¸­å¿ƒè¯»å–æ–‡ä»¶ï¼Œè¿™æ—¶å¯ä»¥è€ƒè™‘å°†é…ç½®ä¸­å¿ƒåšæˆä¸€ä¸ªå¾®æœåŠ¡ï¼Œå°†å…¶é›†ç¾¤åŒ–ï¼Œä»è€Œè¾¾åˆ°é«˜å¯ç”¨ 16.æ¶ˆæ¯æ€»çº¿(Spring Cloud Bus) â€‹ Spring Cloud Bus å°†åˆ†å¸ƒå¼çš„èŠ‚ç‚¹ç”¨è½»é‡çš„æ¶ˆæ¯ä»£ç†è¿æ¥èµ·æ¥ã€‚å®ƒå¯ä»¥ç”¨äºå¹¿æ’­é…ç½®æ–‡ä»¶çš„æ›´æ”¹æˆ–è€…æœåŠ¡ä¹‹é—´çš„é€šè®¯ï¼Œä¹Ÿå¯ä»¥ç”¨äºç›‘æ§ã€‚æœ¬æ–‡è¦è®²è¿°çš„æ˜¯ç”¨Spring Cloud Buså®ç°é€šçŸ¥å¾®æœåŠ¡æ¶æ„çš„é…ç½®æ–‡ä»¶çš„æ›´æ”¹ã€‚ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ— éœ€é‡å¯ã€‘ å‡†å¤‡ï¼šå®‰è£…rabbitMq 17.æœåŠ¡é“¾è·¯è¿½è¸ª(Spring Cloud Sleuth) â€‹ å¾®æœåŠ¡æ¶æ„ä¸Šé€šè¿‡ä¸šåŠ¡æ¥åˆ’åˆ†æœåŠ¡çš„ï¼Œé€šè¿‡RESTè°ƒç”¨ï¼Œå¯¹å¤–æš´éœ²çš„ä¸€ä¸ªæ¥å£ï¼Œå¯èƒ½éœ€è¦å¾ˆå¤šä¸ªæœåŠ¡ååŒæ‰èƒ½å®Œæˆè¿™ä¸ªæ¥å£åŠŸèƒ½ï¼Œå¦‚æœé“¾è·¯ä¸Šä»»ä½•ä¸€ä¸ªæœåŠ¡å‡ºç°é—®é¢˜æˆ–è€…ç½‘ç»œè¶…æ—¶ï¼Œéƒ½ä¼šå½¢æˆå¯¼è‡´æ¥å£è°ƒç”¨å¤±è´¥ã€‚éšç€ä¸šåŠ¡çš„ä¸æ–­æ‰©å¼ ï¼ŒæœåŠ¡ä¹‹é—´äº’ç›¸è°ƒç”¨ä¼šè¶Šæ¥è¶Šå¤æ‚ã€‚ æœ¯è¯­ Spanï¼šåŸºæœ¬å·¥ä½œå•å…ƒï¼Œä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæ–°å»ºçš„spanä¸­å‘é€ä¸€ä¸ªRPCç­‰åŒäºå‘é€ä¸€ä¸ªå›åº”è¯·æ±‚ç»™RPCï¼Œspané€šè¿‡ä¸€ä¸ª64ä½IDå”¯ä¸€æ ‡è¯†ï¼Œtraceä»¥å¦ä¸€ä¸ª64ä½IDè¡¨ç¤ºï¼Œspanè¿˜æœ‰å…¶ä»–æ•°æ®ä¿¡æ¯ï¼Œæ¯”å¦‚æ‘˜è¦ã€æ—¶é—´æˆ³äº‹ä»¶ã€å…³é”®å€¼æ³¨é‡Š(tags)ã€spançš„IDã€ä»¥åŠè¿›åº¦ID(é€šå¸¸æ˜¯IPåœ°å€) spanåœ¨ä¸æ–­çš„å¯åŠ¨å’Œåœæ­¢ï¼ŒåŒæ—¶è®°å½•äº†æ—¶é—´ä¿¡æ¯ï¼Œå½“ä½ åˆ›å»ºäº†ä¸€ä¸ªspanï¼Œä½ å¿…é¡»åœ¨æœªæ¥çš„æŸä¸ªæ—¶åˆ»åœæ­¢å®ƒã€‚ Traceï¼šä¸€ç³»åˆ—spansç»„æˆçš„ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨è·‘ä¸€ä¸ªåˆ†å¸ƒå¼å¤§æ•°æ®å·¥ç¨‹ï¼Œä½ å¯èƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªtraceã€‚ Annotationï¼šç”¨æ¥åŠæ—¶è®°å½•ä¸€ä¸ªäº‹ä»¶çš„å­˜åœ¨ï¼Œä¸€äº›æ ¸å¿ƒannotationsç”¨æ¥å®šä¹‰ä¸€ä¸ªè¯·æ±‚çš„å¼€å§‹å’Œç»“æŸ cs - Client Sent -å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œè¿™ä¸ªannotionæè¿°äº†è¿™ä¸ªspançš„å¼€å§‹ sr - Server Received -æœåŠ¡ç«¯è·å¾—è¯·æ±‚å¹¶å‡†å¤‡å¼€å§‹å¤„ç†å®ƒï¼Œå¦‚æœå°†å…¶srå‡å»csæ—¶é—´æˆ³ä¾¿å¯å¾—åˆ°ç½‘ç»œå»¶è¿Ÿ ss - Server Sent -æ³¨è§£è¡¨æ˜è¯·æ±‚å¤„ç†çš„å®Œæˆ(å½“è¯·æ±‚è¿”å›å®¢æˆ·ç«¯)ï¼Œå¦‚æœsså‡å»sræ—¶é—´æˆ³ä¾¿å¯å¾—åˆ°æœåŠ¡ç«¯éœ€è¦çš„å¤„ç†è¯·æ±‚æ—¶é—´ cr - Client Received -è¡¨æ˜spançš„ç»“æŸï¼Œå®¢æˆ·ç«¯æˆåŠŸæ¥æ”¶åˆ°æœåŠ¡ç«¯çš„å›å¤ï¼Œå¦‚æœcrå‡å»csæ—¶é—´æˆ³ä¾¿å¯å¾—åˆ°å®¢æˆ·ç«¯ä»æœåŠ¡ç«¯è·å–å›å¤çš„æ‰€æœ‰æ‰€éœ€æ—¶é—´ å°†Spanå’ŒTraceåœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ä½¿ç”¨Zipkinæ³¨è§£çš„è¿‡ç¨‹å›¾å½¢åŒ–ï¼š 18.é«˜å¯ç”¨çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒ â€‹ æœåŠ¡æ³¨å†Œä¸­å¿ƒEureka Serverï¼Œæ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå½“æˆåƒä¸Šä¸‡ä¸ªæœåŠ¡å‘å®ƒæ³¨å†Œçš„æ—¶å€™ï¼Œå®ƒçš„è´Ÿè½½æ˜¯éå¸¸é«˜çš„ï¼Œè¿™åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šæ˜¯ä¸å¤ªåˆé€‚çš„ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»æ€ä¹ˆå°†Eureka Serveré›†ç¾¤åŒ–ã€‚Eurekaé€šè¿‡è¿è¡Œå¤šä¸ªå®ä¾‹ï¼Œä½¿å…¶æ›´å…·æœ‰é«˜å¯ç”¨æ€§ã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯å®ƒé»˜è®¤çš„ç†Ÿæ€§ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯ç»™å¯¹ç­‰çš„å®ä¾‹ä¸€ä¸ªåˆæ³•çš„å…³è”serviceurlã€‚ å‚è€ƒæ–‡çŒ®ï¼šé»‘é©¬è¯¾ç¨‹ç¬”è®°ï¼Œæ–¹å¿—æœ‹çš„åšå®¢","link":"/2021/02/25/Draft/2021/MyBatis/"},{"title":"SpringCloud","text":"æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘å¾®æœåŠ¡ï¼Œä¸»æµ WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘eurekaæ³¨å†Œä¸­å¿ƒï¼ŒGatewayç½‘å…³ï¼ŒRibbonè´Ÿè½½å‡è¡¡ï¼ŒFeignæœåŠ¡è°ƒç”¨ï¼ŒHystrixç†”æ–­å™¨ç­‰ï¼Œspringcloudalibaba HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘:bilibiliï¼Œå®˜ç½‘ LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘å½“å‰é˜¶æ®µç†Ÿç»ƒè¿ç”¨ Spring Cloud ã€Hoxtonã€‘ ç®€ä»‹ 1. ç³»ç»Ÿæ¶æ„æ¼”å˜ éšç€äº’è”ç½‘çš„å‘å±•ï¼Œç½‘ç«™åº”ç”¨çš„è§„æ¨¡ä¸æ–­æ‰©å¤§ã€‚éœ€æ±‚çš„æ¿€å¢ï¼Œå¸¦æ¥çš„æ˜¯æŠ€æœ¯ä¸Šçš„å‹åŠ›ã€‚ç³»ç»Ÿæ¶æ„ä¹Ÿå› æ­¤ä¹Ÿä¸æ–­çš„æ¼” è¿›ã€å‡çº§ã€è¿­ä»£ã€‚ä»å•ä¸€åº”ç”¨ï¼Œåˆ°å‚ç›´æ‹†åˆ†ï¼Œåˆ°åˆ†å¸ƒå¼æœåŠ¡ï¼Œåˆ°SOAï¼Œä»¥åŠç°åœ¨ç«çƒ­çš„å¾®æœåŠ¡æ¶æ„ï¼Œè¿˜æœ‰åœ¨Google å¸¦é¢†ä¸‹æ¥åŠ¿æ±¹æ¶Œçš„Service Meshã€‚ 1.1. é›†ä¸­å¼æ¶æ„ å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚ ä¼˜ç‚¹ï¼š ç³»ç»Ÿå¼€å‘é€Ÿåº¦å¿« ç»´æŠ¤æˆæœ¬ä½ é€‚ç”¨äºå¹¶å‘è¦æ±‚è¾ƒä½çš„ç³»ç»Ÿ ç¼ºç‚¹ï¼š ä»£ç è€¦åˆåº¦é«˜ï¼ŒåæœŸç»´æŠ¤å›°éš¾ æ— æ³•é’ˆå¯¹ä¸åŒæ¨¡å—è¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ– æ— æ³•æ°´å¹³æ‰©å±• å•ç‚¹å®¹é”™ç‡ä½ï¼Œå¹¶å‘èƒ½åŠ›å·® 1.2. å‚ç›´æ‹†åˆ† â€‹ å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæ­¤æ—¶ä¸ºäº†åº”å¯¹æ›´é«˜çš„å¹¶å‘å’Œä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬æ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿè¿›è¡Œæ‹† åˆ†ï¼š ä¼˜ç‚¹ï¼š ç³»ç»Ÿæ‹†åˆ†å®ç°äº†æµé‡åˆ†æ‹…ï¼Œè§£å†³äº†å¹¶å‘é—®é¢˜ å¯ä»¥é’ˆå¯¹ä¸åŒæ¨¡å—è¿›è¡Œä¼˜åŒ– æ–¹ä¾¿æ°´å¹³æ‰©å±•ï¼Œè´Ÿè½½å‡è¡¡ï¼Œå®¹é”™ç‡æé«˜ ç¼ºç‚¹ï¼š ç³»ç»Ÿé—´ç›¸äº’ç‹¬ç«‹ï¼Œä¼šæœ‰å¾ˆå¤šé‡å¤å¼€å‘å·¥ä½œï¼Œå½±å“å¼€å‘æ•ˆç‡ 1.3. åˆ†å¸ƒå¼æœåŠ¡ â€‹ å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚ ä¼˜ç‚¹ï¼š å°†åŸºç¡€æœåŠ¡è¿›è¡Œäº†æŠ½å–ï¼Œç³»ç»Ÿé—´ç›¸äº’è°ƒç”¨ï¼Œæé«˜äº†ä»£ç å¤ç”¨å’Œå¼€å‘æ•ˆç‡ ç¼ºç‚¹ï¼š ç³»ç»Ÿé—´è€¦åˆåº¦å˜é«˜ï¼Œè°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤ 1.4. é¢å‘æœåŠ¡æ¶æ„ï¼ˆSOAï¼‰ â€‹ SOAï¼ˆService Oriented Architectureï¼‰é¢å‘æœåŠ¡çš„æ¶æ„ï¼šå®ƒæ˜¯ä¸€ç§è®¾è®¡æ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«å¤šä¸ªæœåŠ¡ï¼Œ æœåŠ¡ä¹‹é—´é€šè¿‡ç›¸äº’ä¾èµ–æœ€ç»ˆæä¾›ä¸€ç³»åˆ—çš„åŠŸèƒ½ã€‚ä¸€ä¸ªæœåŠ¡ é€šå¸¸ä»¥ç‹¬ç«‹çš„å½¢å¼å­˜åœ¨ä¸æ“ä½œç³»ç»Ÿè¿›ç¨‹ä¸­ã€‚å„ä¸ªæœåŠ¡ä¹‹é—´ é€šè¿‡ç½‘ç»œè°ƒç”¨ã€‚SOAç»“æ„å›¾ï¼š ESBï¼ˆä¼ä¸šæœåŠ¡æ€»çº¿ï¼‰ï¼Œç®€å• æ¥è¯´ ESB å°±æ˜¯ä¸€æ ¹ç®¡é“ï¼Œç”¨æ¥è¿æ¥å„ä¸ªæœåŠ¡èŠ‚ç‚¹ã€‚ä¸ºäº†é›† æˆä¸åŒç³»ç»Ÿï¼Œä¸åŒåè®®çš„æœåŠ¡ï¼ŒESB åšäº†æ¶ˆæ¯çš„è½¬åŒ–è§£é‡Šå’Œè·¯ç”±å·¥ä½œï¼Œè®©ä¸åŒçš„æœåŠ¡äº’è”äº’é€šã€‚ SOAç¼ºç‚¹ï¼šæ¯ä¸ªä¾›åº”å•†æä¾›çš„ESBäº§å“æœ‰åå·®ï¼Œè‡ªèº«å®ç°è¾ƒä¸ºå¤æ‚ï¼›åº”ç”¨æœåŠ¡ç²’åº¦è¾ƒå¤§ï¼ŒESBé›†æˆæ•´åˆæ‰€æœ‰æœåŠ¡å’Œå è®®ã€æ•°æ®è½¬æ¢ä½¿å¾—è¿ç»´ã€æµ‹è¯•éƒ¨ç½²å›°éš¾ã€‚æ‰€æœ‰æœåŠ¡éƒ½é€šè¿‡ä¸€ä¸ªé€šè·¯é€šä¿¡ï¼Œç›´æ¥é™ä½äº†é€šä¿¡é€Ÿåº¦ã€‚ 1.5. å¾®æœåŠ¡æ¶æ„ â€‹ å¾®æœåŠ¡æ¶æ„æ˜¯ä½¿ç”¨ä¸€å¥—å°æœåŠ¡æ¥å¼€å‘å•ä¸ªåº”ç”¨çš„æ–¹å¼æˆ–é€”å¾„ï¼Œæ¯ä¸ªæœåŠ¡åŸºäºå•ä¸€ä¸šåŠ¡èƒ½åŠ›æ„å»ºï¼Œè¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼Œå¹¶ä½¿ç”¨è½»é‡çº§æœºåˆ¶é€šä¿¡ï¼Œé€šå¸¸æ˜¯HTTP APIï¼Œå¹¶èƒ½å¤Ÿé€šè¿‡è‡ªåŠ¨åŒ–éƒ¨ç½²æœºåˆ¶æ¥ç‹¬ç«‹éƒ¨ç½²ã€‚è¿™äº›æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å®ç°ï¼Œä»¥åŠä¸åŒæ•°æ®å­˜å‚¨æŠ€æœ¯ï¼Œå¹¶ä¿æŒæœ€ä½é™åº¦çš„é›†ä¸­å¼ç®¡ç†ã€‚å¾®æœåŠ¡ç»“æ„å›¾ï¼š API Gatewayç½‘å…³æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæ˜¯ç³»ç»Ÿçš„å”¯ä¸€å…¥å£ã€‚ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯æä¾›ä¸€ä¸ªå®šåˆ¶çš„APIã€‚APIç½‘å…³æ ¸å¿ƒæ˜¯ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯å’Œæ¶ˆè´¹ç«¯éƒ½é€šè¿‡ç»Ÿä¸€çš„ç½‘å…³æ¥å…¥å¾®æœåŠ¡ï¼Œåœ¨ç½‘å…³å±‚å¤„ç†æ‰€æœ‰çš„éä¸šåŠ¡åŠŸèƒ½ã€‚å¦‚å®ƒè¿˜å¯ä»¥å…·æœ‰å…¶å®ƒèŒè´£ï¼Œå¦‚èº«ä»½éªŒè¯ã€ç›‘æ§ã€è´Ÿè½½å‡è¡¡ã€ç¼“å­˜ã€è¯·æ±‚åˆ†ç‰‡ä¸ç®¡ç†ã€é™æ€å“åº”å¤„ç†ã€‚é€šå¸¸ï¼Œç½‘å…³æä¾›RESTful/HTTPçš„æ–¹å¼è®¿é—®æœåŠ¡ã€‚è€ŒæœåŠ¡ç«¯é€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæœåŠ¡æ³¨å†Œå’Œç®¡ç†ã€‚ å¾®æœåŠ¡çš„ç‰¹ç‚¹ï¼š å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡ä¸­æ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œåšåˆ°å•ä¸€èŒè´£ å¾®ï¼šå¾®æœåŠ¡çš„æœåŠ¡æ‹†åˆ†ç²’åº¦å¾ˆå°ï¼Œä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·ç®¡ç†å°±å¯ä»¥ä½œä¸ºä¸€ä¸ªæœåŠ¡ã€‚æ¯ä¸ªæœåŠ¡è™½å°ï¼Œä½†â€œäº”è„ä¿±å…¨â€ã€‚ é¢å‘æœåŠ¡ï¼šé¢å‘æœåŠ¡æ˜¯è¯´æ¯ä¸ªæœåŠ¡éƒ½è¦å¯¹å¤–æš´éœ²Resté£æ ¼æœåŠ¡æ¥å£APIã€‚å¹¶ä¸å…³å¿ƒæœåŠ¡çš„æŠ€æœ¯å®ç°ï¼Œåšåˆ°ä¸å¹³å°å’Œè¯­è¨€æ— å…³ï¼Œä¹Ÿä¸é™å®šç”¨ä»€ä¹ˆæŠ€æœ¯å®ç°ï¼Œåªè¦æä¾›Restçš„æ¥å£å³å¯ã€‚ è‡ªæ²»ï¼šè‡ªæ²»æ˜¯è¯´æœåŠ¡é—´äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰° å›¢é˜Ÿç‹¬ç«‹ï¼šæ¯ä¸ªæœåŠ¡éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼€å‘å›¢é˜Ÿï¼Œäººæ•°ä¸èƒ½è¿‡å¤šã€‚ æŠ€æœ¯ç‹¬ç«‹ï¼šå› ä¸ºæ˜¯é¢å‘æœåŠ¡ï¼Œæä¾›Restæ¥å£ï¼Œä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ²¡æœ‰åˆ«äººå¹²æ¶‰ å‰åç«¯åˆ†ç¦»ï¼šé‡‡ç”¨å‰åç«¯åˆ†ç¦»å¼€å‘ï¼Œæä¾›ç»Ÿä¸€Restæ¥å£ï¼Œåç«¯ä¸ç”¨å†ä¸ºPCã€ç§»åŠ¨ç«¯å¼€å‘ä¸åŒæ¥å£ æ•°æ®åº“åˆ†ç¦»ï¼šæ¯ä¸ªæœåŠ¡éƒ½ä½¿ç”¨è‡ªå·±çš„æ•°æ®æº éƒ¨ç½²ç‹¬ç«‹ï¼šæœåŠ¡é—´è™½ç„¶æœ‰è°ƒç”¨ï¼Œä½†è¦åšåˆ°æœåŠ¡é‡å¯ä¸å½±å“å…¶å®ƒæœåŠ¡ã€‚æœ‰åˆ©äºæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ã€‚æ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¯å¤ç”¨ï¼Œå¯æ›¿æ¢ï¼Œé™ä½è€¦åˆï¼Œæ˜“ç»´æŠ¤ å¾®æœåŠ¡æ¶æ„ä¸SOAéƒ½æ˜¯å¯¹ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ï¼›å¾®æœåŠ¡æ¶æ„åŸºäºSOAæ€æƒ³ï¼Œå¯ä»¥æŠŠå¾®æœåŠ¡å½“åšå»é™¤äº†ESBçš„SOAã€‚ESBæ˜¯SOAæ¶æ„ä¸­çš„ä¸­å¿ƒæ€»çº¿ï¼Œè®¾è®¡å›¾å½¢åº”è¯¥æ˜¯æ˜Ÿå½¢çš„ï¼Œè€Œå¾®æœåŠ¡æ˜¯å»ä¸­å¿ƒåŒ–çš„åˆ†å¸ƒå¼è½¯ä»¶æ¶æ„ã€‚ä¸¤è€…æ¯”è¾ƒç±»ä¼¼ï¼Œä½†å…¶å®ä¹Ÿæœ‰ä¸€äº›å·®åˆ«ï¼š 2. æœåŠ¡è°ƒç”¨æ–¹å¼ 2.1. RPCå’ŒHTTP æ— è®ºæ˜¯å¾®æœåŠ¡è¿˜æ˜¯SOAï¼Œéƒ½é¢ä¸´ç€æœåŠ¡é—´çš„è¿œç¨‹è°ƒç”¨ã€‚é‚£ä¹ˆæœåŠ¡é—´çš„è¿œç¨‹è°ƒç”¨æ–¹å¼æœ‰å“ªäº›å‘¢ï¼Ÿ å¸¸è§çš„è¿œç¨‹è°ƒç”¨æ–¹å¼æœ‰ä»¥ä¸‹2ç§ï¼š RPCï¼šRemote Produce Callè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ŒRPCåŸºäºSocketï¼Œå·¥ä½œåœ¨ä¼šè¯å±‚ã€‚è‡ªå®šä¹‰æ•°æ®æ ¼å¼ï¼Œé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ã€‚æ—©æœŸçš„webserviceï¼Œç°åœ¨çƒ­é—¨çš„dubboï¼Œéƒ½æ˜¯RPCçš„å…¸å‹ä»£è¡¨ Httpï¼šhttpå…¶å®æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼ŒåŸºäºTCPï¼Œå·¥ä½œåœ¨åº”ç”¨å±‚ï¼Œè§„å®šäº†æ•°æ®ä¼ è¾“çš„æ ¼å¼ã€‚ç°åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸æœåŠ¡ç«¯é€šä¿¡åŸºæœ¬éƒ½æ˜¯é‡‡ç”¨Httpåè®®ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œè¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚ç¼ºç‚¹æ˜¯æ¶ˆæ¯å°è£…è‡ƒè‚¿ï¼Œä¼˜åŠ¿æ˜¯å¯¹æœåŠ¡çš„æä¾›å’Œè°ƒç”¨æ–¹æ²¡æœ‰ä»»ä½•æŠ€æœ¯é™å®šï¼Œè‡ªç”±çµæ´»ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡ç†å¿µã€‚ ç°åœ¨çƒ­é—¨çš„Resté£æ ¼ï¼Œå°±å¯ä»¥é€šè¿‡httpåè®®æ¥å®ç°ã€‚ åŒºåˆ«ï¼šRPCçš„æœºåˆ¶æ˜¯æ ¹æ®è¯­è¨€çš„APIï¼ˆlanguage APIï¼‰æ¥å®šä¹‰çš„ï¼Œè€Œä¸æ˜¯æ ¹æ®åŸºäºç½‘ç»œçš„åº”ç”¨æ¥å®šä¹‰çš„ã€‚ å¦‚æœä½ ä»¬å…¬å¸å…¨éƒ¨é‡‡ç”¨JavaæŠ€æœ¯æ ˆï¼Œé‚£ä¹ˆä½¿ç”¨Dubboä½œä¸ºå¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ ç›¸åï¼Œå¦‚æœå…¬å¸çš„æŠ€æœ¯æ ˆå¤šæ ·åŒ–ï¼Œè€Œä¸”ä½ æ›´é’çSpringå®¶æ—ï¼Œé‚£ä¹ˆSpring Cloudæ­å»ºå¾®æœåŠ¡æ˜¯ä¸äºŒä¹‹é€‰ã€‚åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œä¼šé€‰æ‹©Spring Cloudå¥—ä»¶ï¼Œå› æ­¤ä¼šä½¿ç”¨Httpæ–¹å¼æ¥å®ç°æœåŠ¡é—´è°ƒç”¨ã€‚ 2.2. Httpå®¢æˆ·ç«¯å·¥å…· æ—¢ç„¶å¾®æœåŠ¡é€‰æ‹©äº†Httpï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è€ƒè™‘è‡ªå·±æ¥å®ç°å¯¹è¯·æ±‚å’Œå“åº”çš„å¤„ç†ã€‚ä¸è¿‡å¼€æºä¸–ç•Œå·²ç»æœ‰å¾ˆå¤šçš„httpå®¢æˆ·ç«¯å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åšè¿™äº›äº‹æƒ…ï¼Œä¾‹å¦‚ï¼š HttpClient OKHttp URLConnection ä¸è¿‡è¿™äº›ä¸åŒçš„å®¢æˆ·ç«¯ï¼ŒAPIå„ä¸ç›¸åŒã€‚è€ŒSpringä¹Ÿæœ‰å¯¹httpçš„å®¢æˆ·ç«¯è¿›è¡Œå°è£…ï¼Œæä¾›äº†å·¥å…·ç±»å«RestTemplateã€‚ 2.3. Springçš„RestTemplate Springæä¾›äº†ä¸€ä¸ªRestTemplateæ¨¡æ¿å·¥å…·ç±»ï¼Œå¯¹åŸºäºHttpçš„å®¢æˆ·ç«¯è¿›è¡Œäº†å°è£…ï¼Œå¹¶ä¸”å®ç°äº†å¯¹è±¡ä¸jsonçš„åºåˆ—åŒ–å’Œ ååºåˆ—åŒ–ï¼Œéå¸¸æ–¹ä¾¿ã€‚RestTemplateå¹¶æ²¡æœ‰é™å®šHttpçš„å®¢æˆ·ç«¯ç±»å‹ï¼Œè€Œæ˜¯è¿›è¡Œäº†æŠ½è±¡ï¼Œç›®å‰å¸¸ç”¨çš„3ç§éƒ½æœ‰æ”¯æŒï¼š HttpClient OkHttp JDKåŸç”Ÿçš„URLConnectionï¼ˆé»˜è®¤çš„ï¼‰ 3.Springcloudç»¼è¿° ç‰ˆæœ¬å‘½åï¼šä¼¦æ•¦åœ°é“ç«™å­—æ¯é¡ºåº å®éªŒç¯å¢ƒ åœæ›´ã€å‡çº§ã€æ›¿æ¢ çˆ¶å·¥ç¨‹åˆ›å»º åˆ›å»ºå·¥ç¨‹å‰å‡†å¤‡ çº¦å®šã€‹é…ç½®ã€‹ç¼–ç  ç¼–ç UTF-8å…¨å¥— ä½œç”¨ æ³¨è§£ç”Ÿæ•ˆæ¿€æ´» ä½œç”¨ JAVAç¼–è¯‘ç‰ˆæœ¬ æ–‡ä»¶è¿‡æ»¤ ä½œç”¨ï¼Œå…³é—­å¯¹åº”æ–‡ä»¶ideaå¯è§ Eurekaã€å¤§æ¥¼è€æ¿ã€‘ Spring Cloud [Finchley] â€‹ ä¸€ç³»åˆ—æ¡†æ¶æœ‰åºé›†åˆï¼Œå°è£…åå±è”½äº†å¤æ‚çš„é…ç½®å’Œå®ç°åŸç†ã€‚Spring Cloudä¸ºå¼€å‘äººå‘˜æä¾›äº†å·¥å…·ï¼Œä»¥å¿«é€Ÿæ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸€äº›å¸¸è§æ¨¡å¼ï¼ˆä¾‹å¦‚ï¼Œé…ç½®ç®¡ç†ï¼ŒæœåŠ¡å‘ç°ï¼Œæ–­è·¯å™¨ï¼Œæ™ºèƒ½è·¯ç”±ï¼Œå¾®ä»£ç†ï¼Œæ§åˆ¶æ€»çº¿ï¼Œä¸€æ¬¡æ€§ä»¤ç‰Œï¼Œå…¨å±€é”ï¼Œé¢†å¯¼é€‰ä¸¾ï¼Œåˆ†å¸ƒå¼ä¼šè¯ï¼Œç¾¤é›†çŠ¶æ€ï¼‰ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„åè°ƒå¯¼è‡´æ ·æ¿å¼æ ·ï¼Œå¹¶ä¸”ä½¿ç”¨Spring Cloudå¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿç«™èµ·æ¥å®ç°è¿™äº›æ ·æ¿çš„æœåŠ¡å’Œåº”ç”¨ç¨‹åºã€‚å®ƒä»¬å°†åœ¨ä»»ä½•åˆ†å¸ƒå¼ç¯å¢ƒä¸­éƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼ŒåŒ…æ‹¬å¼€å‘äººå‘˜è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œè£¸æœºæ•°æ®ä¸­å¿ƒä»¥åŠè¯¸å¦‚Cloud Foundryä¹‹ç±»çš„æ‰˜ç®¡å¹³å°ã€‚ 1.ç³»ç»Ÿæ¶æ„æ¼”å˜ graph LR; 1[é›†ä¸­å¼æ¶æ„] --> 2[å‚ç›´æ‹†åˆ†] 2 --> 3[åˆ†å¸ƒå¼æœåŠ¡] 3 --> 4[SOAé¢å‘æœåŠ¡æ¶æ„] 4 --> 5[å¾®æœåŠ¡æ¶æ„] å¾®æœåŠ¡æ¶æ„ ä¸€å¥—ä½¿ç”¨å°æœåŠ¡æˆ–è€…å•ä¸€ä¸šåŠ¡æ¥å¼€å‘å•ä¸ªåº”ç”¨çš„æ–¹å¼æˆ–é€”å¾„ã€‚ å¾®æœåŠ¡æ¶æ„ç‰¹ç‚¹ï¼š å•ä¸€èŒè´£ æœåŠ¡ç²’åº¦å° é¢å‘æœåŠ¡ï¼ˆå¯¹å¤–æš´éœ²REST apiï¼‰ æœåŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹ ä¸ä½¿ç”¨ESBçš„SOAæ¶æ„çš„åŒºåˆ«ï¼š å¾®æœåŠ¡æ¶æ„æ²¡æœ‰ä½¿ç”¨ESBï¼Œæœ‰æœåŠ¡æ²»ç†æ³¨å†Œä¸­å¿ƒï¼›ä¸šåŠ¡ç²’åº¦å°ã€‚ 2.æœåŠ¡è°ƒç”¨æ–¹å¼ RPCï¼šåŸºäºsocketï¼Œé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ï¼›webserviceã€dubbo HTTPï¼šåŸºäºTCPï¼Œå°è£…æ¯”è¾ƒè‡ƒè‚¿ï¼›å¯¹æœåŠ¡å’Œè°ƒç”¨æ–¹æ²¡æœ‰ä»»ä½•æŠ€æœ¯ã€è¯­è¨€çš„é™å®šï¼Œè‡ªç”±çµæ´»ï¼›RESTfulï¼ŒSpring Cloud ä¸€èˆ¬æƒ…å†µä¸‹æœ‰å¦‚ä¸‹ä¸‰ç§httpå®¢æˆ·ç«¯å·¥å…·ç±»åŒ…éƒ½å¯ä»¥æ–¹ä¾¿çš„è¿›è¡ŒhttpæœåŠ¡è°ƒç”¨ï¼š httpClient okHttp JDKåŸç”ŸURLConnection spring æä¾›äº†RestTemplateçš„å·¥å…·ç±»å¯¹ä¸Šè¿°çš„3ç§httpå®¢æˆ·ç«¯å·¥å…·ç±»è¿›è¡Œäº†å°è£…ï¼Œå¯åœ¨springé¡¹ç›®ä¸­ä½¿ç”¨RestTemplateè¿›è¡ŒæœåŠ¡è°ƒç”¨ã€‚ å°ç»“ï¼š 12345678910111213141516@RunWith(SpringRunner.class)@SpringBootTestpublic class RestTemplateTest { @Autowired private RestTemplate restTemplate; @Test public void test(){ String url = &quot;http://localhost/user/8&quot;; //restTemplateå¯ä»¥å¯¹jsonæ ¼å¼å­—ç¬¦ä¸²è¿›è¡Œååºåˆ—åŒ– User user = restTemplate.getForObject(url, User.class); System.out.println(user); }} 3.SpringCloudæ¦‚è¿° æ•´åˆçš„ç»„ä»¶å¯ä»¥æœ‰å¾ˆå¤šç»„ä»¶ï¼›å¸¸è§çš„ç»„ä»¶æœ‰ï¼šeurekaæ³¨å†Œä¸­å¿ƒï¼ŒGatewayç½‘å…³ï¼ŒRibbonè´Ÿè½½å‡è¡¡ï¼ŒFeignæœåŠ¡è°ƒç”¨ï¼ŒHystrixç†”æ–­å™¨ã€‚åœ¨æœ‰éœ€è¦çš„æ—¶å€™é¡¹ç›®æ·»åŠ å¯¹äºçš„å¯åŠ¨å™¨ä¾èµ–å³å¯ã€‚ ç‰ˆæœ¬ç‰¹å¾ï¼šä»¥è‹±æ–‡å•è¯å‘½åï¼ˆä¼¦æ•¦åœ°é“ç«™åï¼‰ 4.åˆ›å»ºå¾®æœåŠ¡å·¥ç¨‹ çˆ¶å·¥ç¨‹springcloudï¼šæ·»åŠ spring bootçˆ¶åæ ‡å’Œç®¡ç†å…¶å®ƒç»„ä»¶çš„ä¾èµ– ç”¨æˆ·æœåŠ¡å·¥ç¨‹user-serviceï¼šæ•´åˆmybatisæŸ¥è¯¢æ•°æ®åº“ä¸­ç”¨æˆ·æ•°æ®ï¼›æä¾›æŸ¥è¯¢ç”¨æˆ·æœåŠ¡ æœåŠ¡æ¶ˆè´¹å·¥ç¨‹consumer-demoï¼šåˆ©ç”¨æŸ¥è¯¢ç”¨æˆ·æœåŠ¡è·å–ç”¨æˆ·æ•°æ®å¹¶è¾“å‡ºåˆ°æµè§ˆå™¨ 5.æ­å»ºé…ç½®Serviceå·¥ç¨‹ æ·»åŠ å¯åŠ¨å™¨ä¾èµ–ï¼ˆwebã€é€šç”¨Mapperï¼‰ï¼› åˆ›å»ºå¯åŠ¨å¼•å¯¼ç±»å’Œé…ç½®æ–‡ä»¶ï¼› ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°ï¼› ç¼–å†™æµ‹è¯•ä»£ç ï¼ˆUserMapperï¼ŒUserServiceï¼ŒUserControllerï¼‰ï¼› æµ‹è¯• 6.æ­å»ºé…ç½®Clientå·¥ç¨‹ æ·»åŠ å¯åŠ¨å™¨ä¾èµ–ï¼› åˆ›å»ºå¯åŠ¨å¼•å¯¼ç±»ï¼ˆæ³¨å†ŒRestTemplateï¼‰å’Œé…ç½®æ–‡ä»¶ï¼› ç¼–å†™æµ‹è¯•ä»£ç ï¼ˆConsumerControllerä¸­ä½¿ç”¨restTemplateè®¿é—®æœåŠ¡è·å–æ•°æ®ï¼‰ æµ‹è¯• 7.é—®é¢˜ æœåŠ¡ç®¡ç† å¦‚ä½•è‡ªåŠ¨æ³¨å†Œå’Œå‘ç° å¦‚ä½•å®ç°çŠ¶æ€ç›‘ç®¡ å¦‚ä½•å®ç°åŠ¨æ€è·¯ç”± æœåŠ¡å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡ æœåŠ¡å¦‚ä½•è§£å†³å®¹ç¾é—®é¢˜ æœåŠ¡å¦‚ä½•å®ç°ç»Ÿä¸€é…ç½® ä¸Šè¿°é—®é¢˜é€šè¿‡springcloudå„ç§ç»„ä»¶è§£å†³ 8.Eureka Eurekaçš„ä¸»è¦åŠŸèƒ½æ˜¯è¿›è¡ŒæœåŠ¡ç®¡ç†ï¼Œå®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼Œè¿”å›æœåŠ¡åœ°å€åˆ—è¡¨ã€‚ 8.1Eureka-server Eurekaæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒåªåšæœåŠ¡æ³¨å†Œï¼›è‡ªèº«å¹¶ä¸æä¾›æœåŠ¡ä¹Ÿä¸æ¶ˆè´¹æœåŠ¡ã€‚å¯ä»¥æ­å»ºwebå·¥ç¨‹ä½¿ç”¨Eurekaï¼Œå¯ä»¥ä½¿ç”¨Spring Bootæ–¹å¼æ­å»ºã€‚ æ­å»ºæ­¥éª¤ï¼š åˆ›å»ºå·¥ç¨‹ï¼› æ·»åŠ å¯åŠ¨å™¨ä¾èµ–ï¼› ç¼–å†™å¯åŠ¨å¼•å¯¼ç±»ï¼ˆæ·»åŠ Eurekaçš„æœåŠ¡æ³¨è§£ï¼‰å’Œé…ç½®æ–‡ä»¶ï¼› ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆç«¯å£ï¼Œåº”ç”¨åç§°...ï¼‰ï¼› å¯åŠ¨æµ‹è¯• 8.2æœåŠ¡æ³¨å†Œä¸å‘ç° æœåŠ¡æ³¨å†Œï¼šåœ¨æœåŠ¡æä¾›å·¥ç¨‹user-serviceä¸Šæ·»åŠ Eurekaå®¢æˆ·ç«¯ä¾èµ–ï¼›è‡ªåŠ¨å°†æœåŠ¡æ³¨å†Œåˆ°EurekaServeræœåŠ¡åœ°å€åˆ—è¡¨ã€‚ æ·»åŠ ä¾èµ–ï¼› æ”¹é€ å¯åŠ¨å¼•å¯¼ç±»ï¼›æ·»åŠ å¼€å¯Eurekaå®¢æˆ·ç«¯å‘ç°çš„æ³¨è§£ï¼› ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼›è®¾ç½®Eureka æœåŠ¡åœ°å€ æœåŠ¡å‘ç°ï¼šåœ¨æœåŠ¡æ¶ˆè´¹å·¥ç¨‹consumer-demoä¸Šæ·»åŠ Eurekaå®¢æˆ·ç«¯ä¾èµ–ï¼›å¯ä»¥ä½¿ç”¨å·¥å…·ç±»æ ¹æ®æœåŠ¡åç§°è·å–å¯¹åº”çš„æœåŠ¡åœ°å€åˆ—è¡¨ã€‚ æ·»åŠ ä¾èµ–ï¼› æ”¹é€ å¯åŠ¨å¼•å¯¼ç±»ï¼›æ·»åŠ å¼€å¯Eurekaå®¢æˆ·ç«¯å‘ç°çš„æ³¨è§£ï¼› ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼›è®¾ç½®Eureka æœåŠ¡åœ°å€ï¼› æ”¹é€ å¤„ç†å™¨ç±»Controllerï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·ç±»DiscoveryClientæ ¹æ®æœåŠ¡åç§°è·å–å¯¹åº”æœåŠ¡åœ°å€åˆ—è¡¨ã€‚ 8.3é«˜å¯ç”¨é…ç½® â€‹ å°†Eureka Serverä½œä¸ºä¸€ä¸ªæœåŠ¡æ³¨å†Œåˆ°å…¶å®ƒEureka Serverï¼Œè¿™æ ·å¤šä¸ªEureka Serverä¹‹é—´å°±èƒ½å¤Ÿäº’ç›¸å‘ç°å¯¹æ–¹ï¼ŒåŒæ­¥æœåŠ¡ï¼Œå®ç°Eureka Serveré›†ç¾¤ã€‚ 9.è´Ÿè½½å‡è¡¡Ribbon Ribbonæä¾›äº†è½®è¯¢ã€éšæœºä¸¤ç§è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ˆé»˜è®¤æ˜¯è½®è¯¢ï¼‰å¯ä»¥å®ç°ä»åœ°å€åˆ—è¡¨ä¸­ä½¿ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•è·å–åœ°å€è¿›è¡ŒæœåŠ¡è°ƒç”¨ã€‚ 9.1Ribbonåº”ç”¨ åœ¨å®ä¾‹åŒ–RestTemplateçš„æ—¶å€™ä½¿ç”¨@LoadBalancedï¼ŒæœåŠ¡åœ°å€ç›´æ¥å¯ä»¥ä½¿ç”¨æœåŠ¡åã€‚ 10.ç†”æ–­å™¨Hystrixï¼ˆè±ªçŒªï¼‰ Hystrixæ˜¯ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œç”¨äºéš”ç¦»è®¿é—®è¿œç¨‹æœåŠ¡ï¼Œé˜²æ­¢å‡ºç°çº§è”å¤±è´¥ã€‚ 10.1çº¿ç¨‹éš”ç¦»&amp;æœåŠ¡é™çº§ Hystrixè§£å†³é›ªå´©æ•ˆåº”ï¼š çº¿ç¨‹éš”ç¦»ï¼šç”¨æˆ·è¯·æ±‚ä¸ç›´æ¥è®¿é—®æœåŠ¡ï¼Œè€Œæ˜¯ä½¿ç”¨çº¿ç¨‹æ± ä¸­ç©ºé—²çš„çº¿ç¨‹è®¿é—®æœåŠ¡ï¼ŒåŠ é€Ÿå¤±è´¥åˆ¤æ–­æ—¶é—´ã€‚ æœåŠ¡é™çº§ï¼šåŠæ—¶è¿”å›æœåŠ¡è°ƒç”¨å¤±è´¥çš„ç»“æœï¼Œè®©çº¿ç¨‹ä¸å› ä¸ºç­‰å¾…æœåŠ¡è€Œé˜»å¡ã€‚ å°ç»“ï¼š æ·»åŠ ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;&lt;/dependency&gt; å¼€å¯ç†”æ–­ é™çº§é€»è¾‘ 12345678910111213141516171819202122232425262728293031323334353637@RestController@RequestMapping(&quot;/consumer&quot;)@Slf4j@DefaultProperties(defaultFallback = &quot;defaultFallback&quot;)public class ConsumerController { @Autowired private RestTemplate restTemplate; @Autowired private DiscoveryClient discoveryClient; @GetMapping(&quot;/{id}&quot;) //@HystrixCommand(fallbackMethod = &quot;queryByIdFallback&quot;) @HystrixCommand public String queryById(@PathVariable Long id){ /*String url = &quot;http://localhost:9091/user/&quot;+id; //è·å–eurekaä¸­æ³¨å†Œçš„user-serviceçš„å®ä¾‹ List&lt;ServiceInstance&gt; serviceInstances = discoveryClient.getInstances(&quot;user-service&quot;); ServiceInstance serviceInstance = serviceInstances.get(0); url = &quot;http://&quot; + serviceInstance.getHost() + &quot;:&quot; + serviceInstance.getPort() + &quot;/user/&quot; + id;*/ String url = &quot;http://user-service/user/&quot; + id; return restTemplate.getForObject(url, String.class); } public String queryByIdFallback(Long id){ log.error(&quot;æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯å¤±è´¥ã€‚idï¼š{}&quot;, id); return &quot;å¯¹ä¸èµ·ï¼Œç½‘ç»œå¤ªæ‹¥æŒ¤äº†ï¼&quot;; } public String defaultFallback(){ return &quot;é»˜è®¤æç¤ºï¼šå¯¹ä¸èµ·ï¼Œç½‘ç»œå¤ªæ‹¥æŒ¤äº†ï¼&quot;; }} ä¿®æ”¹è¶…æ—¶é…ç½® 1234567hystrix: command: default: execution: isolation: thread: timeoutInMilliseconds: 2000 10.2æœåŠ¡ç†”æ–­ â€‹ åœ¨æœåŠ¡ç†”æ–­ä¸­ï¼Œä½¿ç”¨çš„ç†”æ–­å™¨ï¼Œä¹Ÿå«æ–­è·¯å™¨ï¼Œå…¶è‹±æ–‡å•è¯ä¸ºï¼šCircuit Breaker â€‹ ç†”æ–­æœºåˆ¶ä¸å®¶é‡Œä½¿ç”¨çš„ç”µè·¯ç†”æ–­åŸç†ç±»ä¼¼ï¼›å½“å¦‚æœç”µè·¯å‘ç”ŸçŸ­è·¯çš„æ—¶å€™èƒ½ç«‹åˆ»ç†”æ–­ç”µè·¯ï¼Œé¿å…å‘ç”Ÿç¾éš¾ã€‚åœ¨åˆ†å¸ƒå¼ç³» ç»Ÿä¸­åº”ç”¨æœåŠ¡ç†”æ–­åï¼›æœåŠ¡è°ƒç”¨æ–¹å¯ä»¥è‡ªå·±è¿›è¡Œåˆ¤æ–­å“ªäº›æœåŠ¡ååº”æ…¢æˆ–å­˜åœ¨å¤§é‡è¶…æ—¶ï¼Œå¯ä»¥é’ˆå¯¹è¿™äº›æœåŠ¡è¿›è¡Œä¸»åŠ¨ç†” æ–­ï¼Œé˜²æ­¢æ•´ä¸ªç³»ç»Ÿè¢«æ‹–å®ã€‚ â€‹ Hystrixçš„æœåŠ¡ç†”æ–­æœºåˆ¶ï¼Œå¯ä»¥å®ç°å¼¹æ€§å®¹é”™ï¼›å½“æœåŠ¡è¯·æ±‚æƒ…å†µå¥½è½¬ä¹‹åï¼Œå¯ä»¥è‡ªåŠ¨é‡è¿ã€‚é€šè¿‡æ–­è·¯çš„æ–¹å¼ï¼Œå°†åç»­ è¯·æ±‚ç›´æ¥æ‹’ç»ï¼Œä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤5ç§’ï¼‰ä¹‹åå…è®¸éƒ¨åˆ†è¯·æ±‚é€šè¿‡ï¼Œå¦‚æœè°ƒç”¨æˆåŠŸåˆ™å›åˆ°æ–­è·¯å™¨å…³é—­çŠ¶æ€ï¼Œå¦åˆ™ç»§ç»­æ‰“ å¼€ï¼Œæ‹’ç»è¯·æ±‚çš„æœåŠ¡ã€‚ Hystrixçš„ç†”æ–­çŠ¶æ€æœºæ¨¡å‹ï¼š çŠ¶æ€æœºæœ‰3ä¸ªçŠ¶æ€ï¼š Closedï¼šå…³é—­çŠ¶æ€ï¼ˆæ–­è·¯å™¨å…³é—­ï¼‰ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½æ­£å¸¸è®¿é—®ã€‚ Openï¼šæ‰“å¼€çŠ¶æ€ï¼ˆæ–­è·¯å™¨æ‰“å¼€ï¼‰ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«é™çº§ã€‚Hystrixä¼šå¯¹è¯·æ±‚æƒ…å†µè®¡æ•°ï¼Œå½“ä¸€å®šæ—¶é—´å†…å¤±è´¥è¯·æ±‚ç™¾ åˆ†æ¯”è¾¾åˆ°é˜ˆå€¼ï¼Œåˆ™è§¦å‘ç†”æ–­ï¼Œæ–­è·¯å™¨ä¼šå®Œå…¨æ‰“å¼€ã€‚é»˜è®¤å¤±è´¥æ¯”ä¾‹çš„é˜ˆå€¼æ˜¯50%ï¼Œè¯·æ±‚æ¬¡æ•°æœ€å°‘ä¸ä½äº20æ¬¡ã€‚ Half Openï¼šåŠå¼€çŠ¶æ€ï¼Œä¸æ˜¯æ°¸ä¹…çš„ï¼Œæ–­è·¯å™¨æ‰“å¼€åä¼šè¿›å…¥ä¼‘çœ æ—¶é—´ï¼ˆé»˜è®¤æ˜¯5Sï¼‰ã€‚éšåæ–­è·¯å™¨ä¼šè‡ªåŠ¨è¿›å…¥åŠå¼€ çŠ¶æ€ã€‚æ­¤æ—¶ä¼šé‡Šæ”¾éƒ¨åˆ†è¯·æ±‚é€šè¿‡ï¼Œè‹¥è¿™äº›è¯·æ±‚éƒ½æ˜¯å¥åº·çš„ï¼Œåˆ™ä¼šå…³é—­æ–­è·¯å™¨ï¼Œå¦åˆ™ç»§ç»­ä¿æŒæ‰“å¼€ï¼Œå†æ¬¡è¿›è¡Œä¼‘ çœ è®¡æ—¶ã€‚ 11.æœåŠ¡æ¶ˆè´¹è€…ï¼ˆFeignï¼‰ 11.1ç®€ä»‹ â€‹ Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„ä¼ªHttpå®¢æˆ·ç«¯ï¼Œå®ƒä½¿å¾—å†™Httpå®¢æˆ·ç«¯å˜å¾—æ›´ç®€å•ã€‚ä½¿ç”¨Feignï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶æ³¨è§£ã€‚å®ƒå…·æœ‰å¯æ’æ‹”çš„æ³¨è§£ç‰¹æ€§ï¼Œå¯ä½¿ç”¨Feign æ³¨è§£å’ŒJAX-RSæ³¨è§£ã€‚Feignæ”¯æŒå¯æ’æ‹”çš„ç¼–ç å™¨å’Œè§£ç å™¨ã€‚Feigné»˜è®¤é›†æˆäº†Ribbonï¼Œå¹¶å’ŒEurekaç»“åˆï¼Œé»˜è®¤å®ç°äº†è´Ÿè½½å‡è¡¡çš„æ•ˆæœã€‚ ç®€è€Œè¨€ä¹‹ï¼š Feign é‡‡ç”¨çš„æ˜¯åŸºäºæ¥å£çš„æ³¨è§£ Feign æ•´åˆäº†ribbonï¼Œå…·æœ‰è´Ÿè½½å‡è¡¡çš„èƒ½åŠ› æ•´åˆäº†Hystrixï¼Œå…·æœ‰ç†”æ–­çš„èƒ½åŠ› 12.æ–­è·¯å™¨ï¼ˆHystrixï¼‰ â€‹ åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ ¹æ®ä¸šåŠ¡æ¥æ‹†åˆ†æˆä¸€ä¸ªä¸ªçš„æœåŠ¡ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´å¯ä»¥ç›¸äº’è°ƒç”¨ï¼ˆRPCï¼‰ï¼Œåœ¨Spring Cloudå¯ä»¥ç”¨RestTemplate+Ribbonå’ŒFeignæ¥è°ƒç”¨ã€‚ä¸ºäº†ä¿è¯å…¶é«˜å¯ç”¨ï¼Œå•ä¸ªæœåŠ¡é€šå¸¸ä¼šé›†ç¾¤éƒ¨ç½²ã€‚ç”±äºç½‘ç»œåŸå› æˆ–è€…è‡ªèº«çš„åŸå› ï¼ŒæœåŠ¡å¹¶ä¸èƒ½ä¿è¯100%å¯ç”¨ï¼Œå¦‚æœå•ä¸ªæœåŠ¡å‡ºç°é—®é¢˜ï¼Œè°ƒç”¨è¿™ä¸ªæœåŠ¡å°±ä¼šå‡ºç°çº¿ç¨‹é˜»å¡ï¼Œæ­¤æ—¶è‹¥æœ‰å¤§é‡çš„è¯·æ±‚æ¶Œå…¥ï¼ŒServletå®¹å™¨çš„çº¿ç¨‹èµ„æºä¼šè¢«æ¶ˆè€—å®Œæ¯•ï¼Œå¯¼è‡´æœåŠ¡ç˜«ç—ªã€‚æœåŠ¡ä¸æœåŠ¡ä¹‹é—´çš„ä¾èµ–æ€§ï¼Œæ•…éšœä¼šä¼ æ’­ï¼Œä¼šå¯¹æ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿé€ æˆç¾éš¾æ€§çš„ä¸¥é‡åæœï¼Œè¿™å°±æ˜¯æœåŠ¡æ•…éšœçš„â€œé›ªå´©â€æ•ˆåº”ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸šç•Œæå‡ºäº†æ–­è·¯å™¨æ¨¡å‹ã€‚ 12.1æ–­è·¯å™¨ç®€ä»‹ â€‹ Netflix has created a library called Hystrix that implements the circuit breaker pattern. In a microservice architecture it is common to have multiple layers of service calls.Netflix. å¼€æºäº†Hystrixç»„ä»¶ï¼Œå®ç°äº†æ–­è·¯å™¨æ¨¡å¼ï¼ŒSpringCloudå¯¹è¿™ä¸€ç»„ä»¶è¿›è¡Œäº†æ•´åˆã€‚ åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€ä¸ªè¯·æ±‚éœ€è¦è°ƒç”¨å¤šä¸ªæœåŠ¡æ˜¯éå¸¸å¸¸è§çš„ã€‚è¾ƒåº•å±‚çš„æœåŠ¡å¦‚æœå‡ºç°æ•…éšœï¼Œä¼šå¯¼è‡´è¿é”æ•…éšœã€‚å½“å¯¹ç‰¹å®šçš„æœåŠ¡çš„è°ƒç”¨çš„ä¸å¯ç”¨è¾¾åˆ°ä¸€ä¸ªé˜€å€¼ï¼ˆHystric æ˜¯5ç§’20æ¬¡ï¼‰ æ–­è·¯å™¨å°†ä¼šè¢«æ‰“å¼€ã€‚æ–­è·¯æ‰“å¼€åï¼Œå¯ç”¨é¿å…è¿é”æ•…éšœï¼Œfallbackæ–¹æ³•å¯ä»¥ç›´æ¥è¿”å›ä¸€ä¸ªå›ºå®šå€¼ã€‚ 13.è·¯ç”±ç½‘å…³(zuul) â€‹ Zuulçš„ä¸»è¦åŠŸèƒ½æ˜¯è·¯ç”±è½¬å‘å’Œè¿‡æ»¤å™¨ã€‚è·¯ç”±åŠŸèƒ½æ˜¯å¾®æœåŠ¡çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚ï¼api/userè½¬å‘åˆ°åˆ°useræœåŠ¡ï¼Œ/api/shopè½¬å‘åˆ°åˆ°shopæœåŠ¡ã€‚zuulé»˜è®¤å’ŒRibbonç»“åˆå®ç°äº†è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½ã€‚ zuulæœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š Authentication Insights Stress Testing Canary Testing Dynamic Routing Service Migration Load Shedding Security Static Response handling Active/Active traffic management æœåŠ¡è¿‡æ»¤ filterTypeï¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä»£è¡¨è¿‡æ»¤å™¨çš„ç±»å‹ï¼Œåœ¨zuulä¸­å®šä¹‰äº†å››ç§ä¸åŒç”Ÿå‘½å‘¨æœŸçš„è¿‡æ»¤å™¨ç±»å‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š preï¼šè·¯ç”±ä¹‹å‰ routingï¼šè·¯ç”±ä¹‹æ—¶ postï¼š è·¯ç”±ä¹‹å errorï¼šå‘é€é”™è¯¯è°ƒç”¨ filterOrderï¼šè¿‡æ»¤çš„é¡ºåº shouldFilterï¼šè¿™é‡Œå¯ä»¥å†™é€»è¾‘åˆ¤æ–­ï¼Œæ˜¯å¦è¦è¿‡æ»¤ï¼Œæœ¬æ–‡true,æ°¸è¿œè¿‡æ»¤ã€‚ runï¼šè¿‡æ»¤å™¨çš„å…·ä½“é€»è¾‘ã€‚å¯ç”¨å¾ˆå¤æ‚ï¼ŒåŒ…æ‹¬æŸ¥sqlï¼Œnosqlå»åˆ¤æ–­è¯¥è¯·æ±‚åˆ°åº•æœ‰æ²¡æœ‰æƒé™è®¿é—®ã€‚ 14.åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ(Spring Cloud Config) â€‹ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç”±äºæœåŠ¡æ•°é‡å·¨å¤šï¼Œä¸ºäº†æ–¹ä¾¿æœåŠ¡é…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†ï¼Œå®æ—¶æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒç»„ä»¶ã€‚åœ¨Spring Cloudä¸­ï¼Œæœ‰åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒç»„ä»¶spring cloud config ï¼Œå®ƒæ”¯æŒé…ç½®æœåŠ¡æ”¾åœ¨é…ç½®æœåŠ¡çš„å†…å­˜ä¸­ï¼ˆå³æœ¬åœ°ï¼‰ï¼Œä¹Ÿæ”¯æŒæ”¾åœ¨è¿œç¨‹Gitä»“åº“ä¸­ã€‚åœ¨spring cloud config ç»„ä»¶ä¸­ï¼Œåˆ†ä¸¤ä¸ªè§’è‰²ï¼Œä¸€æ˜¯config serverï¼ŒäºŒæ˜¯config clientã€‚ 15. é«˜å¯ç”¨çš„åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ(Spring Cloud Config) â€‹ å½“æœåŠ¡å®ä¾‹å¾ˆå¤šæ—¶ï¼Œéƒ½ä»é…ç½®ä¸­å¿ƒè¯»å–æ–‡ä»¶ï¼Œè¿™æ—¶å¯ä»¥è€ƒè™‘å°†é…ç½®ä¸­å¿ƒåšæˆä¸€ä¸ªå¾®æœåŠ¡ï¼Œå°†å…¶é›†ç¾¤åŒ–ï¼Œä»è€Œè¾¾åˆ°é«˜å¯ç”¨ 16.æ¶ˆæ¯æ€»çº¿(Spring Cloud Bus) â€‹ Spring Cloud Bus å°†åˆ†å¸ƒå¼çš„èŠ‚ç‚¹ç”¨è½»é‡çš„æ¶ˆæ¯ä»£ç†è¿æ¥èµ·æ¥ã€‚å®ƒå¯ä»¥ç”¨äºå¹¿æ’­é…ç½®æ–‡ä»¶çš„æ›´æ”¹æˆ–è€…æœåŠ¡ä¹‹é—´çš„é€šè®¯ï¼Œä¹Ÿå¯ä»¥ç”¨äºç›‘æ§ã€‚æœ¬æ–‡è¦è®²è¿°çš„æ˜¯ç”¨Spring Cloud Buså®ç°é€šçŸ¥å¾®æœåŠ¡æ¶æ„çš„é…ç½®æ–‡ä»¶çš„æ›´æ”¹ã€‚ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ— éœ€é‡å¯ã€‘ å‡†å¤‡ï¼šå®‰è£…rabbitMq 17.æœåŠ¡é“¾è·¯è¿½è¸ª(Spring Cloud Sleuth) â€‹ å¾®æœåŠ¡æ¶æ„ä¸Šé€šè¿‡ä¸šåŠ¡æ¥åˆ’åˆ†æœåŠ¡çš„ï¼Œé€šè¿‡RESTè°ƒç”¨ï¼Œå¯¹å¤–æš´éœ²çš„ä¸€ä¸ªæ¥å£ï¼Œå¯èƒ½éœ€è¦å¾ˆå¤šä¸ªæœåŠ¡ååŒæ‰èƒ½å®Œæˆè¿™ä¸ªæ¥å£åŠŸèƒ½ï¼Œå¦‚æœé“¾è·¯ä¸Šä»»ä½•ä¸€ä¸ªæœåŠ¡å‡ºç°é—®é¢˜æˆ–è€…ç½‘ç»œè¶…æ—¶ï¼Œéƒ½ä¼šå½¢æˆå¯¼è‡´æ¥å£è°ƒç”¨å¤±è´¥ã€‚éšç€ä¸šåŠ¡çš„ä¸æ–­æ‰©å¼ ï¼ŒæœåŠ¡ä¹‹é—´äº’ç›¸è°ƒç”¨ä¼šè¶Šæ¥è¶Šå¤æ‚ã€‚ æœ¯è¯­ Spanï¼šåŸºæœ¬å·¥ä½œå•å…ƒï¼Œä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæ–°å»ºçš„spanä¸­å‘é€ä¸€ä¸ªRPCç­‰åŒäºå‘é€ä¸€ä¸ªå›åº”è¯·æ±‚ç»™RPCï¼Œspané€šè¿‡ä¸€ä¸ª64ä½IDå”¯ä¸€æ ‡è¯†ï¼Œtraceä»¥å¦ä¸€ä¸ª64ä½IDè¡¨ç¤ºï¼Œspanè¿˜æœ‰å…¶ä»–æ•°æ®ä¿¡æ¯ï¼Œæ¯”å¦‚æ‘˜è¦ã€æ—¶é—´æˆ³äº‹ä»¶ã€å…³é”®å€¼æ³¨é‡Š(tags)ã€spançš„IDã€ä»¥åŠè¿›åº¦ID(é€šå¸¸æ˜¯IPåœ°å€) spanåœ¨ä¸æ–­çš„å¯åŠ¨å’Œåœæ­¢ï¼ŒåŒæ—¶è®°å½•äº†æ—¶é—´ä¿¡æ¯ï¼Œå½“ä½ åˆ›å»ºäº†ä¸€ä¸ªspanï¼Œä½ å¿…é¡»åœ¨æœªæ¥çš„æŸä¸ªæ—¶åˆ»åœæ­¢å®ƒã€‚ Traceï¼šä¸€ç³»åˆ—spansç»„æˆçš„ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨è·‘ä¸€ä¸ªåˆ†å¸ƒå¼å¤§æ•°æ®å·¥ç¨‹ï¼Œä½ å¯èƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªtraceã€‚ Annotationï¼šç”¨æ¥åŠæ—¶è®°å½•ä¸€ä¸ªäº‹ä»¶çš„å­˜åœ¨ï¼Œä¸€äº›æ ¸å¿ƒannotationsç”¨æ¥å®šä¹‰ä¸€ä¸ªè¯·æ±‚çš„å¼€å§‹å’Œç»“æŸ cs - Client Sent -å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œè¿™ä¸ªannotionæè¿°äº†è¿™ä¸ªspançš„å¼€å§‹ sr - Server Received -æœåŠ¡ç«¯è·å¾—è¯·æ±‚å¹¶å‡†å¤‡å¼€å§‹å¤„ç†å®ƒï¼Œå¦‚æœå°†å…¶srå‡å»csæ—¶é—´æˆ³ä¾¿å¯å¾—åˆ°ç½‘ç»œå»¶è¿Ÿ ss - Server Sent -æ³¨è§£è¡¨æ˜è¯·æ±‚å¤„ç†çš„å®Œæˆ(å½“è¯·æ±‚è¿”å›å®¢æˆ·ç«¯)ï¼Œå¦‚æœsså‡å»sræ—¶é—´æˆ³ä¾¿å¯å¾—åˆ°æœåŠ¡ç«¯éœ€è¦çš„å¤„ç†è¯·æ±‚æ—¶é—´ cr - Client Received -è¡¨æ˜spançš„ç»“æŸï¼Œå®¢æˆ·ç«¯æˆåŠŸæ¥æ”¶åˆ°æœåŠ¡ç«¯çš„å›å¤ï¼Œå¦‚æœcrå‡å»csæ—¶é—´æˆ³ä¾¿å¯å¾—åˆ°å®¢æˆ·ç«¯ä»æœåŠ¡ç«¯è·å–å›å¤çš„æ‰€æœ‰æ‰€éœ€æ—¶é—´ å°†Spanå’ŒTraceåœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ä½¿ç”¨Zipkinæ³¨è§£çš„è¿‡ç¨‹å›¾å½¢åŒ–ï¼š 18.é«˜å¯ç”¨çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒ â€‹ æœåŠ¡æ³¨å†Œä¸­å¿ƒEureka Serverï¼Œæ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå½“æˆåƒä¸Šä¸‡ä¸ªæœåŠ¡å‘å®ƒæ³¨å†Œçš„æ—¶å€™ï¼Œå®ƒçš„è´Ÿè½½æ˜¯éå¸¸é«˜çš„ï¼Œè¿™åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šæ˜¯ä¸å¤ªåˆé€‚çš„ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»æ€ä¹ˆå°†Eureka Serveré›†ç¾¤åŒ–ã€‚Eurekaé€šè¿‡è¿è¡Œå¤šä¸ªå®ä¾‹ï¼Œä½¿å…¶æ›´å…·æœ‰é«˜å¯ç”¨æ€§ã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯å®ƒé»˜è®¤çš„ç†Ÿæ€§ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯ç»™å¯¹ç­‰çš„å®ä¾‹ä¸€ä¸ªåˆæ³•çš„å…³è”serviceurlã€‚ å‚è€ƒæ–‡çŒ®ï¼šé»‘é©¬è¯¾ç¨‹ç¬”è®°ï¼Œæ–¹å¿—æœ‹çš„åšå®¢","link":"/2021/02/25/Draft/2021/SpringCloud/"},{"title":"SpringBoot","text":"SpringBoot æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ï¼š WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ï¼š HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘ï¼šå°šç¡…è°·å­¦ä¹ ç¬”è®°ã€springbootå®˜æ–¹æ–‡æ¡£ã€è§†é¢‘ã€é¡¹ç›®é‡Œé¢åšç¬”è®°ï¼Œæœ€åè¿›è¡Œç»¼åˆä¼˜åŒ– LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ï¼š è·¯ä¸Šéšä¾¿çœ‹çœ‹ è¿›åº¦ï¼šã€32ã€‘è·¯ä¸Šçœ‹ ç»¼åˆé—®é¢˜ ä¼˜ç‚¹ï¼Ÿ SpringBootåˆ†é¡µæ’åºï¼Ÿ æ’é™¤è‡ªå¸¦tomcatç­‰å®¹å™¨ï¼Ÿ æµ‹è¯•ï¼Ÿ Spring Boot Stater ï¼Ÿ å¸¸ç”¨æ³¨è§£ï¼Ÿ ä¸€ã€ç®€ä»‹ é¡¹ç›®ç»“æ„ äºŒã€æ³¨è§£ @ImportResource(&quot;classpath:beans.xml&quot;) @Configuration @EnableAspectJAutoProxy(exposeProxy = true) @Import({User.class}) @EnableConfigurationProperties(StudentProperties.class) @Bean @ConditionalOnBean(name = &quot;user02&quot;) @EnableSwagger2Doc @SpringBootApplication @Component @ConfigurationProperties(prefix = &quot;student&quot;) é…ç½®ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package cn.lxl.springboot.config;import cn.lxl.springboot.entity.StudentProperties;import cn.lxl.springboot.entity.User;import org.springframework.boot.autoconfigure.condition.ConditionalOnBean;import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;import org.springframework.boot.context.properties.EnableConfigurationProperties;import org.springframework.context.annotation.*;/*æµ‹è¯•å‡åœ¨ä¸»ç¨‹åºç±»*///å°†é…ç½®æ–‡ä»¶ä¸­çš„beanæ³¨å…¥å®¹å™¨@ImportResource(&quot;classpath:beans.xml&quot;)//å‘Šè¯‰springbootè¿™æ˜¯ä¸ªé…ç½®ç±»// proxybeanMethodsï¼šä»£ç†beançš„æ–¹æ³•// Fullæ¨¡å¼ï¼š@Configuration(proxybeanMethods=true) å…¨æ¨¡å¼ è®°å½•ä¸Šæ¬¡ç”¨çš„beanï¼Œæ£€æŸ¥ç»„ä»¶æ˜¯å¦åœ¨å®¹å™¨ä¸­æœ‰ï¼Œå•å®ä¾‹// Liteæ¨¡å¼ï¼š@Configuration(proxybeanMethods=false) è½»é‡çº§æ¨¡å¼ æ¯æ¬¡åŠ è½½æ–°çš„beanï¼Œè·³è¿‡æ£€æŸ¥@Configuration// è¡¨ç¤ºé€šè¿‡aopæ¡†æ¶æš´éœ²è¯¥ä»£ç†å¯¹è±¡,AopContextèƒ½å¤Ÿè®¿é—®@EnableAspectJAutoProxy(exposeProxy = true)//ç»™å®¹å™¨ä¸­è‡ªåŠ¨åˆ›å»ºå‡ºå¯¹åº”ç±»å‹çš„ç»„ä»¶ã€é»˜è®¤ç»„ä»¶åä¸ºå…¶å…¨ç±»åã€ä½¿ç”¨å…¶æ— å‚æ„é€ å‡½æ•°//@Import({User.class})//å½“ä¸èƒ½åœ¨åŸç±»ä¸­æ·»åŠ @componentæ³¨è§£æ—¶ï¼ˆæ¯”å¦‚ç”¨ä»–äººåŒ…æ—¶ï¼‰ï¼Œåˆ™åœ¨ä½¿ç”¨çš„åœ°æ–¹æ·»åŠ æ¬¡æ³¨è§£,ä½œç”¨æ˜¯å¼€å¯studenté…ç½®ç»‘å®šåŠŸèƒ½ä¸”å°†å…¶æ³¨å…¥åˆ°å®¹å™¨ä¸­//@EnableConfigurationProperties(StudentProperties.class)public class MyConfig {//ç»™å®¹å™¨æ·»åŠ ç»„ä»¶ï¼Œä¸€æ–¹æ³•åä½œä¸ºç»„ä»¶çš„idã€‚è¿”å›ç±»å‹å°±æ˜¯ç»„ä»¶ç±»å‹ã€‚è¿”å›çš„å€¼å°±æ˜¯ç»„å»ºåœ¨å®¹å™¨ä¸­çš„å®ä¾‹ @Bean public User user01() { return new User(111111111L, &quot;1&quot;, 1); } //æ¡ä»¶è£…é…ï¼Œæœ‰nameä¸ºuser01 çš„beanæ‰æ³¨å…¥æ³¨è§£ä¸‹çš„studentçš„beanï¼Œåä¹‹æœ‰ @ConditionalOnMissingBean @ConditionalOnBean(name = &quot;user02&quot;) @Bean public StudentProperties student() { return new StudentProperties(); } @ConditionalOnBean(name = &quot;user01&quot;) @Bean public StudentProperties student1() { return new StudentProperties(); }} æµ‹è¯• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package cn.lxl.springboot;import cn.lxl.springboot.config.MyConfig;import cn.lxl.springboot.entity.User;import com.spring4all.swagger.EnableSwagger2Doc;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.context.ConfigurableApplicationContext;import org.springframework.context.annotation.ImportResource;/*Spring Boot é¡¹ç›®é€šå¸¸æœ‰ä¸€ä¸ªåä¸º *Application çš„å…¥å£ç±»ï¼Œå…¥å£ç±»é‡Œæœ‰ä¸€ä¸ª main æ–¹æ³•ï¼Œ è¿™ä¸ª main æ–¹æ³•å…¶å®å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ Javay åº”ç”¨çš„å…¥å£æ–¹æ³•ã€‚*///@SpringBootApplication===@Configurationã€@EnableAutoConfigurationã€@ComponentScan//@EnableAutoConfiguration è®© Spring Boot æ ¹æ®ç±»è·¯å¾„ä¸­çš„ jar åŒ…ä¾èµ–ä¸ºå½“å‰é¡¹ç›®è¿›è¡Œè‡ªåŠ¨é…ç½®ï¼Œ// ä¾‹å¦‚ï¼Œæ·»åŠ äº† spring-boot-starter-web ä¾èµ–ï¼Œä¼šè‡ªåŠ¨æ·»åŠ  Tomcat å’Œ Spring MVC çš„ä¾èµ–ï¼Œé‚£ä¹ˆ Spring Boot ä¼šå¯¹ Tomcat å’Œ Spring MVC è¿›è¡Œè‡ªåŠ¨é…ç½®ã€‚//spring Boot è¿˜ä¼šè‡ªåŠ¨æ‰«æ @SpringBootApplication æ‰€åœ¨ç±»çš„åŒçº§åŒ…ä»¥åŠä¸‹çº§åŒ…é‡Œçš„ Bean ï¼Œæ‰€ä»¥å…¥å£ç±»å»ºè®®å°±é…ç½®åœ¨ grounpID + arctifactID ç»„åˆçš„åŒ…åä¸‹ï¼ˆè¿™é‡Œä¸º cn.wmyskxz.springboot åŒ…ï¼‰//@SpringBootApplication(scanBasePackages = &quot;cn.wmyskxz&quot;) å¦‚éœ€æ‰«æä¸»ç¨‹åºåŒçº§å¤–çš„åŒ…åˆ™å¯æ·»åŠ scanBasePackageså‚æ•°@EnableSwagger2Doc@SpringBootApplicationpublic class SpringbootApplication { public static void main(String[] args) {// SpringApplication.run(SpringbootApplication.class, args);// è¿”å›IOCå®¹å™¨ ConfigurableApplicationContext run = SpringApplication.run(SpringbootApplication.class, args);// æŸ¥çœ‹æ‰€æœ‰ç»„ä»¶// String[] beanDefinitionNames = run.getBeanDefinitionNames();// for (String name : beanDefinitionNames// ) {// System.out.println(name);// } //é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯ç»„ä»¶// ä»¥ç±»å‹è·å–ç»„ä»¶ MyConfig bean = run.getBean(MyConfig.class); System.out.println(bean); User user = run.getBean(User.class); System.out.println(user);// ä»¥åç§°åˆ¤æ–­æ˜¯å¦æœ‰ç»„ä»¶ boolean user01 = run.containsBean(&quot;user01&quot;); System.out.println(user01);//æ¡ä»¶æ³¨è§£æµ‹è¯• boolean student = run.containsBean(&quot;student&quot;); System.out.println(student);//@ImportResource(&quot;classpath:beans.xml&quot;)å°†é…ç½®æ–‡ä»¶ä¸­çš„beanæ³¨å…¥å®¹å™¨ boolean bean1 = run.containsBean(&quot;bean1&quot;); System.out.println(bean1);//é…ç½®ç»‘å®š,éœ€è¦@Component//@ConfigurationProperties(prefix = &quot;student&quot;)//è¡¨ç¤ºè·å–æ‰€æœ‰é…ç½®æ–‡ä»¶ä¸­å‰ç¼€ä¸º sutdent çš„é…ç½®ä¿¡æ¯ï¼Œå®ä½“ç±»ä¸­ä½¿ç”¨ //å½“ä¸èƒ½åœ¨åŸç±»ä¸­æ·»åŠ @componentæ³¨è§£æ—¶ï¼ˆæ¯”å¦‚ç”¨ä»–äººåŒ…æ—¶ï¼‰ï¼Œåˆ™åœ¨ä½¿ç”¨çš„åœ°æ–¹æ·»åŠ æ­¤æ³¨è§£,ä½œç”¨æ˜¯å¼€å¯studenté…ç½®ç»‘å®šåŠŸèƒ½ä¸”å°†å…¶æ³¨å…¥åˆ°å®¹å™¨ä¸­//@EnableConfigurationProperties(StudentProperties.class) Object student1 = run.getBean(&quot;student1&quot;); System.out.println(student1); }}//è¿â¾ SpringBoot æœ‰å“ªâ¼ç§â½…å¼ï¼Ÿ//æ‰“åŒ…â½¤å‘½ä»¤æˆ–è€…æ”¾åˆ°å®¹å™¨ä¸­è¿â¾ã€‚ â½¤ Maven/Gradle æ’ä»¶è¿â¾ã€‚//ç›´æ¥æ‰§â¾ main â½…æ³•è¿â¾ã€‚//SpringBoot â½€æŒ Java Util Loggingï¼ŒLog4j2ï¼ŒLogback ä½œä¸ºâ½‡å¿—æ¡†æ¶ï¼Œå¦‚æœä½ ä½¿â½¤ Starters å¯åŠ¨å™¨ï¼ŒSpringBoot å°†ä½¿â½¤ Logback ä½œä¸ºé»˜è®¤æ¡†æ¶ã€‚//â½¤ Maven/Gradle æ’ä»¶è¿â¾ã€‚å¯è¿è¡Œthtmeleafä¸jspåŒæ—¶å­˜åœ¨çš„jspï¼Œ 1234567891011@Component//è¡¨æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ª Java Bean//é…ç½®ç»‘å®š,éœ€è¦@Component,æˆ–è€…ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨//å½“ä¸èƒ½åœ¨åŸç±»ä¸­æ·»åŠ @componentæ³¨è§£æ—¶ï¼ˆæ¯”å¦‚ç”¨ä»–äººåŒ…æ—¶ï¼‰ï¼Œåˆ™åœ¨ä½¿ç”¨çš„åœ°æ–¹æ·»åŠ æ­¤æ³¨è§£,ä½œç”¨æ˜¯å¼€å¯studenté…ç½®ç»‘å®šåŠŸèƒ½ä¸”å°†å…¶æ³¨å…¥åˆ°å®¹å™¨ä¸­//@EnableConfigurationProperties(StudentProperties.class)@ConfigurationProperties(prefix = &quot;student&quot;)//è¡¨ç¤ºè·å–æ‰€æœ‰é…ç½®æ–‡ä»¶ä¸­å‰ç¼€ä¸º sutdent çš„é…ç½®ä¿¡æ¯//student:// name: çœŸçš„å¸…// age: 21public class StudentProperties { private String name; private Integer age; ä¸‰ã€springbootè‡ªåŠ¨è£…é…åŸç† 123@EnableSwagger2Doc@SpringBootApplicationpublic class SpringbootApplication {} @SpringBootApplicationæ³¨è§£ç»“æ„ â¬â¬â¬â¬â¬â¬â¬â¬â¬â¬â¬ 12345678910111213141516@Target({ElementType.TYPE})@Retention(RetentionPolicy.RUNTIME)@Documented@Inherited@SpringBootConfiguration //è¡¨æ˜å½“å‰ä¸ºé…ç½®ç±»@EnableAutoConfiguration@ComponentScan(//æ‰«æå“ªäº›åŒ… excludeFilters = {@Filter( type = FilterType.CUSTOM, classes = {TypeExcludeFilter.class}), @Filter( type = FilterType.CUSTOM, classes = {AutoConfigurationExcludeFilter.class})})public @interface SpringBootApplication {} @SpringBootConfiguration 12345@Target({ElementType.TYPE})@Retention(RetentionPolicy.RUNTIME)@Documented@Configuration //è¡¨æ˜å½“å‰ä¸ºé…ç½®ç±»public @interface SpringBootConfiguration {} @EnableAutoConfiguration 1234567@Target({ElementType.TYPE})@Retention(RetentionPolicy.RUNTIME)@Documented@Inherited@AutoConfigurationPackage //1@Import({AutoConfigurationImportSelector.class}) //2public @interface EnableAutoConfiguration {} @AutoConfigurationPackage 123456@Target({ElementType.TYPE})@Retention(RetentionPolicy.RUNTIME)@Documented@Inherited@Import({Registrar.class})//åˆ©ç”¨Registrarå¯¼å…¥ä¸€ç³»åˆ—ç»„ä»¶åˆ°å®¹å™¨ä¸­,æŒ‡å®šé»˜è®¤åŒ…è§„åˆ™public @interface AutoConfigurationPackage {} Registrar.class 12345678910111213static class Registrar implements ImportBeanDefinitionRegistrar, DeterminableImports { Registrar() { } public void registerBeanDefinitions(AnnotationMetadata metadata, BeanDefinitionRegistry registry) { AutoConfigurationPackages.register(registry, (String[])( new AutoConfigurationPackages.PackageImports(metadata)).getPackageNames().toArray(new String[0]));//è·å–å…ƒæ³¨è§£çš„åŒ…åï¼ˆcom.xxx.xxxï¼‰å°è£…åˆ°æ•°ç»„ä¸­ } public Set&lt;Object&gt; determineImports(AnnotationMetadata metadata) { return Collections.singleton(new AutoConfigurationPackages.PackageImports(metadata)); }} @Import({AutoConfigurationImportSelector.class}) 1ã€åˆ©ç”¨getAutoConfigurationEntry(annotationMetadata);ç»™å®¹å™¨ä¸­æ‰¹é‡å¯¼å…¥ä¸€äº›ç»„ä»¶ 2ã€è°ƒç”¨List configurations = getCandidateConfigurations(annotationMetadata, attributes)è·å–åˆ°æ‰€æœ‰éœ€è¦å¯¼å…¥åˆ°å®¹å™¨ä¸­çš„é…ç½®ç±» 3ã€åˆ©ç”¨å·¥å‚åŠ è½½ Map&lt;String, List&gt; loadSpringFactories(@Nullable ClassLoader classLoader)ï¼›å¾—åˆ°æ‰€æœ‰çš„ç»„ä»¶ 4ã€ä»META-INF/spring.factoriesä½ç½®æ¥åŠ è½½ä¸€ä¸ªæ–‡ä»¶ã€‚ é»˜è®¤æ‰«ææˆ‘ä»¬å½“å‰ç³»ç»Ÿé‡Œé¢æ‰€æœ‰META-INF/spring.factoriesä½ç½®çš„æ–‡ä»¶ spring-boot-autoconfigure-2.3.4.RELEASE.jaråŒ…é‡Œé¢ä¹Ÿæœ‰META-INF/spring.factories 5ã€æ–‡ä»¶é‡Œé¢å†™æ­»äº†spring-bootä¸€å¯åŠ¨å°±è¦ç»™å®¹å™¨ä¸­åŠ è½½çš„æ‰€æœ‰é…ç½®ç±» 6ã€è™½ç„¶æˆ‘ä»¬127ä¸ªåœºæ™¯çš„æ‰€æœ‰è‡ªåŠ¨é…ç½®å¯åŠ¨çš„æ—¶å€™é»˜è®¤å…¨éƒ¨åŠ è½½ã€‚xxxxAutoConfiguration æŒ‰ç…§æ¡ä»¶è£…é…è§„åˆ™ï¼ˆ@Conditionalï¼‰ï¼Œæœ€ç»ˆä¼šæŒ‰éœ€é…ç½® 12345678910111213141516171819202122public class AutoConfigurationImportSelector implements DeferredImportSelector, BeanClassLoaderAware, ResourceLoaderAware, BeanFactoryAware, EnvironmentAware, Ordered { private static final AutoConfigurationImportSelector.AutoConfigurationEntry EMPTY_ENTRY = new AutoConfigurationImportSelector.AutoConfigurationEntry(); private static final String[] NO_IMPORTS = new String[0]; private static final Log logger = LogFactory.getLog(AutoConfigurationImportSelector.class); private static final String PROPERTY_NAME_AUTOCONFIGURE_EXCLUDE = &quot;spring.autoconfigure.exclude&quot;; private ConfigurableListableBeanFactory beanFactory; private Environment environment; private ClassLoader beanClassLoader; private ResourceLoader resourceLoader; private AutoConfigurationImportSelector.ConfigurationClassFilter configurationClassFilter; public AutoConfigurationImportSelector() { } public String[] selectImports(AnnotationMetadata annotationMetadata) { if (!this.isEnabled(annotationMetadata)) { return NO_IMPORTS; } else { AutoConfigurationImportSelector.AutoConfigurationEntry autoConfigurationEntry = this.getAutoConfigurationEntry(annotationMetadata); return StringUtils.toStringArray(autoConfigurationEntry.getConfigurations());// } } ä¿®æ”¹é»˜è®¤é…ç½® @Bean @ConditionalOnBean(MultipartResolver.class) //å®¹å™¨ä¸­æœ‰è¿™ä¸ªç±»å‹ç»„ä»¶ @ConditionalOnMissingBean(name = DispatcherServlet.MULTIPART_RESOLVER_BEAN_NAME) //å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªåå­— multipartResolver çš„ç»„ä»¶ public MultipartResolver multipartResolver(MultipartResolver resolver) { //ç»™@Beanæ ‡æ³¨çš„æ–¹æ³•ä¼ å…¥äº†å¯¹è±¡å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‰¾ã€‚ //SpringMVC multipartResolverã€‚é˜²æ­¢æœ‰äº›ç”¨æˆ·é…ç½®çš„æ–‡ä»¶ä¸Šä¼ è§£æå™¨ä¸ç¬¦åˆè§„èŒƒ // Detect if the user has created a MultipartResolver but named it incorrectly return resolver; } ç»™å®¹å™¨ä¸­åŠ å…¥äº†æ–‡ä»¶ä¸Šä¼ è§£æå™¨ï¼› SpringBooté»˜è®¤ä¼šåœ¨åº•å±‚é…å¥½æ‰€æœ‰çš„ç»„ä»¶ã€‚ä½†æ˜¯å¦‚æœç”¨æˆ·è‡ªå·±é…ç½®äº†ä»¥ç”¨æˆ·çš„ä¼˜å…ˆ 123@Bean @ConditionalOnMissingBean public CharacterEncodingFilter characterEncodingFilter() {} æ€»ç»“ï¼š SpringBootå…ˆåŠ è½½æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±» xxxxxAutoConfiguration æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»æŒ‰ç…§æ¡ä»¶è¿›è¡Œç”Ÿæ•ˆï¼Œé»˜è®¤éƒ½ä¼šç»‘å®šé…ç½®æ–‡ä»¶æŒ‡å®šçš„å€¼ã€‚xxxxPropertiesé‡Œé¢æ‹¿ã€‚xxxPropertieså’Œé…ç½®æ–‡ä»¶è¿›è¡Œäº†ç»‘å®š ç”Ÿæ•ˆçš„é…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­è£…é…å¾ˆå¤šç»„ä»¶ åªè¦å®¹å™¨ä¸­æœ‰è¿™äº›ç»„ä»¶ï¼Œç›¸å½“äºè¿™äº›åŠŸèƒ½å°±æœ‰äº† å®šåˆ¶åŒ–é…ç½® ç”¨æˆ·ç›´æ¥è‡ªå·±@Beanæ›¿æ¢åº•å±‚çš„ç»„ä»¶ ç”¨æˆ·å»çœ‹è¿™ä¸ªç»„ä»¶æ˜¯è·å–çš„é…ç½®æ–‡ä»¶ä»€ä¹ˆå€¼å°±å»ä¿®æ”¹ã€‚ xxxxxAutoConfiguration ---&gt; ç»„ä»¶ ---&gt; xxxxPropertiesé‡Œé¢æ‹¿å€¼ ----&gt; application.properties æœ€ä½³å®è·µ å¼•å…¥åœºæ™¯ä¾èµ– https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter æŸ¥çœ‹è‡ªåŠ¨é…ç½®äº†å“ªäº›ï¼ˆé€‰åšï¼‰ è‡ªå·±åˆ†æï¼Œå¼•å…¥åœºæ™¯å¯¹åº”çš„è‡ªåŠ¨é…ç½®ä¸€èˆ¬éƒ½ç”Ÿæ•ˆäº† é…ç½®æ–‡ä»¶ä¸­debug=trueå¼€å¯è‡ªåŠ¨é…ç½®æŠ¥å‘Šã€‚consoleä¸­æ˜¾ç¤ºNegativeï¼ˆä¸ç”Ÿæ•ˆï¼‰\\Positiveï¼ˆç”Ÿæ•ˆï¼‰ æ˜¯å¦éœ€è¦ä¿®æ”¹ å‚ç…§æ–‡æ¡£ä¿®æ”¹é…ç½®é¡¹ https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties è‡ªå·±åˆ†æã€‚xxxxPropertiesç»‘å®šäº†é…ç½®æ–‡ä»¶çš„å“ªäº›ã€‚ è‡ªå®šä¹‰åŠ å…¥æˆ–è€…æ›¿æ¢ç»„ä»¶ @Beanã€@Componentã€‚ã€‚ã€‚ è‡ªå®šä¹‰å™¨ XXXXXCustomizerï¼› å››ã€å¼€å‘æŠ€å·§ 1.lombok @Data ï¼šä»£æ›¿get set æ–¹æ³• @ToString ï¼šä»£æ›¿tostringæ–¹æ³• @AllArgsConstructor ï¼šä»£æ›¿å…¨å‚æ„é€ å™¨ @NoArgsConstructor ï¼šä»£æ›¿æ— å‚æ„é€ å™¨ @EqualsAndHashCodeï¼šä»£æ›¿HashCodeã€equalsæ–¹æ³• @Slf4j ï¼šæ·»åŠ  Log.info(â€œxxxâ€);æ‰“å°æ—¥å¿— 2.dev-tools ctrl+f9 è‡ªåŠ¨é‡å¯ 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; 3.Spring Initailizrï¼ˆé¡¹ç›®åˆå§‹åŒ–å‘å¯¼ï¼‰ è‡ªåŠ¨æ­å»ºåˆå§‹é¡¹ç›®ç¯å¢ƒ äº”ã€æ ¸å¿ƒåŠŸèƒ½ 1.é…ç½®æ–‡ä»¶ 1.1ã€properties åŒä»¥å‰çš„propertiesç”¨æ³•ï¼Œå¯ç”¨@PropertySource æ³¨è§£å¯¼å…¥é…ç½®ã€‚ 1.2ã€yaml 1.2.1ã€ç®€ä»‹ YAML æ˜¯ &quot;YAML Ain't Markup Language&quot;ï¼ˆYAML ä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰çš„é€’å½’ç¼©å†™ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼š&quot;Yet Another Markup Language&quot;ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚ éå¸¸é€‚åˆç”¨æ¥åšä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœpropertieså’Œymaléƒ½æœ‰ï¼Œåˆ™éƒ½ç”Ÿæ•ˆä¸”propertiesä¼˜å…ˆã€‚ 1.2.2ã€åŸºæœ¬è¯­æ³• key: valueï¼›kvä¹‹é—´æœ‰ç©ºæ ¼ å¤§å°å†™æ•æ„Ÿ ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³» ç¼©è¿›ä¸å…è®¸ä½¿ç”¨tabï¼Œåªå…è®¸ç©ºæ ¼ ç¼©è¿›çš„ç©ºæ ¼æ•°ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½å³å¯ '#'è¡¨ç¤ºæ³¨é‡Š å­—ç¬¦ä¸²æ— éœ€åŠ å¼•å·ï¼Œå¦‚æœè¦åŠ ï¼Œ' ' ä¸ &quot; &quot; è¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹ ä¼šè¢« è½¬ä¹‰/ä¸è½¬ä¹‰ï¼Œæ¯”å¦‚ \\n å•å¼•å·å›è½¬ä¹‰æˆ \\n å­—ç¬¦ä¸²ï¼Œè€ŒåŒå¼•å·ä¼šæ¢è¡Œã€‚ .yml æ ¼å¼ä¸æ”¯æŒ @PropertySource æ³¨è§£å¯¼å…¥é…ç½®ã€‚ 1.2.3ã€æ•°æ®ç±»å‹ 1234567891011121314151617#å­—é¢é‡ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ã€‚dateã€booleanã€stringã€numberã€nullk: v#å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆã€‚mapã€hashã€setã€object è¡Œå†…å†™æ³•ï¼š k: {k1:v1,k2:v2,k3:v3}#æˆ–k: k1: v1 k2: v2 k3: v3#æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ã€‚arrayã€listã€queueè¡Œå†…å†™æ³•ï¼š k: [v1,v2,v3]#æˆ–è€…k: - v1 - v2 - v3 1.2.4ã€ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546@Datapublic class Person { private String userName; private Boolean boss; private Date birth; private Integer age; private Pet pet; private String[] interests; private List&lt;String&gt; animal; private Map&lt;String, Object&gt; score; private Set&lt;Double&gt; salarys; private Map&lt;String, List&lt;Pet&gt;&gt; allPets;}@Datapublic class Pet { private String name; private Double weight;}# yamlè¡¨ç¤ºä»¥ä¸Šå¯¹è±¡person: userName: zhangsan boss: false birth: 2019/12/12 20:12:33 age: 18 pet: name: tomcat weight: 23.4 interests: [ç¯®çƒ,æ¸¸æ³³] animal: - jerry - mario score: english: first: 30 second: 40 third: 50 math: [131,140,148] chinese: {first: 128,second: 136} salarys: [3999,4999.98,5999.99] allPets: sick: - {name: tom} - {name: jerry,weight: 47} health: [{name: mario,weight: 47}] 1.3é…ç½®æ–‡ä»¶è‡ªå®šä¹‰ç±»æç¤º 12345678910111213141516171819202122232425&lt;!--è®©è‡ªå®šä¹‰ç±»åœ¨é…ç½®ç±»ä¸­æœ‰æç¤º--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt;&lt;!--æ‰“åŒ…æ—¶å»é™¤ä¸šåŠ¡æ— å…³ä¾èµ–processor--&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;excludes&gt; &lt;exclude&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;/exclude&gt; &lt;/excludes&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; 1.4 bootstrap bootstrap (.yml æˆ–è€… .properties)ä¼˜å…ˆäºapplication (.yml æˆ–è€… .properties)ï¼Œä¸¤è€…å…±ç”¨åŒä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œbootstrapé€‚ç”¨äºå›ºå®šå±æ€§ï¼ŒåŠ è§£å¯†ç­‰æƒ…æ™¯ã€‚ 1.5å„ä¸ªé…ç½®æ–‡ä»¶åŠ è½½é¡ºåº é…ç½®å±æ€§åŠ è½½çš„é¡ºåºå¦‚ä¸‹ï¼š 1ã€å¼€å‘è€…å·¥å…· Devtools å…¨å±€é…ç½®å‚æ•°ï¼› 2ã€å•å…ƒæµ‹è¯•ä¸Šçš„ @TestPropertySource æ³¨è§£æŒ‡å®šçš„å‚æ•°ï¼› 3ã€å•å…ƒæµ‹è¯•ä¸Šçš„ @SpringBootTest æ³¨è§£æŒ‡å®šçš„å‚æ•°ï¼› 4ã€å‘½ä»¤è¡ŒæŒ‡å®šçš„å‚æ•°ï¼Œå¦‚ java -jar springboot.jar --name=&quot;JavaæŠ€æœ¯æ ˆ&quot;ï¼› 5ã€å‘½ä»¤è¡Œä¸­çš„ SPRING_APPLICATION_JSON æŒ‡å®šå‚æ•°, å¦‚ java -Dspring.application.json='{&quot;name&quot;:&quot;JavaæŠ€æœ¯æ ˆ&quot;}' -jar springboot.jar 6ã€ServletConfig åˆå§‹åŒ–å‚æ•°ï¼› 7ã€ServletContext åˆå§‹åŒ–å‚æ•°ï¼› 8ã€JNDIå‚æ•°ï¼ˆå¦‚ java:comp/env/spring.application.jsonï¼‰ï¼› 9ã€Javaç³»ç»Ÿå‚æ•°ï¼ˆæ¥æºï¼šSystem.getProperties()ï¼‰ï¼› 10ã€æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡å‚æ•°ï¼› 11ã€RandomValuePropertySource éšæœºæ•°ï¼Œä»…åŒ¹é…ï¼šramdom.*ï¼› 12ã€JARåŒ…å¤–é¢çš„é…ç½®æ–‡ä»¶å‚æ•°ï¼ˆapplication-{profile}.propertiesï¼ˆYAMLï¼‰ï¼‰ 13ã€JARåŒ…é‡Œé¢çš„é…ç½®æ–‡ä»¶å‚æ•°ï¼ˆapplication-{profile}.propertiesï¼ˆYAMLï¼‰ï¼‰ 14ã€JARåŒ…å¤–é¢çš„é…ç½®æ–‡ä»¶å‚æ•°ï¼ˆapplication.propertiesï¼ˆYAMLï¼‰ï¼‰ 15ã€JARåŒ…é‡Œé¢çš„é…ç½®æ–‡ä»¶å‚æ•°ï¼ˆapplication.propertiesï¼ˆYAMLï¼‰ï¼‰ 16ã€@Configurationé…ç½®æ–‡ä»¶ä¸Š @PropertySource æ³¨è§£åŠ è½½çš„å‚æ•°ï¼› 17ã€é»˜è®¤å‚æ•°ï¼ˆé€šè¿‡ SpringApplication.setDefaultProperties æŒ‡å®šï¼‰ï¼› 2.Webå¼€å‘ é™æ€èµ„æºä¸å®šåˆ¶åŒ– 2.1ã€é™æ€èµ„æºè®¿é—® 1ã€é™æ€èµ„æºç›®å½• åªè¦é™æ€èµ„æºæ”¾åœ¨ç±»è·¯å¾„ä¸‹ï¼š called /static (or /public or /resources or /META-INF/resources è®¿é—® ï¼š å½“å‰é¡¹ç›®æ ¹è·¯å¾„/ + é™æ€èµ„æºå åŸç†ï¼š é™æ€æ˜ å°„/**ã€‚ è¯·æ±‚è¿›æ¥ï¼Œå…ˆå»æ‰¾Controllerçœ‹èƒ½ä¸èƒ½å¤„ç†ã€‚ä¸èƒ½å¤„ç†çš„æ‰€æœ‰è¯·æ±‚åˆéƒ½äº¤ç»™é™æ€èµ„æºå¤„ç†å™¨ã€‚é™æ€èµ„æºä¹Ÿæ‰¾ä¸åˆ°åˆ™å“åº”404é¡µé¢ æ”¹å˜é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„ 1234567891011spring: mvc: static-path-pattern: /res/** resources: static-locations: [classpath:/haha/]spring: mvc: static-path-pattern: /res/** resources: static-locations: [classpath:/haha/] 2ã€é™æ€èµ„æºè®¿é—®å‰ç¼€ é»˜è®¤æ— å‰ç¼€ å½“å‰é¡¹ç›® + static-path-pattern + é™æ€èµ„æºå = é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ 123spring: mvc: static-path-pattern: /res/** 3ã€webjar è‡ªåŠ¨æ˜ å°„ /webjars/** https://www.webjars.org/ è®¿é—®åœ°å€ï¼šhttp://localhost:8080/webjars/jquery/3.5.1/jquery.js åé¢åœ°å€è¦æŒ‰ç…§ä¾èµ–é‡Œé¢çš„åŒ…è·¯å¾„ 12345&lt;dependency&gt; &lt;groupId&gt;org.webjars&lt;/groupId&gt; &lt;artifactId&gt;jquery&lt;/artifactId&gt; &lt;version&gt;3.5.1&lt;/version&gt;&lt;/dependency&gt; 2.2ã€æ¬¢è¿é¡µæ”¯æŒ é™æ€èµ„æºè·¯å¾„ä¸‹ index.html å¯ä»¥é…ç½®é™æ€èµ„æºè·¯å¾„ ä½†æ˜¯ä¸å¯ä»¥é…ç½®é™æ€èµ„æºçš„è®¿é—®å‰ç¼€ã€‚å¦åˆ™å¯¼è‡´ index.htmlä¸èƒ½è¢«é»˜è®¤è®¿é—® controllerèƒ½å¤„ç†/index 12345spring:# mvc:# static-path-pattern: /res/** è¿™ä¸ªä¼šå¯¼è‡´welcome pageåŠŸèƒ½å¤±æ•ˆ resources: static-locations: [classpath:/haha/] 2.3ã€è‡ªå®šä¹‰ Favicon favicon.ico æ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹å³å¯ã€‚ 123spring:# mvc:# static-path-pattern: /res/** è¿™ä¸ªä¼šå¯¼è‡´ Favicon åŠŸèƒ½å¤±æ•ˆ ä¸ç”Ÿæ•ˆåˆ™é¦–é¡µæ·»åŠ  1234&lt;!-- &lt;link rel=&quot;shortcut icon&quot; th:href=&quot;@{/favicon.ico}&quot;/&gt;--&gt;&lt;!-- &lt;link rel=&quot;bookmark&quot; th:href=&quot;@{/favicon.ico}&quot;/&gt;--&gt; &lt;link rel=&quot;shortcut icon&quot; href=&quot;/favicon.ico&quot;/&gt; &lt;link rel=&quot;bookmark&quot; href=&quot;/favicon.ico&quot;/&gt; åœç”¨ç¼“å­˜ï¼Œè°·æ­Œctrl+F5å¼ºåˆ¶åˆ·æ–° 2.4ã€é™æ€èµ„æºé…ç½®åŸç† SpringBootå¯åŠ¨é»˜è®¤åŠ è½½ xxxAutoConfiguration ç±»ï¼ˆè‡ªåŠ¨é…ç½®ç±»ï¼‰ SpringMVCåŠŸèƒ½çš„è‡ªåŠ¨é…ç½®ç±» WebMvcAutoConfigurationï¼Œç”Ÿæ•ˆ 12345678@Configuration(proxyBeanMethods = false)@ConditionalOnWebApplication(type = Type.SERVLET)@ConditionalOnClass({ Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class })@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)@AutoConfigureAfter({ DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class, ValidationAutoConfiguration.class })public class WebMvcAutoConfiguration {} ç»™å®¹å™¨ä¸­é…äº†ä»€ä¹ˆã€‚ 12345@Configuration(proxyBeanMethods = false)@Import(EnableWebMvcConfiguration.class)@EnableConfigurationProperties({ WebMvcProperties.class, ResourceProperties.class })@Order(0)public static class WebMvcAutoConfigurationAdapter implements WebMvcConfigurer {} é…ç½®æ–‡ä»¶çš„ç›¸å…³å±æ€§å’Œxxxè¿›è¡Œäº†ç»‘å®šã€‚WebMvcProperties==spring.mvcã€ResourceProperties==spring.resources 1ã€é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨ 123456789101112131415161718192021 //æœ‰å‚æ„é€ å™¨æ‰€æœ‰å‚æ•°çš„å€¼éƒ½ä¼šä»å®¹å™¨ä¸­ç¡®å®š//ResourceProperties resourcePropertiesï¼›è·å–å’Œspring.resourcesç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡//WebMvcProperties mvcProperties è·å–å’Œspring.mvcç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡//ListableBeanFactory beanFactory Springçš„beanFactory//HttpMessageConverters æ‰¾åˆ°æ‰€æœ‰çš„HttpMessageConverters//ResourceHandlerRegistrationCustomizer æ‰¾åˆ° èµ„æºå¤„ç†å™¨çš„è‡ªå®šä¹‰å™¨ã€‚=========//DispatcherServletPath //ServletRegistrationBean ç»™åº”ç”¨æ³¨å†ŒServletã€Filter.... public WebMvcAutoConfigurationAdapter(ResourceProperties resourceProperties, WebMvcProperties mvcProperties, ListableBeanFactory beanFactory, ObjectProvider&lt;HttpMessageConverters&gt; messageConvertersProvider, ObjectProvider&lt;ResourceHandlerRegistrationCustomizer&gt; resourceHandlerRegistrationCustomizerProvider, ObjectProvider&lt;DispatcherServletPath&gt; dispatcherServletPath, ObjectProvider&lt;ServletRegistrationBean&lt;?&gt;&gt; servletRegistrations) { this.resourceProperties = resourceProperties; this.mvcProperties = mvcProperties; this.beanFactory = beanFactory; this.messageConvertersProvider = messageConvertersProvider; this.resourceHandlerRegistrationCustomizer = resourceHandlerRegistrationCustomizerProvider.getIfAvailable(); this.dispatcherServletPath = dispatcherServletPath; this.servletRegistrations = servletRegistrations; } 2ã€èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™ 12345678910111213141516171819202122232425262728293031323334353637383940@Override public void addResourceHandlers(ResourceHandlerRegistry registry) { if (!this.resourceProperties.isAddMappings()) { logger.debug(&quot;Default resource handling disabled&quot;); return; } Duration cachePeriod = this.resourceProperties.getCache().getPeriod(); CacheControl cacheControl = this.resourceProperties.getCache().getCachecontrol().toHttpCacheControl(); //webjarsçš„è§„åˆ™ if (!registry.hasMappingForPattern(&quot;/webjars/**&quot;)) { customizeResourceHandlerRegistration(registry.addResourceHandler(&quot;/webjars/**&quot;) .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;) .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl)); } // String staticPathPattern = this.mvcProperties.getStaticPathPattern(); if (!registry.hasMappingForPattern(staticPathPattern)) { customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern) .addResourceLocations(getResourceLocations(this.resourceProperties.getStaticLocations())) .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl)); } }spring:# mvc:# static-path-pattern: /res/** resources: add-mappings: false ç¦ç”¨æ‰€æœ‰é™æ€èµ„æºè§„åˆ™@ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false)public class ResourceProperties { private static final String[] CLASSPATH_RESOURCE_LOCATIONS = { &quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; }; /** * Locations of static resources. Defaults to classpath:[/META-INF/resources/, * /resources/, /static/, /public/]. */ private String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS; 3ã€æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™ 1234567891011121314151617181920212223242526HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„ã€‚ä¿å­˜äº†æ¯ä¸€ä¸ªHandlerèƒ½å¤„ç†å“ªäº›è¯·æ±‚ã€‚ @Bean public WelcomePageHandlerMapping welcomePageHandlerMapping(ApplicationContext applicationContext, FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider) { WelcomePageHandlerMapping welcomePageHandlerMapping = new WelcomePageHandlerMapping( new TemplateAvailabilityProviders(applicationContext), applicationContext, getWelcomePage(), this.mvcProperties.getStaticPathPattern()); welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider)); welcomePageHandlerMapping.setCorsConfigurations(getCorsConfigurations()); return welcomePageHandlerMapping; }WelcomePageHandlerMapping(TemplateAvailabilityProviders templateAvailabilityProviders, ApplicationContext applicationContext, Optional&lt;Resource&gt; welcomePage, String staticPathPattern) { if (welcomePage.isPresent() &amp;&amp; &quot;/**&quot;.equals(staticPathPattern)) { //è¦ç”¨æ¬¢è¿é¡µåŠŸèƒ½ï¼Œå¿…é¡»æ˜¯/** logger.info(&quot;Adding welcome page: &quot; + welcomePage.get()); setRootViewName(&quot;forward:index.html&quot;); } else if (welcomeTemplateExists(templateAvailabilityProviders, applicationContext)) { // è°ƒç”¨Controller /index logger.info(&quot;Adding welcome page template: index&quot;); setRootViewName(&quot;index&quot;); }} 4ã€favicon 3ã€è¯·æ±‚å‚æ•°å¤„ç† 1ã€è¯·æ±‚æ˜ å°„ 2ã€restä½¿ç”¨ä¸åŸç† @xxxMappingï¼› Resté£æ ¼æ”¯æŒï¼ˆä½¿ç”¨HTTPè¯·æ±‚æ–¹å¼åŠ¨è¯æ¥è¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œï¼‰ ä»¥å‰ï¼š/getUser è·å–ç”¨æˆ· /deleteUser åˆ é™¤ç”¨æˆ· /editUser ä¿®æ”¹ç”¨æˆ· /saveUser ä¿å­˜ç”¨æˆ· ç°åœ¨ï¼š /user GET-è·å–ç”¨æˆ· DELETE-åˆ é™¤ç”¨æˆ· PUT-ä¿®æ”¹ç”¨æˆ· POST-ä¿å­˜ç”¨æˆ· æ ¸å¿ƒFilterï¼›HiddenHttpMethodFilter ç”¨æ³•ï¼š è¡¨å•method=postï¼Œéšè—åŸŸ _method=put SpringBootä¸­æ‰‹åŠ¨å¼€å¯ æ‰©å±•ï¼šå¦‚ä½•æŠŠ_method è¿™ä¸ªåå­—æ¢æˆæˆ‘ä»¬è‡ªå·±å–œæ¬¢çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839 @RequestMapping(value = &quot;/user&quot;,method = RequestMethod.GET) public String getUser(){ return &quot;GET-å¼ ä¸‰&quot;; } @RequestMapping(value = &quot;/user&quot;,method = RequestMethod.POST) public String saveUser(){ return &quot;POST-å¼ ä¸‰&quot;; } @RequestMapping(value = &quot;/user&quot;,method = RequestMethod.PUT) public String putUser(){ return &quot;PUT-å¼ ä¸‰&quot;; } @RequestMapping(value = &quot;/user&quot;,method = RequestMethod.DELETE) public String deleteUser(){ return &quot;DELETE-å¼ ä¸‰&quot;; } @Bean @ConditionalOnMissingBean(HiddenHttpMethodFilter.class) @ConditionalOnProperty(prefix = &quot;spring.mvc.hiddenmethod.filter&quot;, name = &quot;enabled&quot;, matchIfMissing = false) public OrderedHiddenHttpMethodFilter hiddenHttpMethodFilter() { return new OrderedHiddenHttpMethodFilter(); }//è‡ªå®šä¹‰filter @Bean public HiddenHttpMethodFilter hiddenHttpMethodFilter(){ HiddenHttpMethodFilter methodFilter = new HiddenHttpMethodFilter(); methodFilter.setMethodParam(&quot;_m&quot;); return methodFilter; } ReståŸç†ï¼ˆè¡¨å•æäº¤è¦ä½¿ç”¨RESTçš„æ—¶å€™ï¼‰ è¡¨å•æäº¤ä¼šå¸¦ä¸Š_method=PUT è¯·æ±‚è¿‡æ¥è¢«HiddenHttpMethodFilteræ‹¦æˆª è¯·æ±‚æ˜¯å¦æ­£å¸¸ï¼Œå¹¶ä¸”æ˜¯POST è·å–åˆ°_methodçš„å€¼ã€‚ å…¼å®¹ä»¥ä¸‹è¯·æ±‚ï¼›PUT.DELETE.PATCH åŸç”Ÿrequestï¼ˆpostï¼‰ï¼ŒåŒ…è£…æ¨¡å¼requesWrapperé‡å†™äº†getMethodæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¼ å…¥çš„å€¼ã€‚ è¿‡æ»¤å™¨é“¾æ”¾è¡Œçš„æ—¶å€™ç”¨wrapperã€‚ä»¥åçš„æ–¹æ³•è°ƒç”¨getMethodæ˜¯è°ƒç”¨requesWrapperçš„ã€‚ Restä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·ï¼Œ å¦‚PostManç›´æ¥å‘é€Putã€deleteç­‰æ–¹å¼è¯·æ±‚ï¼Œæ— éœ€Filterã€‚ 12345spring: mvc: hiddenmethod: filter: enabled: true #å¼€å¯é¡µé¢è¡¨å•çš„ReståŠŸèƒ½ 2ã€è¯·æ±‚æ˜ å°„åŸç† SpringMVCåŠŸèƒ½åˆ†æéƒ½ä» org.springframework.web.servlet.DispatcherServlet-ã€‹doDispatchï¼ˆï¼‰ 1234567891011121314151617181920protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception { HttpServletRequest processedRequest = request; HandlerExecutionChain mappedHandler = null; boolean multipartRequestParsed = false;â€‹ WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);â€‹ try { ModelAndView mv = null; Exception dispatchException = null;â€‹ try { processedRequest = checkMultipart(request); multipartRequestParsed = (processedRequest != request);â€‹ // æ‰¾åˆ°å½“å‰è¯·æ±‚ä½¿ç”¨å“ªä¸ªHandlerï¼ˆControllerçš„æ–¹æ³•ï¼‰å¤„ç† mappedHandler = getHandler(processedRequest); //HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„ã€‚/xxx-&gt;&gt;xxxx RequestMappingHandlerMappingï¼šä¿å­˜äº†æ‰€æœ‰@RequestMapping å’Œhandlerçš„æ˜ å°„è§„åˆ™ã€‚ æ‰€æœ‰çš„è¯·æ±‚æ˜ å°„éƒ½åœ¨HandlerMappingä¸­ã€‚ SpringBootè‡ªåŠ¨é…ç½®æ¬¢è¿é¡µçš„ WelcomePageHandlerMapping ã€‚è®¿é—® /èƒ½è®¿é—®åˆ°index.htmlï¼› SpringBootè‡ªåŠ¨é…ç½®äº†é»˜è®¤ çš„ RequestMappingHandlerMapping è¯·æ±‚è¿›æ¥ï¼ŒæŒ¨ä¸ªå°è¯•æ‰€æœ‰çš„HandlerMappingçœ‹æ˜¯å¦æœ‰è¯·æ±‚ä¿¡æ¯ã€‚ å¦‚æœæœ‰å°±æ‰¾åˆ°è¿™ä¸ªè¯·æ±‚å¯¹åº”çš„handler å¦‚æœæ²¡æœ‰å°±æ˜¯ä¸‹ä¸€ä¸ª HandlerMapping æˆ‘ä»¬éœ€è¦ä¸€äº›è‡ªå®šä¹‰çš„æ˜ å°„å¤„ç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­æ”¾HandlerMappingã€‚è‡ªå®šä¹‰ HandlerMapping 12345678910111213141516171819202122protected HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception { if (this.handlerMappings != null) { for (HandlerMapping mapping : this.handlerMappings) { HandlerExecutionChain handler = mapping.getHandler(request); if (handler != null) { return handler; } } } return null;} protected HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception { if (this.handlerMappings != null) { for (HandlerMapping mapping : this.handlerMappings) { HandlerExecutionChain handler = mapping.getHandler(request); if (handler != null) { return handler; } } } return null; } 3ã€æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£ 1.1ã€æ³¨è§£ï¼š @PathVariableï¼ˆè·¯å¾„ï¼‰ã€@RequestHeaderï¼ˆheaderï¼‰ã€@ModelAttributeï¼ˆï¼‰ã€@RequestParamï¼ˆè¯·æ±‚å‚æ•°ï¼‰ã€@MatrixVariableï¼ˆçŸ©é˜µå˜é‡ ç”¨ï¼›éš”å¼€ï¼‰ã€@CookieValueï¼ˆcookieï¼‰ã€@RequestBodyï¼ˆè¯·æ±‚ä½“ï¼‰ã€@RequestAttributeï¼ˆè¯·æ±‚åŸŸï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147@RestControllerpublic class ParameterTestController { // car/2/owner/zhangsan @GetMapping(&quot;/car/{id}/owner/{username}&quot;) public Map&lt;String,Object&gt; getCar(@PathVariable(&quot;id&quot;) Integer id, @PathVariable(&quot;username&quot;) String name, @PathVariable Map&lt;String,String&gt; pv, @RequestHeader(&quot;User-Agent&quot;) String userAgent, @RequestHeader Map&lt;String,String&gt; header, @RequestParam(&quot;age&quot;) Integer age, @RequestParam(&quot;inters&quot;) List&lt;String&gt; inters, @RequestParam Map&lt;String,String&gt; params, @CookieValue(&quot;_ga&quot;) String _ga, @CookieValue(&quot;_ga&quot;) Cookie cookie){ Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();// map.put(&quot;id&quot;,id);// map.put(&quot;name&quot;,name);// map.put(&quot;pv&quot;,pv);// map.put(&quot;userAgent&quot;,userAgent);// map.put(&quot;headers&quot;,header); map.put(&quot;age&quot;,age); map.put(&quot;inters&quot;,inters); map.put(&quot;params&quot;,params); map.put(&quot;_ga&quot;,_ga); System.out.println(cookie.getName()+&quot;===&gt;&quot;+cookie.getValue()); return map; } @PostMapping(&quot;/save&quot;) public Map postMethod(@RequestBody String content){ Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); map.put(&quot;content&quot;,content); return map; } //1ã€è¯­æ³•ï¼š è¯·æ±‚è·¯å¾„ï¼š/cars/sell;low=34;brand=byd,audi,yd //2ã€SpringBooté»˜è®¤æ˜¯ç¦ç”¨äº†çŸ©é˜µå˜é‡çš„åŠŸèƒ½ // æ‰‹åŠ¨å¼€å¯ï¼šåŸç†ã€‚å¯¹äºè·¯å¾„çš„å¤„ç†ã€‚UrlPathHelperè¿›è¡Œè§£æã€‚ // removeSemicolonContentï¼ˆç§»é™¤åˆ†å·å†…å®¹ï¼‰æ”¯æŒçŸ©é˜µå˜é‡çš„ //3ã€çŸ©é˜µå˜é‡å¿…é¡»æœ‰urlè·¯å¾„å˜é‡æ‰èƒ½è¢«è§£æ @GetMapping(&quot;/cars/{path}&quot;) public Map carsSell(@MatrixVariable(&quot;low&quot;) Integer low, @MatrixVariable(&quot;brand&quot;) List&lt;String&gt; brand, @PathVariable(&quot;path&quot;) String path){ Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); map.put(&quot;low&quot;,low); map.put(&quot;brand&quot;,brand); map.put(&quot;path&quot;,path); return map; } // /boss/1;age=20/2;age=10 @GetMapping(&quot;/boss/{bossId}/{empId}&quot;) public Map boss(@MatrixVariable(value = &quot;age&quot;,pathVar = &quot;bossId&quot;) Integer bossAge, @MatrixVariable(value = &quot;age&quot;,pathVar = &quot;empId&quot;) Integer empAge){ Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); map.put(&quot;bossAge&quot;,bossAge); map.put(&quot;empAge&quot;,empAge); return map; }}@RestControllerpublic class ParameterTestController { // car/2/owner/zhangsan @GetMapping(&quot;/car/{id}/owner/{username}&quot;) public Map&lt;String,Object&gt; getCar(@PathVariable(&quot;id&quot;) Integer id, @PathVariable(&quot;username&quot;) String name, @PathVariable Map&lt;String,String&gt; pv, @RequestHeader(&quot;User-Agent&quot;) String userAgent, @RequestHeader Map&lt;String,String&gt; header, @RequestParam(&quot;age&quot;) Integer age, @RequestParam(&quot;inters&quot;) List&lt;String&gt; inters, @RequestParam Map&lt;String,String&gt; params, @CookieValue(&quot;_ga&quot;) String _ga, @CookieValue(&quot;_ga&quot;) Cookie cookie){ Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();// map.put(&quot;id&quot;,id);// map.put(&quot;name&quot;,name);// map.put(&quot;pv&quot;,pv);// map.put(&quot;userAgent&quot;,userAgent);// map.put(&quot;headers&quot;,header); map.put(&quot;age&quot;,age); map.put(&quot;inters&quot;,inters); map.put(&quot;params&quot;,params); map.put(&quot;_ga&quot;,_ga); System.out.println(cookie.getName()+&quot;===&gt;&quot;+cookie.getValue()); return map; } @PostMapping(&quot;/save&quot;) public Map postMethod(@RequestBody String content){ Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); map.put(&quot;content&quot;,content); return map; } //1ã€è¯­æ³•ï¼š è¯·æ±‚è·¯å¾„ï¼š/cars/sell;low=34;brand=byd,audi,yd //2ã€SpringBooté»˜è®¤æ˜¯ç¦ç”¨äº†çŸ©é˜µå˜é‡çš„åŠŸèƒ½ // æ‰‹åŠ¨å¼€å¯ï¼šåŸç†ã€‚å¯¹äºè·¯å¾„çš„å¤„ç†ã€‚UrlPathHelperè¿›è¡Œè§£æã€‚ // removeSemicolonContentï¼ˆç§»é™¤åˆ†å·å†…å®¹ï¼‰æ”¯æŒçŸ©é˜µå˜é‡çš„ //3ã€çŸ©é˜µå˜é‡å¿…é¡»æœ‰urlè·¯å¾„å˜é‡æ‰èƒ½è¢«è§£æ @GetMapping(&quot;/cars/{path}&quot;) public Map carsSell(@MatrixVariable(&quot;low&quot;) Integer low, @MatrixVariable(&quot;brand&quot;) List&lt;String&gt; brand, @PathVariable(&quot;path&quot;) String path){ Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); map.put(&quot;low&quot;,low); map.put(&quot;brand&quot;,brand); map.put(&quot;path&quot;,path); return map; } // /boss/1;age=20/2;age=10 @GetMapping(&quot;/boss/{bossId}/{empId}&quot;) public Map boss(@MatrixVariable(value = &quot;age&quot;,pathVar = &quot;bossId&quot;) Integer bossAge, @MatrixVariable(value = &quot;age&quot;,pathVar = &quot;empId&quot;) Integer empAge){ Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); map.put(&quot;bossAge&quot;,bossAge); map.put(&quot;empAge&quot;,empAge); return map; }} å…­ã€åŸºæœ¬ç»„ä»¶ Spring Profiles ä¸åŒç¯å¢ƒä¸åŒé…ç½®æ–‡ä»¶ 12345678application.propertiesï¼ˆé»˜è®¤ï¼Œé…ç½®é€‰æ‹©å…¶ä»–#spring.profiles.active=testï¼ˆå…¶ä»–é…ç½®æ–‡ä»¶çš„profileï¼‰æŒ‡å®šä¸åŒç¯å¢ƒé…ç½®application-{profile}.propertiesï¼‰è¿™æ ·æ¯æ¬¡éƒ¨ç½²éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯é€šè¿‡jaråŒ…è¿è¡Œæ—¶çš„å‘½ä»¤å¦‚ä¸‹ï¼šjava -jar target/spring-boot-helloworld-0.0.1.jar --spring.profiles.active=prodapplication-dev.propertiesapplication-prod.propertiesapplication-test.properties spring batch[TODO] Swagger æ¥å£æ–‡æ¡£ï¼Œæ¥å£æµ‹è¯• å¯åŠ¨ç±»æ·»åŠ æ³¨è§£@EnableSwagger2Doc 123456789101112131415161718192021222324252627282930313233343536@Apiï¼šç”¨åœ¨è¯·æ±‚çš„ç±»ä¸Šï¼Œè¡¨ç¤ºå¯¹ç±»çš„è¯´æ˜ tags=&quot;è¯´æ˜è¯¥ç±»çš„ä½œç”¨ï¼Œå¯ä»¥åœ¨UIç•Œé¢ä¸Šçœ‹åˆ°çš„æ³¨è§£&quot; value=&quot;è¯¥å‚æ•°æ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œåœ¨UIç•Œé¢ä¸Šä¹Ÿçœ‹åˆ°ï¼Œæ‰€ä»¥ä¸éœ€è¦é…ç½®&quot; @ApiOperationï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¯´æ˜æ–¹æ³•çš„ç”¨é€”ã€ä½œç”¨ value=&quot;è¯´æ˜æ–¹æ³•çš„ç”¨é€”ã€ä½œç”¨&quot; notes=&quot;æ–¹æ³•çš„å¤‡æ³¨è¯´æ˜&quot; @ApiImplicitParamsï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å‚æ•°è¯´æ˜ @ApiImplicitParamï¼šç”¨åœ¨@ApiImplicitParamsæ³¨è§£ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªè¯·æ±‚å‚æ•°çš„å„ä¸ªæ–¹é¢ nameï¼šå‚æ•°å valueï¼šå‚æ•°çš„æ±‰å­—è¯´æ˜ã€è§£é‡Š requiredï¼šå‚æ•°æ˜¯å¦å¿…é¡»ä¼  paramTypeï¼šå‚æ•°æ”¾åœ¨å“ªä¸ªåœ°æ–¹ Â· header --&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestHeader Â· query --&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestParam Â· pathï¼ˆç”¨äºrestfulæ¥å£ï¼‰--&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@PathVariable Â· bodyï¼ˆä¸å¸¸ç”¨ï¼‰ Â· formï¼ˆä¸å¸¸ç”¨ï¼‰ dataTypeï¼šå‚æ•°ç±»å‹ï¼Œé»˜è®¤Stringï¼Œå…¶å®ƒå€¼dataType=&quot;Integer&quot; defaultValueï¼šå‚æ•°çš„é»˜è®¤å€¼ @ApiResponsesï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å“åº” @ApiResponseï¼šç”¨åœ¨@ApiResponsesä¸­ï¼Œä¸€èˆ¬ç”¨äºè¡¨è¾¾ä¸€ä¸ªé”™è¯¯çš„å“åº”ä¿¡æ¯ codeï¼šæ•°å­—ï¼Œä¾‹å¦‚400 messageï¼šä¿¡æ¯ï¼Œä¾‹å¦‚&quot;è¯·æ±‚å‚æ•°æ²¡å¡«å¥½&quot; responseï¼šæŠ›å‡ºå¼‚å¸¸çš„ç±» @ApiModelï¼šç”¨äºå“åº”ç±»ä¸Šï¼Œè¡¨ç¤ºä¸€ä¸ªè¿”å›å“åº”æ•°æ®çš„ä¿¡æ¯ ï¼ˆè¿™ç§ä¸€èˆ¬ç”¨åœ¨poståˆ›å»ºçš„æ—¶å€™ï¼Œä½¿ç”¨@RequestBodyè¿™æ ·çš„åœºæ™¯ï¼Œ è¯·æ±‚å‚æ•°æ— æ³•ä½¿ç”¨@ApiImplicitParamæ³¨è§£è¿›è¡Œæè¿°çš„æ—¶å€™ï¼‰ @ApiModelPropertyï¼šç”¨åœ¨å±æ€§ä¸Šï¼Œæè¿°å“åº”ç±»çš„å±æ€§","link":"/2022/03/19/Draft/2021/SpringBoot/"},{"title":"ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ","text":"æ–°å­¦å››é—® **WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ï¼š**ç®¡ç†çŸ¥è¯†ã€èŒç§°ç¦åˆ© **WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ï¼š**æ•™æå‡†å¤‡:è§†é¢‘ä¸€å¥—ï¼Œå†å¹´çœŸé¢˜ HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘ï¼šå¹³æ¿åšçœŸé¢˜ï¼ŒæŸ¥é˜…è®°å½•é™Œç”Ÿæ¦‚å¿µï¼Œç”µè„‘Markdownè®°ä¸‹é‡è¦ç¬”è®° **LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ï¼š**åº”è¯•åå®è·µ é¡¹ç›®ç¤ºä¾‹ï¼šè¿½è‚–å°å§çš„å·¥ç¨‹ å‡†å¤‡ï¼šæ±Ÿå±±è€å¸ˆï¼ˆè§†é¢‘ï¼‰ï¼Œåå¤§ç®¡ç†ï¼ˆæ‰“å°ï¼‰ï¼Œå†å¹´çœŸé¢˜ç­”æ¡ˆï¼ˆï¼‰ æŠ€å·§ï¼šå¤šå£è¯€ï¼Œ&quot;ä¸æ‹©æ‰‹æ®µè®°å¿†&quot;ï¼Œè®ºæ–‡å­—è¦ç»ƒï¼Œé”™ä¸æ¶‚ï¼Œåå¤§ç®¡ç†è¦æ»šç“œçƒ‚ç†Ÿï¼Œé€Ÿçœ‹è§†é¢‘ï¼Œé€‚å½“ç¬”è®°è®°å¿†ï¼Œåšé¢˜å¯¹åº”ç»†åŒ–ï¼Œè®ºæ–‡æå‰å‡†å¤‡ è€ƒè¯•è®¡åˆ’ï¼š æ—¶é—´æ®µ 8.17-11.06ï¼ˆ82ï¼‰å‘¨æœ«ä¸¤å¤©ã€ä¸“ä¸šçŸ¥è¯†ï¼Œè½¯è€ƒã€‘ å·¥ä½œæ—¥ã€ä¸­åˆä¸€ä¸ªåŠå°æ—¶ä¸“ä¸šçŸ¥è¯†ï¼Œä¸‹ç­7-9ä¸¤ä¸ªå°æ—¶ä»¥ä¸Šè½¯è€ƒã€‘ é˜¶æ®µ è¯¦ç»†æ­¥éª¤ å®Œæˆæƒ…å†µ ç”¨æ—¶ 8.17-9.15 å®Œæˆæ‰€æœ‰è§†é¢‘å¹¶ç¬”è®°ï¼ŒèƒŒè¯µåŸºç¡€çŸ¥è¯†ã€é€‰æ‹©ï¼Œæ¡ˆä¾‹ï¼Œè®¡ç®—ï¼Œè®ºæ–‡ã€‘ä¸“é¡¹ç ”ç©¶ 17ã€2ã€‘18ã€1ã€‘19ã€ã€‘20ã€1ã€‘21ã€ã€‘22ã€ã€‘23ã€1ã€‘24ã€1ã€‘25ã€2ã€‘26ã€2ã€‘27ã€ã€‘28ã€1ã€‘29ã€ã€‘30ã€3ã€‘31ã€ã€‘1ã€2ã€‘2ã€2ã€‘3ã€2ã€‘4ã€ã€‘5ã€ã€‘6ã€3ã€‘7ã€2åŸºç¡€åå¤§ç®¡ç†å®Œæˆï¼Œæ¡ˆä¾‹ä¸¤èŠ‚ï¼Œè®¡ç®—ä¸¤èŠ‚ã€‘8ã€3ã€‘9ã€3ã€‘æ¡ˆä¾‹å®Œæˆï¼Œè®¡ç®—å››èŠ‚10ã€13ã€4è®¡ç®—å®Œã€‘ å®Œæˆ 9.15-9.30 16-18å¹´6å¥—çœŸé¢˜ç²¾åšå¹¶åˆ†ç±»æ€»ç»“ ï¼ˆä¸€ï¼‰ åšçœŸé¢˜å¥—é¢˜å¹³æ¿æˆ–æ‰“å°ï¼Œå¯¹åº”åŸºç¡€é€Ÿè§ˆï¼Œé‡ç‚¹Ankiè®°å¿†ï¼Œé”™é¢˜å½’ç»“ï¼Œè®ºæ–‡è¯¾å¼€å§‹ã€‚é—²æ—¶è½¯ä»¶åˆ·é¢˜ã€‚æ„å»ºçŸ¥è¯†æ¡†æ¶ã€‚16å¹´ä¹‹å‰20å¥—çš„ç›´æ¥çœ‹è§£æï¼Œé™Œç”Ÿè®°å½• ä¸‰å¤©ä¸€å¥—ï¼ŒçŸ¥è¯†ç‚¹Ankiä¸€éå¹¶æ·»åŠ ï¼Œç‹ è¡¥åŸºç¡€ 16ã€2005ä¸Šã€‘26ã€2005ä¸‹ã€‘ 9.30-10.15 19å¹´2å¥—çœŸé¢˜ç²¾åšå¹¶åˆ†ç±»æ€»ç»“ ï¼ˆäºŒï¼‰ åŒä¸Šï¼Œå®Œæˆï¼ˆä¸€ï¼‰æœªå®Œæˆçš„ çœŸé¢˜å¤–ï¼Œè®ºæ–‡æ¡†æ¶å‡†å¤‡å¹¶èƒŒè¯µ å®Œæˆ 10.15-10.30 20ã€21å¹´ä¸‰å¥—çœŸé¢˜å®šæ—¶å¹¶åˆ†ç±»æ€»ç»“ ï¼ˆä¸€ï¼‰ æ€»ç»“ï¼Œæ‰€æœ‰é”™é¢˜æ’æŸ¥ï¼ŒæŸ¥æ¼è¡¥ç¼º äº”å¤©å‘¨æœ«ä¸€æ¬¡çœŸå®æ¨¡æ‹Ÿï¼Œè®ºæ–‡å†™åæ€»ç»“ï¼Œç»ƒç»ƒå­— å®Œæˆ 10.30-11.05 è®ºæ–‡æ¡†æ¶æ¢³ç†ï¼Œæ¨¡æ‹Ÿç»ƒå­—é€Ÿåº¦ è€ƒå‰å‡†å¤‡ï¼ˆå·¥å…·ï¼Œè€ƒåœºï¼Œæ˜¯å¦ç•™å®¿ï¼‰ åŠ æ²¹ï¼ å€’è®¡æ—¶ï¼š3 è€ƒè¯•ä»‹ç»ï¼Œå­¦ä¹ æ–¹æ³•ï¼Œé‡éš¾ç‚¹ï¼Œ10å¤§çŸ¥è¯†åŸŸæ¦‚è¿° è€ƒè¯•ä»‹ç» é€šè¿‡è€ƒè¯•ç›¸å½“äºæ‹¿åˆ°é«˜çº§èŒç§°ï¼Œéš¾åº¦ä¸Šåˆå¤§äºè®ºæ–‡å¤§äºæ¡ˆä¾‹ã€‚ ä½œç”¨ æ–¹æ³• è”æƒ³è®°å¿†ï¼ŒçŸ¥è¯†æœ¯è¯­å“ªä¸ªæ¿å—ï¼Œæ¿å—ä¸‹é‚£äº›è¿‡ç¨‹ï¼Œè¾“å…¥è¾“å‡ºå·¥å…·æŠ€æœ¯ï¼Œè®¡ç®—ç›¸å…³ï¼Œé™Œç”Ÿè¯æ±‡ é‡è§†åŸºç¡€ï¼ˆä¸Šåˆï¼‰ï¼Œè€ƒå“ªé‡Œå­¦å“ªé‡Œï¼Œé‡è§†çœŸé¢˜ï¼Œè´¹æ›¼å­¦ä¹ æ³•ï¼Œè‰¾å®¾æµ©æ–¯è®°å¿†ï¼Œåˆ©ç”¨ç¢ç‰‡æ—¶é—´ï¼Œè€ƒä¸Šå†³å¿ƒï¼Œ2/8æ³•åˆ™ï¼ŒPDCAå¾ªç¯ï¼Œäººæœºæ–™æ³•ç¯ï¼Œæ— äº‹ä¸é¡¹ç›®ï¼Œé”™é¢˜ï¼ŒçŸ¥è¯†ç‚¹ANKIè®°å½•è®°å¿† ç‹—ï¼ˆæ²Ÿé€šï¼‰å­ï¼ˆè´¨é‡ï¼‰æ•´ï¼ˆæ•´ä½“ï¼‰èŒƒï¼ˆèŒƒå›´ï¼‰è¿›ï¼ˆè¿›åº¦ï¼‰ï¼Œæˆï¼ˆæˆæœ¬ï¼‰äººï¼ˆäººåŠ›èµ„æºï¼Œå¹²ç³»äººï¼‰é£ï¼ˆé£é™©ï¼‰é‡‡ï¼ˆé‡‡è´­ï¼‰ ä½‚å¸†è¿›åŸå¿—ï¼ŒåŠ›å¤Ÿé£é‡‡å¹²ã€‚ æŒç®¡è´¨æ£€è¾¹ç•Œï¼Œé¬¼æ¿€é’‰å¨ƒç¼ºæï¼Œé¬¼ç«ç‰Œå­ç—´æï¼Œé¬¼æ•…ç‹±æï¼Œé¬¼é£Ÿæï¼Œé¬¼ç¥–è§å† ï¼Œé¬¼æ£ºå­”ï¼Œé¬¼æ—¶é†’ä¸¤å˜¤å­”ï¼Œé¬¼è¯†å­”å§ï¼Œè¯†é¬¼æ£ºå­” æ•´ ç«  ç®¡ æŒ‡ ç›‘å˜ ç»“ èŒƒ è§„é›†å®šW ç¡®æ§ è¿› è§„æ´»æ’èµ„æŒåˆ¶ æ§ æˆ è§„ä¼°é¢„ æ§ è´¨ è§„ å® æ§ åŠ› è§„ ç»„å»ºç®¡ æ²Ÿ è§„ ç®¡ æ§ é£ è§„è¯†æ€§é‡åº” æ§ é‡‡ è§„å® æ§ Â·Â·Â·ç»“ äºº è¯† è§„ ç®¡ æ§ æ‰€æœ‰ç®¡ç†çš„ç»¼åˆæ€§ç®¡ç† è€ƒç‚¹é¢˜å‹ï¼Œå…ˆåšé¢˜å†å¯¹åº”çœ‹ä¹¦ç»†åŒ– é‡è§†å‘¨æœ«å¤§æ®µæ—¶é—´ ä¸‰ä» ä»è¿‡ç¨‹æƒ³ç»“æœï¼Œä»ç»“æœçŸ¥è¾“å…¥ï¼Œä»è¾“å…¥é€‰å·¥å…· å››å¾— ä¸€å¾—æ–‡ä»¶è®¡åˆ’ï¼›äºŒå¾—æˆæœæ•°æ®ï¼›ä¸‰å¾—å˜æ›´è¯·æ±‚ï¼›å››çš„å› ç´ èµ„äº§ å…±æ€§æ€»ç»“ 1ã€ä¸Šä¸€ä¸ªè¿‡ç¨‹çš„è¾“å‡ºå¤§éƒ¨åˆ†æ˜¯ä¸‹ä¸€ä¸ªè¿‡ç¨‹çš„è¾“å…¥ 2ã€è®¡åˆ’å’Œæ–‡ä»¶æ˜¯ä¸ä¸€æ ·çš„ï¼ˆæ¯ä¸ªè¾“å…¥éƒ½æœ‰è®¡åˆ’å’Œæ–‡ä»¶ï¼‰ 3ã€è¢«æ‰¹å‡†çš„å˜æ›´è¯·æ±‚çº¦ç­‰äºè®¡åˆ’ 4ã€åœ¨æ‰§è¡Œå’Œç›‘æ§è¿‡ç¨‹äº§ç”Ÿæ–°çš„å˜æ›´è¯·æ±‚ï¼ˆå˜æ›´è¯·æ±‚åŒ…æ‹¬å˜ä»€ä¹ˆå’Œæ€ä¹ˆå˜ï¼Œè¿™æ˜¯å˜æ›´è¯·æ±‚å’Œçº æ­£ã€é¢„é˜²ã€ç¼ºé™·ä¿®å¤çš„å…³ç³»ï¼‰ 5ã€æ‰§è¡Œè¿‡ç¨‹äº§ç”Ÿå·¥ä½œç»©æ•ˆæ•°æ®---æ•°æ®+èƒŒæ™¯åœ¨ç›‘æ§è¿‡ç¨‹ç»„æˆä¸ºäº†å·¥ä½œç»©æ•ˆä¿¡æ¯ç„¶åè¾“å‡ºå·¥ä½œç»©æ•ˆæŠ¥å‘Šæ³¨æ„å·¥ä½œç»©æ•ˆæ•°æ®æ˜¯æ‰§è¡Œè¿‡ç¨‹çš„è¾“å‡ºâ†’é‚£ä¹ˆå°±æ˜¯ç›‘æ§çš„è¾“å…¥â†’ç›‘æ§çš„è¾“å‡ºå°±æˆäº†å·¥ä½œç»©æ•ˆä¿¡æ¯ 6ã€é€šè¿‡è¿‡ç¨‹çš„å«ä¹‰è®°å¿†æ¯ä¸ªè¿‡ç¨‹ç»„æœ€ä¸»è¦çš„æˆæœï¼ˆè¾“å‡ºï¼‰ï¼ 7ã€ç›‘æ§è¿‡ç¨‹ç»„æ¯ä¸ªè¿‡ç¨‹éƒ½æœ‰è®¡åˆ’+å·¥ä½œç»©æ•ˆæŠ¥å‘Šè¦è®°ä½æˆ‘è¯´çš„ç›‘æ§çš„é‚£äº›åŸç† è·Ÿè¸ªè¿›å±•â†’æ‹¿ç€è®¡åˆ’çš„è¿™æŠŠå°ºå­æµ‹é‡å®é™…çš„å·¥ä½œç»©æ•ˆæŠ¥å‘Šâ†’åå·®è®¡ç®—â†’åå·®è¯„ä¼°ã€åˆ†ææ˜¯å¦å˜æ›´â†’é¢„æµ‹â†’è¶‹åŠ¿åˆ†æ 8ã€é¡¹ç›®ç®¡ç†è®¡åˆ’å’Œå…¶å®ƒå­è®¡åˆ’ï¼ˆèŒƒå›´ç®¡ç†è®¡åˆ’ã€è¿›åº¦ç®¡ç†è®¡åˆ’ã€è´¨é‡ç®¡ç†è®¡åˆ’ç­‰ï¼‰åŒºåˆ«å’Œè”ç³»ä¸‹é¢ä»¥é¡¹ç›®ç®¡ç†è®¡åˆ’å’Œå…¶ä¸­ä¸€ä¸ªå­è®¡åˆ’ä¸ºä¾‹å­æ€»ç»“è§„å¾‹å¦‚ä¸‹ï¼šäº†è§£åå¯¹å…¶å®ƒè¿‡ç¨‹å¸®åŠ©ç”šå¤š ï¼ˆ1ï¼‰å½“å­è®¡åˆ’æˆ–åŸºå‡†æ˜¯ä¸»è¦çš„è¾“å…¥æ—¶â†’ä¸“é—¨åˆ—å‡ºï¼ˆå¦‚å®šä¹‰èŒƒå›´ã€æ”¶é›†éœ€æ±‚ç­‰è¿‡ç¨‹ï¼‰ ï¼ˆ2ï¼‰å½“å­è®¡åˆ’æˆ–åŸºå‡†æ˜¯é¦–æ¬¡è¾“å‡ºæ—¶â†’ä¸“é—¨åˆ—å‡ºï¼ˆå¦‚èŒƒå›´ç®¡ç†è®¡åˆ’ï¼‰ï¼Œä»¥åçš„è¾“å‡ºéƒ½ä»¥â€œé¡¹ç›®ç®¡ç†è®¡åˆ’æ›´æ–°â€çš„å½¢å¼å‡ºç° ï¼ˆ3ï¼‰å­è®¡åˆ’æˆ–åŸºå‡†æ˜¯ä½œä¸ºè¾“å‡ºæ—¶å€™â†’é¡¹ç›®ç®¡ç†è®¡åˆ’å°†ä½œä¸ºè¾“å…¥ï¼ˆå¦‚è§„åˆ’èŒƒå›´ç®¡ç†ï¼‰ ï¼ˆ4ï¼‰å¯¹æ§åˆ¶è¿‡ç¨‹ç»„æ¥è¯´ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯é¡¹ç›®ç®¡ç†è®¡åˆ’è€Œä¸æ˜¯å…·ä½“çš„å­è®¡åˆ’ é‡ç‚¹ï¼Œåå¤§ç®¡ç† 1.è®ºæ–‡å†™ä½œåŸºæœ¬ä»‹ç» â€‹ äºŒé€‰ä¸€ï¼Œä¸¤å°æ—¶ï¼Œæ³¨æ„å†™å­—æ•´æ´ã€‚2500å·¦å³ æ‘˜è¦300 æ­£æ–‡2000ã€‚ â€‹ å­¦å¥½ç†è®ºï¼Œå†™å­—é€Ÿåº¦æ•´æ´ï¼Œå¤šçœ‹èŒƒæ–‡ï¼Œé€‰å®šç´ æï¼Œåˆ«å†™å…·ä½“é¡¹ç›®åç§°ã€‚ 2.ä¿¡æ¯åŒ–ä¸ä¿¡æ¯ç³»ç»Ÿã€23ã€‘ ç½‘ç»œ ç‰©æ•°ç½‘ä¼ ä¼šè¡¨åº” OSI/RMï¼ˆOpen System Interconnection/Reference Modelï¼Œå¼€æ”¾ç³»ç»Ÿäº’è¿å‚è€ƒæ¨¡å‹ï¼‰ ç‰©ç†å±‚ï¼šæ¯”ç‰¹ï¼Œä¸²è¡Œä¼ è¾“ã€‚æ•°æ®é“¾è·¯å±‚ï¼šå¸§ã€‚ç½‘ç»œå±‚ï¼šåˆ†ç»„ï¼Œå¤„ç†ä¸å¯»å€å’Œä¼ è¾“æœ‰å…³çš„ç®¡ç†é—®é¢˜ï¼Œæä¾›ç‚¹å¯¹ç‚¹çš„è¿æ¥ã€‚ä¼ è¾“å±‚ï¼šæŠ¥æ–‡ï¼Œå»ºç«‹ã€ç»´æŠ¤å’Œæ’¤é”€ä¼ è¾“è¿æ¥ï¼ˆç«¯å¯¹ç«¯çš„è¿æ¥ï¼‰ï¼Œå¹¶è¿›è¡Œæµé‡æ§åˆ¶å’Œå·®é”™æ§åˆ¶ã€‚ æµ‹è¯•ï¼Œè½¯ä»¶éœ€æ±‚ï¼Œç”Ÿå‘½å‘¨æœŸï¼Œé¢å‘å¯¹è±¡ï¼Œä¸­é—´ä»¶ï¼Œæ–°ç½‘ç»œæŠ€æœ¯ UMLï¼Œæµ‹è¯• é‡ç‚¹ æ–°ä¸€ä»£ä¿¡æ¯æŠ€æœ¯ï¼ˆè‹±è¯­å•è¯ï¼‰ï¼Œç‰©è”ç½‘ï¼Œå¤§æ•°æ®ï¼Œäº‘è®¡ç®—ï¼Œç§»åŠ¨äº’è”ç½‘ï¼Œæ™ºæ…§åŸå¸‚ï¼Œäº’è”ç½‘+ï¼ˆäº’è”ç½‘+å„ç§ä¼ ç»Ÿè¡Œä¸šï¼‰ï¼Œæ™ºèƒ½åˆ¶é€ 2025ï¼ŒARï¼ŒVRï¼ŒAIï¼ŒåŒºå—é“¾ï¼Œç‰¹åˆ«è”ç½‘ï¼Œ5Gï¼Œåä¸ºé¸¿è’™éº’éºŸï¼Œä¸€å¸¦ä¸€è·¯ï¼Œä¸¤åŒ–èåˆ ä¿¡æ¯å®‰å…¨æŠ€æœ¯ 3.ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†åŸºç¡€ é¡¹ç›®ç‰¹ç‚¹ï¼šï¼ˆ1ï¼‰ä¸´æ—¶æ€§ï¼šæœ‰æ˜ç¡®çš„å¼€å§‹å’Œç»“æŸæ—¶é—´ã€‚ ï¼ˆ2ï¼‰ç‹¬ç‰¹æ€§ï¼šä¸–ä¸Šæ²¡æœ‰ä¸¤ä¸ªå®Œå…¨ç›¸åŒçš„é¡¹ç›®ã€‚ ï¼ˆ3ï¼‰æ¸è¿›æ˜ç»†æ€§ï¼šå‰æœŸåªèƒ½ç²—ç•¥å®šä¹‰ï¼Œç„¶åé€æ¸æ˜æœ—ã€å®Œå–„å’Œç²¾ç¡®ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å˜æ›´ä¸å¯é¿å…ï¼Œæ‰€ä»¥è¦æ§åˆ¶å˜æ›´ã€‚ **é¡¹ç›®çš„ç»„ç»‡æ–¹å¼ï¼š**èŒèƒ½å‹ã€é¡¹ç›®å‹ã€çŸ©é˜µå‹ 4.ç«‹é¡¹ç®¡ç† 2 ï¼ˆä¸€ä¸ªé¡¹ç›®ä»æå‡ºç”³è¯·åˆ°æ‰¹å‡†ç«‹é¡¹ï¼‰æ‹›æŠ•æ ‡ï¼ŒåˆåŒï¼Œé‡‡è´­ é¡¹ç›®å»ºè®®ä¹¦ï¼ˆç«‹é¡¹ç”³è¯·)ä¸»è¦å†…å®¹ï¼šé¡¹ç›®çš„å¿…è¦æ€§ã€é¡¹ç›®çš„å¸‚åœºé¢„æµ‹ã€äº§å“æ–¹æ¡ˆæˆ–æœåŠ¡çš„å¸‚åœºé¢„æµ‹ã€é¡¹ç›®å»ºè®¾å¿…éœ€çš„æ¡ä»¶ç­‰ è®¡ç®—: åˆ©ç‡ åˆ©ç‡æœ‰å•åˆ©å’Œå¤åˆ©ï¼Œå•åˆ©æ¯=æœ¬é‡‘Ã—åˆ©ç‡Ã—æœŸé™ï¼ŒF=PÃ—ï¼ˆ1+iï¼‰n Fï¼šå¤åˆ©ç»ˆå€¼ Pï¼šæœ¬é‡‘ iï¼šåˆ©ç‡ Nï¼šåˆ©ç‡è·å–æ—¶é—´çš„æ•´æ•°å€ å‡€ç°å€¼ï¼ˆNet Present Valueï¼ŒNPVï¼‰ å‡€ç°å€¼å¤§äºé›¶åˆ™æ–¹æ¡ˆå¯è¡Œï¼Œä¸”å‡€ç°å€¼è¶Šå¤§ï¼Œæ–¹æ¡ˆè¶Šä¼˜ï¼ŒæŠ•èµ„æ•ˆç›Šè¶Šå¥½ã€‚ NPV çš„è®¡ç®—æ­¥éª¤å¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰æ ¹æ®é¡¹ç›®çš„èµ„æœ¬ç»“æ„è®¾å®šé¡¹ç›®çš„æŠ˜ç°ç‡ã€‚ ï¼ˆ2ï¼‰è®¡ç®—æ¯å¹´é¡¹ç›®ç°é‡‘æµé‡çš„å‡€å€¼ã€‚ ï¼ˆ3ï¼‰æ ¹æ®è®¾å®šçš„æŠ˜ç°ç‡è®¡ç®—æ¯å¹´çš„å‡€ç°å€¼ã€‚ ï¼ˆ4ï¼‰å°†å‡€ç°å€¼ç´¯åŠ èµ·æ¥ã€‚ å‡€ç°å€¼ç‡ å‡€ç°å€¼ç‡ï¼ˆNPVRï¼‰=é¡¹ç›®çš„å‡€ç°å€¼ï¼ˆNPVï¼‰/åŸå§‹æŠ•èµ„çš„ç°å€¼åˆè®¡ æŠ•èµ„å›æ”¶æœŸ æ‹›æ ‡ æ‹›æ ‡ï¼ˆæ‹›æ ‡å…¬å‘Šï¼Œæ‹›æ ‡æ–‡ä»¶ï¼Œï¼‰ ä¸­æ ‡é€šçŸ¥ä¹¦å‘å‡ºä¹‹æ—¥èµ·ä¸‰åæ—¥å†…åº”å½“ç­¾è®¢åˆåŒï¼Œæˆªæ­¢æ—¶é—´15æ—¥å‰è¿›è¡Œå¿…è¦çš„æ¾„æ¸…æˆ–è€…ä¿®æ”¹ï¼Œæ‹›æ ‡äººåº”å½“ç¡®å®šæŠ•æ ‡äººç¼–åˆ¶æŠ•æ ‡æ–‡ä»¶æ‰€éœ€è¦çš„åˆç†æ—¶é—´ã€‚ä½†æ˜¯ï¼Œä¾æ³•å¿…é¡»è¿›è¡Œæ‹›æ ‡çš„é¡¹ç›®ï¼Œè‡ªæ‹›æ ‡æ–‡ä»¶å¼€å§‹å‘å‡ºä¹‹æ—¥èµ·è‡³æŠ•æ ‡äººæäº¤æŠ•æ ‡æ–‡ä»¶æˆªæ­¢ä¹‹æ—¥æ­¢ï¼Œæœ€çŸ­ä¸å¾—å°‘äº20æ—¥ã€‚ æŠ•æ ‡ æŠ•æ ‡äººå°‘äºä¸‰ä¸ªçš„ï¼Œæ‹›æ ‡äººåº”å½“é‡æ–°æ‹›æ ‡ã€‚åœ¨æ‹›æ ‡æ–‡ä»¶è¦æ±‚æäº¤æŠ•æ ‡æ–‡ä»¶çš„æˆªæ­¢æ—¶é—´åé€è¾¾çš„æŠ•æ ‡æ–‡ä»¶ï¼Œæ‹›æ ‡äººåº”å½“æ‹’æ”¶ã€‚ å¼€æ ‡ å¼€æ ‡åº”å½“åœ¨æ‹›æ ‡æ–‡ä»¶ç¡®å®šçš„æäº¤æŠ•æ ‡æ–‡ä»¶æˆªæ­¢æ—¶é—´çš„åŒä¸€æ—¶é—´å…¬å¼€è¿›è¡Œã€‚å¼€æ ‡åœ°ç‚¹åº”å½“ä¸ºæ‹›æ ‡æ–‡ä»¶ä¸­é¢„å…ˆç¡®å®šçš„åœ°ç‚¹ã€‚å¼€æ ‡ç”±æ‹›æ ‡äººä¸»æŒï¼Œé‚€è¯·æ‰€æœ‰æŠ•æ ‡äººå‚åŠ ã€‚ è¯„æ ‡ è¯„æ ‡å§”å‘˜ä¼šç”±æ‹›æ ‡äººçš„ä»£è¡¨å’Œæœ‰å…³æŠ€æœ¯ã€ç»æµç­‰æ–¹é¢çš„ä¸“å®¶ç»„æˆï¼Œæˆå‘˜äººæ•°ä¸º5äººä»¥ä¸Šå•æ•°ï¼Œå…¶ä¸­æŠ€æœ¯ã€ç»æµç­‰æ–¹é¢çš„ä¸“å®¶ä¸å¾—å°‘äºæˆå‘˜æ€»æ•°çš„ä¸‰åˆ†ä¹‹äºŒã€‚ ä¸­æ ‡ ä¸­æ ‡é€šçŸ¥ä¹¦å‘å‡ºåï¼Œæ‹›æ ‡äººæ”¹å˜ä¸­æ ‡ç»“æœçš„ï¼Œæˆ–è€…ä¸­æ ‡äººæ”¾å¼ƒä¸­æ ‡é¡¹ç›®çš„ï¼Œåº”å½“ä¾æ³•æ‰¿æ‹…æ³•å¾‹è´£ä»»ã€‚ åˆåŒ åˆ†ç±»ï¼š èŒƒå›´ï¼šé¡¹ç›®æ€»æ‰¿åŒ…åˆåŒã€é¡¹ç›®å•é¡¹æ‰¿åŒ…åˆåŒã€é¡¹ç›®åˆ†åŒ…åˆåŒã€‚ ä»˜æ¬¾æ–¹å¼ï¼šé¡¹ç›®æ€»ä»·åˆåŒã€é¡¹ç›®å•ä»·åˆåŒã€é¡¹ç›®æˆæœ¬åŠ é…¬é‡‘åˆåŒ åˆåŒçš„ä¸»è¦å†…å®¹åŒ…æ‹¬ï¼šé¡¹ç›®åç§°ï¼›æ ‡çš„å†…å®¹å’ŒèŒƒå›´ï¼›é¡¹ç›®çš„è´¨é‡è¦æ±‚ï¼šé€šå¸¸æƒ…å†µä¸‹é‡‡ç”¨æŠ€æœ¯æŒ‡æ ‡é™å®šç­‰å„ç§æ–¹å¼æ¥æè¿°ä¿¡æ¯ç³»ç»Ÿå·¥ç¨‹çš„æ•´ä½“è´¨é‡æ ‡å‡†ä»¥åŠå„éƒ¨åˆ†è´¨é‡æ ‡å‡†ï¼Œå®ƒæ˜¯åˆ¤æ–­æ•´ä¸ªå·¥ç¨‹é¡¹ç›®æˆè´¥çš„é‡è¦ä¾æ®ï¼›é¡¹ç›®çš„è®¡åˆ’ã€è¿›åº¦ã€åœ°ç‚¹ã€åœ°åŸŸå’Œæ–¹å¼ï¼›é¡¹ç›®å»ºè®¾è¿‡ç¨‹ä¸­çš„å„ç§æœŸé™ï¼›æŠ€æœ¯æƒ…æŠ¥å’Œèµ„æ–™çš„ä¿å¯†ï¼›é£é™©è´£ä»»çš„æ‰¿æ‹…ï¼›æŠ€æœ¯æˆæœçš„å½’å±ï¼›éªŒæ”¶çš„æ ‡å‡†å’Œæ–¹æ³•ï¼›ä»·æ¬¾ã€æŠ¥é…¬ï¼ˆæˆ–ä½¿ç”¨è´¹ï¼‰åŠå…¶æ”¯ä»˜æ–¹å¼ï¼›è¿çº¦é‡‘æˆ–è€…æŸå¤±èµ”å¿çš„è®¡ç®—æ–¹æ³•ï¼›è§£å†³äº‰è®®çš„æ–¹æ³•ï¼šè¯¥æ¡æ¬¾ä¸­åº”å°½å¯èƒ½åœ°æ˜ç¡®åœ¨å‡ºç°äº‰è®®ä¸çº çº·æ—¶é‡‡å–ä½•ç§æ–¹å¼æ¥åå•†è§£å†³ï¼›åè¯æœ¯è¯­è§£é‡Šç­‰ 8.æ•´ä½“ç®¡ç† ITO ITO åç§°åŠå®šä¹‰ è¾“å…¥ å·¥å…·æŠ€æœ¯ è¾“å‡º é¡¹ç›®ç« ç¨‹ æ­£å¼æ‰¹å‡†ä¸€ä¸ªé¡¹ç›®çš„æ–‡æ¡£ï¼Œåˆ¶å®šé¡¹ç›®çš„å¤´ï¼ˆé¡¹ç›®ç»ç†ï¼‰ é¡¹ç›®å·¥ä½œè¯´æ˜ä¹¦å•†ä¸šè®ºè¯åè®®äº‹ä¸šç¯å¢ƒå› ç´ ç»„ç»‡è¿‡ç¨‹èµ„äº§ ä¸“å®¶åˆ¤æ–­å¼•å¯¼æŠ€æœ¯ é¡¹ç›®ç« ç¨‹ åˆ¶å®šé¡¹ç›®ç®¡ç†è®¡åˆ’ åŒ…æ‹¬å®šä¹‰ã€å‡†å¤‡å’Œåè°ƒæ‰€æœ‰æ„æˆè®¡åˆ’ï¼Œå½¢æˆé¡¹ç›®ç®¡ç†è®¡åˆ’æ‰€å¿…è¦çš„è¡ŒåŠ¨ é¡¹ç›®ç« ç¨‹å…¶ä»–è¿‡ç¨‹è¾“å…¥ã€é¡¹ç›®åˆæ­¥èŒƒå›´è¯´æ˜ä¹¦ï¼Œç®¡ç†è¿‡ç¨‹ï¼Œé¢„æµ‹ï¼Œå·¥ä½œç»©æ•ˆä¿¡æ¯ã€‘äº‹ä¸šç¯å¢ƒå› ç´ ç»„ç»‡è¿‡ç¨‹èµ„äº§ ä¸“å®¶åˆ¤æ–­å¼•å¯¼æŠ€æœ¯ é¡¹ç›®ç®¡ç†è®¡åˆ’ æŒ‡å¯¼ä¸ç®¡ç†é¡¹ç›®å·¥ä½œ ææ„è§ï¼Œè®°è€ƒæ ¸ï¼Œåšä¸œè¥¿ é¡¹ç›®ç®¡ç†è®¡åˆ’ï¼Œæ‰¹å‡†çš„å˜æ›´è¯·æ±‚ï¼Œäº‹ä¸šç¯å¢ƒå› ç´ ï¼Œç»„ç»‡è¿‡ç¨‹èµ„äº§ ä¸“å®¶åˆ¤æ–­é¡¹ç›®ç®¡ç†ä¿¡æ¯ç³»ç»Ÿä¼šè®® å¯äº¤ä»˜æˆæœå·¥ä½œç»©æ•ˆæ•°æ®å˜æ›´è¯·æ±‚é¡¹ç›®ç®¡ç†è®¡åˆ’æ›´æ–°é¡¹ç›®æ–‡ä»¶æ›´æ–° ç›‘æ§é¡¹ç›®å·¥ä½œ ä»é¡¹ç›®å¼€å§‹åˆ°ç»“æŸï¼Œæ”¶é›†ï¼Œæµ‹é‡å‘å¸ƒç»©æ•ˆä¿¡æ¯ï¼ŒåŠè¯„ä¼°ä¼šå½±å“è¿‡ç¨‹æ”¹è¿›çš„åº¦é‡é¡¹å’Œè¶‹åŠ¿ é¡¹ç›®ç®¡ç†è®¡åˆ’äº‹ä¸šç¯å¢ƒå› ç´ ç»„ç»‡è¿‡ç¨‹èµ„äº§è¿›åº¦é¢„æµ‹æˆæœ¬é¢„æµ‹ç¡®è®¤çš„å˜æ›´å·¥ä½œç»©æ•ˆä¿¡æ¯ ä¸“å®¶åˆ¤æ–­åˆ†ææŠ€æœ¯é¡¹ç›®ç®¡ç†ä¿¡æ¯ç³»ç»Ÿã€PMISã€‘ä¼šè®® å˜æ›´è¯·æ±‚å·¥ä½œç»©æ•ˆæŠ¥å‘Šé¡¹ç›®ç®¡ç†è®¡åˆ’æ›´æ–°é¡¹ç›®æ–‡ä»¶æ›´æ–° å®æ–½æ•´ä½“å˜æ›´æ§åˆ¶ å®¡æ‰¹å˜æ›´ï¼Œé¡¹ç›®ç»ç†ä»˜æœ€ç»ˆè´£ä»» å˜æ›´è¯·æ±‚ï¼Œå·¥ä½œç»©æ•ˆæŠ¥å‘Šï¼Œå˜æ›´è¯·æ±‚ï¼Œé¡¹ç›®ç®¡ç†è®¡åˆ’ï¼Œäº‹ä¸šç¯å¢ƒå› ç´ ï¼Œç»„ç»‡è¿‡ç¨‹èµ„äº§ ä¸“å®¶åˆ¤æ–­ä¼šè®®å˜æ›´æ§åˆ¶å·¥å…· æ‰¹å‡†çš„å˜æ›´è¯·æ±‚å˜æ›´æ—¥å¿—é¡¹ç›®ç®¡ç†è®¡åˆ’æ›´æ–°é¡¹ç›®æ–‡ä»¶æ›´æ–° é¡¹ç›®æ”¶å°¾ æ‰“åŒ…äº¤è´§ é¡¹ç›®ç®¡ç†è®¡åˆ’éªŒæ”¶çš„å¯äº¤ä»˜æˆæœç»„ç»‡è¿‡ç¨‹èµ„äº§ ä¸“å®¶åˆ¤æ–­åˆ†ææŠ€æœ¯ä¼šè®® æœ€ç»ˆäº§å“ã€æœåŠ¡æˆ–æˆæœç§»äº¤ç»„ç»‡è¿‡ç¨‹èµ„äº§æ›´æ–° 9.èŒƒå›´ç®¡ç† ITO ITO åç§°åŠå®šä¹‰ è¾“å…¥ å·¥å…·æŠ€æœ¯ è¾“å‡º 10.è¿›åº¦ç®¡ç† ITO ITO åç§°åŠå®šä¹‰ è¾“å…¥ å·¥å…·æŠ€æœ¯ è¾“å‡º 11.æˆæœ¬ç®¡ç† ITO ITO åç§°åŠå®šä¹‰ è¾“å…¥ å·¥å…·æŠ€æœ¯ è¾“å‡º æŒ£å€¼åˆ†æè®¡ç®— 12.è´¨é‡ç®¡ç† ITO ITO åç§°åŠå®šä¹‰ è¾“å…¥ å·¥å…·æŠ€æœ¯ è¾“å‡º 13.äººåŠ›èµ„æºç®¡ç† ITO ITO åç§°åŠå®šä¹‰ è¾“å…¥ å·¥å…·æŠ€æœ¯ è¾“å‡º 14.å¹²ç³»äººç®¡ç† ITO ITO åç§°åŠå®šä¹‰ è¾“å…¥ å·¥å…·æŠ€æœ¯ è¾“å‡º 15.æ²Ÿé€šç®¡ç† ITO ITO åç§°åŠå®šä¹‰ è¾“å…¥ å·¥å…·æŠ€æœ¯ è¾“å‡º 16.é£é™©ç®¡ç† ITO ITO åç§°åŠå®šä¹‰ è¾“å…¥ å·¥å…·æŠ€æœ¯ è¾“å‡º 17.é‡‡è´­ç®¡ç† ITO ITO åç§°åŠå®šä¹‰ è¾“å…¥ å·¥å…·æŠ€æœ¯ è¾“å‡º PPTåŠ æ˜Ÿçœ‹äº†å°±å¯ä»¥äº† 18.åˆåŒç®¡ç† ä¸Šåˆä¸€åˆ† åˆåŒçš„åˆ†ç±» 19.ä¿¡æ¯æ–‡æ¡£å’Œé…ç½®ç®¡ç† ä¸Šåˆ2åˆ† æ–‡æ¡£åˆ†ç±»ï¼ˆå¼€å‘ï¼Œäº§å“ï¼Œç®¡ç†ï¼‰ ä¸Šåˆä¸€èˆ¬ä¸‰åˆ† 20.20-28ç«  çŸ¥è¯†ç®¡ç† æ˜¾æ€§çŸ¥è¯†ï¼Œéšæ€§çŸ¥è¯†,éšæ€§çŸ¥è¯†åˆ†äº«é€”ç»ï¼ŒçŸ¥è¯†äº§æƒä¿æŠ¤ï¼Œè½¯ä»¶è‘—ä½œæƒ æˆ˜ç•¥ç®¡ç† ç»„ç»‡æˆ˜ç•¥å› ç´ ç»„æˆï¼Œæˆ˜ç•¥å®æ–½ï¼Œç±»å‹å±‚æ¬¡ï¼Œå¹³è¡¡è®¡åˆ†å¡ ç»„ç»‡çº§é¡¹ç›®ç®¡ç† æµç¨‹ç®¡ç† é¡¹ç›®é›†ï¼Œé¡¹ç›®ç»„åˆç®¡ç† ä¿¡æ¯å®‰å…¨ç®¡ç† ç»¼åˆæµ‹è¯•ç®¡ç†ã€é‡åŒ–é¡¹ç›®ç®¡ç†ï¼Œæˆç†Ÿåº¦æ¨¡å‹ CMMIï¼ˆèƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹ï¼‰ã€ æ³•å¾‹æ³•è§„ åˆåŒæ³• 1 åˆåŒå†…å®¹ï¼Œè¦çº¦ï¼Œæ ‡çš„ï¼Œæ ¼å¼ï¼ˆéæ ¼å¼ã€æ‰‹å†™ã€‘ï¼‰æ¡æ¬¾ï¼Œè¿å¿ƒåˆåŒï¼Œ æ‹›æ ‡æ³• 1 å¿…é¡»è¿›è¡Œæ‹›æ ‡çš„é¡¹ç›®ã€æ ‡åº•ï¼ˆå¿…é¡»ä¿å¯†ï¼‰ è‘—ä½œæƒæ³• æ”¿åºœé‡‡è´­æ³• 2 å¸¸ç”¨æŠ€æœ¯æ ‡å‡† 2-3 è½¯ä»¶å·¥ç¨‹å›½å®¶æ ‡å‡†GB/T11457-2006ï¼ˆå®¡è®¡-ä»£ç å®¡è®°-é…ç½®å®¡è®¡-è®¤è¯-èµ°æŸ¥-é‰´å®š-åŸºçº¿-é…ç½®æ§åˆ¶å§”å‘˜ä¼š-é…ç½®çŠ¶æ€æŠ¥å‘Š-è®¾è®¡è¯„å®¡-æ¡Œé¢æ£€æŸ¥-è¯„ä»·-æ•…éšœ-åŠŸèƒ½é…ç½®å®¡è®¡ï¼‰ è½¯ä»¶ç”Ÿå­˜å‘¨æœŸçš„è¿‡ç¨‹ï¼Œè½¯ä»¶ç”Ÿå‘½å‘¨æœŸå„é˜¶æ®µä¸è½¯ä»¶æ–‡æ¡£ç¼–åˆ¶å·¥ä½œçš„å…³ç³»ï¼Œå„ç±»äººå‘˜ä¸è½¯ä»¶æ–‡æ¡£çš„ä½¿ç”¨å…³ç³»ï¼Œè½¯ä»¶äº§å“è´¨é‡ï¼Œ6ä¸ªè´¨é‡ç‰¹æ€§21ä¸ªè´¨é‡å­ç‰¹æ€§ æ¡ˆä¾‹åˆ†æ äº”ç§é¢˜å‹ é—®ç­”é¢˜ï¼Œè®¡ç®—é¢˜ï¼Œåˆ†æé¢˜ï¼Œç†è®ºé¢˜ï¼Œå¡«ç©ºï¼Œé€‰æ‹©ï¼Œåˆ¤æ–­é¢˜ åˆ†æé¢˜ å›ç­”ç®€ç»ƒï¼Œæ–‡å­—å·¥æ•´æ¸…æ™°ï¼Œç­”é¢˜æœ‰åºï¼Œå¤šå†™ä¸æ‰£åˆ†ï¼Œä¸“ä¸šåŒ– ä¸‡é‡‘æ²¹ï¼š æŠ€æœ¯å‡ºèº«ï¼šå¼€å‘å’Œç®¡ç†æ‰€éœ€æŠ€èƒ½ä¸åŒï¼Œéœ€è¦åŸ¹è®­ èº«å…¼æ•°èŒï¼šå¯¼è‡´æ²¡æ—¶é—´å»å­¦ä¹ ç®¡ç†çŸ¥è¯†ï¼Œå·¥ä½œè´Ÿè·è¿‡è½½ï¼Œèº«å¿ƒç–²æƒ«ï¼Œå…¨å±€å½±å“ æ–°æŠ€æœ¯ï¼šé£é™©ï¼Œéœ€åŸ¹è®­ï¼Œå­¦ä¹ ï¼Œç›‘æ§æŠ€æœ¯é£é™©ï¼Œæ‰¾åˆ°åˆé€‚çš„äººï¼Œå®åœ¨ä¸è¡Œå¤–åŒ… æœ‰äººå¯¹é¡¹ç›®ä¸æ»¡æ„ï¼šç®€å†æœ‰æ•ˆæ²Ÿé€šæœºåˆ¶æ–¹å¼å‘æ³•ï¼Œç¼ºä¹æœ‰æ•ˆçš„é¡¹ç›®ç»©æ•ˆç®¡ç†æœºåˆ¶ï¼Œéœ€åŠ å¼ºæ²Ÿé€š å˜æ›´ï¼šä¹¦é¢ç”³è¯·ï¼Œå®¡æ‰¹ç¡®è®¤ï¼Œè·Ÿè¸ªå˜æ›´ç¼ºä¸€ä¸å¯ å®¢æˆ·éªŒæ”¶ä¸é€šè¿‡ï¼šè¯´æ˜éªŒæ”¶æ ‡å‡†æ²¡æœ‰å¾—åˆ°è®¤å¯ç¡®è®¤ï¼Œæ²¡æœ‰éªŒæ”¶æµ‹è¯•è§„èŒƒå’Œæ–¹æ³• æ„šäººæœ‰å…³é—®é¢˜ï¼šæ²Ÿé€šä¸åˆ°ä½ è¿‡ä¸€æ®µæ—¶é—´æ‰å‘ç°é—®é¢˜ï¼šç›‘æ§ä¸åŠ› é‡Œç¨‹ç¢‘ï¼Œæ—¶é—´ç´§ä¿ƒï¼šæ²¡æœ‰å†—ä½™è€ƒè™‘é£é™©çš„æƒ³æ³• å¤–éƒ¨å› ç´ å¯¼è‡´å»¶å·¥ï¼šæ²¡æœ‰è€ƒè™‘å¤–åœ¨å› ç´ å½±å“ï¼Œå˜æ›´5ä¸ªç†ç”± äº‰æ‰§ï¼šæ²Ÿé€šé—®é¢˜ï¼Œè®¡åˆ’ä¸å¤Ÿå‘¨æ˜ å¤šå¤´æ±‡æŠ¥ï¼šé¡¹ç›®ç« ç¨‹ï¼Œå¤šå¤´æ±‡æŠ¥å¯¼è‡´ä¿¡æ¯æ²Ÿé€šä¸ç•…é€šæˆ–äº§ç”Ÿå†²çª çŸ¥è¯†ç‚¹ å¦‚ä½•ç¼©çŸ­æ´»åŠ¨çš„å·¥æœŸï¼Œæˆæœ¬æ§åˆ¶ï¼Œè´¨é‡æ–°è€7å·¥å…·ï¼Œæå‡é¡¹ç›®è´¨é‡ï¼Œ ç­”é¢˜å…³é”®è¯ æ–°äººï¼šåŸ¹è®­ å¹¶è¡Œå·¥ä½œï¼šæœ‰é£é™© å®¢æˆ·è¦æ±‚éƒ½ç­”åº”ï¼š å£å¤´ï¼šä¹¦é¢ å¤‡å¿˜å½•ï¼šé…ç½®ç®¡ç† éƒ¨åˆ†äººï¼šå…¨å‘˜å‚ä¸ å¼€ä¼šå¾ˆä¹…ï¼šæ•ˆç‡ä½ä¸‹ å½“åœºä¿®æ”¹ï¼Œèƒ½æ”¹å°±æ”¹ï¼šå˜æ›´ç›‘æ§åˆ†æè®°å½• æ–‡æ¡£é…ç½®ç®¡ç† äººå‘˜ç¦»èŒï¼šABæ€æƒ³ï¼Œé£é™© æ€»ä»·åˆåŒï¼šä¹™æ–¹é£é™©å¤ªå¤§ å‰æœŸéœ€æ±‚è°ƒç ”ä¸å……åˆ†ï¼š è®¡ç®— è¿›åº¦ç±» EVã€ACã€PVéœ€éªŒç®—ç¡®ä¿åé¢ä¸é”™ã€‚ ç®¡ç†å‚¨å¤‡ä¸è®¡å…¥æŒ£å€¼å’ŒåŸºå‡†ï¼Œä½†æ˜¯æ€»é¢„ç®—ä¸€éƒ¨åˆ†ã€‚ æ³¨æ„å®¡é¢˜ï¼Œæ—¶é—´å’Œå•ä½ã€‚ æ€»æ—¶å·® æ˜¯æŒ‡åœ¨ä¸å»¶è¯¯é¡¹ç›®å®Œæˆæ—¥æœŸæˆ–è¿åè¿›åº¦å› ç´ çš„å‰æä¸‹ï¼ŒæŸæ´»åŠ¨å¯ä»¥æ¨è¿Ÿçš„æ—¶é—´ã€‚ æ€»æ—¶å·®=LS-ES=LF-EF è‡ªç”±æ—¶å·® æ˜¯æŒ‡åœ¨ä¸å½±å“ç´§åæ´»åŠ¨æœ€æ—©å¼€å§‹çš„æƒ…å†µä¸‹ï¼Œå½“å‰æ´»åŠ¨å¯ä»¥æ¨è¿Ÿçš„æ—¶é—´ã€‚ è‡ªç”±æ—¶å·®=(åä¸€æ´»åŠ¨)ES-(å‰ä¸€æ´»åŠ¨çš„)EF æ‰€ä»¥æ€»æ—¶å·®å½±å“æ€»å·¥æœŸï¼Œè‡ªç”±æ—¶å·®å½±å“ç´§åæ´»åŠ¨ã€‚ ï¼ˆ1ï¼‰æ€»æ—¶å·®ï¼ˆTFï¼‰ï¼šå½“ä¸€é¡¹æ´»åŠ¨çš„æœ€æ—©å¼€å§‹æ—¶é—´å’Œæœ€è¿Ÿå¼€å§‹æ—¶é—´ä¸ç›¸åŒæ—¶ï¼Œå®ƒä»¬ä¹‹é—´çš„å·®å€¼æ˜¯è¯¥å·¥ä½œçš„æ€»æ—¶å·®ã€‚è®¡ç®—å…¬å¼æ˜¯ï¼šTF=LS-ESã€‚ ï¼ˆ2ï¼‰è‡ªç”±æ—¶å·®ï¼ˆFFï¼‰ï¼šåœ¨ä¸å½±å“ç´§åæ´»åŠ¨å®Œæˆæ—¶é—´çš„æ¡ä»¶ä¸‹ï¼Œä¸€é¡¹æ´»åŠ¨å¯èƒ½è¢«å»¶è¿Ÿçš„æ—¶é—´æ˜¯è¯¥é¡¹æ´»åŠ¨çš„è‡ªç”±æ—¶å·®ï¼Œå®ƒç”±è¯¥é¡¹æ´»åŠ¨çš„æœ€æ—©å®Œæˆæ—¶é—´EFå’Œå®ƒçš„ç´§åæ´»åŠ¨çš„æœ€æ—©å¼€å§‹æ—¶é—´å†³å®šçš„ã€‚è®¡ç®—å…¬å¼æ˜¯ï¼šFF=min{ç´§åæ´»åŠ¨çš„ES}-EFã€‚ ï¼ˆ3ï¼‰å…³é”®è·¯å¾„ã€‚é¡¹ç›®çš„å…³é”®è·¯å¾„æ˜¯æŒ‡èƒ½å¤Ÿå†³å®šé¡¹ç›®æœ€æ—©å®Œæˆæ—¶é—´çš„ä¸€ç³»åˆ—æ´»åŠ¨ã€‚å®ƒæ˜¯ç½‘ç»œå›¾ä¸­çš„æœ€é•¿è·¯å¾„ï¼Œå…·æœ‰æœ€å°‘çš„æ—¶å·®ã€‚åœ¨å®é™…æ±‚å…³é”®è·¯å¾„æ—¶ï¼Œä¸€èˆ¬çš„æ–¹æ³•æ˜¯çœ‹å“ªäº›æ´»åŠ¨çš„æ€»æ—¶å·®ä¸º0ï¼Œæ€»æ—¶å·®ä¸º0çš„æ´»åŠ¨ç§°ä¸ºå…³é”®æ´»åŠ¨ï¼Œå…³é”®æ´»åŠ¨ç»„æˆçš„è·¯å¾„ç§°ä¸ºå…³é”®è·¯å¾„ã€‚ å°½ç®¡å…³é”®è·¯å¾„æ˜¯æœ€é•¿çš„è·¯å¾„ï¼Œä½†å®ƒä»£è¡¨äº†å®Œæˆé¡¹ç›®æ‰€éœ€çš„æœ€çŸ­æ—¶é—´ã€‚å› æ­¤ï¼Œå…³é”®è·¯å¾„ä¸Šå„æ´»åŠ¨æŒç»­æ—¶é—´ï¼ˆå†æ—¶ï¼‰çš„å’Œå°±æ˜¯é¡¹ç›®çš„è®¡ç®—å·¥æœŸã€‚ æœ€æ—©å¼€å§‹æ—¶é—´ï¼ˆESï¼‰ï¼š ä¸€é¡¹æ´»åŠ¨çš„æœ€æ—©å¼€å§‹æ—¶é—´å–å†³äºå®ƒçš„æ‰€æœ‰ç´§å‰æ´»åŠ¨çš„å®Œæˆæ—¶é—´ã€‚é€šè¿‡è®¡ç®—åˆ°è¯¥æ´»åŠ¨è·¯å¾„ä¸Šæ‰€æœ‰æ´»åŠ¨çš„å®Œæˆæ—¶é—´çš„å’Œï¼Œå¯å¾—åˆ°æŒ‡å®šæ´»åŠ¨çš„ESã€‚å¦‚æœæœ‰å¤šæ¡è·¯å¾„æŒ‡å‘æ­¤æ´»åŠ¨ï¼Œåˆ™è®¡ç®—éœ€è¦æ—¶é—´æœ€é•¿çš„é‚£æ¡è·¯å¾„ï¼Œå³ES=max{ç´§å‰æ´»åŠ¨çš„EF}ã€‚ æœ€æ—©ç»“æŸæ—¶é—´ï¼ˆEFï¼‰ï¼š ä¸€é¡¹æ´»åŠ¨çš„æœ€æ—©å®Œæˆæ—¶é—´å–å†³äºè¯¥å·¥ä½œçš„æœ€æ—©å¼€å§‹æ—¶é—´å’Œå®ƒçš„æŒç»­æ—¶é—´ï¼ˆDï¼‰ï¼Œå³EF=ES+Dã€‚ æœ€æ™šç»“æŸæ—¶é—´ï¼ˆLFï¼‰ï¼š åœ¨ä¸å½±å“é¡¹ç›®å®Œæˆæ—¶é—´çš„æ¡ä»¶ä¸‹ï¼Œä¸€é¡¹æ´»åŠ¨å¯èƒ½å®Œæˆçš„æœ€è¿Ÿæ—¶é—´ã€‚è®¡ç®—å…¬å¼æ˜¯ï¼šLF=min{ç´§åæ´»åŠ¨çš„LS}ã€‚ æœ€æ™šå¼€å§‹æ—¶é—´ï¼ˆLSï¼‰ï¼š åœ¨ä¸å½±å“é¡¹ç›®å®Œæˆæ—¶é—´çš„æ¡ä»¶ä¸‹ï¼Œä¸€é¡¹æ´»åŠ¨å¯èƒ½å¼€å§‹çš„æœ€æ™šæ—¶é—´ã€‚è®¡ç®—å…¬å¼æ˜¯ï¼šLS=LF-Dã€‚ å‰æ¨æ³•æ¥è®¡ç®—æœ€æ—©æ—¶é—´ æŸä¸€æ´»åŠ¨çš„æœ€æ—©å¼€å§‹æ—¶é—´ï¼ˆESï¼‰=æŒ‡å‘å®ƒçš„æ‰€æœ‰ç´§å‰æ´»åŠ¨çš„æœ€æ—©ç»“æŸæ—¶é—´çš„æœ€å¤§å€¼ã€‚ æŸä¸€æ´»åŠ¨çš„æœ€æ—©ç»“æŸæ—¶é—´ï¼ˆEFï¼‰=ES+Tï¼ˆä½œä¸šæ—¶é—´ï¼‰ é€†æ¨æ³•æ¥è®¡ç®—æœ€è¿Ÿæ—¶é—´ æŸä¸€æ´»åŠ¨çš„æœ€è¿Ÿç»“æŸæ—¶é—´ï¼ˆLFï¼‰=æŒ‡å‘å®ƒçš„æ‰€æœ‰ç´§åæ´»åŠ¨çš„æœ€è¿Ÿå¼€å§‹æ—¶é—´çš„æœ€å°å€¼ã€‚ æŸä¸€æ´»åŠ¨çš„æœ€è¿Ÿå¼€å§‹æ—¶é—´ï¼ˆLSï¼‰=LF-Tï¼ˆä½œä¸šæ—¶é—´ï¼‰ è®¡ç®—å…³é”®è·¯å¾„çš„æ­¥éª¤ **1. ç”¨æœ‰æ–¹å‘çš„çº¿æ®µæ ‡å‡ºå„ç»“ç‚¹çš„ç´§å‰æ´»åŠ¨å’Œç´§åæ´»åŠ¨çš„å…³ç³»ï¼Œä½¿ä¹‹æˆä¸ºä¸€ä¸ªæœ‰æ–¹å‘çš„ç½‘ç»œå›¾ï¼ˆPDMï¼‰ \\2. ç”¨æ­£æ¨å’Œé€†æ¨æ³•è®¡ç®—å‡ºå„ä¸ªæ´»åŠ¨çš„ES,LS, EF, LFï¼Œå¹¶è®¡ç®—å‡ºå„ä¸ªæ´»åŠ¨çš„è‡ªç”±æ—¶å·®ã€‚æ‰¾å‡ºæ‰€æœ‰æ€»æ—¶å·®ä¸ºé›¶æˆ–ä¸ºè´Ÿçš„æ´»åŠ¨ï¼Œå°±æ˜¯å…³é”®æ´»åŠ¨ \\3. å…³é”®è·¯å¾„ä¸Šçš„æ´»åŠ¨æŒç»­æ—¶é—´å†³å®šäº†é¡¹ç›®çš„å·¥æœŸï¼Œæ€»å’Œå°±æ˜¯é¡¹ç›®å·¥æœŸã€‚ **è‡ªç”±æ—¶å·® ** è®¡ç®—å…¬å¼ï¼š è‡ªç”±æ—¶å·®=æ‰€æœ‰ç´§åå·¥ä½œä¸­æœ€æ—©å¼€å§‹æ—¶é—´æœ€å°å€¼ï¼ æœ€æ—©ç»“æŸæ—¶é—´ **æ€»æ—¶å·® ** è®¡ç®—å…¬å¼ï¼š æ€»æ—¶å·®=æœ€è¿Ÿå¼€å§‹æ—¶é—´-æœ€æ—©å¼€å§‹æ—¶é—´=æœ€è¿Ÿç»“æŸæ—¶é—´-æœ€æ—©ç»“æŸæ—¶é—´ å•ä»£å·ç½‘ç»œå›¾ åŒä»£å·ç½‘ç»œå›¾ åŒä»£å·æ—¶æ ‡ç½‘ç»œå›¾ å…¨ä¸ºå®çº¿çš„ä¸ºå…³é”®è·¯å¾„ï¼Œ æˆæœ¬ç±» æŒ£å€¼åˆ†æ PV [Planned Value]è®¡åˆ’å€¼ï¼šåº”è¯¥å®Œæˆå¤šå°‘å·¥ä½œï¼Ÿ è¦å¹²çš„æ´» EV [Earned Value]æŒ£å€¼ï¼šå®Œæˆäº†å¤šå°‘é¢„ç®—å·¥ä½œï¼Ÿ å¹²å®Œçš„æ´» AC [Actual Cost]å®é™…æˆæœ¬ï¼šå®Œæˆå·¥ä½œçš„å®é™…æˆæœ¬æ˜¯å¤šå°‘ï¼Ÿ å®é™…èŠ±è´¹ BAC [Budget cost at completion] åŸºçº¿é¢„ç®—æˆæœ¬ï¼šå…¨éƒ¨å·¥ä½œçš„é¢„ç®—æ˜¯å¤šå°‘ï¼Ÿä¸æ”¹å˜æˆæœ¬åŸºå‡†ï¼ŒBACå°±ä¸ä¼šå‘ç”Ÿå˜åŒ– CV [Cost Variance] æˆæœ¬åå·® CVï¼EVï¼ACï¼ŒCV&gt;0ï¼Œæˆæœ¬èŠ‚çº¦ï¼ŒCV&lt;0ï¼Œæˆæœ¬è¶…æ”¯ã€‚ SV [Schedule Variance] è¿›åº¦åå·® SVï¼EVï¼PVï¼ŒSV&gt;0ï¼Œè¿›åº¦è¶…å‰ï¼ŒSV&lt;0ï¼Œè¿›åº¦è½åã€‚ CPI [Cost Performance Index] æˆæœ¬æ‰§è¡ŒæŒ‡æ•°CPIï¼EV/ACï¼ŒCPIï¼1ï¼Œèµ„é‡‘ä½¿ç”¨æ•ˆç‡ä¸€èˆ¬ï¼›CPI&gt;1æˆæœ¬èŠ‚çº¦ï¼Œèµ„é‡‘ä½¿ç”¨æ•ˆç‡é«˜ï¼›CPI&lt;1ï¼Œæˆæœ¬è¶…æ”¯ï¼Œèµ„é‡‘ä½¿ç”¨æ•ˆç‡ä½ã€‚ SPI [Schedule Performance Index] è¿›åº¦æ‰§è¡ŒæŒ‡æ•° SPIï¼EV/PVï¼ŒSPIï¼1ï¼Œè¿›åº¦ä¸è®¡åˆ’ç›¸ç¬¦ï¼ŒSPI&gt;1ï¼Œè¿›åº¦è¶…å‰ï¼ŒSPI&lt;1ï¼Œè¿›åº¦è½åã€‚ ETC [Estimate (or Estimated) To Complete] å®Œå·¥æ—¶å°šéœ€æˆæœ¬ä¼°ç®—ï¼šåˆ°å®Œæˆæ—¶ï¼Œå‰©ä½™å·¥ä½œé‡è¿˜éœ€è¦å¤šå°‘æˆæœ¬,ETCä¹Ÿå°±æ˜¯ä¼°è®¡å®Œæˆé¡¹ç›®çš„å‰©ä½™å·¥ä½œæˆæœ¬ BAC [Budget cost at completion] å®Œå·¥é¢„ç®—ï¼šå…¨éƒ¨å·¥ä½œçš„é¢„ç®—æ˜¯å¤šå°‘ï¼Ÿä¸æ”¹å˜æˆæœ¬åŸºå‡†ï¼ŒBACå°±ä¸ä¼šå‘ç”Ÿå˜åŒ– EAC [Estimate at completion] å®Œæˆé¢„ä¼°ï¼šå…¨éƒ¨å·¥ä½œçš„æˆæœ¬æ˜¯å¤šå°‘ï¼Ÿæ˜¯æ ¹æ®é¡¹ç›®çš„ç»©æ•ˆå’Œé£é™©é‡åŒ–å¯¹é¡¹ç›®æœ€å¯èƒ½çš„æ€»æˆæœ¬æ‰€åšçš„ä¸€ç§é¢„æµ‹ã€‚ å®Œå·¥å·¥æœŸä¼°ç®—=é¢„ç®—å·¥æœŸ/SPI é¢„æµ‹EAC ä¸ ETCï¼š ç”±äºå­˜åœ¨æˆæœ¬åå·®æƒ…å†µï¼Œæ‰€ä»¥åœ¨å…¸å‹åå·®ä¸éå…¸å‹åå·®æ—¶ï¼Œè®¡ç®—é¡ºåºä¸ä¸€æ ·ï¼Œå¦‚ä¸‹: å…¸å‹åå·®ï¼šæœªæ¥é¡¹ç›®çš„CPIã€SPIä¼šä¿æŒä¸å˜ï¼Œæ­¤æ—¶é¢„æµ‹é¡¹ç›®å®Œæˆæ—¶çš„æ€»æˆæœ¬å’Œé¢„è®¡å®Œæˆæ—¶é—´ï¼Œåº”è¯¥ç”¨å…¸å‹åå·®å…¬å¼ã€‚ EAC= AC+(BAC-EV) =BAC/CPI ETC=EAC-AC éå…¸å‹åå·®ï¼šéå…¸å‹åå·®çš„å«ä¹‰æ˜¯é¡¹ç›®æœªæ¥çš„å·¥ä½œç»©æ•ˆä¸å½“å‰æ— å…³ï¼Œå’ŒåŸè®¡åˆ’ä¿æŒä¸€æ ·ï¼Œå³é¡¹ç›®æœªæ¥çš„æˆæœ¬ç»©æ•ˆæŒ‡æ•°å’Œè¿›åº¦ç»©æ•ˆæŒ‡æ•°éƒ½æ˜¯â€œ1â€ï¼‰éœ€è¦çº å ETC=BAC-EV åŸºçº¿æ€»æˆæœ¬-å·²æŒ£å¾—éƒ¨ä»½ EAC=ETC+AC ä¸Šåˆå°è®¡ç®— ç›ˆäºå¹³è¡¡ç‚¹ å†³ç­–æ ‘è®¡ç®— èµ„æºå¹³è¡¡é—®é¢˜ ç»Ÿè®¡æŠ½æ ·é—®é¢˜ è‡ªåˆ¶\\å¤–è´­åˆ†æ æ²Ÿé€šæ¸ é“æ•° [n(n-1)]/2 é£é™©æ›å…‰åº¦ ç°å€¼ å‡€ç°å€¼ï¼ŒæŠ•èµ„å›æ”¶æœŸ è¿ç­¹å­¦ è®¡ç®—é‡å¤§ æ±‚æœ€çŸ­å’Œæœ€é•¿è·¯å¾„ çº¿æ€§è§„åˆ’é—®é¢˜ æŠ•èµ„æ”¶ç›Šæœ€å¤§é—®é¢˜ æ›´æ¢è®¾å¤‡é—®é¢˜ è½¦åºŠé“£åºŠé—®é¢˜ æµé‡é—®é¢˜ äººå‘˜åˆ†é…é—®é¢˜ã€çŸ©é˜µæ³•ï¼ˆè¡Œåˆ—åˆ†åˆ«å‡ä¸€æ¬¡æœ€å°å€¼ï¼Œæ ¹æ®è¡Œé›¶ä¸ªæ•°ä»å°‘åˆ°å¤šåˆ†é…ï¼‰ã€‘ ä¼æ ¼å°”æ–¹æ³•è§£ä¼ è¾“é—®é¢˜ è®ºæ–‡ æå‰å‡†å¤‡ï¼Œæ‘˜è¦300å†…ï¼Œæ­£æ–‡ä¸å°‘äº2000ï¼Œå­—è¿¹æ¸…æ™°ï¼Œæ— éœ€å†™é¢˜ç›® å‡†å¤‡ä¸€ä¸ªé¡¹ç›®ï¼ˆæŠ•æ ‡ä¹¦ï¼Œæ–¹æ¡ˆä¹¦ï¼‰ å‡†å¤‡æ¡†æ¶ è‡ªå·±å†™ä¸€ä¸ª","link":"/2021/03/29/Draft/2021/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88/"},{"title":"é­‘é­…å…ˆç”Ÿ | å¾®ä¿¡å°ç¨‹åº","text":"å¾®ä¿¡å°ç¨‹åºæŒ‡å— å¸¸ç”¨å‡½æ•° è·³è½¬ 123wx.navigateTo({ url: '../component/L-component' }) ç®€ä»‹ å‰ç«¯ï¼Œåç«¯ä»»æ„ï¼Œä¸Šçº¿éœ€é…ç½®åŸŸåã€‚ WeixinJSBridgeå¯¹å†…---ã€‹ JS-SDKï¼Œå‰è€…åŒ…è£…ï¼Œå¯¹å†…è½¬å¯¹å¤–---ã€‹ å°ç¨‹åºï¼Œé€»è¾‘å±‚å’Œæ¸²æŸ“å±‚æ˜¯åˆ†å¼€çš„ï¼Œé€»è¾‘å±‚è¿è¡Œåœ¨ JSCore ä¸­ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªå®Œæ•´æµè§ˆå™¨å¯¹è±¡ï¼Œå› è€Œç¼ºå°‘ç›¸å…³çš„DOM APIå’ŒBOM APIã€‚å¯¼è‡´æ— æ³•è¿è¡Œå¸¸ç”¨å‰ç«¯åº“jQueryã€ Zepto ç­‰ï¼Œ JSCore çš„ç¯å¢ƒåŒ NodeJS ç¯å¢ƒä¹Ÿæ˜¯ä¸å°½ç›¸åŒï¼Œæ‰€ä»¥ä¸€äº› NPM çš„åŒ…åœ¨å°ç¨‹åºä¸­ä¹Ÿæ˜¯æ— æ³•è¿è¡Œçš„ã€‚ **åˆå§‹è¿‡ç¨‹ï¼š**ç”³è¯·å°ç¨‹åºè´¦å·(ç®¡ç†å°ç¨‹åºï¼Œè·å–AppID)ï¼Œå®‰è£…å°ç¨‹åºå¼€å‘å·¥å…·ã€é…ç½®é¡¹ç›® ç»“æ„ app.json å…¨å±€é…ç½®ï¼ŒåŒ…æ‹¬äº†å°ç¨‹åºçš„æ‰€æœ‰é¡µé¢è·¯å¾„ã€ç•Œé¢è¡¨ç°ã€ç½‘ç»œè¶…æ—¶æ—¶é—´ã€åº•éƒ¨ tab 1234567891011121314151617{ // æè¿°å½“å‰å°ç¨‹åºæ‰€æœ‰é¡µé¢è·¯å¾„ï¼Œè¿™æ˜¯ä¸ºäº†è®©å¾®ä¿¡å®¢æˆ·ç«¯çŸ¥é“å½“å‰ä½ çš„å°ç¨‹åºé¡µé¢å®šä¹‰åœ¨å“ªä¸ªç›®å½•ã€‚ &quot;pages&quot;:[ &quot;pages/index/index&quot;, &quot;pages/logs/logs&quot; ], // å®šä¹‰å°ç¨‹åºæ‰€æœ‰é¡µé¢çš„é¡¶éƒ¨èƒŒæ™¯é¢œè‰²ï¼Œæ–‡å­—é¢œè‰²å®šä¹‰ç­‰ã€‚ &quot;window&quot;:{ &quot;backgroundTextStyle&quot;:&quot;light&quot;, &quot;navigationBarBackgroundColor&quot;: &quot;#fff&quot;, &quot;navigationBarTitleText&quot;: &quot;Weixin&quot;, &quot;navigationBarTextStyle&quot;:&quot;black&quot; }, &quot;style&quot;: &quot;v2&quot;, &quot;sitemapLocation&quot;: &quot;sitemap.json&quot;} project.config.json å°ç¨‹åºå¼€å‘è€…å·¥å…·ä¸ªæ€§åŒ–é…ç½®ï¼Œç•Œé¢é¢œè‰²ã€ç¼–è¯‘é…ç½®ç­‰ç­‰ page.json è¡¨ç¤º pages/logs ç›®å½•ä¸‹çš„ logs.json è¿™ç±»å’Œå°ç¨‹åºé¡µé¢ç›¸å…³çš„é…ç½®ã€‚ç‹¬ç«‹å®šä¹‰æ¯ä¸ªé¡µé¢çš„ä¸€äº›å±æ€§ é¡µé¢ä¸­é…ç½®é¡¹ä¼šè¦†ç›– app.json çš„ window ä¸­ç›¸åŒçš„é…ç½®é¡¹ index.wxml WXMLï¼ˆWeiXin Markup Languageï¼‰ï¼Œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748æ•°æ®ç»‘å®š&lt;!--wxml--&gt;&lt;view&gt; {{message}} &lt;/view&gt;// page.jsPage({ data: { message: 'Hello MINA!' }})åˆ—è¡¨æ¸²æŸ“&lt;!--wxml--&gt;&lt;view wx:for=&quot;{{array}}&quot;&gt; {{item}} &lt;/view&gt;// page.jsPage({ data: { array: [1, 2, 3, 4, 5] }})æ¡ä»¶æ¸²æŸ“&lt;!--wxml--&gt;&lt;view wx:if=&quot;{{view == 'WEBVIEW'}}&quot;&gt; WEBVIEW &lt;/view&gt;&lt;view wx:elif=&quot;{{view == 'APP'}}&quot;&gt; APP &lt;/view&gt;&lt;view wx:else=&quot;{{view == 'MINA'}}&quot;&gt; MINA &lt;/view&gt;// page.jsPage({ data: { view: 'MINA' }})æ¨¡æ¿&lt;!--wxml--&gt;&lt;template name=&quot;staffName&quot;&gt; &lt;view&gt; FirstName: {{firstName}}, LastName: {{lastName}} &lt;/view&gt;&lt;/template&gt;&lt;template is=&quot;staffName&quot; data=&quot;{{...staffA}}&quot;&gt;&lt;/template&gt;&lt;template is=&quot;staffName&quot; data=&quot;{{...staffB}}&quot;&gt;&lt;/template&gt;&lt;template is=&quot;staffName&quot; data=&quot;{{...staffC}}&quot;&gt;&lt;/template&gt;// page.jsPage({ data: { staffA: {firstName: 'Hulk', lastName: 'Hu'}, staffB: {firstName: 'Shang', lastName: 'You'}, staffC: {firstName: 'Gideon', lastName: 'Lin'} }}) index.wxss CSS,ä»…æ”¯æŒéƒ¨åˆ† CSS é€‰æ‹©å™¨,æ–°å¢äº†å°ºå¯¸å•ä½,æä¾›äº†å…¨å±€çš„æ ·å¼[app.wxss]å’Œå±€éƒ¨æ ·å¼ .js é€»è¾‘å±‚ é™¤æ­¤ä¹‹å¤–ï¼Œåªæœ‰åç¼€ååœ¨ç™½åå•å†…çš„æ–‡ä»¶å¯ä»¥è¢«ä¸Šä¼ ï¼Œä¸åœ¨ç™½åå•åˆ—è¡¨å†…æ–‡ä»¶åœ¨å¼€å‘å·¥å…·èƒ½è¢«è®¿é—®åˆ°ï¼Œä½†æ— æ³•è¢«ä¸Šä¼ ã€‚å…·ä½“ç™½åå•åˆ—è¡¨å¦‚ä¸‹ï¼š wxs png jpg jpeg gif svg json cer mp3 aac m4a mp4 wav ogg silk wasm br åŸºç¡€ åœºæ™¯å€¼ï¼š æè¿°ç”¨æˆ·è¿›å…¥å°ç¨‹åºçš„è·¯å¾„ï¼Œç›®å‰è¿˜æ— æ³•è·å–åˆ°æŒ‰ Home é”®é€€å‡ºåˆ°æ¡Œé¢ï¼Œç„¶åä»æ¡Œé¢å†æ¬¡è¿›å°ç¨‹åºçš„åœºæ™¯å€¼ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œä¼šä¿ç•™ä¸Šä¸€æ¬¡çš„åœºæ™¯å€¼ã€‚ è·å–æ–¹å¼ï¼šonLaunch å’Œ onShowï¼Œwx.getLaunchOptionsSync åœºæ™¯å€¼ åœºæ™¯ appIdå«ä¹‰ 1020 å…¬ä¼—å· profile é¡µç›¸å…³å°ç¨‹åºåˆ—è¡¨ æ¥æºå…¬ä¼—å· 1035 å…¬ä¼—å·è‡ªå®šä¹‰èœå• æ¥æºå…¬ä¼—å· 1036 App åˆ†äº«æ¶ˆæ¯å¡ç‰‡ æ¥æºApp 1037 å°ç¨‹åºæ‰“å¼€å°ç¨‹åº æ¥æºå°ç¨‹åº 1038 ä»å¦ä¸€ä¸ªå°ç¨‹åºè¿”å› æ¥æºå°ç¨‹åº 1043 å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯ æ¥æºå…¬ä¼—å· é€»è¾‘å±‚App Service JavaScript çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€äº›åŠŸèƒ½ï¼Œç”±äºå¹¶éè¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œwindowï¼Œdocumentç­‰ä¸€äº›webèƒ½åŠ›æ— æ³•ä½¿ç”¨ï¼š å¢åŠ  App å’Œ Page æ–¹æ³•ï¼Œè¿›è¡Œç¨‹åºæ³¨å†Œå’Œé¡µé¢æ³¨å†Œã€‚ å¢åŠ  getApp å’Œ getCurrentPages æ–¹æ³•ï¼Œåˆ†åˆ«ç”¨æ¥è·å– App å®ä¾‹å’Œå½“å‰é¡µé¢æ ˆã€‚ æä¾›ä¸°å¯Œçš„ APIï¼Œå¦‚å¾®ä¿¡ç”¨æˆ·æ•°æ®ï¼Œæ‰«ä¸€æ‰«ï¼Œæ”¯ä»˜ç­‰å¾®ä¿¡ç‰¹æœ‰èƒ½åŠ›ã€‚ æä¾›æ¨¡å—åŒ–èƒ½åŠ›ï¼Œæ¯ä¸ªé¡µé¢æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸã€‚ æ³¨å†Œå°ç¨‹åº app.js ä¸­è°ƒç”¨ App æ–¹æ³•æ³¨å†Œå°ç¨‹åºå®ä¾‹ï¼Œç»‘å®šç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°ã€é”™è¯¯ç›‘å¬å’Œé¡µé¢ä¸å­˜åœ¨ç›‘å¬å‡½æ•°ç­‰ã€‚ 12345æ•´ä¸ªå°ç¨‹åºåªæœ‰ä¸€ä¸ª App å®ä¾‹ï¼Œæ˜¯å…¨éƒ¨é¡µé¢å…±äº«çš„ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡ getApp æ–¹æ³•è·å–åˆ°å…¨å±€å”¯ä¸€çš„ App å®ä¾‹ï¼Œè·å–Appä¸Šçš„æ•°æ®æˆ–è°ƒç”¨å¼€å‘è€…æ³¨å†Œåœ¨ App ä¸Šçš„å‡½æ•°ã€‚// xxx.jsconst appInstance = getApp()console.log(appInstance.globalData) // I am global data æ³¨å†Œé¡µé¢ Page() 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253Page({ data: { text: &quot;This is page data.&quot; }, onLoad: function(options) { // é¡µé¢åˆ›å»ºæ—¶æ‰§è¡Œ }, onShow: function() { // é¡µé¢å‡ºç°åœ¨å‰å°æ—¶æ‰§è¡Œ }, onReady: function() { // é¡µé¢é¦–æ¬¡æ¸²æŸ“å®Œæ¯•æ—¶æ‰§è¡Œ }, onHide: function() { // é¡µé¢ä»å‰å°å˜ä¸ºåå°æ—¶æ‰§è¡Œ }, onUnload: function() { // é¡µé¢é”€æ¯æ—¶æ‰§è¡Œ }, onPullDownRefresh: function() { // è§¦å‘ä¸‹æ‹‰åˆ·æ–°æ—¶æ‰§è¡Œ }, onReachBottom: function() { // é¡µé¢è§¦åº•æ—¶æ‰§è¡Œ }, onShareAppMessage: function () { // é¡µé¢è¢«ç”¨æˆ·åˆ†äº«æ—¶æ‰§è¡Œ }, onPageScroll: function() { // é¡µé¢æ»šåŠ¨æ—¶æ‰§è¡Œ }, onResize: function() { // é¡µé¢å°ºå¯¸å˜åŒ–æ—¶æ‰§è¡Œ }, onTabItemTap(item) { // tab ç‚¹å‡»æ—¶æ‰§è¡Œ console.log(item.index) console.log(item.pagePath) console.log(item.text) }, // äº‹ä»¶å“åº”å‡½æ•° viewTap: function() { this.setData({ text: 'Set some data for updating view.' }, function() { // this is setData callback }) }, // è‡ªç”±æ•°æ® customData: { hi: 'MINA' }}) behaviors 2.9.2 å¼€å§‹æ”¯æŒ,ä½ç‰ˆæœ¬éœ€åšå…¼å®¹å¤„ç†ã€‚ behaviors å¯ä»¥ç”¨æ¥è®©å¤šä¸ªé¡µé¢æœ‰ç›¸åŒçš„æ•°æ®å­—æ®µå’Œæ–¹æ³•ã€‚ 12345678910111213141516171819// my-behavior.jsmodule.exports = Behavior({ data: { sharedText: 'This is a piece of data shared between pages.' }, methods: { sharedMethod: function() { this.data.sharedText === 'This is a piece of data shared between pages.' } }})// page-a.jsvar myBehavior = require('./my-behavior.js')Page({ behaviors: [myBehavior], onLoad: function() { this.data.sharedText === 'This is a piece of data shared between pages.' }}) Component () åŸºç¡€åº“ 1.6.3 å¼€å§‹æ”¯æŒï¼Œä½ç‰ˆæœ¬éœ€åšå…¼å®¹å¤„ç†ã€‚æ–¹æ³•éœ€è¦æ”¾åœ¨ methods: { } é‡Œé¢ã€‚ç±»ä¼¼è‡ªå®šä¹‰ç»„ä»¶ï¼Œé€‚åˆå¤æ‚é¡µé¢ 1234567891011121314151617Component({ data: { text: &quot;This is page data.&quot; }, methods: { onLoad: function(options) { // é¡µé¢åˆ›å»ºæ—¶æ‰§è¡Œ }, onPullDownRefresh: function() { // ä¸‹æ‹‰åˆ·æ–°æ—¶æ‰§è¡Œ }, // äº‹ä»¶å“åº”å‡½æ•° viewTap: function() { // ... } }}) é¡µé¢ç”Ÿå‘½å‘¨æœŸ é¡µé¢è·¯ç”± åœ¨å°ç¨‹åºä¸­æ‰€æœ‰é¡µé¢çš„è·¯ç”±å…¨éƒ¨ç”±æ¡†æ¶è¿›è¡Œç®¡ç†ã€‚ é¡µé¢æ ˆ æ¡†æ¶ä»¥æ ˆçš„å½¢å¼ç»´æŠ¤äº†å½“å‰çš„æ‰€æœ‰é¡µé¢ã€‚ å½“å‘ç”Ÿè·¯ç”±åˆ‡æ¢çš„æ—¶å€™ï¼Œé¡µé¢æ ˆçš„è¡¨ç°å¦‚ä¸‹ï¼š è·¯ç”±æ–¹å¼ é¡µé¢æ ˆè¡¨ç° åˆå§‹åŒ– æ–°é¡µé¢å…¥æ ˆ æ‰“å¼€æ–°é¡µé¢ æ–°é¡µé¢å…¥æ ˆ é¡µé¢é‡å®šå‘ å½“å‰é¡µé¢å‡ºæ ˆï¼Œæ–°é¡µé¢å…¥æ ˆ é¡µé¢è¿”å› é¡µé¢ä¸æ–­å‡ºæ ˆï¼Œç›´åˆ°ç›®æ ‡è¿”å›é¡µ Tab åˆ‡æ¢ é¡µé¢å…¨éƒ¨å‡ºæ ˆï¼Œåªç•™ä¸‹æ–°çš„ Tab é¡µé¢ é‡åŠ è½½ é¡µé¢å…¨éƒ¨å‡ºæ ˆï¼Œåªç•™ä¸‹æ–°çš„é¡µé¢ å¼€å‘è€…å¯ä»¥ä½¿ç”¨ getCurrentPages() å‡½æ•°è·å–å½“å‰é¡µé¢æ ˆã€‚ è·¯ç”±æ–¹å¼ å¯¹äºè·¯ç”±çš„è§¦å‘æ–¹å¼ä»¥åŠé¡µé¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¦‚ä¸‹ï¼š è·¯ç”±æ–¹å¼ è§¦å‘æ—¶æœº è·¯ç”±å‰é¡µé¢ è·¯ç”±åé¡µé¢ åˆå§‹åŒ– å°ç¨‹åºæ‰“å¼€çš„ç¬¬ä¸€ä¸ªé¡µé¢ onLoad, onShow æ‰“å¼€æ–°é¡µé¢ è°ƒç”¨ API wx.navigateTo ä½¿ç”¨ç»„ä»¶ `` onHide onLoad, onShow é¡µé¢é‡å®šå‘ è°ƒç”¨ API wx.redirectTo ä½¿ç”¨ç»„ä»¶ `` onUnload onLoad, onShow é¡µé¢è¿”å› è°ƒç”¨ API wx.navigateBack ä½¿ç”¨ç»„ä»¶`` ç”¨æˆ·æŒ‰å·¦ä¸Šè§’è¿”å›æŒ‰é’® onUnload onShow Tab åˆ‡æ¢ è°ƒç”¨ API wx.switchTab ä½¿ç”¨ç»„ä»¶ `` ç”¨æˆ·åˆ‡æ¢ Tab å„ç§æƒ…å†µè¯·å‚è€ƒä¸‹è¡¨ é‡å¯åŠ¨ è°ƒç”¨ API wx.reLaunch ä½¿ç”¨ç»„ä»¶ `` onUnload onLoad, onShow Tab åˆ‡æ¢å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸï¼ˆä»¥ Aã€B é¡µé¢ä¸º Tabbar é¡µé¢ï¼ŒC æ˜¯ä» A é¡µé¢æ‰“å¼€çš„é¡µé¢ï¼ŒD é¡µé¢æ˜¯ä» C é¡µé¢æ‰“å¼€çš„é¡µé¢ä¸ºä¾‹ï¼‰ï¼š å½“å‰é¡µé¢ è·¯ç”±åé¡µé¢ è§¦å‘çš„ç”Ÿå‘½å‘¨æœŸï¼ˆæŒ‰é¡ºåºï¼‰ A A Nothing happend A B A.onHide(), B.onLoad(), B.onShow() A Bï¼ˆå†æ¬¡æ‰“å¼€ï¼‰ A.onHide(), B.onShow() C A C.onUnload(), A.onShow() C B C.onUnload(), B.onLoad(), B.onShow() D B D.onUnload(), C.onUnload(), B.onLoad(), B.onShow() Dï¼ˆä»è½¬å‘è¿›å…¥ï¼‰ A D.onUnload(), A.onLoad(), A.onShow() Dï¼ˆä»è½¬å‘è¿›å…¥ï¼‰ B D.onUnload(), B.onLoad(), B.onShow() æ³¨æ„äº‹é¡¹ navigateTo, redirectTo åªèƒ½æ‰“å¼€é tabBar é¡µé¢ã€‚ switchTab åªèƒ½æ‰“å¼€ tabBar é¡µé¢ã€‚ reLaunch å¯ä»¥æ‰“å¼€ä»»æ„é¡µé¢ã€‚ é¡µé¢åº•éƒ¨çš„ tabBar ç”±é¡µé¢å†³å®šï¼Œå³åªè¦æ˜¯å®šä¹‰ä¸º tabBar çš„é¡µé¢ï¼Œåº•éƒ¨éƒ½æœ‰ tabBarã€‚ è°ƒç”¨é¡µé¢è·¯ç”±å¸¦çš„å‚æ•°å¯ä»¥åœ¨ç›®æ ‡é¡µé¢çš„onLoadä¸­è·å–ã€‚ æ¨¡å—åŒ– å…¬å…±çš„ä»£ç æŠ½ç¦»æˆä¸ºä¸€ä¸ªå•ç‹¬çš„ js æ–‡ä»¶ï¼Œä½œä¸ºä¸€ä¸ªæ¨¡å—ã€‚æ¨¡å—åªæœ‰é€šè¿‡ module.exports æˆ–è€… exportsã€exports æ˜¯ module.exports çš„ä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤åœ¨æ¨¡å—é‡Œè¾¹éšæ„æ›´æ”¹ exports çš„æŒ‡å‘ä¼šé€ æˆæœªçŸ¥çš„é”™è¯¯ã€‚ã€‘ æ‰èƒ½å¯¹å¤–æš´éœ²æ¥å£ã€‚ä¸æ”¯æŒç›´æ¥å¼•å…¥ node_modules , å¼€å‘è€…éœ€è¦ä½¿ç”¨åˆ° node_modules æ—¶å€™å»ºè®®æ‹·è´å‡ºç›¸å…³çš„ä»£ç åˆ°å°ç¨‹åºçš„ç›®å½•ä¸­ï¼Œæˆ–è€…ä½¿ç”¨å°ç¨‹åºæ”¯æŒçš„ npm åŠŸèƒ½ 123456789101112131415161718192021// common.jsfunction sayHello(name) { console.log(`Hello ${name} !`)}function sayGoodbye(name) { console.log(`Goodbye ${name} !`)}module.exports.sayHello = sayHelloexports.sayGoodbye = sayGoodbyeâ€‹åœ¨éœ€è¦ä½¿ç”¨è¿™äº›æ¨¡å—çš„æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ require å°†å…¬å…±ä»£ç å¼•å…¥var common = require('common.js')Page({ helloMINA: function() { common.sayHello('MINA') }, goodbyeMINA: function() { common.sayGoodbye('MINA') }}) æ–‡ä»¶ä½œç”¨åŸŸ åœ¨ JavaScript æ–‡ä»¶ä¸­å£°æ˜çš„å˜é‡å’Œå‡½æ•°åªåœ¨è¯¥æ–‡ä»¶ä¸­æœ‰æ•ˆï¼›ä¸åŒçš„æ–‡ä»¶ä¸­å¯ä»¥å£°æ˜ç›¸åŒåå­—çš„å˜é‡å’Œå‡½æ•°ï¼Œä¸ä¼šäº’ç›¸å½±å“ã€‚ é€šè¿‡å…¨å±€å‡½æ•° getApp å¯ä»¥è·å–å…¨å±€çš„åº”ç”¨å®ä¾‹ï¼Œå¦‚æœéœ€è¦å…¨å±€çš„æ•°æ®å¯ä»¥åœ¨ App() ä¸­è®¾ç½® 1234567891011121314151617// app.jsApp({ globalData: 1})// a.js// The localValue can only be used in file a.js.var localValue = 'a'// Get the app instance.var app = getApp()// Get the global data and change it.app.globalData++// b.js// You can redefine localValue in file b.js, without interference with the localValue in a.js.var localValue = 'b'// If a.js it run before b.js, now the globalData shoule be 2.console.log(getApp().globalData) API äº‹ä»¶ç›‘å¬ API on å¼€å¤´,ç›‘å¬æŸä¸ªäº‹ä»¶æ˜¯å¦è§¦å‘,å¦‚ï¼šwx.onSocketOpenï¼Œwx.onCompassChange ç­‰ã€‚ åŒæ­¥ API Sync ç»“å°¾,å¦‚ wx.setStorageSyncï¼Œwx.getSystemInfoSync ç­‰ å¼‚æ­¥ API å¦‚ wx.requestï¼Œwx.login ç­‰ äº‘å¼€å‘ API è§†å›¾å±‚ View WXML WXSS (WeiXin Style Sheets) @importè¯­å¥å¯ä»¥å¯¼å…¥å¤–è”æ ·å¼è¡¨ å†…è”æ ·å¼ æ¡†æ¶ç»„ä»¶ä¸Šæ”¯æŒä½¿ç”¨ styleã€class å±æ€§æ¥æ§åˆ¶ç»„ä»¶çš„æ ·å¼ã€‚ é€‰æ‹©å™¨ ç›®å‰æ”¯æŒçš„é€‰æ‹©å™¨æœ‰ï¼š é€‰æ‹©å™¨ æ ·ä¾‹ æ ·ä¾‹æè¿° .class .intro é€‰æ‹©æ‰€æœ‰æ‹¥æœ‰ class=&quot;intro&quot; çš„ç»„ä»¶ #id #firstname é€‰æ‹©æ‹¥æœ‰ id=&quot;firstname&quot; çš„ç»„ä»¶ element view é€‰æ‹©æ‰€æœ‰ view ç»„ä»¶ element, element view, checkbox é€‰æ‹©æ‰€æœ‰æ–‡æ¡£çš„ view ç»„ä»¶å’Œæ‰€æœ‰çš„ checkbox ç»„ä»¶ ::after view::after åœ¨ view ç»„ä»¶åè¾¹æ’å…¥å†…å®¹ ::before view::before åœ¨ view ç»„ä»¶å‰è¾¹æ’å…¥å†…å®¹ WXS WXSï¼ˆWeiXin Scriptï¼‰æ˜¯å°ç¨‹åºçš„ä¸€å¥—è„šæœ¬è¯­è¨€ WXS ä¸ä¾èµ–äºè¿è¡Œæ—¶çš„åŸºç¡€åº“ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨æ‰€æœ‰ç‰ˆæœ¬çš„å°ç¨‹åºä¸­è¿è¡Œã€‚ WXS ä¸ JavaScript æ˜¯ä¸åŒçš„è¯­è¨€ï¼Œæœ‰è‡ªå·±çš„è¯­æ³•ï¼Œå¹¶ä¸å’Œ JavaScript ä¸€è‡´ã€‚ WXS çš„è¿è¡Œç¯å¢ƒå’Œå…¶ä»– JavaScript ä»£ç æ˜¯éš”ç¦»çš„ï¼ŒWXS ä¸­ä¸èƒ½è°ƒç”¨å…¶ä»– JavaScript æ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨å°ç¨‹åºæä¾›çš„APIã€‚ WXS å‡½æ•°ä¸èƒ½ä½œä¸ºç»„ä»¶çš„äº‹ä»¶å›è°ƒã€‚ ç”±äºè¿è¡Œç¯å¢ƒçš„å·®å¼‚ï¼Œåœ¨ iOS è®¾å¤‡ä¸Šå°ç¨‹åºå†…çš„ WXS ä¼šæ¯” JavaScript ä»£ç å¿« 2 ~ 20 å€ã€‚åœ¨ android è®¾å¤‡ä¸ŠäºŒè€…è¿è¡Œæ•ˆç‡æ— å·®å¼‚ã€‚ 1234567&lt;wxs module=&quot;m1&quot;&gt;var msg = &quot;hello world&quot;;module.exports.message = msg;&lt;/wxs&gt;&lt;view&gt; {{m1.message}} &lt;/view&gt; äº‹ä»¶ç³»ç»Ÿ ç®€æ„åŒå‘ç»‘å®š åªèƒ½æ˜¯ä¸€ä¸ªå•ä¸€å­—æ®µçš„ç»‘å®š 12&lt;input model:value=&quot;å€¼ä¸º {{value}}&quot; /&gt;&lt;input model:value=&quot;{{ a + b }}&quot; /&gt; éƒ½æ˜¯éæ³•çš„ï¼› ç›®å‰ï¼Œå°šä¸èƒ½ data è·¯å¾„ 1&lt;input model:value=&quot;{{ a.b }}&quot; /&gt; ç»„ä»¶ä¸­ä¼ é€’åŒå‘ç»‘å®šå¹¶è§¦å‘æ›´æ–° 12345678910111213Component({ properties: { myValue: String }, methods: { update: function() { // æ›´æ–° myValue this.setData({ myValue: 'leaf' }) }})&lt;input model:value=&quot;{{myValue}}&quot; /&gt; åŸºç¡€ç»„ä»¶ è·å–ç•Œé¢ä¸Šçš„èŠ‚ç‚¹ä¿¡æ¯ WXMLèŠ‚ç‚¹ä¿¡æ¯ï¼šè·å–èŠ‚ç‚¹å±æ€§ã€æ ·å¼ã€åœ¨ç•Œé¢ä¸Šçš„ä½ç½®ç­‰ä¿¡æ¯ WXMLèŠ‚ç‚¹å¸ƒå±€ç›¸äº¤çŠ¶æ€ï¼š å‚ç…§èŠ‚ç‚¹ï¼šç›‘å¬çš„å‚ç…§èŠ‚ç‚¹ï¼Œå–å®ƒçš„å¸ƒå±€åŒºåŸŸä½œä¸ºå‚ç…§åŒºåŸŸã€‚å¦‚æœæœ‰å¤šä¸ªå‚ç…§èŠ‚ç‚¹ï¼Œåˆ™ä¼šå–å®ƒä»¬å¸ƒå±€åŒºåŸŸçš„ äº¤é›† ä½œä¸ºå‚ç…§åŒºåŸŸã€‚é¡µé¢æ˜¾ç¤ºåŒºåŸŸä¹Ÿå¯ä½œä¸ºå‚ç…§åŒºåŸŸä¹‹ä¸€ã€‚ ç›®æ ‡èŠ‚ç‚¹ï¼šç›‘å¬çš„ç›®æ ‡ï¼Œé»˜è®¤åªèƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆä½¿ç”¨ selectAll é€‰é¡¹æ—¶ï¼Œå¯ä»¥åŒæ—¶ç›‘å¬å¤šä¸ªèŠ‚ç‚¹ï¼‰ã€‚ ç›¸äº¤åŒºåŸŸï¼šç›®æ ‡èŠ‚ç‚¹çš„å¸ƒå±€åŒºåŸŸä¸å‚ç…§åŒºåŸŸçš„ç›¸äº¤åŒºåŸŸã€‚ ç›¸äº¤æ¯”ä¾‹ï¼šç›¸äº¤åŒºåŸŸå å‚ç…§åŒºåŸŸçš„æ¯”ä¾‹ã€‚ é˜ˆå€¼ï¼šç›¸äº¤æ¯”ä¾‹å¦‚æœè¾¾åˆ°é˜ˆå€¼ï¼Œåˆ™ä¼šè§¦å‘ç›‘å¬å™¨çš„å›è°ƒå‡½æ•°ã€‚é˜ˆå€¼å¯ä»¥æœ‰å¤šä¸ªã€‚ 1234567891011121314Page({ onLoad: function(){ wx.createIntersectionObserver().relativeToViewport().observe('.target-class', (res) =&gt; { res.id // ç›®æ ‡èŠ‚ç‚¹ id res.dataset // ç›®æ ‡èŠ‚ç‚¹ dataset res.intersectionRatio // ç›¸äº¤åŒºåŸŸå ç›®æ ‡èŠ‚ç‚¹çš„å¸ƒå±€åŒºåŸŸçš„æ¯”ä¾‹ res.intersectionRect // ç›¸äº¤åŒºåŸŸ res.intersectionRect.left // ç›¸äº¤åŒºåŸŸçš„å·¦è¾¹ç•Œåæ ‡ res.intersectionRect.top // ç›¸äº¤åŒºåŸŸçš„ä¸Šè¾¹ç•Œåæ ‡ res.intersectionRect.width // ç›¸äº¤åŒºåŸŸçš„å®½åº¦ res.intersectionRect.height // ç›¸äº¤åŒºåŸŸçš„é«˜åº¦ }) }}) å“åº”æ˜¾ç¤ºåŒºåŸŸå˜åŒ– åœ¨æ‰‹æœºä¸Šå¯ç”¨å±å¹•æ—‹è½¬æ”¯æŒ 1app.json` çš„ `window` æ®µä¸­è®¾ç½® `&quot;pageOrientation&quot;: &quot;auto&quot;` ï¼Œæˆ–åœ¨é¡µé¢ json æ–‡ä»¶ä¸­é…ç½® `&quot;pageOrientation&quot;: &quot;auto&quot;, 2.5.0 å¼€å§‹ï¼Œ pageOrientation è¿˜å¯ä»¥è¢«è®¾ç½®ä¸º landscape ï¼Œè¡¨ç¤ºå›ºå®šä¸ºæ¨ªå±æ˜¾ç¤º åœ¨ iPad ä¸Šå¯ç”¨å±å¹•æ—‹è½¬æ”¯æŒ 1app.json` ä¸­æ·»åŠ  `&quot;resizable&quot;: trueï¼Œä¸èƒ½å•ç‹¬é…ç½®æŸä¸ªé¡µé¢æ˜¯å¦æ”¯æŒå±å¹•æ—‹è½¬ Media Query å¯¹äºä¸åŒå°ºå¯¸çš„æ˜¾ç¤ºåŒºåŸŸï¼Œé¡µé¢çš„å¸ƒå±€ä¼šæœ‰æ‰€å·®å¼‚ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨ media query æ¥è§£å†³å¤§å¤šæ•°é—®é¢˜ã€‚ ä»£ç ç¤ºä¾‹ï¼š 12345678910.my-class { width: 40px;}@media (min-width: 480px) { /* ä»…åœ¨ 480px æˆ–æ›´å®½çš„å±å¹•ä¸Šç”Ÿæ•ˆçš„æ ·å¼è§„åˆ™ */ .my-class { width: 200px; }} åœ¨ WXML ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ match-media ç»„ä»¶æ¥æ ¹æ® media query åŒ¹é…çŠ¶æ€å±•ç¤ºã€éšè—èŠ‚ç‚¹ã€‚ æ­¤å¤–ï¼Œå¯ä»¥åœ¨é¡µé¢æˆ–è€…è‡ªå®šä¹‰ç»„ä»¶ JS ä¸­ä½¿ç”¨ this.createMediaQueryObserver() æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ª MediaQueryObserver å¯¹è±¡ï¼Œç”¨äºç›‘å¬æŒ‡å®šçš„ media query çš„åŒ¹é…çŠ¶æ€ã€‚ åˆ†æ æ¨¡å¼ å¯ç”¨ 3.3ç‰ˆæœ¬ä»¥ä¸Šåœ¨pcç­‰å¤§å±å¹•ä¸Šæ”¯æŒåˆ†æ æ¨¡å¼ï¼Œ app.json ä¸­åŒæ—¶æ·»åŠ  &quot;resizable&quot;: true å’Œ &quot;frameset&quot;: true åˆ†æ å ä½å›¾ç‰‡ å½“æŸä¸€æ æ²¡æœ‰å±•ç¤ºä»»ä½•é¡µé¢æ—¶ï¼Œä¼šå±•ç¤ºä¸€å¼ å›¾ç‰‡åœ¨æ­¤æ æ­£ä¸­å¤®ã€‚ å¦‚æœä»£ç åŒ…ä¸­çš„ frameset/placeholder.png æ–‡ä»¶å­˜åœ¨ï¼Œè¿™å¼ å›¾ç‰‡å°†ä½œä¸ºæ­¤æ—¶å±•ç¤ºçš„å›¾ç‰‡ã€‚ åŠ¨ç”» åˆå§‹æ¸²æŸ“ç¼“å­˜ è‡ªå®šä¹‰ç»„ä»¶ ä»‹ç» åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶ ç±»ä¼¼äºé¡µé¢ï¼Œä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ç”± json wxml wxss js 4ä¸ªæ–‡ä»¶ç»„æˆã€‚è¦ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼Œé¦–å…ˆéœ€è¦åœ¨ç»„ä»¶çš„ json æ–‡ä»¶ä¸­è¿›è¡Œè‡ªå®šä¹‰ç»„ä»¶å£°æ˜ï¼š 123{ &quot;component&quot;: true} åŒæ—¶ï¼Œè¿˜è¦åœ¨ wxml æ–‡ä»¶ä¸­ç¼–å†™ç»„ä»¶æ¨¡æ¿ï¼Œåœ¨ wxss æ–‡ä»¶ä¸­åŠ å…¥ç»„ä»¶æ ·å¼ï¼Œå®ƒä»¬çš„å†™æ³•ä¸é¡µé¢çš„å†™æ³•ç±»ä¼¼ã€‚ 123456789&lt;!-- è¿™æ˜¯è‡ªå®šä¹‰ç»„ä»¶çš„å†…éƒ¨WXMLç»“æ„ --&gt;&lt;view class=&quot;inner&quot;&gt; {{innerText}}&lt;/view&gt;&lt;slot&gt;&lt;/slot&gt;/* è¿™é‡Œçš„æ ·å¼åªåº”ç”¨äºè¿™ä¸ªè‡ªå®šä¹‰ç»„ä»¶ */.inner { color: red;} ç»„ä»¶wxssä¸­ä¸åº”ä½¿ç”¨IDé€‰æ‹©å™¨ã€å±æ€§é€‰æ‹©å™¨å’Œæ ‡ç­¾åé€‰æ‹©å™¨ã€‚ åœ¨è‡ªå®šä¹‰ç»„ä»¶çš„ js æ–‡ä»¶ä¸­ï¼Œéœ€è¦ä½¿ç”¨ Component() æ¥æ³¨å†Œç»„ä»¶ï¼Œå¹¶æä¾›ç»„ä»¶çš„å±æ€§å®šä¹‰ã€å†…éƒ¨æ•°æ®å’Œè‡ªå®šä¹‰æ–¹æ³•ã€‚ ç»„ä»¶çš„å±æ€§å€¼å’Œå†…éƒ¨æ•°æ®å°†è¢«ç”¨äºç»„ä»¶ wxml çš„æ¸²æŸ“ï¼Œå…¶ä¸­ï¼Œå±æ€§å€¼æ˜¯å¯ç”±ç»„ä»¶å¤–éƒ¨ä¼ å…¥çš„ã€‚ 1234567891011121314151617Component({ properties: { // è¿™é‡Œå®šä¹‰äº†innerTextå±æ€§ï¼Œå±æ€§å€¼å¯ä»¥åœ¨ç»„ä»¶ä½¿ç”¨æ—¶æŒ‡å®š innerText: { type: String, value: 'default value', } }, data: { // è¿™é‡Œæ˜¯ä¸€äº›ç»„ä»¶å†…éƒ¨æ•°æ® someData: {} }, methods: { // è¿™é‡Œæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³• customMethod: function(){} }}) ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶ ä½¿ç”¨å·²æ³¨å†Œçš„è‡ªå®šä¹‰ç»„ä»¶å‰ï¼Œé¦–å…ˆè¦åœ¨ç”¨ç»„ä»¶çš„é¡µé¢çš„ json æ–‡ä»¶ä¸­è¿›è¡Œå¼•ç”¨å£°æ˜ã€‚æ­¤æ—¶éœ€è¦æä¾›æ¯ä¸ªè‡ªå®šä¹‰ç»„ä»¶çš„æ ‡ç­¾åå’Œå¯¹åº”çš„è‡ªå®šä¹‰ç»„ä»¶æ–‡ä»¶è·¯å¾„ï¼š 12345{ &quot;usingComponents&quot;: { &quot;component-tag-name&quot;: &quot;path/to/the/custom/component&quot;//åŒç›®å½•ä¸‹ç›´æ¥å†™æ–‡ä»¶å }} è¿™æ ·ï¼Œåœ¨é¡µé¢çš„ wxml ä¸­å°±å¯ä»¥åƒä½¿ç”¨åŸºç¡€ç»„ä»¶ä¸€æ ·ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶ã€‚èŠ‚ç‚¹åå³è‡ªå®šä¹‰ç»„ä»¶çš„æ ‡ç­¾åï¼ŒèŠ‚ç‚¹å±æ€§å³ä¼ é€’ç»™ç»„ä»¶çš„å±æ€§å€¼ã€‚ 1234&lt;view&gt; &lt;!-- ä»¥ä¸‹æ˜¯å¯¹ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶çš„å¼•ç”¨ --&gt; &lt;component-tag-name inner-text=&quot;Some text&quot;&gt;&lt;/component-tag-name&gt;&lt;/view&gt; ç»„ä»¶æ¨¡æ¿å’Œæ ·å¼ ç»„ä»¶æ¨¡æ¿ ç»„ä»¶æ¨¡æ¿çš„å†™æ³•ä¸é¡µé¢æ¨¡æ¿ç›¸åŒã€‚ç»„ä»¶æ¨¡æ¿ä¸ç»„ä»¶æ•°æ®ç»“åˆåç”Ÿæˆçš„èŠ‚ç‚¹æ ‘ï¼Œå°†è¢«æ’å…¥åˆ°ç»„ä»¶çš„å¼•ç”¨ä½ç½®ä¸Šã€‚ åœ¨ç»„ä»¶æ¨¡æ¿ä¸­å¯ä»¥æä¾›ä¸€ä¸ª &lt;slot&gt; èŠ‚ç‚¹ï¼Œç”¨äºæ‰¿è½½ç»„ä»¶å¼•ç”¨æ—¶æä¾›çš„å­èŠ‚ç‚¹ã€‚ ä»£ç ç¤ºä¾‹ï¼š åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ 123456789101112&lt;!-- ç»„ä»¶æ¨¡æ¿ --&gt;&lt;view class=&quot;wrapper&quot;&gt; &lt;view&gt;è¿™é‡Œæ˜¯ç»„ä»¶çš„å†…éƒ¨èŠ‚ç‚¹&lt;/view&gt; &lt;slot&gt;&lt;/slot&gt;&lt;/view&gt;&lt;!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡æ¿ --&gt;&lt;view&gt; &lt;component-tag-name&gt; &lt;!-- è¿™éƒ¨åˆ†å†…å®¹å°†è¢«æ”¾ç½®åœ¨ç»„ä»¶ &lt;slot&gt; çš„ä½ç½®ä¸Š --&gt; &lt;view&gt;è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slotä¸­çš„å†…å®¹&lt;/view&gt; &lt;/component-tag-name&gt;&lt;/view&gt; æ³¨æ„ï¼Œåœ¨æ¨¡æ¿ä¸­å¼•ç”¨åˆ°çš„è‡ªå®šä¹‰ç»„ä»¶åŠå…¶å¯¹åº”çš„èŠ‚ç‚¹åéœ€è¦åœ¨ json æ–‡ä»¶ä¸­æ˜¾å¼å®šä¹‰ï¼Œå¦åˆ™ä¼šè¢«å½“ä½œä¸€ä¸ªæ— æ„ä¹‰çš„èŠ‚ç‚¹ã€‚é™¤æ­¤ä»¥å¤–ï¼ŒèŠ‚ç‚¹åä¹Ÿå¯ä»¥è¢«å£°æ˜ä¸ºæŠ½è±¡èŠ‚ç‚¹ æ¨¡æ¿æ•°æ®ç»‘å®š ä¸æ™®é€šçš„ WXML æ¨¡æ¿ç±»ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®ç»‘å®šï¼Œè¿™æ ·å°±å¯ä»¥å‘å­ç»„ä»¶çš„å±æ€§ä¼ é€’åŠ¨æ€æ•°æ®ã€‚ ä»£ç ç¤ºä¾‹ï¼š åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ 1234567&lt;!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡æ¿ --&gt;&lt;view&gt; &lt;component-tag-name prop-a=&quot;{{dataFieldA}}&quot; prop-b=&quot;{{dataFieldB}}&quot;&gt; &lt;!-- è¿™éƒ¨åˆ†å†…å®¹å°†è¢«æ”¾ç½®åœ¨ç»„ä»¶ &lt;slot&gt; çš„ä½ç½®ä¸Š --&gt; &lt;view&gt;è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slotä¸­çš„å†…å®¹&lt;/view&gt; &lt;/component-tag-name&gt;&lt;/view&gt; åœ¨ä»¥ä¸Šä¾‹å­ä¸­ï¼Œç»„ä»¶çš„å±æ€§ propA å’Œ propB å°†æ”¶åˆ°é¡µé¢ä¼ é€’çš„æ•°æ®ã€‚é¡µé¢å¯ä»¥é€šè¿‡ setData æ¥æ”¹å˜ç»‘å®šçš„æ•°æ®å­—æ®µã€‚ æ³¨æ„ï¼šè¿™æ ·çš„æ•°æ®ç»‘å®šåªèƒ½ä¼ é€’ JSON å…¼å®¹æ•°æ®ã€‚è‡ªåŸºç¡€åº“ç‰ˆæœ¬ 2.0.9 å¼€å§‹ï¼Œè¿˜å¯ä»¥åœ¨æ•°æ®ä¸­åŒ…å«å‡½æ•°ï¼ˆä½†è¿™äº›å‡½æ•°ä¸èƒ½åœ¨ WXML ä¸­ç›´æ¥è°ƒç”¨ï¼Œåªèƒ½ä¼ é€’ç»™å­ç»„ä»¶ï¼‰ã€‚ ç»„ä»¶ wxml çš„ slot åœ¨ç»„ä»¶çš„ wxml ä¸­å¯ä»¥åŒ…å« slot èŠ‚ç‚¹ï¼Œç”¨äºæ‰¿è½½ç»„ä»¶ä½¿ç”¨è€…æä¾›çš„ wxml ç»“æ„ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç»„ä»¶çš„ wxml ä¸­åªèƒ½æœ‰ä¸€ä¸ª slot ã€‚éœ€è¦ä½¿ç”¨å¤š slot æ—¶ï¼Œå¯ä»¥åœ¨ç»„ä»¶ js ä¸­å£°æ˜å¯ç”¨ã€‚ 1234567Component({ options: { multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ }, properties: { /* ... */ }, methods: { /* ... */ }}) æ­¤æ—¶ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç»„ä»¶çš„ wxml ä¸­ä½¿ç”¨å¤šä¸ª slot ï¼Œä»¥ä¸åŒçš„ name æ¥åŒºåˆ†ã€‚ 123456&lt;!-- ç»„ä»¶æ¨¡æ¿ --&gt;&lt;view class=&quot;wrapper&quot;&gt; &lt;slot name=&quot;before&quot;&gt;&lt;/slot&gt; &lt;view&gt;è¿™é‡Œæ˜¯ç»„ä»¶çš„å†…éƒ¨ç»†èŠ‚&lt;/view&gt; &lt;slot name=&quot;after&quot;&gt;&lt;/slot&gt;&lt;/view&gt; ä½¿ç”¨æ—¶ï¼Œç”¨ slot å±æ€§æ¥å°†èŠ‚ç‚¹æ’å…¥åˆ°ä¸åŒçš„ slot ä¸Šã€‚ 123456789&lt;!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡æ¿ --&gt;&lt;view&gt; &lt;component-tag-name&gt; &lt;!-- è¿™éƒ¨åˆ†å†…å®¹å°†è¢«æ”¾ç½®åœ¨ç»„ä»¶ &lt;slot name=&quot;before&quot;&gt; çš„ä½ç½®ä¸Š --&gt; &lt;view slot=&quot;before&quot;&gt;è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=&quot;before&quot;ä¸­çš„å†…å®¹&lt;/view&gt; &lt;!-- è¿™éƒ¨åˆ†å†…å®¹å°†è¢«æ”¾ç½®åœ¨ç»„ä»¶ &lt;slot name=&quot;after&quot;&gt; çš„ä½ç½®ä¸Š --&gt; &lt;view slot=&quot;after&quot;&gt;è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=&quot;after&quot;ä¸­çš„å†…å®¹&lt;/view&gt; &lt;/component-tag-name&gt;&lt;/view&gt; ç»„ä»¶æ ·å¼ ç»„ä»¶å¯¹åº” wxss æ–‡ä»¶çš„æ ·å¼ï¼Œåªå¯¹ç»„ä»¶wxmlå†…çš„èŠ‚ç‚¹ç”Ÿæ•ˆã€‚ç¼–å†™ç»„ä»¶æ ·å¼æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š ç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶çš„é¡µé¢ä¸èƒ½ä½¿ç”¨idé€‰æ‹©å™¨ï¼ˆ#aï¼‰ã€å±æ€§é€‰æ‹©å™¨ï¼ˆ[a]ï¼‰å’Œæ ‡ç­¾åé€‰æ‹©å™¨ï¼Œè¯·æ”¹ç”¨classé€‰æ‹©å™¨ã€‚ ç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶çš„é¡µé¢ä¸­ä½¿ç”¨åä»£é€‰æ‹©å™¨ï¼ˆ.a .bï¼‰åœ¨ä¸€äº›æç«¯æƒ…å†µä¸‹ä¼šæœ‰éé¢„æœŸçš„è¡¨ç°ï¼Œå¦‚é‡ï¼Œè¯·é¿å…ä½¿ç”¨ã€‚ å­å…ƒç´ é€‰æ‹©å™¨ï¼ˆ.a&gt;.bï¼‰åªèƒ½ç”¨äº view ç»„ä»¶ä¸å…¶å­èŠ‚ç‚¹ä¹‹é—´ï¼Œç”¨äºå…¶ä»–ç»„ä»¶å¯èƒ½å¯¼è‡´éé¢„æœŸçš„æƒ…å†µã€‚ ç»§æ‰¿æ ·å¼ï¼Œå¦‚ font ã€ color ï¼Œä¼šä»ç»„ä»¶å¤–ç»§æ‰¿åˆ°ç»„ä»¶å†…ã€‚ é™¤ç»§æ‰¿æ ·å¼å¤–ï¼Œ app.wxss ä¸­çš„æ ·å¼ã€ç»„ä»¶æ‰€åœ¨é¡µé¢çš„çš„æ ·å¼å¯¹è‡ªå®šä¹‰ç»„ä»¶æ— æ•ˆï¼ˆé™¤éæ›´æ”¹ç»„ä»¶æ ·å¼éš”ç¦»é€‰é¡¹ï¼‰ã€‚ 1234#a { } /* åœ¨ç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ */[a] { } /* åœ¨ç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ */button { } /* åœ¨ç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ */.a &gt; .b { } /* é™¤é .a æ˜¯ view ç»„ä»¶èŠ‚ç‚¹ï¼Œå¦åˆ™ä¸ä¸€å®šä¼šç”Ÿæ•ˆ */ é™¤æ­¤ä»¥å¤–ï¼Œç»„ä»¶å¯ä»¥æŒ‡å®šå®ƒæ‰€åœ¨èŠ‚ç‚¹çš„é»˜è®¤æ ·å¼ï¼Œä½¿ç”¨ :host é€‰æ‹©å™¨ï¼ˆéœ€è¦åŒ…å«åŸºç¡€åº“ 1.7.2 æˆ–æ›´é«˜ç‰ˆæœ¬çš„å¼€å‘è€…å·¥å…·æ”¯æŒï¼‰ã€‚ ä»£ç ç¤ºä¾‹ï¼š 123456/* ç»„ä»¶ custom-component.wxss */:host { color: yellow;}&lt;!-- é¡µé¢çš„ WXML --&gt;&lt;custom-component&gt;è¿™æ®µæ–‡æœ¬æ˜¯é»„è‰²çš„&lt;/custom-component&gt; ç»„ä»¶æ ·å¼éš”ç¦» é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰ç»„ä»¶çš„æ ·å¼åªå—åˆ°è‡ªå®šä¹‰ç»„ä»¶ wxss çš„å½±å“ã€‚é™¤éä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š app.wxss æˆ–é¡µé¢çš„ wxss ä¸­ä½¿ç”¨äº†æ ‡ç­¾åé€‰æ‹©å™¨ï¼ˆæˆ–ä¸€äº›å…¶ä»–ç‰¹æ®Šé€‰æ‹©å™¨ï¼‰æ¥ç›´æ¥æŒ‡å®šæ ·å¼ï¼Œè¿™äº›é€‰æ‹©å™¨ä¼šå½±å“åˆ°é¡µé¢å’Œå…¨éƒ¨ç»„ä»¶ã€‚é€šå¸¸æƒ…å†µä¸‹è¿™æ˜¯ä¸æ¨èçš„åšæ³•ã€‚ æŒ‡å®šç‰¹æ®Šçš„æ ·å¼éš”ç¦»é€‰é¡¹ styleIsolation ã€‚ 12345Component({ options: { styleIsolation: 'isolated' }}) åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ styleIsolation é€‰é¡¹ä»åŸºç¡€åº“ç‰ˆæœ¬ 2.6.5 å¼€å§‹æ”¯æŒã€‚å®ƒæ”¯æŒä»¥ä¸‹å–å€¼ï¼š isolated è¡¨ç¤ºå¯ç”¨æ ·å¼éš”ç¦»ï¼Œåœ¨è‡ªå®šä¹‰ç»„ä»¶å†…å¤–ï¼Œä½¿ç”¨ class æŒ‡å®šçš„æ ·å¼å°†ä¸ä¼šç›¸äº’å½±å“ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹çš„é»˜è®¤å€¼ï¼‰ï¼› apply-shared è¡¨ç¤ºé¡µé¢ wxss æ ·å¼å°†å½±å“åˆ°è‡ªå®šä¹‰ç»„ä»¶ï¼Œä½†è‡ªå®šä¹‰ç»„ä»¶ wxss ä¸­æŒ‡å®šçš„æ ·å¼ä¸ä¼šå½±å“é¡µé¢ï¼› shared è¡¨ç¤ºé¡µé¢ wxss æ ·å¼å°†å½±å“åˆ°è‡ªå®šä¹‰ç»„ä»¶ï¼Œè‡ªå®šä¹‰ç»„ä»¶ wxss ä¸­æŒ‡å®šçš„æ ·å¼ä¹Ÿä¼šå½±å“é¡µé¢å’Œå…¶ä»–è®¾ç½®äº† apply-shared æˆ– shared çš„è‡ªå®šä¹‰ç»„ä»¶ã€‚ï¼ˆè¿™ä¸ªé€‰é¡¹åœ¨æ’ä»¶ä¸­ä¸å¯ç”¨ã€‚ï¼‰ ä½¿ç”¨åä¸¤è€…æ—¶ï¼Œè¯·åŠ¡å¿…æ³¨æ„ç»„ä»¶é—´æ ·å¼çš„ç›¸äº’å½±å“ã€‚ å¦‚æœè¿™ä¸ª Component æ„é€ å™¨ç”¨äºæ„é€ é¡µé¢ ï¼Œåˆ™é»˜è®¤å€¼ä¸º shared ï¼Œä¸”è¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªé¢å¤–çš„æ ·å¼éš”ç¦»é€‰é¡¹å¯ç”¨ï¼š page-isolated è¡¨ç¤ºåœ¨è¿™ä¸ªé¡µé¢ç¦ç”¨ app.wxss ï¼ŒåŒæ—¶ï¼Œé¡µé¢çš„ wxss ä¸ä¼šå½±å“åˆ°å…¶ä»–è‡ªå®šä¹‰ç»„ä»¶ï¼› page-apply-shared è¡¨ç¤ºåœ¨è¿™ä¸ªé¡µé¢ç¦ç”¨ app.wxss ï¼ŒåŒæ—¶ï¼Œé¡µé¢ wxss æ ·å¼ä¸ä¼šå½±å“åˆ°å…¶ä»–è‡ªå®šä¹‰ç»„ä»¶ï¼Œä½†è®¾ä¸º shared çš„è‡ªå®šä¹‰ç»„ä»¶ä¼šå½±å“åˆ°é¡µé¢ï¼› page-shared è¡¨ç¤ºåœ¨è¿™ä¸ªé¡µé¢ç¦ç”¨ app.wxss ï¼ŒåŒæ—¶ï¼Œé¡µé¢ wxss æ ·å¼ä¼šå½±å“åˆ°å…¶ä»–è®¾ä¸º apply-shared æˆ– shared çš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œä¹Ÿä¼šå—åˆ°è®¾ä¸º shared çš„è‡ªå®šä¹‰ç»„ä»¶çš„å½±å“ã€‚ ä»å°ç¨‹åºåŸºç¡€åº“ç‰ˆæœ¬ 2.10.1 å¼€å§‹ï¼Œä¹Ÿå¯ä»¥åœ¨é¡µé¢æˆ–è‡ªå®šä¹‰ç»„ä»¶çš„ json æ–‡ä»¶ä¸­é…ç½® styleIsolation ï¼ˆè¿™æ ·å°±ä¸éœ€åœ¨ js æ–‡ä»¶çš„ options ä¸­å†é…ç½®ï¼‰ã€‚ä¾‹å¦‚ï¼š 123{ &quot;styleIsolation&quot;: &quot;isolated&quot;} æ­¤å¤–ï¼Œå°ç¨‹åºåŸºç¡€åº“ç‰ˆæœ¬ 2.2.3 ä»¥ä¸Šæ”¯æŒ addGlobalClass é€‰é¡¹ï¼Œå³åœ¨ Component çš„ options ä¸­è®¾ç½® addGlobalClass: true ã€‚ è¿™ä¸ªé€‰é¡¹ç­‰ä»·äºè®¾ç½® styleIsolation: apply-shared ï¼Œä½†è®¾ç½®äº† styleIsolation é€‰é¡¹åè¿™ä¸ªé€‰é¡¹ä¼šå¤±æ•ˆã€‚ ä»£ç ç¤ºä¾‹ï¼š åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ 123456789101112/* ç»„ä»¶ custom-component.js */Component({ options: { addGlobalClass: true, }})&lt;!-- ç»„ä»¶ custom-component.wxml --&gt;&lt;text class=&quot;red-text&quot;&gt;è¿™æ®µæ–‡æœ¬çš„é¢œè‰²ç”± `app.wxss` å’Œé¡µé¢ `wxss` ä¸­çš„æ ·å¼å®šä¹‰æ¥å†³å®š&lt;/text&gt;/* app.wxss */.red-text { color: red;} å¤–éƒ¨æ ·å¼ç±» åŸºç¡€åº“ 1.9.90 å¼€å§‹æ”¯æŒï¼Œä½ç‰ˆæœ¬éœ€åšå…¼å®¹å¤„ç†ã€‚ æœ‰æ—¶ï¼Œç»„ä»¶å¸Œæœ›æ¥å—å¤–éƒ¨ä¼ å…¥çš„æ ·å¼ç±»ã€‚æ­¤æ—¶å¯ä»¥åœ¨ Component ä¸­ç”¨ externalClasses å®šä¹‰æ®µå®šä¹‰è‹¥å¹²ä¸ªå¤–éƒ¨æ ·å¼ç±»ã€‚ è¿™ä¸ªç‰¹æ€§å¯ä»¥ç”¨äºå®ç°ç±»ä¼¼äº view ç»„ä»¶çš„ hover-class å±æ€§ï¼šé¡µé¢å¯ä»¥æä¾›ä¸€ä¸ªæ ·å¼ç±»ï¼Œèµ‹äºˆ view çš„ hover-class ï¼Œè¿™ä¸ªæ ·å¼ç±»æœ¬èº«å†™åœ¨é¡µé¢ä¸­è€Œé view ç»„ä»¶çš„å®ç°ä¸­ã€‚ æ³¨æ„ï¼šåœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šä½¿ç”¨æ™®é€šæ ·å¼ç±»å’Œå¤–éƒ¨æ ·å¼ç±»æ—¶ï¼Œä¸¤ä¸ªç±»çš„ä¼˜å…ˆçº§æ˜¯æœªå®šä¹‰çš„ï¼Œå› æ­¤æœ€å¥½é¿å…è¿™ç§æƒ…å†µã€‚ ä»£ç ç¤ºä¾‹ï¼š 123456/* ç»„ä»¶ custom-component.js */Component({ externalClasses: ['my-class']})&lt;!-- ç»„ä»¶ custom-component.wxml --&gt;&lt;custom-component class=&quot;my-class&quot;&gt;è¿™æ®µæ–‡æœ¬çš„é¢œè‰²ç”±ç»„ä»¶å¤–çš„ class å†³å®š&lt;/custom-component&gt; è¿™æ ·ï¼Œç»„ä»¶çš„ä½¿ç”¨è€…å¯ä»¥æŒ‡å®šè¿™ä¸ªæ ·å¼ç±»å¯¹åº”çš„ class ï¼Œå°±åƒä½¿ç”¨æ™®é€šå±æ€§ä¸€æ ·ã€‚åœ¨ 2.7.1 ä¹‹åï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªå¯¹åº”çš„ class ã€‚ ä»£ç ç¤ºä¾‹ï¼š åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ 1234567891011&lt;!-- é¡µé¢çš„ WXML --&gt;&lt;custom-component my-class=&quot;red-text&quot; /&gt;&lt;custom-component my-class=&quot;large-text&quot; /&gt;&lt;!-- ä»¥ä¸‹å†™æ³•éœ€è¦åŸºç¡€åº“ç‰ˆæœ¬ 2.7.1 ä»¥ä¸Š --&gt;&lt;custom-component my-class=&quot;red-text large-text&quot; /&gt;.red-text { color: red;}.large-text { font-size: 1.5em;} å¼•ç”¨é¡µé¢æˆ–çˆ¶ç»„ä»¶çš„æ ·å¼ åŸºç¡€åº“ 2.9.2 å¼€å§‹æ”¯æŒï¼Œä½ç‰ˆæœ¬éœ€åšå…¼å®¹å¤„ç†ã€‚ å³ä½¿å¯ç”¨äº†æ ·å¼éš”ç¦» isolated ï¼Œç»„ä»¶ä»ç„¶å¯ä»¥åœ¨å±€éƒ¨å¼•ç”¨ç»„ä»¶æ‰€åœ¨é¡µé¢çš„æ ·å¼æˆ–çˆ¶ç»„ä»¶çš„æ ·å¼ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœåœ¨é¡µé¢ wxss ä¸­å®šä¹‰äº†ï¼š 123.blue-text { color: blue;} åœ¨è¿™ä¸ªç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨ ~ æ¥å¼•ç”¨è¿™ä¸ªç±»çš„æ ·å¼ï¼š 1&lt;view class=&quot;~blue-text&quot;&gt; è¿™æ®µæ–‡æœ¬æ˜¯è“è‰²çš„ &lt;/view&gt; å¦‚æœåœ¨ä¸€ä¸ªç»„ä»¶çš„çˆ¶ç»„ä»¶ wxss ä¸­å®šä¹‰äº†ï¼š 123.red-text { color: red;} åœ¨è¿™ä¸ªç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨ ^ æ¥å¼•ç”¨è¿™ä¸ªç±»çš„æ ·å¼ï¼š 1&lt;view class=&quot;^red-text&quot;&gt; è¿™æ®µæ–‡æœ¬æ˜¯çº¢è‰²çš„ &lt;/view&gt; ä¹Ÿå¯ä»¥è¿ç»­ä½¿ç”¨å¤šä¸ª ^ æ¥å¼•ç”¨ç¥–å…ˆç»„ä»¶ä¸­çš„æ ·å¼ã€‚ æ³¨æ„ï¼šå¦‚æœç»„ä»¶æ˜¯æ¯”è¾ƒç‹¬ç«‹ã€é€šç”¨çš„ç»„ä»¶ï¼Œè¯·ä¼˜å…ˆä½¿ç”¨å¤–éƒ¨æ ·å¼ç±»çš„æ–¹å¼ï¼Œè€Œéç›´æ¥å¼•ç”¨çˆ¶ç»„ä»¶æˆ–é¡µé¢çš„æ ·å¼ã€‚ è™šæ‹ŸåŒ–ç»„ä»¶èŠ‚ç‚¹ åŸºç¡€åº“ 2.11.2 å¼€å§‹æ”¯æŒï¼Œä½ç‰ˆæœ¬éœ€åšå…¼å®¹å¤„ç†ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰ç»„ä»¶æœ¬èº«çš„é‚£ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªâ€œæ™®é€šâ€çš„èŠ‚ç‚¹ï¼Œä½¿ç”¨æ—¶å¯ä»¥åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šè®¾ç½® class style ã€åŠ¨ç”»ã€ flex å¸ƒå±€ç­‰ï¼Œå°±å¦‚åŒæ™®é€šçš„ view ç»„ä»¶èŠ‚ç‚¹ä¸€æ ·ã€‚ 12345&lt;!-- é¡µé¢çš„ WXML --&gt;&lt;view style=&quot;display: flex&quot;&gt; &lt;!-- é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„èŠ‚ç‚¹ --&gt; &lt;custom-component style=&quot;color: blue; flex: 1&quot;&gt;è“è‰²ã€æ»¡å®½çš„&lt;/custom-component&gt;&lt;/view&gt; ä½†æœ‰äº›æ—¶å€™ï¼Œè‡ªå®šä¹‰ç»„ä»¶å¹¶ä¸å¸Œæœ›è¿™ä¸ªèŠ‚ç‚¹æœ¬èº«å¯ä»¥è®¾ç½®æ ·å¼ã€å“åº” flex å¸ƒå±€ç­‰ï¼Œè€Œæ˜¯å¸Œæœ›è‡ªå®šä¹‰ç»„ä»¶å†…éƒ¨çš„ç¬¬ä¸€å±‚èŠ‚ç‚¹èƒ½å¤Ÿå“åº” flex å¸ƒå±€æˆ–è€…æ ·å¼ç”±è‡ªå®šä¹‰ç»„ä»¶æœ¬èº«å®Œå…¨å†³å®šã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°†è¿™ä¸ªè‡ªå®šä¹‰ç»„ä»¶è®¾ç½®ä¸ºâ€œè™šæ‹Ÿçš„â€ï¼š 1234567891011Component({ options: { virtualHost: true }, properties: { style: { // å®šä¹‰ style å±æ€§å¯ä»¥æ‹¿åˆ° style å±æ€§ä¸Šè®¾ç½®çš„å€¼ type: String, } }, externalClasses: ['class'], // å¯ä»¥å°† class è®¾ä¸º externalClasses}) è¿™æ ·ï¼Œå¯ä»¥å°† flex æ”¾å…¥è‡ªå®šä¹‰ç»„ä»¶å†…ï¼š 12345678910&lt;!-- é¡µé¢çš„ WXML --&gt;&lt;view style=&quot;display: flex&quot;&gt; &lt;!-- å¦‚æœè®¾ç½®äº† virtualHost ï¼ŒèŠ‚ç‚¹ä¸Šçš„æ ·å¼å°†å¤±æ•ˆ --&gt; &lt;custom-component style=&quot;color: blue&quot;&gt;ä¸æ˜¯è“è‰²çš„&lt;/custom-component&gt;&lt;/view&gt;&lt;!-- custom-component.wxml --&gt;&lt;view style=&quot;flex: 1&quot;&gt; æ»¡å®½çš„ &lt;slot&gt;&lt;/slot&gt;&lt;/view&gt; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè‡ªå®šä¹‰ç»„ä»¶èŠ‚ç‚¹ä¸Šçš„ class style å’ŒåŠ¨ç”»å°†ä¸å†ç”Ÿæ•ˆï¼Œä½†ä»å¯ä»¥ï¼š å°† style å®šä¹‰æˆ properties å±æ€§æ¥è·å– style ä¸Šè®¾ç½®çš„å€¼ï¼› å°† class å®šä¹‰æˆ externalClasses å¤–éƒ¨æ ·å¼ç±»ä½¿å¾—è‡ªå®šä¹‰ç»„ä»¶ wxml å¯ä»¥ä½¿ç”¨ class å€¼ã€‚ Component æ„é€ å™¨ Component æ„é€ å™¨å¯ç”¨äºå®šä¹‰ç»„ä»¶ï¼Œè°ƒç”¨ Component æ„é€ å™¨æ—¶å¯ä»¥æŒ‡å®šç»„ä»¶çš„å±æ€§ã€æ•°æ®ã€æ–¹æ³•ç­‰ã€‚ è¯¦ç»†çš„å‚æ•°å«ä¹‰å’Œä½¿ç”¨è¯·å‚è€ƒ Component å‚è€ƒæ–‡æ¡£ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051Component({ behaviors: [], properties: { myProperty: { // å±æ€§å type: String, value: '' }, myProperty2: String // ç®€åŒ–çš„å®šä¹‰æ–¹å¼ }, data: {}, // ç§æœ‰æ•°æ®ï¼Œå¯ç”¨äºæ¨¡æ¿æ¸²æŸ“ lifetimes: { // ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå¯ä»¥ä¸ºå‡½æ•°ï¼Œæˆ–ä¸€ä¸ªåœ¨methodsæ®µä¸­å®šä¹‰çš„æ–¹æ³•å attached: function () { }, moved: function () { }, detached: function () { }, }, // ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå¯ä»¥ä¸ºå‡½æ•°ï¼Œæˆ–ä¸€ä¸ªåœ¨methodsæ®µä¸­å®šä¹‰çš„æ–¹æ³•å attached: function () { }, // æ­¤å¤„attachedçš„å£°æ˜ä¼šè¢«lifetimeså­—æ®µä¸­çš„å£°æ˜è¦†ç›– ready: function() { }, pageLifetimes: { // ç»„ä»¶æ‰€åœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° show: function () { }, hide: function () { }, resize: function () { }, }, methods: { onMyButtonTap: function(){ this.setData({ // æ›´æ–°å±æ€§å’Œæ•°æ®çš„æ–¹æ³•ä¸æ›´æ–°é¡µé¢æ•°æ®çš„æ–¹æ³•ç±»ä¼¼ }) }, // å†…éƒ¨æ–¹æ³•å»ºè®®ä»¥ä¸‹åˆ’çº¿å¼€å¤´ _myPrivateMethod: function(){ // è¿™é‡Œå°† data.A[0].B è®¾ä¸º 'myPrivateData' this.setData({ 'A[0].B': 'myPrivateData' }) }, _propertyChange: function(newVal, oldVal) { } }}) ä½¿ç”¨ Component æ„é€ å™¨æ„é€ é¡µé¢ äº‹å®ä¸Šï¼Œå°ç¨‹åºçš„é¡µé¢ä¹Ÿå¯ä»¥è§†ä¸ºè‡ªå®šä¹‰ç»„ä»¶ã€‚å› è€Œï¼Œé¡µé¢ä¹Ÿå¯ä»¥ä½¿ç”¨ Component æ„é€ å™¨æ„é€ ï¼Œæ‹¥æœ‰ä¸æ™®é€šç»„ä»¶ä¸€æ ·çš„å®šä¹‰æ®µä¸å®ä¾‹æ–¹æ³•ã€‚ä½†æ­¤æ—¶è¦æ±‚å¯¹åº” json æ–‡ä»¶ä¸­åŒ…å« usingComponents å®šä¹‰æ®µã€‚ æ­¤æ—¶ï¼Œç»„ä»¶çš„å±æ€§å¯ä»¥ç”¨äºæ¥æ”¶é¡µé¢çš„å‚æ•°ï¼Œå¦‚è®¿é—®é¡µé¢ /pages/index/index?paramA=123&amp;paramB=xyz ï¼Œå¦‚æœå£°æ˜æœ‰å±æ€§ paramA æˆ– paramB ï¼Œåˆ™å®ƒä»¬ä¼šè¢«èµ‹å€¼ä¸º 123 æˆ– xyz ã€‚ é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆå³ on å¼€å¤´çš„æ–¹æ³•ï¼‰ï¼Œåº”å†™åœ¨ methods å®šä¹‰æ®µä¸­ã€‚ ä»£ç ç¤ºä¾‹ï¼š 123456789101112131415161718{ &quot;usingComponents&quot;: {}}Component({ properties: { paramA: Number, paramB: String, }, methods: { onLoad: function() { this.data.paramA // é¡µé¢å‚æ•° paramA çš„å€¼ this.data.paramB // é¡µé¢å‚æ•° paramB çš„å€¼ } }}) ä½¿ç”¨ Component æ„é€ å™¨æ¥æ„é€ é¡µé¢çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥ä½¿ç”¨ behaviors æ¥æå–æ‰€æœ‰é¡µé¢ä¸­å…¬ç”¨çš„ä»£ç æ®µã€‚ ä¾‹å¦‚ï¼Œåœ¨æ‰€æœ‰é¡µé¢è¢«åˆ›å»ºå’Œé”€æ¯æ—¶éƒ½è¦æ‰§è¡ŒåŒä¸€æ®µä»£ç ï¼Œå°±å¯ä»¥æŠŠè¿™æ®µä»£ç æå–åˆ° behaviors ä¸­ã€‚ ä»£ç ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425// page-common-behavior.jsmodule.exports = Behavior({ attached: function() { // é¡µé¢åˆ›å»ºæ—¶æ‰§è¡Œ console.info('Page loaded!') }, detached: function() { // é¡µé¢é”€æ¯æ—¶æ‰§è¡Œ console.info('Page unloaded!') }})// é¡µé¢ Avar pageCommonBehavior = require('./page-common-behavior')Component({ behaviors: [pageCommonBehavior], data: { /* ... */ }, methods: { /* ... */ },})// é¡µé¢ Bvar pageCommonBehavior = require('./page-common-behavior')Component({ behaviors: [pageCommonBehavior], data: { /* ... */ }, methods: { /* ... */ },}) ç»„ä»¶é—´é€šä¿¡ä¸äº‹ä»¶ ç»„ä»¶é—´é€šä¿¡ ç»„ä»¶é—´çš„åŸºæœ¬é€šä¿¡æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ã€‚ WXML æ•°æ®ç»‘å®šï¼šç”¨äºçˆ¶ç»„ä»¶å‘å­ç»„ä»¶çš„æŒ‡å®šå±æ€§è®¾ç½®æ•°æ®ï¼Œä»…èƒ½è®¾ç½® JSON å…¼å®¹æ•°æ®ï¼ˆè‡ªåŸºç¡€åº“ç‰ˆæœ¬ 2.0.9 å¼€å§‹ï¼Œè¿˜å¯ä»¥åœ¨æ•°æ®ä¸­åŒ…å«å‡½æ•°ï¼‰ã€‚å…·ä½“åœ¨ ç»„ä»¶æ¨¡æ¿å’Œæ ·å¼ ç« èŠ‚ä¸­ä»‹ç»ã€‚ äº‹ä»¶ï¼šç”¨äºå­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå¯ä»¥ä¼ é€’ä»»æ„æ•°æ®ã€‚ å¦‚æœä»¥ä¸Šä¸¤ç§æ–¹å¼ä¸è¶³ä»¥æ»¡è¶³éœ€è¦ï¼Œçˆ¶ç»„ä»¶è¿˜å¯ä»¥é€šè¿‡ this.selectComponent æ–¹æ³•è·å–å­ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥è®¿é—®ç»„ä»¶çš„ä»»æ„æ•°æ®å’Œæ–¹æ³•ã€‚ ç›‘å¬äº‹ä»¶ äº‹ä»¶ç³»ç»Ÿæ˜¯ç»„ä»¶é—´é€šä¿¡çš„ä¸»è¦æ–¹å¼ä¹‹ä¸€ã€‚è‡ªå®šä¹‰ç»„ä»¶å¯ä»¥è§¦å‘ä»»æ„çš„äº‹ä»¶ï¼Œå¼•ç”¨ç»„ä»¶çš„é¡µé¢å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ã€‚å…³äºäº‹ä»¶çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•ï¼Œå‚è§ äº‹ä»¶ ã€‚ ç›‘å¬è‡ªå®šä¹‰ç»„ä»¶äº‹ä»¶çš„æ–¹æ³•ä¸ç›‘å¬åŸºç¡€ç»„ä»¶äº‹ä»¶çš„æ–¹æ³•å®Œå…¨ä¸€è‡´ï¼š ä»£ç ç¤ºä¾‹ï¼š 123456789&lt;!-- å½“è‡ªå®šä¹‰ç»„ä»¶è§¦å‘â€œmyeventâ€äº‹ä»¶æ—¶ï¼Œè°ƒç”¨â€œonMyEventâ€æ–¹æ³• --&gt;&lt;component-tag-name bindmyevent=&quot;onMyEvent&quot; /&gt;&lt;!-- æˆ–è€…å¯ä»¥å†™æˆ --&gt;&lt;component-tag-name bind:myevent=&quot;onMyEvent&quot; /&gt;Page({ onMyEvent: function(e){ e.detail // è‡ªå®šä¹‰ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶æä¾›çš„detailå¯¹è±¡ }}) è§¦å‘äº‹ä»¶ è‡ªå®šä¹‰ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶ï¼Œéœ€è¦ä½¿ç”¨ triggerEvent æ–¹æ³•ï¼ŒæŒ‡å®šäº‹ä»¶åã€detailå¯¹è±¡å’Œäº‹ä»¶é€‰é¡¹ï¼š ä»£ç ç¤ºä¾‹ï¼š åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ 123456789101112&lt;!-- åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­ --&gt;&lt;button bindtap=&quot;onTap&quot;&gt;ç‚¹å‡»è¿™ä¸ªæŒ‰é’®å°†è§¦å‘â€œmyeventâ€äº‹ä»¶&lt;/button&gt;Component({ properties: {}, methods: { onTap: function(){ var myEventDetail = {} // detailå¯¹è±¡ï¼Œæä¾›ç»™äº‹ä»¶ç›‘å¬å‡½æ•° var myEventOption = {} // è§¦å‘äº‹ä»¶çš„é€‰é¡¹ this.triggerEvent('myevent', myEventDetail, myEventOption) } }}) è§¦å‘äº‹ä»¶çš„é€‰é¡¹åŒ…æ‹¬ï¼š é€‰é¡¹å ç±»å‹ æ˜¯å¦å¿…å¡« é»˜è®¤å€¼ æè¿° bubbles Boolean å¦ false äº‹ä»¶æ˜¯å¦å†’æ³¡ composed Boolean å¦ false äº‹ä»¶æ˜¯å¦å¯ä»¥ç©¿è¶Šç»„ä»¶è¾¹ç•Œï¼Œä¸ºfalseæ—¶ï¼Œäº‹ä»¶å°†åªèƒ½åœ¨å¼•ç”¨ç»„ä»¶çš„èŠ‚ç‚¹æ ‘ä¸Šè§¦å‘ï¼Œä¸è¿›å…¥å…¶ä»–ä»»ä½•ç»„ä»¶å†…éƒ¨ capturePhase Boolean å¦ false äº‹ä»¶æ˜¯å¦æ‹¥æœ‰æ•è·é˜¶æ®µ å…³äºå†’æ³¡å’Œæ•è·é˜¶æ®µçš„æ¦‚å¿µï¼Œè¯·é˜…è¯» äº‹ä»¶ ç« èŠ‚ä¸­çš„ç›¸å…³è¯´æ˜ã€‚ ä»£ç ç¤ºä¾‹ï¼š åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ 12345678910111213141516171819202122// é¡µé¢ page.wxml&lt;another-component bindcustomevent=&quot;pageEventListener1&quot;&gt; &lt;my-component bindcustomevent=&quot;pageEventListener2&quot;&gt;&lt;/my-component&gt;&lt;/another-component&gt;// ç»„ä»¶ another-component.wxml&lt;view bindcustomevent=&quot;anotherEventListener&quot;&gt; &lt;slot /&gt;&lt;/view&gt;// ç»„ä»¶ my-component.wxml&lt;view bindcustomevent=&quot;myEventListener&quot;&gt; &lt;slot /&gt;&lt;/view&gt;// ç»„ä»¶ my-component.jsComponent({ methods: { onTap: function(){ this.triggerEvent('customevent', {}) // åªä¼šè§¦å‘ pageEventListener2 this.triggerEvent('customevent', {}, { bubbles: true }) // ä¼šä¾æ¬¡è§¦å‘ pageEventListener2 ã€ pageEventListener1 this.triggerEvent('customevent', {}, { bubbles: true, composed: true }) // ä¼šä¾æ¬¡è§¦å‘ pageEventListener2 ã€ anotherEventListener ã€ pageEventListener1 } }}) è·å–ç»„ä»¶å®ä¾‹ å¯åœ¨çˆ¶ç»„ä»¶é‡Œè°ƒç”¨ this.selectComponent ï¼Œè·å–å­ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ã€‚ è°ƒç”¨æ—¶éœ€è¦ä¼ å…¥ä¸€ä¸ªåŒ¹é…é€‰æ‹©å™¨ selectorï¼Œå¦‚ï¼šthis.selectComponent(&quot;.my-component&quot;)ã€‚ selector è¯¦ç»†è¯­æ³•å¯æŸ¥çœ‹ selector è¯­æ³•å‚è€ƒæ–‡æ¡£ã€‚ ä»£ç ç¤ºä¾‹ï¼š åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ 12345678// çˆ¶ç»„ä»¶Page({ data: {}, getChildComponent: function () { const child = this.selectComponent('.my-component'); console.log(child) }}) åœ¨ä¸Šä¾‹ä¸­ï¼Œçˆ¶ç»„ä»¶å°†ä¼šè·å– class ä¸º my-component çš„å­ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼Œå³å­ç»„ä»¶çš„ this ã€‚ æ³¨æ„ ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå°ç¨‹åºä¸æ’ä»¶ä¹‹é—´ã€ä¸åŒæ’ä»¶ä¹‹é—´çš„ç»„ä»¶å°†æ— æ³•é€šè¿‡ selectComponent å¾—åˆ°ç»„ä»¶å®ä¾‹ï¼ˆå°†è¿”å› nullï¼‰ã€‚å¦‚æœæƒ³è®©ä¸€ä¸ªç»„ä»¶åœ¨ä¸Šè¿°æ¡ä»¶ä¸‹ä¾ç„¶èƒ½è¢« selectComponent è¿”å›ï¼Œå¯ä»¥è‡ªå®šä¹‰å…¶è¿”å›ç»“æœï¼ˆè§ä¸‹ï¼‰ã€‚ è‡ªå®šä¹‰çš„ç»„ä»¶å®ä¾‹è·å–ç»“æœ è‹¥éœ€è¦è‡ªå®šä¹‰ selectComponent è¿”å›çš„æ•°æ®ï¼Œå¯ä½¿ç”¨å†…ç½® behavior: wx://component-export ä»åŸºç¡€åº“ç‰ˆæœ¬ 2.2.3 å¼€å§‹æä¾›æ”¯æŒã€‚ ä½¿ç”¨è¯¥ behavior æ—¶ï¼Œè‡ªå®šä¹‰ç»„ä»¶ä¸­çš„ export å®šä¹‰æ®µå°†ç”¨äºæŒ‡å®šç»„ä»¶è¢« selectComponent è°ƒç”¨æ—¶çš„è¿”å›å€¼ã€‚ ä»£ç ç¤ºä¾‹ï¼š åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ 1234567891011// è‡ªå®šä¹‰ç»„ä»¶ my-component å†…éƒ¨Component({ behaviors: ['wx://component-export'], export() { return { myField: 'myValue' } }})&lt;!-- ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶æ—¶ --&gt;&lt;my-component id=&quot;the-id&quot; /&gt;// çˆ¶ç»„ä»¶è°ƒç”¨const child = this.selectComponent('#the-id') // ç­‰äº { myField: 'myValue' } åœ¨ä¸Šä¾‹ä¸­ï¼Œçˆ¶ç»„ä»¶è·å– id ä¸º the-id çš„å­ç»„ä»¶å®ä¾‹çš„æ—¶å€™ï¼Œå¾—åˆ°çš„æ˜¯å¯¹è±¡ { myField: 'myValue' } ã€‚ å¼€å‘ç»éªŒ å‡†å¤‡ éœ€è¦åç«¯æ¥å£ä½¿ç”¨è¦å¼€é€šä¼ä¸šè´¦å·ï¼Œä¸”æ³¨å†Œè´¹ç”¨300å…ƒ æœ‰åå°æ•°æ®ï¼šæœåŠ¡å™¨ã€åŸŸåã€ç«¯å£443ã€8080ã€80 å¼€é€šå¹¶ä¸”å¤‡æ¡ˆã€‚ 443ç«¯å£ ä¸šåŠ¡åŸŸåéœ€è¦ï¼Œå…¶ä»–ç«¯å£æœåŠ¡åŸŸåéœ€è¦ï¼Œå¼€å‘æ—¶å¯å…³é—­åŸŸåæ ¡éªŒã€‚ å¯é€šè¿‡ UniApp ï¼Œé€šè¿‡ VUE æ–¹å¼ç®€ä»‹å‘è¡Œå°ç¨‹åºã€‚ å¯é€šè¿‡VSCodeæ‰“å¼€HBuilder X è¿è¡Œçš„é¡¹ç›®æ¯”è¾ƒæ–¹ä¾¿ ä¸šåŠ¡åŸŸåï¼ŒæœåŠ¡å™¨åŸŸå æ³¨æ„åˆ†åŒ…é—®é¢˜ï¼Œæ¯ä¸ªåŒ…ä¸å¤§äº2M. å¯ä»¥é€šè¿‡ä»£ç†é€šè¿‡ä¸€ä¸ªåŸŸåä½¿ç”¨å¤šä¸ªä»£ç†ã€‚ è½¬è½½æ•´ç†æ¥æºï¼šhttps://developers.weixin.qq.com/miniprogram/dev/framework/app-service/route.html","link":"/2021/02/25/Draft/2021/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"title":"å¿«æŸ¥","text":"Linux,Shell,è½¯ä»¶ç­‰å¸¸ç”¨å‘½ä»¤å¿«æ·é”® JAVA 1234567891011121314151617181920212223242526272829303132333435java -é€‰é¡¹å…¶ä¸­é€‰é¡¹åŒ…æ‹¬: -d32 ä½¿ç”¨ 32 ä½æ•°æ®æ¨¡å‹ (å¦‚æœå¯ç”¨) -d64 ä½¿ç”¨ 64 ä½æ•°æ®æ¨¡å‹ (å¦‚æœå¯ç”¨) -server é€‰æ‹© &quot;server&quot; VM é»˜è®¤ VM æ˜¯ server. -cp &lt;ç›®å½•å’Œ zip/jar æ–‡ä»¶çš„ç±»æœç´¢è·¯å¾„&gt; -classpath &lt;ç›®å½•å’Œ zip/jar æ–‡ä»¶çš„ç±»æœç´¢è·¯å¾„&gt; ç”¨ ; åˆ†éš”çš„ç›®å½•, JAR æ¡£æ¡ˆ å’Œ ZIP æ¡£æ¡ˆåˆ—è¡¨, ç”¨äºæœç´¢ç±»æ–‡ä»¶ã€‚ -D&lt;åç§°&gt;=&lt;å€¼&gt; è®¾ç½®ç³»ç»Ÿå±æ€§ -verbose:[class|gc|jni] å¯ç”¨è¯¦ç»†è¾“å‡º -version è¾“å‡ºäº§å“ç‰ˆæœ¬å¹¶é€€å‡º -showversion è¾“å‡ºäº§å“ç‰ˆæœ¬å¹¶ç»§ç»­ -ea[:&lt;packagename&gt;...|:&lt;classname&gt;] -enableassertions[:&lt;packagename&gt;...|:&lt;classname&gt;] æŒ‰æŒ‡å®šçš„ç²’åº¦å¯ç”¨æ–­è¨€ -da[:&lt;packagename&gt;...|:&lt;classname&gt;] -disableassertions[:&lt;packagename&gt;...|:&lt;classname&gt;] ç¦ç”¨å…·æœ‰æŒ‡å®šç²’åº¦çš„æ–­è¨€ -esa | -enablesystemassertions å¯ç”¨ç³»ç»Ÿæ–­è¨€ -dsa | -disablesystemassertions ç¦ç”¨ç³»ç»Ÿæ–­è¨€ -agentlib:&lt;libname&gt;[=&lt;é€‰é¡¹&gt;] åŠ è½½æœ¬æœºä»£ç†åº“ &lt;libname&gt;, ä¾‹å¦‚ -agentlib:hprof å¦è¯·å‚é˜… -agentlib:jdwp=help å’Œ -agentlib:hprof=help -agentpath:&lt;pathname&gt;[=&lt;é€‰é¡¹&gt;] æŒ‰å®Œæ•´è·¯å¾„ååŠ è½½æœ¬æœºä»£ç†åº“ -javaagent:&lt;jarpath&gt;[=&lt;é€‰é¡¹&gt;] åŠ è½½ Java ç¼–ç¨‹è¯­è¨€ä»£ç†, è¯·å‚é˜… java.lang.instrument -splash:&lt;imagepath&gt; ä½¿ç”¨æŒ‡å®šçš„å›¾åƒæ˜¾ç¤ºå¯åŠ¨å±å¹•æœ‰å…³è¯¦ç»†ä¿¡æ¯, è¯·å‚é˜… http://www.oracle.com/technetwork/java/javase/documentation/index.htmlã€‚ å¸¸ç”¨ 123#æŸ¥çœ‹JDKå®‰è£…è·¯å¾„ ç»“æœç¬¬ä¸€è¡Œjava -verbose#[Opened C:\\Program Files\\Java\\jdk1.8.0_181\\jre\\lib\\rt.jar] CMD cmdçª—å£ç‚¹å‡»å†…å®¹ä¼šæš‚åœï¼Œå³é”®å±æ€§å…³é—­å¿«é€Ÿç¼–è¾‘å³å¯ï¼Œä½†æ˜¯å…³é—­åæ— æ³•å¤åˆ¶cmdå†…å®¹ã€‚ ç½‘ç»œ 123456789101112131415161718#æŸ¥æ‰¾å¯¹åº”ç«¯å£pidnetstat -aon|findstr &quot;59207&quot;#æŸ¥çœ‹å¯¹åº”pidç¨‹åºtasklist|findstr &quot;1396&quot;#å…³é—­å¯¹åº”ç«¯å£taskkill /t /f /pid &quot;8888&quot;#å¯åŠ¨è¿œç¨‹æ¡Œé¢mstsc #ç­–ç•¥ç»„gpedit.msc#ç»™åŒå±€åŸŸç½‘å‘é€æ¶ˆæ¯å¼¹çª—msg /server:126.11.9.213 * æ¶ˆæ¯ #æŸ¥çœ‹åŸŸåIPnslookup åŸŸå#æŸ¥çœ‹ç«¯å£æ˜¯å¦äº’é€šï¼Œéœ€è¦æ§åˆ¶é¢æ¿æ‰“å¼€ telnetåŠŸèƒ½telnet ip ç«¯å£#æŸ¥çœ‹ä¸»æ¿æ”¯æŒæœ€å¤§å†…å­˜wmic memphysical get maxcapacity windowså¿«æ·å¼¹çª— 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#è®¡ç®—å™¨ calc#å‰ªè´´ç°¿æŸ¥çœ‹å™¨ clipbrd#è®¾å¤‡ç®¡ç†å™¨ devmgmt.msc#æ˜¾ç¤ºå±æ€§ control desktop (desk.cpl)#Internetå±æ€§ inetcpl.cpl#IPé…ç½®å®ç”¨ç¨‹åº(æ˜¾ç¤ºè¿æ¥é…ç½®) ipconfig /all#IPé…ç½®å®ç”¨ç¨‹åº(æ˜¾ç¤ºDNSç¼“å­˜å†…å®¹) ipconfig /displaydns#IPé…ç½®å®ç”¨ç¨‹åº(åˆ é™¤DNSç¼“å­˜å†…å®¹) ipconfig /flushdns#IPé…ç½®å®ç”¨ç¨‹åº(é‡Šæ”¾å…¨éƒ¨(æˆ–æŒ‡å®š)é€‚é…å™¨çš„ç”±DHCPåˆ†é…çš„åŠ¨æ€IPåœ°å€) ipconfig /release#IPé…ç½®å®ç”¨ç¨‹åº(ä¸ºå…¨éƒ¨é€‚é…å™¨é‡æ–°åˆ†é…IPåœ°å€) ipconfig /renew#IPé…ç½®å®ç”¨ç¨‹åº(åˆ·æ–°DHCPå¹¶é‡æ–°æ³¨å†ŒDNS) ipconfig /registerdns#IPé…ç½®å®ç”¨ç¨‹åº(æ˜¾ç¤ºDHCP Class ID) ipconfig /showclassid#IPé…ç½®å®ç”¨ç¨‹åº(ä¿®æ”¹DHCP Class ID) ipconfig /setclassid#Javaæ§åˆ¶é¢æ¿(å¦‚æœå·²ç»å®‰è£…) jpicpl32.cpl#æœ¬åœ°å®‰å…¨è®¾ç½® secpol.msc#ä»Windowsæ³¨é”€ logoff#ç½‘ç»œè¿æ¥ control netconnections (ncpa.cpl)#è®°äº‹æœ¬ notepad#è¿œç¨‹æ¡Œé¢ mstsc#Windowså®‰å…¨ä¸­å¿ƒ wscui.cpl#æœåŠ¡ services.msc#å…±äº«æ–‡ä»¶å¤¹ fsmgmt.msc#å£°éŸ³å’ŒéŸ³é¢‘è®¾å¤‡å±æ€§ mmsys.cpl#ç³»ç»Ÿé…ç½®å®ç”¨ç¨‹åº msconfig#ä»»åŠ¡ç®¡ç†å™¨ taskmgr HEXO Hexo c æ¸…ç† Hexo gç¼–è¯‘ Hexo sè¿è¡Œ Hexo déƒ¨ç½² hexo new draftï¼ˆscaffoldsä¸­æ¨¡æ¿åå­—ï¼‰â€œæ ‡é¢˜â€æ–°å»ºè‰ç¨¿ åœ¨source/_draftsç›®å½• hexo new â€œæ ‡é¢˜â€æ–°å»ºæ–‡æ¡£ hexo publish â€œæ ‡é¢˜â€è‰ç¨¿ç§»åŠ¨åˆ°source/_postç›®å½• IDEA ctrl +R æ›¿æ¢ ctrl +shift + æ•°å­—æ ‡è®°æ–‡ä»¶å†…ä½ç½® ctrl+æ•°å­—å›åˆ°å¯¹åº”ä½ç½® åŒå‡»shiftå…¨å±€æœç´¢ ctrl + shift +F å…¨å±€æ–‡å­—æœç´¢ ctrl + shift +y æœç´¢æ’ä»¶ç¿»è¯‘é€‰ä¸­æ–‡å­— ctrl + shift +o codotaæœç´¢æ‰€é€‰ä»£ç ç¤ºä¾‹ ä¸é€‰ä¸­ä»£ç æ—¶æ˜¾ç¤ºç¿»è¯‘è¾“å…¥æ¡† alt + F7 å¿«é€ŸåŒ¹é…é¡¹ç›®ä¸­æ‰€æœ‰æ­¤ç”¨æ³• Ctrl+Alt+Shift+U UMLå›¾ Shift+Alt é€‰ä¸­æ–‡ä»¶æ±‡æ€»æ‰€æœ‰å½“å‰å­—ç¬¦ Ctrl+Shift+E å¯è·å–æœ€è¿‘æŸ¥çœ‹æˆ–æ›´æ”¹çš„ä»£ç æ®µçš„åˆ—è¡¨ WINDOWS alt + tab ä¸¤åº”ç”¨ä¹‹é—´åˆ‡æ¢ LINUX yum install net-tools å®‰è£…ç½‘ç»œå·¥å…· linuxå¯ç›´æ¥å¤åˆ¶ç»™åˆ«äººï¼Œå¤åˆ¶VMwareå·¥ä½œç›®å½•ç„¶åç›´æ¥æ‰“å¼€ su å›è½¦è¾“å…¥å¯†ç è½¬æ¢ä¸ºè¶…çº§ç®¡ç†å‘˜ ifconfigæŸ¥è¯¢ç½‘ç»œç›¸å…³ clearæ¸…ç©ºæ˜¾ç¤º ifconfig eth0 192.16.ã€‚ã€‚ã€‚è®¾ç½®IPåœ°å€ å‘½ä»¤å¤šæ•°ä¸ºä¸´æ—¶ç”Ÿæ•ˆï¼Œå†™å…¥é…ç½®æ–‡ä»¶ä¸ºæ°¸ä¹…ç”Ÿæ•ˆ ls [-é€‰é¡¹][å‚æ•°]ï¼šls -la /etc ç›®å½•å¤„ç†å‘½ä»¤ï¼ˆlistï¼‰ ls -a/l/lh/ld/i éšè—æ–‡ä»¶/æ–‡ä»¶è¯¦ç»†ä¿¡æ¯/å¤§å°å•ä½æ˜¾ç¤º/æŸ¥çœ‹ç›®å½•ä¿¡æ¯/æŸ¥çœ‹æ–‡ä»¶id d l æ–‡ä»¶å¼€å¤´ æ–‡ä»¶ã€ç›®å½•ã€è½¯è¿æ¥ æƒé™ mkdirã€make directoriesã€‘ åˆ›å»ºç›®å½• -pé€’å½’åˆ›å»º åˆ›å»ºæ²¡æœ‰æ­¤ç›®å½•ä¸‹çš„ç›®å½•ï¼Œå¯åŒæ—¶åˆ›å»ºå¤šä¸ªmkdir /tmp/a/b /tmp/a/c cd ã€change directoryã€‘åˆ‡æ¢ç›®å½• cd ..è¿”å›ä¸Šä¸€çº§ç›®å½• pwdã€print working directoryã€‘ cd ./.. å½“å‰ç›®å½•/ä¸Šçº§ç›®å½• remdirã€remove empty dirctoriesã€‘ åˆ é™¤ç©ºç›®å½• cpã€copyã€‘å¤åˆ¶ æºæ–‡ä»¶ ç›®å½• -rå¤åˆ¶ç›®å½• -på¤åˆ¶å¹¶ä¿ç•™æ–‡ä»¶å±æ€§ï¼ˆæ¯”å¦‚åˆ›å»ºæ—¶é—´ï¼‰ å¤åˆ¶å¹¶æ”¹å mvã€moveã€‘ å‰ªåˆ‡ rmã€removeã€‘åˆ é™¤æ–‡ä»¶ï¼Œç›®å½• -råˆ é™¤ç›®å½• -få¼ºåˆ¶åˆ é™¤ -rfç›´æ¥åˆ é™¤ ctrl+cç»ˆæ­¢æ“ä½œ touch åˆ›å»ºæ–‡ä»¶ å¯åˆ›å»ºå¤šä¸ªï¼Œåˆ›å»ºç©ºæ ¼æ–‡ä»¶åä½¿ç”¨åŒå¼•å·ä½†æ˜¯ä¸å»ºè®® cat æµè§ˆæ–‡ä»¶å†…å®¹ -næ˜¾ç¤ºè¡Œå· tac å€’ç½®æµè§ˆæ–‡ä»¶å†…å®¹ more åˆ†é¡µæ˜¾ç¤ºé•¿æ–‡ä»¶ ç©ºæ ¼ç¿»é¡µï¼Œå›è½¦æ¢è¡Œï¼Œqé€€å‡ºï¼Œ less æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œå¯å‘ä¸Šç¿»é¡µpageupï¼Œå¯æœç´¢ï¼š/å…³é”®è¯ næ˜¾ç¤ºä¸‹ä¸€ä¸ªæœç´¢ç»“æœ head åªçœ‹æ–‡ä»¶å‰å‡ è¡Œ -n 7 æ–‡ä»¶ æ˜¾ç¤ºå‰7è¡Œï¼Œé»˜è®¤å‰åè¡Œ tail åŒä¸Š -fåŠ¨æ€æ˜¾ç¤ºå˜åŒ– ctrl+cé€€å‡º lnã€linkã€‘ -såˆ›å»ºè½¯è¿æ¥ ä¸å†™-såˆ›å»ºç¡¬é“¾æ¥ã€è½¯è¿æ¥ç›¸å½“äºå¿«æ·æ–¹å¼rwxrwxrwxï¼Œæƒé™è·Ÿæºæ–‡ä»¶æƒé™æ— å…³ï¼Œç¡¬é“¾æ¥ç›¸å½“äºæ‹·è´cp -på¹¶ä¸”åŒæ­¥æ›´æ–°ï¼Œç¡¬é“¾æ¥é€šè¿‡ièŠ‚ç‚¹åŒºåˆ†ï¼Œä¸èƒ½è·¨åˆ†åŒºï¼ˆç›¸å½“äºä¸èƒ½cç›˜å¤åˆ¶åˆ°dç›˜ï¼‰ï¼Œä¸èƒ½é’ˆå¯¹ç›®å½•ä½¿ç”¨ã€‘ yum -y install git sudo -s1è·å¾—ç®¡ç†å‘˜æƒé™ å‘½ä»¤ï¼šsudo -så›è½¦ è¾“å…¥å¯†ç  ç¼–è¾‘ä¿å­˜æ–‡ä»¶----------------------------------- ç¬¬ä¸€æ­¥ï¼šcdåˆ°è¯¥æ–‡ä»¶çš„ç›®å½•ä¸‹ ç¬¬äºŒæ­¥ï¼švi è¦ç¼–è¾‘çš„æ–‡ä»¶åï¼Œè¿›å…¥æ™®é€šæ¨¡å¼ï¼Œï¼ˆå¯ä»¥æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼‰ sudo gedit /etc/apt/sources.list å¯è§†åŒ–ç¼–è¾‘ ç¬¬ä¸‰æ­¥ï¼šè¾“å…¥ i è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¼€å§‹ç¼–è¾‘æ–‡æœ¬ ç¬¬å››æ­¥ï¼šç¼–è¾‘ä¹‹åï¼ŒæŒ‰ESCé€€å‡ºåˆ°æ™®é€šæ¨¡å¼ã€‚ ç¬¬äº”æ­¥ï¼šåœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œè¾“å…¥ : è¿›å…¥å‘½ä»¤æ¨¡å¼ ç¬¬å…­æ­¥ï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥wq, å³å¯ä¿å­˜å¹¶é€€å‡º ã€#ã€‘ä»£è¡¨ rootæƒé™ ã€$ã€‘ä»£è¡¨æ™®é€šç”¨æˆ· rebooté‡å¯ BUGâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ centos7 cannot find a valid baseurl for repoÂ·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· https://blog.csdn.net/jiankunking/article/details/82770502 zlib.h: No such file or directoryÂ·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· yum install zlib-devel CentOS Name or service not knownÂ·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· vi /etc/sysconfig/network-scripts/ifcfg-ens33å‘½ä»¤æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶ Job for network.service failed because the control process exited with error codeÂ·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· å…³é—­ NetworkManger æœåŠ¡å°±å¥½äº†ï¼Œ service NetworkManager stop ç¦æ­¢å¼€æœºå¯åŠ¨ chkconfig NetworkManager off su: Authentication failureÂ·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· sudo passwd root ç½‘ç»œâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç½‘ç»œä¸è¡Œéƒ½ç”¨æ¡¥æ¥ 1systemctl restart network //é‡å¯ç½‘å¡ ====ifup eth0ï¼ˆç½‘å¡åç§°ï¼‰ ip addræŸ¥è¯¢ç½‘ç»œä¿¡æ¯ postgresqlâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- sudo -u postgres psql è¿›å…¥psqläº¤äº’ç¯å¢ƒ alter user postgres with password'å¯†ç '; ä¿®æ”¹postgresç”¨æˆ·çš„å¯†ç  \\q é€€å‡ºæ•°æ®åº“ ? \\passwordï¼šè®¾ç½®å¯†ç  \\hï¼šæŸ¥çœ‹SQLå‘½ä»¤çš„è§£é‡Šï¼Œæ¯”å¦‚\\h selectã€‚ ?ï¼šæŸ¥çœ‹psqlå‘½ä»¤åˆ—è¡¨ã€‚ \\lï¼šåˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ã€‚ \\c [database_name]ï¼šè¿æ¥å…¶ä»–æ•°æ®åº“ã€‚ \\dï¼šåˆ—å‡ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¦‚Table,Viewç­‰ã€‚ \\dt: åˆ—å‡ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰Tableã€‚ \\d [table_name]ï¼šåˆ—å‡ºæŸä¸€å¼ è¡¨æ ¼çš„ç»“æ„ã€‚ \\duï¼šåˆ—å‡ºæ‰€æœ‰ç”¨æˆ·ã€‚ \\eï¼šæ‰“å¼€æ–‡æœ¬ç¼–è¾‘å™¨ã€‚ \\conninfoï¼šåˆ—å‡ºå½“å‰æ•°æ®åº“å’Œè¿æ¥çš„ä¿¡æ¯ã€‚ df å‘½ä»¤ æ¥æ£€æŸ¥å½“å‰ç£ç›˜åˆ©ç”¨ç‡ SecureCRT============================== alt+pè¿›å…¥sftp put -r è·¯å¾„ä¼ ç›®å½• shpå¯¼å…¥åˆ°postgresqlâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” shp2pgsql -s 4544 -c -W &quot;UTF-8&quot; ADDRESS.shp public.rrrrr| psql -h 192.168.22.128 -d postgres -U postgres -W è½¬æ¢æ ¼å¼â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ogr2ogr -f &quot;GeoJSON&quot; ./natural.json PG:&quot;host=localhost dbname=postgres user=postgres password=724111&quot; -sql &quot;select * from natural&quot; åˆ‡ç‰‡â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” tippecanoe -z 14 -Z 5 -ps -Bg -o buildings.mbtiles buildings.json tippecanoe -e lakepbf -pC -Z1 -z17 -f natural.json å„ç§å¸¸ç”¨è½¯ä»¶ç¯å¢ƒå®‰è£… NPM npm install ---install dependencies npm run dev---serve with hot reload at localhost:8080 npm run build---build for production with minification npm run build --report----build for production and view the bundle analyzer report npm run unit---run unit tests npm run e2e---run e2e tests npm test----run all tests REDIDS ./redis-server redis.windows.conf å¯åŠ¨æœåŠ¡ server.exe --service-install redis.windows.conf --loglevel verbose å¼€æœºå¯åŠ¨ windows redis-server --service-install redis.windows-service.conf --loglevel verbose VSCODE ctrl+~ ï¼šæ‰“å¼€ç»ˆç«¯ F1 æˆ– Ctrl+Shift+Pï¼ˆä¿—ç§°ä¸‡èƒ½é”®ï¼‰ ï¼šæ‰“å¼€å‘½ä»¤é¢æ¿ã€‚åœ¨æ‰“å¼€çš„è¾“å…¥æ¡†å†…ï¼Œå¯ä»¥è¾“å…¥ä»»ä½•å‘½ä»¤ ä»£ç æ ¼å¼åŒ–: Shift+Alt+F VUE è„šæ‰‹æ¶ npm config set registry https://registry.npm.taobao.org vue init webpack projectName cd projectName npm install npm run dev npm i element-ui -S npm install axios GIT Gitå¸¸ç”¨å‘½ä»¤åŠæ–¹æ³•å¤§å…¨ ä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„å¸¸ç”¨ Git å‘½ä»¤æ¸…å•ã€‚å‡ ä¸ªä¸“ç”¨åè¯çš„è¯‘åå¦‚ä¸‹ã€‚ Workspaceï¼šå·¥ä½œåŒº Index / Stageï¼šæš‚å­˜åŒº Repositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ Remoteï¼šè¿œç¨‹ä»“åº“ æœ¬åœ°åˆ†æ”¯å…³è”è¿œç¨‹ 1git branch --set-upstream-to=origin/åˆ†æ”¯å åˆ†æ”¯å ä»£ç åº“ä¿®æ”¹å¯†ç åpushä¸ä¸Šå»æ€ä¹ˆåŠï¼Ÿ 1234// é‡æ–°è¾“å…¥å¯†ç git config --system --unset credential.helper// å¯†ç å­˜å‚¨åŒæ­¥git config --global credential.helper store ä¸€ã€æ–°å»ºä»£ç åº“ 123456# åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“$ git init# æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“$ git init [project-name]# ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²$ git clone [url] äºŒã€é…ç½® Gitçš„è®¾ç½®æ–‡ä»¶ä¸º.gitconfigï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚ 1234567# æ˜¾ç¤ºå½“å‰çš„Gité…ç½®$ git config --list# ç¼–è¾‘Gité…ç½®æ–‡ä»¶$ git config -e [--global]# è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯$ git config [--global] user.name &quot;[name]&quot;$ git config [--global] user.email &quot;[email address]&quot; ä¸‰ã€å¢åŠ /åˆ é™¤æ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758# æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº$ git add [file1] [file2] ...# æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•$ git add [dir]# æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº$ git add . # æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤# å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤$ git add -p # åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº$ git rm [file1] [file2] ... # åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº$ git rm --cached [file] # æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº$ git mv [file-original] [file-renamed] å››ã€ä»£ç æäº¤ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869# æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº$ git commit -m [message] # æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº$ git commit [file1] [file2] ... -m [message] # æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº$ git commit -a # æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰diffä¿¡æ¯$ git commit -v # ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤# å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯$ git commit --amend -m [message] # é‡åšä¸Šä¸€æ¬¡commitï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–$ git commit --amend [file1] [file2] ... äº”ã€åˆ†æ”¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165# åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯$ git branch # åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯$ git branch -r # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯$ git branch -a # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯$ git branch [branch-name] # ä»¥è¿œç¨‹åˆ†æ”¯ä¸ºåŸºç¡€æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯$ git checkout -b [branch] origin/[remote-branch] # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit$ git branch [branch] [commit] # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»$ git branch --track [branch] [remote-branch] # åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº$ git checkout [branch-name] # åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯$ git checkout - # å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´$ git branch --set-upstream [branch] [remote-branch] # åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯$ git merge [branch] # é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯$ git cherry-pick [commit] # åˆ é™¤åˆ†æ”¯$ git branch -d [branch-name] # åˆ é™¤è¿œç¨‹åˆ†æ”¯$ git push origin --delete [branch-name]$ git branch -dr [remote/branch] å…­ã€æ ‡ç­¾ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101# åˆ—å‡ºæ‰€æœ‰tag$ git tag # æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit$ git tag [tag] # æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommit$ git tag [tag] [commit] # åˆ é™¤æœ¬åœ°tag$ git tag -d [tag] # åˆ é™¤è¿œç¨‹tag$ git push origin :refs/tags/[tagName] # æŸ¥çœ‹tagä¿¡æ¯$ git show [tag] # æäº¤æŒ‡å®štag$ git push [remote] [tag] # æäº¤æ‰€æœ‰tag$ git push [remote] --tags # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag$ git checkout -b [branch] [tag] ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237# æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶$ git status # æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²$ git log # æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶$ git log --stat # æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯$ git log -S [keyword] # æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ$ git log [tag] HEAD --pretty=format:%s # æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶&quot;æäº¤è¯´æ˜&quot;å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶$ git log [tag] HEAD --grep feature # æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å$ git log --follow [file]$ git whatchanged [file] # æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff$ git log -p [file] # æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤$ git log -5 --pretty --oneline # æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº$ git shortlog -sn # æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡$ git blame [file] # æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚$ git diff # æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚$ git diff --cached [file] # æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚$ git diff HEAD # æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚$ git diff [first-branch]...[second-branch] # æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç $ git diff --shortstat &quot;@{0 day ago}&quot; # æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–$ git show [commit] # æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶$ git show --name-only [commit] # æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹$ git show [commit]:[filename] # æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤$ git reflog å…«ã€è¿œç¨‹åŒæ­¥ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889# ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨$ git fetch [remote] # æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“$ git remote -v # æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯$ git remote show [remote] # å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å$ git remote add [shortname] [url] # å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶$ git pull [remote] [branch] # ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“$ git push [remote] [branch] # å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª$ git push [remote] --force # æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“$ git push [remote] --all ä¹ã€æ’¤é”€ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121# æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº$ git checkout [file] # æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº$ git checkout [commit] [file] # æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº$ git checkout . # é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜$ git reset [file] # é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´$ git reset --hard # é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜$ git reset [commit] # é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´$ git reset --hard [commit] # é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜$ git reset --keep [commit] # æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit# åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯$ git revert [commit] # æš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥$ git stash$ git stash pop åã€å…¶ä»– 12345# ç”Ÿæˆä¸€ä¸ªå¯ä¾›å‘å¸ƒçš„å‹ç¼©åŒ…$ git archive Gitåˆ†æ”¯ç®¡ç†ç­–ç•¥ ä¸€ã€ä¸»åˆ†æ”¯Master é¦–å…ˆï¼Œä»£ç åº“åº”è¯¥æœ‰ä¸€ä¸ªã€ä¸”ä»…æœ‰ä¸€ä¸ªä¸»åˆ†æ”¯ã€‚æ‰€æœ‰æä¾›ç»™ç”¨æˆ·ä½¿ç”¨çš„æ­£å¼ç‰ˆæœ¬ï¼Œéƒ½åœ¨è¿™ä¸ªä¸»åˆ†æ”¯ä¸Šå‘å¸ƒã€‚ Gitä¸»åˆ†æ”¯çš„åå­—ï¼Œé»˜è®¤å«åšMasterã€‚å®ƒæ˜¯è‡ªåŠ¨å»ºç«‹çš„ï¼Œç‰ˆæœ¬åº“åˆå§‹åŒ–ä»¥åï¼Œé»˜è®¤å°±æ˜¯åœ¨ä¸»åˆ†æ”¯åœ¨è¿›è¡Œå¼€å‘ã€‚ äºŒã€å¼€å‘åˆ†æ”¯Develop ä¸»åˆ†æ”¯åªç”¨æ¥åˆ†å¸ƒé‡å¤§ç‰ˆæœ¬ï¼Œæ—¥å¸¸å¼€å‘åº”è¯¥åœ¨å¦ä¸€æ¡åˆ†æ”¯ä¸Šå®Œæˆã€‚æˆ‘ä»¬æŠŠå¼€å‘ç”¨çš„åˆ†æ”¯ï¼Œå«åšDevelopã€‚ è¿™ä¸ªåˆ†æ”¯å¯ä»¥ç”¨æ¥ç”Ÿæˆä»£ç çš„æœ€æ–°éš”å¤œç‰ˆæœ¬ï¼ˆnightlyï¼‰ã€‚å¦‚æœæƒ³æ­£å¼å¯¹å¤–å‘å¸ƒï¼Œå°±åœ¨Masteråˆ†æ”¯ä¸Šï¼Œå¯¹Developåˆ†æ”¯è¿›è¡Œ&quot;åˆå¹¶&quot;ï¼ˆmergeï¼‰ã€‚ Gitåˆ›å»ºDevelopåˆ†æ”¯çš„å‘½ä»¤ï¼š git checkout -b develop master å°†Developåˆ†æ”¯å‘å¸ƒåˆ°Masteråˆ†æ”¯çš„å‘½ä»¤ï¼š # åˆ‡æ¢åˆ°Masteråˆ†æ”¯ git checkout master # å¯¹Developåˆ†æ”¯è¿›è¡Œåˆå¹¶ git merge --no-ff develop è¿™é‡Œç¨å¾®è§£é‡Šä¸€ä¸‹ï¼Œä¸Šä¸€æ¡å‘½ä»¤çš„--no-ffå‚æ•°æ˜¯ä»€ä¹ˆæ„æ€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGitæ‰§è¡Œ&quot;å¿«è¿›å¼åˆå¹¶&quot;ï¼ˆfast-farward mergeï¼‰ï¼Œä¼šç›´æ¥å°†Masteråˆ†æ”¯æŒ‡å‘Developåˆ†æ”¯ã€‚ ä½¿ç”¨--no-ffå‚æ•°åï¼Œä¼šæ‰§è¡Œæ­£å¸¸åˆå¹¶ï¼Œåœ¨Masteråˆ†æ”¯ä¸Šç”Ÿæˆä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚ä¸ºäº†ä¿è¯ç‰ˆæœ¬æ¼”è¿›çš„æ¸…æ™°ï¼Œæˆ‘ä»¬å¸Œæœ›é‡‡ç”¨è¿™ç§åšæ³•ã€‚å…³äºåˆå¹¶çš„æ›´å¤šè§£é‡Šï¼Œè¯·å‚è€ƒBenjamin Sandofskyçš„ã€ŠUnderstanding the Git Workflowã€‹ã€‚ ä¸‰ã€ä¸´æ—¶æ€§åˆ†æ”¯ å‰é¢è®²åˆ°ç‰ˆæœ¬åº“çš„ä¸¤æ¡ä¸»è¦åˆ†æ”¯ï¼šMasterå’ŒDevelopã€‚å‰è€…ç”¨äºæ­£å¼å‘å¸ƒï¼Œåè€…ç”¨äºæ—¥å¸¸å¼€å‘ã€‚å…¶å®ï¼Œå¸¸è®¾åˆ†æ”¯åªéœ€è¦è¿™ä¸¤æ¡å°±å¤Ÿäº†ï¼Œä¸éœ€è¦å…¶ä»–äº†ã€‚ ä½†æ˜¯ï¼Œé™¤äº†å¸¸è®¾åˆ†æ”¯ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€äº›ä¸´æ—¶æ€§åˆ†æ”¯ï¼Œç”¨äºåº”å¯¹ä¸€äº›ç‰¹å®šç›®çš„çš„ç‰ˆæœ¬å¼€å‘ã€‚ä¸´æ—¶æ€§åˆ†æ”¯ä¸»è¦æœ‰ä¸‰ç§ï¼š * åŠŸèƒ½ï¼ˆfeatureï¼‰åˆ†æ”¯ * é¢„å‘å¸ƒï¼ˆreleaseï¼‰åˆ†æ”¯ * ä¿®è¡¥bugï¼ˆfixbugï¼‰åˆ†æ”¯ è¿™ä¸‰ç§åˆ†æ”¯éƒ½å±äºä¸´æ—¶æ€§éœ€è¦ï¼Œä½¿ç”¨å®Œä»¥åï¼Œåº”è¯¥åˆ é™¤ï¼Œä½¿å¾—ä»£ç åº“çš„å¸¸è®¾åˆ†æ”¯å§‹ç»ˆåªæœ‰Masterå’ŒDevelopã€‚ å››ã€ åŠŸèƒ½åˆ†æ”¯ æ¥ä¸‹æ¥ï¼Œä¸€ä¸ªä¸ªæ¥çœ‹è¿™ä¸‰ç§&quot;ä¸´æ—¶æ€§åˆ†æ”¯&quot;ã€‚ ç¬¬ä¸€ç§æ˜¯åŠŸèƒ½åˆ†æ”¯ï¼Œå®ƒæ˜¯ä¸ºäº†å¼€å‘æŸç§ç‰¹å®šåŠŸèƒ½ï¼Œä»Developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ã€‚å¼€å‘å®Œæˆåï¼Œè¦å†å¹¶å…¥Developã€‚ åŠŸèƒ½åˆ†æ”¯çš„åå­—ï¼Œå¯ä»¥é‡‡ç”¨feature-*çš„å½¢å¼å‘½åã€‚ åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯ï¼š git checkout -b feature-x develop å¼€å‘å®Œæˆåï¼Œå°†åŠŸèƒ½åˆ†æ”¯åˆå¹¶åˆ°developåˆ†æ”¯ï¼š git checkout develop git merge --no-ff feature-x åˆ é™¤featureåˆ†æ”¯ï¼š git branch -d feature-x äº”ã€é¢„å‘å¸ƒåˆ†æ”¯ ç¬¬äºŒç§æ˜¯é¢„å‘å¸ƒåˆ†æ”¯ï¼Œå®ƒæ˜¯æŒ‡å‘å¸ƒæ­£å¼ç‰ˆæœ¬ä¹‹å‰ï¼ˆå³åˆå¹¶åˆ°Masteråˆ†æ”¯ä¹‹å‰ï¼‰ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æœ‰ä¸€ä¸ªé¢„å‘å¸ƒçš„ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚ é¢„å‘å¸ƒåˆ†æ”¯æ˜¯ä»Developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ï¼Œé¢„å‘å¸ƒç»“æŸä»¥åï¼Œå¿…é¡»åˆå¹¶è¿›Developå’ŒMasteråˆ†æ”¯ã€‚å®ƒçš„å‘½åï¼Œå¯ä»¥é‡‡ç”¨release-*çš„å½¢å¼ã€‚ åˆ›å»ºä¸€ä¸ªé¢„å‘å¸ƒåˆ†æ”¯ï¼š git checkout -b release-1.2 develop ç¡®è®¤æ²¡æœ‰é—®é¢˜åï¼Œåˆå¹¶åˆ°masteråˆ†æ”¯ï¼š git checkout master git merge --no-ff release-1.2 # å¯¹åˆå¹¶ç”Ÿæˆçš„æ–°èŠ‚ç‚¹ï¼Œåšä¸€ä¸ªæ ‡ç­¾ git tag -a 1.2 å†åˆå¹¶åˆ°developåˆ†æ”¯ï¼š git checkout develop git merge --no-ff release-1.2 æœ€åï¼Œåˆ é™¤é¢„å‘å¸ƒåˆ†æ”¯ï¼š git branch -d release-1.2 å…­ã€ä¿®è¡¥bugåˆ†æ”¯ æœ€åä¸€ç§æ˜¯ä¿®è¡¥bugåˆ†æ”¯ã€‚è½¯ä»¶æ­£å¼å‘å¸ƒä»¥åï¼Œéš¾å…ä¼šå‡ºç°bugã€‚è¿™æ—¶å°±éœ€è¦åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œè¿›è¡Œbugä¿®è¡¥ã€‚ ä¿®è¡¥bugåˆ†æ”¯æ˜¯ä»Masteråˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ã€‚ä¿®è¡¥ç»“æŸä»¥åï¼Œå†åˆå¹¶è¿›Masterå’ŒDevelopåˆ†æ”¯ã€‚å®ƒçš„å‘½åï¼Œå¯ä»¥é‡‡ç”¨fixbug-*çš„å½¢å¼ã€‚ åˆ›å»ºä¸€ä¸ªä¿®è¡¥bugåˆ†æ”¯ï¼š git checkout -b fixbug-0.1 master ä¿®è¡¥ç»“æŸåï¼Œåˆå¹¶åˆ°masteråˆ†æ”¯ï¼š git checkout master git merge --no-ff fixbug-0.1 git tag -a 0.1.1 å†åˆå¹¶åˆ°developåˆ†æ”¯ï¼š git checkout develop git merge --no-ff fixbug-0.1 æœ€åï¼Œåˆ é™¤&quot;ä¿®è¡¥bugåˆ†æ”¯&quot;ï¼š git branch -d fixbug-0.1 ç‰ˆæœ¬å›é€€-æ’¤é”€æ–‡ä»¶ä¿®æ”¹ å·¥ä½œåŒºä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶åï¼Œåˆæƒ³å›åˆ°ä¿®æ”¹å‰(git addå‰) \\1. å½“ç„¶å¯ä»¥ç›´æ¥æ‰‹åŠ¨å†åœ¨å·¥ä½œåŒºä¸­å°†æ–‡ä»¶ä¿®æ”¹å›å» \\2. ä¿®æ”¹åï¼Œé€šè¿‡å‘½ä»¤git statusæŸ¥çœ‹ 123456789101112131415161718192021222324252627282930313233$ git status# On branch master# Changes not staged for commit:# (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)# (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)## modified: readme.txt#no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) è¿™æ—¶Gitä¼šå‘Šè¯‰ä½ ï¼Œgit checkout -- fileå¯ä»¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ï¼š 1$ git checkout -- readme.txt Note: \\1. git checkout -- fileå‘½ä»¤ä¸­çš„--å¾ˆé‡è¦ï¼Œæ²¡æœ‰--ï¼Œå°±å˜æˆäº†â€œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯â€çš„å‘½ä»¤ï¼Œæˆ‘ä»¬åœ¨åé¢çš„åˆ†æ”¯ç®¡ç†ä¸­ä¼šå†æ¬¡é‡åˆ°git checkoutå‘½ä»¤ã€‚ \\2. å‘½ä»¤git checkout -- readme.txtæ„æ€å°±æ˜¯ï¼ŒæŠŠreadme.txtæ–‡ä»¶åœ¨å·¥ä½œåŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š ä¸€ç§æ˜¯readme.txtè‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼›ä¸€ç§æ˜¯readme.txtå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚æ€»ä¹‹ï¼Œå°±æ˜¯è®©è¿™ä¸ªæ–‡ä»¶å›åˆ°æœ€è¿‘ä¸€æ¬¡git commitæˆ–git addæ—¶çš„çŠ¶æ€ã€‚ \\3. å·¥ä½œåŒºã€æš‚å­˜åŒºçš„æ¦‚å¿µä¸æ¸…æ¥šçš„å¯è§äºGitç‰ˆæœ¬æ§åˆ¶æ•™ç¨‹ - Gitæœ¬åœ°ä»“åº“ å¦‚æœåœ¨å·¥ä½œåŒºä¸­ä¿®æ”¹äº†æ–‡ä»¶è¿˜git addåˆ°æš‚å­˜åŒºï¼ˆä½†æ˜¯åœ¨commitä¹‹å‰ï¼‰ ç”¨git statusæŸ¥çœ‹ä¸€ä¸‹ï¼Œä¿®æ”¹åªæ˜¯æ·»åŠ åˆ°äº†æš‚å­˜åŒºï¼Œè¿˜æ²¡æœ‰æäº¤ï¼š 12345678910111213141516171819202122232425$ git status# On branch master# Changes to be committed:# (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)## modified: readme.txt# GitåŒæ ·å‘Šè¯‰æˆ‘ä»¬ï¼Œç”¨å‘½ä»¤git reset HEAD fileå¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æ‰ï¼ˆunstageï¼‰ï¼Œé‡æ–°æ”¾å›å·¥ä½œåŒºï¼š 123456789$ git reset HEAD readme.txtUnstaged changes after reset:M readme.txt git resetå‘½ä»¤æ—¢å¯ä»¥å›é€€ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹å›é€€åˆ°å·¥ä½œåŒºã€‚å½“æˆ‘ä»¬ç”¨HEADæ—¶ï¼Œè¡¨ç¤ºæœ€æ–°çš„ç‰ˆæœ¬ã€‚ å†ç”¨git statusæŸ¥çœ‹ä¸€ä¸‹ï¼Œç°åœ¨æš‚å­˜åŒºæ˜¯å¹²å‡€çš„ï¼Œå·¥ä½œåŒºæœ‰ä¿®æ”¹ã€‚ ç„¶åä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ 1234567891011121314151617$ git checkout -- readme.txt $ git status# On branch masternothing to commit (working directory clean) ä¸ä½†ä¿®æ”¹äº†æ–‡ä»¶è¿˜ä»æš‚å­˜åŒºæäº¤commitåˆ°äº†ç‰ˆæœ¬åº“ - ç‰ˆæœ¬å›é€€ ç‰ˆæœ¬å›é€€å¯ä»¥å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚ä¸è¿‡ï¼Œè¿™æ˜¯æœ‰æ¡ä»¶çš„ï¼Œå°±æ˜¯ä½ è¿˜æ²¡æœ‰æŠŠè‡ªå·±çš„æœ¬åœ°ç‰ˆæœ¬åº“æ¨é€åˆ°è¿œç¨‹ã€‚Gitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚ åœ¨å·¥ä½œä¸­å¯¹æŸä¸ªæ–‡ä»¶ï¼ˆå¦‚readme.txtï¼‰è¿›è¡Œå¤šæ¬¡ä¿®æ”¹äº¤commitã€‚ å¯ä»¥é€šè¿‡ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå‘½ä»¤å‘Šè¯‰æˆ‘ä»¬æäº¤çš„å†å²è®°å½•ï¼Œåœ¨Gitä¸­ï¼Œæˆ‘ä»¬ç”¨git logå‘½ä»¤æŸ¥çœ‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869$ git logcommit 3628164fb26d48395383f8f31179f24e0882e1e0Author: Michael Liao &lt;askxuefeng@gmail.com&gt;Date: Tue Aug 20 15:11:49 2013 +0800 append GPL commit ea34578d5496d7dd233c827ed32a8cd576c5ee85Author: Michael Liao &lt;askxuefeng@gmail.com&gt;Date: Tue Aug 20 14:53:12 2013 +0800 add distributed commit cb926e7ea50ad11b8f9e909c05226233bf755030Author: Michael Liao &lt;askxuefeng@gmail.com&gt;Date: Mon Aug 19 17:51:55 2013 +0800 wrote a readme file Note: \\1. git logå‘½ä»¤æ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„æäº¤æ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°3æ¬¡æäº¤ï¼Œæœ€è¿‘çš„ä¸€æ¬¡æ˜¯append GPLï¼Œä¸Šä¸€æ¬¡æ˜¯add distributedï¼Œæœ€æ—©çš„ä¸€æ¬¡æ˜¯wrote a readme fileã€‚ \\2. å¦‚æœå«Œè¾“å‡ºä¿¡æ¯å¤ªå¤šï¼Œçœ‹å¾—çœ¼èŠ±ç¼­ä¹±çš„ï¼Œå¯ä»¥è¯•è¯•åŠ ä¸Š--pretty=onelineå‚æ•°ï¼š 12345678910111213$ git log --pretty=oneline3628164fb26d48395383f8f31179f24e0882e1e0 append GPLea34578d5496d7dd233c827ed32a8cd576c5ee85 add distributedcb926e7ea50ad11b8f9e909c05226233bf755030 wrote a readme file \\3. ä½ çœ‹åˆ°çš„ä¸€å¤§ä¸²ç±»ä¼¼3628164...882e1e0çš„æ˜¯commit idï¼ˆç‰ˆæœ¬å·ï¼‰ï¼Œå’ŒSVNä¸ä¸€æ ·ï¼ŒGitçš„commit idä¸æ˜¯1ï¼Œ2ï¼Œ3â€¦â€¦é€’å¢çš„æ•°å­—ï¼Œè€Œæ˜¯ä¸€ä¸ªSHA1è®¡ç®—å‡ºæ¥çš„ä¸€ä¸ªéå¸¸å¤§çš„æ•°å­—ï¼Œç”¨åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œè€Œä¸”ä½ çœ‹åˆ°çš„commit idå’Œæˆ‘çš„è‚¯å®šä¸ä¸€æ ·ï¼Œä»¥ä½ è‡ªå·±çš„ä¸ºå‡†ã€‚ä¸ºä»€ä¹ˆcommit idéœ€è¦ç”¨è¿™ä¹ˆä¸€å¤§ä¸²æ•°å­—è¡¨ç¤ºå‘¢ï¼Ÿå› ä¸ºGitæ˜¯åˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œåé¢æˆ‘ä»¬è¿˜è¦ç ”ç©¶å¤šäººåœ¨åŒä¸€ä¸ªç‰ˆæœ¬åº“é‡Œå·¥ä½œï¼Œå¦‚æœå¤§å®¶éƒ½ç”¨1ï¼Œ2ï¼Œ3â€¦â€¦ä½œä¸ºç‰ˆæœ¬å·ï¼Œé‚£è‚¯å®šå°±å†²çªäº†ã€‚ \\4. æ¯æäº¤ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œå®é™…ä¸ŠGitå°±ä¼šæŠŠå®ƒä»¬è‡ªåŠ¨ä¸²æˆä¸€æ¡æ—¶é—´çº¿ã€‚å¦‚æœä½¿ç”¨å¯è§†åŒ–å·¥å…·ï¼ˆå¦‚GitXã€githubçš„å®¢æˆ·ç«¯ã€pycharmï¼‰æŸ¥çœ‹Gitå†å²ï¼Œå°±å¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹åˆ°æäº¤å†å²çš„æ—¶é—´çº¿ã€‚ ç°åœ¨æˆ‘ä»¬æƒ³è¦æŠŠreadme.txtå›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ å¦‚â€œadd distributedâ€çš„é‚£ä¸ªç‰ˆæœ¬ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿé¦–å…ˆï¼ŒGitå¿…é¡»çŸ¥é“å½“å‰ç‰ˆæœ¬æ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Œåœ¨Gitä¸­ï¼Œç”¨HEADè¡¨ç¤ºå½“å‰ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯æœ€æ–°çš„æäº¤3628164...882e1e0ï¼ˆæ³¨æ„æˆ‘çš„æäº¤IDå’Œä½ çš„è‚¯å®šä¸ä¸€æ ·ï¼‰ï¼Œä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEADï¼Œä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEADï¼Œå½“ç„¶å¾€ä¸Š100ä¸ªç‰ˆæœ¬å†™100ä¸ªæ¯”è¾ƒå®¹æ˜“æ•°ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å†™æˆHEAD~100ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬è¦æŠŠå½“å‰ç‰ˆæœ¬â€œappend GPLâ€å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬â€œadd distributedâ€ï¼Œå°±å¯ä»¥ä½¿ç”¨git resetå‘½ä»¤ï¼š 12345$ git reset --hard HEAD^HEAD is now at ea34578 add distributed è¿™æ—¶readme.txtçš„å†…å®¹å°±æˆäº†ç‰ˆæœ¬add distributed æˆ‘ä»¬ç”¨git logå†çœ‹çœ‹ç°åœ¨ç‰ˆæœ¬åº“çš„çŠ¶æ€ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445$ git logcommit ea34578d5496d7dd233c827ed32a8cd576c5ee85Author: Michael Liao &lt;askxuefeng@gmail.com&gt;Date: Tue Aug 20 14:53:12 2013 +0800 add distributed commit cb926e7ea50ad11b8f9e909c05226233bf755030Author: Michael Liao &lt;askxuefeng@gmail.com&gt;Date: Mon Aug 19 17:51:55 2013 +0800 wrote a readme file æœ€æ–°çš„é‚£ä¸ªç‰ˆæœ¬append GPLå·²ç»çœ‹ä¸åˆ°äº†ï¼ æ¢å¤æ–‡ä»¶åï¼Œè¦æ˜¯æˆ‘ä»¬åˆæƒ³å›åˆ°ä¿®æ”¹åçš„æ–‡ä»¶å‘¢ï¼Ÿï¼ˆå‘½ä»¤è¡Œçª—å£è¿˜æ²¡æœ‰è¢«å…³æ‰ï¼‰ åªè¦ä¸Šé¢çš„å‘½ä»¤è¡Œçª—å£è¿˜æ²¡æœ‰è¢«å…³æ‰ï¼Œä½ å°±å¯ä»¥é¡ºç€å¾€ä¸Šæ‰¾å•Šæ‰¾å•Šï¼Œæ‰¾åˆ°é‚£ä¸ªappend GPLçš„commit idæ˜¯3628164...ï¼Œäºæ˜¯å°±å¯ä»¥æŒ‡å®šå›åˆ°æœªæ¥çš„æŸä¸ªç‰ˆæœ¬ï¼š 12345$ git reset --hard 3628164HEAD is now at 3628164 append GPL ç‰ˆæœ¬å·æ²¡å¿…è¦å†™å…¨ï¼Œå‰å‡ ä½å°±å¯ä»¥äº†ï¼ŒGitä¼šè‡ªåŠ¨å»æ‰¾ã€‚ Gitçš„ç‰ˆæœ¬å›é€€é€Ÿåº¦éå¸¸å¿«ï¼Œå› ä¸ºGitåœ¨å†…éƒ¨æœ‰ä¸ªæŒ‡å‘å½“å‰ç‰ˆæœ¬çš„HEADæŒ‡é’ˆï¼Œå½“ä½ å›é€€ç‰ˆæœ¬çš„æ—¶å€™ï¼ŒGitä»…ä»…æ˜¯æŠŠHEADä»æŒ‡å‘append GPLï¼š æ”¹ä¸ºæŒ‡å‘add distributedï¼š ç„¶åé¡ºä¾¿æŠŠå·¥ä½œåŒºçš„æ–‡ä»¶æ›´æ–°äº†ã€‚æ‰€ä»¥ä½ è®©HEADæŒ‡å‘å“ªä¸ªç‰ˆæœ¬å·ï¼Œä½ å°±æŠŠå½“å‰ç‰ˆæœ¬å®šä½åœ¨å“ªã€‚ æ¢å¤æ–‡ä»¶åï¼Œè¦æ˜¯æˆ‘ä»¬åˆæƒ³å›åˆ°ä¿®æ”¹åçš„æ–‡ä»¶å‘¢ï¼Ÿï¼ˆå‘½ä»¤è¡Œçª—å£æ—©å°±å…³æ‰äº†ï¼‰ æƒ³æ¢å¤åˆ°æ–°ç‰ˆæœ¬æ€ä¹ˆåŠï¼Ÿæ‰¾ä¸åˆ°æ–°ç‰ˆæœ¬çš„commit idæ€ä¹ˆåŠï¼Ÿå½“ä½ ç”¨$ git reset --hard HEAD^å›é€€åˆ°add distributedç‰ˆæœ¬æ—¶ï¼Œå†æƒ³æ¢å¤åˆ°append GPLï¼Œå°±å¿…é¡»æ‰¾åˆ°append GPLçš„commit idã€‚ Gitæä¾›äº†ä¸€ä¸ªå‘½ä»¤git reflogç”¨æ¥è®°å½•ä½ çš„æ¯ä¸€æ¬¡å‘½ä»¤ï¼š[Gité«˜çº§æ•™ç¨‹:git logä¸git reflog] 1234567891011121314151617$ git reflogea34578 HEAD@{0}: reset: moving to HEAD^3628164 HEAD@{1}: commit: append GPLea34578 HEAD@{2}: commit: add distributedcb926e7 HEAD@{3}: commit (initial): wrote a readme file ç¬¬äºŒè¡Œæ˜¾ç¤ºappend GPLçš„commit idæ˜¯3628164ï¼Œç°åœ¨ï¼Œä½ åˆå¯ä»¥ä¹˜åæ—¶å…‰æœºå›åˆ°æœªæ¥äº†ã€‚","link":"/2021/02/25/Draft/2021/%E5%BF%AB%E6%9F%A5/"},{"title":"é­‘é­…å…ˆç”Ÿ | è®¡ç®—æœºç½‘ç»œ","text":"ç½‘ç»œåŸºç¡€ 1. ç½‘ç»œå±‚æ¬¡åˆ’åˆ† OSI/RMæ¨¡å‹ï¼ˆOpen System Interconnection/Reference Modelï¼‰å¼€æ”¾ç³»ç»Ÿäº’è”å‚è€ƒæ¨¡å‹ 2. ç½‘ç»œæ¨¡å‹ OSIä¸ƒå±‚ç½‘ç»œæ¨¡å‹ 1ï¼‰ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰ Â· æ¿€æ´»ã€ç»´æŒã€å…³é—­é€šä¿¡ç«¯ç‚¹ä¹‹é—´çš„æœºæ¢°ç‰¹æ€§ã€ç”µæ°”ç‰¹æ€§ã€åŠŸèƒ½ç‰¹æ€§ä»¥åŠè¿‡ç¨‹ç‰¹æ€§ã€‚è¯¥å±‚ä¸ºä¸Šå±‚åè®®æä¾›äº†ä¸€ä¸ªä¼ è¾“æ•°æ®çš„å¯é çš„ç‰©ç†åª’ä½“ã€‚ç®€å•çš„è¯´ï¼Œç‰©ç†å±‚ç¡®ä¿åŸå§‹çš„æ•°æ®å¯åœ¨å„ç§ç‰©ç†åª’ä½“ä¸Šä¼ è¾“ã€‚ä¸¤ä¸ªé‡è¦çš„è®¾å¤‡åç§°ï¼Œä¸­ç»§å™¨ï¼ˆRepeaterï¼Œæ”¾å¤§å™¨ï¼‰ï¼Œé›†çº¿å™¨ã€‚ 2ï¼‰æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰ Â· æ•°æ®é“¾è·¯å±‚åœ¨ç‰©ç†å±‚æä¾›çš„æœåŠ¡çš„åŸºç¡€ä¸Šå‘ç½‘ç»œå±‚æä¾›æœåŠ¡ï¼Œå…¶æœ€åŸºæœ¬çš„æœåŠ¡æ˜¯å°†æºè‡ªç½‘ç»œå±‚æ¥çš„æ•°æ®å¯é åœ°ä¼ è¾“åˆ°ç›¸é‚»èŠ‚ç‚¹çš„ç›®æ ‡æœºç½‘ç»œå±‚ã€‚ä¸ºè¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œæ•°æ®é“¾è·¯å¿…é¡»å…·å¤‡ä¸€ç³»åˆ—ç›¸åº”çš„åŠŸèƒ½ï¼Œä¸»è¦æœ‰ï¼šå¦‚ä½•å°†æ•°æ®ç»„åˆæˆæ•°æ®å—ï¼Œåœ¨æ•°æ®é“¾è·¯å±‚ä¸­ç§°è¿™ç§æ•°æ®å—ä¸ºå¸§ï¼ˆframeï¼‰ï¼Œå¸§æ˜¯æ•°æ®é“¾è·¯å±‚çš„ä¼ é€å•ä½ï¼›å¦‚ä½•æ§åˆ¶å¸§åœ¨ç‰©ç†ä¿¡é“ä¸Šçš„ä¼ è¾“ï¼ŒåŒ…æ‹¬å¦‚ä½•å¤„ç†ä¼ è¾“å·®é”™ï¼Œå¦‚ä½•è°ƒèŠ‚å‘é€é€Ÿç‡ä»¥ä½¿ä¸æ¥æ”¶æ–¹ç›¸åŒ¹é…ï¼›ä»¥åŠåœ¨ä¸¤ä¸ªç½‘ç»œå®ä½“ä¹‹é—´æä¾›æ•°æ®é“¾è·¯é€šè·¯çš„å»ºç«‹ã€ç»´æŒå’Œé‡Šæ”¾çš„ç®¡ç†ã€‚æ•°æ®é“¾è·¯å±‚åœ¨ä¸å¯é çš„ç‰©ç†ä»‹è´¨ä¸Šæä¾›å¯é çš„ä¼ è¾“ã€‚è¯¥å±‚çš„ä½œç”¨åŒ…æ‹¬ï¼šç‰©ç†åœ°å€å¯»å€ã€æ•°æ®çš„æˆå¸§ã€æµé‡æ§åˆ¶ã€æ•°æ®çš„æ£€é”™ã€é‡å‘ç­‰ã€‚ Â· æœ‰å…³æ•°æ®é“¾è·¯å±‚çš„é‡è¦çŸ¥è¯†ç‚¹ï¼š 1&gt; æ•°æ®é“¾è·¯å±‚ä¸ºç½‘ç»œå±‚æä¾›å¯é çš„æ•°æ®ä¼ è¾“ï¼› 2&gt; åŸºæœ¬æ•°æ®å•ä½ä¸ºå¸§ï¼› 3&gt; ä¸»è¦çš„åè®®ï¼šä»¥å¤ªç½‘åè®®ï¼› 4&gt; ä¸¤ä¸ªé‡è¦è®¾å¤‡åç§°ï¼šç½‘æ¡¥å’Œäº¤æ¢æœºã€‚ 3ï¼‰ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰ Â· å®ç°ä¸¤ä¸ªç«¯ç³»ç»Ÿä¹‹é—´çš„æ•°æ®é€æ˜ä¼ é€ï¼Œå…·ä½“åŠŸèƒ½åŒ…æ‹¬å¯»å€å’Œè·¯ç”±é€‰æ‹©ã€è¿æ¥çš„å»ºç«‹ã€ä¿æŒå’Œç»ˆæ­¢ç­‰ã€‚å®ƒæä¾›çš„æœåŠ¡ä½¿ä¼ è¾“å±‚ä¸éœ€è¦äº†è§£ç½‘ç»œä¸­çš„æ•°æ®ä¼ è¾“å’Œäº¤æ¢æŠ€æœ¯ã€‚å¦‚æœæ‚¨æƒ³ç”¨å°½é‡å°‘çš„è¯æ¥è®°ä½ç½‘ç»œå±‚ï¼Œé‚£å°±æ˜¯&quot;è·¯å¾„é€‰æ‹©ã€è·¯ç”±åŠé€»è¾‘å¯»å€&quot;ã€‚ç½‘ç»œå±‚ä¸­æ¶‰åŠä¼—å¤šçš„åè®®ï¼Œå…¶ä¸­åŒ…æ‹¬æœ€é‡è¦çš„åè®®ï¼Œä¹Ÿæ˜¯TCP/IPçš„æ ¸å¿ƒåè®®â€”â€”IPåè®®ã€‚IPåè®®éå¸¸ç®€å•ï¼Œä»…ä»…æä¾›ä¸å¯é ã€æ— è¿æ¥çš„ä¼ é€æœåŠ¡ã€‚IPåè®®çš„ä¸»è¦åŠŸèƒ½æœ‰ï¼šæ— è¿æ¥æ•°æ®æŠ¥ä¼ è¾“ã€æ•°æ®æŠ¥è·¯ç”±é€‰æ‹©å’Œå·®é”™æ§åˆ¶ã€‚ä¸IPåè®®é…å¥—ä½¿ç”¨å®ç°å…¶åŠŸèƒ½çš„è¿˜æœ‰åœ°å€è§£æåè®®ARPã€é€†åœ°å€è§£æåè®®RARPã€å› ç‰¹ç½‘æŠ¥æ–‡åè®®ICMPã€å› ç‰¹ç½‘ç»„ç®¡ç†åè®®IGMPã€‚ Â· å…·ä½“çš„åè®®æˆ‘ä»¬ä¼šåœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†è¿›è¡Œæ€»ç»“ï¼Œæœ‰å…³ç½‘ç»œå±‚çš„é‡ç‚¹ä¸ºï¼š 1&gt; ç½‘ç»œå±‚è´Ÿè´£å¯¹å­ç½‘é—´çš„æ•°æ®åŒ…è¿›è¡Œè·¯ç”±é€‰æ‹©ã€‚æ­¤å¤–ï¼Œç½‘ç»œå±‚è¿˜å¯ä»¥å®ç°æ‹¥å¡æ§åˆ¶ã€ç½‘é™…äº’è¿ç­‰åŠŸèƒ½ï¼› 2&gt; åŸºæœ¬æ•°æ®å•ä½ä¸ºIPæ•°æ®æŠ¥ï¼› 3&gt; åŒ…å«çš„ä¸»è¦åè®®ï¼š IPåè®®ï¼ˆInternet Protocolï¼Œå› ç‰¹ç½‘äº’è”åè®®ï¼‰; ICMPåè®®ï¼ˆInternet Control Message Protocolï¼Œå› ç‰¹ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰; ARPåè®®ï¼ˆAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼‰; RARPåè®®ï¼ˆReverse Address Resolution Protocolï¼Œé€†åœ°å€è§£æåè®®ï¼‰ã€‚ 4&gt; é‡è¦çš„è®¾å¤‡ï¼šè·¯ç”±å™¨ã€‚ 4ï¼‰ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰ Â· ç¬¬ä¸€ä¸ªç«¯åˆ°ç«¯ï¼Œå³ä¸»æœºåˆ°ä¸»æœºçš„å±‚æ¬¡ã€‚ä¼ è¾“å±‚è´Ÿè´£å°†ä¸Šå±‚æ•°æ®åˆ†æ®µå¹¶æä¾›ç«¯åˆ°ç«¯çš„ã€å¯é çš„æˆ–ä¸å¯é çš„ä¼ è¾“ã€‚æ­¤å¤–ï¼Œä¼ è¾“å±‚è¿˜è¦å¤„ç†ç«¯åˆ°ç«¯çš„å·®é”™æ§åˆ¶å’Œæµé‡æ§åˆ¶é—®é¢˜ã€‚ ä¼ è¾“å±‚çš„ä»»åŠ¡æ˜¯æ ¹æ®é€šä¿¡å­ç½‘çš„ç‰¹æ€§ï¼Œæœ€ä½³çš„åˆ©ç”¨ç½‘ç»œèµ„æºï¼Œä¸ºä¸¤ä¸ªç«¯ç³»ç»Ÿçš„ä¼šè¯å±‚ä¹‹é—´ï¼Œæä¾›å»ºç«‹ã€ç»´æŠ¤å’Œå–æ¶ˆä¼ è¾“è¿æ¥çš„åŠŸèƒ½ï¼Œè´Ÿè´£ç«¯åˆ°ç«¯çš„å¯é æ•°æ®ä¼ è¾“ã€‚åœ¨è¿™ä¸€å±‚ï¼Œä¿¡æ¯ä¼ é€çš„åè®®æ•°æ®å•å…ƒç§°ä¸ºæ®µæˆ–æŠ¥æ–‡ã€‚ ç½‘ç»œå±‚åªæ˜¯æ ¹æ®ç½‘ç»œåœ°å€å°†æºç»“ç‚¹å‘å‡ºçš„æ•°æ®åŒ…ä¼ é€åˆ°ç›®çš„ç»“ç‚¹ï¼Œè€Œä¼ è¾“å±‚åˆ™è´Ÿè´£å°†æ•°æ®å¯é åœ°ä¼ é€åˆ°ç›¸åº”çš„ç«¯å£ã€‚ Â· é‡ç‚¹ï¼š 1&gt; ä¼ è¾“å±‚è´Ÿè´£å°†ä¸Šå±‚æ•°æ®åˆ†æ®µå¹¶æä¾›ç«¯åˆ°ç«¯çš„ã€å¯é çš„æˆ–ä¸å¯é çš„ä¼ è¾“ä»¥åŠç«¯åˆ°ç«¯çš„å·®é”™æ§åˆ¶å’Œæµé‡æ§åˆ¶é—®é¢˜ï¼› 2&gt; åŒ…å«çš„ä¸»è¦åè®®ï¼šTCPåè®®ï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰ã€UDPåè®®ï¼ˆUser Datagram Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼› 3&gt; é‡è¦è®¾å¤‡ï¼šç½‘å…³ã€‚ 5ï¼‰ä¼šè¯å±‚ Â· ä¼šè¯å±‚ç®¡ç†ä¸»æœºä¹‹é—´çš„ä¼šè¯è¿›ç¨‹ï¼Œå³è´Ÿè´£å»ºç«‹ã€ç®¡ç†ã€ç»ˆæ­¢è¿›ç¨‹ä¹‹é—´çš„ä¼šè¯ã€‚ä¼šè¯å±‚è¿˜åˆ©ç”¨åœ¨æ•°æ®ä¸­æ’å…¥æ ¡éªŒç‚¹æ¥å®ç°æ•°æ®çš„åŒæ­¥ã€‚ 6ï¼‰è¡¨ç¤ºå±‚ Â· è¡¨ç¤ºå±‚å¯¹ä¸Šå±‚æ•°æ®æˆ–ä¿¡æ¯è¿›è¡Œå˜æ¢ä»¥ä¿è¯ä¸€ä¸ªä¸»æœºåº”ç”¨å±‚ä¿¡æ¯å¯ä»¥è¢«å¦ä¸€ä¸ªä¸»æœºçš„åº”ç”¨ç¨‹åºç†è§£ã€‚è¡¨ç¤ºå±‚çš„æ•°æ®è½¬æ¢åŒ…æ‹¬æ•°æ®çš„åŠ å¯†ã€å‹ç¼©ã€æ ¼å¼è½¬æ¢ç­‰ã€‚ 7ï¼‰åº”ç”¨å±‚ Â· ä¸ºæ“ä½œç³»ç»Ÿæˆ–ç½‘ç»œåº”ç”¨ç¨‹åºæä¾›è®¿é—®ç½‘ç»œæœåŠ¡çš„æ¥å£ã€‚ Â· ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚å’Œåº”ç”¨å±‚é‡ç‚¹ï¼š Â· 1&gt; æ•°æ®ä¼ è¾“åŸºæœ¬å•ä½ä¸ºæŠ¥æ–‡ï¼› Â· 2&gt; åŒ…å«çš„ä¸»è¦åè®®ï¼šFTPï¼ˆæ–‡ä»¶ä¼ é€åè®®ï¼‰ã€Telnetï¼ˆè¿œç¨‹ç™»å½•åè®®ï¼‰ã€DNSï¼ˆåŸŸåè§£æåè®®ï¼‰ã€SMTPï¼ˆé‚®ä»¶ä¼ é€åè®®ï¼‰ï¼ŒPOP3åè®®ï¼ˆé‚®å±€åè®®ï¼‰ï¼ŒHTTPåè®®ï¼ˆHyper Text Transfer Protocolï¼‰ã€‚ TCP/IPå›› (äº”)å±‚æ¨¡å‹ 3. IPåœ°å€ 1ï¼‰ç½‘ç»œåœ°å€ IPåœ°å€ç”±ç½‘ç»œå·ï¼ˆåŒ…æ‹¬å­ç½‘å·ï¼‰å’Œä¸»æœºå·ç»„æˆï¼Œç½‘ç»œåœ°å€çš„ä¸»æœºå·ä¸ºå…¨0ï¼Œç½‘ç»œåœ°å€ä»£è¡¨ç€æ•´ä¸ªç½‘ç»œã€‚ 2ï¼‰å¹¿æ’­åœ°å€ å¹¿æ’­åœ°å€é€šå¸¸ç§°ä¸ºç›´æ¥å¹¿æ’­åœ°å€ï¼Œæ˜¯ä¸ºäº†åŒºåˆ†å—é™å¹¿æ’­åœ°å€ã€‚ å¹¿æ’­åœ°å€ä¸ç½‘ç»œåœ°å€çš„ä¸»æœºå·æ­£å¥½ç›¸åï¼Œå¹¿æ’­åœ°å€ä¸­ï¼Œä¸»æœºå·ä¸ºå…¨1ã€‚å½“å‘æŸä¸ªç½‘ç»œçš„å¹¿æ’­åœ°å€å‘é€æ¶ˆæ¯æ—¶ï¼Œè¯¥ç½‘ç»œå†…çš„æ‰€æœ‰ä¸»æœºéƒ½èƒ½æ”¶åˆ°è¯¥å¹¿æ’­æ¶ˆæ¯ã€‚ 3ï¼‰ç»„æ’­åœ°å€ Dç±»åœ°å€å°±æ˜¯ç»„æ’­åœ°å€ã€‚ å…ˆå›å¿†ä¸‹Aï¼ŒBï¼ŒCï¼ŒDç±»åœ°å€å§ï¼š Aç±»åœ°å€ä»¥0å¼€å¤´ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚ä½œä¸ºç½‘ç»œå·ï¼Œåœ°å€èŒƒå›´ä¸ºï¼š0.0.0.0~127.255.255.255ï¼›(modified @2016.05.31) Bç±»åœ°å€ä»¥10å¼€å¤´ï¼Œå‰ä¸¤ä¸ªå­—èŠ‚ä½œä¸ºç½‘ç»œå·ï¼Œåœ°å€èŒƒå›´æ˜¯ï¼š128.0.0.0~191.255.255.255; Cç±»åœ°å€ä»¥110å¼€å¤´ï¼Œå‰ä¸‰ä¸ªå­—èŠ‚ä½œä¸ºç½‘ç»œå·ï¼Œåœ°å€èŒƒå›´æ˜¯ï¼š192.0.0.0~223.255.255.255ã€‚ Dç±»åœ°å€ä»¥1110å¼€å¤´ï¼Œåœ°å€èŒƒå›´æ˜¯224.0.0.0~239.255.255.255ï¼ŒDç±»åœ°å€ä½œä¸ºç»„æ’­åœ°å€ï¼ˆä¸€å¯¹å¤šçš„é€šä¿¡ï¼‰ï¼› Eç±»åœ°å€ä»¥1111å¼€å¤´ï¼Œåœ°å€èŒƒå›´æ˜¯240.0.0.0~255.255.255.255ï¼ŒEç±»åœ°å€ä¸ºä¿ç•™åœ°å€ï¼Œä¾›ä»¥åä½¿ç”¨ã€‚ æ³¨ï¼šåªæœ‰A,B,Cæœ‰ç½‘ç»œå·å’Œä¸»æœºå·ä¹‹åˆ†ï¼ŒDç±»åœ°å€å’ŒEç±»åœ°å€æ²¡æœ‰åˆ’åˆ†ç½‘ç»œå·å’Œä¸»æœºå·ã€‚ 4ï¼‰255.255.255.255 è¯¥IPåœ°å€æŒ‡çš„æ˜¯å—é™çš„å¹¿æ’­åœ°å€ã€‚å—é™å¹¿æ’­åœ°å€ä¸ä¸€èˆ¬å¹¿æ’­åœ°å€ï¼ˆç›´æ¥å¹¿æ’­åœ°å€ï¼‰çš„åŒºåˆ«åœ¨äºï¼Œå—é™å¹¿æ’­åœ°å€åªèƒ½ç”¨äºæœ¬åœ°ç½‘ç»œï¼Œè·¯ç”±å™¨ä¸ä¼šè½¬å‘ä»¥å—é™å¹¿æ’­åœ°å€ä¸ºç›®çš„åœ°å€çš„åˆ†ç»„ï¼›ä¸€èˆ¬å¹¿æ’­åœ°å€æ—¢å¯åœ¨æœ¬åœ°å¹¿æ’­ï¼Œä¹Ÿå¯è·¨ç½‘æ®µå¹¿æ’­ã€‚ä¾‹å¦‚ï¼šä¸»æœº192.168.1.1/30ä¸Šçš„ç›´æ¥å¹¿æ’­æ•°æ®åŒ…åï¼Œå¦å¤–ä¸€ä¸ªç½‘æ®µ192.168.1.5/30ä¹Ÿèƒ½æ”¶åˆ°è¯¥æ•°æ®æŠ¥ï¼›è‹¥å‘é€å—é™å¹¿æ’­æ•°æ®æŠ¥ï¼Œåˆ™ä¸èƒ½æ”¶åˆ°ã€‚ æ³¨ï¼šä¸€èˆ¬çš„å¹¿æ’­åœ°å€ï¼ˆç›´æ¥å¹¿æ’­åœ°å€ï¼‰èƒ½å¤Ÿé€šè¿‡æŸäº›è·¯ç”±å™¨ï¼ˆå½“ç„¶ä¸æ˜¯æ‰€æœ‰çš„è·¯ç”±å™¨ï¼‰ï¼Œè€Œå—é™çš„å¹¿æ’­åœ°å€ä¸èƒ½é€šè¿‡è·¯ç”±å™¨ã€‚ 5ï¼‰0.0.0.0 å¸¸ç”¨äºå¯»æ‰¾è‡ªå·±çš„IPåœ°å€ï¼Œä¾‹å¦‚åœ¨æˆ‘ä»¬çš„RARPï¼ŒBOOTPå’ŒDHCPåè®®ä¸­ï¼Œè‹¥æŸä¸ªæœªçŸ¥IPåœ°å€çš„æ— ç›˜æœºæƒ³è¦çŸ¥é“è‡ªå·±çš„IPåœ°å€ï¼Œå®ƒå°±ä»¥255.255.255.255ä¸ºç›®çš„åœ°å€ï¼Œå‘æœ¬åœ°èŒƒå›´ï¼ˆå…·ä½“è€Œè¨€æ˜¯è¢«å„ä¸ªè·¯ç”±å™¨å±è”½çš„èŒƒå›´å†…ï¼‰çš„æœåŠ¡å™¨å‘é€IPè¯·æ±‚åˆ†ç»„ã€‚ 6ï¼‰å›ç¯åœ°å€ 127.0.0.0/8è¢«ç”¨ä½œå›ç¯åœ°å€ï¼Œå›ç¯åœ°å€è¡¨ç¤ºæœ¬æœºçš„åœ°å€ï¼Œå¸¸ç”¨äºå¯¹æœ¬æœºçš„æµ‹è¯•ï¼Œç”¨çš„æœ€å¤šçš„æ˜¯127.0.0.1ã€‚ 7ï¼‰Aã€Bã€Cç±»ç§æœ‰åœ°å€ ç§æœ‰åœ°å€(private address)ä¹Ÿå«ä¸“ç”¨åœ°å€ï¼Œå®ƒä»¬ä¸ä¼šåœ¨å…¨çƒä½¿ç”¨ï¼Œåªå…·æœ‰æœ¬åœ°æ„ä¹‰ã€‚ Aç±»ç§æœ‰åœ°å€ï¼š10.0.0.0/8ï¼ŒèŒƒå›´æ˜¯ï¼š10.0.0.0~10.255.255.255 Bç±»ç§æœ‰åœ°å€ï¼š172.16.0.0/12ï¼ŒèŒƒå›´æ˜¯ï¼š172.16.0.0~172.31.255.255 Cç±»ç§æœ‰åœ°å€ï¼š192.168.0.0/16ï¼ŒèŒƒå›´æ˜¯ï¼š192.168.0.0~192.168.255.255 4. å­ç½‘æ©ç åŠç½‘ç»œåˆ’åˆ† éšç€äº’è¿ç½‘åº”ç”¨çš„ä¸æ–­æ‰©å¤§ï¼ŒåŸå…ˆçš„IPv4çš„å¼Šç«¯ä¹Ÿé€æ¸æš´éœ²å‡ºæ¥ï¼Œå³ç½‘ç»œå·å ä½å¤ªå¤šï¼Œè€Œä¸»æœºå·ä½å¤ªå°‘ï¼Œæ‰€ä»¥å…¶èƒ½æä¾›çš„ä¸»æœºåœ°å€ä¹Ÿè¶Šæ¥è¶Šç¨€ç¼ºï¼Œç›®å‰é™¤äº†ä½¿ç”¨NATåœ¨ä¼ä¸šå†…éƒ¨åˆ©ç”¨ä¿ç•™åœ°å€è‡ªè¡Œåˆ†é…ä»¥å¤–ï¼Œé€šå¸¸éƒ½å¯¹ä¸€ä¸ªé«˜ç±»åˆ«çš„IPåœ°å€è¿›è¡Œå†åˆ’åˆ†ï¼Œä»¥å½¢æˆå¤šä¸ªå­ç½‘ï¼Œæä¾›ç»™ä¸åŒè§„æ¨¡çš„ç”¨æˆ·ç¾¤ä½¿ç”¨ã€‚è¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†åœ¨ç½‘ç»œåˆ†æ®µæƒ…å†µä¸‹æœ‰æ•ˆåœ°åˆ©ç”¨IPåœ°å€ï¼Œé€šè¿‡å¯¹ä¸»æœºå·çš„é«˜ä½éƒ¨åˆ†å–ä½œä¸ºå­ç½‘å·ï¼Œä»é€šå¸¸çš„ç½‘ç»œä½ç•Œé™ä¸­æ‰©å±•æˆ–å‹ç¼©å­ç½‘æ©ç ï¼Œç”¨æ¥åˆ›å»ºæŸç±»åœ°å€çš„æ›´å¤šå­ç½‘ã€‚ä½†åˆ›å»ºæ›´å¤šçš„å­ç½‘æ—¶ï¼Œåœ¨æ¯ä¸ªå­ç½‘ä¸Šçš„å¯ç”¨ä¸»æœºåœ°å€æ•°ç›®ä¼šæ¯”åŸå…ˆå‡å°‘ã€‚ä»€ä¹ˆæ˜¯å­ç½‘æ©ç ï¼Ÿå­ç½‘æ©ç æ˜¯æ ‡å¿—ä¸¤ä¸ªIPåœ°å€æ˜¯å¦åŒå±äºä¸€ä¸ªå­ç½‘çš„ï¼Œä¹Ÿæ˜¯32ä½äºŒè¿›åˆ¶åœ°å€ï¼Œå…¶æ¯ä¸€ä¸ªä¸º1ä»£è¡¨è¯¥ä½æ˜¯ç½‘ç»œä½ï¼Œä¸º0ä»£è¡¨ä¸»æœºä½ã€‚å®ƒå’ŒIPåœ°å€ä¸€æ ·ä¹Ÿæ˜¯ä½¿ç”¨ç‚¹å¼åè¿›åˆ¶æ¥è¡¨ç¤ºçš„ã€‚å¦‚æœä¸¤ä¸ªIPåœ°å€åœ¨å­ç½‘æ©ç çš„æŒ‰ä½ä¸çš„è®¡ç®—ä¸‹æ‰€å¾—ç»“æœç›¸åŒï¼Œå³è¡¨æ˜å®ƒä»¬å…±å±äºåŒä¸€å­ç½‘ä¸­ã€‚åœ¨è®¡ç®—å­ç½‘æ©ç æ—¶ï¼Œæˆ‘ä»¬è¦æ³¨æ„IPåœ°å€ä¸­çš„ä¿ç•™åœ°å€ï¼Œå³&quot; 0&quot;åœ°å€å’Œå¹¿æ’­åœ°å€ï¼Œå®ƒä»¬æ˜¯æŒ‡ä¸»æœºåœ°å€æˆ–ç½‘ç»œåœ°å€å…¨ä¸º&quot; 0&quot;æˆ–&quot; 1&quot;æ—¶çš„IPåœ°å€ï¼Œå®ƒä»¬ä»£è¡¨ç€æœ¬ç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€ï¼Œä¸€èˆ¬æ˜¯ä¸èƒ½è¢«è®¡ç®—åœ¨å†…çš„ã€‚å­ç½‘æ©ç çš„è®¡ç®—ï¼šå¯¹äºæ— é¡»å†åˆ’åˆ†æˆå­ç½‘çš„IPåœ°å€æ¥è¯´ï¼Œå…¶å­ç½‘æ©ç éå¸¸ç®€å•ï¼Œå³æŒ‰ç…§å…¶å®šä¹‰å³å¯å†™å‡ºï¼šå¦‚æŸBç±»IPåœ°å€ä¸º 10.12.3.0ï¼Œæ— é¡»å†åˆ†å‰²å­ç½‘ï¼Œåˆ™è¯¥IPåœ°å€çš„å­ç½‘æ©ç 255.255.0.0ã€‚å¦‚æœå®ƒæ˜¯ä¸€ä¸ªCç±»åœ°å€ï¼Œåˆ™å…¶å­ç½‘æ©ç ä¸º 255.255.255.0ã€‚å…¶å®ƒç±»æ¨ï¼Œä¸å†è¯¦è¿°ã€‚ä¸‹é¢æˆ‘ä»¬å…³é”®è¦ä»‹ç»çš„æ˜¯ä¸€ä¸ªIPåœ°å€ï¼Œè¿˜éœ€è¦å°†å…¶é«˜ä½ä¸»æœºä½å†ä½œä¸ºåˆ’åˆ†å‡ºçš„å­ç½‘ç½‘ç»œå·ï¼Œå‰©ä¸‹çš„æ˜¯æ¯ä¸ªå­ç½‘çš„ä¸»æœºå·ï¼Œè¿™æ—¶è¯¥å¦‚ä½•è¿›è¡Œæ¯ä¸ªå­ç½‘çš„æ©ç è®¡ç®—ã€‚ ä¸‹é¢æ€»ç»“ä¸€ä¸‹æœ‰å…³å­ç½‘æ©ç å’Œç½‘ç»œåˆ’åˆ†å¸¸è§çš„é¢è¯•è€ƒé¢˜ï¼š 1ï¼‰åˆ©ç”¨å­ç½‘æ•°æ¥è®¡ç®— Â· åœ¨æ±‚å­ç½‘æ©ç ä¹‹å‰å¿…é¡»å…ˆææ¸…æ¥šè¦åˆ’åˆ†çš„å­ç½‘æ•°ç›®ï¼Œä»¥åŠæ¯ä¸ªå­ç½‘å†…çš„æ‰€éœ€ä¸»æœºæ•°ç›®ã€‚(1) å°†å­ç½‘æ•°ç›®è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æ¥è¡¨ç¤º;å¦‚æ¬²å°†Bç±»IPåœ°å€168.195.0.0åˆ’åˆ†æˆ27ä¸ªå­ç½‘ï¼š27=11011ï¼›(2) å–å¾—è¯¥äºŒè¿›åˆ¶çš„ä½æ•°ï¼Œä¸ºNï¼›è¯¥äºŒè¿›åˆ¶ä¸ºäº”ä½æ•°ï¼ŒN = 5(3) å–å¾—è¯¥IPåœ°å€çš„ç±»å­ç½‘æ©ç ï¼Œå°†å…¶ä¸»æœºåœ°å€éƒ¨åˆ†çš„çš„å‰Nä½ç½®1å³å¾—å‡ºè¯¥IPåœ°å€åˆ’åˆ†å­ç½‘çš„å­ç½‘æ©ç ã€‚å°†Bç±»åœ°å€çš„å­ç½‘æ©ç 255.255.0.0çš„ä¸»æœºåœ°å€å‰5ä½ç½® 1ï¼Œå¾—åˆ° 255.255.248.0 2ï¼‰åˆ©ç”¨ä¸»æœºæ•°æ¥è®¡ç®— Â· å¦‚æ¬²å°†Bç±»IPåœ°å€168.195.0.0åˆ’åˆ†æˆè‹¥å¹²å­ç½‘ï¼Œæ¯ä¸ªå­ç½‘å†…æœ‰ä¸»æœº700å°ï¼š(1) å°†ä¸»æœºæ•°ç›®è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æ¥è¡¨ç¤ºï¼›700=1010111100(2) å¦‚æœä¸»æœºæ•°å°äºæˆ–ç­‰äº254ï¼ˆæ³¨æ„å»æ‰ä¿ç•™çš„ä¸¤ä¸ªIPåœ°å€ï¼‰ï¼Œåˆ™å–å¾—è¯¥ä¸»æœºçš„äºŒè¿›åˆ¶ä½æ•°ï¼Œä¸ºNï¼Œè¿™é‡Œè‚¯å®š N&lt;8ã€‚å¦‚æœå¤§äº254ï¼Œåˆ™ N&gt;8ï¼Œè¿™å°±æ˜¯è¯´ä¸»æœºåœ°å€å°†å æ®ä¸æ­¢8ä½ï¼›è¯¥äºŒè¿›åˆ¶ä¸ºåä½æ•°ï¼ŒN=10ï¼›(3) ä½¿ç”¨255.255.255.255æ¥å°†è¯¥ç±»IPåœ°å€çš„ä¸»æœºåœ°å€ä½æ•°å…¨éƒ¨ç½®1ï¼Œç„¶åä»åå‘å‰çš„å°†Nä½å…¨éƒ¨ç½®ä¸º 0ï¼Œå³ä¸ºå­ç½‘æ©ç å€¼ã€‚å°†è¯¥Bç±»åœ°å€çš„å­ç½‘æ©ç 255.255.0.0çš„ä¸»æœºåœ°å€å…¨éƒ¨ç½®1ï¼Œå¾—åˆ°255.255.255.255ï¼Œç„¶åå†ä»åå‘å‰å°†å 10ä½ç½®0,å³ä¸ºï¼š11111111.11111111.11111100.00000000ï¼Œå³255.255.252.0ã€‚è¿™å°±æ˜¯è¯¥æ¬²åˆ’åˆ†æˆä¸»æœºä¸º700å°çš„Bç±»IPåœ°å€ 168.195.0.0çš„å­ç½‘æ©ç ã€‚ 3ï¼‰æ ¹æ®æ¯ä¸ªç½‘ç»œçš„ä¸»æœºæ•°é‡è¿›è¡Œå­ç½‘åœ°å€çš„è§„åˆ’å’Œè®¡ç®—å­ç½‘æ©ç  Â· è¿™ä¹Ÿå¯æŒ‰ä¸Šè¿°åŸåˆ™è¿›è¡Œè®¡ç®—ã€‚æ¯”å¦‚ä¸€ä¸ªå­ç½‘æœ‰10å°ä¸»æœºï¼Œé‚£ä¹ˆå¯¹äºè¿™ä¸ªå­ç½‘éœ€è¦çš„IPåœ°å€æ˜¯ï¼š10ï¼‹1ï¼‹1ï¼‹1ï¼13æ³¨æ„ï¼šåŠ çš„ç¬¬ä¸€ä¸ª1æ˜¯æŒ‡è¿™ä¸ªç½‘ç»œè¿æ¥æ—¶æ‰€éœ€çš„ç½‘å…³åœ°å€ï¼Œæ¥ç€çš„ä¸¤ä¸ª1åˆ†åˆ«æ˜¯æŒ‡ç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€ã€‚å› ä¸º13å°äº16ï¼ˆ16ç­‰äº2çš„4æ¬¡æ–¹ï¼‰ï¼Œæ‰€ä»¥ä¸»æœºä½ä¸º4ä½ã€‚è€Œ256ï¼16ï¼240ï¼Œæ‰€ä»¥è¯¥å­ç½‘æ©ç ä¸º255.255.255.240ã€‚å¦‚æœä¸€ä¸ªå­ç½‘æœ‰14å°ä¸»æœºï¼Œä¸å°‘äººå¸¸çŠ¯çš„é”™è¯¯æ˜¯ï¼šä¾ç„¶åˆ†é…å…·æœ‰16ä¸ªåœ°å€ç©ºé—´çš„å­ç½‘ï¼Œè€Œå¿˜è®°äº†ç»™ç½‘å…³åˆ†é…åœ°å€ã€‚è¿™æ ·å°±é”™è¯¯äº†ï¼Œå› ä¸º14ï¼‹1ï¼‹1ï¼‹1ï¼17ï¼Œ17å¤§äº16ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½åˆ†é…å…·æœ‰32ä¸ªåœ°å€ï¼ˆ32ç­‰äº2çš„5æ¬¡æ–¹ï¼‰ç©ºé—´çš„å­ç½‘ã€‚è¿™æ—¶å­ç½‘æ©ç ä¸ºï¼š255.255.255.224ã€‚ 5. ARP/RARPåè®® åœ°å€è§£æåè®®ï¼Œå³ARPï¼ˆAddress Resolution Protocolï¼‰ï¼Œæ˜¯æ ¹æ®IPåœ°å€è·å–ç‰©ç†åœ°å€çš„ä¸€ä¸ªTCP/IPåè®®ã€‚ä¸»æœºå‘é€ä¿¡æ¯æ—¶å°†åŒ…å«ç›®æ ‡IPåœ°å€çš„ARPè¯·æ±‚å¹¿æ’­åˆ°ç½‘ç»œä¸Šçš„æ‰€æœ‰ä¸»æœºï¼Œå¹¶æ¥æ”¶è¿”å›æ¶ˆæ¯ï¼Œä»¥æ­¤ç¡®å®šç›®æ ‡çš„ç‰©ç†åœ°å€ï¼›æ”¶åˆ°è¿”å›æ¶ˆæ¯åå°†è¯¥IPåœ°å€å’Œç‰©ç†åœ°å€å­˜å…¥æœ¬æœºARPç¼“å­˜ä¸­å¹¶ä¿ç•™ä¸€å®šæ—¶é—´ï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶ç›´æ¥æŸ¥è¯¢ARPç¼“å­˜ä»¥èŠ‚çº¦èµ„æºã€‚åœ°å€è§£æåè®®æ˜¯å»ºç«‹åœ¨ç½‘ç»œä¸­å„ä¸ªä¸»æœºäº’ç›¸ä¿¡ä»»çš„åŸºç¡€ä¸Šçš„ï¼Œç½‘ç»œä¸Šçš„ä¸»æœºå¯ä»¥è‡ªä¸»å‘é€ARPåº”ç­”æ¶ˆæ¯ï¼Œå…¶ä»–ä¸»æœºæ”¶åˆ°åº”ç­”æŠ¥æ–‡æ—¶ä¸ä¼šæ£€æµ‹è¯¥æŠ¥æ–‡çš„çœŸå®æ€§å°±ä¼šå°†å…¶è®°å…¥æœ¬æœºARPç¼“å­˜ï¼›ç”±æ­¤æ”»å‡»è€…å°±å¯ä»¥å‘æŸä¸€ä¸»æœºå‘é€ä¼ªARPåº”ç­”æŠ¥æ–‡ï¼Œä½¿å…¶å‘é€çš„ä¿¡æ¯æ— æ³•åˆ°è¾¾é¢„æœŸçš„ä¸»æœºæˆ–åˆ°è¾¾é”™è¯¯çš„ä¸»æœºï¼Œè¿™å°±æ„æˆäº†ä¸€ä¸ªARPæ¬ºéª—ã€‚ARPå‘½ä»¤å¯ç”¨äºæŸ¥è¯¢æœ¬æœºARPç¼“å­˜ä¸­IPåœ°å€å’ŒMACåœ°å€çš„å¯¹åº”å…³ç³»ã€æ·»åŠ æˆ–åˆ é™¤é™æ€å¯¹åº”å…³ç³»ç­‰ã€‚ ARPå·¥ä½œæµç¨‹ä¸¾ä¾‹ï¼š ä¸»æœºAçš„IPåœ°å€ä¸º192.168.1.1ï¼ŒMACåœ°å€ä¸º0A-11-22-33-44-01ï¼› ä¸»æœºBçš„IPåœ°å€ä¸º192.168.1.2ï¼ŒMACåœ°å€ä¸º0A-11-22-33-44-02ï¼› å½“ä¸»æœºAè¦ä¸ä¸»æœºBé€šä¿¡æ—¶ï¼Œåœ°å€è§£æåè®®å¯ä»¥å°†ä¸»æœºBçš„IPåœ°å€ï¼ˆ192.168.1.2ï¼‰è§£ææˆä¸»æœºBçš„MACåœ°å€ï¼Œä»¥ä¸‹ä¸ºå·¥ä½œæµç¨‹ï¼š Â· ï¼ˆ1ï¼‰æ ¹æ®ä¸»æœºAä¸Šçš„è·¯ç”±è¡¨å†…å®¹ï¼ŒIPç¡®å®šç”¨äºè®¿é—®ä¸»æœºBçš„è½¬å‘IPåœ°å€æ˜¯192.168.1.2ã€‚ç„¶åAä¸»æœºåœ¨è‡ªå·±çš„æœ¬åœ°ARPç¼“å­˜ä¸­æ£€æŸ¥ä¸»æœºBçš„åŒ¹é…MACåœ°å€ã€‚ Â· ï¼ˆ2ï¼‰å¦‚æœä¸»æœºAåœ¨ARPç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°æ˜ å°„ï¼Œå®ƒå°†è¯¢é—®192.168.1.2çš„ç¡¬ä»¶åœ°å€ï¼Œä»è€Œå°†ARPè¯·æ±‚å¸§å¹¿æ’­åˆ°æœ¬åœ°ç½‘ç»œä¸Šçš„æ‰€æœ‰ä¸»æœºã€‚æºä¸»æœºAçš„IPåœ°å€å’ŒMACåœ°å€éƒ½åŒ…æ‹¬åœ¨ARPè¯·æ±‚ä¸­ã€‚æœ¬åœ°ç½‘ç»œä¸Šçš„æ¯å°ä¸»æœºéƒ½æ¥æ”¶åˆ°ARPè¯·æ±‚å¹¶ä¸”æ£€æŸ¥æ˜¯å¦ä¸è‡ªå·±çš„IPåœ°å€åŒ¹é…ã€‚å¦‚æœä¸»æœºå‘ç°è¯·æ±‚çš„IPåœ°å€ä¸è‡ªå·±çš„IPåœ°å€ä¸åŒ¹é…ï¼Œå®ƒå°†ä¸¢å¼ƒARPè¯·æ±‚ã€‚ Â· ï¼ˆ3ï¼‰ä¸»æœºBç¡®å®šARPè¯·æ±‚ä¸­çš„IPåœ°å€ä¸è‡ªå·±çš„IPåœ°å€åŒ¹é…ï¼Œåˆ™å°†ä¸»æœºAçš„IPåœ°å€å’ŒMACåœ°å€æ˜ å°„æ·»åŠ åˆ°æœ¬åœ°ARPç¼“å­˜ä¸­ã€‚ Â· ï¼ˆ4ï¼‰ä¸»æœºBå°†åŒ…å«å…¶MACåœ°å€çš„ARPå›å¤æ¶ˆæ¯ç›´æ¥å‘é€å›ä¸»æœºAã€‚ Â· ï¼ˆ5ï¼‰å½“ä¸»æœºAæ”¶åˆ°ä»ä¸»æœºBå‘æ¥çš„ARPå›å¤æ¶ˆæ¯æ—¶ï¼Œä¼šç”¨ä¸»æœºBçš„IPå’ŒMACåœ°å€æ˜ å°„æ›´æ–°ARPç¼“å­˜ã€‚æœ¬æœºç¼“å­˜æ˜¯æœ‰ç”Ÿå­˜æœŸçš„ï¼Œç”Ÿå­˜æœŸç»“æŸåï¼Œå°†å†æ¬¡é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ã€‚ä¸»æœºBçš„MACåœ°å€ä¸€æ—¦ç¡®å®šï¼Œä¸»æœºAå°±èƒ½å‘ä¸»æœºBå‘é€IPé€šä¿¡äº†ã€‚ é€†åœ°å€è§£æåè®®ï¼Œå³RARPï¼ŒåŠŸèƒ½å’ŒARPåè®®ç›¸å¯¹ï¼Œå…¶å°†å±€åŸŸç½‘ä¸­æŸä¸ªä¸»æœºçš„ç‰©ç†åœ°å€è½¬æ¢ä¸ºIPåœ°å€ï¼Œæ¯”å¦‚å±€åŸŸç½‘ä¸­æœ‰ä¸€å°ä¸»æœºåªçŸ¥é“ç‰©ç†åœ°å€è€Œä¸çŸ¥é“IPåœ°å€ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡RARPåè®®å‘å‡ºå¾æ±‚è‡ªèº«IPåœ°å€çš„å¹¿æ’­è¯·æ±‚ï¼Œç„¶åç”±RARPæœåŠ¡å™¨è´Ÿè´£å›ç­”ã€‚ RARPåè®®å·¥ä½œæµç¨‹ï¼š Â· ï¼ˆ1ï¼‰ç»™ä¸»æœºå‘é€ä¸€ä¸ªæœ¬åœ°çš„RARPå¹¿æ’­ï¼Œåœ¨æ­¤å¹¿æ’­åŒ…ä¸­ï¼Œå£°æ˜è‡ªå·±çš„MACåœ°å€å¹¶ä¸”è¯·æ±‚ä»»ä½•æ”¶åˆ°æ­¤è¯·æ±‚çš„RARPæœåŠ¡å™¨åˆ†é…ä¸€ä¸ªIPåœ°å€ï¼› Â· ï¼ˆ2ï¼‰æœ¬åœ°ç½‘æ®µä¸Šçš„RARPæœåŠ¡å™¨æ”¶åˆ°æ­¤è¯·æ±‚åï¼Œæ£€æŸ¥å…¶RARPåˆ—è¡¨ï¼ŒæŸ¥æ‰¾è¯¥MACåœ°å€å¯¹åº”çš„IPåœ°å€ï¼› Â· ï¼ˆ3ï¼‰å¦‚æœå­˜åœ¨ï¼ŒRARPæœåŠ¡å™¨å°±ç»™æºä¸»æœºå‘é€ä¸€ä¸ªå“åº”æ•°æ®åŒ…å¹¶å°†æ­¤IPåœ°å€æä¾›ç»™å¯¹æ–¹ä¸»æœºä½¿ç”¨ï¼› Â· ï¼ˆ4ï¼‰å¦‚æœä¸å­˜åœ¨ï¼ŒRARPæœåŠ¡å™¨å¯¹æ­¤ä¸åšä»»ä½•çš„å“åº”ï¼› 6. è·¯ç”±é€‰æ‹©åè®® å¸¸è§çš„è·¯ç”±é€‰æ‹©åè®®æœ‰ï¼šRIPåè®®ã€OSPFåè®®ã€‚RIPåè®® ï¼šåº•å±‚æ˜¯è´å°”æ›¼ç¦ç‰¹ç®—æ³•ï¼Œå®ƒé€‰æ‹©è·¯ç”±çš„åº¦é‡æ ‡å‡†ï¼ˆmetric)æ˜¯è·³æ•°ï¼Œæœ€å¤§è·³æ•°æ˜¯15è·³ï¼Œå¦‚æœå¤§äº15è·³ï¼Œå®ƒå°±ä¼šä¸¢å¼ƒæ•°æ®åŒ…ã€‚OSPFåè®® ï¼šOpen Shortest Path Firstå¼€æ”¾å¼æœ€çŸ­è·¯å¾„ä¼˜å…ˆï¼Œåº•å±‚æ˜¯è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•ï¼Œæ˜¯é“¾è·¯çŠ¶æ€è·¯ç”±é€‰æ‹©åè®®ï¼Œå®ƒé€‰æ‹©è·¯ç”±çš„åº¦é‡æ ‡å‡†æ˜¯å¸¦å®½ï¼Œå»¶è¿Ÿã€‚ 7. TCP/IPåè®® TCP/IPåè®®æ˜¯Internetæœ€åŸºæœ¬çš„åè®®ã€Internetå›½é™…äº’è”ç½‘ç»œçš„åŸºç¡€ï¼Œç”±ç½‘ç»œå±‚çš„IPåè®®å’Œä¼ è¾“å±‚çš„TCPåè®®ç»„æˆã€‚é€šä¿—è€Œè¨€ï¼šTCPè´Ÿè´£å‘ç°ä¼ è¾“çš„é—®é¢˜ï¼Œä¸€æœ‰é—®é¢˜å°±å‘å‡ºä¿¡å·ï¼Œè¦æ±‚é‡æ–°ä¼ è¾“ï¼Œç›´åˆ°æ‰€æœ‰æ•°æ®å®‰å…¨æ­£ç¡®åœ°ä¼ è¾“åˆ°ç›®çš„åœ°ã€‚è€ŒIPæ˜¯ç»™å› ç‰¹ç½‘çš„æ¯ä¸€å°è”ç½‘è®¾å¤‡è§„å®šä¸€ä¸ªåœ°å€ã€‚IPå±‚æ¥æ”¶ç”±æ›´ä½å±‚ï¼ˆç½‘ç»œæ¥å£å±‚ä¾‹å¦‚ä»¥å¤ªç½‘è®¾å¤‡é©±åŠ¨ç¨‹åºï¼‰å‘æ¥çš„æ•°æ®åŒ…ï¼Œå¹¶æŠŠè¯¥æ•°æ®åŒ…å‘é€åˆ°æ›´é«˜å±‚---TCPæˆ–UDPå±‚ï¼›ç›¸åï¼ŒIPå±‚ä¹ŸæŠŠä»TCPæˆ–UDPå±‚æ¥æ”¶æ¥çš„æ•°æ®åŒ…ä¼ é€åˆ°æ›´ä½å±‚ã€‚IPæ•°æ®åŒ…æ˜¯ä¸å¯é çš„ï¼Œå› ä¸ºIPå¹¶æ²¡æœ‰åšä»»ä½•äº‹æƒ…æ¥ç¡®è®¤æ•°æ®åŒ…æ˜¯å¦æŒ‰é¡ºåºå‘é€çš„æˆ–è€…æœ‰æ²¡æœ‰è¢«ç ´åï¼ŒIPæ•°æ®åŒ…ä¸­å«æœ‰å‘é€å®ƒçš„ä¸»æœºçš„åœ°å€ï¼ˆæºåœ°å€ï¼‰å’Œæ¥æ”¶å®ƒçš„ä¸»æœºçš„åœ°å€ï¼ˆç›®çš„åœ°å€ï¼‰ã€‚TCPæ˜¯é¢å‘è¿æ¥çš„é€šä¿¡åè®®ï¼Œé€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œé€šè®¯å®Œæˆæ—¶è¦æ‹†é™¤è¿æ¥ï¼Œç”±äºTCPæ˜¯é¢å‘è¿æ¥çš„æ‰€ä»¥åªèƒ½ç”¨äºç«¯åˆ°ç«¯çš„é€šè®¯ã€‚TCPæä¾›çš„æ˜¯ä¸€ç§å¯é çš„æ•°æ®æµæœåŠ¡ï¼Œé‡‡ç”¨&quot;å¸¦é‡ä¼ çš„è‚¯å®šç¡®è®¤&quot;æŠ€æœ¯æ¥å®ç°ä¼ è¾“çš„å¯é æ€§ã€‚TCPè¿˜é‡‡ç”¨ä¸€ç§ç§°ä¸º&quot;æ»‘åŠ¨çª—å£&quot;çš„æ–¹å¼è¿›è¡Œæµé‡æ§åˆ¶ï¼Œæ‰€è°“çª—å£å®é™…è¡¨ç¤ºæ¥æ”¶èƒ½åŠ›ï¼Œç”¨ä»¥é™åˆ¶å‘é€æ–¹çš„å‘é€é€Ÿåº¦ã€‚ TCPæŠ¥æ–‡é¦–éƒ¨æ ¼å¼ï¼šä»¶ï¼‰ã€HTTPåè®®ç­‰ã€‚ TCPåè®®çš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼š æ³¨ï¼šseq:&quot;sequance&quot;åºåˆ—å·ï¼›ack:&quot;acknowledge&quot;ç¡®è®¤å·ï¼›SYN:&quot;synchronize&quot;è¯·æ±‚åŒæ­¥æ ‡å¿—ï¼›ï¼›ACK:&quot;acknowledge&quot;ç¡®è®¤æ ‡å¿—&quot;ï¼›FINï¼š&quot;Finally&quot;ç»“æŸæ ‡å¿—ã€‚ TCPè¿æ¥å»ºç«‹è¿‡ç¨‹ï¼šé¦–å…ˆClientç«¯å‘é€è¿æ¥è¯·æ±‚æŠ¥æ–‡ï¼ŒServeræ®µæ¥å—è¿æ¥åå›å¤ACKæŠ¥æ–‡ï¼Œå¹¶ä¸ºè¿™æ¬¡è¿æ¥åˆ†é…èµ„æºã€‚Clientç«¯æ¥æ”¶åˆ°ACKæŠ¥æ–‡åä¹Ÿå‘Serveræ®µå‘ç”ŸACKæŠ¥æ–‡ï¼Œå¹¶åˆ†é…èµ„æºï¼Œè¿™æ ·TCPè¿æ¥å°±å»ºç«‹äº†ã€‚TCPè¿æ¥æ–­å¼€è¿‡ç¨‹ï¼šå‡è®¾Clientç«¯å‘èµ·ä¸­æ–­è¿æ¥è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯å‘é€FINæŠ¥æ–‡ã€‚Serverç«¯æ¥åˆ°FINæŠ¥æ–‡åï¼Œæ„æ€æ˜¯è¯´&quot;æˆ‘Clientç«¯æ²¡æœ‰æ•°æ®è¦å‘ç»™ä½ äº†&quot;ï¼Œä½†æ˜¯å¦‚æœä½ è¿˜æœ‰æ•°æ®æ²¡æœ‰å‘é€å®Œæˆï¼Œåˆ™ä¸å¿…æ€¥ç€å…³é—­Socketï¼Œå¯ä»¥ç»§ç»­å‘é€æ•°æ®ã€‚æ‰€ä»¥ä½ å…ˆå‘é€ACKï¼Œ&quot;å‘Šè¯‰Clientç«¯ï¼Œä½ çš„è¯·æ±‚æˆ‘æ”¶åˆ°äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡å‡†å¤‡å¥½ï¼Œè¯·ç»§ç»­ä½ ç­‰æˆ‘çš„æ¶ˆæ¯&quot;ã€‚è¿™ä¸ªæ—¶å€™Clientç«¯å°±è¿›å…¥FIN_WAITçŠ¶æ€ï¼Œç»§ç»­ç­‰å¾…Serverç«¯çš„FINæŠ¥æ–‡ã€‚å½“Serverç«¯ç¡®å®šæ•°æ®å·²å‘é€å®Œæˆï¼Œåˆ™å‘Clientç«¯å‘é€FINæŠ¥æ–‡ï¼Œ&quot;å‘Šè¯‰Clientç«¯ï¼Œå¥½äº†ï¼Œæˆ‘è¿™è¾¹æ•°æ®å‘å®Œäº†ï¼Œå‡†å¤‡å¥½å…³é—­è¿æ¥äº†&quot;ã€‚Clientç«¯æ”¶åˆ°FINæŠ¥æ–‡åï¼Œ&quot;å°±çŸ¥é“å¯ä»¥å…³é—­è¿æ¥äº†ï¼Œä½†æ˜¯ä»–è¿˜æ˜¯ä¸ç›¸ä¿¡ç½‘ç»œï¼Œæ€•Serverç«¯ä¸çŸ¥é“è¦å…³é—­ï¼Œæ‰€ä»¥å‘é€ACKåè¿›å…¥TIME_WAITçŠ¶æ€ï¼Œå¦‚æœServerç«¯æ²¡æœ‰æ”¶åˆ°ACKåˆ™å¯ä»¥é‡ä¼ ã€‚&quot;ï¼ŒServerç«¯æ”¶åˆ°ACKåï¼Œ&quot;å°±çŸ¥é“å¯ä»¥æ–­å¼€è¿æ¥äº†&quot;ã€‚Clientç«¯ç­‰å¾…äº†2MSLåä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™è¯æ˜Serverç«¯å·²æ­£å¸¸å…³é—­ï¼Œé‚£å¥½ï¼Œæˆ‘Clientç«¯ä¹Ÿå¯ä»¥å…³é—­è¿æ¥äº†ã€‚Okï¼ŒTCPè¿æ¥å°±è¿™æ ·å…³é—­äº†ï¼ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿåœ¨åªæœ‰ä¸¤æ¬¡&quot;æ¡æ‰‹&quot;çš„æƒ…å½¢ä¸‹ï¼Œå‡è®¾Clientæƒ³è·ŸServerå»ºç«‹è¿æ¥ï¼Œä½†æ˜¯å´å› ä¸ºä¸­é€”è¿æ¥è¯·æ±‚çš„æ•°æ®æŠ¥ä¸¢å¤±äº†ï¼Œæ•…Clientç«¯ä¸å¾—ä¸é‡æ–°å‘é€ä¸€éï¼›è¿™ä¸ªæ—¶å€™Serverç«¯ä»…æ”¶åˆ°ä¸€ä¸ªè¿æ¥è¯·æ±‚ï¼Œå› æ­¤å¯ä»¥æ­£å¸¸çš„å»ºç«‹è¿æ¥ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å€™Clientç«¯é‡æ–°å‘é€è¯·æ±‚ä¸æ˜¯å› ä¸ºæ•°æ®æŠ¥ä¸¢å¤±äº†ï¼Œè€Œæ˜¯æœ‰å¯èƒ½æ•°æ®ä¼ è¾“è¿‡ç¨‹å› ä¸ºç½‘ç»œå¹¶å‘é‡å¾ˆå¤§åœ¨æŸç»“ç‚¹è¢«é˜»å¡äº†ï¼Œè¿™ç§æƒ…å½¢ä¸‹Serverç«¯å°†å…ˆåæ”¶åˆ°2æ¬¡è¯·æ±‚ï¼Œå¹¶æŒç»­ç­‰å¾…ä¸¤ä¸ªClientè¯·æ±‚å‘ä»–å‘é€æ•°æ®...é—®é¢˜å°±åœ¨è¿™é‡Œï¼ŒCientç«¯å®é™…ä¸Šåªæœ‰ä¸€æ¬¡è¯·æ±‚ï¼Œè€ŒServerç«¯å´æœ‰2ä¸ªå“åº”ï¼Œæç«¯çš„æƒ…å†µå¯èƒ½ç”±äºClientç«¯å¤šæ¬¡é‡æ–°å‘é€è¯·æ±‚æ•°æ®è€Œå¯¼è‡´Serverç«¯æœ€åå»ºç«‹äº†Nå¤šä¸ªå“åº”åœ¨ç­‰å¾…ï¼Œå› è€Œé€ æˆæå¤§çš„èµ„æºæµªè´¹ï¼æ‰€ä»¥ï¼Œ&quot;ä¸‰æ¬¡æ¡æ‰‹&quot;å¾ˆæœ‰å¿…è¦ï¼ä¸ºä»€ä¹ˆè¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿè¯•æƒ³ä¸€ä¸‹ï¼Œå‡å¦‚ç°åœ¨ä½ æ˜¯å®¢æˆ·ç«¯ä½ æƒ³æ–­å¼€è·ŸServerçš„æ‰€æœ‰è¿æ¥è¯¥æ€ä¹ˆåšï¼Ÿç¬¬ä¸€æ­¥ï¼Œä½ è‡ªå·±å…ˆåœæ­¢å‘Serverç«¯å‘é€æ•°æ®ï¼Œå¹¶ç­‰å¾…Serverçš„å›å¤ã€‚ä½†äº‹æƒ…è¿˜æ²¡æœ‰å®Œï¼Œè™½ç„¶ä½ è‡ªèº«ä¸å¾€Serverå‘é€æ•°æ®äº†ï¼Œä½†æ˜¯å› ä¸ºä½ ä»¬ä¹‹å‰å·²ç»å»ºç«‹å¥½å¹³ç­‰çš„è¿æ¥äº†ï¼Œæ‰€ä»¥æ­¤æ—¶ä»–ä¹Ÿæœ‰ä¸»åŠ¨æƒå‘ä½ å‘é€æ•°æ®ï¼›æ•…Serverç«¯è¿˜å¾—ç»ˆæ­¢ä¸»åŠ¨å‘ä½ å‘é€æ•°æ®ï¼Œå¹¶ç­‰å¾…ä½ çš„ç¡®è®¤ã€‚å…¶å®ï¼Œè¯´ç™½äº†å°±æ˜¯ä¿è¯åŒæ–¹çš„ä¸€ä¸ªåˆçº¦çš„å®Œæ•´æ‰§è¡Œï¼ä½¿ç”¨TCPçš„åè®®ï¼šFTPï¼ˆæ–‡ä»¶ä¼ è¾“åè®®ï¼‰ã€Telnetï¼ˆè¿œç¨‹ç™»å½•åè®®ï¼‰ã€SMTPï¼ˆç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼‰ã€POP3ï¼ˆå’ŒSMTPç›¸å¯¹ï¼Œç”¨äºæ¥æ”¶é‚® 8. UDPåè®® UDPç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œæ˜¯é¢å‘æ— è¿æ¥çš„é€šè®¯åè®®ï¼ŒUDPæ•°æ®åŒ…æ‹¬ç›®çš„ç«¯å£å·å’Œæºç«¯å£å·ä¿¡æ¯ï¼Œç”±äºé€šè®¯ä¸éœ€è¦è¿æ¥ï¼Œæ‰€ä»¥å¯ä»¥å®ç°å¹¿æ’­å‘é€ã€‚UDPé€šè®¯æ—¶ä¸éœ€è¦æ¥æ”¶æ–¹ç¡®è®¤ï¼Œå±äºä¸å¯é çš„ä¼ è¾“ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸¢åŒ…ç°è±¡ï¼Œå®é™…åº”ç”¨ä¸­è¦æ±‚ç¨‹åºå‘˜ç¼–ç¨‹éªŒè¯ã€‚UDPä¸TCPä½äºåŒä¸€å±‚ï¼Œä½†å®ƒä¸ç®¡æ•°æ®åŒ…çš„é¡ºåºã€é”™è¯¯æˆ–é‡å‘ã€‚å› æ­¤ï¼ŒUDPä¸è¢«åº”ç”¨äºé‚£äº›ä½¿ç”¨è™šç”µè·¯çš„é¢å‘è¿æ¥çš„æœåŠ¡ï¼ŒUDPä¸»è¦ç”¨äºé‚£äº›é¢å‘æŸ¥è¯¢---åº”ç­”çš„æœåŠ¡ï¼Œä¾‹å¦‚NFSã€‚ç›¸å¯¹äºFTPæˆ–Telnetï¼Œè¿™äº›æœåŠ¡éœ€è¦äº¤æ¢çš„ä¿¡æ¯é‡è¾ƒå°ã€‚æ¯ä¸ªUDPæŠ¥æ–‡åˆ†UDPæŠ¥å¤´å’ŒUDPæ•°æ®åŒºä¸¤éƒ¨åˆ†ã€‚æŠ¥å¤´ç”±å››ä¸ª16ä½é•¿ï¼ˆ2å­—èŠ‚ï¼‰å­—æ®µç»„æˆï¼Œåˆ†åˆ«è¯´æ˜è¯¥æŠ¥æ–‡çš„æºç«¯å£ã€ç›®çš„ç«¯å£ã€æŠ¥æ–‡é•¿åº¦ä»¥åŠæ ¡éªŒå€¼ã€‚UDPæŠ¥å¤´ç”±4ä¸ªåŸŸç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªåŸŸå„å ç”¨2ä¸ªå­—èŠ‚ï¼Œå…·ä½“å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰æºç«¯å£å·ï¼›ï¼ˆ2ï¼‰ç›®æ ‡ç«¯å£å·ï¼›ï¼ˆ3ï¼‰æ•°æ®æŠ¥é•¿åº¦ï¼›ï¼ˆ4ï¼‰æ ¡éªŒå€¼ã€‚ä½¿ç”¨UDPåè®®åŒ…æ‹¬ï¼šTFTPï¼ˆç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰ã€SNMPï¼ˆç®€å•ç½‘ç»œç®¡ç†åè®®ï¼‰ã€DNSï¼ˆåŸŸåè§£æåè®®ï¼‰ã€NFSã€BOOTPã€‚TCP ä¸ UDP çš„åŒºåˆ«ï¼šTCPæ˜¯é¢å‘è¿æ¥çš„ï¼Œå¯é çš„å­—èŠ‚æµæœåŠ¡ï¼›UDPæ˜¯é¢å‘æ— è¿æ¥çš„ï¼Œä¸å¯é çš„æ•°æ®æŠ¥æœåŠ¡ã€‚ 9. DNSåè®® DNSæ˜¯åŸŸåç³»ç»Ÿ(DomainNameSystem)çš„ç¼©å†™ï¼Œè¯¥ç³»ç»Ÿç”¨äºå‘½åç»„ç»‡åˆ°åŸŸå±‚æ¬¡ç»“æ„ä¸­çš„è®¡ç®—æœºå’Œç½‘ç»œæœåŠ¡ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£ä¸ºå°†URLè½¬æ¢ä¸ºIPåœ°å€ã€‚åŸŸåæ˜¯ç”±åœ†ç‚¹åˆ†å¼€ä¸€ä¸²å•è¯æˆ–ç¼©å†™ç»„æˆçš„ï¼Œæ¯ä¸€ä¸ªåŸŸåéƒ½å¯¹åº”ä¸€ä¸ªæƒŸä¸€çš„IPåœ°å€ï¼Œåœ¨Internetä¸ŠåŸŸåä¸IPåœ°å€ä¹‹é—´æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼ŒDNSå°±æ˜¯è¿›è¡ŒåŸŸåè§£æçš„æœåŠ¡å™¨ã€‚DNSå‘½åç”¨äºInternetç­‰TCP/IPç½‘ç»œä¸­ï¼Œé€šè¿‡ç”¨æˆ·å‹å¥½çš„åç§°æŸ¥æ‰¾è®¡ç®—æœºå’ŒæœåŠ¡ã€‚ 10. NATåè®® NATç½‘ç»œåœ°å€è½¬æ¢(Network Address Translation)å±æ¥å…¥å¹¿åŸŸç½‘(WAN)æŠ€æœ¯ï¼Œæ˜¯ä¸€ç§å°†ç§æœ‰ï¼ˆä¿ç•™ï¼‰åœ°å€è½¬åŒ–ä¸ºåˆæ³•IPåœ°å€çš„è½¬æ¢æŠ€æœ¯ï¼Œå®ƒè¢«å¹¿æ³›åº”ç”¨äºå„ç§ç±»å‹Internetæ¥å…¥æ–¹å¼å’Œå„ç§ç±»å‹çš„ç½‘ç»œä¸­ã€‚åŸå› å¾ˆç®€å•ï¼ŒNATä¸ä»…å®Œç¾åœ°è§£å†³äº†lPåœ°å€ä¸è¶³çš„é—®é¢˜ï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿæœ‰æ•ˆåœ°é¿å…æ¥è‡ªç½‘ç»œå¤–éƒ¨çš„æ”»å‡»ï¼Œéšè—å¹¶ä¿æŠ¤ç½‘ç»œå†…éƒ¨çš„è®¡ç®—æœºã€‚ 11. DHCPåè®® DHCPåŠ¨æ€ä¸»æœºè®¾ç½®åè®®ï¼ˆDynamic Host Configuration Protocolï¼‰æ˜¯ä¸€ä¸ªå±€åŸŸç½‘çš„ç½‘ç»œåè®®ï¼Œä½¿ç”¨UDPåè®®å·¥ä½œï¼Œä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼šç»™å†…éƒ¨ç½‘ç»œæˆ–ç½‘ç»œæœåŠ¡ä¾›åº”å•†è‡ªåŠ¨åˆ†é…IPåœ°å€ï¼Œç»™ç”¨æˆ·æˆ–è€…å†…éƒ¨ç½‘ç»œç®¡ç†å‘˜ä½œä¸ºå¯¹æ‰€æœ‰è®¡ç®—æœºä½œä¸­å¤®ç®¡ç†çš„æ‰‹æ®µã€‚ 12. HTTPåè®® è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼ŒHyperText Transfer Protocol)æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ã€‚æ‰€æœ‰çš„WWWæ–‡ä»¶éƒ½å¿…é¡»éµå®ˆè¿™ä¸ªæ ‡å‡†ã€‚ HTTP åè®®åŒ…æ‹¬å“ªäº›è¯·æ±‚ï¼Ÿ GETï¼šè¯·æ±‚è¯»å–ç”±URLæ‰€æ ‡å¿—çš„ä¿¡æ¯ã€‚ POSTï¼šç»™æœåŠ¡å™¨æ·»åŠ ä¿¡æ¯ï¼ˆå¦‚æ³¨é‡Šï¼‰ã€‚ PUTï¼šåœ¨ç»™å®šçš„URLä¸‹å­˜å‚¨ä¸€ä¸ªæ–‡æ¡£ã€‚ DELETEï¼šåˆ é™¤ç»™å®šçš„URLæ‰€æ ‡å¿—çš„èµ„æºã€‚ HTTP ä¸­ï¼Œ POST ä¸ GET çš„åŒºåˆ« 1ï¼‰Getæ˜¯ä»æœåŠ¡å™¨ä¸Šè·å–æ•°æ®ï¼ŒPostæ˜¯å‘æœåŠ¡å™¨ä¼ é€æ•°æ®ã€‚ 2ï¼‰Getæ˜¯æŠŠå‚æ•°æ•°æ®é˜Ÿåˆ—åŠ åˆ°æäº¤è¡¨å•çš„Actionå±æ€§æ‰€æŒ‡å‘çš„URLä¸­ï¼Œå€¼å’Œè¡¨å•å†…å„ä¸ªå­—æ®µä¸€ä¸€å¯¹åº”ï¼Œåœ¨URLä¸­å¯ä»¥çœ‹åˆ°ã€‚ 3ï¼‰Getä¼ é€çš„æ•°æ®é‡å°ï¼Œä¸èƒ½å¤§äº2KBï¼›Postä¼ é€çš„æ•°æ®é‡è¾ƒå¤§ï¼Œä¸€èˆ¬è¢«é»˜è®¤ä¸ºä¸å—é™åˆ¶ã€‚ 4ï¼‰æ ¹æ®HTTPè§„èŒƒï¼ŒGETç”¨äºä¿¡æ¯è·å–ï¼Œè€Œä¸”åº”è¯¥æ˜¯å®‰å…¨çš„å’Œå¹‚ç­‰çš„ã€‚ I. æ‰€è°“ å®‰å…¨çš„ æ„å‘³ç€è¯¥æ“ä½œç”¨äºè·å–ä¿¡æ¯è€Œéä¿®æ”¹ä¿¡æ¯ã€‚æ¢å¥è¯è¯´ï¼ŒGETè¯·æ±‚ä¸€èˆ¬ä¸åº”äº§ç”Ÿå‰¯ä½œç”¨ã€‚å°±æ˜¯è¯´ï¼Œå®ƒä»…ä»…æ˜¯è·å–èµ„æºä¿¡æ¯ï¼Œå°±åƒæ•°æ®åº“æŸ¥è¯¢ä¸€æ ·ï¼Œä¸ä¼šä¿®æ”¹ï¼Œå¢åŠ æ•°æ®ï¼Œä¸ä¼šå½±å“èµ„æºçš„çŠ¶æ€ã€‚ II. å¹‚ç­‰ çš„æ„å‘³ç€å¯¹åŒä¸€URLçš„å¤šä¸ªè¯·æ±‚åº”è¯¥è¿”å›åŒæ ·çš„ç»“æœã€‚ HTTP åè®®çš„ 8 ç§è¯·æ±‚ç±»å‹ä»‹ç» HTTP åè®®ä¸­å…±å®šä¹‰äº†å…«ç§æ–¹æ³•æˆ–è€…å«â€œåŠ¨ä½œâ€æ¥è¡¨æ˜å¯¹ Request-URI æŒ‡å®šçš„èµ„æºçš„ä¸åŒæ“ä½œæ–¹å¼ï¼Œå…·ä½“ä»‹ç»å¦‚ä¸‹ï¼š OPTIONSï¼šè¿”å›æœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„HTTPè¯·æ±‚æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥åˆ©ç”¨å‘WebæœåŠ¡å™¨å‘é€'*'çš„è¯·æ±‚æ¥æµ‹è¯•æœåŠ¡å™¨çš„åŠŸèƒ½æ€§ã€‚ HEADï¼šå‘æœåŠ¡å™¨ç´¢è¦ä¸GETè¯·æ±‚ç›¸ä¸€è‡´çš„å“åº”ï¼Œåªä¸è¿‡å“åº”ä½“å°†ä¸ä¼šè¢«è¿”å›ã€‚è¿™ä¸€æ–¹æ³•å¯ä»¥åœ¨ä¸å¿…ä¼ è¾“æ•´ä¸ªå“åº”å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–åŒ…å«åœ¨å“åº”æ¶ˆæ¯å¤´ä¸­çš„å…ƒä¿¡æ¯ã€‚ GETï¼šå‘ç‰¹å®šçš„èµ„æºå‘å‡ºè¯·æ±‚ã€‚ POSTï¼šå‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POSTè¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„åˆ›å»ºå’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹ã€‚ PUTï¼šå‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹ã€‚ DELETEï¼šè¯·æ±‚æœåŠ¡å™¨åˆ é™¤ Request-URI æ‰€æ ‡è¯†çš„èµ„æºã€‚ TRACEï¼šå›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚ CONNECTï¼šHTTP/1.1 åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚ è™½ç„¶ HTTP çš„è¯·æ±‚æ–¹å¼æœ‰ 8 ç§ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å®é™…åº”ç”¨ä¸­å¸¸ç”¨çš„ä¹Ÿå°±æ˜¯ get å’Œ postï¼Œå…¶ä»–è¯·æ±‚æ–¹å¼ä¹Ÿéƒ½å¯ä»¥é€šè¿‡è¿™ä¸¤ç§æ–¹å¼é—´æ¥çš„æ¥å®ç°ã€‚ ç½‘ç»œå¸¸ç”¨å‚æ•° Content-Type æ ¼å¼ï¼šContent-Typeï¼štype/subtype ;parameter typeï¼šä¸»ç±»å‹ï¼Œä»»æ„çš„å­—ç¬¦ä¸²ï¼Œå¦‚textï¼Œå¦‚æœæ˜¯*å·ä»£è¡¨æ‰€æœ‰ï¼› subtypeï¼šå­ç±»å‹ï¼Œä»»æ„çš„å­—ç¬¦ä¸²ï¼Œå¦‚htmlï¼Œå¦‚æœæ˜¯*å·ä»£è¡¨æ‰€æœ‰ï¼Œç”¨â€œ/â€ä¸ä¸»ç±»å‹éš”å¼€ï¼› parameterï¼šå¯é€‰å‚æ•°ï¼Œå¦‚charsetï¼Œboundaryç­‰ã€‚ å‚è€ƒï¼š1ã€2 å¸¸è§çš„åª’ä½“æ ¼å¼ç±»å‹å¦‚ä¸‹ï¼š text/html ï¼š HTMLæ ¼å¼ text/plain ï¼šçº¯æ–‡æœ¬æ ¼å¼ text/xml ï¼š XMLæ ¼å¼ image/gif ï¼šgifå›¾ç‰‡æ ¼å¼ image/jpeg ï¼šjpgå›¾ç‰‡æ ¼å¼ image/pngï¼špngå›¾ç‰‡æ ¼å¼ ä»¥applicationå¼€å¤´çš„åª’ä½“æ ¼å¼ç±»å‹ï¼š application/xhtml+xml ï¼šXHTMLæ ¼å¼ application/xmlï¼š XMLæ•°æ®æ ¼å¼ application/atom+xml ï¼šAtom XMLèšåˆæ ¼å¼ application/jsonï¼š JSONæ•°æ®æ ¼å¼ application/pdfï¼špdfæ ¼å¼ application/msword ï¼š Wordæ–‡æ¡£æ ¼å¼ application/octet-stream ï¼š äºŒè¿›åˆ¶æµæ•°æ®ï¼ˆå¦‚å¸¸è§çš„æ–‡ä»¶ä¸‹è½½ï¼‰ application/x-www-form-urlencoded ï¼š &lt;-form encType=&quot;&quot;&gt;ä¸­é»˜è®¤çš„encTypeï¼Œformè¡¨å•æ•°æ®è¢«ç¼–ç ä¸ºkey1=val1&amp;key2=val2æ ¼å¼å‘é€åˆ°æœåŠ¡å™¨ï¼ˆè¡¨å•é»˜è®¤çš„æäº¤æ•°æ®çš„æ ¼å¼ï¼‰ å¦å¤–ä¸€ç§å¸¸è§çš„åª’ä½“æ ¼å¼æ˜¯ä¸Šä¼ æ–‡ä»¶ä¹‹æ—¶ä½¿ç”¨çš„ï¼š multipart/form-data ï¼š éœ€è¦åœ¨è¡¨å•ä¸­è¿›è¡Œæ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨è¯¥æ ¼å¼ 13. ä¸€ä¸ªä¸¾ä¾‹ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://www.baidu.com/ åæ‰§è¡Œçš„å…¨éƒ¨è¿‡ç¨‹ã€‚ç°åœ¨å‡è®¾å¦‚æœæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰æµè§ˆå™¨ä¸­è¾“å…¥ http://www.baidu.comï¼Œ è€Œ baidu.com ä¸ºè¦è®¿é—®çš„æœåŠ¡å™¨ï¼ˆæœåŠ¡å™¨ï¼‰ï¼Œä¸‹é¢è¯¦ç»†åˆ†æå®¢æˆ·ç«¯ä¸ºäº†è®¿é—®æœåŠ¡å™¨è€Œæ‰§è¡Œçš„ä¸€ç³»åˆ—å…³äºåè®®çš„æ“ä½œï¼š1ï¼‰å®¢æˆ·ç«¯æµè§ˆå™¨é€šè¿‡DNSè§£æåˆ°www.baidu.comçš„IPåœ°å€220.181.27.48ï¼Œé€šè¿‡è¿™ä¸ªIPåœ°å€æ‰¾åˆ°å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„è·¯å¾„ã€‚å®¢æˆ·ç«¯æµè§ˆå™¨å‘èµ·ä¸€ä¸ªHTTPä¼šè¯åˆ°220.161.27.48ï¼Œç„¶åé€šè¿‡TCPè¿›è¡Œå°è£…æ•°æ®åŒ…ï¼Œè¾“å…¥åˆ°ç½‘ç»œå±‚ã€‚2ï¼‰åœ¨å®¢æˆ·ç«¯çš„ä¼ è¾“å±‚ï¼ŒæŠŠHTTPä¼šè¯è¯·æ±‚åˆ†æˆæŠ¥æ–‡æ®µï¼Œæ·»åŠ æºå’Œç›®çš„ç«¯å£ï¼Œå¦‚æœåŠ¡å™¨ä½¿ç”¨80ç«¯å£ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå®¢æˆ·ç«¯ç”±ç³»ç»Ÿéšæœºé€‰æ‹©ä¸€ä¸ªç«¯å£å¦‚5000ï¼Œä¸æœåŠ¡å™¨è¿›è¡Œäº¤æ¢ï¼ŒæœåŠ¡å™¨æŠŠç›¸åº”çš„è¯·æ±‚è¿”å›ç»™å®¢æˆ·ç«¯çš„5000ç«¯å£ã€‚ç„¶åä½¿ç”¨IPå±‚çš„IPåœ°å€æŸ¥æ‰¾ç›®çš„ç«¯ã€‚3ï¼‰å®¢æˆ·ç«¯çš„ç½‘ç»œå±‚ä¸ç”¨å…³ç³»åº”ç”¨å±‚æˆ–è€…ä¼ è¾“å±‚çš„ä¸œè¥¿ï¼Œä¸»è¦åšçš„æ˜¯é€šè¿‡æŸ¥æ‰¾è·¯ç”±è¡¨ç¡®å®šå¦‚ä½•åˆ°è¾¾æœåŠ¡å™¨ï¼ŒæœŸé—´å¯èƒ½ç»è¿‡å¤šä¸ªè·¯ç”±å™¨ï¼Œè¿™äº›éƒ½æ˜¯ç”±è·¯ç”±å™¨æ¥å®Œæˆçš„å·¥ä½œï¼Œä¸ä½œè¿‡å¤šçš„æè¿°ï¼Œæ— éå°±æ˜¯é€šè¿‡æŸ¥æ‰¾è·¯ç”±è¡¨å†³å®šé€šè¿‡é‚£ä¸ªè·¯å¾„åˆ°è¾¾æœåŠ¡å™¨ã€‚4ï¼‰å®¢æˆ·ç«¯çš„é“¾è·¯å±‚ï¼ŒåŒ…é€šè¿‡é“¾è·¯å±‚å‘é€åˆ°è·¯ç”±å™¨ï¼Œé€šè¿‡é‚»å±…åè®®æŸ¥æ‰¾ç»™å®šIPåœ°å€çš„MACåœ°å€ï¼Œç„¶åå‘é€ARPè¯·æ±‚æŸ¥æ‰¾ç›®çš„åœ°å€ï¼Œå¦‚æœå¾—åˆ°å›åº”åå°±å¯ä»¥ä½¿ç”¨ARPçš„è¯·æ±‚åº”ç­”äº¤æ¢çš„IPæ•°æ®åŒ…ç°åœ¨å°±å¯ä»¥ä¼ è¾“äº†ï¼Œç„¶åå‘é€IPæ•°æ®åŒ…åˆ°è¾¾æœåŠ¡å™¨çš„åœ°å€ã€‚ 14.TCPä¸‰æ¬¡æ¡æ‰‹/å››æ¬¡æŒ¥æ‰‹ TCP TCPå¤´éƒ¨ä¸º20å­—èŠ‚ æºç«¯å£å·ï¼ˆ16ä½ï¼‰å’Œç›®çš„ç«¯å£å·ï¼ˆ16ä½ï¼‰ï¼šå†åŠ ä¸ŠIpé¦–éƒ¨çš„æºIPåœ°å€å’Œç›®çš„IPåœ°å€å¯ä»¥å”¯ä¸€ç¡®å®šä¸€ä¸ªTCPè¿æ¥ æ•°æ®åºå·ï¼ˆ16ä½ï¼‰ï¼šè¡¨ç¤ºåœ¨è¿™ä¸ªæŠ¥æ–‡æ®µä¸­çš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚åºå· ç¡®è®¤åºå·ï¼šä»…å½“ACKæ ‡å¿—ä¸º1æ—¶æœ‰æ•ˆï¼Œç¡®è®¤å·è¡¨ç¤ºæœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºå· åç§»ï¼šå°±æ˜¯å¤´éƒ¨é•¿åº¦ï¼Œæœ‰4ä½ï¼Œè·ŸIPå¤´éƒ¨ä¸€æ ·ï¼Œä»¥4å­—èŠ‚ä¸ºå•ä½ã€‚æœ€å¤§æ˜¯60ä¸ªå­—èŠ‚ ä¿ç•™ä½ï¼š6ä½ï¼Œå¿…é¡»ä¸º0 6ä¸ªæ ‡å¿—ä½ï¼šURG-ç´§æ€¥æŒ‡é’ˆæœ‰æ•ˆï¼›ACK-ç¡®è®¤åºå·æœ‰æ•ˆï¼›PSH-æ¥æ”¶æ–¹åº”å°½å¿«å°†è¿™ä¸ªæŠ¥æ–‡äº¤ç»™åº”ç”¨å±‚ï¼›RST-è¿æ¥é‡ç½®ï¼›SYN-åŒæ­¥åºå·ç”¨æ¥å‘èµ·ä¸€ä¸ªè¿æ¥ï¼›FIN-ç»ˆæ­¢ä¸€ä¸ªè¿æ¥ã€‚ çª—å£å­—æ®µï¼š16ä½ï¼Œä»£è¡¨çš„æ˜¯çª—å£çš„å­—èŠ‚å®¹é‡ï¼Œä¹Ÿå°±æ˜¯TCPçš„æ ‡å‡†çª—å£æœ€å¤§ä¸º2^16 - 1 = 65535ä¸ªå­—èŠ‚ æ ¡éªŒå’Œï¼šæºæœºå™¨åŸºäºæ•°æ®å†…å®¹è®¡ç®—ä¸€ä¸ªæ•°å€¼ï¼Œæ”¶ä¿¡æ¯æœºè¦ä¸æºæœºå™¨æ•°å€¼ç»“æœå®Œå…¨ä¸€æ ·ï¼Œä»è€Œè¯æ˜æ•°æ®çš„æœ‰æ•ˆæ€§ã€‚æ£€éªŒå’Œè¦†ç›–äº†æ•´ä¸ªçš„TCPæŠ¥æ–‡æ®µï¼šè¿™æ˜¯ä¸€ä¸ªå¼ºåˆ¶æ€§çš„å­—æ®µï¼Œä¸€å®šæ˜¯ç”±å‘é€ç«¯è®¡ç®—å’Œå­˜å‚¨ï¼Œå¹¶ç”±æ¥æ”¶ç«¯è¿›è¡ŒéªŒè¯çš„ã€‚ TCP ä¸‰æ¬¡æ¡æ‰‹ ä¸ºäº†ä¿è¯æ•°æ®èƒ½åˆ°è¾¾ç›®æ ‡ï¼ŒTCPé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ç­–ç•¥ã€‚ å‘é€ç«¯é¦–å…ˆå‘é€ä¸€ä¸ªå¸¦SYNï¼ˆsynchronizeï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ç»™æ¥æ”¶æ–¹ã€ç¬¬ä¸€æ¬¡çš„seqåºåˆ—å·æ˜¯éšæœºäº§ç”Ÿçš„ï¼Œè¿™æ ·æ˜¯ä¸ºäº†ç½‘ç»œå®‰å…¨ï¼Œå¦‚æœä¸æ˜¯éšæœºäº§ç”Ÿåˆå§‹åºåˆ—å·ï¼Œé»‘å®¢å°†ä¼šä»¥å¾ˆå®¹æ˜“çš„æ–¹å¼è·å–åˆ°ä½ ä¸å…¶ä»–ä¸»æœºä¹‹é—´çš„åˆå§‹åŒ–åºåˆ—å·ï¼Œå¹¶ä¸”ä¼ªé€ åºåˆ—å·è¿›è¡Œæ”»å‡»ã€‘ æ¥æ”¶ç«¯æ”¶åˆ°åï¼Œå›ä¼ ä¸€ä¸ªå¸¦æœ‰SYN/ACKï¼ˆacknowledgementï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ä»¥ç¤ºä¼ è¾¾ç¡®è®¤ä¿¡æ¯ã€SYN æ˜¯ä¸ºäº†å‘Šè¯‰å‘é€ç«¯ï¼Œå‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„é€šé“æ²¡é—®é¢˜ï¼›ACK ç”¨æ¥éªŒè¯æ¥æ”¶æ–¹åˆ°å‘é€æ–¹çš„é€šé“æ²¡é—®é¢˜ã€‘ æœ€åï¼Œå‘é€ç«¯å†å›ä¼ ä¸€ä¸ªå¸¦ACKæ ‡å¿—çš„æ•°æ®åŒ…ï¼Œä»£è¡¨æ¡æ‰‹ç»“æŸ è‹¥åœ¨æ¡æ‰‹æŸä¸ªè¿‡ç¨‹ä¸­æŸä¸ªé˜¶æ®µè«åä¸­æ–­ï¼ŒTCPåè®®ä¼šå†æ¬¡ä»¥ç›¸åŒçš„é¡ºåºå‘é€ç›¸åŒçš„æ•°æ®åŒ… Qï¼šä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯å»ºç«‹å¯é çš„é€šä¿¡ä¿¡é“ï¼Œè¯´åˆ°é€šè®¯ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ•°æ®çš„å‘é€ä¸æ¥æ”¶ï¼Œè€Œä¸‰æ¬¡æ¡æ‰‹æœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯åŒæ–¹ç¡®è®¤è‡ªå·±ä¸å¯¹æ–¹çš„å‘é€ä¸æ¥æ”¶æ˜¯æ­£å¸¸çš„ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œå‘é€ç«¯ï¼šä»€ä¹ˆéƒ½ç¡®è®¤ä¸äº†ï¼›æ¥æ”¶ç«¯ï¼šå¯¹æ–¹å‘é€æ­£å¸¸ï¼Œè‡ªå·±æ¥å—æ­£å¸¸ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼Œå‘é€ç«¯ï¼šå¯¹æ–¹å‘é€ï¼Œæ¥å—æ­£å¸¸ï¼Œè‡ªå·±å‘é€ï¼Œæ¥å—æ­£å¸¸ ï¼›æ¥æ”¶ç«¯ï¼šå¯¹æ–¹å‘é€æ­£å¸¸ï¼Œè‡ªå·±æ¥å—æ­£å¸¸ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå‘é€ç«¯ï¼šå¯¹æ–¹å‘é€ï¼Œæ¥å—æ­£å¸¸ï¼Œè‡ªå·±å‘é€ï¼Œæ¥å—æ­£å¸¸ï¼›æ¥æ”¶ç«¯ï¼šå¯¹æ–¹å‘é€ï¼Œæ¥å—æ­£å¸¸ï¼Œè‡ªå·±å‘é€ï¼Œæ¥å—æ­£å¸¸ Qï¼šä¸¤æ¬¡æ¡æ‰‹ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆTCPå®¢æˆ·ç«¯æœ€åè¿˜è¦å‘é€ä¸€æ¬¡ç¡®è®¤å‘¢ï¼Ÿ ä¸»è¦é˜²æ­¢å·²ç»å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡çªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡å™¨ï¼Œä»è€Œäº§ç”Ÿé”™è¯¯ã€‚ ç»å…¸åœºæ™¯ï¼šå®¢æˆ·ç«¯å‘é€äº†ç¬¬ä¸€ä¸ªè¯·æ±‚è¿æ¥å¹¶ä¸”æ²¡æœ‰ä¸¢å¤±ï¼Œåªæ˜¯å› ä¸ºåœ¨ç½‘ç»œç»“ç‚¹ä¸­æ»ç•™çš„æ—¶é—´å¤ªé•¿äº† ç”±äºTCPçš„å®¢æˆ·ç«¯è¿Ÿè¿Ÿæ²¡æœ‰æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡ï¼Œä»¥ä¸ºæœåŠ¡å™¨æ²¡æœ‰æ”¶åˆ°ï¼Œæ­¤æ—¶é‡æ–°å‘æœåŠ¡å™¨å‘é€è¿™æ¡æŠ¥æ–‡ï¼Œæ­¤åå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç»è¿‡ä¸¤æ¬¡æ¡æ‰‹å®Œæˆè¿æ¥ï¼Œä¼ è¾“æ•°æ®ï¼Œç„¶åå…³é—­è¿æ¥ã€‚ æ­¤æ—¶æ­¤å‰æ»ç•™çš„é‚£ä¸€æ¬¡è¯·æ±‚è¿æ¥ï¼Œç½‘ç»œé€šç•…äº†åˆ°è¾¾æœåŠ¡å™¨ï¼Œè¿™ä¸ªæŠ¥æ–‡æœ¬è¯¥æ˜¯å¤±æ•ˆçš„ï¼Œä½†æ˜¯ï¼Œä¸¤æ¬¡æ¡æ‰‹çš„æœºåˆ¶å°†ä¼šè®©å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å†æ¬¡å»ºç«‹è¿æ¥ï¼Œè¿™å°†å¯¼è‡´ä¸å¿…è¦çš„é”™è¯¯å’Œèµ„æºçš„æµªè´¹ã€‚ å¦‚æœé‡‡ç”¨çš„æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå°±ç®—æ˜¯é‚£ä¸€æ¬¡å¤±æ•ˆçš„æŠ¥æ–‡ä¼ é€è¿‡æ¥äº†ï¼ŒæœåŠ¡ç«¯æ¥å—åˆ°äº†é‚£æ¡å¤±æ•ˆæŠ¥æ–‡å¹¶ä¸”å›å¤äº†ç¡®è®¤æŠ¥æ–‡ï¼Œä½†æ˜¯å®¢æˆ·ç«¯ä¸ä¼šå†æ¬¡å‘å‡ºç¡®è®¤ã€‚ç”±äºæœåŠ¡å™¨æ”¶ä¸åˆ°ç¡®è®¤ï¼Œå°±çŸ¥é“å®¢æˆ·ç«¯å¹¶æ²¡æœ‰è¯·æ±‚è¿æ¥ã€‚ Qï¼šä¸ºä»€ä¹ˆä¸‰æ¬¡æ¡æ‰‹ï¼Œè¿”å›æ—¶ï¼Œack å€¼æ˜¯ seq åŠ  1ï¼ˆack = x+1ï¼‰ å‡è®¾å¯¹æ–¹æ¥æ”¶åˆ°æ•°æ®ï¼Œæ¯”å¦‚sequence number = 1000ï¼ŒTCP Payload = 1000ï¼Œæ•°æ®ç¬¬ä¸€ä¸ªå­—èŠ‚ç¼–å·ä¸º1000ï¼Œæœ€åä¸€ä¸ªä¸º1999ï¼Œå›åº”ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ï¼Œç¡®è®¤å·ä¸º2000ï¼Œæ„å‘³ç€ç¼–å·2000å‰çš„å­—èŠ‚æ¥æ”¶å®Œæˆï¼Œå‡†å¤‡æ¥æ”¶ç¼–å·ä¸º2000åŠæ›´å¤šçš„æ•°æ® ç¡®è®¤æ”¶åˆ°çš„åºåˆ—ï¼Œå¹¶ä¸”å‘Šè¯‰å‘é€ç«¯ä¸‹ä¸€æ¬¡å‘é€çš„åºåˆ—å·ä»å“ªé‡Œå¼€å§‹ï¼ˆä¾¿äºæ¥æ”¶æ–¹å¯¹æ•°æ®æ’åºï¼Œä¾¿äºé€‰æ‹©é‡ä¼ ï¼‰ Qï¼šSYNæ´ªæ³›æ”»å‡»(SYN Floodï¼ŒåŠå¼€æ”¾æ”»å‡»)ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ ä»€ä¹ˆæ˜¯SYNæ´ªèŒƒæ³›æ”»å‡»ï¼Ÿ SYN Floodåˆ©ç”¨TCPåè®®ç¼ºé™·ï¼Œå‘é€å¤§é‡ä¼ªé€ çš„TCPè¿æ¥è¯·æ±‚ï¼Œå¸¸ç”¨å‡å†’çš„IPæˆ–IPå·æ®µå‘æ¥æµ·é‡çš„è¯·æ±‚è¿æ¥çš„ç¬¬ä¸€ä¸ªæ¡æ‰‹åŒ…ï¼ˆSYNåŒ…ï¼‰ï¼Œè¢«æ”»å‡»æœåŠ¡å™¨å›åº”ç¬¬äºŒä¸ªæ¡æ‰‹åŒ…ï¼ˆSYN+ACKåŒ…ï¼‰ï¼Œå› ä¸ºå¯¹æ–¹æ˜¯å‡å†’IPï¼Œå¯¹æ–¹æ°¸è¿œæ”¶ä¸åˆ°åŒ…ä¸”ä¸ä¼šå›åº”ç¬¬ä¸‰ä¸ªæ¡æ‰‹åŒ…ã€‚å¯¼è‡´è¢«æ”»å‡»æœåŠ¡å™¨ä¿æŒå¤§é‡SYN_RECVçŠ¶æ€çš„â€œåŠè¿æ¥â€ï¼Œå¹¶ä¸”ä¼šé‡è¯•é»˜è®¤5æ¬¡å›åº”ç¬¬äºŒä¸ªæ¡æ‰‹åŒ…ï¼Œå¤§é‡éšæœºçš„æ¶æ„synå æ»¡äº†æœªå®Œæˆè¿æ¥é˜Ÿåˆ—ï¼Œå¯¼è‡´æ­£å¸¸åˆæ³•çš„synæ’ä¸ä¸Šé˜Ÿåˆ—ï¼Œè®©æ­£å¸¸çš„ä¸šåŠ¡è¯·æ±‚è¿æ¥ä¸è¿›æ¥ã€‚ã€æœåŠ¡å™¨ç«¯çš„èµ„æºåˆ†é…æ˜¯åœ¨äºŒæ¬¡æ¡æ‰‹æ—¶åˆ†é…çš„ï¼Œè€Œå®¢æˆ·ç«¯çš„èµ„æºæ˜¯åœ¨å®Œæˆä¸‰æ¬¡æ¡æ‰‹æ—¶åˆ†é…çš„ï¼Œæ‰€ä»¥æœåŠ¡å™¨å®¹æ˜“å—åˆ°SYNæ´ªæ³›æ”»å‡»ã€‘ æ£€æµ‹ SYN æ”»å‡»éå¸¸çš„æ–¹ä¾¿ï¼Œå½“ä½ åœ¨æœåŠ¡å™¨ä¸Šçœ‹åˆ°å¤§é‡çš„åŠè¿æ¥çŠ¶æ€æ—¶ï¼Œç‰¹åˆ«æ˜¯æºIPåœ°å€æ˜¯éšæœºçš„ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ–­å®šè¿™æ˜¯ä¸€æ¬¡SYNæ”»å‡»ã€åœ¨ Linux/Unix ä¸Šå¯ä»¥ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ netstats å‘½ä»¤æ¥æ£€æµ‹ SYN æ”»å‡»ã€‘ æ€ä¹ˆè§£å†³ï¼Ÿ ç¼©çŸ­è¶…æ—¶ï¼ˆSYN Timeoutï¼‰æ—¶é—´ å¢åŠ æœ€å¤§åŠè¿æ¥æ•° è¿‡æ»¤ç½‘å…³é˜²æŠ¤ SYN cookiesæŠ€æœ¯ï¼š å½“æœåŠ¡å™¨æ¥å—åˆ° SYN æŠ¥æ–‡æ®µæ—¶ï¼Œä¸ç›´æ¥ä¸ºè¯¥ TCP åˆ†é…èµ„æºï¼Œè€Œåªæ˜¯æ‰“å¼€ä¸€ä¸ªåŠå¼€çš„å¥—æ¥å­—ã€‚æ¥ç€ä¼šä½¿ç”¨ SYN æŠ¥æ–‡æ®µçš„æº Idï¼Œç›®çš„ Idï¼Œç«¯å£å·ä»¥åŠåªæœ‰æœåŠ¡å™¨è‡ªå·±çŸ¥é“çš„ä¸€ä¸ªç§˜å¯†å‡½æ•°ç”Ÿæˆä¸€ä¸ª cookieï¼Œå¹¶æŠŠ cookie ä½œä¸ºåºåˆ—å·å“åº”ç»™å®¢æˆ·ç«¯ã€‚ å¦‚æœå®¢æˆ·ç«¯æ˜¯æ­£å¸¸å»ºç«‹è¿æ¥ï¼Œå°†ä¼šè¿”å›ä¸€ä¸ªç¡®è®¤å­—æ®µä¸º cookie + 1 çš„æŠ¥æ–‡æ®µã€‚æ¥ä¸‹æ¥æœåŠ¡å™¨ä¼šæ ¹æ®ç¡®è®¤æŠ¥æ–‡çš„æº Idï¼Œç›®çš„ Idï¼Œç«¯å£å·ä»¥åŠç§˜å¯†å‡½æ•°è®¡ç®—å‡ºä¸€ä¸ªç»“æœï¼Œå¦‚æœç»“æœçš„å€¼ + 1 ç­‰äºç¡®è®¤å­—æ®µçš„å€¼ï¼Œåˆ™è¯æ˜æ˜¯åˆšåˆšè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œè¿™æ—¶å€™æ‰ä¸ºè¯¥ TCP åˆ†é…èµ„æº Qï¼šTCPä¸‰æ¬¡æ¡æ‰‹ä¸­ï¼Œæœ€åä¸€æ¬¡å›å¤ä¸¢å¤±ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ å¦‚æœæœ€åä¸€æ¬¡ACKåœ¨ç½‘ç»œä¸­ä¸¢å¤±ï¼Œé‚£ä¹ˆServerç«¯ï¼ˆæœåŠ¡ç«¯ï¼‰è¯¥TCPè¿æ¥çš„çŠ¶æ€ä»ä¸ºSYN_RECVï¼Œå¹¶ä¸”æ ¹æ® TCPçš„è¶…æ—¶é‡ä¼ æœºåˆ¶ä¾æ¬¡ç­‰å¾…3ç§’ã€6ç§’ã€12ç§’åé‡æ–°å‘é€ SYN+ACK åŒ…ï¼Œä»¥ä¾¿ Clientï¼ˆå®¢æˆ·ç«¯ï¼‰é‡æ–°å‘é€ACKåŒ… å¦‚æœé‡å‘æŒ‡å®šæ¬¡æ•°åï¼Œä»ç„¶æœªæ”¶åˆ°ACKåº”ç­”ï¼Œé‚£ä¹ˆä¸€æ®µæ—¶é—´åï¼ŒServerï¼ˆæœåŠ¡ç«¯ï¼‰è‡ªåŠ¨å…³é—­è¿™ä¸ªè¿æ¥ ä½†æ˜¯Clientï¼ˆå®¢æˆ·ç«¯ï¼‰è®¤ä¸ºè¿™ä¸ªè¿æ¥å·²ç»å»ºç«‹ï¼Œå¦‚æœClientï¼ˆå®¢æˆ·ç«¯ï¼‰ç«¯å‘Serverï¼ˆæœåŠ¡ç«¯ï¼‰å‘é€æ•°æ®ï¼ŒServerç«¯ï¼ˆæœåŠ¡ç«¯ï¼‰å°†ä»¥RSTåŒ…ï¼ˆResetï¼Œæ ‡ç¤ºå¤ä½ï¼Œç”¨äºå¼‚å¸¸çš„å…³é—­è¿æ¥ï¼‰å“åº”ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯çŸ¥é“ç¬¬ä¸‰æ¬¡æ¡æ‰‹å¤±è´¥ TCPå››æ¬¡æŒ¥æ‰‹ ä¸»åŠ¨æ–­å¼€æ–¹ï¼ˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ï¼‰-å‘é€ä¸€ä¸ª FINï¼Œç”¨æ¥å…³é—­ä¸»åŠ¨æ–­å¼€æ–¹ï¼ˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ï¼‰åˆ°è¢«åŠ¨æ–­å¼€æ–¹ï¼ˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ï¼‰çš„æ•°æ®ä¼ é€ è¢«åŠ¨æ–­å¼€æ–¹ï¼ˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ï¼‰-æ”¶åˆ°è¿™ä¸ª FINï¼Œå®ƒå‘å›ä¸€ ä¸ª ACKï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°çš„åºå·åŠ 1 ã€‚å’Œ SYN ä¸€æ ·ï¼Œä¸€ä¸ª FIN å°†å ç”¨ä¸€ä¸ªåºå· è¢«åŠ¨ç‚¹å¼€æ–¹ï¼ˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ï¼‰-å…³é—­ä¸ä¸»åŠ¨æ–­å¼€æ–¹ï¼ˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ï¼‰çš„è¿æ¥ï¼Œå‘é€ä¸€ä¸ªFINç»™ä¸»åŠ¨æ–­å¼€æ–¹ï¼ˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ï¼‰ ä¸»åŠ¨æ–­å¼€æ–¹ï¼ˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ï¼‰-å‘å› ACK æŠ¥æ–‡ç¡®è®¤ï¼Œå¹¶å°†ç¡®è®¤åºå·è®¾ç½®ä¸ºæ”¶åˆ°åºå·åŠ 1 Qï¼šä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œ æœåŠ¡å™¨åœ¨LISTENçŠ¶æ€ä¸‹ï¼Œæ”¶åˆ°å»ºç«‹è¿æ¥è¯·æ±‚çš„SYNæŠ¥æ–‡åï¼ŒæŠŠACKå’ŒSYNæ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡é‡Œå‘é€ç»™å®¢æˆ·ç«¯ã€‚ å…³é—­è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯¹æ–¹çš„FINæŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®ï¼Œè€Œè‡ªå·±ä¹Ÿæœªå¿…å…¨éƒ¨æ•°æ®éƒ½å‘é€ç»™å¯¹æ–¹äº†,æ‰€ä»¥æœåŠ¡å™¨å¯ä»¥ç«‹å³å…³é—­ï¼Œä¹Ÿå¯ä»¥å‘é€ä¸€äº›æ•°æ®ç»™å¯¹æ–¹åï¼Œå†å‘é€FINæŠ¥æ–‡ç»™å¯¹æ–¹æ¥è¡¨ç¤ºåŒæ„ç°åœ¨å…³é—­è¿æ¥ã€‚å› æ­¤ï¼ŒæœåŠ¡å™¨ACKå’ŒFINä¸€èˆ¬éƒ½ä¼šåˆ†å¼€å‘é€ï¼Œä»è€Œå¯¼è‡´å¤šäº†ä¸€æ¬¡ã€‚ Qï¼šä¸ºä»€ä¹ˆTCPæŒ¥æ‰‹æ¯ä¸¤æ¬¡ä¸­é—´æœ‰ä¸€ä¸ª FIN-WAIT2ç­‰å¾…æ—¶é—´ï¼Ÿ ä¸»åŠ¨å…³é—­çš„ä¸€ç«¯è°ƒç”¨å®Œcloseä»¥åï¼ˆå³å‘FINç»™è¢«åŠ¨å…³é—­çš„ä¸€ç«¯ï¼Œ å¹¶ä¸”æ”¶åˆ°å…¶å¯¹FINçš„ç¡®è®¤ACKï¼‰åˆ™è¿›å…¥FIN_WAIT_2çŠ¶æ€ã€‚å¦‚æœè¿™ä¸ªæ—¶å€™å› ä¸ºç½‘ç»œçªç„¶æ–­æ‰ã€è¢«åŠ¨å…³é—­çš„ä¸€æ®µå®•æœºç­‰åŸå› ï¼Œå¯¼è‡´ä¸»åŠ¨å…³é—­çš„ä¸€ç«¯ä¸èƒ½æ”¶åˆ°è¢«åŠ¨å…³é—­çš„ä¸€ç«¯å‘æ¥çš„FINï¼ˆé˜²æ­¢å¯¹ç«¯ä¸å‘é€å…³é—­è¿æ¥çš„FINåŒ…ç»™æœ¬ç«¯ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦FIN_WAIT_2å®šæ—¶å™¨ï¼Œ å¦‚æœåœ¨è¯¥å®šæ—¶å™¨è¶…æ—¶çš„æ—¶å€™ï¼Œè¿˜æ˜¯æ²¡æ”¶åˆ°è¢«åŠ¨å…³é—­ä¸€ç«¯å‘æ¥çš„FINï¼Œé‚£ä¹ˆç›´æ¥é‡Šæ”¾è¿™ä¸ªé“¾æ¥ï¼Œè¿›å…¥CLOSEçŠ¶æ€ Qï¼šä¸ºä»€ä¹ˆå®¢æˆ·ç«¯æœ€åè¿˜è¦ç­‰å¾…2MSLï¼Ÿä¸ºä»€ä¹ˆè¿˜æœ‰ä¸ªTIME-WAITçš„æ—¶é—´ç­‰å¾…ï¼Ÿ ä¿è¯å®¢æˆ·ç«¯å‘é€çš„æœ€åä¸€ä¸ªACKæŠ¥æ–‡èƒ½å¤Ÿåˆ°è¾¾æœåŠ¡å™¨ï¼Œå› ä¸ºè¿™ä¸ªACKæŠ¥æ–‡å¯èƒ½ä¸¢å¤±ï¼ŒæœåŠ¡å™¨å·²ç»å‘é€äº†FIN+ACKæŠ¥æ–‡ï¼Œè¯·æ±‚æ–­å¼€ï¼Œå®¢æˆ·ç«¯å´æ²¡æœ‰å›åº”ï¼Œäºæ˜¯æœåŠ¡å™¨åˆä¼šé‡æ–°å‘é€ä¸€æ¬¡ï¼Œè€Œå®¢æˆ·ç«¯å°±èƒ½åœ¨è¿™ä¸ª2MSLæ—¶é—´æ®µå†…æ”¶åˆ°è¿™ä¸ªé‡ä¼ çš„æŠ¥æ–‡ï¼Œæ¥ç€ç»™å‡ºå›åº”æŠ¥æ–‡ï¼Œå¹¶ä¸”ä¼šé‡å¯2MSLè®¡æ—¶å™¨ã€‚ é˜²æ­¢ç±»ä¼¼ä¸â€œä¸‰æ¬¡æ¡æ‰‹â€ä¸­æåˆ°äº†çš„â€œå·²ç»å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µâ€å‡ºç°åœ¨æœ¬è¿æ¥ä¸­ã€‚å®¢æˆ·ç«¯å‘é€å®Œæœ€åä¸€ä¸ªç¡®è®¤æŠ¥æ–‡åï¼Œåœ¨è¿™ä¸ª2MSLæ—¶é—´ä¸­ï¼Œå°±å¯ä»¥ä½¿æœ¬è¿æ¥æŒç»­çš„æ—¶é—´å†…æ‰€äº§ç”Ÿçš„æ‰€æœ‰æŠ¥æ–‡æ®µéƒ½ä»ç½‘ç»œä¸­æ¶ˆå¤±ï¼Œè¿™æ ·æ–°çš„è¿æ¥ä¸­ä¸ä¼šå‡ºç°æ—§è¿æ¥çš„è¯·æ±‚æŠ¥æ–‡ã€‚ 2MSLï¼Œæœ€å¤§æŠ¥æ–‡ç”Ÿå­˜æ—¶é—´ï¼Œä¸€ä¸ªMSL 30 ç§’ï¼Œ2MSL = 60s Qï¼šå®¢æˆ·ç«¯ TIME-WAIT çŠ¶æ€è¿‡å¤šä¼šäº§ç”Ÿä»€ä¹ˆåæœï¼Ÿæ€æ ·å¤„ç†ï¼Ÿ ä½œä¸ºæœåŠ¡å™¨ï¼ŒçŸ­æ—¶é—´å†…å…³é—­äº†å¤§é‡çš„Clientè¿æ¥ï¼Œå°±ä¼šé€ æˆæœåŠ¡å™¨ä¸Šå‡ºç°å¤§é‡çš„TIME_WAITè¿æ¥ï¼Œå æ®å¤§é‡çš„tuple /tApl/ ï¼Œä¸¥é‡æ¶ˆè€—ç€æœåŠ¡å™¨çš„èµ„æºï¼Œæ­¤æ—¶éƒ¨åˆ†å®¢æˆ·ç«¯å°±ä¼šæ˜¾ç¤ºè¿æ¥ä¸ä¸Š ä½œä¸ºå®¢æˆ·ç«¯ï¼ŒçŸ­æ—¶é—´å†…å¤§é‡çš„çŸ­è¿æ¥ï¼Œä¼šå¤§é‡æ¶ˆè€—çš„Clientæœºå™¨çš„ç«¯å£ï¼Œæ¯•ç«Ÿç«¯å£åªæœ‰65535ä¸ªï¼Œç«¯å£è¢«è€—å°½äº†ï¼Œåç»­å°±æ— æ³•åœ¨å‘èµ·æ–°çš„è¿æ¥äº† åœ¨é«˜å¹¶å‘çŸ­è¿æ¥çš„TCPæœåŠ¡å™¨ä¸Šï¼Œå½“æœåŠ¡å™¨å¤„ç†å®Œè¯·æ±‚åç«‹åˆ»ä¸»åŠ¨æ­£å¸¸å…³é—­è¿æ¥ã€‚è¿™ä¸ªåœºæ™¯ä¸‹ä¼šå‡ºç°å¤§é‡socketå¤„äºTIME_WAITçŠ¶æ€ã€‚å¦‚æœå®¢æˆ·ç«¯çš„å¹¶å‘é‡æŒç»­å¾ˆé«˜ï¼Œæ­¤æ—¶éƒ¨åˆ†å®¢æˆ·ç«¯å°±ä¼šæ˜¾ç¤ºè¿æ¥ä¸ä¸Š é«˜å¹¶å‘å¯ä»¥è®©æœåŠ¡å™¨åœ¨çŸ­æ—¶é—´èŒƒå›´å†…åŒæ—¶å ç”¨å¤§é‡ç«¯å£ï¼Œè€Œç«¯å£æœ‰ä¸ª0~65535çš„èŒƒå›´ï¼Œå¹¶ä¸æ˜¯å¾ˆå¤šï¼Œåˆ¨é™¤ç³»ç»Ÿå’Œå…¶ä»–æœåŠ¡è¦ç”¨çš„ï¼Œå‰©ä¸‹çš„å°±æ›´å°‘äº† çŸ­è¿æ¥è¡¨ç¤ºâ€œä¸šåŠ¡å¤„ç†+ä¼ è¾“æ•°æ®çš„æ—¶é—´ è¿œè¿œå°äº TIMEWAITè¶…æ—¶çš„æ—¶é—´â€çš„è¿æ¥ è§£å†³æ–¹æ³•ï¼š ç”¨è´Ÿè½½å‡è¡¡æ¥æŠ—è¿™äº›é«˜å¹¶å‘çš„çŸ­è¯·æ±‚ï¼› æœåŠ¡å™¨å¯ä»¥è®¾ç½® SO_REUSEADDR å¥—æ¥å­—é€‰é¡¹æ¥é¿å… TIME_WAITçŠ¶æ€ï¼ŒTIME_WAIT çŠ¶æ€å¯ä»¥é€šè¿‡ä¼˜åŒ–æœåŠ¡å™¨å‚æ•°å¾—åˆ°è§£å†³ï¼Œå› ä¸ºå‘ç”ŸTIME_WAITçš„æƒ…å†µæ˜¯æœåŠ¡å™¨è‡ªå·±å¯æ§çš„ï¼Œè¦ä¹ˆå°±æ˜¯å¯¹æ–¹è¿æ¥çš„å¼‚å¸¸ï¼Œè¦ä¹ˆå°±æ˜¯è‡ªå·±æ²¡æœ‰è¿…é€Ÿå›æ”¶èµ„æºï¼Œæ€»ä¹‹ä¸æ˜¯ç”±äºè‡ªå·±ç¨‹åºé”™è¯¯å¯¼è‡´çš„ å¼ºåˆ¶å…³é—­ï¼Œå‘é€ RST åŒ…è¶Šè¿‡TIMEWAITçŠ¶æ€ï¼Œç›´æ¥è¿›å…¥CLOSEDçŠ¶æ€ Qï¼šæœåŠ¡å™¨å‡ºç°äº†å¤§é‡ CLOSE_WAIT çŠ¶æ€å¦‚ä½•è§£å†³ï¼Ÿ å¤§é‡ CLOSE_WAIT è¡¨ç¤ºç¨‹åºå‡ºç°äº†é—®é¢˜ï¼Œå¯¹æ–¹çš„ socket å·²ç»å…³é—­è¿æ¥ï¼Œè€Œæˆ‘æ–¹å¿™äºè¯»æˆ–å†™æ²¡æœ‰åŠæ—¶å…³é—­è¿æ¥ï¼Œéœ€è¦æ£€æŸ¥ä»£ç ï¼Œç‰¹åˆ«æ˜¯é‡Šæ”¾èµ„æºçš„ä»£ç ï¼Œæˆ–è€…æ˜¯å¤„ç†è¯·æ±‚çš„çº¿ç¨‹é…ç½®ã€‚ Qï¼šæœåŠ¡ç«¯ä¼šæœ‰ä¸€ä¸ªTIME_WAITçŠ¶æ€å—ï¼Ÿå¦‚æœæ˜¯æœåŠ¡ç«¯ä¸»åŠ¨æ–­å¼€è¿æ¥å‘¢ï¼Ÿ å‘èµ·é“¾æ¥çš„ä¸»åŠ¨æ–¹åŸºæœ¬éƒ½æ˜¯å®¢æˆ·ç«¯ï¼Œä½†æ˜¯æ–­å¼€è¿æ¥çš„ä¸»åŠ¨æ–¹æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½å¯ä»¥å……å½“ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ˜¯ä¸»åŠ¨æ–­å¼€è¿æ¥çš„ï¼Œå°±ä¼šæœ‰ TIME_WAITçŠ¶æ€ å››æ¬¡æŒ¥æ‰‹æ˜¯æŒ‡æ–­å¼€ä¸€ä¸ªTCPè¿æ¥æ—¶ï¼Œéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ€»å…±å‘é€4ä¸ªåŒ…ä»¥ç¡®è®¤è¿æ¥çš„æ–­å¼€ã€‚åœ¨socketç¼–ç¨‹ä¸­ï¼Œè¿™ä¸€è¿‡ç¨‹ç”±å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯ä»»ä¸€æ–¹æ‰§è¡Œcloseæ¥è§¦å‘ ç”±äºTCPè¿æ¥æ—¶å…¨åŒå·¥çš„ï¼Œå› æ­¤ï¼Œæ¯ä¸ªæ–¹å‘çš„æ•°æ®ä¼ è¾“é€šé“éƒ½å¿…é¡»è¦å•ç‹¬è¿›è¡Œå…³é—­ã€‚","link":"/2021/02/25/Draft/2021/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"title":"RabbitMQ","text":"RabbitMQç®€ä»‹ MQå…¨ç§°ä¸ºMessage Queueï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ˜¯åº”ç”¨ç¨‹åºå’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡æ–¹æ³•ã€‚ RabbitMQæ˜¯ç”±erlangè¯­è¨€å¼€å‘ï¼ŒåŸºäºAMQPï¼ˆAdvanced Message Queue é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼‰åè®®å®ç°çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå®ƒæ˜¯ä¸€ç§åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡æ–¹æ³•ï¼Œæ¶ˆæ¯é˜Ÿåˆ—åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘ä¸­åº”ç”¨éå¸¸å¹¿æ³›ã€‚RabbitMQå®˜æ–¹åœ°å€ï¼šhttp://www.rabbitmq.com/ AMQP ä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„åº”ç”¨å±‚æ ‡å‡†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ã€‚ AMQPæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶åè®®ï¼Œæ‹¥æœ‰ä¸€äº›ç°ä»£åŒ–ç‰¹ç‚¹ï¼šå¤šä¿¡é“ã€åå•†å¼ï¼Œå¼‚æ­¥ï¼Œå®‰å…¨ï¼Œæ‰©å¹³å°ï¼Œä¸­ç«‹ï¼Œé«˜æ•ˆã€‚ RabbitMQæ˜¯AMQPåè®®çš„Erlangçš„å®ç°ã€‚ æ¦‚å¿µ è¯´æ˜ è¿æ¥Connection ä¸€ä¸ªç½‘ç»œè¿æ¥ï¼Œæ¯”å¦‚TCP/IPå¥—æ¥å­—è¿æ¥ã€‚ ä¼šè¯Session ç«¯ç‚¹ä¹‹é—´çš„å‘½åå¯¹è¯ã€‚åœ¨ä¸€ä¸ªä¼šè¯ä¸Šä¸‹æ–‡ä¸­ï¼Œä¿è¯â€œæ°å¥½ä¼ é€’ä¸€æ¬¡â€ã€‚ ä¿¡é“Channel å¤šè·¯å¤ç”¨è¿æ¥ä¸­çš„ä¸€æ¡ç‹¬ç«‹çš„åŒå‘æ•°æ®æµé€šé“ã€‚ä¸ºä¼šè¯æä¾›ç‰©ç†ä¼ è¾“ä»‹è´¨ã€‚ å®¢æˆ·ç«¯Client AMQPè¿æ¥æˆ–è€…ä¼šè¯çš„å‘èµ·è€…ã€‚AMQPæ˜¯éå¯¹ç§°çš„ï¼Œå®¢æˆ·ç«¯ç”Ÿäº§å’Œæ¶ˆè´¹æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨å­˜å‚¨å’Œè·¯ç”±è¿™äº›æ¶ˆæ¯ã€‚ æœåŠ¡èŠ‚ç‚¹Broker æ¶ˆæ¯ä¸­é—´ä»¶çš„æœåŠ¡èŠ‚ç‚¹ï¼›ä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥å°†ä¸€ä¸ªRabbitMQ Brokerçœ‹ä½œä¸€å°RabbitMQ æœåŠ¡å™¨ã€‚ ç«¯ç‚¹ AMQPå¯¹è¯çš„ä»»æ„ä¸€æ–¹ã€‚ä¸€ä¸ªAMQPè¿æ¥åŒ…æ‹¬ä¸¤ä¸ªç«¯ç‚¹ï¼ˆä¸€ä¸ªæ˜¯å®¢æˆ·ç«¯ï¼Œä¸€ä¸ªæ˜¯æœåŠ¡å™¨ï¼‰ã€‚ æ¶ˆè´¹è€…Consumer ä¸€ä¸ªä»æ¶ˆæ¯é˜Ÿåˆ—é‡Œè¯·æ±‚æ¶ˆæ¯çš„å®¢æˆ·ç«¯ç¨‹åºã€‚ ç”Ÿäº§è€…Producer ä¸€ä¸ªå‘äº¤æ¢æœºå‘å¸ƒæ¶ˆæ¯çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚ 6ç§å·¥ä½œæ¨¡å¼ï¼š ç®€å•æ¨¡å¼ï¼Œworkæ¨¡å¼ï¼ŒPublish/Subscribeå‘å¸ƒä¸è®¢é˜…æ¨¡å¼ï¼ŒRoutingè·¯ç”±æ¨¡å¼ï¼ŒTopicsä¸»é¢˜æ¨¡å¼ï¼ŒRPCè¿œç¨‹è°ƒç”¨æ¨¡å¼ï¼ˆè¿œç¨‹è°ƒç”¨ï¼Œä¸å¤ªç®—MQï¼›æš‚ä¸ä½œä»‹ç»ï¼‰ï¼› å®˜ç½‘å¯¹åº”æ¨¡å¼ä»‹ç»ï¼šhttps://www.rabbitmq.com/getstarted.html ä¼˜åŠ¿ï¼š åº”ç”¨è§£è€¦ï¼Œæå‡å®¹é”™æ€§å’Œå¯ç»´æŠ¤æ€§ å¼‚æ­¥æé€Ÿï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼Œç³»ç»Ÿååé‡ å‰Šå³°å¡«è°·ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§ åŠ£åŠ¿ï¼š ç³»ç»Ÿå¯ç”¨æ€§é™ä½ï¼ˆéœ€ä¿è¯MQé«˜å¯ç”¨ï¼‰ ç³»ç»Ÿå¤æ‚åº¦æé«˜ï¼ˆä¸è¢«é‡å¤æ¶ˆè´¹ï¼Œä¿è¯æ¶ˆæ¯é¡ºåºï¼‰ æ•°æ®ä¸€è‡´æ€§é—®é¢˜ ä½¿ç”¨æ¡ä»¶: ç”Ÿäº§è€…ä¸éœ€è¦ä»æ¶ˆè´¹è€…å¤„è·å¾—åé¦ˆ å®¹è®¸çŸ­æš‚çš„ä¸ä¸€è‡´æ€§ ç¡®å®ç”¨äº†æœ‰æ•ˆæœ ï¼Œå¥½å¤„å¤§äºå¤æ‚æ€§ç­‰åŠ£åŠ¿ å¸¸è§MQäº§å“ JMS JMSå³Javaæ¶ˆæ¯æœåŠ¡ï¼ˆJavaMessage Serviceï¼‰åº”ç”¨ç¨‹åºæ¥å£ï¼Œæ˜¯ä¸€ä¸ªJavaå¹³å°ä¸­å…³äºé¢å‘æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMOMï¼‰çš„APIï¼Œç”¨äºåœ¨ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´ï¼Œæˆ–åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‘é€æ¶ˆæ¯ï¼Œè¿›è¡Œå¼‚æ­¥é€šä¿¡ã€‚ AMQP ä¸ JMS åŒºåˆ« JMSæ˜¯å®šä¹‰äº†ç»Ÿä¸€çš„æ¥å£ï¼Œæ¥å¯¹æ¶ˆæ¯æ“ä½œè¿›è¡Œç»Ÿä¸€ï¼›AMQPæ˜¯é€šè¿‡è§„å®šåè®®æ¥ç»Ÿä¸€æ•°æ®äº¤äº’çš„æ ¼å¼ JMSé™å®šäº†å¿…é¡»ä½¿ç”¨Javaè¯­è¨€ï¼›AMQPåªæ˜¯åè®®ï¼Œä¸è§„å®šå®ç°æ–¹å¼ï¼Œå› æ­¤æ˜¯è·¨è¯­è¨€çš„ã€‚ JMSè§„å®šäº†ä¸¤ç§æ¶ˆæ¯æ¨¡å¼ï¼›è€ŒAMQPçš„æ¶ˆæ¯æ¨¡å¼æ›´åŠ ä¸°å¯Œ RabbitMQ å®‰è£…é…ç½® MQç‰ˆæœ¬é€‰æ‹©å’Œerlangç›¸å…³ ä½¿ç”¨èµ„æ–™é‡Œæä¾›çš„CentOS-7-x86_64-DVD-1810.iso å®‰è£…è™šæ‹Ÿæœº. 1. å®‰è£…ä¾èµ–ç¯å¢ƒ åœ¨çº¿å®‰è£…ä¾èµ–ç¯å¢ƒï¼š 1yum install build-essential openssl openssl-devel unixODBC unixODBC-devel make gcc gcc-c++ kernel-devel m4 ncurses-devel tk tc xz 2. å®‰è£…Erlang ä¸Šä¼  alt+pè¿›å…¥sftpç•Œé¢ erlang-18.3-1.el7.centos.x86_64.rpm socat-1.7.3.2-5.el7.lux.x86_64.rpm rabbitmq-server-3.6.5-1.noarch.rpm 12# å®‰è£…rpm -ivh erlang-18.3-1.el7.centos.x86_64.rpm å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯ è¯´æ˜gblic ç‰ˆæœ¬å¤ªä½ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å½“å‰æœºå™¨çš„gblic ç‰ˆæœ¬ 1strings /lib64/libc.so.6 | grep GLIBC å½“å‰æœ€é«˜ç‰ˆæœ¬2.12ï¼Œéœ€è¦2.15.æ‰€ä»¥éœ€è¦å‡çº§glibc ä½¿ç”¨yumæ›´æ–°å®‰è£…ä¾èµ– 1sudo yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make -y ä¸‹è½½rpmåŒ… 1234567wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-utils-2.17-55.el6.x86_64.rpm &amp;wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-static-2.17-55.el6.x86_64.rpm &amp;wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-2.17-55.el6.x86_64.rpm &amp;wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-common-2.17-55.el6.x86_64.rpm &amp;wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-devel-2.17-55.el6.x86_64.rpm &amp;wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-headers-2.17-55.el6.x86_64.rpm &amp;wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/nscd-2.17-55.el6.x86_64.rpm &amp; å®‰è£…rpmåŒ… 1sudo rpm -Uvh *-2.17-55.el6.x86_64.rpm --force --nodeps å®‰è£…å®Œæ¯•åå†æŸ¥çœ‹glibcç‰ˆæœ¬,å‘ç°glibcç‰ˆæœ¬å·²ç»åˆ°2.17äº† 1strings /lib64/libc.so.6 | grep GLIBC 3. å®‰è£…RabbitMQ 123456# å®‰è£…rpm -ivh socat-1.7.3.2-5.el7.lux.x86_64.rpm# å®‰è£…rpm -ivh rabbitmq-server-3.6.5-1.noarch.rpm 12345678910111213[root@softbank126011009150 rabbitmq]# lserlang-18.3-1.el7.centos.x86_64.rpm rabbitmq-server-3.6.5-1.noarch.rpm socat-1.7.3.2-1.1.el7.x86_64.rpm[root@softbank126011009150 rabbitmq]# rpm -ivh erlang-18.3-1.el7.centos.x86_64.rpm å‡†å¤‡ä¸­... ################################# [100%] è½¯ä»¶åŒ… erlang-18.3-1.el7.centos.x86_64 å·²ç»å®‰è£…[root@softbank126011009150 rabbitmq]# rpm -ivh socat-1.7.3.2-1.1.el7.x86_64.rpm è­¦å‘Šï¼šsocat-1.7.3.2-1.1.el7.x86_64.rpm: å¤´V4 RSA/SHA1 Signature, å¯†é’¥ ID 87e360b8: NOKEYå‡†å¤‡ä¸­... ################################# [100%] è½¯ä»¶åŒ… socat-1.7.3.2-1.1.el7.x86_64 å·²ç»å®‰è£…[root@softbank126011009150 rabbitmq]# rpm -ivh rabbitmq-server-3.6.5-1.noarch.rpm è­¦å‘Šï¼šrabbitmq-server-3.6.5-1.noarch.rpm: å¤´V4 RSA/SHA1 Signature, å¯†é’¥ ID 6026dfca: NOKEYå‡†å¤‡ä¸­... ################################# [100%] è½¯ä»¶åŒ… rabbitmq-server-3.6.5-1.noarch å·²ç»å®‰è£… 4. å¼€å¯ç®¡ç•Œé¢åŠé…ç½® 123456# å¼€å¯ç®¡ç†ç•Œé¢rabbitmq-plugins enable rabbitmq_management# ä¿®æ”¹é»˜è®¤é…ç½®ä¿¡æ¯vim /usr/lib/rabbitmq/lib/rabbitmq_server-3.6.5/ebin/rabbit.app # æ¯”å¦‚ä¿®æ”¹å¯†ç ã€é…ç½®ç­‰ç­‰ï¼Œä¾‹å¦‚ï¼šloopback_users ä¸­çš„ &lt;&lt;&quot;guest&quot;&gt;&gt;,åªä¿ç•™guesthttp://ip:15672 è®¿é—® 5. å¯åŠ¨ 123456service rabbitmq-server start # å¯åŠ¨æœåŠ¡service rabbitmq-server stop # åœæ­¢æœåŠ¡service rabbitmq-server restart # é‡å¯æœåŠ¡service iptables stop#å…³é—­é˜²ç«å¢™systemctl stop firewalld #conos7å…³é—­é˜²ç«å¢™æ–¹æ³• è®¾ç½®é…ç½®æ–‡ä»¶ 1234cd /usr/share/doc/rabbitmq-server-3.6.5/cp rabbitmq.config.example /etc/rabbitmq/rabbitmq.config 6. é…ç½®è™šæ‹Ÿä¸»æœºåŠç”¨æˆ· 6.1. ç”¨æˆ·è§’è‰² RabbitMQåœ¨å®‰è£…å¥½åï¼Œå¯ä»¥è®¿é—®http://ipåœ°å€:15672 ï¼›å…¶è‡ªå¸¦äº†guest/guestçš„ç”¨æˆ·åå’Œå¯†ç ï¼›å¦‚æœéœ€è¦åˆ›å»ºè‡ªå®šä¹‰ç”¨æˆ·ï¼›é‚£ä¹ˆä¹Ÿå¯ä»¥ç™»å½•ç®¡ç†ç•Œé¢åï¼Œå¦‚ä¸‹æ“ä½œï¼š è§’è‰²è¯´æ˜ï¼š 1ã€ è¶…çº§ç®¡ç†å‘˜(administrator) å¯ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼Œå¯æŸ¥çœ‹æ‰€æœ‰çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ç”¨æˆ·ï¼Œç­–ç•¥(policy)è¿›è¡Œæ“ä½œã€‚ 2ã€ ç›‘æ§è€…(monitoring) å¯ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼ŒåŒæ—¶å¯ä»¥æŸ¥çœ‹rabbitmqèŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯(è¿›ç¨‹æ•°ï¼Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œç£ç›˜ä½¿ç”¨æƒ…å†µç­‰) 3ã€ ç­–ç•¥åˆ¶å®šè€…(policymaker) å¯ç™»é™†ç®¡ç†æ§åˆ¶å°, åŒæ—¶å¯ä»¥å¯¹policyè¿›è¡Œç®¡ç†ã€‚ä½†æ— æ³•æŸ¥çœ‹èŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯(ä¸Šå›¾çº¢æ¡†æ ‡è¯†çš„éƒ¨åˆ†)ã€‚ 4ã€ æ™®é€šç®¡ç†è€…(management) ä»…å¯ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼Œæ— æ³•çœ‹åˆ°èŠ‚ç‚¹ä¿¡æ¯ï¼Œä¹Ÿæ— æ³•å¯¹ç­–ç•¥è¿›è¡Œç®¡ç†ã€‚ 5ã€ å…¶ä»– æ— æ³•ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼Œé€šå¸¸å°±æ˜¯æ™®é€šçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚ 6.2. Virtual Hostsé…ç½® åƒmysqlæ‹¥æœ‰æ•°æ®åº“çš„æ¦‚å¿µå¹¶ä¸”å¯ä»¥æŒ‡å®šç”¨æˆ·å¯¹åº“å’Œè¡¨ç­‰æ“ä½œçš„æƒé™ã€‚RabbitMQä¹Ÿæœ‰ç±»ä¼¼çš„æƒé™ç®¡ç†ï¼›åœ¨RabbitMQä¸­å¯ä»¥è™šæ‹Ÿæ¶ˆæ¯æœåŠ¡å™¨Virtual Hostï¼Œæ¯ä¸ªVirtual Hostsç›¸å½“äºä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„RabbitMQæœåŠ¡å™¨ï¼Œæ¯ä¸ªVirtualHostä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚exchangeã€queueã€messageä¸èƒ½äº’é€šã€‚ ç›¸å½“äºmysqlçš„dbã€‚Virtual Nameä¸€èˆ¬ä»¥/å¼€å¤´ã€‚ 6.2.1. åˆ›å»ºVirtual Hosts 6.2.2. è®¾ç½®Virtual Hostsæƒé™ è§£å†³é…ç½®æ–‡ä»¶æœªæ‰¾åˆ° 1234567891011121314151617181920212223242526272829[root@softbank126011009150 rabbitmq]# cd /usr/share/doc/rabbitmq-server-3.6.5/[root@softbank126011009150 rabbitmq-server-3.6.5]# lsLICENSE LICENSE-APL2-Stomp-Websocket LICENSE-EPL-OTP LICENSE-MIT-jQuery164 LICENSE-MIT-Sammy060 LICENSE-MPL-RabbitMQ set_rabbitmq_policy.sh.exampleLICENSE-APACHE2-ExplorerCanvas LICENSE-BSD-base64js LICENSE-MIT-EJS10 LICENSE-MIT-Mochi LICENSE-MIT-SockJS rabbitmq.config.exampleLICENSE-APL2-Rebar LICENSE-BSD-glMatrix LICENSE-MIT-Flot LICENSE-MIT-Mochiweb LICENSE-MPL2 README[root@softbank126011009150 rabbitmq-server-3.6.5]# llæ€»ç”¨é‡ 200-rw-r--r--. 1 root root 28945 8æœˆ 5 2016 LICENSE-rw-r--r--. 1 root root 11358 8æœˆ 5 2016 LICENSE-APACHE2-ExplorerCanvas-rw-r--r--. 1 root root 10175 8æœˆ 5 2016 LICENSE-APL2-Rebar-rw-r--r--. 1 root root 10851 8æœˆ 5 2016 LICENSE-APL2-Stomp-Websocket-rw-r--r--. 1 root root 1206 8æœˆ 5 2016 LICENSE-BSD-base64js-rw-r--r--. 1 root root 1304 8æœˆ 5 2016 LICENSE-BSD-glMatrix-rw-r--r--. 1 root root 14041 8æœˆ 5 2016 LICENSE-EPL-OTP-rw-r--r--. 1 root root 1087 8æœˆ 5 2016 LICENSE-MIT-EJS10-rw-r--r--. 1 root root 1069 8æœˆ 5 2016 LICENSE-MIT-Flot-rw-r--r--. 1 root root 1075 8æœˆ 5 2016 LICENSE-MIT-jQuery164-rw-r--r--. 1 root root 1087 3æœˆ 31 2016 LICENSE-MIT-Mochi-rw-r--r--. 1 root root 1087 8æœˆ 5 2016 LICENSE-MIT-Mochiweb-rw-r--r--. 1 root root 1076 8æœˆ 5 2016 LICENSE-MIT-Sammy060-rw-r--r--. 1 root root 1056 8æœˆ 5 2016 LICENSE-MIT-SockJS-rw-r--r--. 1 root root 16726 8æœˆ 5 2016 LICENSE-MPL2-rw-r--r--. 1 root root 24897 8æœˆ 5 2016 LICENSE-MPL-RabbitMQ-rw-r--r--. 1 root root 21023 4æœˆ 11 2016 rabbitmq.config.example-rw-r--r--. 1 root root 943 3æœˆ 31 2016 README-rw-r--r--. 1 root root 277 3æœˆ 31 2016 set_rabbitmq_policy.sh.example[root@softbank126011009150 rabbitmq-server-3.6.5]# cp ./rabbitmq.config.example /etc/rabbitmq/rabbitmq.config[root@softbank126011009150 rabbitmq-server-3.6.5]# service rabbitmq-server restartRestarting rabbitmq-server (via systemctl): [ ç¡®å®š ] å·¥ä½œæ¨¡å¼ ç®€å•æ¨¡å¼ ç”Ÿäº§è€… 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162package com.lxl.producer;import com.rabbitmq.client.Channel;import com.rabbitmq.client.Connection;import com.rabbitmq.client.ConnectionFactory;import java.io.IOException;import java.util.concurrent.TimeoutException;public class Producer_HelloWord { public static void main(String[] args) throws IOException, TimeoutException { //1.åˆ›å»ºè¿æ¥å·¥å‚ ConnectionFactory factory = new ConnectionFactory(); //2. è®¾ç½®å‚æ•° factory.setHost(&quot;126.11.41.128&quot;);//ip é»˜è®¤å€¼ localhost factory.setPort(5672); //ç«¯å£ é»˜è®¤å€¼ 5672 factory.setVirtualHost(&quot;/lxlv&quot;);//è™šæ‹Ÿæœº é»˜è®¤å€¼/ factory.setUsername(&quot;lxl&quot;);//ç”¨æˆ·å é»˜è®¤ guest factory.setPassword(&quot;lxl&quot;);//å¯†ç  é»˜è®¤å€¼ guest //3. åˆ›å»ºè¿æ¥ Connection Connection connection = factory.newConnection(); //4. åˆ›å»ºChannel Channel channel = connection.createChannel(); //5. åˆ›å»ºé˜Ÿåˆ—Queue /* queueDeclare(String queue, boolean durable, boolean exclusive, boolean autoDelete, Map&lt;String, Object&gt; arguments) å‚æ•°ï¼š 1. queueï¼šé˜Ÿåˆ—åç§° 2. durable:æ˜¯å¦æŒä¹…åŒ–ï¼Œå½“mqé‡å¯ä¹‹åï¼Œè¿˜åœ¨ 3. exclusiveï¼š * æ˜¯å¦ç‹¬å ã€‚åªèƒ½æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ç›‘å¬è¿™é˜Ÿåˆ— * å½“Connectionå…³é—­æ—¶ï¼Œæ˜¯å¦åˆ é™¤é˜Ÿåˆ— * 4. autoDelete:æ˜¯å¦è‡ªåŠ¨åˆ é™¤ã€‚å½“æ²¡æœ‰Consumeræ—¶ï¼Œè‡ªåŠ¨åˆ é™¤æ‰ 5. argumentsï¼šå‚æ•°ã€‚ */ //å¦‚æœæ²¡æœ‰ä¸€ä¸ªåå­—å«hello_worldçš„é˜Ÿåˆ—ï¼Œåˆ™ä¼šåˆ›å»ºè¯¥é˜Ÿåˆ—ï¼Œå¦‚æœæœ‰åˆ™ä¸ä¼šåˆ›å»º channel.queueDeclare(&quot;hello_world&quot;,true,false,false,null); /* basicPublish(String exchange, String routingKey, BasicProperties props, byte[] body) å‚æ•°ï¼š 1. exchangeï¼šäº¤æ¢æœºåç§°ã€‚ç®€å•æ¨¡å¼ä¸‹äº¤æ¢æœºä¼šä½¿ç”¨é»˜è®¤çš„ &quot;&quot; 2. routingKeyï¼šè·¯ç”±åç§° 3. propsï¼šé…ç½®ä¿¡æ¯ 4. bodyï¼šå‘é€æ¶ˆæ¯æ•°æ® */ String body = &quot;hello rabbitmq~~~&quot;; //6. å‘é€æ¶ˆæ¯ channel.basicPublish(&quot;&quot;,&quot;hello_world&quot;,null,body.getBytes()); //7.é‡Šæ”¾èµ„æº// channel.close();// connection.close(); }} æ¶ˆè´¹è€… 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475package com.lxl.consumer;import com.rabbitmq.client.*;import java.io.IOException;import java.util.concurrent.TimeoutException;public class Consumer_HelloWorld { public static void main(String[] args) throws IOException, TimeoutException { //1.åˆ›å»ºè¿æ¥å·¥å‚ ConnectionFactory factory = new ConnectionFactory(); //2. è®¾ç½®å‚æ•° factory.setHost(&quot;126.11.41.128&quot;);//ip é»˜è®¤å€¼ localhost factory.setPort(5672); //ç«¯å£ é»˜è®¤å€¼ 5672 factory.setVirtualHost(&quot;/lxlv&quot;);//è™šæ‹Ÿæœº é»˜è®¤å€¼/ factory.setUsername(&quot;lxl&quot;);//ç”¨æˆ·å é»˜è®¤ guest factory.setPassword(&quot;lxl&quot;);//å¯†ç  é»˜è®¤å€¼ guest //3. åˆ›å»ºè¿æ¥ Connection Connection connection = factory.newConnection(); //4. åˆ›å»ºChannel Channel channel = connection.createChannel(); //5. åˆ›å»ºé˜Ÿåˆ—Queue /* queueDeclare(String queue, boolean durable, boolean exclusive, boolean autoDelete, Map&lt;String, Object&gt; arguments) å‚æ•°ï¼š 1. queueï¼šé˜Ÿåˆ—åç§° 2. durable:æ˜¯å¦æŒä¹…åŒ–ï¼Œå½“mqé‡å¯ä¹‹åï¼Œè¿˜åœ¨ 3. exclusiveï¼š * æ˜¯å¦ç‹¬å ã€‚åªèƒ½æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ç›‘å¬è¿™é˜Ÿåˆ— * å½“Connectionå…³é—­æ—¶ï¼Œæ˜¯å¦åˆ é™¤é˜Ÿåˆ— * 4. autoDelete:æ˜¯å¦è‡ªåŠ¨åˆ é™¤ã€‚å½“æ²¡æœ‰Consumeræ—¶ï¼Œè‡ªåŠ¨åˆ é™¤æ‰ 5. argumentsï¼šå‚æ•°ã€‚ */ //å¦‚æœæ²¡æœ‰ä¸€ä¸ªåå­—å«hello_worldçš„é˜Ÿåˆ—ï¼Œåˆ™ä¼šåˆ›å»ºè¯¥é˜Ÿåˆ—ï¼Œå¦‚æœæœ‰åˆ™ä¸ä¼šåˆ›å»º channel.queueDeclare(&quot;hello_world&quot;,true,false,false,null); /* basicConsume(String queue, boolean autoAck, Consumer callback) å‚æ•°ï¼š 1. queueï¼šé˜Ÿåˆ—åç§° 2. autoAckï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ 3. callbackï¼šå›è°ƒå¯¹è±¡ */ // æ¥æ”¶æ¶ˆæ¯ Consumer consumer = new DefaultConsumer(channel){ /* å›è°ƒæ–¹æ³•ï¼Œå½“æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥æ–¹æ³• 1. consumerTagï¼šæ ‡è¯† 2. envelopeï¼šè·å–ä¸€äº›ä¿¡æ¯ï¼Œäº¤æ¢æœºï¼Œè·¯ç”±key... 3. properties:é…ç½®ä¿¡æ¯ 4. bodyï¼šæ•°æ® */ @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException { System.out.println(&quot;consumerTagï¼š&quot;+consumerTag); System.out.println(&quot;Exchangeï¼š&quot;+envelope.getExchange()); System.out.println(&quot;RoutingKeyï¼š&quot;+envelope.getRoutingKey()); System.out.println(&quot;propertiesï¼š&quot;+properties); System.out.println(&quot;bodyï¼š&quot;+new String(body)); } }; channel.basicConsume(&quot;hello_world&quot;,true,consumer); //å…³é—­èµ„æºï¼Ÿä¸è¦ }} RabbitMQè¿è½¬æµç¨‹ åœ¨å…¥é—¨æ¡ˆä¾‹ä¸­ï¼š ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ ç”Ÿäº§è€…åˆ›å»ºè¿æ¥ï¼ˆConnectionï¼‰ï¼Œå¼€å¯ä¸€ä¸ªä¿¡é“ï¼ˆChannelï¼‰ï¼Œè¿æ¥åˆ°RabbitMQ Brokerï¼› å£°æ˜é˜Ÿåˆ—å¹¶è®¾ç½®å±æ€§ï¼›æ˜¯å¦æ’å®ƒï¼Œæ˜¯å¦æŒä¹…åŒ–ï¼Œæ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼› å°†è·¯ç”±é”®ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ä¸é˜Ÿåˆ—ç»‘å®šèµ·æ¥ï¼› å‘é€æ¶ˆæ¯è‡³RabbitMQ Brokerï¼› å…³é—­ä¿¡é“ï¼› å…³é—­è¿æ¥ï¼› æ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯ æ¶ˆè´¹è€…åˆ›å»ºè¿æ¥ï¼ˆConnectionï¼‰ï¼Œå¼€å¯ä¸€ä¸ªä¿¡é“ï¼ˆChannelï¼‰ï¼Œè¿æ¥åˆ°RabbitMQ Broker å‘Broker è¯·æ±‚æ¶ˆè´¹ç›¸åº”é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œè®¾ç½®ç›¸åº”çš„å›è°ƒå‡½æ•°ï¼› ç­‰å¾…Brokerå›åº”é—­å…³æŠ•é€’å“åº”é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯ï¼› ç¡®è®¤ï¼ˆackï¼Œè‡ªåŠ¨ç¡®è®¤ï¼‰æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼› RabbitMQä»é˜Ÿåˆ—ä¸­åˆ é™¤ç›¸åº”å·²ç»è¢«ç¡®è®¤çš„æ¶ˆæ¯ï¼› å…³é—­ä¿¡é“ï¼› å…³é—­è¿æ¥ï¼› ç”Ÿäº§è€…æµè½¬è¿‡ç¨‹è¯´æ˜ å®¢æˆ·ç«¯ä¸ä»£ç†æœåŠ¡å™¨Brokerå»ºç«‹è¿æ¥ã€‚ä¼šè°ƒç”¨newConnection() æ–¹æ³•,è¿™ä¸ªæ–¹æ³•ä¼šè¿›ä¸€æ­¥å°è£…Protocol Header 0-9-1 çš„æŠ¥æ–‡å¤´å‘é€ç»™Broker ï¼Œä»¥æ­¤é€šçŸ¥Broker æœ¬æ¬¡äº¤äº’é‡‡ç”¨çš„æ˜¯AMQPO-9-1 åè®®ï¼Œç´§æ¥ç€Broker è¿”å›Connection.Start æ¥å»ºç«‹è¿æ¥ï¼Œåœ¨è¿æ¥çš„è¿‡ç¨‹ä¸­æ¶‰åŠConnection.Start/.Start-OK ã€Connection.Tune/.Tune-Ok ï¼ŒConnection.Open/ .Open-Ok è¿™6 ä¸ªå‘½ä»¤çš„äº¤äº’ã€‚ å®¢æˆ·ç«¯è°ƒç”¨connection.createChannelæ–¹æ³•ã€‚æ­¤æ–¹æ³•å¼€å¯ä¿¡é“ï¼Œå…¶åŒ…è£…çš„channel.openå‘½ä»¤å‘é€ç»™Broker,ç­‰å¾…channel.basicPublishæ–¹æ³•ï¼Œå¯¹åº”çš„AMQPå‘½ä»¤ä¸ºBasic.Publish,è¿™ä¸ªå‘½ä»¤åŒ…å«äº†content Header å’Œcontent Body()ã€‚content Header åŒ…å«äº†æ¶ˆæ¯ä½“çš„å±æ€§ï¼Œä¾‹å¦‚:æŠ•é€’æ¨¡å¼ï¼Œä¼˜å…ˆçº§ç­‰ï¼Œcontent Body åŒ…å«äº†æ¶ˆæ¯ä½“æœ¬èº«ã€‚ å®¢æˆ·ç«¯å‘é€å®Œæ¶ˆæ¯éœ€è¦å…³é—­èµ„æºæ—¶ï¼Œæ¶‰åŠåˆ°Channel.Closeå’ŒChannl.Close-Ok ä¸Connetion.Closeå’ŒConnection.Close-Okçš„å‘½ä»¤äº¤äº’ã€‚ æ¶ˆè´¹è€…æµè½¬è¿‡ç¨‹è¯´æ˜ æ¶ˆè´¹è€…å®¢æˆ·ç«¯ä¸ä»£ç†æœåŠ¡å™¨Brokerå»ºç«‹è¿æ¥ã€‚ä¼šè°ƒç”¨newConnection() æ–¹æ³•,è¿™ä¸ªæ–¹æ³•ä¼šè¿›ä¸€æ­¥å°è£…Protocol Header 0-9-1 çš„æŠ¥æ–‡å¤´å‘é€ç»™Broker ï¼Œä»¥æ­¤é€šçŸ¥Broker æœ¬æ¬¡äº¤äº’é‡‡ç”¨çš„æ˜¯AMQPO-9-1 åè®®ï¼Œç´§æ¥ç€Broker è¿”å›Connection.Start æ¥å»ºç«‹è¿æ¥ï¼Œåœ¨è¿æ¥çš„è¿‡ç¨‹ä¸­æ¶‰åŠConnection.Start/.Start-OK ã€Connection.Tune/.Tune-Ok ï¼ŒConnection.Open/ .Open-Ok è¿™6 ä¸ªå‘½ä»¤çš„äº¤äº’ã€‚ æ¶ˆè´¹è€…å®¢æˆ·ç«¯è°ƒç”¨connection.createChannelæ–¹æ³•ã€‚å’Œç”Ÿäº§è€…å®¢æˆ·ç«¯ä¸€æ ·ï¼Œåè®®æ¶‰åŠChannel . Open/Open-Okå‘½ä»¤ã€‚ åœ¨çœŸæ­£æ¶ˆè´¹ä¹‹å‰ï¼Œæ¶ˆè´¹è€…å®¢æˆ·ç«¯éœ€è¦å‘Broker å‘é€Basic.Consume å‘½ä»¤(å³è°ƒç”¨channel.basicConsume æ–¹æ³•ã€‰å°†Channel ç½®ä¸ºæ¥æ”¶æ¨¡å¼ï¼Œä¹‹åBroker å›æ‰§Basic . Consume - Ok ä»¥å‘Šè¯‰æ¶ˆè´¹è€…å®¢æˆ·ç«¯å‡†å¤‡å¥½æ¶ˆè´¹æ¶ˆæ¯ã€‚ Broker å‘æ¶ˆè´¹è€…å®¢æˆ·ç«¯æ¨é€(Push) æ¶ˆæ¯ï¼Œå³Basic.Deliver å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å’ŒBasic.Publish å‘½ä»¤ä¸€æ ·ä¼šæºå¸¦Content Header å’ŒContent Bodyã€‚ æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯å¹¶æ­£ç¡®æ¶ˆè´¹ä¹‹åï¼Œå‘Broker å‘é€ç¡®è®¤ï¼Œå³Basic.Ack å‘½ä»¤ã€‚ å®¢æˆ·ç«¯å‘é€å®Œæ¶ˆæ¯éœ€è¦å…³é—­èµ„æºæ—¶ï¼Œæ¶‰åŠåˆ°Channel.Closeå’ŒChannl.Close-Ok ä¸Connetion.Closeå’ŒConnection.Close-Okçš„å‘½ä»¤äº¤äº’ã€‚ å·¥ä½œé˜Ÿåˆ—æ¨¡å¼ æ¨¡å¼è¯´æ˜ï¼ˆåªæœ‰ä¸€ç›’ç³–ä½ ä»¬å‡ ä¸ªæŠ¢ï¼‰ Work Queuesä¸å…¥é—¨ç¨‹åºçš„ç®€å•æ¨¡å¼ç›¸æ¯”ï¼Œå¤šäº†ä¸€ä¸ªæˆ–ä¸€äº›æ¶ˆè´¹ç«¯ï¼Œå¤šä¸ªæ¶ˆè´¹ç«¯å…±åŒæ¶ˆè´¹åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚ åº”ç”¨åœºæ™¯ï¼šå¯¹äº ä»»åŠ¡è¿‡é‡æˆ–ä»»åŠ¡è¾ƒå¤šæƒ…å†µä½¿ç”¨å·¥ä½œé˜Ÿåˆ—å¯ä»¥æé«˜ä»»åŠ¡å¤„ç†çš„é€Ÿåº¦ã€‚ ä»£ç  Work Queuesä¸å…¥é—¨ç¨‹åºçš„ç®€å•æ¨¡å¼çš„ä»£ç æ˜¯å‡ ä¹ä¸€æ ·çš„ï¼›å¯ä»¥å®Œå…¨å¤åˆ¶ï¼Œå¹¶å¤åˆ¶å¤šä¸€ä¸ªæ¶ˆè´¹è€…è¿›è¡Œå¤šä¸ªæ¶ˆè´¹è€…åŒæ—¶æ¶ˆè´¹æ¶ˆæ¯çš„æµ‹è¯•ã€‚ ç”Ÿäº§è€… 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package com.itheima.rabbitmq.work;import com.itheima.rabbitmq.util.ConnectionUtil;import com.rabbitmq.client.Channel;import com.rabbitmq.client.Connection;import com.rabbitmq.client.ConnectionFactory;public class Producer { static final String QUEUE_NAME = &quot;work_queue&quot;; public static void main(String[] args) throws Exception { //åˆ›å»ºè¿æ¥ Connection connection = ConnectionUtil.getConnection(); // åˆ›å»ºé¢‘é“ Channel channel = connection.createChannel(); // å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ— /** * å‚æ•°1ï¼šé˜Ÿåˆ—åç§° * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ— * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥ * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ— * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•° */ channel.queueDeclare(QUEUE_NAME, true, false, false, null); for (int i = 1; i &lt;= 30; i++) { // å‘é€ä¿¡æ¯ String message = &quot;ä½ å¥½ï¼›å°å…”å­ï¼workæ¨¡å¼--&quot; + i; /** * å‚æ•°1ï¼šäº¤æ¢æœºåç§°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤Default Exchage * å‚æ•°2ï¼šè·¯ç”±key,ç®€å•æ¨¡å¼å¯ä»¥ä¼ é€’é˜Ÿåˆ—åç§° * å‚æ•°3ï¼šæ¶ˆæ¯å…¶å®ƒå±æ€§ * å‚æ•°4ï¼šæ¶ˆæ¯å†…å®¹ */ channel.basicPublish(&quot;&quot;, QUEUE_NAME, null, message.getBytes()); System.out.println(&quot;å·²å‘é€æ¶ˆæ¯ï¼š&quot; + message); } // å…³é—­èµ„æº channel.close(); connection.close(); }} æ¶ˆè´¹è€…1 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465package com.itheima.rabbitmq.work;import com.itheima.rabbitmq.util.ConnectionUtil;import com.rabbitmq.client.*;import java.io.IOException;public class Consumer1 { public static void main(String[] args) throws Exception { Connection connection = ConnectionUtil.getConnection(); // åˆ›å»ºé¢‘é“ Channel channel = connection.createChannel(); // å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ— /** * å‚æ•°1ï¼šé˜Ÿåˆ—åç§° * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ— * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥ * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ— * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•° */ channel.queueDeclare(Producer.QUEUE_NAME, true, false, false, null); //ä¸€æ¬¡åªèƒ½æ¥æ”¶å¹¶å¤„ç†ä¸€ä¸ªæ¶ˆæ¯ channel.basicQos(1); //åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç† DefaultConsumer consumer = new DefaultConsumer(channel){ @Override /** * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€) * properties å±æ€§ä¿¡æ¯ * body æ¶ˆæ¯ */ public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException { try { //è·¯ç”±key System.out.println(&quot;è·¯ç”±keyä¸ºï¼š&quot; + envelope.getRoutingKey()); //äº¤æ¢æœº System.out.println(&quot;äº¤æ¢æœºä¸ºï¼š&quot; + envelope.getExchange()); //æ¶ˆæ¯id System.out.println(&quot;æ¶ˆæ¯idä¸ºï¼š&quot; + envelope.getDeliveryTag()); //æ”¶åˆ°çš„æ¶ˆæ¯ System.out.println(&quot;æ¶ˆè´¹è€…1-æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot; + new String(body, &quot;utf-8&quot;)); Thread.sleep(1000); //ç¡®è®¤æ¶ˆæ¯ channel.basicAck(envelope.getDeliveryTag(), false); } catch (InterruptedException e) { e.printStackTrace(); } } }; //ç›‘å¬æ¶ˆæ¯ /** * å‚æ•°1ï¼šé˜Ÿåˆ—åç§° * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤ * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ */ channel.basicConsume(Producer.QUEUE_NAME, false, consumer); }} æ¶ˆè´¹è€…2 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package com.itheima.rabbitmq.work;import com.itheima.rabbitmq.util.ConnectionUtil;import com.rabbitmq.client.*;import java.io.IOException;public class Consumer2 { public static void main(String[] args) throws Exception { Connection connection = ConnectionUtil.getConnection(); // åˆ›å»ºé¢‘é“ Channel channel = connection.createChannel(); // å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ— /** * å‚æ•°1ï¼šé˜Ÿåˆ—åç§° * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ— * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥ * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ— * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•° */ channel.queueDeclare(Producer.QUEUE_NAME, true, false, false, null); //ä¸€æ¬¡åªèƒ½æ¥æ”¶å¹¶å¤„ç†ä¸€ä¸ªæ¶ˆæ¯ channel.basicQos(1); //åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç† DefaultConsumer consumer = new DefaultConsumer(channel){ @Override /** * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€) * properties å±æ€§ä¿¡æ¯ * body æ¶ˆæ¯ */ public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException { try { //è·¯ç”±key System.out.println(&quot;è·¯ç”±keyä¸ºï¼š&quot; + envelope.getRoutingKey()); //äº¤æ¢æœº System.out.println(&quot;äº¤æ¢æœºä¸ºï¼š&quot; + envelope.getExchange()); //æ¶ˆæ¯id System.out.println(&quot;æ¶ˆæ¯idä¸ºï¼š&quot; + envelope.getDeliveryTag()); //æ”¶åˆ°çš„æ¶ˆæ¯ System.out.println(&quot;æ¶ˆè´¹è€…2-æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot; + new String(body, &quot;utf-8&quot;)); Thread.sleep(1000); //ç¡®è®¤æ¶ˆæ¯ channel.basicAck(envelope.getDeliveryTag(), false); } catch (InterruptedException e) { e.printStackTrace(); } } }; //ç›‘å¬æ¶ˆæ¯ /** * å‚æ•°1ï¼šé˜Ÿåˆ—åç§° * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤ * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ */ channel.basicConsume(Producer.QUEUE_NAME, false, consumer); }} æµ‹è¯• å¯åŠ¨ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼Œç„¶åå†å¯åŠ¨ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼›åˆ°IDEAçš„ä¸¤ä¸ªæ¶ˆè´¹è€…å¯¹åº”çš„æ§åˆ¶å°æŸ¥çœ‹æ˜¯å¦ç«äº‰æ€§çš„æ¥æ”¶åˆ°æ¶ˆæ¯ã€‚ å°ç»“ åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­å¦‚æœæœ‰å¤šä¸ªæ¶ˆè´¹è€…ï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…ä¹‹é—´å¯¹äºåŒä¸€ä¸ªæ¶ˆæ¯çš„å…³ç³»æ˜¯ç«äº‰çš„å…³ç³»ã€‚ Publish/Subscribeå‘å¸ƒä¸è®¢é˜…æ¨¡å¼ æ¨¡å¼è¯´æ˜ï¼ˆç»™å–œæ¬¢çš„äººä¸€æ ·çš„ç³–ï¼‰ã€FANOUTã€‘ åœ¨è®¢é˜…æ¨¡å‹ä¸­ï¼Œå¤šäº†ä¸€ä¸ª Exchange è§’è‰²ï¼Œè€Œä¸”è¿‡ç¨‹ç•¥æœ‰å˜åŒ–ï¼š Pï¼šç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯è¦å‘é€æ¶ˆæ¯çš„ç¨‹åºï¼Œä½†æ˜¯ä¸å†å‘é€åˆ°é˜Ÿåˆ—ä¸­ï¼Œè€Œæ˜¯å‘ç»™Xï¼ˆäº¤æ¢æœºï¼‰ 123456789//1.åˆ›å»ºè¿æ¥å·¥å‚//2. è®¾ç½®å‚æ•°//3. åˆ›å»ºè¿æ¥ Connection//4. åˆ›å»ºChannel//5. åˆ›å»ºäº¤æ¢æœº//6. åˆ›å»ºé˜Ÿåˆ—//7. ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœº//8. å‘é€æ¶ˆæ¯//9. é‡Šæ”¾èµ„æº Cï¼šæ¶ˆè´¹è€…ï¼Œæ¶ˆæ¯çš„æ¥æ”¶è€…ï¼Œä¼šä¸€ç›´ç­‰å¾…æ¶ˆæ¯åˆ°æ¥ Queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¥æ”¶æ¶ˆæ¯ã€ç¼“å­˜æ¶ˆæ¯ Exchangeï¼šäº¤æ¢æœºï¼ˆXï¼‰ã€‚ä¸€æ–¹é¢ï¼Œæ¥æ”¶ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ã€‚å¦ä¸€æ–¹é¢ï¼ŒçŸ¥é“å¦‚ä½•å¤„ç†æ¶ˆæ¯ï¼Œä¾‹å¦‚é€’äº¤ç»™æŸä¸ªç‰¹åˆ«é˜Ÿåˆ—ã€é€’äº¤ç»™æ‰€æœ‰é˜Ÿåˆ—ã€æˆ–æ˜¯å°†æ¶ˆæ¯ä¸¢å¼ƒã€‚åˆ°åº•å¦‚ä½•æ“ä½œï¼Œå–å†³äºExchangeçš„ç±»å‹ã€‚Exchangeæœ‰å¸¸è§ä»¥ä¸‹3ç§ç±»å‹ï¼š Fanoutï¼šå¹¿æ’­ï¼Œå°†æ¶ˆæ¯äº¤ç»™æ‰€æœ‰ç»‘å®šåˆ°äº¤æ¢æœºçš„é˜Ÿåˆ— Directï¼šå®šå‘ï¼ŒæŠŠæ¶ˆæ¯äº¤ç»™ç¬¦åˆæŒ‡å®šrouting key çš„é˜Ÿåˆ— Topicï¼šé€šé…ç¬¦ï¼ŒæŠŠæ¶ˆæ¯äº¤ç»™ç¬¦åˆrouting patternï¼ˆè·¯ç”±æ¨¡å¼ï¼‰ çš„é˜Ÿåˆ— Exchangeï¼ˆäº¤æ¢æœºï¼‰åªè´Ÿè´£è½¬å‘æ¶ˆæ¯ï¼Œä¸å…·å¤‡å­˜å‚¨æ¶ˆæ¯çš„èƒ½åŠ›ï¼Œå› æ­¤å¦‚æœæ²¡æœ‰ä»»ä½•é˜Ÿåˆ—ä¸ Exchange ç»‘å®šï¼Œæˆ–è€…æ²¡æœ‰ç¬¦åˆè·¯ç”±è§„åˆ™çš„é˜Ÿåˆ—ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä¼šä¸¢å¤±ï¼ Routingè·¯ç”±å·¥ä½œæ¨¡å¼ æ¨¡å¼è¯´æ˜ï¼šç»™æ›´çˆ±çš„äººæ›´ç”œçš„ç³–ã€DIRECTã€‘ é˜Ÿåˆ—ä¸äº¤æ¢æœºçš„ç»‘å®šï¼Œä¸èƒ½æ˜¯ä»»æ„ç»‘å®šäº†ï¼Œè€Œæ˜¯è¦æŒ‡å®šä¸€ä¸ª RoutingKeyï¼ˆè·¯ç”±keyï¼‰ læ¶ˆæ¯çš„å‘é€æ–¹åœ¨å‘ Exchange å‘é€æ¶ˆæ¯æ—¶ï¼Œä¹Ÿå¿…é¡»æŒ‡å®šæ¶ˆæ¯çš„ RoutingKey lExchange ä¸å†æŠŠæ¶ˆæ¯äº¤ç»™æ¯ä¸€ä¸ªç»‘å®šçš„é˜Ÿåˆ—ï¼Œè€Œæ˜¯æ ¹æ®æ¶ˆæ¯çš„ Routing Key è¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰é˜Ÿåˆ—çš„Routingkey ä¸æ¶ˆæ¯çš„ Routing key å®Œå…¨ä¸€è‡´ï¼Œæ‰ä¼šæ¥æ”¶åˆ°æ¶ˆæ¯ lPï¼šç”Ÿäº§è€…ï¼Œå‘ Exchange å‘é€æ¶ˆæ¯ï¼Œå‘é€æ¶ˆæ¯æ—¶ï¼Œä¼šæŒ‡å®šä¸€ä¸ªrouting key lXï¼šExchangeï¼ˆäº¤æ¢æœºï¼‰ï¼Œæ¥æ”¶ç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œç„¶åæŠŠæ¶ˆæ¯é€’äº¤ç»™ä¸ routing key å®Œå…¨åŒ¹é…çš„é˜Ÿåˆ— lC1ï¼šæ¶ˆè´¹è€…ï¼Œå…¶æ‰€åœ¨é˜Ÿåˆ—æŒ‡å®šäº†éœ€è¦ routing key ä¸º error çš„æ¶ˆæ¯ lC2ï¼šæ¶ˆè´¹è€…ï¼Œå…¶æ‰€åœ¨é˜Ÿåˆ—æŒ‡å®šäº†éœ€è¦ routing key ä¸º infoã€errorã€warning çš„æ¶ˆæ¯ Routing æ¨¡å¼è¦æ±‚é˜Ÿåˆ—åœ¨ç»‘å®šäº¤æ¢æœºæ—¶è¦æŒ‡å®š routing keyï¼Œæ¶ˆæ¯ä¼šè½¬å‘åˆ°ç¬¦åˆ routing key çš„é˜Ÿåˆ— Topicsé€šé…ç¬¦å·¥ä½œæ¨¡å¼ æ¨¡å¼è¯´æ˜ï¼šç»™å§“æçš„äººç±»æ£‰èŠ±ç³–ï¼Œå§“æ¢çš„äººç±»é¸¡å±éº»ç³–ã€TOPICã€‘ Topicç±»å‹ä¸Directç›¸æ¯”ï¼Œéƒ½æ˜¯å¯ä»¥æ ¹æ®RoutingKeyæŠŠæ¶ˆæ¯è·¯ç”±åˆ°ä¸åŒçš„é˜Ÿåˆ—ã€‚åªä¸è¿‡Topicç±»å‹Exchangeå¯ä»¥è®©é˜Ÿåˆ—åœ¨ç»‘å®šRouting key çš„æ—¶å€™ä½¿ç”¨é€šé…ç¬¦ï¼ Routingkey ä¸€èˆ¬éƒ½æ˜¯æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯ç»„æˆï¼Œå¤šä¸ªå•è¯ä¹‹é—´ä»¥â€.â€åˆ†å‰²ï¼Œä¾‹å¦‚ï¼š item.insert é€šé…ç¬¦è§„åˆ™ï¼š #ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯ *ï¼šåŒ¹é…ä¸å¤šä¸å°‘æ°å¥½1ä¸ªè¯ ä¸¾ä¾‹ï¼š item.#ï¼šèƒ½å¤ŸåŒ¹é…item.insert.abc æˆ–è€… item.insert item.*ï¼šåªèƒ½åŒ¹é…item.insert å›¾è§£ï¼š çº¢è‰²Queueï¼šç»‘å®šçš„æ˜¯usa.# ï¼Œå› æ­¤å‡¡æ˜¯ä»¥ usa.å¼€å¤´çš„routing key éƒ½ä¼šè¢«åŒ¹é…åˆ° é»„è‰²Queueï¼šç»‘å®šçš„æ˜¯#.news ï¼Œå› æ­¤å‡¡æ˜¯ä»¥ .newsç»“å°¾çš„ routing key éƒ½ä¼šè¢«åŒ¹é… Spring-RabbitMQ è¯¦æƒ…è§ä»£ç  SpringBoot-RabbitMQ RabbitMQé«˜çº§ç‰¹æ€§ å‘ã€æ”¶ã€é™ã€æ—¶ã€è¾¾ã€ 1.1æ¶ˆæ¯å¯é æŠ•é€’ ã€å¯„çš„ç³–ä½ æ”¶åˆ°äº†å—ã€‘ confirmç¡®è®¤æ¨¡å¼ ã€æ¶ˆæ¯ä» producer åˆ° exchange æ— è®ºå¦‚ä½•ä¼šè¿”å›ä¸€ä¸ªconfirmCallbackã€‘ returné€€å›æ¨¡å¼ ã€æ¶ˆæ¯ä»produceråˆ° queue å¤±è´¥åˆ™ä¼šè¿”å›ä¸€ä¸ªreturnCallbackã€‘ rabbitmqæ•´å„æ¶ˆæ¯æŠ•é€’çš„è·¯å¾„ä¸ºï¼š profucer-----ã€‹rabbitmq broker----ã€‹exchange-----ã€‹queue----ã€‹consumer è®¾ç½®ConnectionFactoryçš„publisher-confirm=&quot;true&quot; å¼€å¯ç¡®è®¤æ¨¡å¼ ä½¿ç”¨rabbitTemplate.setConfirmCallbackè®¾ç½®å›è°ƒå‡½æ•°ã€‚å½“æ¶ˆæ¯å‘é€åˆ°exchangeåå›è°ƒconfirmæ–¹æ³•ã€‚åœ¨æ–¹æ³•ä¸­åˆ¤æ–­trueï¼Œåˆ™å‘é€æˆåŠŸï¼Œåä¹‹å¤±è´¥ï¼Œéœ€è¦å¤„ç† è®¾ç½®ConnectionFactoryçš„publisher-returns=&quot;true&quot; å¼€å¯é€€å›æ¨¡å¼ ä½¿ç”¨rabbitTemplate.setReturnCallbackè®¾ç½®å›è°ƒå‡½æ•°ã€‚å½“æ¶ˆæ¯ä»exchangeè·¯ç”±åˆ°queueå¤±è´¥åï¼Œå¦‚æœè®¾ç½®äº†rabbitTemplate.setMandatory(true)å‚æ•°ï¼Œåˆ™ä¼šå°†æ¶ˆæ¯é€€å›ç»™producerã€‚å¹¶æ‰§è¡Œå›è°ƒå‡½æ•°returnedMessageã€‚ åœ¨RabbitMQä¸­ä¹Ÿæä¾›äº†äº‹ç‰©æœºåˆ¶ï¼Œä½†æ˜¯æ€§èƒ½è¾ƒå·®ã€‚ 1.2Consumer ACK ã€æ”¶åˆ°ç³–ç»™ä½ æ€ä¹ˆå›å¤ã€‘ ackæŒ‡acknowledgeï¼Œç¡®è®¤ã€‚è¡¨ç¤ºæ¶ˆè´¹ç«¯æ”¶åˆ°æ¶ˆæ¯åçš„ç¡®è®¤æ–¹å¼ ä¸‰ç§ç¡®è®¤æ–¹å¼ï¼š â€‹ è‡ªåŠ¨ç¡®è®¤ï¼šacknowledge=&quot;none&quot;ã€ä¸šåŠ¡å‡ºé—®é¢˜ä¹Ÿä¼šå›å¤æ”¶åˆ°ã€‘ â€‹ æ‰‹åŠ¨ç¡®è®¤ï¼šacknowledge=&quot;manual&quot;ã€ç­‰ä¸šåŠ¡å¤„ç†æ²¡é—®é¢˜åå›å¤æ”¶åˆ°ï¼Œæœ‰é—®é¢˜å¯å¤„ç†ã€‘ â€‹ æ ¹æ®å¼‚å¸¸æƒ…å†µç¡®è®¤ï¼šacknowledge=&quot;auto&quot; â€‹ è‡ªåŠ¨ç¡®è®¤æ¶ˆæ¯è¢«consumeræ¥æ”¶åˆ°ï¼Œåˆ™è‡ªåŠ¨ç¡®è®¤ï¼Œå¹¶å°†å“åº”messageä»ç¼“å­˜ä¸­ç§»é™¤ï¼Œå®é™…ä¸šåŠ¡ä¸­å°ç»†èŠ‚å—åˆ°ï¼Œä¸šåŠ¡å‡ºç°å¼‚å¸¸ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä¼šä¸¢å¤±ï¼Œå¦‚æœæ˜¯è®¾ç½®çš„æ‰‹åŠ¨ç¡®è®¤æ–¹å¼ï¼Œåˆ™éœ€è¦ä¸šåŠ¡å¤„ç†æˆåŠŸåï¼Œè°ƒç”¨channel.basicAck(),æ‰‹åŠ¨ç­¾æ”¶ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ï¼Œåˆ™è°ƒç”¨channel.basicNackï¼ˆï¼‰æ–¹æ³•ï¼Œè®©å…¶è‡ªåŠ¨é‡å‘æ¶ˆæ¯ã€‚ 1234* 1. è®¾ç½®æ‰‹åŠ¨ç­¾æ”¶ã€‚acknowledge=&quot;manual&quot;* 2. è®©ç›‘å¬å™¨ç±»å®ç°ChannelAwareMessageListeneræ¥å£* 3. å¦‚æœæ¶ˆæ¯æˆåŠŸå¤„ç†ï¼Œåˆ™è°ƒç”¨channelçš„ basicAck()ç­¾æ”¶* 4. å¦‚æœæ¶ˆæ¯å¤„ç†å¤±è´¥ï¼Œåˆ™è°ƒç”¨channelçš„basicNack()æ‹’ç»ç­¾æ”¶ï¼Œbrokeré‡æ–°å‘é€ç»™consumer 1.3æ¶ˆè´¹ç«¯é™æµqos ã€æˆ‘æ¯æ¬¡åªæ”¶1000é¢—ç³–ã€‘ 12341. ç¡®ä¿ackæœºåˆ¶ä¸ºæ‰‹åŠ¨ç¡®è®¤ã€‚2. listener-containeré…ç½®å±æ€§ perfetch = 1,è¡¨ç¤ºæ¶ˆè´¹ç«¯æ¯æ¬¡ä»mqæ‹‰å»ä¸€æ¡æ¶ˆæ¯æ¥æ¶ˆè´¹ï¼Œç›´åˆ°æ‰‹åŠ¨ç¡®è®¤æ¶ˆè´¹å®Œæ¯•åï¼Œæ‰ä¼šç»§ç»­æ‹‰å»ä¸‹ä¸€æ¡æ¶ˆæ¯ã€‚ &lt;rabbit:listener-container connection-factory=&quot;connectionFactory&quot; acknowledge=&quot;manual&quot; prefetch=&quot;1&quot; &gt; 1.4TTL ã€ç³–æ”¾å¿«é€’ç«™åå¹´å°±ä¸èƒ½åƒäº†ã€‘ 1234567* TTL:è¿‡æœŸæ—¶é—´* 1. é˜Ÿåˆ—ç»Ÿä¸€è¿‡æœŸ* 2. æ¶ˆæ¯å•ç‹¬è¿‡æœŸ** å¦‚æœè®¾ç½®äº†æ¶ˆæ¯çš„è¿‡æœŸæ—¶é—´ï¼Œä¹Ÿè®¾ç½®äº†é˜Ÿåˆ—çš„è¿‡æœŸæ—¶é—´ï¼Œå®ƒä»¥æ—¶é—´çŸ­çš„ä¸ºå‡†ã€‚* é˜Ÿåˆ—è¿‡æœŸåï¼Œä¼šå°†é˜Ÿåˆ—æ‰€æœ‰æ¶ˆæ¯å…¨éƒ¨ç§»é™¤ã€‚* æ¶ˆæ¯è¿‡æœŸåï¼Œåªæœ‰æ¶ˆæ¯åœ¨é˜Ÿåˆ—é¡¶ç«¯ï¼Œæ‰ä¼šåˆ¤æ–­å…¶æ˜¯å¦è¿‡æœŸ(ç§»é™¤æ‰) 1.5æ­»ä¿¡é˜Ÿåˆ— ã€ä¸å¥½åƒçš„ç³–éƒ½ç»™å…¶ä»–äººå§ã€‘ æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDXLï¼‰ã€‚Dead Letter Exchangeï¼ˆæ­»ä¿¡é˜Ÿåˆ—äº¤æ¢æœºï¼‰ï¼Œå½“æ¶ˆæ¯æˆä¸ºDead Messageåï¼Œå¯ä»¥è¢«é‡æ–°å‘é€åˆ°å¦å¤–ä¸€ä¸ªäº¤æ¢æœºï¼Œè¿™ä¸ªäº¤æ¢æœºå°±æ˜¯DEXã€‚æ­»ä¿¡é˜Ÿåˆ—å’Œæ­»ä¿¡äº¤æ¢æœºå’Œæ™®é€šçš„æ²¡æœ‰åŒºåˆ«ã€‚ é—®é¢˜ï¼š 1.æ¶ˆæ¯ä»€ä¹ˆæ—¶å€™æˆä¸ºæ­»ä¿¡? æ¶ˆæ¯æˆä¸ºæ­»ä¿¡çš„ä¸‰ç§æƒ…å†µï¼š 1.é˜Ÿåˆ—æ¶ˆæ¯çš„é•¿åº¦è¾¾åˆ°é™åˆ¶ 2.æ¶ˆè´¹è€…æ‹’æ”¶æ¶ˆè´¹æ¶ˆæ¯ï¼ŒbasicNack/basicRejectï¼Œå¹¶ä¸”ä¸æŠŠæ¶ˆæ¯é‡æ–°æ”¾å…¥åŸç›®æ ‡é˜Ÿåˆ—ï¼Œrequeue=false 3.åŸé˜Ÿåˆ—å­˜åœ¨æ¶ˆæ¯è¿‡æœŸè®¾ç½®ï¼Œæ¶ˆæ¯è¾¾è¶…æ—¶é—´æœªè¢«æ¶ˆè´¹ï¼› 2.é˜Ÿåˆ—å¦‚ä½•ä¸DEXç»‘å®šï¼Ÿ 1.6å»¶è¿Ÿé˜Ÿåˆ— ã€æˆ‘å¦ˆå«æˆ‘ä¸‰ååˆ†é’Ÿåæ‰èƒ½åƒè¿™é¢—ç³–ã€‘ æ¶ˆæ¯è¿›å…¥é˜Ÿåˆ—åä¸ä¼šè¢«ç«‹å³è¢«æ¶ˆè´¹ï¼Œåªæœ‰è¾¾åˆ°æŒ‡å®šæ—¶é—´åï¼Œæ‰ä¼šè¢«æ¶ˆè´¹ã€‚ éœ€æ±‚ï¼š â€‹ 1.ä¸‹å•åä¸‰ååˆ†é’Ÿæœªæ”¯ä»˜ï¼Œå–æ¶ˆè®¢å•ï¼Œå›æ»šåº“å­˜ â€‹ 2.æ–°ç”¨æˆ·æ³¨å†Œ7å¤©åï¼Œå‘é€çŸ­ä¿¡é—®å€™ å®ç°æ–¹å¼ â€‹ 1.å®šæ—¶å™¨ï¼ˆæœ‰å»¶è¿Ÿï¼Œå¯¹æ•°æ®åº“æœ‰å½±å“ï¼‰ â€‹ 2.å»¶è¿Ÿé˜Ÿåˆ—ï¼ˆMQä¸­æœªç›´æ¥æä¾›å»¶è¿Ÿé˜Ÿåˆ—ï¼ŒDLX+TTLå®ç°ï¼‰ 1.7æ—¥å¿—ä¸ç›‘æ§ RabbitMQé»˜è®¤æ—¥å¿—å­˜æ”¾è·¯å¾„ï¼š /var/log/rabbitmq/rabbit@xxx.log æ—¥å¿—åŒ…å«äº†RabbitMQçš„ç‰ˆæœ¬å·ã€Erlangçš„ç‰ˆæœ¬å·ã€RabbitMQæœåŠ¡èŠ‚ç‚¹åç§°ã€cookieçš„hashå€¼ã€RabbitMQé…ç½®æ–‡ä»¶åœ°å€ã€å†…å­˜é™åˆ¶ã€ç£ç›˜é™åˆ¶ã€é»˜è®¤è´¦æˆ·guestçš„åˆ›å»ºä»¥åŠæƒé™é…ç½®ç­‰ç­‰ã€‚ 123456789101112131415161718æŸ¥çœ‹é˜Ÿåˆ—# rabbitmqctl list_queuesæŸ¥çœ‹exchanges# rabbitmqctl list_exchangesæŸ¥çœ‹ç”¨æˆ·# rabbitmqctl list_usersæŸ¥çœ‹è¿æ¥# rabbitmqctl list_connectionsæŸ¥çœ‹æ¶ˆè´¹è€…ä¿¡æ¯# rabbitmqctl list_consumersæŸ¥çœ‹ç¯å¢ƒå˜é‡# rabbitmqctl environmentæŸ¥çœ‹æœªè¢«ç¡®è®¤çš„é˜Ÿåˆ—# rabbitmqctl list_queues name messages_unacknowledgedæŸ¥çœ‹å•ä¸ªé˜Ÿåˆ—çš„å†…å­˜ä½¿ç”¨# rabbitmqctl list_queues name memoryæŸ¥çœ‹å‡†å¤‡å°±ç»ªçš„é˜Ÿåˆ—# rabbitmqctl list_queues name messages_ready 1.8 æ¶ˆæ¯è¿½è¸ª åœ¨ä½¿ç”¨ä»»ä½•æ¶ˆæ¯ä¸­é—´ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œéš¾å…ä¼šå‡ºç°æŸæ¡æ¶ˆæ¯å¼‚å¸¸ä¸¢å¤±çš„æƒ…å†µã€‚å¯¹äºRabbitMQè€Œè¨€ï¼Œå¯èƒ½æ˜¯å› ä¸ºç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…ä¸RabbitMQæ–­å¼€äº†è¿æ¥ï¼Œè€Œå®ƒä»¬ä¸RabbitMQåˆé‡‡ç”¨äº†ä¸åŒçš„ç¡®è®¤æœºåˆ¶ï¼›ä¹Ÿæœ‰å¯èƒ½æ˜¯å› ä¸ºäº¤æ¢å™¨ä¸é˜Ÿåˆ—ä¹‹é—´ä¸åŒçš„è½¬å‘ç­–ç•¥ï¼›ç”šè‡³æ˜¯äº¤æ¢å™¨å¹¶æ²¡æœ‰ä¸ä»»ä½•é˜Ÿåˆ—è¿›è¡Œç»‘å®šï¼Œç”Ÿäº§è€…åˆä¸æ„ŸçŸ¥æˆ–è€…æ²¡æœ‰é‡‡å–ç›¸åº”çš„æªæ–½ï¼›å¦å¤–RabbitMQæœ¬èº«çš„é›†ç¾¤ç­–ç•¥ä¹Ÿå¯èƒ½å¯¼è‡´æ¶ˆæ¯çš„ä¸¢å¤±ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦æœ‰ä¸€ä¸ªè¾ƒå¥½çš„æœºåˆ¶è·Ÿè¸ªè®°å½•æ¶ˆæ¯çš„æŠ•é€’è¿‡ç¨‹ï¼Œä»¥æ­¤ååŠ©å¼€å‘å’Œè¿ç»´äººå‘˜è¿›è¡Œé—®é¢˜çš„å®šä½ã€‚ åœ¨RabbitMQä¸­å¯ä»¥ä½¿ç”¨Firehoseå’Œrabbitmq_tracingæ’ä»¶åŠŸèƒ½æ¥å®ç°æ¶ˆæ¯è¿½è¸ªã€‚ Firehose firehoseçš„æœºåˆ¶æ˜¯å°†ç”Ÿäº§è€…æŠ•é€’ç»™rabbitmqçš„æ¶ˆæ¯ï¼ŒrabbitmqæŠ•é€’ç»™æ¶ˆè´¹è€…çš„æ¶ˆæ¯æŒ‰ç…§æŒ‡å®šçš„æ ¼å¼å‘é€åˆ°é»˜è®¤çš„exchangeä¸Šã€‚è¿™ä¸ªé»˜è®¤çš„exchangeçš„åç§°ä¸ºamq.rabbitmq.traceï¼Œå®ƒæ˜¯ä¸€ä¸ªtopicç±»å‹çš„exchangeã€‚å‘é€åˆ°è¿™ä¸ªexchangeä¸Šçš„æ¶ˆæ¯çš„routing keyä¸º publish.exchangename å’Œ deliver.queuenameã€‚å…¶ä¸­exchangenameå’Œqueuenameä¸ºå®é™…exchangeå’Œqueueçš„åç§°ï¼Œåˆ†åˆ«å¯¹åº”ç”Ÿäº§è€…æŠ•é€’åˆ°exchangeçš„æ¶ˆæ¯ï¼Œå’Œæ¶ˆè´¹è€…ä»queueä¸Šè·å–çš„æ¶ˆæ¯ã€‚ æ³¨æ„ï¼šæ‰“å¼€ trace ä¼šå½±å“æ¶ˆæ¯å†™å…¥åŠŸèƒ½ï¼Œé€‚å½“æ‰“å¼€åè¯·å…³é—­ã€‚ rabbitmqctl trace_onï¼šå¼€å¯Firehoseå‘½ä»¤ rabbitmqctl trace_offï¼šå…³é—­Firehoseå‘½ä»¤ rabbitmq_tracing rabbitmq_tracingå’ŒFirehoseåœ¨å®ç°ä¸Šå¦‚å‡ºä¸€è¾™ï¼Œåªä¸è¿‡rabbitmq_tracingçš„æ–¹å¼æ¯”Firehoseå¤šäº†ä¸€å±‚GUIçš„åŒ…è£…ï¼Œæ›´å®¹æ˜“ä½¿ç”¨å’Œç®¡ç†ã€‚ å¯ç”¨æ’ä»¶ï¼šrabbitmq-plugins enable rabbitmq_tracing åº”ç”¨é—®é¢˜ 1.æ¶ˆæ¯å¯é æ€§ä¿éšœ------æ¶ˆæ¯è¡¥å¿ 2.æ¶ˆæ¯å¹‚ç­‰æ€§ä¿éšœ-----ä¹è§‚é”æœºåˆ¶ å¹‚ç­‰æ€§æŒ‡ä¸€æ¬¡å’Œå¤šæ¬¡è¯·æ±‚æŸä¸€ä¸ªèµ„æºï¼Œå¯¹äºèµ„æºæœ¬èº«åº”è¯¥å…·æœ‰åŒæ ·çš„ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶ä»»æ„å¤šæ¬¡æ‰§è¡Œå¯¹èµ„æºæœ¬èº«æ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚ åœ¨MQä¸­æŒ‡ï¼Œæ¶ˆè´¹å¤šæ¡ç›¸åŒçš„æ¶ˆæ¯ï¼Œå¾—åˆ°ä¸æ¶ˆè´¹è¯¥æ¶ˆæ¯ä¸€æ¬¡ç›¸åŒçš„ç»“æœã€‚ 3.RabbitMQé›†ç¾¤æ­å»º æ‘˜è¦ï¼šå®é™…ç”Ÿäº§åº”ç”¨ä¸­éƒ½ä¼šé‡‡ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„é›†ç¾¤æ–¹æ¡ˆï¼Œå¦‚æœé€‰æ‹©RabbitMQé‚£ä¹ˆæœ‰å¿…è¦äº†è§£ä¸‹å®ƒçš„é›†ç¾¤æ–¹æ¡ˆåŸç† ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœåªæ˜¯ä¸ºäº†å­¦ä¹ RabbitMQæˆ–è€…éªŒè¯ä¸šåŠ¡å·¥ç¨‹çš„æ­£ç¡®æ€§é‚£ä¹ˆåœ¨æœ¬åœ°ç¯å¢ƒæˆ–è€…æµ‹è¯•ç¯å¢ƒä¸Šä½¿ç”¨å…¶å•å®ä¾‹éƒ¨ç½²å°±å¯ä»¥äº†ï¼Œä½†æ˜¯å‡ºäºMQä¸­é—´ä»¶æœ¬èº«çš„å¯é æ€§ã€å¹¶å‘æ€§ã€ååé‡å’Œæ¶ˆæ¯å †ç§¯èƒ½åŠ›ç­‰é—®é¢˜çš„è€ƒè™‘ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸Šä¸€èˆ¬éƒ½ä¼šè€ƒè™‘ä½¿ç”¨RabbitMQçš„é›†ç¾¤æ–¹æ¡ˆã€‚ 3.1 é›†ç¾¤æ–¹æ¡ˆçš„åŸç† RabbitMQè¿™æ¬¾æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶äº§å“æœ¬èº«æ˜¯åŸºäºErlangç¼–å†™ï¼ŒErlangè¯­è¨€å¤©ç”Ÿå…·å¤‡åˆ†å¸ƒå¼ç‰¹æ€§ï¼ˆé€šè¿‡åŒæ­¥Erlangé›†ç¾¤å„èŠ‚ç‚¹çš„magic cookieæ¥å®ç°ï¼‰ã€‚å› æ­¤ï¼ŒRabbitMQå¤©ç„¶æ”¯æŒClusteringã€‚è¿™ä½¿å¾—RabbitMQæœ¬èº«ä¸éœ€è¦åƒActiveMQã€Kafkaé‚£æ ·é€šè¿‡ZooKeeperåˆ†åˆ«æ¥å®ç°HAæ–¹æ¡ˆå’Œä¿å­˜é›†ç¾¤çš„å…ƒæ•°æ®ã€‚é›†ç¾¤æ˜¯ä¿è¯å¯é æ€§çš„ä¸€ç§æ–¹å¼ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡æ°´å¹³æ‰©å±•ä»¥è¾¾åˆ°å¢åŠ æ¶ˆæ¯ååé‡èƒ½åŠ›çš„ç›®çš„ã€‚ 3.2 å•æœºå¤šå®ä¾‹éƒ¨ç½² ç”±äºæŸäº›å› ç´ çš„é™åˆ¶ï¼Œæœ‰æ—¶å€™ä½ ä¸å¾—ä¸åœ¨ä¸€å°æœºå™¨ä¸Šå»æ­å»ºä¸€ä¸ªrabbitmqé›†ç¾¤ï¼Œè¿™ä¸ªæœ‰ç‚¹ç±»ä¼¼zookeeperçš„å•æœºç‰ˆã€‚çœŸå®ç”Ÿæˆç¯å¢ƒè¿˜æ˜¯è¦é…æˆå¤šæœºé›†ç¾¤çš„ã€‚æœ‰å…³æ€ä¹ˆé…ç½®å¤šæœºé›†ç¾¤çš„å¯ä»¥å‚è€ƒå…¶ä»–çš„èµ„æ–™ï¼Œè¿™é‡Œä¸»è¦è®ºè¿°å¦‚ä½•åœ¨å•æœºä¸­é…ç½®å¤šä¸ªrabbitmqå®ä¾‹ã€‚ ä¸»è¦å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://www.rabbitmq.com/clustering.html é¦–å…ˆç¡®ä¿RabbitMQè¿è¡Œæ²¡æœ‰é—®é¢˜ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859[root@super ~]# rabbitmqctl statusStatus of node rabbit@super ...[{pid,10232}, {running_applications, [{rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;3.6.5&quot;}, {rabbitmq_web_dispatch,&quot;RabbitMQ Web Dispatcher&quot;,&quot;3.6.5&quot;}, {webmachine,&quot;webmachine&quot;,&quot;1.10.3&quot;}, {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;2.13.1&quot;}, {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;3.6.5&quot;}, {rabbit,&quot;RabbitMQ&quot;,&quot;3.6.5&quot;}, {os_mon,&quot;CPO CXC 138 46&quot;,&quot;2.4&quot;}, {syntax_tools,&quot;Syntax tools&quot;,&quot;1.7&quot;}, {inets,&quot;INETS CXC 138 49&quot;,&quot;6.2&quot;}, {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;3.6.5&quot;}, {rabbit_common,[],&quot;3.6.5&quot;}, {ssl,&quot;Erlang/OTP SSL application&quot;,&quot;7.3&quot;}, {public_key,&quot;Public key infrastructure&quot;,&quot;1.1.1&quot;}, {asn1,&quot;The Erlang ASN1 compiler version 4.0.2&quot;,&quot;4.0.2&quot;}, {ranch,&quot;Socket acceptor pool for TCP protocols.&quot;,&quot;1.2.1&quot;}, {mnesia,&quot;MNESIA CXC 138 12&quot;,&quot;4.13.3&quot;}, {compiler,&quot;ERTS CXC 138 10&quot;,&quot;6.0.3&quot;}, {crypto,&quot;CRYPTO&quot;,&quot;3.6.3&quot;}, {xmerl,&quot;XML parser&quot;,&quot;1.3.10&quot;}, {sasl,&quot;SASL CXC 138 11&quot;,&quot;2.7&quot;}, {stdlib,&quot;ERTS CXC 138 10&quot;,&quot;2.8&quot;}, {kernel,&quot;ERTS CXC 138 10&quot;,&quot;4.2&quot;}]}, {os,{unix,linux}}, {erlang_version, &quot;Erlang/OTP 18 [erts-7.3] [source] [64-bit] [async-threads:64] [hipe] [kernel-poll:true]\\n&quot;}, {memory, [{total,56066752}, {connection_readers,0}, {connection_writers,0}, {connection_channels,0}, {connection_other,2680}, {queue_procs,268248}, {queue_slave_procs,0}, {plugins,1131936}, {other_proc,18144280}, {mnesia,125304}, {mgmt_db,921312}, {msg_index,69440}, {other_ets,1413664}, {binary,755736}, {code,27824046}, {atom,1000601}, {other_system,4409505}]}, {alarms,[]}, {listeners,[{clustering,25672,&quot;::&quot;},{amqp,5672,&quot;::&quot;}]}, {vm_memory_high_watermark,0.4}, {vm_memory_limit,411294105}, {disk_free_limit,50000000}, {disk_free,13270233088}, {file_descriptors, [{total_limit,924},{total_used,6},{sockets_limit,829},{sockets_used,0}]}, {processes,[{limit,1048576},{used,262}]}, {run_queue,0}, {uptime,43651}, {kernel,{net_ticktime,60}}] åœæ­¢rabbitmqæœåŠ¡ 123[root@super sbin]# service rabbitmq-server stopStopping rabbitmq-server: rabbitmq-server. å¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼š 12345678910[root@super sbin]# RABBITMQ_NODE_PORT=5673 RABBITMQ_NODENAME=rabbit1 rabbitmq-server start RabbitMQ 3.6.5. Copyright (C) 2007-2016 Pivotal Software, Inc. ## ## Licensed under the MPL. See http://www.rabbitmq.com/ ## ## ########## Logs: /var/log/rabbitmq/rabbit1.log ###### ## /var/log/rabbitmq/rabbit1-sasl.log ########## Starting broker... completed with 6 plugins. å¯åŠ¨ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼š webç®¡ç†æ’ä»¶ç«¯å£å ç”¨,æ‰€ä»¥è¿˜è¦æŒ‡å®šå…¶webæ’ä»¶å ç”¨çš„ç«¯å£å·ã€‚ 1234567891011[root@super ~]# RABBITMQ_NODE_PORT=5674 RABBITMQ_SERVER_START_ARGS=&quot;-rabbitmq_management listener [{port,15674}]&quot; RABBITMQ_NODENAME=rabbit2 rabbitmq-server start RabbitMQ 3.6.5. Copyright (C) 2007-2016 Pivotal Software, Inc. ## ## Licensed under the MPL. See http://www.rabbitmq.com/ ## ## ########## Logs: /var/log/rabbitmq/rabbit2.log ###### ## /var/log/rabbitmq/rabbit2-sasl.log ########## Starting broker... completed with 6 plugins. ç»“æŸå‘½ä»¤ï¼š 12rabbitmqctl -n rabbit1 stoprabbitmqctl -n rabbit2 stop rabbit1æ“ä½œä½œä¸ºä¸»èŠ‚ç‚¹ï¼š 1234567[root@super ~]# rabbitmqctl -n rabbit1 stop_app Stopping node rabbit1@super ...[root@super ~]# rabbitmqctl -n rabbit1 reset Resetting node rabbit1@super ...[root@super ~]# rabbitmqctl -n rabbit1 start_appStarting node rabbit1@super ...[root@super ~]# rabbit2æ“ä½œä¸ºä»èŠ‚ç‚¹ï¼š 123456789[root@super ~]# rabbitmqctl -n rabbit2 stop_appStopping node rabbit2@super ...[root@super ~]# rabbitmqctl -n rabbit2 resetResetting node rabbit2@super ...[root@super ~]# rabbitmqctl -n rabbit2 join_cluster rabbit1@'super' ###''å†…æ˜¯ä¸»æœºåæ¢æˆè‡ªå·±çš„Clustering node rabbit2@super with rabbit1@super ...[root@super ~]# rabbitmqctl -n rabbit2 start_appStarting node rabbit2@super ... æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼š 1234567[root@super ~]# rabbitmqctl cluster_status -n rabbit1Cluster status of node rabbit1@super ...[{nodes,[{disc,[rabbit1@super,rabbit2@super]}]}, {running_nodes,[rabbit2@super,rabbit1@super]}, {cluster_name,&lt;&lt;&quot;rabbit1@super&quot;&gt;&gt;}, {partitions,[]}, {alarms,[{rabbit2@super,[]},{rabbit1@super,[]}]}] webç›‘æ§ï¼š 3.3 é›†ç¾¤ç®¡ç† rabbitmqctl join_cluster {cluster_node} [â€“ram] å°†èŠ‚ç‚¹åŠ å…¥æŒ‡å®šé›†ç¾¤ä¸­ã€‚åœ¨è¿™ä¸ªå‘½ä»¤æ‰§è¡Œå‰éœ€è¦åœæ­¢RabbitMQåº”ç”¨å¹¶é‡ç½®èŠ‚ç‚¹ã€‚ rabbitmqctl cluster_status æ˜¾ç¤ºé›†ç¾¤çš„çŠ¶æ€ã€‚ rabbitmqctl change_cluster_node_type {disc|ram} ä¿®æ”¹é›†ç¾¤èŠ‚ç‚¹çš„ç±»å‹ã€‚åœ¨è¿™ä¸ªå‘½ä»¤æ‰§è¡Œå‰éœ€è¦åœæ­¢RabbitMQåº”ç”¨ã€‚ rabbitmqctl forget_cluster_node [â€“offline] å°†èŠ‚ç‚¹ä»é›†ç¾¤ä¸­åˆ é™¤ï¼Œå…è®¸ç¦»çº¿æ‰§è¡Œã€‚ rabbitmqctl update_cluster_nodes {clusternode} åœ¨é›†ç¾¤ä¸­çš„èŠ‚ç‚¹åº”ç”¨å¯åŠ¨å‰å’¨è¯¢clusternodeèŠ‚ç‚¹çš„æœ€æ–°ä¿¡æ¯ï¼Œå¹¶æ›´æ–°ç›¸åº”çš„é›†ç¾¤ä¿¡æ¯ã€‚è¿™ä¸ªå’Œjoin_clusterä¸åŒï¼Œå®ƒä¸åŠ å…¥é›†ç¾¤ã€‚è€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µï¼ŒèŠ‚ç‚¹Aå’ŒèŠ‚ç‚¹Béƒ½åœ¨é›†ç¾¤ä¸­ï¼Œå½“èŠ‚ç‚¹Aç¦»çº¿äº†ï¼ŒèŠ‚ç‚¹Cåˆå’ŒèŠ‚ç‚¹Bç»„æˆäº†ä¸€ä¸ªé›†ç¾¤ï¼Œç„¶åèŠ‚ç‚¹Båˆç¦»å¼€äº†é›†ç¾¤ï¼Œå½“Aé†’æ¥çš„æ—¶å€™ï¼Œå®ƒä¼šå°è¯•è”ç³»èŠ‚ç‚¹Bï¼Œä½†æ˜¯è¿™æ ·ä¼šå¤±è´¥ï¼Œå› ä¸ºèŠ‚ç‚¹Bå·²ç»ä¸åœ¨é›†ç¾¤ä¸­äº†ã€‚ rabbitmqctl cancel_sync_queue [-p vhost] {queue} å–æ¶ˆé˜Ÿåˆ—queueåŒæ­¥é•œåƒçš„æ“ä½œã€‚ rabbitmqctl set_cluster_name {name} è®¾ç½®é›†ç¾¤åç§°ã€‚é›†ç¾¤åç§°åœ¨å®¢æˆ·ç«¯è¿æ¥æ—¶ä¼šé€šæŠ¥ç»™å®¢æˆ·ç«¯ã€‚Federationå’ŒShovelæ’ä»¶ä¹Ÿä¼šæœ‰ç”¨åˆ°é›†ç¾¤åç§°çš„åœ°æ–¹ã€‚é›†ç¾¤åç§°é»˜è®¤æ˜¯é›†ç¾¤ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„åç§°ï¼Œé€šè¿‡è¿™ä¸ªå‘½ä»¤å¯ä»¥é‡æ–°è®¾ç½®ã€‚ 3.4 RabbitMQé•œåƒé›†ç¾¤é…ç½® ä¸Šé¢å·²ç»å®ŒæˆRabbitMQé»˜è®¤é›†ç¾¤æ¨¡å¼ï¼Œä½†å¹¶ä¸ä¿è¯é˜Ÿåˆ—çš„é«˜å¯ç”¨æ€§ï¼Œå°½ç®¡äº¤æ¢æœºã€ç»‘å®šè¿™äº›å¯ä»¥å¤åˆ¶åˆ°é›†ç¾¤é‡Œçš„ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯é˜Ÿåˆ—å†…å®¹ä¸ä¼šå¤åˆ¶ã€‚è™½ç„¶è¯¥æ¨¡å¼è§£å†³ä¸€é¡¹ç›®ç»„èŠ‚ç‚¹å‹åŠ›ï¼Œä½†é˜Ÿåˆ—èŠ‚ç‚¹å®•æœºç›´æ¥å¯¼è‡´è¯¥é˜Ÿåˆ—æ— æ³•åº”ç”¨ï¼Œåªèƒ½ç­‰å¾…é‡å¯ï¼Œæ‰€ä»¥è¦æƒ³åœ¨é˜Ÿåˆ—èŠ‚ç‚¹å®•æœºæˆ–æ•…éšœä¹Ÿèƒ½æ­£å¸¸åº”ç”¨ï¼Œå°±è¦å¤åˆ¶é˜Ÿåˆ—å†…å®¹åˆ°é›†ç¾¤é‡Œçš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¿…é¡»è¦åˆ›å»ºé•œåƒé˜Ÿåˆ—ã€‚ é•œåƒé˜Ÿåˆ—æ˜¯åŸºäºæ™®é€šçš„é›†ç¾¤æ¨¡å¼çš„ï¼Œç„¶åå†æ·»åŠ ä¸€äº›ç­–ç•¥ï¼Œæ‰€ä»¥ä½ è¿˜æ˜¯å¾—å…ˆé…ç½®æ™®é€šé›†ç¾¤ï¼Œç„¶åæ‰èƒ½è®¾ç½®é•œåƒé˜Ÿåˆ—ï¼Œæˆ‘ä»¬å°±ä»¥ä¸Šé¢çš„é›†ç¾¤æ¥ç€åšã€‚ è®¾ç½®çš„é•œåƒé˜Ÿåˆ—å¯ä»¥é€šè¿‡å¼€å¯çš„ç½‘é¡µçš„ç®¡ç†ç«¯Admin-&gt;Policiesï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤ã€‚ rabbitmqctl set_policy my_ha &quot;^&quot; '{&quot;ha-mode&quot;:&quot;all&quot;}' Name:ç­–ç•¥åç§° Patternï¼šåŒ¹é…çš„è§„åˆ™ï¼Œå¦‚æœæ˜¯åŒ¹é…æ‰€æœ‰çš„é˜Ÿåˆ—ï¼Œæ˜¯^. Definition:ä½¿ç”¨ha-modeæ¨¡å¼ä¸­çš„allï¼Œä¹Ÿå°±æ˜¯åŒæ­¥æ‰€æœ‰åŒ¹é…çš„é˜Ÿåˆ—ã€‚é—®å·é“¾æ¥å¸®åŠ©æ–‡æ¡£ã€‚ 3.5 è´Ÿè½½å‡è¡¡-HAProxy HAProxyæä¾›é«˜å¯ç”¨æ€§ã€è´Ÿè½½å‡è¡¡ä»¥åŠåŸºäºTCPå’ŒHTTPåº”ç”¨çš„ä»£ç†ï¼Œæ”¯æŒè™šæ‹Ÿä¸»æœºï¼Œå®ƒæ˜¯å…è´¹ã€å¿«é€Ÿå¹¶ä¸”å¯é çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ,åŒ…æ‹¬Twitterï¼ŒRedditï¼ŒStackOverflowï¼ŒGitHubåœ¨å†…çš„å¤šå®¶çŸ¥åäº’è”ç½‘å…¬å¸åœ¨ä½¿ç”¨ã€‚HAProxyå®ç°äº†ä¸€ç§äº‹ä»¶é©±åŠ¨ã€å•ä¸€è¿›ç¨‹æ¨¡å‹ï¼Œæ­¤æ¨¡å‹æ”¯æŒéå¸¸å¤§çš„å¹¶å‘è¿æ¥æ•°ã€‚ 3.5.1 å®‰è£…HAProxy 12345678910111213141516//ä¸‹è½½ä¾èµ–åŒ…yum install gcc vim wget//ä¸Šä¼ haproxyæºç åŒ…//è§£å‹tar -zxvf haproxy-1.6.5.tar.gz -C /usr/local//è¿›å…¥ç›®å½•ã€è¿›è¡Œç¼–è¯‘ã€å®‰è£…cd /usr/local/haproxy-1.6.5make TARGET=linux31 PREFIX=/usr/local/haproxymake install PREFIX=/usr/local/haproxymkdir /etc/haproxy//èµ‹æƒgroupadd -r -g 149 haproxyuseradd -g haproxy -r -s /sbin/nologin -u 149 haproxy//åˆ›å»ºhaproxyé…ç½®æ–‡ä»¶mkdir /etc/haproxyvim /etc/haproxy/haproxy.cfg 3.5.2 é…ç½®HAProxy é…ç½®æ–‡ä»¶è·¯å¾„ï¼š/etc/haproxy/haproxy.cfg 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354#logging optionsglobal log 127.0.0.1 local0 info maxconn 5120 chroot /usr/local/haproxy uid 99 gid 99 daemon quiet nbproc 20 pidfile /var/run/haproxy.piddefaults log global mode tcp option tcplog option dontlognull retries 3 option redispatch maxconn 2000 contimeout 5s clitimeout 60s srvtimeout 15s #front-end IP for consumers and producterslisten rabbitmq_cluster bind 0.0.0.0:5672 mode tcp #balance url_param userid #balance url_param session_id check_post 64 #balance hdr(User-Agent) #balance hdr(host) #balance hdr(Host) use_domain_only #balance rdp-cookie #balance leastconn #balance source //ip balance roundrobin server node1 127.0.0.1:5673 check inter 5000 rise 2 fall 2 server node2 127.0.0.1:5674 check inter 5000 rise 2 fall 2listen stats bind 172.16.98.133:8100 mode http option httplog stats enable stats uri /rabbitmq-stats stats refresh 5s å¯åŠ¨HAproxyè´Ÿè½½ 123456/usr/local/haproxy/sbin/haproxy -f /etc/haproxy/haproxy.cfg//æŸ¥çœ‹haproxyè¿›ç¨‹çŠ¶æ€ps -ef | grep haproxyè®¿é—®å¦‚ä¸‹åœ°å€å¯¹mqèŠ‚ç‚¹è¿›è¡Œç›‘æ§http://172.16.98.133:8100/rabbitmq-stats ä»£ç ä¸­è®¿é—®mqé›†ç¾¤åœ°å€ï¼Œåˆ™å˜ä¸ºè®¿é—®haproxyåœ°å€:5672 å‚è€ƒæ–‡çŒ®ï¼šé»‘é©¬è§†é¢‘ç›¸å…³ç¬”è®°","link":"/2021/03/24/Draft/2021/RabbitMQ/"},{"title":"é­‘é­…å…ˆç”Ÿ | æœåŠ¡å™¨","text":"Linuxå¸¸ç”¨çŸ¥è¯†ã€æœåŠ¡å™¨é€‰æ‹©ã€æ­å»ºä¸ªäººç½‘ç›˜ã€JAVAå¼€å‘ç›¸å…³è½¯ä»¶é…ç½®ã€åšå®¢æ­å»ºã€åŸŸåé…ç½®ã€ç›¸å…³è½¯ä»¶æ¨èã€‚ Linux å¸¸ç”¨å‘½ä»¤ åŸºæœ¬ 1234567891011121314å…³æœº shutdown -h now ç«‹åˆ»å…³æœº shutdown -h 5 5åˆ†é’Ÿåå…³æœº poweroff ç«‹åˆ»å…³æœºé‡å¯ shutdown -r now ç«‹åˆ»é‡å¯ shutdown -r 5 5åˆ†é’Ÿåé‡å¯ reboot ç«‹åˆ»é‡å¯--helpå‘½ä»¤ shutdown --helpï¼š ifconfig --helpï¼šæŸ¥çœ‹ç½‘å¡ä¿¡æ¯manå‘½ä»¤ï¼ˆå‘½ä»¤è¯´æ˜ä¹¦ï¼‰ man shutdown æ³¨æ„ï¼šman shutdownæ‰“å¼€å‘½ä»¤è¯´æ˜ä¹¦ä¹‹åï¼Œä½¿ç”¨æŒ‰é”®qé€€å‡º æ–‡ä»¶ æ–°å»º touch æ–‡ä»¶å åˆ é™¤ rm -rf æ–‡ä»¶å ä¿®æ”¹ æ‰“å¼€ï¼švi/vim æ–‡ä»¶å i:åœ¨å…‰æ ‡æ‰€åœ¨å­—ç¬¦å‰å¼€å§‹æ’å…¥ a:åœ¨å…‰æ ‡æ‰€åœ¨å­—ç¬¦åå¼€å§‹æ’å…¥ o:åœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹é¢å¦èµ·ä¸€æ–°è¡Œæ’å…¥ ä¿å­˜æ–‡ä»¶ï¼š ç¬¬ä¸€æ­¥ï¼šESC è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ ç¬¬äºŒæ­¥ï¼š: è¿›å…¥åº•è¡Œæ¨¡å¼ ç¬¬ä¸‰æ­¥ï¼šwq ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘ å–æ¶ˆç¼–è¾‘ï¼š ç¬¬ä¸€æ­¥ï¼šESC è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ ç¬¬äºŒæ­¥ï¼š: è¿›å…¥åº•è¡Œæ¨¡å¼ ç¬¬ä¸‰æ­¥ï¼šq! æ’¤é”€æœ¬æ¬¡ä¿®æ”¹å¹¶é€€å‡ºç¼–è¾‘ 1) å‘½ä»¤è¡Œæ¨¡å¼command modeï¼‰ æ§åˆ¶å±å¹•å…‰æ ‡çš„ç§»åŠ¨ï¼Œå­—ç¬¦ã€å­—æˆ–è¡Œçš„åˆ é™¤ï¼ŒæŸ¥æ‰¾ï¼Œç§»åŠ¨å¤åˆ¶æŸåŒºæ®µåŠè¿›å…¥Insert modeä¸‹ï¼Œæˆ–è€…åˆ° last line modeã€‚ å‘½ä»¤è¡Œæ¨¡å¼ä¸‹çš„å¸¸ç”¨å‘½ä»¤ï¼š ã€1ã€‘æ§åˆ¶å…‰æ ‡ç§»åŠ¨ï¼šâ†‘ï¼Œâ†“ï¼Œj ã€2ã€‘åˆ é™¤å½“å‰è¡Œï¼šdd ã€3ã€‘æŸ¥æ‰¾ï¼š/å­—ç¬¦ ã€4ã€‘è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ši o a ã€5ã€‘è¿›å…¥åº•è¡Œæ¨¡å¼ï¼š: 2) ç¼–è¾‘æ¨¡å¼ï¼ˆInsert modeï¼‰ åªæœ‰åœ¨Insert modeä¸‹ï¼Œæ‰å¯ä»¥åšæ–‡å­—è¾“å…¥ï¼ŒæŒ‰ã€ŒESCã€é”®å¯å›åˆ°å‘½ä»¤è¡Œæ¨¡å¼ã€‚ ç¼–è¾‘æ¨¡å¼ä¸‹å¸¸ç”¨å‘½ä»¤ï¼š ã€1ã€‘ESC é€€å‡ºç¼–è¾‘æ¨¡å¼åˆ°å‘½ä»¤è¡Œæ¨¡å¼ï¼› 3) åº•è¡Œæ¨¡å¼ï¼ˆlast line modeï¼‰ å°†æ–‡ä»¶ä¿å­˜æˆ–é€€å‡ºviï¼Œä¹Ÿå¯ä»¥è®¾ç½®ç¼–è¾‘ç¯å¢ƒï¼Œå¦‚å¯»æ‰¾å­—ç¬¦ä¸²ã€åˆ—å‡ºè¡Œå·â€¦â€¦ç­‰ã€‚ åº•è¡Œæ¨¡å¼ä¸‹å¸¸ç”¨å‘½ä»¤ï¼š ã€1ã€‘é€€å‡ºç¼–è¾‘ï¼š :q ã€2ã€‘å¼ºåˆ¶é€€å‡ºï¼š :q! ã€3ã€‘ä¿å­˜å¹¶é€€å‡ºï¼š :wq æŸ¥çœ‹ catï¼šçœ‹æœ€åä¸€å± ç¤ºä¾‹ï¼šä½¿ç”¨catæŸ¥çœ‹/etc/sudo.confæ–‡ä»¶ï¼Œåªèƒ½æ˜¾ç¤ºæœ€åä¸€å±å†…å®¹ cat sudo.conf moreï¼šç™¾åˆ†æ¯”æ˜¾ç¤º ç¤ºä¾‹ï¼šä½¿ç”¨moreæŸ¥çœ‹/etc/sudo.confæ–‡ä»¶ï¼Œå¯ä»¥æ˜¾ç¤ºç™¾åˆ†æ¯”ï¼Œå›è½¦å¯ä»¥å‘ä¸‹ä¸€è¡Œï¼Œç©ºæ ¼å¯ä»¥å‘ä¸‹ä¸€é¡µï¼Œqå¯ä»¥é€€å‡ºæŸ¥çœ‹ more sudo.conf lessï¼šç¿»é¡µæŸ¥çœ‹ ç¤ºä¾‹ï¼šä½¿ç”¨lessæŸ¥çœ‹/etc/sudo.confæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨é”®ç›˜ä¸Šçš„PgUpå’ŒPgDnå‘ä¸Š å’Œå‘ä¸‹ç¿»é¡µï¼Œqç»“æŸæŸ¥çœ‹ less sudo.conf tailï¼šæŒ‡å®šè¡Œæ•°æˆ–è€…åŠ¨æ€æŸ¥çœ‹ ç¤ºä¾‹ï¼šä½¿ç”¨tail -10 æŸ¥çœ‹/etc/sudo.confæ–‡ä»¶çš„å10è¡Œï¼ŒCtrl+Cç»“æŸ tail -10 sudo.conf æƒé™ ç›®å½• å‹ç¼© æŸ¥æ‰¾ æƒé™ æ›´æ”¹æ–‡ä»¶å±æ€§ è¿›ç¨‹ ç³»ç»Ÿ ç½‘ç»œ éƒ¨ç½² Linuxç®€ä»‹ Linuxï¼Œå…¨ç§°GNU/Linuxï¼Œæ˜¯ä¸€ç§å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±»UNIXæ“ä½œç³»ç»Ÿ åº”ç”¨ Linuxå·¥å…· SecureCRT 7.3 rzä¸Šä¼ æ–‡ä»¶åˆ°å½“å‰ç›®å½• sz æ–‡ä»¶åä¸‹è½½ yum -y install bash-completionè‡ªåŠ¨è¡¥å…¨ tab å¯åŠ¨è¿‡ç¨‹ å†…æ ¸çš„å¼•å¯¼ã€‚ ç”µæº BIOSå¼€æœºè‡ªæ£€ï¼ŒæŒ‰ç…§BIOSä¸­è®¾ç½®çš„å¯åŠ¨è®¾å¤‡ï¼ˆé€šå¸¸æ˜¯ç¡¬ç›˜ï¼‰æ¥å¯åŠ¨ æ“ä½œç³»ç»Ÿæ¥ç®¡ç¡¬ä»¶ä»¥åï¼Œé¦–å…ˆè¯»å…¥ /boot ç›®å½•ä¸‹çš„å†…æ ¸æ–‡ä»¶ã€‚ è¿è¡Œ initã€‚ initç¨‹åºçš„ç±»å‹ SysV: init, CentOS 5ä¹‹å‰, é…ç½®æ–‡ä»¶ï¼š /etc/inittabã€‚ Upstart: init,CentOS 6, é…ç½®æ–‡ä»¶ï¼š /etc/inittab, /etc/init/*.confã€‚ Systemdï¼š systemd, CentOS 7,é…ç½®æ–‡ä»¶ï¼š /usr/lib/systemd/systemã€ /etc/systemd/systemã€‚ init è¿›ç¨‹æ˜¯ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹çš„èµ·ç‚¹ï¼Œä½ å¯ä»¥æŠŠå®ƒæ¯”æ‹Ÿæˆç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹çš„è€ç¥–å®—ï¼Œæ²¡æœ‰è¿™ä¸ªè¿›ç¨‹ï¼Œç³»ç»Ÿä¸­ä»»ä½•è¿›ç¨‹éƒ½ä¸ä¼šå¯åŠ¨ã€‚ init ç¨‹åºé¦–å…ˆæ˜¯éœ€è¦è¯»å–é…ç½®æ–‡ä»¶ /etc/inittabã€‚ è¿è¡Œçº§åˆ« ç¨‹åºéœ€è¦å¼€æœºå¯åŠ¨ã€‚å®ƒä»¬åœ¨Windowså«åš&quot;æœåŠ¡&quot;ï¼ˆserviceï¼‰ï¼Œåœ¨Linuxå°±å«åš&quot;å®ˆæŠ¤è¿›ç¨‹&quot;ï¼ˆdaemonï¼‰ã€‚ initè¿›ç¨‹çš„ä¸€å¤§ä»»åŠ¡ï¼Œå°±æ˜¯å»è¿è¡Œè¿™äº›å¼€æœºå¯åŠ¨çš„ç¨‹åºã€‚ ä½†æ˜¯ï¼Œä¸åŒçš„åœºåˆéœ€è¦å¯åŠ¨ä¸åŒçš„ç¨‹åºï¼Œæ¯”å¦‚ç”¨ä½œæœåŠ¡å™¨æ—¶ï¼Œéœ€è¦å¯åŠ¨Apacheï¼Œç”¨ä½œæ¡Œé¢å°±ä¸éœ€è¦ã€‚ Linuxå…è®¸ä¸ºä¸åŒçš„åœºåˆï¼Œåˆ†é…ä¸åŒçš„å¼€æœºå¯åŠ¨ç¨‹åºï¼Œè¿™å°±å«åš&quot;è¿è¡Œçº§åˆ«&quot;ï¼ˆrunlevelï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯åŠ¨æ—¶æ ¹æ®&quot;è¿è¡Œçº§åˆ«&quot;ï¼Œç¡®å®šè¦è¿è¡Œå“ªäº›ç¨‹åºã€‚ - è¿è¡Œçº§åˆ«0ï¼šç³»ç»ŸåœæœºçŠ¶æ€ï¼Œç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º0ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨ è¿è¡Œçº§åˆ«1ï¼šå•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œrootæƒé™ï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œç¦æ­¢è¿œç¨‹ç™»é™† è¿è¡Œçº§åˆ«2ï¼šå¤šç”¨æˆ·çŠ¶æ€(æ²¡æœ‰NFS) è¿è¡Œçº§åˆ«3ï¼šå®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€(æœ‰NFS)ï¼Œç™»é™†åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼ è¿è¡Œçº§åˆ«4ï¼šç³»ç»Ÿæœªä½¿ç”¨ï¼Œä¿ç•™ è¿è¡Œçº§åˆ«5ï¼šX11æ§åˆ¶å°ï¼Œç™»é™†åè¿›å…¥å›¾å½¢GUIæ¨¡å¼ è¿è¡Œçº§åˆ«6ï¼šç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨ ç³»ç»Ÿåˆå§‹åŒ–ã€‚ si::sysinit:/etc/rc.d/rc.sysinit å®ƒè°ƒç”¨æ‰§è¡Œäº†/etc/rc.d/rc.sysinitï¼Œè€Œrc.sysinitæ˜¯ä¸€ä¸ªbash shellçš„è„šæœ¬ï¼Œå®ƒä¸»è¦æ˜¯å®Œæˆä¸€äº›ç³»ç»Ÿåˆå§‹åŒ–çš„å·¥ä½œï¼Œrc.sysinitæ˜¯æ¯ä¸€ä¸ªè¿è¡Œçº§åˆ«éƒ½è¦é¦–å…ˆè¿è¡Œçš„é‡è¦è„šæœ¬ã€‚ å®ƒä¸»è¦å®Œæˆçš„å·¥ä½œæœ‰ï¼šæ¿€æ´»äº¤æ¢åˆ†åŒºï¼Œæ£€æŸ¥ç£ç›˜ï¼ŒåŠ è½½ç¡¬ä»¶æ¨¡å—ä»¥åŠå…¶å®ƒä¸€äº›éœ€è¦ä¼˜å…ˆæ‰§è¡Œä»»åŠ¡ã€‚ l5:5:wait:/etc/rc.d/rc 5 è¿™ä¸€è¡Œè¡¨ç¤ºä»¥5ä¸ºå‚æ•°è¿è¡Œ/etc/rc.d/rcï¼Œ/etc/rc.d/rcæ˜¯ä¸€ä¸ªShellè„šæœ¬ï¼Œå®ƒæ¥å—5ä½œä¸ºå‚æ•°ï¼Œå»æ‰§è¡Œ/etc/rc.d/rc5.d/ç›®å½•ä¸‹çš„æ‰€æœ‰çš„rcå¯åŠ¨è„šæœ¬ï¼Œ/etc/rc.d/rc5.d/ç›®å½•ä¸­çš„è¿™äº›å¯åŠ¨è„šæœ¬å®é™…ä¸Šéƒ½æ˜¯ä¸€äº›è¿æ¥æ–‡ä»¶ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„rcå¯åŠ¨è„šæœ¬ï¼ŒçœŸæ­£çš„rcå¯åŠ¨è„šæœ¬å®é™…ä¸Šéƒ½æ˜¯æ”¾åœ¨/etc/rc.d/init.d/ç›®å½•ä¸‹ã€‚ è€Œè¿™äº›rcå¯åŠ¨è„šæœ¬æœ‰ç€ç±»ä¼¼çš„ç”¨æ³•ï¼Œå®ƒä»¬ä¸€èˆ¬èƒ½æ¥å—startã€stopã€restartã€statusç­‰å‚æ•°ã€‚ /etc/rc.d/rc5.d/ä¸­çš„rcå¯åŠ¨è„šæœ¬é€šå¸¸æ˜¯Kæˆ–Så¼€å¤´çš„è¿æ¥æ–‡ä»¶ï¼Œå¯¹äºä»¥ S å¼€å¤´çš„å¯åŠ¨è„šæœ¬ï¼Œå°†ä»¥startå‚æ•°æ¥è¿è¡Œã€‚ è€Œå¦‚æœå‘ç°å­˜åœ¨ç›¸åº”çš„è„šæœ¬ä¹Ÿå­˜åœ¨Kæ‰“å¤´çš„è¿æ¥ï¼Œè€Œä¸”å·²ç»å¤„äºè¿è¡Œæ€äº†(ä»¥/var/lock/subsys/ä¸‹çš„æ–‡ä»¶ä½œä¸ºæ ‡å¿—)ï¼Œåˆ™å°†é¦–å…ˆä»¥stopä¸ºå‚æ•°åœæ­¢è¿™äº›å·²ç»å¯åŠ¨äº†çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œç„¶åå†é‡æ–°è¿è¡Œã€‚ è¿™æ ·åšæ˜¯ä¸ºäº†ä¿è¯æ˜¯å½“initæ”¹å˜è¿è¡Œçº§åˆ«æ—¶ï¼Œæ‰€æœ‰ç›¸å…³çš„å®ˆæŠ¤è¿›ç¨‹éƒ½å°†é‡å¯ã€‚ è‡³äºåœ¨æ¯ä¸ªè¿è¡Œçº§ä¸­å°†è¿è¡Œå“ªäº›å®ˆæŠ¤è¿›ç¨‹ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡chkconfigæˆ–setupä¸­çš„&quot;System Services&quot;æ¥è‡ªè¡Œè®¾å®šã€‚ å»ºç«‹ç»ˆç«¯ ã€‚ rcæ‰§è¡Œå®Œæ¯•åï¼Œè¿”å›initã€‚è¿™æ—¶åŸºæœ¬ç³»ç»Ÿç¯å¢ƒå·²ç»è®¾ç½®å¥½äº†ï¼Œå„ç§å®ˆæŠ¤è¿›ç¨‹ä¹Ÿå·²ç»å¯åŠ¨äº†ã€‚ initæ¥ä¸‹æ¥ä¼šæ‰“å¼€6ä¸ªç»ˆç«¯ï¼Œä»¥ä¾¿ç”¨æˆ·ç™»å½•ç³»ç»Ÿã€‚åœ¨inittabä¸­çš„ä»¥ä¸‹6è¡Œå°±æ˜¯å®šä¹‰äº†6ä¸ªç»ˆç«¯ï¼š 1:2345:respawn:/sbin/mingetty tty1 2:2345:respawn:/sbin/mingetty tty2 3:2345:respawn:/sbin/mingetty tty3 4:2345:respawn:/sbin/mingetty tty4 5:2345:respawn:/sbin/mingetty tty5 6:2345:respawn:/sbin/mingetty tty6 ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºåœ¨2ã€3ã€4ã€5çš„è¿è¡Œçº§åˆ«ä¸­éƒ½å°†ä»¥respawnæ–¹å¼è¿è¡Œmingettyç¨‹åºï¼Œmingettyç¨‹åºèƒ½æ‰“å¼€ç»ˆç«¯ã€è®¾ç½®æ¨¡å¼ã€‚ åŒæ—¶å®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªæ–‡æœ¬ç™»å½•ç•Œé¢ï¼Œè¿™ä¸ªç•Œé¢å°±æ˜¯æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ç™»å½•ç•Œé¢ï¼Œåœ¨è¿™ä¸ªç™»å½•ç•Œé¢ä¸­ä¼šæç¤ºç”¨æˆ·è¾“å…¥ç”¨æˆ·åï¼Œè€Œç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å°†ä½œä¸ºå‚æ•°ä¼ ç»™loginç¨‹åºæ¥éªŒè¯ç”¨æˆ·çš„èº«ä»½ã€‚ ç”¨æˆ·ç™»å½•ç³»ç»Ÿã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·çš„ç™»å½•æ–¹å¼æœ‰ä¸‰ç§ï¼š ï¼ˆ1ï¼‰å‘½ä»¤è¡Œç™»å½• ï¼ˆ2ï¼‰sshç™»å½• ï¼ˆ3ï¼‰å›¾å½¢ç•Œé¢ç™»å½• å¯¹äºè¿è¡Œçº§åˆ«ä¸º5çš„å›¾å½¢æ–¹å¼ç”¨æˆ·æ¥è¯´ï¼Œä»–ä»¬çš„ç™»å½•æ˜¯é€šè¿‡ä¸€ä¸ªå›¾å½¢åŒ–çš„ç™»å½•ç•Œé¢ã€‚ç™»å½•æˆåŠŸåå¯ä»¥ç›´æ¥è¿›å…¥ KDEã€Gnome ç­‰çª—å£ç®¡ç†å™¨ã€‚ è€Œæœ¬æ–‡ä¸»è¦è®²çš„è¿˜æ˜¯æ–‡æœ¬æ–¹å¼ç™»å½•çš„æƒ…å†µï¼šå½“æˆ‘ä»¬çœ‹åˆ°mingettyçš„ç™»å½•ç•Œé¢æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¾“å…¥ç”¨æˆ·åå’Œå¯†ç æ¥ç™»å½•ç³»ç»Ÿäº†ã€‚ Linux çš„è´¦å·éªŒè¯ç¨‹åºæ˜¯ loginï¼Œlogin ä¼šæ¥æ”¶ mingetty ä¼ æ¥çš„ç”¨æˆ·åä½œä¸ºç”¨æˆ·åå‚æ•°ã€‚ ç„¶å login ä¼šå¯¹ç”¨æˆ·åè¿›è¡Œåˆ†æï¼šå¦‚æœç”¨æˆ·åä¸æ˜¯ rootï¼Œä¸”å­˜åœ¨ /etc/nologin æ–‡ä»¶ï¼Œlogin å°†è¾“å‡º nologin æ–‡ä»¶çš„å†…å®¹ï¼Œç„¶åé€€å‡ºã€‚ è¿™é€šå¸¸ç”¨æ¥ç³»ç»Ÿç»´æŠ¤æ—¶é˜²æ­¢érootç”¨æˆ·ç™»å½•ã€‚åªæœ‰/etc/securettyä¸­ç™»è®°äº†çš„ç»ˆç«¯æ‰å…è®¸ root ç”¨æˆ·ç™»å½•ï¼Œå¦‚æœä¸å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œåˆ™ root ç”¨æˆ·å¯ä»¥åœ¨ä»»ä½•ç»ˆç«¯ä¸Šç™»å½•ã€‚ /etc/userttyæ–‡ä»¶ç”¨äºå¯¹ç”¨æˆ·ä½œå‡ºé™„åŠ è®¿é—®é™åˆ¶ï¼Œå¦‚æœä¸å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œåˆ™æ²¡æœ‰å…¶ä»–é™åˆ¶ã€‚ å›¾å½¢æ¨¡å¼ä¸æ–‡å­—æ¨¡å¼çš„åˆ‡æ¢æ–¹å¼ Linuxé¢„è®¾æä¾›äº†å…­ä¸ªå‘½ä»¤çª—å£ç»ˆç«¯æœºè®©æˆ‘ä»¬æ¥ç™»å½•ã€‚ é»˜è®¤æˆ‘ä»¬ç™»å½•çš„å°±æ˜¯ç¬¬ä¸€ä¸ªçª—å£ï¼Œä¹Ÿå°±æ˜¯tty1ï¼Œè¿™ä¸ªå…­ä¸ªçª—å£åˆ†åˆ«ä¸ºtty1,tty2 â€¦ tty6ï¼Œä½ å¯ä»¥æŒ‰ä¸‹Ctrl + Alt + F1 ~ F6 æ¥åˆ‡æ¢å®ƒä»¬ã€‚ å¦‚æœä½ å®‰è£…äº†å›¾å½¢ç•Œé¢ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯è¿›å…¥å›¾å½¢ç•Œé¢çš„ï¼Œæ­¤æ—¶ä½ å°±å¯ä»¥æŒ‰Ctrl + Alt + F1 ~ F6æ¥è¿›å…¥å…¶ä¸­ä¸€ä¸ªå‘½ä»¤çª—å£ç•Œé¢ã€‚ å½“ä½ è¿›å…¥å‘½ä»¤çª—å£ç•Œé¢åå†è¿”å›å›¾å½¢ç•Œé¢åªè¦æŒ‰ä¸‹Ctrl + Alt + F7 å°±å›æ¥äº†ã€‚ å¦‚æœä½ ç”¨çš„vmware è™šæ‹Ÿæœºï¼Œå‘½ä»¤çª—å£åˆ‡æ¢çš„å¿«æ·é”®ä¸º Alt + Space + F1~F6. å¦‚æœä½ åœ¨å›¾å½¢ç•Œé¢ä¸‹è¯·æŒ‰Alt + Shift + Ctrl + F1~F6 åˆ‡æ¢è‡³å‘½ä»¤çª—å£ã€‚ Linux å…³æœº åœ¨linuxé¢†åŸŸå†…å¤§å¤šç”¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¾ˆå°‘é‡åˆ°å…³æœºçš„æ“ä½œã€‚æ¯•ç«ŸæœåŠ¡å™¨ä¸Šè·‘ä¸€ä¸ªæœåŠ¡æ˜¯æ°¸æ— æ­¢å¢ƒçš„ï¼Œé™¤éç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä¸å¾—å·²æ‰ä¼šå…³æœºã€‚ æ­£ç¡®çš„å…³æœºæµç¨‹ä¸ºï¼šsync &gt; shutdown &gt; reboot &gt; halt å…³æœºæŒ‡ä»¤ä¸ºï¼šshutdown ï¼Œä½ å¯ä»¥man shutdown æ¥çœ‹ä¸€ä¸‹å¸®åŠ©æ–‡æ¡£ã€‚ ä¾‹å¦‚ä½ å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤å…³æœºï¼š sync å°†æ•°æ®ç”±å†…å­˜åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ã€‚ shutdown å…³æœºæŒ‡ä»¤ï¼Œä½ å¯ä»¥man shutdown æ¥çœ‹ä¸€ä¸‹å¸®åŠ©æ–‡æ¡£ã€‚ä¾‹å¦‚ä½ å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤å…³æœºï¼š shutdown â€“h 10 â€˜This server will shutdown after 10 minsâ€™ è¿™ä¸ªå‘½ä»¤å‘Šè¯‰å¤§å®¶ï¼Œè®¡ç®—æœºå°†åœ¨10åˆ†é’Ÿåå…³æœºï¼Œå¹¶ä¸”ä¼šæ˜¾ç¤ºåœ¨ç™»é™†ç”¨æˆ·çš„å½“å‰å±å¹•ä¸­ã€‚ shutdown â€“h now ç«‹é©¬å…³æœº shutdown â€“h 20:25 ç³»ç»Ÿä¼šåœ¨ä»Šå¤©20:25å…³æœº shutdown â€“h +10 ååˆ†é’Ÿåå…³æœº shutdown â€“r now ç³»ç»Ÿç«‹é©¬é‡å¯ shutdown â€“r +10 ç³»ç»Ÿååˆ†é’Ÿåé‡å¯ reboot å°±æ˜¯é‡å¯ï¼Œç­‰åŒäº shutdown â€“r now halt å…³é—­ç³»ç»Ÿï¼Œç­‰åŒäºshutdown â€“h now å’Œ poweroff æœ€åæ€»ç»“ä¸€ä¸‹ï¼Œä¸ç®¡æ˜¯é‡å¯ç³»ç»Ÿè¿˜æ˜¯å…³é—­ç³»ç»Ÿï¼Œé¦–å…ˆè¦è¿è¡Œ sync å‘½ä»¤ï¼ŒæŠŠå†…å­˜ä¸­çš„æ•°æ®å†™åˆ°ç£ç›˜ä¸­ã€‚ å…³æœºçš„å‘½ä»¤æœ‰ shutdown â€“h now halt poweroff å’Œ init 0 , é‡å¯ç³»ç»Ÿçš„å‘½ä»¤æœ‰ shutdown â€“r now reboot init 6ã€‚ æ³¨æ„äº‹é¡¹ ä¸¥æ ¼åŒºåˆ†å¤§å°å†™ æ‰€æœ‰å†…å®¹ä»¥æ–‡ä»¶å½¢å¼ä¿å­˜ï¼ŒåŒ…æ‹¬ç¡¬ä»¶ ç¡¬ä»¶/dev/sd[a-p] å…‰ç›˜æ–‡ä»¶/dec/sr0ç­‰ ä¸é æ‰©å±•ååŒºåˆ†æ–‡ä»¶ç±»å‹ æœ‰æ‰©å±•éƒ½æ˜¯ç»™ç®¡ç†å‘˜çœ‹çš„ æ‰€æœ‰å­˜å‚¨è®¾å¤‡éƒ½éœ€è¦æŒ‚è½½ä¹‹åæ‰èƒ½ä½¿ç”¨ windowsç¨‹åºä¸èƒ½ç›´æ¥åœ¨linuxå®‰è£…è¿è¡Œ æœåŠ¡å™¨ä¸å…è®¸å…³æœºï¼Œåªèƒ½é‡å¯ é‡å¯æ—¶åº”è¯¥å…³é—­æœåŠ¡ æœåŠ¡å™¨è®¿é—®é«˜å³°ä¸è¦ä½¿ç”¨é«˜è´Ÿè½½å‘½ä»¤ è¿œç¨‹é…ç½®é˜²ç«å¢™æ—¶ä¸è¦æŠŠè‡ªå·±è¸¢å‡ºæœåŠ¡å™¨ æŒ‡å®šåˆç†å¯†ç è§„èŒƒå¹¶å®šæœŸæ›´æ–° åˆç†åˆ†é…æƒé™ å®šæœŸå¤‡ä»½é‡è¦æ•°æ®å’Œæ—¥å¿— ç³»ç»Ÿç›®å½•ç»“æ„ ls / æŸ¥çœ‹ç›®å½• /binï¼š bin æ˜¯ Binaries (äºŒè¿›åˆ¶æ–‡ä»¶) çš„ç¼©å†™, è¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ã€‚ /bootï¼š è¿™é‡Œå­˜æ”¾çš„æ˜¯å¯åŠ¨ Linux æ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶ã€‚ /dev ï¼š dev æ˜¯ Device(è®¾å¤‡) çš„ç¼©å†™, è¯¥ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯ Linux çš„å¤–éƒ¨è®¾å¤‡ï¼Œåœ¨ Linux ä¸­è®¿é—®è®¾å¤‡çš„æ–¹å¼å’Œè®¿é—®æ–‡ä»¶çš„æ–¹å¼æ˜¯ç›¸åŒçš„ã€‚ /etcï¼š etc æ˜¯ Etcetera(ç­‰ç­‰) çš„ç¼©å†™,è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚ /homeï¼š ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨ Linux ä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä»¥ç”¨æˆ·çš„è´¦å·å‘½åçš„ï¼Œå¦‚ä¸Šå›¾ä¸­çš„ aliceã€bob å’Œ eveã€‚ /libï¼š lib æ˜¯ Library(åº“) çš„ç¼©å†™è¿™ä¸ªç›®å½•é‡Œå­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼Œå…¶ä½œç”¨ç±»ä¼¼äº Windows é‡Œçš„ DLL æ–‡ä»¶ã€‚å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦ç”¨åˆ°è¿™äº›å…±äº«åº“ã€‚ /lost+foundï¼š è¿™ä¸ªç›®å½•ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç©ºçš„ï¼Œå½“ç³»ç»Ÿéæ³•å…³æœºåï¼Œè¿™é‡Œå°±å­˜æ”¾äº†ä¸€äº›æ–‡ä»¶ã€‚ /mediaï¼š linux ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚Uç›˜ã€å…‰é©±ç­‰ç­‰ï¼Œå½“è¯†åˆ«åï¼ŒLinux ä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚ /mntï¼š ç³»ç»Ÿæä¾›è¯¥ç›®å½•æ˜¯ä¸ºäº†è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…‰é©±æŒ‚è½½åœ¨ /mnt/ ä¸Šï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•å°±å¯ä»¥æŸ¥çœ‹å…‰é©±é‡Œçš„å†…å®¹äº†ã€‚ /optï¼š opt æ˜¯ optional(å¯é€‰) çš„ç¼©å†™ï¼Œè¿™æ˜¯ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚æ¯”å¦‚ä½ å®‰è£…ä¸€ä¸ªORACLEæ•°æ®åº“åˆ™å°±å¯ä»¥æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚é»˜è®¤æ˜¯ç©ºçš„ã€‚ /procï¼š proc æ˜¯ Processes(è¿›ç¨‹) çš„ç¼©å†™ï¼Œ/proc æ˜¯ä¸€ç§ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼ˆä¹Ÿå³è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œå­˜å‚¨çš„æ˜¯å½“å‰å†…æ ¸è¿è¡ŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç‰¹æ®Šæ–‡ä»¶ï¼Œè¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ã€‚ è¿™ä¸ªç›®å½•çš„å†…å®¹ä¸åœ¨ç¡¬ç›˜ä¸Šè€Œæ˜¯åœ¨å†…å­˜é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹é‡Œé¢çš„æŸäº›æ–‡ä»¶ï¼Œæ¯”å¦‚å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥å±è”½ä¸»æœºçš„pingå‘½ä»¤ï¼Œä½¿åˆ«äººæ— æ³•pingä½ çš„æœºå™¨ï¼š echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all /rootï¼š è¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚ /sbinï¼š s å°±æ˜¯ Super User çš„æ„æ€ï¼Œæ˜¯ Superuser Binaries (è¶…çº§ç”¨æˆ·çš„äºŒè¿›åˆ¶æ–‡ä»¶) çš„ç¼©å†™ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åºã€‚ /selinuxï¼š è¿™ä¸ªç›®å½•æ˜¯ Redhat/CentOS æ‰€ç‰¹æœ‰çš„ç›®å½•ï¼ŒSelinux æ˜¯ä¸€ä¸ªå®‰å…¨æœºåˆ¶ï¼Œç±»ä¼¼äº windows çš„é˜²ç«å¢™ï¼Œä½†æ˜¯è¿™å¥—æœºåˆ¶æ¯”è¾ƒå¤æ‚ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯å­˜æ”¾selinuxç›¸å…³çš„æ–‡ä»¶çš„ã€‚ /srvï¼š è¯¥ç›®å½•å­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®ã€‚ /sysï¼š è¿™æ˜¯ Linux2.6 å†…æ ¸çš„ä¸€ä¸ªå¾ˆå¤§çš„å˜åŒ–ã€‚è¯¥ç›®å½•ä¸‹å®‰è£…äº† 2.6 å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ sysfs ã€‚ sysfs æ–‡ä»¶ç³»ç»Ÿé›†æˆäº†ä¸‹é¢3ç§æ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯ï¼šé’ˆå¯¹è¿›ç¨‹ä¿¡æ¯çš„ proc æ–‡ä»¶ç³»ç»Ÿã€é’ˆå¯¹è®¾å¤‡çš„ devfs æ–‡ä»¶ç³»ç»Ÿä»¥åŠé’ˆå¯¹ä¼ªç»ˆç«¯çš„ devpts æ–‡ä»¶ç³»ç»Ÿã€‚ è¯¥æ–‡ä»¶ç³»ç»Ÿæ˜¯å†…æ ¸è®¾å¤‡æ ‘çš„ä¸€ä¸ªç›´è§‚åæ˜ ã€‚ å½“ä¸€ä¸ªå†…æ ¸å¯¹è±¡è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå¯¹åº”çš„æ–‡ä»¶å’Œç›®å½•ä¹Ÿåœ¨å†…æ ¸å¯¹è±¡å­ç³»ç»Ÿä¸­è¢«åˆ›å»ºã€‚ /tmpï¼š tmp æ˜¯ temporary(ä¸´æ—¶) çš„ç¼©å†™è¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„ã€‚ /usrï¼š usr æ˜¯ unix shared resources(å…±äº«èµ„æº) çš„ç¼©å†™ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼äº windows ä¸‹çš„ program files ç›®å½•ã€‚ /usr/binï¼š ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚ /usr/sbinï¼š è¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç¨‹åºã€‚ /usr/srcï¼š å†…æ ¸æºä»£ç é»˜è®¤çš„æ”¾ç½®ç›®å½•ã€‚ /varï¼š var æ˜¯ variable(å˜é‡) çš„ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•ä¸­å­˜æ”¾ç€åœ¨ä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†é‚£äº›ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡ä»¶ã€‚ /runï¼š æ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„ä¿¡æ¯ã€‚å½“ç³»ç»Ÿé‡å¯æ—¶ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶åº”è¯¥è¢«åˆ æ‰æˆ–æ¸…é™¤ã€‚å¦‚æœä½ çš„ç³»ç»Ÿä¸Šæœ‰ /var/run ç›®å½•ï¼Œåº”è¯¥è®©å®ƒæŒ‡å‘ runã€‚ åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæœ‰å‡ ä¸ªç›®å½•æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œå¹³æ—¶éœ€è¦æ³¨æ„ä¸è¦è¯¯åˆ é™¤æˆ–è€…éšæ„æ›´æ”¹å†…éƒ¨æ–‡ä»¶ã€‚ /etcï¼š ä¸Šè¾¹ä¹Ÿæåˆ°äº†ï¼Œè¿™ä¸ªæ˜¯ç³»ç»Ÿä¸­çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœä½ æ›´æ”¹äº†è¯¥ç›®å½•ä¸‹çš„æŸä¸ªæ–‡ä»¶å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿä¸èƒ½å¯åŠ¨ã€‚ /bin, /sbin, /usr/bin, /usr/sbin: è¿™æ˜¯ç³»ç»Ÿé¢„è®¾çš„æ‰§è¡Œæ–‡ä»¶çš„æ”¾ç½®ç›®å½•ï¼Œæ¯”å¦‚ ls å°±æ˜¯åœ¨ /bin/ls ç›®å½•ä¸‹çš„ã€‚ å€¼å¾—æå‡ºçš„æ˜¯ï¼Œ/bin, /usr/bin æ˜¯ç»™ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„æŒ‡ä»¤ï¼ˆé™¤rootå¤–çš„é€šç”¨æˆ·ï¼‰ï¼Œè€Œ/sbin, /usr/sbin åˆ™æ˜¯ç»™ root ä½¿ç”¨çš„æŒ‡ä»¤ã€‚ /varï¼š è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç³»ç»Ÿä¸Šè·‘äº†å¾ˆå¤šç¨‹åºï¼Œé‚£ä¹ˆæ¯ä¸ªç¨‹åºéƒ½ä¼šæœ‰ç›¸åº”çš„æ—¥å¿—äº§ç”Ÿï¼Œè€Œè¿™äº›æ—¥å¿—å°±è¢«è®°å½•åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œå…·ä½“åœ¨ /var/log ç›®å½•ä¸‹ï¼Œå¦å¤– mail çš„é¢„è®¾æ”¾ç½®ä¹Ÿæ˜¯åœ¨è¿™é‡Œã€‚ å¿˜è®°å¯†ç è§£å†³æ–¹æ³•https://www.runoob.com/linux/linux-forget-password.html é‡å¯linuxç³»ç»Ÿ 3 ç§’ä¹‹å†…è¦æŒ‰ä¸€ä¸‹å›è½¦ è¾“å…¥e ç¬¬äºŒè¡Œæœ€åè¾¹è¾“å…¥ singleï¼Œæœ‰ä¸€ä¸ªç©ºæ ¼ã€‚å…·ä½“æ–¹æ³•ä¸ºæŒ‰å‘ä¸‹å°–å¤´ç§»åŠ¨åˆ°ç¬¬äºŒè¡Œï¼ŒæŒ‰&quot;e&quot;è¿›å…¥ç¼–è¾‘æ¨¡å¼ åœ¨åè¾¹åŠ ä¸Šsingle å›è½¦ æœ€åæŒ‰&quot;b&quot;å¯åŠ¨ï¼Œå¯åŠ¨åå°±è¿›å…¥äº†å•ç”¨æˆ·æ¨¡å¼äº† æ›´æ”¹rootå¯†ç äº†ã€‚æ›´å¯†ç çš„å‘½ä»¤ä¸º passwd å…‰ç›˜å¯åŠ¨ï¼ŒæŒ‰F5 è¿›å…¥rescueæ¨¡å¼ è¾“å…¥linux rescue å›è½¦ é€‰æ‹©è‹±è¯­ é€‰æ‹©us é”®ç›˜ é—®ä½ æ˜¯å¦å¯åŠ¨ç½‘ç»œï¼Œæœ‰æ—¶å€™å¯èƒ½ä¼šè”ç½‘è°ƒè¯•ã€‚æˆ‘ä»¬é€‰no è¿™é‡Œå‘Šè¯‰æˆ‘ä»¬ï¼Œæ¥ä¸‹æ¥ä¼šæŠŠç³»ç»ŸæŒ‚è½½åœ¨/mnt/sysimage ä¸­ã€‚ å…¶ä¸­æœ‰ä¸‰ä¸ªé€‰é¡¹: Continue å°±æ˜¯æŒ‚è½½åç»§ç»­ä¸‹ä¸€æ­¥ã€‚ Read-Only æŒ‚è½½æˆåªè¯»ï¼Œè¿™æ ·æ›´å®‰å…¨ï¼Œæœ‰æ—¶æ–‡ä»¶ç³»ç»ŸæŸåæ—¶ï¼Œåªè¯»æ¨¡å¼ä¼šé˜²æ­¢æ–‡ä»¶ç³»ç»Ÿè¿‘ä¸€æ­¥æŸåã€‚ Skipå°±æ˜¯ä¸æŒ‚è½½ï¼Œè¿›å…¥ä¸€ä¸ªå‘½ä»¤çª—å£æ¨¡å¼ã€‚ è¿™é‡Œæˆ‘ä»¬é€‰æ‹©Continueã€‚ - è‡³æ­¤ï¼Œç³»ç»Ÿå·²ç»æŒ‚è½½åˆ°äº†/mnt/sysimageä¸­ã€‚æ¥ä¸‹æ¥å›è½¦ï¼Œè¾“å…¥chroot /mnt/sysimage è¿›å…¥ç®¡ç†å‘˜ç¯å¢ƒã€‚ è¿œç¨‹ç™»å½• Linux ä¸€èˆ¬ä½œä¸ºæœåŠ¡å™¨ä½¿ç”¨ï¼Œè€ŒæœåŠ¡å™¨ä¸€èˆ¬æ”¾åœ¨æœºæˆ¿ï¼Œä½ ä¸å¯èƒ½åœ¨æœºæˆ¿æ“ä½œä½ çš„ Linux æœåŠ¡å™¨ã€‚è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦è¿œç¨‹ç™»å½•åˆ°LinuxæœåŠ¡å™¨æ¥ç®¡ç†ç»´æŠ¤ç³»ç»Ÿã€‚ Linux ç³»ç»Ÿä¸­æ˜¯é€šè¿‡ ssh æœåŠ¡å®ç°çš„è¿œç¨‹ç™»å½•åŠŸèƒ½ï¼Œé»˜è®¤ ssh æœåŠ¡ç«¯å£å·ä¸º 22ã€‚ Window ç³»ç»Ÿä¸Š Linux è¿œç¨‹ç™»å½•å®¢æˆ·ç«¯æœ‰ SecureCRT, Putty, SSH Secure Shell ç­‰ï¼Œæœ¬æ–‡ä»¥ Putty ä¸ºä¾‹æ¥ç™»å½•è¿œç¨‹æœåŠ¡å™¨ã€‚ Putty ä¸‹è½½åœ°å€ï¼šhttps://www.putty.org/ åœ¨Host Name( or IP address) ä¸‹é¢çš„æ¡†ä¸­è¾“å…¥ä½ è¦ç™»å½•çš„è¿œç¨‹æœåŠ¡å™¨IP(å¯ä»¥é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹æœåŠ¡å™¨ip)ï¼Œç„¶åå›è½¦ã€‚ è¾“å…¥è¦ç™»å½•çš„ç”¨æˆ·åã€‚ å†è¾“å…¥å¯†ç ï¼Œå°±èƒ½ç™»å½•åˆ°è¿œç¨‹çš„linuxç³»ç»Ÿäº† ä½¿ç”¨å¯†é’¥è®¤è¯æœºåˆ¶è¿œç¨‹ç™»å½•linux SSH ä¸º Secure Shell çš„ç¼©å†™ï¼Œç”± IETF çš„ç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork Working Groupï¼‰æ‰€åˆ¶å®šã€‚ SSH ä¸ºå»ºç«‹åœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ã€‚ é¦–å…ˆä½¿ç”¨å·¥å…· PUTTYGEN.EXE ç”Ÿæˆå¯†é’¥å¯¹ã€‚æ‰“å¼€å·¥å…· PUTTYGEN.EXE åå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¯¥å·¥å…·å¯ä»¥ç”Ÿæˆä¸‰ç§æ ¼å¼çš„key ï¼šSSH-1(RSA) SSH-2(RSA) SSH-2(DSA) ï¼Œæˆ‘ä»¬é‡‡ç”¨é»˜è®¤çš„æ ¼å¼å³ SSH-2(RSA)ã€‚Number of bits in a generated key è¿™ä¸ªæ˜¯æŒ‡ç”Ÿæˆçš„keyçš„å¤§å°ï¼Œè¿™ä¸ªæ•°å€¼è¶Šå¤§ï¼Œç”Ÿæˆçš„keyå°±è¶Šå¤æ‚ï¼Œå®‰å…¨æ€§å°±è¶Šé«˜ã€‚è¿™é‡Œæˆ‘ä»¬å†™ 2048ã€‚ Generate è¿‡ç¨‹ä¸­é¼ æ ‡è¦æ¥å›çš„åŠ¨ï¼Œå¦åˆ™è¿™ä¸ªè¿›åº¦æ¡æ˜¯ä¸ä¼šåŠ¨çš„ã€‚ å¯ä»¥ç»™ä½ çš„å¯†é’¥è¾“å…¥ä¸€ä¸ªå¯†ç ï¼Œï¼ˆåœ¨Key Passphraseé‚£é‡Œï¼‰ä¹Ÿå¯ä»¥ç•™ç©ºã€‚ç„¶åç‚¹ Save public key ä¿å­˜å…¬é’¥ï¼Œç‚¹ Save private Key ä¿å­˜ç§é’¥ã€‚ç¬”è€…å»ºè®®ä½ æ”¾åˆ°ä¸€ä¸ªæ¯”è¾ƒå®‰å…¨çš„åœ°æ–¹ï¼Œä¸€æ¥é˜²æ­¢åˆ«äººå·çª¥ï¼ŒäºŒæ¥é˜²æ­¢è¯¯åˆ é™¤ã€‚æ¥ä¸‹æ¥å°±è¯¥åˆ°è¿œç¨‹ linux ä¸»æœºä¸Šè®¾ç½®äº†ã€‚ 1ï¼‰åˆ›å»ºç›®å½• /root/.ssh å¹¶è®¾ç½®æƒé™ [root@localhost ~]# mkdir /root/.ssh mkdir å‘½ä»¤ç”¨æ¥åˆ›å»ºç›®å½•ï¼Œä»¥åä¼šè¯¦ç»†ä»‹ç»ï¼Œæš‚æ—¶åªäº†è§£å³å¯ã€‚ [root@localhost ~]# chmod 700 /root/.ssh chmod å‘½ä»¤æ˜¯ç”¨æ¥ä¿®æ”¹æ–‡ä»¶å±æ€§æƒé™çš„ï¼Œä»¥åä¼šè¯¦ç»†ä»‹ç»ã€‚ 2ï¼‰åˆ›å»ºæ–‡ä»¶ / root/.ssh/authorized_keys [root@localhost ~]# vim /root/.ssh/authorized_keys vim å‘½ä»¤æ˜¯ç¼–è¾‘ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„å‘½ä»¤ï¼ŒåŒæ ·åœ¨åç»­ç« èŠ‚è¯¦ç»†ä»‹ç»ã€‚ 3ï¼‰æ‰“å¼€åˆšæ‰ç”Ÿæˆçš„public key æ–‡ä»¶ï¼Œå»ºè®®ä½¿ç”¨å†™å­—æ¿æ‰“å¼€ï¼Œè¿™æ ·çœ‹ç€èˆ’æœä¸€äº›ï¼Œå¤åˆ¶ä»AAAAå¼€å¤´è‡³ &quot;---- END SSH2 PUBLIC KEY ----&quot; è¯¥è¡Œä¸Šçš„æ‰€æœ‰å†…å®¹ï¼Œç²˜è´´åˆ°/root/.ssh/authorized_keys æ–‡ä»¶ä¸­ï¼Œè¦ä¿è¯æ‰€æœ‰å­—ç¬¦åœ¨ä¸€è¡Œã€‚ï¼ˆå¯ä»¥å…ˆæŠŠå¤åˆ¶çš„å†…å®¹æ‹·è´è‡³è®°äº‹æœ¬ï¼Œç„¶åç¼–è¾‘æˆä¸€è¡Œè½½ç²˜è´´åˆ°è¯¥æ–‡ä»¶ä¸­ï¼‰ã€‚ åœ¨è¿™é‡Œè¦ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œå¦‚ä½•ç²˜è´´ï¼Œç”¨vimæ‰“å¼€é‚£ä¸ªæ–‡ä»¶åï¼Œè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ‰€ä»¥vimä¼šè‡ªåŠ¨åˆ›å»ºã€‚æŒ‰ä¸€ä¸‹å­—æ¯&quot;i&quot;ç„¶ååŒæ—¶æŒ‰shift + Insert è¿›è¡Œç²˜è´´ï¼ˆæˆ–è€…å•å‡»é¼ æ ‡å³é”®å³å¯ï¼‰ï¼Œå‰ææ˜¯å·²ç»å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ä¸­äº†ã€‚ç²˜è´´å¥½åï¼Œç„¶åæŠŠå…‰æ ‡ç§»åŠ¨åˆ°è¯¥è¡Œæœ€å‰é¢è¾“å…¥ ssh-rsa ï¼Œç„¶åæŒ‰ç©ºæ ¼ã€‚å†æŒ‰ESCï¼Œç„¶åè¾“å…¥å†’å·wq å³ :wq å°±ä¿å­˜äº†ã€‚æ ¼å¼å¦‚ä¸‹å›¾ï¼š - å†è®¾ç½®puttyé€‰é¡¹ï¼Œç‚¹çª—å£å·¦ä¾§çš„SSh â€“&gt; Auth ï¼Œå•å‡»çª—å£å³ä¾§çš„Browseâ€¦ é€‰æ‹©åˆšåˆšç”Ÿæˆçš„ç§é’¥ï¼Œ å†ç‚¹Open ï¼Œæ­¤æ—¶è¾“å…¥rootï¼Œå°±ä¸ç”¨è¾“å…¥å¯†ç å°±èƒ½ç™»å½•äº†ã€‚å¦‚æœåœ¨å‰é¢ä½ è®¾ç½®äº†Key Passphrase ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ä¼šæç¤ºä½ è¾“å…¥å¯†ç çš„ã€‚ä¸ºäº†æ›´åŠ å®‰å…¨å»ºè®®å¤§å®¶è¦è®¾ç½®ä¸€ä¸ªKey Passphraseã€‚ æ–‡ä»¶åŸºæœ¬å±æ€§ Linux ç³»ç»Ÿæ˜¯ä¸€ç§å…¸å‹çš„å¤šç”¨æˆ·ç³»ç»Ÿï¼Œä¸åŒçš„ç”¨æˆ·å¤„äºä¸åŒçš„åœ°ä½ï¼Œæ‹¥æœ‰ä¸åŒçš„æƒé™ã€‚ ä¸ºäº†ä¿æŠ¤ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼ŒLinux ç³»ç»Ÿå¯¹ä¸åŒçš„ç”¨æˆ·è®¿é—®åŒä¸€æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç›®å½•æ–‡ä»¶ï¼‰çš„æƒé™åšäº†ä¸åŒçš„è§„å®šã€‚ åœ¨ Linux ä¸­æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤æ¥ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç”¨æˆ·ä¸æƒé™ï¼š chown (change ownerp) ï¼š ä¿®æ”¹æ‰€å±ç”¨æˆ·ä¸ç»„ã€‚ chmod (change mode) ï¼š ä¿®æ”¹ç”¨æˆ·çš„æƒé™ã€‚ ä½¿ç”¨ ll æˆ–è€… ls â€“l å‘½ä»¤æ¥æ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„å±æ€§ä»¥åŠæ–‡ä»¶æ‰€å±çš„ç”¨æˆ·å’Œç»„ï¼Œå¦‚ï¼š [root@www /]# ls -l total 64 dr-xr-xr-x 2 root root 4096 Dec 14 2012 bin dr-xr-xr-x 4 root root 4096 Apr 19 2012 boot â€¦â€¦ - å®ä¾‹ä¸­ï¼Œbin æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªå±æ€§ç”¨ d è¡¨ç¤ºã€‚d åœ¨ Linux ä¸­ä»£è¡¨è¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ã€‚ åœ¨ Linux ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨è¿™ä¸ªæ–‡ä»¶æ˜¯ç›®å½•ã€æ–‡ä»¶æˆ–é“¾æ¥æ–‡ä»¶ç­‰ç­‰ã€‚ å½“ä¸º d åˆ™æ˜¯ç›®å½• å½“ä¸º - åˆ™æ˜¯æ–‡ä»¶ï¼› è‹¥æ˜¯ l åˆ™è¡¨ç¤ºä¸ºé“¾æ¥æ–‡æ¡£(link file)ï¼› è‹¥æ˜¯ b åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„å¯ä¾›å‚¨å­˜çš„æ¥å£è®¾å¤‡(å¯éšæœºå­˜å–è£…ç½®)ï¼› è‹¥æ˜¯ c åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸²è¡Œç«¯å£è®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜ã€é¼ æ ‡(ä¸€æ¬¡æ€§è¯»å–è£…ç½®)ã€‚ - æ¥ä¸‹æ¥çš„å­—ç¬¦ä¸­ï¼Œä»¥ä¸‰ä¸ªä¸ºä¸€ç»„ï¼Œä¸”å‡ä¸º rwx çš„ä¸‰ä¸ªå‚æ•°çš„ç»„åˆã€‚å…¶ä¸­ï¼Œ r ä»£è¡¨å¯è¯»(read)ã€ w ä»£è¡¨å¯å†™(write)ã€ x ä»£è¡¨å¯æ‰§è¡Œ(execute)ã€‚ è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸‰ä¸ªæƒé™çš„ä½ç½®ä¸ä¼šæ”¹å˜ï¼Œå¦‚æœæ²¡æœ‰æƒé™ï¼Œå°±ä¼šå‡ºç°å‡å· - è€Œå·²ã€‚ - æ¯ä¸ªæ–‡ä»¶çš„å±æ€§ç”±å·¦è¾¹ç¬¬ä¸€éƒ¨åˆ†çš„ 10 ä¸ªå­—ç¬¦æ¥ç¡®å®šï¼ˆå¦‚å›¾ï¼‰ã€‚ 363003_1227493859FdXT ä»å·¦è‡³å³ç”¨ 0-9 è¿™äº›æ•°å­—æ¥è¡¨ç¤ºã€‚ ç¬¬ 0 ä½ç¡®å®šæ–‡ä»¶ç±»å‹ï¼Œç¬¬ 1-3 ä½ç¡®å®šå±ä¸»ï¼ˆè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚ ç¬¬4-6ä½ç¡®å®šå±ç»„ï¼ˆæ‰€æœ‰è€…çš„åŒç»„ç”¨æˆ·ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ï¼Œç¬¬7-9ä½ç¡®å®šå…¶ä»–ç”¨æˆ·æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚ å…¶ä¸­ï¼Œç¬¬ 1ã€4ã€7 ä½è¡¨ç¤ºè¯»æƒé™ï¼Œå¦‚æœç”¨ r å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æœ‰è¯»æƒé™ï¼Œå¦‚æœç”¨ - å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æ²¡æœ‰è¯»æƒé™ï¼› ç¬¬ 2ã€5ã€8 ä½è¡¨ç¤ºå†™æƒé™ï¼Œå¦‚æœç”¨ w å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æœ‰å†™æƒé™ï¼Œå¦‚æœç”¨ - å­—ç¬¦è¡¨ç¤ºæ²¡æœ‰å†™æƒé™ï¼›ç¬¬ 3ã€6ã€9 ä½è¡¨ç¤ºå¯æ‰§è¡Œæƒé™ï¼Œå¦‚æœç”¨ x å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æœ‰æ‰§è¡Œæƒé™ï¼Œå¦‚æœç”¨ - å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æ²¡æœ‰æ‰§è¡Œæƒé™ã€‚ Linuxæ–‡ä»¶å±ä¸»å’Œå±ç»„ [root@www /]# ls -l total 64 drwxr-xr-x 2 root root 4096 Feb 15 14:46 cron drwxr-xr-x 3 mysql mysql 4096 Apr 21 2014 mysql â€¦â€¦ å¯¹äºæ–‡ä»¶æ¥è¯´ï¼Œå®ƒéƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„æ‰€æœ‰è€…ï¼Œä¹Ÿå°±æ˜¯å¯¹è¯¥æ–‡ä»¶å…·æœ‰æ‰€æœ‰æƒçš„ç”¨æˆ·ã€‚ åŒæ—¶ï¼Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œç”¨æˆ·æ˜¯æŒ‰ç»„åˆ†ç±»çš„ï¼Œä¸€ä¸ªç”¨æˆ·å±äºä¸€ä¸ªæˆ–å¤šä¸ªç»„ã€‚ æ–‡ä»¶æ‰€æœ‰è€…ä»¥å¤–çš„ç”¨æˆ·åˆå¯ä»¥åˆ†ä¸ºæ–‡ä»¶æ‰€æœ‰è€…çš„åŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·ã€‚ å› æ­¤ï¼ŒLinuxç³»ç»ŸæŒ‰æ–‡ä»¶æ‰€æœ‰è€…ã€æ–‡ä»¶æ‰€æœ‰è€…åŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·æ¥è§„å®šäº†ä¸åŒçš„æ–‡ä»¶è®¿é—®æƒé™ã€‚ åœ¨ä»¥ä¸Šå®ä¾‹ä¸­ï¼Œmysql æ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ï¼Œå±ä¸»å’Œå±ç»„éƒ½ä¸º mysqlï¼Œå±ä¸»æœ‰å¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œçš„æƒé™ï¼›ä¸å±ä¸»åŒç»„çš„å…¶ä»–ç”¨æˆ·æœ‰å¯è¯»å’Œå¯æ‰§è¡Œçš„æƒé™ï¼›å…¶ä»–ç”¨æˆ·ä¹Ÿæœ‰å¯è¯»å’Œå¯æ‰§è¡Œçš„æƒé™ã€‚ å¯¹äº root ç”¨æˆ·æ¥è¯´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–‡ä»¶çš„æƒé™å¯¹å…¶ä¸èµ·ä½œç”¨ã€‚ æ›´æ”¹æ–‡ä»¶å±æ€§ chgrpï¼šæ›´æ”¹æ–‡ä»¶å±ç»„ è¯­æ³•ï¼šchgrp [-R] å±ç»„å æ–‡ä»¶å å‚æ•°é€‰é¡¹ -Rï¼šé€’å½’æ›´æ”¹æ–‡ä»¶å±ç»„ï¼Œå°±æ˜¯åœ¨æ›´æ”¹æŸä¸ªç›®å½•æ–‡ä»¶çš„å±ç»„æ—¶ï¼Œå¦‚æœåŠ ä¸Š-Rçš„å‚æ•°ï¼Œé‚£ä¹ˆè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å±ç»„éƒ½ä¼šæ›´æ”¹ã€‚ chownï¼šæ›´æ”¹æ–‡ä»¶å±ä¸»ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ›´æ”¹æ–‡ä»¶å±ç»„ è¯­æ³•ï¼š chown [â€“R] å±ä¸»å æ–‡ä»¶å chown [-R] å±ä¸»åï¼šå±ç»„å æ–‡ä»¶å è¿›å…¥ /root ç›®å½•ï¼ˆ~ï¼‰å°†install.logçš„æ‹¥æœ‰è€…æ”¹ä¸ºbinè¿™ä¸ªè´¦å·ï¼š [root@www ~] cd ~ [root@www ~]# chown bin install.log [root@www ~]# ls -l -rw-r--r-- 1 bin users 68495 Jun 25 08:53 install.log å°†install.logçš„æ‹¥æœ‰è€…ä¸ç¾¤ç»„æ”¹å›ä¸ºrootï¼š [root@www ~]# chown root:root install.log [root@www ~]# ls -l -rw-r--r-- 1 root root 68495 Jun 25 08:53 install.log chmodï¼šæ›´æ”¹æ–‡ä»¶9ä¸ªå±æ€§ Linuxæ–‡ä»¶å±æ€§æœ‰ä¸¤ç§è®¾ç½®æ–¹æ³•ï¼Œä¸€ç§æ˜¯æ•°å­—ï¼Œä¸€ç§æ˜¯ç¬¦å·ã€‚ Linux æ–‡ä»¶çš„åŸºæœ¬æƒé™å°±æœ‰ä¹ä¸ªï¼Œåˆ†åˆ«æ˜¯ owner/group/others(æ‹¥æœ‰è€…/ç»„/å…¶ä»–) ä¸‰ç§èº«ä»½å„æœ‰è‡ªå·±çš„ read/write/execute æƒé™ã€‚ å…ˆå¤ä¹ ä¸€ä¸‹åˆšåˆšä¸Šé¢æåˆ°çš„æ•°æ®ï¼šæ–‡ä»¶çš„æƒé™å­—ç¬¦ä¸ºï¼š -rwxrwxrwx ï¼Œ è¿™ä¹ä¸ªæƒé™æ˜¯ä¸‰ä¸ªä¸‰ä¸ªä¸€ç»„çš„ï¼å…¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°å­—æ¥ä»£è¡¨å„ä¸ªæƒé™ï¼Œå„æƒé™çš„åˆ†æ•°å¯¹ç…§è¡¨å¦‚ä¸‹ï¼š r:4 w:2 x:1 æ¯ç§èº«ä»½(owner/group/others)å„è‡ªçš„ä¸‰ä¸ªæƒé™(r/w/x)åˆ†æ•°æ˜¯éœ€è¦ç´¯åŠ çš„ï¼Œä¾‹å¦‚å½“æƒé™ä¸ºï¼š -rwxrwx--- åˆ†æ•°åˆ™æ˜¯ï¼š owner = rwx = 4+2+1 = 7 group = rwx = 4+2+1 = 7 others= --- = 0+0+0 = 0 æ‰€ä»¥ç­‰ä¸€ä¸‹æˆ‘ä»¬è®¾å®šæƒé™çš„å˜æ›´æ—¶ï¼Œè¯¥æ–‡ä»¶çš„æƒé™æ•°å­—å°±æ˜¯ 770ã€‚å˜æ›´æƒé™çš„æŒ‡ä»¤ chmod çš„è¯­æ³•æ˜¯è¿™æ ·çš„ï¼š chmod [-R] xyz æ–‡ä»¶æˆ–ç›®å½• é€‰é¡¹ä¸å‚æ•°ï¼š xyz : å°±æ˜¯åˆšåˆšæåˆ°çš„æ•°å­—ç±»å‹çš„æƒé™å±æ€§ï¼Œä¸º rwx å±æ€§æ•°å€¼çš„ç›¸åŠ ã€‚ -R : è¿›è¡Œé€’å½’(recursive)çš„æŒç»­å˜æ›´ï¼Œäº¦å³è¿åŒæ¬¡ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šå˜æ›´ ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœè¦å°† .bashrc è¿™ä¸ªæ–‡ä»¶æ‰€æœ‰çš„æƒé™éƒ½è®¾å®šå¯ç”¨ï¼Œé‚£ä¹ˆå‘½ä»¤å¦‚ä¸‹ï¼š [root@www ~]# ls -al .bashrc -rw-r--r-- 1 root root 395 Jul 4 11:45 .bashrc [root@www ~]# chmod 777 .bashrc [root@www ~]# ls -al .bashrc -rwxrwxrwx 1 root root 395 Jul 4 11:45 .bashrc é‚£å¦‚æœè¦å°†æƒé™å˜æˆ -rwxr-xr-- å‘¢ï¼Ÿé‚£ä¹ˆæƒé™çš„åˆ†æ•°å°±æˆä¸º [4+2+1][4+0+1][4+0+0]=754ã€‚ ç¬¦å·ç±»å‹æ”¹å˜æ–‡ä»¶æƒé™ è¿˜æœ‰ä¸€ä¸ªæ”¹å˜æƒé™çš„æ–¹æ³•ï¼Œä»ä¹‹å‰çš„ä»‹ç»ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒåŸºæœ¬ä¸Šå°±ä¹ä¸ªæƒé™åˆ†åˆ«æ˜¯ï¼š userï¼šç”¨æˆ· groupï¼šç»„ othersï¼šå…¶ä»– é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ u, g, o æ¥ä»£è¡¨ä¸‰ç§èº«ä»½çš„æƒé™ã€‚ æ­¤å¤–ï¼Œ a åˆ™ä»£è¡¨ allï¼Œå³å…¨éƒ¨çš„èº«ä»½ã€‚è¯»å†™çš„æƒé™å¯ä»¥å†™æˆ r, w, xï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä½¿ç”¨ä¸‹è¡¨çš„æ–¹å¼æ¥çœ‹ï¼š chmod u g o a +(åŠ å…¥) -(é™¤å») =(è®¾å®š) r w x æ–‡ä»¶æˆ–ç›®å½• å¦‚æœæˆ‘ä»¬éœ€è¦å°†æ–‡ä»¶æƒé™è®¾ç½®ä¸º -rwxr-xr-- ï¼Œå¯ä»¥ä½¿ç”¨ chmod u=rwx,g=rx,o=r æ–‡ä»¶å æ¥è®¾å®š: touch test1 // åˆ›å»º test1 æ–‡ä»¶ ls -al test1 // æŸ¥çœ‹ test1 é»˜è®¤æƒé™ -rw-r--r-- 1 root root 0 Nov 15 10:32 test1 chmod u=rwx,g=rx,o=r test1 // ä¿®æ”¹ test1 æƒé™ ls -al test1 -rwxr-xr-- 1 root root 0 Nov 15 10:32 test1 è€Œå¦‚æœæ˜¯è¦å°†æƒé™å»æ‰è€Œä¸æ”¹å˜å…¶ä»–å·²å­˜åœ¨çš„æƒé™å‘¢ï¼Ÿä¾‹å¦‚è¦æ‹¿æ‰å…¨éƒ¨äººçš„å¯æ‰§è¡Œæƒé™ï¼Œåˆ™ï¼š chmod a-x test1 ls -al test1 -rw-r--r-- 1 root root 0 Nov 15 10:32 test1 æ–‡ä»¶ä¸ç›®å½•ç®¡ç† Linuxçš„ç›®å½•ç»“æ„ä¸ºæ ‘çŠ¶ç»“æ„ï¼Œæœ€é¡¶çº§çš„ç›®å½•ä¸ºæ ¹ç›®å½• /ã€‚ å…¶ä»–ç›®å½•é€šè¿‡æŒ‚è½½å¯ä»¥å°†å®ƒä»¬æ·»åŠ åˆ°æ ‘ä¸­ï¼Œé€šè¿‡è§£é™¤æŒ‚è½½å¯ä»¥ç§»é™¤å®ƒä»¬ã€‚ åœ¨å¼€å§‹æœ¬æ•™ç¨‹å‰æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“ä»€ä¹ˆæ˜¯ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„ã€‚ ç»å¯¹è·¯å¾„ï¼š è·¯å¾„çš„å†™æ³•ï¼Œç”±æ ¹ç›®å½• / å†™èµ·ï¼Œä¾‹å¦‚ï¼š /usr/share/doc è¿™ä¸ªç›®å½•ã€‚ ç›¸å¯¹è·¯å¾„ï¼š è·¯å¾„çš„å†™æ³•ï¼Œä¸æ˜¯ç”± / å†™èµ·ï¼Œä¾‹å¦‚ç”± /usr/share/doc è¦åˆ° /usr/share/man åº•ä¸‹æ—¶ï¼Œå¯ä»¥å†™æˆï¼š cd ../man è¿™å°±æ˜¯ç›¸å¯¹è·¯å¾„çš„å†™æ³•ã€‚ å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤ lsï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šlist filesï¼‰: åˆ—å‡ºç›®å½•åŠæ–‡ä»¶å cdï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šchange directoryï¼‰ï¼šåˆ‡æ¢ç›®å½• pwdï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šprint work directoryï¼‰ï¼šæ˜¾ç¤ºç›®å‰çš„ç›®å½• mkdirï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šmake directoryï¼‰ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½• rmdirï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šremove directoryï¼‰ï¼šåˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½• cpï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šcopy fileï¼‰: å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• rmï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šremoveï¼‰: ç§»é™¤æ–‡ä»¶æˆ–ç›®å½• mvï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šmove fileï¼‰: ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹æ–‡ä»¶ä¸ç›®å½•çš„åç§° ä½ å¯ä»¥ä½¿ç”¨ man [å‘½ä»¤] æ¥æŸ¥çœ‹å„ä¸ªå‘½ä»¤çš„ä½¿ç”¨æ–‡æ¡£ï¼Œå¦‚ ï¼šman cpã€‚ ls (åˆ—å‡ºç›®å½•) åœ¨Linuxç³»ç»Ÿå½“ä¸­ï¼Œ ls å‘½ä»¤å¯èƒ½æ˜¯æœ€å¸¸è¢«è¿è¡Œçš„ã€‚ è¯­æ³•ï¼š [root@www ~]# ls [-aAdfFhilnrRSt] ç›®å½•åç§° [root@www ~]# ls [--color={never,auto,always}] ç›®å½•åç§° [root@www ~]# ls [--full-time] ç›®å½•åç§° é€‰é¡¹ä¸å‚æ•°ï¼š -a ï¼šå…¨éƒ¨çš„æ–‡ä»¶ï¼Œè¿åŒéšè—æ–‡ä»¶( å¼€å¤´ä¸º . çš„æ–‡ä»¶) ä¸€èµ·åˆ—å‡ºæ¥(å¸¸ç”¨) -d ï¼šä»…åˆ—å‡ºç›®å½•æœ¬èº«ï¼Œè€Œä¸æ˜¯åˆ—å‡ºç›®å½•å†…çš„æ–‡ä»¶æ•°æ®(å¸¸ç”¨) -l ï¼šé•¿æ•°æ®ä¸²åˆ—å‡ºï¼ŒåŒ…å«æ–‡ä»¶çš„å±æ€§ä¸æƒé™ç­‰ç­‰æ•°æ®ï¼›(å¸¸ç”¨) å°†å®¶ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ—å‡ºæ¥(å«å±æ€§ä¸éšè—æ¡£) [root@www ~]# ls -al ~ cd (åˆ‡æ¢ç›®å½•) cdæ˜¯Change Directoryçš„ç¼©å†™ï¼Œè¿™æ˜¯ç”¨æ¥å˜æ¢å·¥ä½œç›®å½•çš„å‘½ä»¤ã€‚ è¯­æ³•ï¼š cd [ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„] #ä½¿ç”¨ mkdir å‘½ä»¤åˆ›å»º runoob ç›®å½• [root@www ~]# mkdir runoob #ä½¿ç”¨ç»å¯¹è·¯å¾„åˆ‡æ¢åˆ° runoob ç›®å½• [root@www ~]# cd /root/runoob/ #ä½¿ç”¨ç›¸å¯¹è·¯å¾„åˆ‡æ¢åˆ° runoob ç›®å½• [root@www ~]# cd ./runoob/ è¡¨ç¤ºå›åˆ°è‡ªå·±çš„å®¶ç›®å½•ï¼Œäº¦å³æ˜¯ /root è¿™ä¸ªç›®å½• [root@www runoob]# cd ~ è¡¨ç¤ºå»åˆ°ç›®å‰çš„ä¸Šä¸€çº§ç›®å½•ï¼Œäº¦å³æ˜¯ /root çš„ä¸Šä¸€çº§ç›®å½•çš„æ„æ€ï¼› [root@www ~]# cd .. æ¥ä¸‹æ¥å¤§å®¶å¤šæ“ä½œå‡ æ¬¡åº”è¯¥å°±å¯ä»¥å¾ˆå¥½çš„ç†è§£ cd å‘½ä»¤çš„ã€‚ - pwd (æ˜¾ç¤ºç›®å‰æ‰€åœ¨çš„ç›®å½•) pwd æ˜¯ Print Working Directory çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºç›®å‰æ‰€åœ¨ç›®å½•çš„å‘½ä»¤ã€‚ [root@www ~]# pwd [-P] é€‰é¡¹ä¸å‚æ•°ï¼š -P ï¼šæ˜¾ç¤ºå‡ºç¡®å®çš„è·¯å¾„ï¼Œè€Œéä½¿ç”¨è¿ç»“ (link) è·¯å¾„ã€‚ å®ä¾‹ï¼šå•çº¯æ˜¾ç¤ºå‡ºç›®å‰çš„å·¥ä½œç›®å½•ï¼š [root@www ~]# pwd /root &lt;== æ˜¾ç¤ºå‡ºç›®å½•å•¦ï½ å®ä¾‹æ˜¾ç¤ºå‡ºå®é™…çš„å·¥ä½œç›®å½•ï¼Œè€Œéè¿ç»“æ¡£æœ¬èº«çš„ç›®å½•åè€Œå·²ã€‚ [root@www ~]# cd /var/mail &lt;==æ³¨æ„ï¼Œ/var/mailæ˜¯ä¸€ä¸ªè¿ç»“æ¡£ [root@www mail]# pwd /var/mail &lt;==åˆ—å‡ºç›®å‰çš„å·¥ä½œç›®å½• [root@www mail]# pwd -P /var/spool/mail &lt;==æ€ä¹ˆå›äº‹ï¼Ÿæœ‰æ²¡æœ‰åŠ  -P å·®å¾ˆå¤šï½ [root@www mail]# ls -ld /var/mail lrwxrwxrwx 1 root root 10 Sep 4 17:54 /var/mail -&gt; spool/mail çœ‹åˆ°è¿™é‡Œåº”è¯¥çŸ¥é“ä¸ºå•¥äº†å§ï¼Ÿå› ä¸º /var/mail æ˜¯è¿ç»“æ¡£ï¼Œè¿ç»“åˆ° /var/spool/mail æ‰€ä»¥ï¼ŒåŠ ä¸Š pwd -P çš„é€‰é¡¹åï¼Œä¼šä¸ä»¥è¿ç»“æ¡£çš„æ•°æ®æ˜¾ç¤ºï¼Œè€Œæ˜¯æ˜¾ç¤ºæ­£ç¡®çš„å®Œæ•´è·¯å¾„å•Šï¼ - mkdir (åˆ›å»ºæ–°ç›®å½•) å¦‚æœæƒ³è¦åˆ›å»ºæ–°çš„ç›®å½•çš„è¯ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨mkdir (make directory)å§ã€‚ è¯­æ³•ï¼š mkdir [-mp] ç›®å½•åç§° é€‰é¡¹ä¸å‚æ•°ï¼š -m ï¼šé…ç½®æ–‡ä»¶çš„æƒé™å–”ï¼ç›´æ¥é…ç½®ï¼Œä¸éœ€è¦çœ‹é»˜è®¤æƒé™ (umask) çš„è„¸è‰²ï½ -p ï¼šå¸®åŠ©ä½ ç›´æ¥å°†æ‰€éœ€è¦çš„ç›®å½•(åŒ…å«ä¸Šä¸€çº§ç›®å½•)é€’å½’åˆ›å»ºèµ·æ¥ï¼ å®ä¾‹ï¼šè¯·åˆ°/tmpåº•ä¸‹å°è¯•åˆ›å»ºæ•°ä¸ªæ–°ç›®å½•çœ‹çœ‹ï¼š [root@www ~]# cd /tmp [root@www tmp]# mkdir test &lt;åˆ›å»ºä¸€åä¸º test çš„æ–°ç›®å½• [root@www tmp]# mkdir test1/test2/test3/test4 mkdir: cannot create directory `test1/test2/test3/test4': No such file or directory &lt; æ²¡åŠæ³•ç›´æ¥åˆ›å»ºæ­¤ç›®å½•å•Šï¼ [root@www tmp]# mkdir -p test1/test2/test3/test4 åŠ äº†è¿™ä¸ª -p çš„é€‰é¡¹ï¼Œå¯ä»¥è‡ªè¡Œå¸®ä½ åˆ›å»ºå¤šå±‚ç›®å½•ï¼ å®ä¾‹ï¼šåˆ›å»ºæƒé™ä¸º rwx--x--x çš„ç›®å½•ã€‚ [root@www tmp]# mkdir -m 711 test2 [root@www tmp]# ls -l drwxr-xr-x 3 root root 4096 Jul 18 12:50 test drwxr-xr-x 3 root root 4096 Jul 18 12:53 test1 drwx--x--x 2 root root 4096 Jul 18 12:54 test2 ä¸Šé¢çš„æƒé™éƒ¨åˆ†ï¼Œå¦‚æœæ²¡æœ‰åŠ ä¸Š -m æ¥å¼ºåˆ¶é…ç½®å±æ€§ï¼Œç³»ç»Ÿä¼šä½¿ç”¨é»˜è®¤å±æ€§ã€‚ å¦‚æœæˆ‘ä»¬ä½¿ç”¨ -m ï¼Œå¦‚ä¸Šä¾‹æˆ‘ä»¬ç»™äºˆ -m 711 æ¥ç»™äºˆæ–°çš„ç›®å½• drwx--x--x çš„æƒé™ã€‚ - rmdir (åˆ é™¤ç©ºçš„ç›®å½•) è¯­æ³•ï¼š rmdir [-p] ç›®å½•åç§° é€‰é¡¹ä¸å‚æ•°ï¼š -p ï¼šè¿åŒä¸Šä¸€çº§ã€ç©ºçš„ã€ç›®å½•ä¹Ÿä¸€èµ·åˆ é™¤ åˆ é™¤ runoob ç›®å½• [root@www tmp]# rmdir runoob/ å°† mkdir å®ä¾‹ä¸­åˆ›å»ºçš„ç›®å½•(/tmp åº•ä¸‹)åˆ é™¤æ‰ï¼ [root@www tmp]# ls -l &lt;==çœ‹çœ‹æœ‰å¤šå°‘ç›®å½•å­˜åœ¨ï¼Ÿ drwxr-xr-x 3 root root 4096 Jul 18 12:50 test drwxr-xr-x 3 root root 4096 Jul 18 12:53 test1 drwx--x--x 2 root root 4096 Jul 18 12:54 test2 [root@www tmp]# rmdir test &lt;==å¯ç›´æ¥åˆ é™¤æ‰ï¼Œæ²¡é—®é¢˜ [root@www tmp]# rmdir test1 &lt;==å› ä¸ºå°šæœ‰å†…å®¹ï¼Œæ‰€ä»¥æ— æ³•åˆ é™¤ï¼ rmdir: `test1': Directory not empty [root@www tmp]# rmdir -p test1/test2/test3/test4 [root@www tmp]# ls -l &lt;==æ‚¨çœ‹çœ‹ï¼Œåº•ä¸‹çš„è¾“å‡ºä¸­testä¸test1ä¸è§äº†ï¼ drwx--x--x 2 root root 4096 Jul 18 12:54 test2 åˆ©ç”¨ -p è¿™ä¸ªé€‰é¡¹ï¼Œç«‹åˆ»å°±å¯ä»¥å°† test1/test2/test3/test4 ä¸€æ¬¡åˆ é™¤ã€‚ ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ª rmdir ä»…èƒ½åˆ é™¤ç©ºçš„ç›®å½•ï¼Œä½ å¯ä»¥ä½¿ç”¨ rm å‘½ä»¤æ¥åˆ é™¤éç©ºç›®å½•ã€‚ - cp (å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•) cp å³æ‹·è´æ–‡ä»¶å’Œç›®å½•ã€‚ è¯­æ³•: [root@www ~]# cp [-adfilprsu] æ¥æºæ¡£(source) ç›®æ ‡æ¡£(destination) [root@www ~]# cp [options] source1 source2 source3 .... directory é€‰é¡¹ä¸å‚æ•°ï¼š -aï¼šç›¸å½“æ–¼ -pdr çš„æ„æ€ï¼Œè‡³æ–¼ pdr è¯·å‚è€ƒä¸‹åˆ—è¯´æ˜ï¼›(å¸¸ç”¨) -dï¼šè‹¥æ¥æºæ¡£ä¸ºè¿ç»“æ¡£çš„å±æ€§(link file)ï¼Œåˆ™å¤åˆ¶è¿ç»“æ¡£å±æ€§è€Œéæ–‡ä»¶æœ¬èº«ï¼› -fï¼šä¸ºå¼ºåˆ¶(force)çš„æ„æ€ï¼Œè‹¥ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ä¸”æ— æ³•å¼€å¯ï¼Œåˆ™ç§»é™¤åå†å°è¯•ä¸€æ¬¡ï¼› -iï¼šè‹¥ç›®æ ‡æ¡£(destination)å·²ç»å­˜åœ¨æ—¶ï¼Œåœ¨è¦†ç›–æ—¶ä¼šå…ˆè¯¢é—®åŠ¨ä½œçš„è¿›è¡Œ(å¸¸ç”¨) -lï¼šè¿›è¡Œç¡¬å¼è¿ç»“(hard link)çš„è¿ç»“æ¡£åˆ›å»ºï¼Œè€Œéå¤åˆ¶æ–‡ä»¶æœ¬èº«ï¼› -pï¼šè¿åŒæ–‡ä»¶çš„å±æ€§ä¸€èµ·å¤åˆ¶è¿‡å»ï¼Œè€Œéä½¿ç”¨é»˜è®¤å±æ€§(å¤‡ä»½å¸¸ç”¨)ï¼› -rï¼šé€’å½’æŒç»­å¤åˆ¶ï¼Œç”¨æ–¼ç›®å½•çš„å¤åˆ¶è¡Œä¸ºï¼›(å¸¸ç”¨) -sï¼šå¤åˆ¶æˆä¸ºç¬¦å·è¿ç»“æ¡£ (symbolic link)ï¼Œäº¦å³ã€æ·å¾„ã€æ–‡ä»¶ï¼› -uï¼šè‹¥ destination æ¯” source æ—§æ‰å‡çº§ destination ï¼ ç”¨ root èº«ä»½ï¼Œå°† root ç›®å½•ä¸‹çš„ .bashrc å¤åˆ¶åˆ° /tmp ä¸‹ï¼Œå¹¶å‘½åä¸º bashrc [root@www ~]# cp ~/.bashrc /tmp/bashrc [root@www ~]# cp -i ~/.bashrc /tmp/bashrc cp: overwrite `/tmp/bashrc'? n &lt;==nä¸è¦†ç›–ï¼Œyä¸ºè¦†ç›– - rm (ç§»é™¤æ–‡ä»¶æˆ–ç›®å½•) è¯­æ³•ï¼š rm [-fir] æ–‡ä»¶æˆ–ç›®å½• é€‰é¡¹ä¸å‚æ•°ï¼š -f ï¼šå°±æ˜¯ force çš„æ„æ€ï¼Œå¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸ä¼šå‡ºç°è­¦å‘Šä¿¡æ¯ï¼› -i ï¼šäº’åŠ¨æ¨¡å¼ï¼Œåœ¨åˆ é™¤å‰ä¼šè¯¢é—®ä½¿ç”¨è€…æ˜¯å¦åŠ¨ä½œ -r ï¼šé€’å½’åˆ é™¤å•Šï¼æœ€å¸¸ç”¨åœ¨ç›®å½•çš„åˆ é™¤äº†ï¼è¿™æ˜¯éå¸¸å±é™©çš„é€‰é¡¹ï¼ï¼ï¼ å°†åˆšåˆšåœ¨ cp çš„å®ä¾‹ä¸­åˆ›å»ºçš„ bashrc åˆ é™¤æ‰ï¼ [root@www tmp]# rm -i bashrc rm: remove regular file `bashrc'? y å¦‚æœåŠ ä¸Š -i çš„é€‰é¡¹å°±ä¼šä¸»åŠ¨è¯¢é—®å–”ï¼Œé¿å…ä½ åˆ é™¤åˆ°é”™è¯¯çš„æ¡£åï¼ - mv (ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹åç§°) è¯­æ³•ï¼š [root@www ~]# mv [-fiu] source destination [root@www ~]# mv [options] source1 source2 source3 .... directory é€‰é¡¹ä¸å‚æ•°ï¼š -f ï¼šforce å¼ºåˆ¶çš„æ„æ€ï¼Œå¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸ä¼šè¯¢é—®è€Œç›´æ¥è¦†ç›–ï¼› -i ï¼šè‹¥ç›®æ ‡æ–‡ä»¶ (destination) å·²ç»å­˜åœ¨æ—¶ï¼Œå°±ä¼šè¯¢é—®æ˜¯å¦è¦†ç›–ï¼ -u ï¼šè‹¥ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸” source æ¯”è¾ƒæ–°ï¼Œæ‰ä¼šå‡çº§ (update) å¤åˆ¶ä¸€æ–‡ä»¶ï¼Œåˆ›å»ºä¸€ç›®å½•ï¼Œå°†æ–‡ä»¶ç§»åŠ¨åˆ°ç›®å½•ä¸­ [root@www ~]# cd /tmp [root@www tmp]# cp ~/.bashrc bashrc [root@www tmp]# mkdir mvtest [root@www tmp]# mv bashrc mvtest å°†æŸä¸ªæ–‡ä»¶ç§»åŠ¨åˆ°æŸä¸ªç›®å½•å»ï¼Œå°±æ˜¯è¿™æ ·åšï¼ å°†åˆšåˆšçš„ç›®å½•åç§°æ›´åä¸º mvtest2 [root@www tmp]# mv mvtest mvtest2 - Linux æ–‡ä»¶å†…å®¹æŸ¥çœ‹ Linuxç³»ç»Ÿä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ï¼š cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ tac ä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹å‡º tac æ˜¯ cat çš„å€’ç€å†™ï¼ nl æ˜¾ç¤ºçš„æ—¶å€™ï¼Œé¡ºé“è¾“å‡ºè¡Œå·ï¼ more ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ less ä¸ more ç±»ä¼¼ï¼Œä½†æ˜¯æ¯” more æ›´å¥½çš„æ˜¯ï¼Œä»–å¯ä»¥å¾€å‰ç¿»é¡µï¼ head åªçœ‹å¤´å‡ è¡Œ tail åªçœ‹å°¾å·´å‡ è¡Œ ä½ å¯ä»¥ä½¿ç”¨ man [å‘½ä»¤]æ¥æŸ¥çœ‹å„ä¸ªå‘½ä»¤çš„ä½¿ç”¨æ–‡æ¡£ï¼Œå¦‚ ï¼šman cpã€‚ - cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ è¯­æ³•ï¼š cat [-AbEnTv] é€‰é¡¹ä¸å‚æ•°ï¼š -A ï¼šç›¸å½“æ–¼ -vET çš„æ•´åˆé€‰é¡¹ï¼Œå¯åˆ—å‡ºä¸€äº›ç‰¹æ®Šå­—ç¬¦è€Œä¸æ˜¯ç©ºç™½è€Œå·²ï¼› -b ï¼šåˆ—å‡ºè¡Œå·ï¼Œä»…é’ˆå¯¹éç©ºç™½è¡Œåšè¡Œå·æ˜¾ç¤ºï¼Œç©ºç™½è¡Œä¸æ ‡è¡Œå·ï¼ -E ï¼šå°†ç»“å°¾çš„æ–­è¡Œå­—èŠ‚ $ æ˜¾ç¤ºå‡ºæ¥ï¼› -n ï¼šåˆ—å°å‡ºè¡Œå·ï¼Œè¿åŒç©ºç™½è¡Œä¹Ÿä¼šæœ‰è¡Œå·ï¼Œä¸ -b çš„é€‰é¡¹ä¸åŒï¼› -T ï¼šå°† [tab] æŒ‰é”®ä»¥ ^I æ˜¾ç¤ºå‡ºæ¥ï¼› -v ï¼šåˆ—å‡ºä¸€äº›çœ‹ä¸å‡ºæ¥çš„ç‰¹æ®Šå­—ç¬¦ æ£€çœ‹ /etc/issue è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š [root@www ~]# cat /etc/issue CentOS release 6.4 (Final) Kernel \\r on an \\m - tac tacä¸catå‘½ä»¤åˆšå¥½ç›¸åï¼Œæ–‡ä»¶å†…å®¹ä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹å‡º tac æ˜¯ cat çš„å€’ç€å†™ï¼å¦‚ï¼š [root@www ~]# tac /etc/issue Kernel \\r on an \\m CentOS release 6.4 (Final) - nl æ˜¾ç¤ºè¡Œå· è¯­æ³•ï¼š nl [-bnw] æ–‡ä»¶ é€‰é¡¹ä¸å‚æ•°ï¼š -b ï¼šæŒ‡å®šè¡Œå·æŒ‡å®šçš„æ–¹å¼ï¼Œä¸»è¦æœ‰ä¸¤ç§ï¼š -b a ï¼šè¡¨ç¤ºä¸è®ºæ˜¯å¦ä¸ºç©ºè¡Œï¼Œä¹ŸåŒæ ·åˆ—å‡ºè¡Œå·(ç±»ä¼¼ cat -n)ï¼› -b t ï¼šå¦‚æœæœ‰ç©ºè¡Œï¼Œç©ºçš„é‚£ä¸€è¡Œä¸è¦åˆ—å‡ºè¡Œå·(é»˜è®¤å€¼)ï¼› -n ï¼šåˆ—å‡ºè¡Œå·è¡¨ç¤ºçš„æ–¹æ³•ï¼Œä¸»è¦æœ‰ä¸‰ç§ï¼š -n ln ï¼šè¡Œå·åœ¨è§å¹•çš„æœ€å·¦æ–¹æ˜¾ç¤ºï¼› -n rn ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”ä¸åŠ  0 ï¼› -n rz ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”åŠ  0 ï¼› -w ï¼šè¡Œå·æ ä½çš„å ç”¨çš„ä½æ•°ã€‚ å®ä¾‹ä¸€ï¼šç”¨ nl åˆ—å‡º /etc/issue çš„å†…å®¹ [root@www ~]# nl /etc/issue 1 CentOS release 6.4 (Final) 2 Kernel \\r on an \\m - more ä¸€é¡µä¸€é¡µç¿»åŠ¨ [root@www ~]# more /etc/man_db.config Generated automatically from man.conf.in by the configure script. man.conf from man-1.6d ....(ä¸­é—´çœç•¥).... --More--(28%) &lt;== é‡ç‚¹åœ¨è¿™ä¸€è¡Œå–”ï¼ä½ çš„å…‰æ ‡ä¹Ÿä¼šåœ¨è¿™é‡Œç­‰å¾…ä½ çš„å‘½ä»¤ åœ¨ more è¿™ä¸ªç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä½ æœ‰å‡ ä¸ªæŒ‰é”®å¯ä»¥æŒ‰çš„ï¼š ç©ºç™½é”® (space)ï¼šä»£è¡¨å‘ä¸‹ç¿»ä¸€é¡µï¼› Enter ï¼šä»£è¡¨å‘ä¸‹ç¿»ã€ä¸€è¡Œã€ï¼› /å­—ä¸² ï¼šä»£è¡¨åœ¨è¿™ä¸ªæ˜¾ç¤ºçš„å†…å®¹å½“ä¸­ï¼Œå‘ä¸‹æœå¯»ã€å­—ä¸²ã€è¿™ä¸ªå…³é”®å­—ï¼› :f ï¼šç«‹åˆ»æ˜¾ç¤ºå‡ºæ¡£åä»¥åŠç›®å‰æ˜¾ç¤ºçš„è¡Œæ•°ï¼› q ï¼šä»£è¡¨ç«‹åˆ»ç¦»å¼€ more ï¼Œä¸å†æ˜¾ç¤ºè¯¥æ–‡ä»¶å†…å®¹ã€‚ b æˆ– [ctrl]-b ï¼šä»£è¡¨å¾€å›ç¿»é¡µï¼Œä¸è¿‡è¿™åŠ¨ä½œåªå¯¹æ–‡ä»¶æœ‰ç”¨ï¼Œå¯¹ç®¡çº¿æ— ç”¨ã€‚ - less ä¸€é¡µä¸€é¡µç¿»åŠ¨ï¼Œä»¥ä¸‹å®ä¾‹è¾“å‡º/etc/man.configæ–‡ä»¶çš„å†…å®¹ï¼š [root@www ~]# less /etc/man.config Generated automatically from man.conf.in by the configure script. man.conf from man-1.6d ....(ä¸­é—´çœç•¥).... &lt;== è¿™é‡Œå¯ä»¥ç­‰å¾…ä½ è¾“å…¥å‘½ä»¤ï¼ lessè¿è¡Œæ—¶å¯ä»¥è¾“å…¥çš„å‘½ä»¤æœ‰ï¼š ç©ºç™½é”® ï¼šå‘ä¸‹ç¿»åŠ¨ä¸€é¡µï¼› [pagedown]ï¼šå‘ä¸‹ç¿»åŠ¨ä¸€é¡µï¼› [pageup] ï¼šå‘ä¸Šç¿»åŠ¨ä¸€é¡µï¼› /å­—ä¸² ï¼šå‘ä¸‹æœå¯»ã€å­—ä¸²ã€çš„åŠŸèƒ½ï¼› ?å­—ä¸² ï¼šå‘ä¸Šæœå¯»ã€å­—ä¸²ã€çš„åŠŸèƒ½ï¼› n ï¼šé‡å¤å‰ä¸€ä¸ªæœå¯» (ä¸ / æˆ– ? æœ‰å…³ï¼) N ï¼šåå‘çš„é‡å¤å‰ä¸€ä¸ªæœå¯» (ä¸ / æˆ– ? æœ‰å…³ï¼) q ï¼šç¦»å¼€ less è¿™ä¸ªç¨‹åºï¼› - head å–å‡ºæ–‡ä»¶å‰é¢å‡ è¡Œ è¯­æ³•ï¼š head [-n number] æ–‡ä»¶ é€‰é¡¹ä¸å‚æ•°ï¼š -n ï¼šåé¢æ¥æ•°å­—ï¼Œä»£è¡¨æ˜¾ç¤ºå‡ è¡Œçš„æ„æ€ [root@www ~]# head /etc/man.config é»˜è®¤çš„æƒ…å†µä¸­ï¼Œæ˜¾ç¤ºå‰é¢ 10 è¡Œï¼è‹¥è¦æ˜¾ç¤ºå‰ 20 è¡Œï¼Œå°±å¾—è¦è¿™æ ·ï¼š [root@www ~]# head -n 20 /etc/man.config - tail å–å‡ºæ–‡ä»¶åé¢å‡ è¡Œ è¯­æ³•ï¼š tail [-n number] æ–‡ä»¶ é€‰é¡¹ä¸å‚æ•°ï¼š -n ï¼šåé¢æ¥æ•°å­—ï¼Œä»£è¡¨æ˜¾ç¤ºå‡ è¡Œçš„æ„æ€ -f ï¼šè¡¨ç¤ºæŒç»­ä¾¦æµ‹åé¢æ‰€æ¥çš„æ¡£åï¼Œè¦ç­‰åˆ°æŒ‰ä¸‹[ctrl]-cæ‰ä¼šç»“æŸtailçš„ä¾¦æµ‹ [root@www ~]# tail /etc/man.config é»˜è®¤çš„æƒ…å†µä¸­ï¼Œæ˜¾ç¤ºæœ€åçš„åè¡Œï¼è‹¥è¦æ˜¾ç¤ºæœ€åçš„ 20 è¡Œï¼Œå°±å¾—è¦è¿™æ ·ï¼š [root@www ~]# tail -n 20 /etc/man.config ç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç† Linuxç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å¤šä»»åŠ¡çš„åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªè¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·ï¼Œéƒ½å¿…é¡»é¦–å…ˆå‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åä»¥è¿™ä¸ªè´¦å·çš„èº«ä»½è¿›å…¥ç³»ç»Ÿã€‚ ç”¨æˆ·çš„è´¦å·ä¸€æ–¹é¢å¯ä»¥å¸®åŠ©ç³»ç»Ÿç®¡ç†å‘˜å¯¹ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·è¿›è¡Œè·Ÿè¸ªï¼Œå¹¶æ§åˆ¶ä»–ä»¬å¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®ï¼›å¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·ç»„ç»‡æ–‡ä»¶ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›å®‰å…¨æ€§ä¿æŠ¤ã€‚ æ¯ä¸ªç”¨æˆ·è´¦å·éƒ½æ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç”¨æˆ·åå’Œå„è‡ªçš„å£ä»¤ã€‚ ç”¨æˆ·åœ¨ç™»å½•æ—¶é”®å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå£ä»¤åï¼Œå°±èƒ½å¤Ÿè¿›å…¥ç³»ç»Ÿå’Œè‡ªå·±çš„ä¸»ç›®å½•ã€‚ å®ç°ç”¨æˆ·è´¦å·çš„ç®¡ç†ï¼Œè¦å®Œæˆçš„å·¥ä½œä¸»è¦æœ‰å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š ç”¨æˆ·è´¦å·çš„æ·»åŠ ã€åˆ é™¤ä¸ä¿®æ”¹ã€‚ ç”¨æˆ·å£ä»¤çš„ç®¡ç†ã€‚ ç”¨æˆ·ç»„çš„ç®¡ç†ã€‚ ä¸€ã€Linuxç³»ç»Ÿç”¨æˆ·è´¦å·çš„ç®¡ç† ç”¨æˆ·è´¦å·çš„ç®¡ç†å·¥ä½œä¸»è¦æ¶‰åŠåˆ°ç”¨æˆ·è´¦å·çš„æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤ã€‚ æ·»åŠ ç”¨æˆ·è´¦å·å°±æ˜¯åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªæ–°è´¦å·ï¼Œç„¶åä¸ºæ–°è´¦å·åˆ†é…ç”¨æˆ·å·ã€ç”¨æˆ·ç»„ã€ä¸»ç›®å½•å’Œç™»å½•Shellç­‰èµ„æºã€‚åˆšæ·»åŠ çš„è´¦å·æ˜¯è¢«é”å®šçš„ï¼Œæ— æ³•ä½¿ç”¨ã€‚ 1ã€æ·»åŠ æ–°çš„ç”¨æˆ·è´¦å·ä½¿ç”¨useraddå‘½ä»¤ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š useradd é€‰é¡¹ ç”¨æˆ·å å‚æ•°è¯´æ˜ï¼š é€‰é¡¹: -c comment æŒ‡å®šä¸€æ®µæ³¨é‡Šæ€§æè¿°ã€‚ -d ç›®å½• æŒ‡å®šç”¨æˆ·ä¸»ç›®å½•ï¼Œå¦‚æœæ­¤ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åŒæ—¶ä½¿ç”¨-mé€‰é¡¹ï¼Œå¯ä»¥åˆ›å»ºä¸»ç›®å½•ã€‚ -g ç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚ -G ç”¨æˆ·ç»„ï¼Œç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„é™„åŠ ç»„ã€‚ -s Shellæ–‡ä»¶ æŒ‡å®šç”¨æˆ·çš„ç™»å½•Shellã€‚ -u ç”¨æˆ·å· æŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·å·ï¼Œå¦‚æœåŒæ—¶æœ‰-oé€‰é¡¹ï¼Œåˆ™å¯ä»¥é‡å¤ä½¿ç”¨å…¶ä»–ç”¨æˆ·çš„æ ‡è¯†å·ã€‚ ç”¨æˆ·å: æŒ‡å®šæ–°è´¦å·çš„ç™»å½•åã€‚ å®ä¾‹1 useradd â€“d /home/sam -m sam æ­¤å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªç”¨æˆ·samï¼Œå…¶ä¸­-då’Œ-mé€‰é¡¹ç”¨æ¥ä¸ºç™»å½•åsamäº§ç”Ÿä¸€ä¸ªä¸»ç›®å½• /home/samï¼ˆ/homeä¸ºé»˜è®¤çš„ç”¨æˆ·ä¸»ç›®å½•æ‰€åœ¨çš„çˆ¶ç›®å½•ï¼‰ã€‚ å®ä¾‹2 useradd -s /bin/sh -g group â€“G adm,root gem æ­¤å‘½ä»¤æ–°å»ºäº†ä¸€ä¸ªç”¨æˆ·gemï¼Œè¯¥ç”¨æˆ·çš„ç™»å½•Shellæ˜¯ /bin/shï¼Œå®ƒå±äºgroupç”¨æˆ·ç»„ï¼ŒåŒæ—¶åˆå±äºadmå’Œrootç”¨æˆ·ç»„ï¼Œå…¶ä¸­groupç”¨æˆ·ç»„æ˜¯å…¶ä¸»ç»„ã€‚ è¿™é‡Œå¯èƒ½æ–°å»ºç»„ï¼š#groupadd groupåŠgroupadd adm å¢åŠ ç”¨æˆ·è´¦å·å°±æ˜¯åœ¨/etc/passwdæ–‡ä»¶ä¸­ä¸ºæ–°ç”¨æˆ·å¢åŠ ä¸€æ¡è®°å½•ï¼ŒåŒæ—¶æ›´æ–°å…¶ä»–ç³»ç»Ÿæ–‡ä»¶å¦‚/etc/shadow, /etc/groupç­‰ã€‚ Linuxæä¾›äº†é›†æˆçš„ç³»ç»Ÿç®¡ç†å·¥å…·userconfï¼Œå®ƒå¯ä»¥ç”¨æ¥å¯¹ç”¨æˆ·è´¦å·è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚ 2ã€åˆ é™¤å¸å· å¦‚æœä¸€ä¸ªç”¨æˆ·çš„è´¦å·ä¸å†ä½¿ç”¨ï¼Œå¯ä»¥ä»ç³»ç»Ÿä¸­åˆ é™¤ã€‚åˆ é™¤ç”¨æˆ·è´¦å·å°±æ˜¯è¦å°†/etc/passwdç­‰ç³»ç»Ÿæ–‡ä»¶ä¸­çš„è¯¥ç”¨æˆ·è®°å½•åˆ é™¤ï¼Œå¿…è¦æ—¶è¿˜åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚ åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·è´¦å·ä½¿ç”¨userdelå‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š userdel é€‰é¡¹ ç”¨æˆ·å å¸¸ç”¨çš„é€‰é¡¹æ˜¯ -rï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠç”¨æˆ·çš„ä¸»ç›®å½•ä¸€èµ·åˆ é™¤ã€‚ ä¾‹å¦‚ï¼š userdel -r sam æ­¤å‘½ä»¤åˆ é™¤ç”¨æˆ·samåœ¨ç³»ç»Ÿæ–‡ä»¶ä¸­ï¼ˆä¸»è¦æ˜¯/etc/passwd, /etc/shadow, /etc/groupç­‰ï¼‰çš„è®°å½•ï¼ŒåŒæ—¶åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚ 3ã€ä¿®æ”¹å¸å· ä¿®æ”¹ç”¨æˆ·è´¦å·å°±æ˜¯æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹ç”¨æˆ·çš„æœ‰å…³å±æ€§ï¼Œå¦‚ç”¨æˆ·å·ã€ä¸»ç›®å½•ã€ç”¨æˆ·ç»„ã€ç™»å½•Shellç­‰ã€‚ ä¿®æ”¹å·²æœ‰ç”¨æˆ·çš„ä¿¡æ¯ä½¿ç”¨usermodå‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š usermod é€‰é¡¹ ç”¨æˆ·å å¸¸ç”¨çš„é€‰é¡¹åŒ…æ‹¬-c, -d, -m, -g, -G, -s, -uä»¥åŠ-oç­‰ï¼Œè¿™äº›é€‰é¡¹çš„æ„ä¹‰ä¸useraddå‘½ä»¤ä¸­çš„é€‰é¡¹ä¸€æ ·ï¼Œå¯ä»¥ä¸ºç”¨æˆ·æŒ‡å®šæ–°çš„èµ„æºå€¼ã€‚ å¦å¤–ï¼Œæœ‰äº›ç³»ç»Ÿå¯ä»¥ä½¿ç”¨é€‰é¡¹ï¼š-l æ–°ç”¨æˆ·å è¿™ä¸ªé€‰é¡¹æŒ‡å®šä¸€ä¸ªæ–°çš„è´¦å·ï¼Œå³å°†åŸæ¥çš„ç”¨æˆ·åæ”¹ä¸ºæ–°çš„ç”¨æˆ·åã€‚ ä¾‹å¦‚ï¼š usermod -s /bin/ksh -d /home/z â€“g developer sam æ­¤å‘½ä»¤å°†ç”¨æˆ·samçš„ç™»å½•Shellä¿®æ”¹ä¸ºkshï¼Œä¸»ç›®å½•æ”¹ä¸º/home/zï¼Œç”¨æˆ·ç»„æ”¹ä¸ºdeveloperã€‚ 4ã€ç”¨æˆ·å£ä»¤çš„ç®¡ç† ç”¨æˆ·ç®¡ç†çš„ä¸€é¡¹é‡è¦å†…å®¹æ˜¯ç”¨æˆ·å£ä»¤çš„ç®¡ç†ã€‚ç”¨æˆ·è´¦å·åˆšåˆ›å»ºæ—¶æ²¡æœ‰å£ä»¤ï¼Œä½†æ˜¯è¢«ç³»ç»Ÿé”å®šï¼Œæ— æ³•ä½¿ç”¨ï¼Œå¿…é¡»ä¸ºå…¶æŒ‡å®šå£ä»¤åæ‰å¯ä»¥ä½¿ç”¨ï¼Œå³ä½¿æ˜¯æŒ‡å®šç©ºå£ä»¤ã€‚ æŒ‡å®šå’Œä¿®æ”¹ç”¨æˆ·å£ä»¤çš„Shellå‘½ä»¤æ˜¯passwdã€‚è¶…çº§ç”¨æˆ·å¯ä»¥ä¸ºè‡ªå·±å’Œå…¶ä»–ç”¨æˆ·æŒ‡å®šå£ä»¤ï¼Œæ™®é€šç”¨æˆ·åªèƒ½ç”¨å®ƒä¿®æ”¹è‡ªå·±çš„å£ä»¤ã€‚å‘½ä»¤çš„æ ¼å¼ä¸ºï¼š passwd é€‰é¡¹ ç”¨æˆ·å å¯ä½¿ç”¨çš„é€‰é¡¹ï¼š -l é”å®šå£ä»¤ï¼Œå³ç¦ç”¨è´¦å·ã€‚ -u å£ä»¤è§£é”ã€‚ -d ä½¿è´¦å·æ— å£ä»¤ã€‚ -f å¼ºè¿«ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶ä¿®æ”¹å£ä»¤ã€‚ å¦‚æœé»˜è®¤ç”¨æˆ·åï¼Œåˆ™ä¿®æ”¹å½“å‰ç”¨æˆ·çš„å£ä»¤ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾å½“å‰ç”¨æˆ·æ˜¯samï¼Œåˆ™ä¸‹é¢çš„å‘½ä»¤ä¿®æ”¹è¯¥ç”¨æˆ·è‡ªå·±çš„å£ä»¤ï¼š $ passwd Old password:****** New password:******* Re-enter new password:******* å¦‚æœæ˜¯è¶…çº§ç”¨æˆ·ï¼Œå¯ä»¥ç”¨ä¸‹åˆ—å½¢å¼æŒ‡å®šä»»ä½•ç”¨æˆ·çš„å£ä»¤ï¼š passwd sam New password:******* Re-enter new password:******* æ™®é€šç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„å£ä»¤æ—¶ï¼Œpasswdå‘½ä»¤ä¼šå…ˆè¯¢é—®åŸå£ä»¤ï¼ŒéªŒè¯åå†è¦æ±‚ç”¨æˆ·è¾“å…¥ä¸¤éæ–°å£ä»¤ï¼Œå¦‚æœä¸¤æ¬¡è¾“å…¥çš„å£ä»¤ä¸€è‡´ï¼Œåˆ™å°†è¿™ä¸ªå£ä»¤æŒ‡å®šç»™ç”¨æˆ·ï¼›è€Œè¶…çº§ç”¨æˆ·ä¸ºç”¨æˆ·æŒ‡å®šå£ä»¤æ—¶ï¼Œå°±ä¸éœ€è¦çŸ¥é“åŸå£ä»¤ã€‚ ä¸ºäº†ç³»ç»Ÿå®‰å…¨èµ·è§ï¼Œç”¨æˆ·åº”è¯¥é€‰æ‹©æ¯”è¾ƒå¤æ‚çš„å£ä»¤ï¼Œä¾‹å¦‚æœ€å¥½ä½¿ç”¨8ä½é•¿çš„å£ä»¤ï¼Œå£ä»¤ä¸­åŒ…å«æœ‰å¤§å†™ã€å°å†™å­—æ¯å’Œæ•°å­—ï¼Œå¹¶ä¸”åº”è¯¥ä¸å§“åã€ç”Ÿæ—¥ç­‰ä¸ç›¸åŒã€‚ ä¸ºç”¨æˆ·æŒ‡å®šç©ºå£ä»¤æ—¶ï¼Œæ‰§è¡Œä¸‹åˆ—å½¢å¼çš„å‘½ä»¤ï¼š passwd -d sam æ­¤å‘½ä»¤å°†ç”¨æˆ· sam çš„å£ä»¤åˆ é™¤ï¼Œè¿™æ ·ç”¨æˆ· sam ä¸‹ä¸€æ¬¡ç™»å½•æ—¶ï¼Œç³»ç»Ÿå°±ä¸å†å…è®¸è¯¥ç”¨æˆ·ç™»å½•äº†ã€‚ passwd å‘½ä»¤è¿˜å¯ä»¥ç”¨ -l(lock) é€‰é¡¹é”å®šæŸä¸€ç”¨æˆ·ï¼Œä½¿å…¶ä¸èƒ½ç™»å½•ï¼Œä¾‹å¦‚ï¼š passwd -l sam äºŒã€Linuxç³»ç»Ÿç”¨æˆ·ç»„çš„ç®¡ç† æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œç³»ç»Ÿå¯ä»¥å¯¹ä¸€ä¸ªç”¨æˆ·ç»„ä¸­çš„æ‰€æœ‰ç”¨æˆ·è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚ä¸åŒLinux ç³»ç»Ÿå¯¹ç”¨æˆ·ç»„çš„è§„å®šæœ‰æ‰€ä¸åŒï¼Œå¦‚Linuxä¸‹çš„ç”¨æˆ·å±äºä¸å®ƒåŒåçš„ç”¨æˆ·ç»„ï¼Œè¿™ä¸ªç”¨æˆ·ç»„åœ¨åˆ›å»ºç”¨æˆ·æ—¶åŒæ—¶åˆ›å»ºã€‚ ç”¨æˆ·ç»„çš„ç®¡ç†æ¶‰åŠç”¨æˆ·ç»„çš„æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹ã€‚ç»„çš„å¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹å®é™…ä¸Šå°±æ˜¯å¯¹/etc/groupæ–‡ä»¶çš„æ›´æ–°ã€‚ 1ã€å¢åŠ ä¸€ä¸ªæ–°çš„ç”¨æˆ·ç»„ä½¿ç”¨groupaddå‘½ä»¤ã€‚å…¶æ ¼å¼å¦‚ä¸‹ï¼š groupadd é€‰é¡¹ ç”¨æˆ·ç»„ å¯ä»¥ä½¿ç”¨çš„é€‰é¡¹æœ‰ï¼š -g GID æŒ‡å®šæ–°ç”¨æˆ·ç»„çš„ç»„æ ‡è¯†å·ï¼ˆGIDï¼‰ã€‚ -o ä¸€èˆ¬ä¸-gé€‰é¡¹åŒæ—¶ä½¿ç”¨ï¼Œè¡¨ç¤ºæ–°ç”¨æˆ·ç»„çš„GIDå¯ä»¥ä¸ç³»ç»Ÿå·²æœ‰ç”¨æˆ·ç»„çš„GIDç›¸åŒã€‚ å®ä¾‹1ï¼š groupadd group1 æ­¤å‘½ä»¤å‘ç³»ç»Ÿä¸­å¢åŠ äº†ä¸€ä¸ªæ–°ç»„group1ï¼Œæ–°ç»„çš„ç»„æ ‡è¯†å·æ˜¯åœ¨å½“å‰å·²æœ‰çš„æœ€å¤§ç»„æ ‡è¯†å·çš„åŸºç¡€ä¸ŠåŠ 1ã€‚ å®ä¾‹2ï¼š groupadd -g 101 group2 æ­¤å‘½ä»¤å‘ç³»ç»Ÿä¸­å¢åŠ äº†ä¸€ä¸ªæ–°ç»„group2ï¼ŒåŒæ—¶æŒ‡å®šæ–°ç»„çš„ç»„æ ‡è¯†å·æ˜¯101ã€‚ 2ã€å¦‚æœè¦åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·ç»„ï¼Œä½¿ç”¨groupdelå‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š groupdel ç”¨æˆ·ç»„ ä¾‹å¦‚ï¼š groupdel group1 æ­¤å‘½ä»¤ä»ç³»ç»Ÿä¸­åˆ é™¤ç»„group1ã€‚ 3ã€ä¿®æ”¹ç”¨æˆ·ç»„çš„å±æ€§ä½¿ç”¨groupmodå‘½ä»¤ã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š groupmod é€‰é¡¹ ç”¨æˆ·ç»„ å¸¸ç”¨çš„é€‰é¡¹æœ‰ï¼š -g GID ä¸ºç”¨æˆ·ç»„æŒ‡å®šæ–°çš„ç»„æ ‡è¯†å·ã€‚ -o ä¸-gé€‰é¡¹åŒæ—¶ä½¿ç”¨ï¼Œç”¨æˆ·ç»„çš„æ–°GIDå¯ä»¥ä¸ç³»ç»Ÿå·²æœ‰ç”¨æˆ·ç»„çš„GIDç›¸åŒã€‚ -næ–°ç”¨æˆ·ç»„ å°†ç”¨æˆ·ç»„çš„åå­—æ”¹ä¸ºæ–°åå­— å®ä¾‹1ï¼š groupmod -g 102 group2 æ­¤å‘½ä»¤å°†ç»„group2çš„ç»„æ ‡è¯†å·ä¿®æ”¹ä¸º102ã€‚ å®ä¾‹2ï¼š groupmod â€“g 10000 -n group3 group2 æ­¤å‘½ä»¤å°†ç»„group2çš„æ ‡è¯†å·æ”¹ä¸º10000ï¼Œç»„åä¿®æ”¹ä¸ºgroup3ã€‚ 4ã€å¦‚æœä¸€ä¸ªç”¨æˆ·åŒæ—¶å±äºå¤šä¸ªç”¨æˆ·ç»„ï¼Œé‚£ä¹ˆç”¨æˆ·å¯ä»¥åœ¨ç”¨æˆ·ç»„ä¹‹é—´åˆ‡æ¢ï¼Œä»¥ä¾¿å…·æœ‰å…¶ä»–ç”¨æˆ·ç»„çš„æƒé™ã€‚ ç”¨æˆ·å¯ä»¥åœ¨ç™»å½•åï¼Œä½¿ç”¨å‘½ä»¤newgrpåˆ‡æ¢åˆ°å…¶ä»–ç”¨æˆ·ç»„ï¼Œè¿™ä¸ªå‘½ä»¤çš„å‚æ•°å°±æ˜¯ç›®çš„ç”¨æˆ·ç»„ã€‚ä¾‹å¦‚ï¼š $ newgrp root è¿™æ¡å‘½ä»¤å°†å½“å‰ç”¨æˆ·åˆ‡æ¢åˆ°rootç”¨æˆ·ç»„ï¼Œå‰ææ¡ä»¶æ˜¯rootç”¨æˆ·ç»„ç¡®å®æ˜¯è¯¥ç”¨æˆ·çš„ä¸»ç»„æˆ–é™„åŠ ç»„ã€‚ç±»ä¼¼äºç”¨æˆ·è´¦å·çš„ç®¡ç†ï¼Œç”¨æˆ·ç»„çš„ç®¡ç†ä¹Ÿå¯ä»¥é€šè¿‡é›†æˆçš„ç³»ç»Ÿç®¡ç†å·¥å…·æ¥å®Œæˆã€‚ ä¸‰ã€ä¸ç”¨æˆ·è´¦å·æœ‰å…³çš„ç³»ç»Ÿæ–‡ä»¶ å®Œæˆç”¨æˆ·ç®¡ç†çš„å·¥ä½œæœ‰è®¸å¤šç§æ–¹æ³•ï¼Œä½†æ˜¯æ¯ä¸€ç§æ–¹æ³•å®é™…ä¸Šéƒ½æ˜¯å¯¹æœ‰å…³çš„ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚ ä¸ç”¨æˆ·å’Œç”¨æˆ·ç»„ç›¸å…³çš„ä¿¡æ¯éƒ½å­˜æ”¾åœ¨ä¸€äº›ç³»ç»Ÿæ–‡ä»¶ä¸­ï¼Œè¿™äº›æ–‡ä»¶åŒ…æ‹¬/etc/passwd, /etc/shadow, /etc/groupç­‰ã€‚ ä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™äº›æ–‡ä»¶çš„å†…å®¹ã€‚ 1ã€/etc/passwdæ–‡ä»¶æ˜¯ç”¨æˆ·ç®¡ç†å·¥ä½œæ¶‰åŠçš„æœ€é‡è¦çš„ä¸€ä¸ªæ–‡ä»¶ã€‚ Linuxç³»ç»Ÿä¸­çš„æ¯ä¸ªç”¨æˆ·éƒ½åœ¨/etc/passwdæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªå¯¹åº”çš„è®°å½•è¡Œï¼Œå®ƒè®°å½•äº†è¿™ä¸ªç”¨æˆ·çš„ä¸€äº›åŸºæœ¬å±æ€§ã€‚ è¿™ä¸ªæ–‡ä»¶å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æ˜¯å¯è¯»çš„ã€‚å®ƒçš„å†…å®¹ç±»ä¼¼ä¸‹é¢çš„ä¾‹å­ï¼š ï¼ƒ cat /etc/passwd rootâŒ0:0:Superuser:/: daemonâŒ1:1:System daemons:/etc: binâŒ2:2:Owner of system commands:/bin: sysâŒ3:3:Owner of system files:/usr/sys: admâŒ4:4:System accounting:/usr/adm: uucpâŒ5:5:UUCP administrator:/usr/lib/uucp: authâŒ7:21:Authentication administrator:/tcb/files/auth: cronâŒ9:16:Cron daemon:/usr/spool/cron: listenâŒ37:4:Network daemon:/usr/net/nls: lpâŒ71:18:Printer administrator:/usr/spool/lp: samâŒ200:50:Sam san:/home/sam:/bin/sh ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ/etc/passwdä¸­ä¸€è¡Œè®°å½•å¯¹åº”ç€ä¸€ä¸ªç”¨æˆ·ï¼Œæ¯è¡Œè®°å½•åˆè¢«å†’å·(:)åˆ†éš”ä¸º7ä¸ªå­—æ®µï¼Œå…¶æ ¼å¼å’Œå…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š ç”¨æˆ·å:å£ä»¤:ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell 1ï¼‰&quot;ç”¨æˆ·å&quot;æ˜¯ä»£è¡¨ç”¨æˆ·è´¦å·çš„å­—ç¬¦ä¸²ã€‚ é€šå¸¸é•¿åº¦ä¸è¶…è¿‡8ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”ç”±å¤§å°å†™å­—æ¯å’Œ/æˆ–æ•°å­—ç»„æˆã€‚ç™»å½•åä¸­ä¸èƒ½æœ‰å†’å·(ğŸ˜ƒï¼Œå› ä¸ºå†’å·åœ¨è¿™é‡Œæ˜¯åˆ†éš”ç¬¦ã€‚ ä¸ºäº†å…¼å®¹èµ·è§ï¼Œç™»å½•åä¸­æœ€å¥½ä¸è¦åŒ…å«ç‚¹å­—ç¬¦(.)ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨è¿å­—ç¬¦(-)å’ŒåŠ å·(+)æ‰“å¤´ã€‚ 2ï¼‰â€œå£ä»¤â€ä¸€äº›ç³»ç»Ÿä¸­ï¼Œå­˜æ”¾ç€åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—ã€‚ è™½ç„¶è¿™ä¸ªå­—æ®µå­˜æ”¾çš„åªæ˜¯ç”¨æˆ·å£ä»¤çš„åŠ å¯†ä¸²ï¼Œä¸æ˜¯æ˜æ–‡ï¼Œä½†æ˜¯ç”±äº/etc/passwdæ–‡ä»¶å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½å¯è¯»ï¼Œæ‰€ä»¥è¿™ä»æ˜¯ä¸€ä¸ªå®‰å…¨éšæ‚£ã€‚å› æ­¤ï¼Œç°åœ¨è®¸å¤šLinux ç³»ç»Ÿï¼ˆå¦‚SVR4ï¼‰éƒ½ä½¿ç”¨äº†shadowæŠ€æœ¯ï¼ŒæŠŠçœŸæ­£çš„åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—å­˜æ”¾åˆ°/etc/shadowæ–‡ä»¶ä¸­ï¼Œè€Œåœ¨/etc/passwdæ–‡ä»¶çš„å£ä»¤å­—æ®µä¸­åªå­˜æ”¾ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ï¼Œä¾‹å¦‚â€œxâ€æˆ–è€…â€œ*â€ã€‚ 3ï¼‰â€œç”¨æˆ·æ ‡è¯†å·â€æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œç³»ç»Ÿå†…éƒ¨ç”¨å®ƒæ¥æ ‡è¯†ç”¨æˆ·ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹å®ƒä¸ç”¨æˆ·åæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚å¦‚æœå‡ ä¸ªç”¨æˆ·åå¯¹åº”çš„ç”¨æˆ·æ ‡è¯†å·æ˜¯ä¸€æ ·çš„ï¼Œç³»ç»Ÿå†…éƒ¨å°†æŠŠå®ƒä»¬è§†ä¸ºåŒä¸€ä¸ªç”¨æˆ·ï¼Œä½†æ˜¯å®ƒä»¬å¯ä»¥æœ‰ä¸åŒçš„å£ä»¤ã€ä¸åŒçš„ä¸»ç›®å½•ä»¥åŠä¸åŒçš„ç™»å½•Shellç­‰ã€‚ é€šå¸¸ç”¨æˆ·æ ‡è¯†å·çš„å–å€¼èŒƒå›´æ˜¯0ï½65 535ã€‚0æ˜¯è¶…çº§ç”¨æˆ·rootçš„æ ‡è¯†å·ï¼Œ1ï½99ç”±ç³»ç»Ÿä¿ç•™ï¼Œä½œä¸ºç®¡ç†è´¦å·ï¼Œæ™®é€šç”¨æˆ·çš„æ ‡è¯†å·ä»100å¼€å§‹ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªç•Œé™æ˜¯500ã€‚ 4ï¼‰â€œç»„æ ‡è¯†å·â€å­—æ®µè®°å½•çš„æ˜¯ç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚ å®ƒå¯¹åº”ç€/etc/groupæ–‡ä»¶ä¸­çš„ä¸€æ¡è®°å½•ã€‚ 5)â€œæ³¨é‡Šæ€§æè¿°â€å­—æ®µè®°å½•ç€ç”¨æˆ·çš„ä¸€äº›ä¸ªäººæƒ…å†µã€‚ ä¾‹å¦‚ç”¨æˆ·çš„çœŸå®å§“åã€ç”µè¯ã€åœ°å€ç­‰ï¼Œè¿™ä¸ªå­—æ®µå¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…çš„ç”¨é€”ã€‚åœ¨ä¸åŒçš„Linux ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå­—æ®µçš„æ ¼å¼å¹¶æ²¡æœ‰ç»Ÿä¸€ã€‚åœ¨è®¸å¤šLinuxç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå­—æ®µå­˜æ”¾çš„æ˜¯ä¸€æ®µä»»æ„çš„æ³¨é‡Šæ€§æè¿°æ–‡å­—ï¼Œç”¨åšfingerå‘½ä»¤çš„è¾“å‡ºã€‚ 6)â€œä¸»ç›®å½•â€ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·çš„èµ·å§‹å·¥ä½œç›®å½•ã€‚ å®ƒæ˜¯ç”¨æˆ·åœ¨ç™»å½•åˆ°ç³»ç»Ÿä¹‹åæ‰€å¤„çš„ç›®å½•ã€‚åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œå„ç”¨æˆ·çš„ä¸»ç›®å½•éƒ½è¢«ç»„ç»‡åœ¨åŒä¸€ä¸ªç‰¹å®šçš„ç›®å½•ä¸‹ï¼Œè€Œç”¨æˆ·ä¸»ç›®å½•çš„åç§°å°±æ˜¯è¯¥ç”¨æˆ·çš„ç™»å½•åã€‚å„ç”¨æˆ·å¯¹è‡ªå·±çš„ä¸»ç›®å½•æœ‰è¯»ã€å†™ã€æ‰§è¡Œï¼ˆæœç´¢ï¼‰æƒé™ï¼Œå…¶ä»–ç”¨æˆ·å¯¹æ­¤ç›®å½•çš„è®¿é—®æƒé™åˆ™æ ¹æ®å…·ä½“æƒ…å†µè®¾ç½®ã€‚ 7)ç”¨æˆ·ç™»å½•åï¼Œè¦å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œè´Ÿè´£å°†ç”¨æˆ·çš„æ“ä½œä¼ ç»™å†…æ ¸ï¼Œè¿™ä¸ªè¿›ç¨‹æ˜¯ç”¨æˆ·ç™»å½•åˆ°ç³»ç»Ÿåè¿è¡Œçš„å‘½ä»¤è§£é‡Šå™¨æˆ–æŸä¸ªç‰¹å®šçš„ç¨‹åºï¼Œå³Shellã€‚ Shellæ˜¯ç”¨æˆ·ä¸Linuxç³»ç»Ÿä¹‹é—´çš„æ¥å£ã€‚Linuxçš„Shellæœ‰è®¸å¤šç§ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„ç‰¹ç‚¹ã€‚å¸¸ç”¨çš„æœ‰sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)ç­‰ã€‚ ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥æ ¹æ®ç³»ç»Ÿæƒ…å†µå’Œç”¨æˆ·ä¹ æƒ¯ä¸ºç”¨æˆ·æŒ‡å®šæŸä¸ªShellã€‚å¦‚æœä¸æŒ‡å®šShellï¼Œé‚£ä¹ˆç³»ç»Ÿä½¿ç”¨shä¸ºé»˜è®¤çš„ç™»å½•Shellï¼Œå³è¿™ä¸ªå­—æ®µçš„å€¼ä¸º/bin/shã€‚ ç”¨æˆ·çš„ç™»å½•Shellä¹Ÿå¯ä»¥æŒ‡å®šä¸ºæŸä¸ªç‰¹å®šçš„ç¨‹åºï¼ˆæ­¤ç¨‹åºä¸æ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨ï¼‰ã€‚ åˆ©ç”¨è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶ç”¨æˆ·åªèƒ½è¿è¡ŒæŒ‡å®šçš„åº”ç”¨ç¨‹åºï¼Œåœ¨è¯¥åº”ç”¨ç¨‹åºè¿è¡Œç»“æŸåï¼Œç”¨æˆ·å°±è‡ªåŠ¨é€€å‡ºäº†ç³»ç»Ÿã€‚æœ‰äº›Linux ç³»ç»Ÿè¦æ±‚åªæœ‰é‚£äº›åœ¨ç³»ç»Ÿä¸­ç™»è®°äº†çš„ç¨‹åºæ‰èƒ½å‡ºç°åœ¨è¿™ä¸ªå­—æ®µä¸­ã€‚ 8)ç³»ç»Ÿä¸­æœ‰ä¸€ç±»ç”¨æˆ·ç§°ä¸ºä¼ªç”¨æˆ·ï¼ˆpseudo usersï¼‰ã€‚ è¿™äº›ç”¨æˆ·åœ¨/etc/passwdæ–‡ä»¶ä¸­ä¹Ÿå æœ‰ä¸€æ¡è®°å½•ï¼Œä½†æ˜¯ä¸èƒ½ç™»å½•ï¼Œå› ä¸ºå®ƒä»¬çš„ç™»å½•Shellä¸ºç©ºã€‚å®ƒä»¬çš„å­˜åœ¨ä¸»è¦æ˜¯æ–¹ä¾¿ç³»ç»Ÿç®¡ç†ï¼Œæ»¡è¶³ç›¸åº”çš„ç³»ç»Ÿè¿›ç¨‹å¯¹æ–‡ä»¶å±ä¸»çš„è¦æ±‚ã€‚ å¸¸è§çš„ä¼ªç”¨æˆ·å¦‚ä¸‹æ‰€ç¤ºï¼š ä¼ª ç”¨ æˆ· å« ä¹‰ bin æ‹¥æœ‰å¯æ‰§è¡Œçš„ç”¨æˆ·å‘½ä»¤æ–‡ä»¶ sys æ‹¥æœ‰ç³»ç»Ÿæ–‡ä»¶ adm æ‹¥æœ‰å¸æˆ·æ–‡ä»¶ uucp UUCPä½¿ç”¨ lp lpæˆ–lpdå­ç³»ç»Ÿä½¿ç”¨ nobody NFSä½¿ç”¨ æ‹¥æœ‰å¸æˆ·æ–‡ä»¶ 1ã€é™¤äº†ä¸Šé¢åˆ—å‡ºçš„ä¼ªç”¨æˆ·å¤–ï¼Œè¿˜æœ‰è®¸å¤šæ ‡å‡†çš„ä¼ªç”¨æˆ·ï¼Œä¾‹å¦‚ï¼šaudit, cron, mail, usenetç­‰ï¼Œå®ƒä»¬ä¹Ÿéƒ½å„è‡ªä¸ºç›¸å…³çš„è¿›ç¨‹å’Œæ–‡ä»¶æ‰€éœ€è¦ã€‚ ç”±äº/etc/passwdæ–‡ä»¶æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½å¯è¯»çš„ï¼Œå¦‚æœç”¨æˆ·çš„å¯†ç å¤ªç®€å•æˆ–è§„å¾‹æ¯”è¾ƒæ˜æ˜¾çš„è¯ï¼Œä¸€å°æ™®é€šçš„è®¡ç®—æœºå°±èƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°å°†å®ƒç ´è§£ï¼Œå› æ­¤å¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„Linuxç³»ç»Ÿéƒ½æŠŠåŠ å¯†åçš„å£ä»¤å­—åˆ†ç¦»å‡ºæ¥ï¼Œå•ç‹¬å­˜æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯/etc/shadowæ–‡ä»¶ã€‚ æœ‰è¶…çº§ç”¨æˆ·æ‰æ‹¥æœ‰è¯¥æ–‡ä»¶è¯»æƒé™ï¼Œè¿™å°±ä¿è¯äº†ç”¨æˆ·å¯†ç çš„å®‰å…¨æ€§ã€‚ 2ã€/etc/shadowä¸­çš„è®°å½•è¡Œä¸/etc/passwdä¸­çš„ä¸€ä¸€å¯¹åº”ï¼Œå®ƒç”±pwconvå‘½ä»¤æ ¹æ®/etc/passwdä¸­çš„æ•°æ®è‡ªåŠ¨äº§ç”Ÿ å®ƒçš„æ–‡ä»¶æ ¼å¼ä¸/etc/passwdç±»ä¼¼ï¼Œç”±è‹¥å¹²ä¸ªå­—æ®µç»„æˆï¼Œå­—æ®µä¹‹é—´ç”¨&quot;:&quot;éš”å¼€ã€‚è¿™äº›å­—æ®µæ˜¯ï¼š ç™»å½•å:åŠ å¯†å£ä»¤:æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´:æœ€å°æ—¶é—´é—´éš”:æœ€å¤§æ—¶é—´é—´éš”:è­¦å‘Šæ—¶é—´:ä¸æ´»åŠ¨æ—¶é—´:å¤±æ•ˆæ—¶é—´:æ ‡å¿— &quot;ç™»å½•å&quot;æ˜¯ä¸/etc/passwdæ–‡ä»¶ä¸­çš„ç™»å½•åç›¸ä¸€è‡´çš„ç”¨æˆ·è´¦å· &quot;å£ä»¤&quot;å­—æ®µå­˜æ”¾çš„æ˜¯åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—ï¼Œé•¿åº¦ä¸º13ä¸ªå­—ç¬¦ã€‚å¦‚æœä¸ºç©ºï¼Œåˆ™å¯¹åº”ç”¨æˆ·æ²¡æœ‰å£ä»¤ï¼Œç™»å½•æ—¶ä¸éœ€è¦å£ä»¤ï¼›å¦‚æœå«æœ‰ä¸å±äºé›†åˆ { ./0-9A-Za-z }ä¸­çš„å­—ç¬¦ï¼Œåˆ™å¯¹åº”çš„ç”¨æˆ·ä¸èƒ½ç™»å½•ã€‚ &quot;æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´&quot;è¡¨ç¤ºçš„æ˜¯ä»æŸä¸ªæ—¶åˆ»èµ·ï¼Œåˆ°ç”¨æˆ·æœ€åä¸€æ¬¡ä¿®æ”¹å£ä»¤æ—¶çš„å¤©æ•°ã€‚æ—¶é—´èµ·ç‚¹å¯¹ä¸åŒçš„ç³»ç»Ÿå¯èƒ½ä¸ä¸€æ ·ã€‚ä¾‹å¦‚åœ¨SCO Linux ä¸­ï¼Œè¿™ä¸ªæ—¶é—´èµ·ç‚¹æ˜¯1970å¹´1æœˆ1æ—¥ã€‚ &quot;æœ€å°æ—¶é—´é—´éš”&quot;æŒ‡çš„æ˜¯ä¸¤æ¬¡ä¿®æ”¹å£ä»¤ä¹‹é—´æ‰€éœ€çš„æœ€å°å¤©æ•°ã€‚ &quot;æœ€å¤§æ—¶é—´é—´éš”&quot;æŒ‡çš„æ˜¯å£ä»¤ä¿æŒæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°ã€‚ &quot;è­¦å‘Šæ—¶é—´&quot;å­—æ®µè¡¨ç¤ºçš„æ˜¯ä»ç³»ç»Ÿå¼€å§‹è­¦å‘Šç”¨æˆ·åˆ°ç”¨æˆ·å¯†ç æ­£å¼å¤±æ•ˆä¹‹é—´çš„å¤©æ•°ã€‚ &quot;ä¸æ´»åŠ¨æ—¶é—´&quot;è¡¨ç¤ºçš„æ˜¯ç”¨æˆ·æ²¡æœ‰ç™»å½•æ´»åŠ¨ä½†è´¦å·ä»èƒ½ä¿æŒæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°ã€‚ &quot;å¤±æ•ˆæ—¶é—´&quot;å­—æ®µç»™å‡ºçš„æ˜¯ä¸€ä¸ªç»å¯¹çš„å¤©æ•°ï¼Œå¦‚æœä½¿ç”¨äº†è¿™ä¸ªå­—æ®µï¼Œé‚£ä¹ˆå°±ç»™å‡ºç›¸åº”è´¦å·çš„ç”Ÿå­˜æœŸã€‚æœŸæ»¡åï¼Œè¯¥è´¦å·å°±ä¸å†æ˜¯ä¸€ä¸ªåˆæ³•çš„è´¦å·ï¼Œä¹Ÿå°±ä¸èƒ½å†ç”¨æ¥ç™»å½•äº†ã€‚ ä¸‹é¢æ˜¯/etc/shadowçš„ä¸€ä¸ªä¾‹å­ï¼š ï¼ƒ cat /etc/shadow root:Dnakfw28zf38w:8764:0:168:7::: daemon:::0:0:::: bin:::0:0:::: sys:::0:0:::: adm:::0:0:::: uucp:::0:0:::: nuucp:::0:0:::: auth:::0:0:::: cron:::0:0:::: listen:::0:0:::: lp:::0:0:::: sam:EkdiSECLWPdSa:9740:0:0:::: 3ã€ç”¨æˆ·ç»„çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜æ”¾åœ¨/etc/groupæ–‡ä»¶ä¸­ã€‚ å°†ç”¨æˆ·åˆ†ç»„æ˜¯Linux ç³»ç»Ÿä¸­å¯¹ç”¨æˆ·è¿›è¡Œç®¡ç†åŠæ§åˆ¶è®¿é—®æƒé™çš„ä¸€ç§æ‰‹æ®µã€‚ æ¯ä¸ªç”¨æˆ·éƒ½å±äºæŸä¸ªç”¨æˆ·ç»„ï¼›ä¸€ä¸ªç»„ä¸­å¯ä»¥æœ‰å¤šä¸ªç”¨æˆ·ï¼Œä¸€ä¸ªç”¨æˆ·ä¹Ÿå¯ä»¥å±äºä¸åŒçš„ç»„ã€‚ å½“ä¸€ä¸ªç”¨æˆ·åŒæ—¶æ˜¯å¤šä¸ªç»„ä¸­çš„æˆå‘˜æ—¶ï¼Œåœ¨/etc/passwdæ–‡ä»¶ä¸­è®°å½•çš„æ˜¯ç”¨æˆ·æ‰€å±çš„ä¸»ç»„ï¼Œä¹Ÿå°±æ˜¯ç™»å½•æ—¶æ‰€å±çš„é»˜è®¤ç»„ï¼Œè€Œå…¶ä»–ç»„ç§°ä¸ºé™„åŠ ç»„ã€‚ ç”¨æˆ·è¦è®¿é—®å±äºé™„åŠ ç»„çš„æ–‡ä»¶æ—¶ï¼Œå¿…é¡»é¦–å…ˆä½¿ç”¨newgrpå‘½ä»¤ä½¿è‡ªå·±æˆä¸ºæ‰€è¦è®¿é—®çš„ç»„ä¸­çš„æˆå‘˜ã€‚ ç”¨æˆ·ç»„çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜æ”¾åœ¨/etc/groupæ–‡ä»¶ä¸­ã€‚æ­¤æ–‡ä»¶çš„æ ¼å¼ä¹Ÿç±»ä¼¼äº/etc/passwdæ–‡ä»¶ï¼Œç”±å†’å·(:)éš”å¼€è‹¥å¹²ä¸ªå­—æ®µï¼Œè¿™äº›å­—æ®µæœ‰ï¼š ç»„å:å£ä»¤:ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨ &quot;ç»„å&quot;æ˜¯ç”¨æˆ·ç»„çš„åç§°ï¼Œç”±å­—æ¯æˆ–æ•°å­—æ„æˆã€‚ä¸/etc/passwdä¸­çš„ç™»å½•åä¸€æ ·ï¼Œç»„åä¸åº”é‡å¤ã€‚ &quot;å£ä»¤&quot;å­—æ®µå­˜æ”¾çš„æ˜¯ç”¨æˆ·ç»„åŠ å¯†åçš„å£ä»¤å­—ã€‚ä¸€èˆ¬Linux ç³»ç»Ÿçš„ç”¨æˆ·ç»„éƒ½æ²¡æœ‰å£ä»¤ï¼Œå³è¿™ä¸ªå­—æ®µä¸€èˆ¬ä¸ºç©ºï¼Œæˆ–è€…æ˜¯*ã€‚ &quot;ç»„æ ‡è¯†å·&quot;ä¸ç”¨æˆ·æ ‡è¯†å·ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¢«ç³»ç»Ÿå†…éƒ¨ç”¨æ¥æ ‡è¯†ç»„ã€‚ &quot;ç»„å†…ç”¨æˆ·åˆ—è¡¨&quot;æ˜¯å±äºè¿™ä¸ªç»„çš„æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨/b]ï¼Œä¸åŒç”¨æˆ·ä¹‹é—´ç”¨é€—å·(,)åˆ†éš”ã€‚è¿™ä¸ªç”¨æˆ·ç»„å¯èƒ½æ˜¯ç”¨æˆ·çš„ä¸»ç»„ï¼Œä¹Ÿå¯èƒ½æ˜¯é™„åŠ ç»„ã€‚ /etc/groupæ–‡ä»¶çš„ä¸€ä¸ªä¾‹å­å¦‚ä¸‹ï¼š root::0:root bin::2:root,bin sys::3:root,uucp adm::4:root,adm daemon::5:root,daemon lp::7:root,lp users::20:root,sam å››ã€æ·»åŠ æ‰¹é‡ç”¨æˆ· æ·»åŠ å’Œåˆ é™¤ç”¨æˆ·å¯¹æ¯ä½Linuxç³»ç»Ÿç®¡ç†å‘˜éƒ½æ˜¯è½»è€Œæ˜“ä¸¾çš„äº‹ï¼Œæ¯”è¾ƒæ£˜æ‰‹çš„æ˜¯å¦‚æœè¦æ·»åŠ å‡ åä¸ªã€ä¸Šç™¾ä¸ªç”šè‡³ä¸Šåƒä¸ªç”¨æˆ·æ—¶ï¼Œæˆ‘ä»¬ä¸å¤ªå¯èƒ½è¿˜ä½¿ç”¨useraddä¸€ä¸ªä¸€ä¸ªåœ°æ·»åŠ ï¼Œå¿…ç„¶è¦æ‰¾ä¸€ç§ç®€ä¾¿çš„åˆ›å»ºå¤§é‡ç”¨æˆ·çš„æ–¹æ³•ã€‚Linuxç³»ç»Ÿæä¾›äº†åˆ›å»ºå¤§é‡ç”¨æˆ·çš„å·¥å…·ï¼Œå¯ä»¥è®©æ‚¨ç«‹å³åˆ›å»ºå¤§é‡ç”¨æˆ·ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰å…ˆç¼–è¾‘ä¸€ä¸ªæ–‡æœ¬ç”¨æˆ·æ–‡ä»¶ã€‚ æ¯ä¸€åˆ—æŒ‰ç…§/etc/passwdå¯†ç æ–‡ä»¶çš„æ ¼å¼ä¹¦å†™ï¼Œè¦æ³¨æ„æ¯ä¸ªç”¨æˆ·çš„ç”¨æˆ·åã€UIDã€å®¿ä¸»ç›®å½•éƒ½ä¸å¯ä»¥ç›¸åŒï¼Œå…¶ä¸­å¯†ç æ å¯ä»¥ç•™åšç©ºç™½æˆ–è¾“å…¥xå·ã€‚ä¸€ä¸ªèŒƒä¾‹æ–‡ä»¶user.txtå†…å®¹å¦‚ä¸‹ï¼š user001::600ğŸ’¯user:/home/user001:/bin/bash user002::601ğŸ’¯user:/home/user002:/bin/bash user003::602ğŸ’¯user:/home/user003:/bin/bash user004::603ğŸ’¯user:/home/user004:/bin/bash user005::604ğŸ’¯user:/home/user005:/bin/bash user006::605ğŸ’¯user:/home/user006:/bin/bash ï¼ˆ2ï¼‰ä»¥rootèº«ä»½æ‰§è¡Œå‘½ä»¤ /usr/sbin/newusersï¼Œä»åˆšåˆ›å»ºçš„ç”¨æˆ·æ–‡ä»¶user.txtä¸­å¯¼å…¥æ•°æ®ï¼Œåˆ›å»ºç”¨æˆ·ï¼š newusers &lt; user.txt ç„¶åå¯ä»¥æ‰§è¡Œå‘½ä»¤ vipw æˆ– vi /etc/passwd æ£€æŸ¥ /etc/passwd æ–‡ä»¶æ˜¯å¦å·²ç»å‡ºç°è¿™äº›ç”¨æˆ·çš„æ•°æ®ï¼Œå¹¶ä¸”ç”¨æˆ·çš„å®¿ä¸»ç›®å½•æ˜¯å¦å·²ç»åˆ›å»ºã€‚ ï¼ˆ3ï¼‰æ‰§è¡Œå‘½ä»¤/usr/sbin/pwunconvã€‚ å°† /etc/shadow äº§ç”Ÿçš„ shadow å¯†ç è§£ç ï¼Œç„¶åå›å†™åˆ° /etc/passwd ä¸­ï¼Œå¹¶å°†/etc/shadowçš„shadowå¯†ç æ åˆ æ‰ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿ä¸‹ä¸€æ­¥çš„å¯†ç è½¬æ¢å·¥ä½œï¼Œå³å…ˆå–æ¶ˆ shadow password åŠŸèƒ½ã€‚ pwunconv ï¼ˆ4ï¼‰ç¼–è¾‘æ¯ä¸ªç”¨æˆ·çš„å¯†ç å¯¹ç…§æ–‡ä»¶ã€‚ æ ¼å¼ä¸ºï¼š ç”¨æˆ·å:å¯†ç  å®ä¾‹æ–‡ä»¶ passwd.txt å†…å®¹å¦‚ä¸‹ï¼š user001:123456 user002:123456 user003:123456 user004:123456 user005:123456 user006:123456 ï¼ˆ5ï¼‰ä»¥ root èº«ä»½æ‰§è¡Œå‘½ä»¤ /usr/sbin/chpasswdã€‚ åˆ›å»ºç”¨æˆ·å¯†ç ï¼Œchpasswd ä¼šå°†ç»è¿‡ /usr/bin/passwd å‘½ä»¤ç¼–ç è¿‡çš„å¯†ç å†™å…¥ /etc/passwd çš„å¯†ç æ ã€‚ chpasswd &lt; passwd.txt ï¼ˆ6ï¼‰ç¡®å®šå¯†ç ç»ç¼–ç å†™å…¥/etc/passwdçš„å¯†ç æ åã€‚ æ‰§è¡Œå‘½ä»¤ /usr/sbin/pwconv å°†å¯†ç ç¼–ç ä¸º shadow passwordï¼Œå¹¶å°†ç»“æœå†™å…¥ /etc/shadowã€‚ pwconv è¿™æ ·å°±å®Œæˆäº†å¤§é‡ç”¨æˆ·çš„åˆ›å»ºäº†ï¼Œä¹‹åæ‚¨å¯ä»¥åˆ°/homeä¸‹æ£€æŸ¥è¿™äº›ç”¨æˆ·å®¿ä¸»ç›®å½•çš„æƒé™è®¾ç½®æ˜¯å¦éƒ½æ­£ç¡®ï¼Œå¹¶ç™»å½•éªŒè¯ç”¨æˆ·å¯†ç æ˜¯å¦æ­£ç¡®ã€‚ Linuxç£ç›˜ç®¡ç† Linuxç£ç›˜ç®¡ç†å¥½åç›´æ¥å…³ç³»åˆ°æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚ Linuxç£ç›˜ç®¡ç†å¸¸ç”¨ä¸‰ä¸ªå‘½ä»¤ä¸ºdfï¼Œduå’Œfdiskã€‚ dfï¼šåˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿçš„æ•´ä½“ç£ç›˜ä½¿ç”¨é‡ duï¼šæ£€æŸ¥ç£ç›˜ç©ºé—´ä½¿ç”¨é‡ fdiskï¼šç”¨äºç£ç›˜åˆ†åŒº df dfå‘½ä»¤å‚æ•°åŠŸèƒ½ï¼šæ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µã€‚å¯ä»¥åˆ©ç”¨è¯¥å‘½ä»¤æ¥è·å–ç¡¬ç›˜è¢«å ç”¨äº†å¤šå°‘ç©ºé—´ï¼Œç›®å‰è¿˜å‰©ä¸‹å¤šå°‘ç©ºé—´ç­‰ä¿¡æ¯ã€‚ è¯­æ³•ï¼š df [ -ahikHTm ] [ç›®å½•æˆ–æ–‡ä»¶å] é€‰é¡¹ä¸å‚æ•°ï¼š -aï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç³»ç»Ÿç‰¹æœ‰çš„/ procç­‰æ–‡ä»¶ç³»ç»Ÿï¼› -kï¼šä»¥KBytesçš„å®¹é‡æ˜¾ç¤ºå„æ–‡ä»¶ç³»ç»Ÿï¼› -mï¼šä»¥MBytesçš„å®¹é‡æ˜¾ç¤ºå„æ–‡ä»¶ç³»ç»Ÿï¼› -hï¼šä»¥äººä»¬è¾ƒæ˜“é˜…è¯»çš„GBï¼ŒMBï¼ŒKBç­‰æ ¼å¼è‡ªè¡Œæ˜¾ç¤ºï¼› -Hï¼šä»¥M = 1000Kå–ä»£M = 1024Kçš„è¿›ä½æ–¹å¼ï¼› -Tï¼šæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå¹¶åˆå¹¶è¯¥åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿåç§°ï¼ˆä¾‹å¦‚ext3ï¼‰ä¹Ÿåˆ—å‡ºï¼› -iï¼šä¸ç”¨ç¡¬ç›˜å®¹é‡ï¼Œè€Œä»¥inodeçš„æ•°é‡æ¥æ˜¾ç¤º å®ä¾‹1 å°†ç³»ç»Ÿå†…æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿåˆ—å‡ºæ¥ï¼ [æ ¹@ WWW ã€œ]ï¼ƒDF æ–‡ä»¶ç³»ç»Ÿ1K -å— ç”¨äºæ¨ä»‹ä½¿ç”¨ï¼…å®‰è£…ä¸Š / devçš„/ HDC2 9920624 3823112 5585444 41 ï¼…/çš„/ dev / hdc3ä¸Š 4956316 141376 4559108 4 ï¼…/å®¶ / devçš„/ hdc1åˆ†åŒº 101086 11126 84741 12 ï¼…/å¼•å¯¼ tmpfs 371332 0 371332 0 ï¼…/ dev / shm åœ¨Linuxåº•ä¸‹å¦‚æœdfæ²¡æœ‰åŠ ä»»ä½•é€‰é¡¹ï¼Œé‚£ä¹ˆæ›¿æ¢é‡å®šå‘ç³»ç»Ÿå†…éƒ¨çš„æ‰€æœ‰ï¼ˆæ’é™¤ç‰¹æ®Šå†…å­˜å†…éƒ¨çš„æ–‡ä»¶ç³»ç»Ÿä¸swapï¼‰éƒ½ä»¥1 KBçš„å®¹é‡æ¥åˆ—å‡ºæ¥ï¼ å®ä¾‹2 å°†å®¹é‡ç»“æœä»¥æ˜“è¯»çš„å®¹é‡æ ¼å¼æ˜¾ç¤ºå‡ºæ¥ [æ ¹@ WWW ã€œ]ï¼ƒDF - Ä§ æ–‡ä»¶ç³»ç»Ÿå¤§å°ç”¨äºåº“å­˜çŠ¶å†µä½¿ç”¨ï¼…å®‰è£…ä¸Š / devçš„/ HDC2 9.5å…‹3.7G 5.4G 41 ï¼…/çš„/ dev / hdc3ä¸Š 4.8G 139M 4.4G 4 ï¼…/å®¶ / devçš„/ hdc1åˆ†åŒº 99M 11M 83M 12 ï¼…/å¼€æœº tmpfs 363M 0 363M 0 ï¼…/ dev / shm å®ä¾‹3 å°†ç³»ç»Ÿå†…çš„æ‰€æœ‰ç‰¹æ®Šæ–‡ä»¶æ ¼å¼åŠåç§°éƒ½åˆ—å‡ºæ¥ [æ ¹@ WWW ã€œ]ï¼ƒDF -åœ¨ æ–‡ä»¶ç³»ç»Ÿç±»å‹1K -å— ç”¨äºæ¨ä»‹ä½¿ç”¨ï¼…å®‰è£…ä¸Š / devçš„/ HDC2 EXT3 9920624 3823112 5585444 41 ï¼…/ PROC PROC 0 0 0 - / PROC sysfsä¸­çš„sysfs 0 0 0 - / SYS devpts devpts 0 0 0 -çš„/ dev / PTS / devçš„/ä½äºhdc3 EXT3 4956316 141376 4559108 4 ï¼…/å®¶ / devçš„/ hdc1åˆ†åŒºEXT3 101086 11126 84741 12 ï¼…/å¼•å¯¼ tmpfs tmpfs 371332 0 371332 0 ï¼…/ dev / shm æ²¡æœ‰binfmt_misc 0 0 0 -çš„/ proc / SYS / FS / binfmt_misc sunrpc rpc_pipefs 0 0 0 -åœ¨/ var / libä¸­/ NFS / rpc_pipefs å®ä¾‹4 å°†/ etcåº•ä¸‹çš„å¯ç”¨çš„ç£ç›˜å®¹é‡ä»¥æ˜“è¯»çš„å®¹é‡æ ¼å¼æ˜¾ç¤º [æ ¹@ WWW ã€œ]ï¼ƒDF - Ä§ /ç­‰ æ–‡ä»¶ç³»ç»Ÿå¤§å°ç”¨äºåº“å­˜çŠ¶å†µä½¿ç”¨ï¼…å®‰è£…ä¸Š / devçš„/ HDC2 9.5å…‹3.7G 5.4G 41 ï¼…/ du Linux duå‘½ä»¤ä¹Ÿæ˜¯æŸ¥çœ‹ä½¿ç”¨ç©ºé—´çš„ï¼Œä½†æ˜¯ä¸dfå‘½ä»¤ä¸åŒçš„æ˜¯Linux duå‘½ä»¤æ˜¯å¯¹æ–‡ä»¶å’Œç›®å½•ç£ç›˜ä½¿ç”¨çš„ç©ºé—´çš„æŸ¥çœ‹ï¼Œè¿˜æ˜¯å’Œdfå‘½ä»¤æœ‰ä¸€äº›åŒºåˆ«çš„ï¼Œè¿™é‡Œä»‹ç»Linux duå‘½ä»¤ã€‚ è¯­æ³•ï¼š du [ -ahskm ]æ–‡ä»¶æˆ–ç›®å½•åç§° é€‰é¡¹ä¸å‚æ•°ï¼š -aï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ä¸ç›®å½•å®¹é‡ï¼Œå› ä¸ºå”¯ä¸€ä»…ç»Ÿè®¡ç›®å½•åº•ä¸‹çš„æ–‡ä»¶é‡è€Œå·²ã€‚ -hï¼šä»¥äººä»¬è¾ƒæ˜“è¯»çš„å®¹é‡æ ¼å¼ï¼ˆG / Mï¼‰æ˜¾ç¤ºï¼› -sï¼šåˆ—å‡ºæ€»æ•°è€Œå·²ï¼Œè€Œä¸åˆ—å‡ºæ¯ä¸ªå„åˆ«çš„ç›®å½•å ç”¨å®¹é‡ï¼› -Sï¼šä¸åŒ…æ‹¬å­ç›®å½•ä¸‹çš„æ€»è®¡ï¼Œä¸-sæœ‰ç‚¹åŒºåˆ«ã€‚ -kï¼šä»¥KBytesåˆ—å‡ºå®¹é‡æ˜¾ç¤ºï¼› -mï¼šä»¥MBytesåˆ—å‡ºå®¹é‡æ˜¾ç¤ºï¼› å®ä¾‹1 åªåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹å®¹é‡ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶å¤¹ï¼‰ï¼š [æ ¹@ WWW ã€œ]ï¼ƒæœ 8 ./ TEST4 &lt;==æ¯ä¸ªç›®å½•éƒ½ä¼šåˆ—å‡ºæ¥8 ./ TEST2 ....ä¸­é—´çœç•¥.... 12 ./ã€‚gconfd &lt;==åŒ…æ‹¬éšè—æ–‡ä»¶çš„ç›®å½•220 ã€‚&lt;==è¿™ä¸ªç›®å½•ï¼ˆã€‚ï¼‰æ‰€å ç”¨çš„å¤§é‡ ç›´æ¥è¾“å…¥duæ²¡æœ‰åŠ ä»»ä½•é€‰é¡¹æ—¶ï¼Œåˆ™duä¼šåˆ†æå½“å‰æ‰€åœ¨ç›®å½•çš„æ–‡ä»¶ä¸ç›®å½•æ‰€å ç”¨çš„ç¡¬ç›˜ç©ºé—´ã€‚ å®ä¾‹2 å°†æ–‡ä»¶çš„å®¹é‡ä¹Ÿåˆ—å‡ºæ¥ [æ ¹@ WWW ã€œ]ï¼ƒæœ-ä¸€ä¸ª 12 ./å®‰è£…ã€‚æ—¥å¿—ã€‚syslog &lt;==æœ‰æ–‡ä»¶çš„åˆ—è¡¨äº†8 ./ã€‚bash_logout 8 ./ test4 8 ./ test2 ....ä¸­é—´çœç•¥.... 12 ./ã€‚gconfd 220 ã€‚ å®ä¾‹3 æ£€æŸ¥æ ¹ç›®å½•åº•ä¸‹æ¯ä¸ªç›®å½•æ‰€å ç”¨çš„å®¹é‡ [ root @ wwwã€œ]ï¼ƒdu - sm / * 7 /ç®± 6 /å¯åŠ¨ .....ä¸­é—´çœç•¥.... 0 /è¿›ç¨‹ .....ä¸­é—´çœç•¥.... 1 /è½¬ 3859 / usr &lt;==ç³»ç»ŸåˆæœŸæœ€å¤§å°±æ˜¯ä»–äº†å•¦ï¼ 77 / var é€šé…ç¬¦*æ¥ä»£è¡¨æ¯ä¸ªç›®å½•ã€‚ ä¸dfä¸ä¸€æ ·çš„æ˜¯ï¼Œduè¿™ä¸ªå‘½ä»¤å®é™…ä¸Šä¼šç›´æ¥åˆ°æ–‡ä»¶ç³»ç»Ÿå†…å»æœå¯»æ‰€æœ‰çš„æ–‡ä»¶æ•°æ®ã€‚ fdisk fdiskæ˜¯Linuxçš„ç£ç›˜åˆ†åŒºè¡¨æ“ä½œå·¥å…·ã€‚ è¯­æ³•ï¼š fdisk [ -l ]è£…ç½®åç§° é€‰é¡¹ä¸å‚æ•°ï¼š -lï¼šè¾“å‡ºåé¢æ¥çš„è£…ç½®æ‰€æœ‰çš„åˆ†åŒºå†…å®¹ã€‚è‹¥ä»…æœ‰fdisk -læ—¶ï¼Œåˆ™ç³»ç»Ÿå°†ä¼šæŠŠæ•´ä¸ªç³»ç»Ÿå†…éƒ¨èƒ½å¤Ÿæœå¯»åˆ°çš„è£…ç½®çš„åˆ†åŒºå‡åˆ—å‡ºæ¥ã€‚ å®ä¾‹1 åˆ—å‡ºæ‰€æœ‰åˆ†åŒºä¿¡æ¯ [ root @ AY120919111755c246621 tmp ]ï¼ƒfdisk - l ç£ç›˜/ dev / xvda ï¼š21.5 GB ï¼Œ21474836480å­—èŠ‚ 255ç£å¤´ï¼Œ63æ‰‡åŒº/ç£é“ï¼Œ2610ä¸ªæŸ±é¢ å•ä½=æŸ±é¢16065 * 512 = 8225280å­—èŠ‚ æ‰‡åŒºå¤§å°ï¼ˆé€»è¾‘/ç‰©ç†ï¼‰ï¼š512å­—èŠ‚/ 512å­—èŠ‚ I / Oå¤§å°ï¼ˆæœ€å°/æœ€ä½³ï¼‰ï¼š512å­—èŠ‚/ 512å­—èŠ‚ ç£ç›˜æ ‡è¯†ç¬¦ï¼š0x00000000 è®¾å¤‡å¼•å¯¼å¯åŠ¨ç»“æŸå—IDç³»ç»Ÿ/ dev / xvda1 * 1 2550 20480000 83 Linux / dev / xvda2 2550 2611 490496 82 Linux swap / Solaris â€‹ ç£ç›˜/ dev / xvdb ï¼š21.5 GB ï¼Œ21474836480å­—èŠ‚ 255ç£å¤´ï¼Œ63æ‰‡åŒº/ç£é“ï¼Œ2610ä¸ªæŸ±é¢ å•ä½=æŸ±é¢16065 * 512 = 8225280å­—èŠ‚ æ‰‡åŒºå¤§å°ï¼ˆé€»è¾‘/ç‰©ç†ï¼‰ï¼š512å­—èŠ‚/ 512å­—èŠ‚ I / Oå¤§å°ï¼ˆæœ€å°/æœ€ä½³ï¼‰ï¼š512å­—èŠ‚/ 512å­—èŠ‚ ç£ç›˜æ ‡è¯†ç¬¦ï¼š0x56f40944 è®¾å¤‡å¯åŠ¨å¼€å§‹ç«¯å—IDç³»ç»Ÿ/ dev / xvdb2 1 2610 20964793 + 83 Linux å®ä¾‹2 æ‰¾å‡ºæ‚¨ç³»ç»Ÿä¸­çš„æ ¹ç›®å½•æ‰€åœ¨ç£ç›˜ï¼Œå¹¶æŸ¥é˜…è¯¥ç¡¬ç›˜å†…çš„ç›¸å…³ä¿¡æ¯ [æ ¹@ WWW ã€œ]ï¼ƒDF / &lt;==æ³¨æ„ï¼šé‡ç‚¹åœ¨æ‰¾å‡ºç£ç›˜æ–‡ä»¶åè€Œå·²æ–‡ä»¶ç³»ç»Ÿ1K -å— ç”¨äºæ¨ä»‹ä½¿ç”¨ï¼…å®‰è£…ä¸Š / devçš„/ HDC2 9920624 3823168 5585388 41 ï¼…/ [æ ¹@ WWW ã€œ]ï¼ƒçš„fdisk /å¼€å‘/ HDC &lt;==ä»”ç»†çœ‹ï¼Œä¸è¦åŠ ä¸Šæ•°å­—å–”ï¼çš„æ±½ç¼¸æ•°ä¸ºè¿™ç›˜è¢«è®¾ç½®åˆ°5005æœ‰æ˜¯æ²¡æœ‰é”™ä¸é‚£ä¸ªï¼Œä½†æ˜¯è¿™æ˜¯å¤§äº1024 ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æŸäº›è®¾ç½®ä¼šå¯¼è‡´é—®é¢˜ä¸ï¼š1 ï¼‰è½¯ä»¶ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è¿è¡Œï¼ˆÄ“ ã€‚æ‘¹ã€‚è€ç‰ˆæœ¬çš„LILO ï¼‰2 ï¼‰å¼•å¯¼å’Œåˆ†åŒºè½¯ä»¶ä»å…¶å®ƒæ“ä½œç³»ç»Ÿï¼ˆÃ‰ ã€‚å…‹ã€‚ï¼ŒDOS FDISK ï¼ŒOS / 2 FDISK ï¼‰ å‘½ä»¤ï¼ˆmä¸ºå¸®åŠ©ï¼‰ï¼š&lt;==ç­‰å¾…ä½ çš„è¾“å…¥ï¼ è¾“å…¥måï¼Œå°±ä¼šçœ‹åˆ°åº•ä¸‹è¿™äº›å‘½ä»¤ä»‹ç» å‘½ä»¤ï¼ˆmä¸ºå¸®åŠ©ï¼‰ï¼šm &lt;==è¾“å…¥måï¼Œå°±ä¼šçœ‹åˆ°åº•ä¸‹è¿™äº›å‘½ä»¤ä»‹ç»Command action åˆ‡æ¢å¯å¯åŠ¨æ ‡å¿— bç¼–è¾‘bsd disklabel cåˆ‡æ¢doså…¼å®¹æ€§æ ‡å¿— d åˆ é™¤åˆ†åŒº &lt;==åˆ é™¤ä¸€ä¸ªåˆ†åŒº låˆ—å‡ºå·²çŸ¥çš„åˆ†åŒºç±»å‹ m æ‰“å°æ­¤èœå• næ·»åŠ ä¸€ä¸ªæ–°åˆ†åŒº &lt;==æ·»åŠ ä¸€ä¸ªåˆ†åŒº oåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºDOSåˆ†åŒºè¡¨ p æ‰“å°åˆ†åŒºè¡¨ &lt;==åœ¨å±å¹•ä¸Šæ˜¾ç¤ºåˆ†åŒºè¡¨ qé€€å‡ºè€Œä¸ä¿å­˜æ›´æ”¹&lt;==ä¸ä¿å­˜ ç¦»å¼€fdiskç¨‹åº åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºSun disklabel tæ›´æ”¹åˆ†åŒºçš„ç³»ç»ŸID uæ›´æ”¹æ˜¾ç¤º/è¾“å…¥å•ä½ véªŒè¯åˆ†åŒºè¡¨ wå°†è¡¨å†™å…¥ç£ç›˜å¹¶é€€å‡º&lt;==å°†åˆšåˆšçš„åŠ¨ä½œå†™å…¥åˆ†å‰²è¡¨ xé¢å¤–åŠŸèƒ½ï¼ˆä»…é™ä¸“å®¶ï¼‰ ç¦»å¼€fdiskæ—¶ç‚¹å‡»qï¼Œé‚£ä¹ˆæ‰€æœ‰çš„åŠ¨ä½œéƒ½ä¸ä¼šç”Ÿæ•ˆï¼ç›¸åçš„ï¼ŒæŒ‰ä¸‹wå°±æ˜¯åŠ¨ä½œç”Ÿæ•ˆçš„æ„æ€ã€‚ å‘½ä»¤ï¼ˆmä¸ºå¸®åŠ©ï¼‰ï¼šp &lt;==è¿™é‡Œå¯ä»¥è¾“å‡ºå½“å‰ç£ç›˜çš„çŠ¶æ€ ç£ç›˜/ dev / hdc ï¼š41.1 GB ï¼Œ41174138880å­—èŠ‚ &lt;==è¿™ä¸ªç£ç›˜çš„æ–‡ä»¶åä¸å®¹é‡255ä¸ªç£å¤´ï¼Œ63ä¸ªæ‰‡åŒº/ç£é“ï¼Œ5005ä¸ªç£æŸ± &lt;==ç£å¤´ï¼Œå¢å¤§ä¸ç£æŸ±å¤§å°å•ä½= 16065 * 512ç£æŸ±= 8225280å­—èŠ‚&lt;==æ¯ä¸ªç£æŸ±çš„å¤§å° â€‹ è®¾å¤‡å¼•å¯¼å¯åŠ¨ç»“æŸå—IDç³»ç»Ÿ/ dev / hdc1 * 1 13 104391 83 Linux / dev / hdc2 14 1288 10241437 + 83 Linux / dev / hdc3 1289 1925 5116702 + 83 Linux / dev / hdc4 1926 5005 24740100 5æ‰©å±•/ dev / hdc5 1926 2052 1020096 82 Linux swap / Solaris ï¼ƒè£…ç½®æ–‡ä»¶åå¯åŠ¨åŒºå¦å¼€å§‹ç£æŸ±ç»“æŸç£æŸ±1Kå¤§å°å®¹é‡ç£ç›˜åˆ†åŒºæ§½å†…çš„ç³»ç»Ÿ å‘½ä»¤ï¼ˆmè¡¨ç¤ºå¸®åŠ©ï¼‰ï¼šq æƒ³è¦ä¸å‚¨å­˜ç¦»å¼€å—ï¼Ÿç‚¹å‡»qå°±å¯¹äº†ï¼ä¸è¦éšä¾¿æŒ‰wå•Šï¼ ä½¿ç”¨på¯ä»¥åˆ—å‡ºç›®å‰è¿™é¢—ç£ç›˜çš„åˆ†å‰²è¡¨ä¿¡æ¯ï¼Œè¿™ä¸ªä¿¡æ¯çš„ä¸ŠåŠéƒ¨åœ¨æ˜¾ç¤ºæ•´ä½“ç£ç›˜çš„çŠ¶æ€ã€‚ ç£ç›˜æ ¼å¼åŒ– ç£ç›˜åˆ†å‰²å®Œæˆåè‡ªç„¶å°±æ˜¯è¦è¿›è¡Œæ–‡ä»¶ç³»ç»Ÿçš„æ ¼å¼åŒ–ï¼Œæ ¼å¼åŒ–çš„å‘½ä»¤éå¸¸çš„ç®€å•ï¼Œä½¿ç”¨mkfsï¼ˆä½¿æ–‡ä»¶ç³»ç»Ÿï¼‰å‘½ä»¤ã€‚ è¯­æ³•ï¼š mkfs [ -tæ–‡ä»¶ç³»ç»Ÿæ ¼å¼]è£…ç½®æ–‡ä»¶å é€‰é¡¹ä¸å‚æ•°ï¼š -tï¼šå¯ä»¥æ¥æ–‡ä»¶ç³»ç»Ÿæ ¼å¼ï¼Œä¾‹å¦‚ext3ï¼Œext2ï¼Œvfatç­‰ï¼ˆç³»ç»Ÿæœ‰æ”¯æŒæ‰ä¼šç”Ÿæ•ˆï¼‰ å®ä¾‹1 æŸ¥çœ‹mkfsæ”¯æŒçš„æ–‡ä»¶æ ¼å¼ [ root @ wwwã€œ] ï¼ƒmkfs [æ ‡ç­¾] [æ ‡ç­¾] mkfs mkfs ã€‚cramfs mkfs ã€‚ext2 mkfs ã€‚ext3 mkfs ã€‚msdos mkfs ã€‚èƒ–å­ æŒ‰ä¸‹ä¸¤ä¸ª[tab]ï¼Œä¼šå‘ç°mkfsæ”¯æŒçš„æ–‡ä»¶æ ¼å¼å¦‚ä¸Šæ‰€ç¤ºã€‚ å®ä¾‹2 å°†åˆ†åŒº/ dev / hdc6ï¼ˆå¯æŒ‡å®šä½ è‡ªå·±çš„åˆ†åŒºï¼‰æ ¼å¼åŒ–ä¸ºext3æ–‡ä»¶ç³»ç»Ÿï¼š [ root @ wwwã€œ]ï¼ƒmkfs - t ext3 / dev / hdc6 mke2fs 1.39 ï¼ˆ29 - May - 2006 ï¼‰æ–‡ä»¶ç³»ç»Ÿæ ‡ç­¾= &lt;==è¿™é‡ŒæŒ‡çš„æ˜¯åˆ†å‰²æ§½çš„åç§°ï¼ˆlabel ï¼‰ æ“ä½œç³»ç»Ÿç±»å‹ï¼šLinuxå—å¤§å°= 4096 ï¼ˆlog = 2 ï¼‰&lt;==å—çš„å¤§å°é…ç½®ä¸º4Kç‰‡æ®µå¤§å°= 4096 ï¼ˆæ—¥å¿—= 2 ï¼‰251392ä¸ªièŠ‚ç‚¹ï¼Œ502023å— &lt;==ç”±æ­¤é…ç½®å†³å®šçš„ç´¢å¼•èŠ‚ç‚¹/å—æ•°é‡ 25101å—ï¼ˆ5.00 ï¼…ï¼‰ä¿ç•™ç”¨äºè¯¥è¶…çº§ç”¨æˆ· é¦–å…ˆæ•°æ®å—= 0æœ€å¤§æ–‡ä»¶ç³»ç»Ÿå—= 515899392ä¸ª16å—ç»„ 32768ä¸ªæ¯å—ç»„ï¼Œ32768ä¸ªæ¯ç‰‡æ®µç»„15712ä¸ªæ¯ç´¢å¼•èŠ‚ç‚¹ç»„çš„è¶…çº§å—å­˜å‚¨åœ¨å—çš„å¤‡ä»½ï¼š32768 ï¼Œ98304 ï¼Œ163840 ï¼Œ229376 ï¼Œ294912 â€‹ ç¼–å†™inodeè¡¨ï¼šå®Œæˆåˆ›å»ºæ—¥å¿—ï¼ˆ8192ä¸ªå—ï¼‰ï¼šå®Œæˆ&lt;==æœ‰æ—¥å¿—è®°å½•ç¼–å†™è¶…çº§å—å’Œæ–‡ä»¶ç³»ç»Ÿè®°å¸ä¿¡æ¯ï¼šå®Œæˆ è¯¥æ–‡ä»¶ç³»ç»Ÿå°†æ¯34åéª‘æˆ–180å¤©è‡ªåŠ¨æ£€æŸ¥ä¸€æ¬¡ï¼Œä»¥å…ˆåˆ°è€…ä¸ºå‡†ã€‚ä½¿ç”¨tune2fs - Ã§æˆ–-æˆ‘è¦é‡å†™ã€‚ï¼ƒè¿™æ ·å°±åˆ›å»ºäº†æˆ‘ä»¬æ‰€éœ€è¦çš„Ext3æ–‡ä»¶ç³»ç»Ÿäº†ï¼ç®€å•æ˜äº†ï¼ ç£ç›˜æ£€éªŒ fsckï¼ˆæ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥ï¼‰ç”¨æ¥æ£€æŸ¥å’Œç»´æŠ¤äºŒè€…çš„æ–‡ä»¶ç³»ç»Ÿã€‚ è‹¥ç³»ç»Ÿæ‰ç”µæˆ–ç£ç›˜å‘ç”Ÿé—®é¢˜ï¼Œå¯åˆ©ç”¨fsckå‘½ä»¤å¯¹æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ£€æŸ¥ã€‚ è¯­æ³•ï¼š fsck [ -tæ–‡ä»¶ç³»ç»Ÿ] [ -ACay ]è£…ç½®åç§° é€‰é¡¹ä¸å‚æ•°ï¼š -tï¼šç»™å®šæ¡£æ¡ˆç³»ç»Ÿçš„å‹å¼ï¼Œè‹¥åœ¨/ etc / fstabä¸­å·²æœ‰å®šä¹‰æˆ–kernelæœ¬èº«å·²æ”¯æŒçš„åˆ™ä¸éœ€åŠ ä¸Šæ­¤å‚æ•° -sï¼šä¾åºä¸€ä¸ªä¸€ä¸ªåœ°æ‰§è¡Œfsckçš„æŒ‡ä»¤æ¥æ£€æŸ¥ -Aï¼šå¯¹/ etc / fstabä¸­æ‰€æœ‰åˆ—å‡ºæ¥çš„åˆ†åŒºï¼ˆpartitionï¼‰åšæ£€æŸ¥ -Cï¼šæ˜¾ç¤ºå®Œæ•´çš„æ£€æŸ¥è¿›åº¦ -dï¼šæ‰“å°å‡ºe2fsckçš„è°ƒè¯•ç»“æœ -pï¼šåŒæ—¶æœ‰-Aæ¡ä»¶æ—¶ï¼ŒåŒæ—¶æœ‰å¤šä¸ªfsckçš„æ£€æŸ¥ä¸€èµ·æ‰§è¡Œ -Rï¼šåŒæ—¶æœ‰-Aæ¡ä»¶æ—¶ï¼Œçœç•¥/ä¸æ£€æŸ¥ -Vï¼šè¯¦ç»†æ˜¾ç¤ºæ¨¡å¼ -aï¼šå¦‚æœæ£€æŸ¥æœ‰é”™åˆ™è‡ªåŠ¨ä¿®å¤ -rï¼šå¦‚æœæ£€æŸ¥æœ‰é”™åˆ™ç”±ä½¿ç”¨è€…å›ç­”æ˜¯å¦æ¢å¤ -yï¼šé€‰é¡¹æŒ‡å®šæ£€æµ‹æ¯ä¸ªæ–‡ä»¶æ˜¯è‡ªåŠ¨è¾“å…¥yesï¼Œåœ¨ä¸ç¡®å®šé‚£äº›æ˜¯ä¸æ­£å¸¸çš„æ—¶å€™ï¼Œå¯ä»¥æ‰§è¡Œï¼ƒfsck -yå…¨éƒ¨æ£€æŸ¥ä¿®å¤ã€‚ å®ä¾‹1 æŸ¥çœ‹ç³»ç»Ÿæœ‰å¤šå°‘æ–‡ä»¶ç³»ç»Ÿæ”¯æŒçš„fsckå‘½ä»¤ï¼š [ root @ wwwã€œ] ï¼ƒfsck [æ ‡ç­¾] [æ ‡ç­¾] fsck fsck ã€‚cramfs fsck ã€‚ext2 fsck ã€‚ext3 fsck ã€‚msdos fsck ã€‚èƒ–å­ å®ä¾‹2 å¼ºåˆ¶æ£€æµ‹/ dev / hdc6åˆ†åŒºï¼š [ root @ wwwã€œ]ï¼ƒfsck - C - f - t ext3 / dev / hdc6 fsckçš„1.39 ï¼ˆ29 -æœˆ- 2006å¹´ï¼‰ ç”¨e2fsck 1.39 ï¼ˆ29 -æœˆ- 2006å¹´ï¼‰é€š1 ï¼šæ£€æŸ¥ç´¢å¼•èŠ‚ç‚¹ï¼Œå—ï¼Œå’Œå°ºå¯¸ é€šè¡Œè¯2 ï¼šæ£€æŸ¥ç›®å½•ç»“æ„ é€šè¡Œè¯3 ï¼šæ£€æŸ¥ç›®å½•çš„è¿æ¥ é€š4 ï¼šæ£€æŸ¥å¼•ç”¨è®¡æ•° ä¼ é€’5 ï¼šæ£€æŸ¥ç»„ æ‘˜è¦ä¿¡æ¯ vbird_logical ï¼š11 /äºŒåäº”ä¸‡ä¸€åƒä¹ç™¾å…­åå…«æ–‡ä»¶ï¼ˆ9.1 ï¼…é-è¿ç»­çš„ï¼‰ï¼Œ36926 /ä¸€ç™¾ä¸‡å››åƒé›¶å››åå…­å— å¦‚æœæ²¡æœ‰åŠ ä¸Š-fçš„é€‰é¡¹ï¼Œåˆ™ç”±äºè¯¥æ–‡ä»¶ç³»ç»Ÿä¸æ›¾å‡ºç°é—®é¢˜ï¼Œæ£€æŸ¥çš„ç»è¿‡éå¸¸å¿«é€Ÿï¼è‹¥åŠ ä¸Š-få¼ºåˆ¶æ£€æŸ¥ï¼Œåªä¼šæœ‰ä¸€é¡¹çš„æ˜¾ç¤ºè¿‡ç¨‹ã€‚ ç£ç›˜æŒ‚è½½ä¸å¸é™¤ Linuxçš„ç£ç›˜æŒ‚è½½ä½¿ç”¨mountå‘½ä»¤ï¼Œå¸è½½ä½¿ç”¨umountå‘½ä»¤ã€‚ ç£ç›˜æŒ‚è½½è¯­æ³•ï¼š mount [ -tæ–‡ä»¶ç³»ç»Ÿ] [ -Læ ‡ç­¾å] [ -oå…¶ä»–é€‰é¡¹] [ -n ]è£…ç½®æ–‡ä»¶åæŒ‚è½½ç‚¹ å®ä¾‹1 ç”¨æœ€å°çš„æ–¹å¼ï¼Œå°†åˆšåˆšåˆ›å»ºçš„/ dev / hdc6æŒ‚è½½åˆ°/ mnt / hdc6ä¸Šé¢ï¼ [æ ¹@ WWW ã€œ]ï¼ƒMKDIR / MNT / hdc6 [æ ¹@ WWW ã€œ]ï¼ƒå®‰è£…/ devçš„/ hdc6 / MNT / hdc6 [æ ¹@ WWW ã€œ]ï¼ƒDF æ–‡ä»¶ç³»ç»Ÿ1K -å— ç”¨äºæ¨ä»‹ä½¿ç”¨ï¼…å®‰è£…ä¸Š .... ã€‚ä¸­é—´çœç•¥..... / dev / hdc6 1976312 42072 1833836 3 ï¼…/ mnt / hdc6 ç£ç›˜å¸è½½å‘½ä»¤umountè¯­æ³•ï¼š å¸é™¤[ - FN ]è£…ç½®æ–‡ä»¶åæˆ–æŒ‚è½½ç‚¹ é€‰é¡¹ä¸å‚æ•°ï¼š -fï¼šå¼ºåˆ¶å¸é™¤ï¼å¯ç”¨åœ¨ç±»ä¼¼ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼ˆNFSï¼‰æ— æ³•è¯»å–åˆ°çš„æƒ…å†µä¸‹ï¼› -nï¼šä¸å‡çº§/ etc / mtabæƒ…å†µä¸‹å¸é™¤ã€‚ å¸è½½/ dev / hdc6 [æ ¹@ WWW ã€œ]ï¼ƒå¸é™¤/ devçš„/ hdc6 vi/vim æ‰€æœ‰çš„ Unix Like ç³»ç»Ÿéƒ½ä¼šå†…å»º vi æ–‡ä¹¦ç¼–è¾‘å™¨ï¼Œå…¶ä»–çš„æ–‡ä¹¦ç¼–è¾‘å™¨åˆ™ä¸ä¸€å®šä¼šå­˜åœ¨ã€‚ä½†æ˜¯ç›®å‰æˆ‘ä»¬ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯ vim ç¼–è¾‘å™¨ã€‚vim å…·æœ‰ç¨‹åºç¼–è¾‘çš„èƒ½åŠ›ï¼Œå¯ä»¥ä¸»åŠ¨çš„ä»¥å­—ä½“é¢œè‰²è¾¨åˆ«è¯­æ³•çš„æ­£ç¡®æ€§ï¼Œæ–¹ä¾¿ç¨‹åºè®¾è®¡ã€‚ ä»€ä¹ˆæ˜¯ vimï¼Ÿ Vimæ˜¯ä» vi å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä»£ç è¡¥å®Œã€ç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œï¼Œåœ¨ç¨‹åºå‘˜ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚ ç®€å•çš„æ¥è¯´ï¼Œ vi æ˜¯è€å¼çš„å­—å¤„ç†å™¨ï¼Œä¸è¿‡åŠŸèƒ½å·²ç»å¾ˆé½å…¨äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å¯ä»¥è¿›æ­¥çš„åœ°æ–¹ã€‚ vim åˆ™å¯ä»¥è¯´æ˜¯ç¨‹åºå¼€å‘è€…çš„ä¸€é¡¹å¾ˆå¥½ç”¨çš„å·¥å…·ã€‚ è¿ vim çš„å®˜æ–¹ç½‘ç«™ (http://www.vim.org) è‡ªå·±ä¹Ÿè¯´ vim æ˜¯ä¸€ä¸ªç¨‹åºå¼€å‘å·¥å…·è€Œä¸æ˜¯æ–‡å­—å¤„ç†è½¯ä»¶ã€‚ vim é”®ç›˜å›¾ï¼š vi/vim çš„ä½¿ç”¨ åŸºæœ¬ä¸Š vi/vim å…±åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯å‘½ä»¤æ¨¡å¼ï¼ˆCommand modeï¼‰ï¼Œè¾“å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰å’Œåº•çº¿å‘½ä»¤æ¨¡å¼ï¼ˆLast line modeï¼‰ã€‚ è¿™ä¸‰ç§æ¨¡å¼çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š å‘½ä»¤æ¨¡å¼ï¼š ç”¨æˆ·åˆšåˆšå¯åŠ¨ vi/vimï¼Œä¾¿è¿›å…¥äº†å‘½ä»¤æ¨¡å¼ã€‚ æ­¤çŠ¶æ€ä¸‹æ•²å‡»é”®ç›˜åŠ¨ä½œä¼šè¢«Vimè¯†åˆ«ä¸ºå‘½ä»¤ï¼Œè€Œéè¾“å…¥å­—ç¬¦ã€‚æ¯”å¦‚æˆ‘ä»¬æ­¤æ—¶æŒ‰ä¸‹iï¼Œå¹¶ä¸ä¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œiè¢«å½“ä½œäº†ä¸€ä¸ªå‘½ä»¤ã€‚ ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„å‡ ä¸ªå‘½ä»¤ï¼š i åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ï¼Œä»¥è¾“å…¥å­—ç¬¦ã€‚ x åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ã€‚ : åˆ‡æ¢åˆ°åº•çº¿å‘½ä»¤æ¨¡å¼ï¼Œä»¥åœ¨æœ€åº•ä¸€è¡Œè¾“å…¥å‘½ä»¤ã€‚ è‹¥æƒ³è¦ç¼–è¾‘æ–‡æœ¬ï¼šå¯åŠ¨Vimï¼Œè¿›å…¥äº†å‘½ä»¤æ¨¡å¼ï¼ŒæŒ‰ä¸‹iï¼Œåˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ã€‚ å‘½ä»¤æ¨¡å¼åªæœ‰ä¸€äº›æœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå› æ­¤ä»è¦ä¾é åº•çº¿å‘½ä»¤æ¨¡å¼è¾“å…¥æ›´å¤šå‘½ä»¤ã€‚ è¾“å…¥æ¨¡å¼ åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹iå°±è¿›å…¥äº†è¾“å…¥æ¨¡å¼ã€‚ åœ¨è¾“å…¥æ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‰é”®ï¼š å­—ç¬¦æŒ‰é”®ä»¥åŠShiftç»„åˆï¼Œè¾“å…¥å­—ç¬¦ ENTERï¼Œå›è½¦é”®ï¼Œæ¢è¡Œ BACK SPACEï¼Œé€€æ ¼é”®ï¼Œåˆ é™¤å…‰æ ‡å‰ä¸€ä¸ªå­—ç¬¦ DELï¼Œåˆ é™¤é”®ï¼Œåˆ é™¤å…‰æ ‡åä¸€ä¸ªå­—ç¬¦ æ–¹å‘é”®ï¼Œåœ¨æ–‡æœ¬ä¸­ç§»åŠ¨å…‰æ ‡ HOME/ENDï¼Œç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–/è¡Œå°¾ Page Up/Page Downï¼Œä¸Š/ä¸‹ç¿»é¡µ Insertï¼Œåˆ‡æ¢å…‰æ ‡ä¸ºè¾“å…¥/æ›¿æ¢æ¨¡å¼ï¼Œå…‰æ ‡å°†å˜æˆç«–çº¿/ä¸‹åˆ’çº¿ ESCï¼Œé€€å‡ºè¾“å…¥æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°å‘½ä»¤æ¨¡å¼ åº•çº¿å‘½ä»¤æ¨¡å¼ åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹:ï¼ˆè‹±æ–‡å†’å·ï¼‰å°±è¿›å…¥äº†åº•çº¿å‘½ä»¤æ¨¡å¼ã€‚ åº•çº¿å‘½ä»¤æ¨¡å¼å¯ä»¥è¾“å…¥å•ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„å‘½ä»¤ï¼Œå¯ç”¨çš„å‘½ä»¤éå¸¸å¤šã€‚ åœ¨åº•çº¿å‘½ä»¤æ¨¡å¼ä¸­ï¼ŒåŸºæœ¬çš„å‘½ä»¤æœ‰ï¼ˆå·²ç»çœç•¥äº†å†’å·ï¼‰ï¼š q é€€å‡ºç¨‹åº w ä¿å­˜æ–‡ä»¶ æŒ‰ESCé”®å¯éšæ—¶é€€å‡ºåº•çº¿å‘½ä»¤æ¨¡å¼ã€‚ ç®€å•çš„è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸‰ä¸ªæ¨¡å¼æƒ³æˆåº•ä¸‹çš„å›¾æ ‡æ¥è¡¨ç¤º vi/vim ä½¿ç”¨å®ä¾‹ ä½¿ç”¨ vi/vim è¿›å…¥ä¸€èˆ¬æ¨¡å¼ å¦‚æœä½ æƒ³è¦ä½¿ç”¨ vi æ¥å»ºç«‹ä¸€ä¸ªåä¸º runoob.txt çš„æ–‡ä»¶æ—¶ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š $ vim runoob.txt ç›´æ¥è¾“å…¥ vi æ–‡ä»¶å å°±èƒ½å¤Ÿè¿›å…¥ vi çš„ä¸€èˆ¬æ¨¡å¼äº†ã€‚è¯·æ³¨æ„ï¼Œè®°å¾— vi åé¢ä¸€å®šè¦åŠ æ–‡ä»¶åï¼Œä¸ç®¡è¯¥æ–‡ä»¶å­˜åœ¨ä¸å¦ï¼ - æŒ‰ä¸‹ i è¿›å…¥è¾“å…¥æ¨¡å¼(ä¹Ÿç§°ä¸ºç¼–è¾‘æ¨¡å¼)ï¼Œå¼€å§‹ç¼–è¾‘æ–‡å­— åœ¨ä¸€èˆ¬æ¨¡å¼ä¹‹ä¸­ï¼Œåªè¦æŒ‰ä¸‹ i, o, a ç­‰å­—ç¬¦å°±å¯ä»¥è¿›å…¥è¾“å…¥æ¨¡å¼äº†ï¼ åœ¨ç¼–è¾‘æ¨¡å¼å½“ä¸­ï¼Œä½ å¯ä»¥å‘ç°åœ¨å·¦ä¸‹è§’çŠ¶æ€æ ä¸­ä¼šå‡ºç° â€“INSERT- çš„å­—æ ·ï¼Œé‚£å°±æ˜¯å¯ä»¥è¾“å…¥ä»»æ„å­—ç¬¦çš„æç¤ºã€‚ è¿™ä¸ªæ—¶å€™ï¼Œé”®ç›˜ä¸Šé™¤äº† Esc è¿™ä¸ªæŒ‰é”®ä¹‹å¤–ï¼Œå…¶ä»–çš„æŒ‰é”®éƒ½å¯ä»¥è§†ä½œä¸ºä¸€èˆ¬çš„è¾“å…¥æŒ‰é’®äº†ï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿›è¡Œä»»ä½•çš„ç¼–è¾‘ã€‚ - æŒ‰ä¸‹ ESC æŒ‰é’®å›åˆ°ä¸€èˆ¬æ¨¡å¼ å¥½äº†ï¼Œå‡è®¾æˆ‘å·²ç»æŒ‰ç…§ä¸Šé¢çš„æ ·å¼ç»™ä»–ç¼–è¾‘å®Œæ¯•äº†ï¼Œé‚£ä¹ˆåº”è¯¥è¦å¦‚ä½•é€€å‡ºå‘¢ï¼Ÿæ˜¯çš„ï¼æ²¡é”™ï¼å°±æ˜¯ç»™ä»–æŒ‰ä¸‹ Esc è¿™ä¸ªæŒ‰é’®å³å¯ï¼é©¬ä¸Šä½ å°±ä¼šå‘ç°ç”»é¢å·¦ä¸‹è§’çš„ â€“ INSERT â€“ ä¸è§äº†ï¼ åœ¨ä¸€èˆ¬æ¨¡å¼ä¸­æŒ‰ä¸‹ :wq å‚¨å­˜åç¦»å¼€ vi OKï¼Œæˆ‘ä»¬è¦å­˜æ¡£äº†ï¼Œå­˜ç›˜å¹¶ç¦»å¼€çš„æŒ‡ä»¤å¾ˆç®€å•ï¼Œè¾“å…¥ :wq å³å¯ä¿å­˜ç¦»å¼€ï¼ - Linux vi_vim _ èœé¸Ÿæ•™ç¨‹.pdf Linux yumå‘½ä»¤ yumï¼ˆYellow dog Updaterï¼ŒModifiedï¼‰æ˜¯ä¸€ä¸ªåœ¨Fedoraå’ŒRedHatä»¥åŠSUSEä¸­çš„Shellå‰ç«¯è¿æ¥ç®¡ç†å™¨ã€‚ åŸºäºRPMåŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½RPMåŒ…å’Œå®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ç›¸å¯¹å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ï¼Œæ— é¡»ç¹çåœ°ä¸€æ¬¡æ¬¡ä¸‹è½½ï¼Œå®‰è£…ã€‚ yumæä¾›äº†æŸ¥æ‰¾ï¼Œå®‰è£…ï¼Œåˆ é™¤æŸäººï¼Œå¤šä¸ªç”šè‡³å…¨éƒ¨å®Œå…¨çš„å‘½ä»¤ï¼Œè€Œä¸”å‘½ä»¤ç®€æ´è€Œåˆå¥½è®°ã€‚ yumè¯­æ³• yum [é€‰é¡¹] [å‘½ä»¤] [åŒ…...] é€‰é¡¹ï¼šä»»é€‰ï¼Œé€‰é¡¹åŒ…æ‹¬-hï¼ˆå¸®åŠ©ï¼‰ï¼Œ-yï¼ˆå½“å®‰è£…è¿‡ç¨‹æç¤ºé€‰æ‹©å…¨éƒ¨ä¸ºâ€œ yesâ€ï¼‰ï¼Œ-qï¼ˆä¸æ˜¾ç¤ºå®‰è£…çš„è¿‡ç¨‹ï¼‰ç­‰ç­‰ã€‚ å‘½ä»¤ï¼šè¦è¿›è¡Œçš„æ“ä½œã€‚ packageï¼šå®‰è£…çš„åŒ…åã€‚ yumå¸¸ç”¨å‘½ä»¤ 1.åˆ—å‡ºæ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶æ¸…å•å‘½ä»¤ï¼šyum check-update 2.æ›´æ–°æ‰€æœ‰è½¯ä»¶å‘½ä»¤ï¼šyum update 3.ä»…å®‰è£…æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼šyum install &lt;ç¨‹åºåŒ…åç§°&gt; 4.ä»…æ›´æ–°æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼šyum update &lt;ç¨‹åºåŒ…åç§°&gt; 5.åˆ—å‡ºæ‰€æœ‰å¯å®‰è£…çš„è½¯ä»¶æ¸…å•å‘½ä»¤ï¼šç™¾èƒœåå• 6.åˆ é™¤åˆ é™¤å‘½ä»¤ï¼šyum remove &lt;package_name&gt; 7.æŸ¥æ‰¾æ™®é€šå‘½ä»¤ï¼šyum search &lt;å…³é”®å­—&gt; 8.æ¸…é™¤ç¼“å­˜å‘½ä»¤ï¼š ç™¾èƒœæ¸…æ´åŒ…ï¼šæ¸…é™¤ç¼“å­˜ç›®å½•ä¸‹çš„åŒé‡ yum clean headersï¼šæ¸…é™¤ç¼“å­˜ç›®å½•ä¸‹çš„headers yum clean oldheadersï¼šæ¸…é™¤ç¼“å­˜ç›®å½•ä¸‹æ—§çš„æ ‡é¢˜ yum cleanï¼Œyum clean allï¼ˆ= yum clean package; yum clean oldheadersï¼‰ï¼šæ¸…é™¤ç¼“å­˜ç›®å½•ä¸‹çš„å‰¯æœ¬åŠæ—§çš„æ ‡é¢˜ å®ä¾‹1 å®‰è£…pam-devel [æ ¹@ WWW ã€œ]ï¼ƒç™¾èƒœå®‰è£…PAM - develçš„ è®¾ç½®äº†å®‰è£…è¿‡ç¨‹è§£æåŒ…å®‰è£…å‚æ•° è§£æä¾èµ–æ€§&lt;==å…ˆæ£€æŸ¥è½¯ä»¶çš„å±æ€§ç›¸ä¾é—®é¢˜- &gt;è¿è¡Œçš„äº‹åŠ¡æ£€æŸ¥ ---&gt;å°è£…PAM - develçš„ã€‚i386 0 ï¼š0.99 ã€‚6.2 - 4.el5é›†è¢«æ›´æ–° å¤„ç†ç›¸å…³ï¼šPAM = 0.99 ã€‚6.2 - 4.el5çš„åŒ…ï¼šPAM - develçš„ è¿è¡Œäº¤æ˜“æ£€æŸ¥ ---&gt;åŒ…è£…PAM ã€‚i386 0 ï¼š0.99 ã€‚6.2 - 4.el5é›†è¿›è¡Œæ›´æ–° æ–‡ä»¶åˆ—è¡¨ã€‚xml ã€‚gz 100 ï¼…| ======================== | 1.6 MB 00 ï¼š05 çš„æ–‡ä»¶åˆ—è¡¨ã€‚xml ã€‚gz 100 ï¼…| ======================== | 138 kB 00 : 00- &gt;å®Œæˆçš„ä¾èµ–æ€§è§£æâ€¦â€¦ï¼ˆçœç•¥ï¼‰ å®ä¾‹2 å¯æ‹†å¸pam-devel [æ ¹@ WWW ã€œ]ï¼ƒè«åˆ é™¤PAM - develçš„ è®¾ç½®äº†åˆ é™¤è¿‡ç¨‹è§£å†³ä¾èµ–&lt;==åŒæ ·çš„ï¼Œå…ˆè§£å†³å±æ€§ç›¸ä¾çš„é—®é¢˜- &gt;è¿è¡Œçš„äº‹åŠ¡æ£€æŸ¥ ---&gt;å°è£…PAM - develçš„ã€‚i386 0 ï¼š0.99 ã€‚6.2 - 4.el5é›†è¢«æ“¦é™¤ æˆå“ä¾èµ–å†³è®® è§£å†³ä¾èµ–æ€§ ================================================== =è½¯ä»¶åŒ…Archç‰ˆæœ¬åº“å¤§å° ================================================== =åˆ é™¤ï¼š pam - devel i386 0.99 ã€‚6.2 - 4.el5 å®‰è£… 495 Ä· äº¤æ˜“æ‘˜è¦================================ =============================å®‰è£…0åŒ…ï¼ˆå°å·ï¼‰æ›´æ–°0åŒ…ï¼ˆå°å·ï¼‰ä¸­å–å‡º1åŒ…ï¼ˆå°å·ï¼‰&lt;==è¿˜å¥½ï¼Œå¹¶æ²¡æœ‰å±æ€§ç›¸ä¾çš„é—®é¢˜ï¼Œå•çº¯å¯ç§»é™¤ä¸€ä¸ªè½¯ä»¶ æ˜¯è¯¥è¡Œ[ Ã¿ / Ã‘ ]ï¼šÅ¸ ä¸‹è½½è½¯ä»¶åŒ…ï¼šè¿è¡Œrpm_check_debug è¿è¡Œäº¤æ˜“æµ‹è¯•å·²å®Œæˆçš„äº¤æ˜“æµ‹è¯•çš„äº¤æ˜“æµ‹è¯•æˆåŠŸè¿è¡Œäº¤æ˜“æ“¦é™¤ï¼šPAM - develçš„ ################### ###### [1/1] åˆ é™¤ï¼špam - devel ã€‚i386 0 ï¼š0.99 ã€‚6.2 - 4.el5å®Œæˆï¼ å®ä¾‹3 åˆ©ç”¨yumçš„åŠŸèƒ½ï¼Œå‘ç°ä»¥pamä¸ºå¼€å¤´çš„è½¯ä»¶åç§°æœ‰ä»€ä¹ˆï¼Ÿ [ root @ wwwã€œ] ï¼ƒyum list pam *å·²å®‰è£…çš„è½¯ä»¶åŒ… pam ã€‚i386 0.99 ã€‚6.2 - 3.27 ã€‚å·²å®‰è£…el5 pam_ccreds ã€‚I386 3 - 5 å®‰è£… pam_krb5 ã€‚i386 2.2 ã€‚14 - 1 å®‰è£… pam_passwdqc ã€‚i386 1.0 ã€‚2 - 1.2 ã€‚2 å®‰è£… pam_pkcs11 ã€‚i386 0.5 ã€‚3 - 23 å®‰è£… pam_smb ã€‚i386 1.1 ã€‚7 - 7.2 ã€‚1ä¸ª å·²å®‰è£…çš„ å¯ç”¨è½¯ä»¶åŒ…&lt;==åº•ä¸‹åˆ™æ˜¯ã€å¯å‡çº§ã€çš„æˆ–ã€æœªå®‰è£…ã€çš„ pam ã€‚i386 0.99 ã€‚6.2 - 4.el5åŸº PAM - develçš„ã€‚i386 0.99 ã€‚6.2 - 4.el5åŸº pam_krb5çš„ã€‚i386 2.2 ã€‚14 - 10åŸº å›½å†…yumæº ç½‘æ˜“ï¼ˆ163ï¼‰yumæºæ˜¯å›½å†…æœ€å¥½çš„yumæºä¹‹ä¸€ï¼Œæ— è®ºæ˜¯é€Ÿåº¦è¿˜æ˜¯è½¯ä»¶ç‰ˆæœ¬ï¼Œéƒ½éå¸¸çš„ä¸é”™ã€‚ å°†yumæºè®¾ç½®ä¸º163 yumï¼Œå¯ä»¥æé«˜æ‰©å±•å®‰è£…å’Œæ›´æ–°çš„é€Ÿåº¦ï¼ŒåŒæ—¶é¿å…ä¸€äº›å¸¸è§è½¯ä»¶ç‰ˆæœ¬æ— æ³•æ‰¾åˆ°ã€‚ å®‰è£…æ­¥éª¤ é¦–å…ˆå¤‡ä»½/etc/yum.repos.d/CentOS-Base.repo mv / etc / yum ã€‚å›è´­ã€‚d / CentOSçš„-åŸºç¡€ã€‚å›è´­/ etc / yum ã€‚å›è´­ã€‚d / CentOSçš„-åŸºç¡€ã€‚å›è´­ã€‚åå¤‡ ä¸‹è½½å¯¹åº”ç‰ˆæœ¬repoæ–‡ä»¶ï¼ŒåŠ å…¥/etc/yum.repos.d/ï¼ˆæ“ä½œå‰è¯·åšå¥½ç›¸åº”å¤‡ä»½ï¼‰ CentOS5ï¼šhttpï¼š//mirrors.163.com/.help/CentOS5-Base-163.repo CentOS6ï¼šhttpï¼š//mirrors.163.com/.help/CentOS6-Base-163.repo CentOS7ï¼šhttpï¼š//mirrors.163.com/.help/CentOS7-Base-163.repo wgetçš„HTTP ï¼š//mirrors.163.com/.help/CentOS6-Base-163.repo MV CentOS6 -åŸºåœ°- 163.repoçš„CentOS -åŸºåœ°ã€‚å›è´­ è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆç¼“å­˜ ç™¾èƒœæ¸…ç†æ‰€æœ‰ yum makecache é™¤äº†ç½‘æ˜“ä¹‹å¤–ï¼Œå›½å†…è¿˜æœ‰å…¶ä»–ä¸é”™çš„yumæºï¼ŒæŸäº›ä¸­ç§‘å¤§å’Œæœç‹ã€‚ ä¸­ç§‘å¤§çš„yumæºï¼Œå®‰è£…æ–¹æ³•æŸ¥çœ‹ï¼šhttps ğŸ˜•/lug.ustc.edu.cn/wiki/mirrors/help/centos sohuçš„yumæºå®‰è£…æ–¹æ³•æŸ¥çœ‹ï¼šhttp : //mirrors.sohu.com/help/centos.html Linux apt å‘½ä»¤ aptï¼ˆAdvanced Packaging Toolï¼‰æ˜¯ä¸€ä¸ªåœ¨ Debian å’Œ Ubuntu ä¸­çš„ Shell å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚ apt å‘½ä»¤æä¾›äº†æŸ¥æ‰¾ã€å®‰è£…ã€å‡çº§ã€åˆ é™¤æŸä¸€ä¸ªã€ä¸€ç»„ç”šè‡³å…¨éƒ¨è½¯ä»¶åŒ…çš„å‘½ä»¤ï¼Œè€Œä¸”å‘½ä»¤ç®€æ´è€Œåˆå¥½è®°ã€‚ apt å‘½ä»¤æ‰§è¡Œéœ€è¦è¶…çº§ç®¡ç†å‘˜æƒé™(root)ã€‚ apt è¯­æ³• apt [options] [command] [package ...] optionsï¼šå¯é€‰ï¼Œé€‰é¡¹åŒ…æ‹¬ -hï¼ˆå¸®åŠ©ï¼‰ï¼Œ-yï¼ˆå½“å®‰è£…è¿‡ç¨‹æç¤ºé€‰æ‹©å…¨éƒ¨ä¸º&quot;yes&quot;ï¼‰ï¼Œ-qï¼ˆä¸æ˜¾ç¤ºå®‰è£…çš„è¿‡ç¨‹ï¼‰ç­‰ç­‰ã€‚ commandï¼šè¦è¿›è¡Œçš„æ“ä½œã€‚ packageï¼šå®‰è£…çš„åŒ…åã€‚ apt å¸¸ç”¨å‘½ä»¤ åˆ—å‡ºæ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶æ¸…å•å‘½ä»¤ï¼šsudo apt update å‡çº§è½¯ä»¶åŒ…ï¼šsudo apt upgrade åˆ—å‡ºå¯æ›´æ–°çš„è½¯ä»¶åŒ…åŠç‰ˆæœ¬ä¿¡æ¯ï¼šapt list --upgradeable å‡çº§è½¯ä»¶åŒ…ï¼Œå‡çº§å‰å…ˆåˆ é™¤éœ€è¦æ›´æ–°è½¯ä»¶åŒ…ï¼šsudo apt full-upgrade å®‰è£…æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼šsudo apt install &lt;package_name&gt; å®‰è£…å¤šä¸ªè½¯ä»¶åŒ…ï¼šsudo apt install &lt;package_1&gt; &lt;package_2&gt; &lt;package_3&gt; æ›´æ–°æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼šsudo apt update &lt;package_name&gt; æ˜¾ç¤ºè½¯ä»¶åŒ…å…·ä½“ä¿¡æ¯,ä¾‹å¦‚ï¼šç‰ˆæœ¬å·ï¼Œå®‰è£…å¤§å°ï¼Œä¾èµ–å…³ç³»ç­‰ç­‰ï¼šsudo apt show &lt;package_name&gt; åˆ é™¤è½¯ä»¶åŒ…å‘½ä»¤ï¼šsudo apt remove &lt;package_name&gt; æ¸…ç†ä¸å†ä½¿ç”¨çš„ä¾èµ–å’Œåº“æ–‡ä»¶: sudo apt autoremove ç§»é™¤è½¯ä»¶åŒ…åŠé…ç½®æ–‡ä»¶: sudo apt purge &lt;package_name&gt; æŸ¥æ‰¾è½¯ä»¶åŒ…å‘½ä»¤ï¼š sudo apt search åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„åŒ…ï¼šapt list --installed åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„åŒ…çš„ç‰ˆæœ¬ä¿¡æ¯ï¼šapt list --all-versions å®ä¾‹ æŸ¥çœ‹ä¸€äº›å¯æ›´æ–°çš„åŒ…ï¼š sudo apt update å‡çº§å®‰è£…åŒ…ï¼š sudo apt upgrade åœ¨ä»¥ä¸Šäº¤äº’å¼è¾“å…¥å­—æ¯ Y å³å¯å¼€å§‹å‡çº§ã€‚ å¯ä»¥å°†ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤ç»„åˆèµ·æ¥ï¼Œä¸€é”®å‡çº§ï¼š sudo apt update &amp;&amp; sudo apt upgrade -y å®‰è£… mplayer åŒ…ï¼š sudo apt install mplayer å¦‚è¿‡ä¸å¤ªè®°å¾—å®Œæ•´çš„åŒ…åï¼Œæˆ‘ä»¬å¯ä»¥åªè¾“å…¥å‰åŠéƒ¨åˆ†çš„åŒ…åï¼Œç„¶åæŒ‰ä¸‹ Tab é”®ï¼Œä¼šåˆ—å‡ºç›¸å…³çš„åŒ…åï¼š ä»¥ä¸Šå®ä¾‹æˆ‘ä»¬è¾“å…¥æ¥ redsï¼Œç„¶åæŒ‰ä¸‹ Tab é”®ï¼Œè¾“å‡ºæ¥å››ä¸ªç›¸å…³çš„åŒ…ã€‚ å¦‚æœæˆ‘ä»¬æƒ³å®‰è£…ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œä½†å¦‚æœè½¯ä»¶åŒ…å·²ç»å­˜åœ¨ï¼Œåˆ™ä¸è¦å‡çº§å®ƒï¼Œå¯ä»¥ä½¿ç”¨ â€“no-upgrade é€‰é¡¹: sudo apt install &lt;package_name&gt; --no-upgrade å®‰è£… mplayer å¦‚æœå­˜åœ¨åˆ™ä¸è¦å‡çº§ï¼š sudo apt install mplayer --no-upgrade å¦‚æœåªæƒ³å‡çº§ï¼Œä¸è¦å®‰è£…å¯ä»¥ä½¿ç”¨ --only-upgrade å‚æ•°ï¼š sudo apt install &lt;package_name&gt; --only-upgrade åªå‡çº§ mplayerï¼Œå¦‚æœä¸å­˜åœ¨å°±ä¸è¦å®‰è£…å®ƒï¼š sudo apt install mplayer --only-upgrade å¦‚æœéœ€è¦è®¾ç½®æŒ‡å®šç‰ˆæœ¬ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š sudo apt install &lt;package_name&gt;=&lt;version_number&gt; package_name ä¸ºåŒ…åï¼Œversion_number ä¸ºç‰ˆæœ¬å·ã€‚ ç§»é™¤åŒ…å¯ä»¥ä½¿ç”¨ remove å‘½ä»¤ï¼š sudo apt remove mplayer æŸ¥æ‰¾åä¸º libimobile çš„ç›¸å…³åŒ…ï¼š apt search libimobile æŸ¥çœ‹ pinta åŒ…çš„ç›¸å…³ä¿¡æ¯ï¼š apt show pinta åˆ—å‡ºå¯æ›´æ–°çš„è½¯ä»¶åŒ…ï¼š apt list --upgradeable æ¸…ç†ä¸å†ä½¿ç”¨çš„ä¾èµ–å’Œåº“æ–‡ä»¶ï¼š sudo apt autoremove åœ¨ä»¥ä¸Šäº¤äº’å¼è¾“å…¥å­—æ¯ Y å³å¯å¼€å§‹æ¸…ç†ã€‚ åº”ç”¨åœºæ™¯ ç¦»çº¿/åœ¨çº¿ å®‰è£…å„ç§åŒ… åå° JAVAç›¸å…³ Redis Mysql Tomcat æŸ¥çœ‹tomcatå®æ—¶è¿è¡Œæ—¥å¿—ï¼šcd tomcat/log â€”&gt; tail -f catalina.out ç¨‹åºéƒ¨ç½² å‰å° ç¨‹åºéƒ¨ç½² å…¶ä»– Nginx æ–‡ä»¶æ“ä½œ æ¸…ç†é€Ÿåº¦ä¼˜åŒ– è¿›ç¨‹ç®¡ç† æƒé™ç®¡ç†","link":"/2021/03/01/Draft/2021/Linux/"},{"title":"Python å­¦ä¹ ","text":"Python3å­¦ä¹  ç®€ä»‹ Python is powerful... and fast; plays well with others; runs everywhere; is friendly &amp; easy to learn; is Open. Python å‘å±•å†å² Python ç‰¹ç‚¹ Python åº”ç”¨ å·¥å…· å¼€å‘å¹³å°ï¼šPYCharm è¯­æ³•åŸºç¡€ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719'''=============åŸºæœ¬è¯­æ³•============='''import keyword# from modname import name1[, name2[, ... nameN]]# Python æä¾›äº†ä¸€ä¸ªåŠæ³•ï¼ŒæŠŠè¿™äº›å®šä¹‰å­˜æ”¾åœ¨æ–‡ä»¶ä¸­ï¼Œä¸ºä¸€äº›è„šæœ¬æˆ–è€…äº¤äº’å¼çš„è§£é‡Šå™¨å®ä¾‹ä½¿ç”¨ï¼Œè¿™ä¸ªæ–‡ä»¶è¢«ç§°ä¸ºæ¨¡å—ã€‚# æ¨¡å—æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰ä½ å®šä¹‰çš„å‡½æ•°å’Œå˜é‡çš„æ–‡ä»¶ï¼Œå…¶åç¼€åæ˜¯.pyã€‚æ¨¡å—å¯ä»¥è¢«åˆ«çš„ç¨‹åºå¼•å…¥ï¼Œä»¥ä½¿ç”¨è¯¥æ¨¡å—ä¸­çš„å‡½æ•°ç­‰åŠŸèƒ½ã€‚è¿™ä¹Ÿæ˜¯ä½¿ç”¨ python æ ‡å‡†åº“çš„æ–¹æ³•ã€‚# ä»æŸä¸ªæ¨¡å—ä¸­å¯¼å…¥å¤šä¸ªå‡½æ•°,æ ¼å¼ä¸ºï¼š from somemodule import firstfunc, secondfunc, thirdfunc# ====__name__å±æ€§====# ä¸€ä¸ªæ¨¡å—è¢«å¦ä¸€ä¸ªç¨‹åºç¬¬ä¸€æ¬¡å¼•å…¥æ—¶ï¼Œå…¶ä¸»ç¨‹åºå°†è¿è¡Œã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨æ¨¡å—è¢«å¼•å…¥æ—¶ï¼Œæ¨¡å—ä¸­çš„æŸä¸€ç¨‹åºå—ä¸æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨__name__å±æ€§æ¥ä½¿è¯¥ç¨‹åºå—ä»…åœ¨è¯¥æ¨¡å—è‡ªèº«è¿è¡Œæ—¶æ‰§è¡Œã€‚# #!/usr/bin/python3# # Filename: using_name.py# if __name__ == '__main__':# print('ç¨‹åºè‡ªèº«åœ¨è¿è¡Œ')# else:# print('æˆ‘æ¥è‡ªå¦ä¸€æ¨¡å—')# ====dir() å‡½æ•°====# å†…ç½®çš„å‡½æ•° dir() å¯ä»¥æ‰¾åˆ°æ¨¡å—å†…å®šä¹‰çš„æ‰€æœ‰åç§°ã€‚ä»¥ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨çš„å½¢å¼è¿”å›:'''è¾“å…¥å’Œè¾“å‡º'''# Pythonä¸¤ç§è¾“å‡ºå€¼çš„æ–¹å¼: è¡¨è¾¾å¼è¯­å¥å’Œ print() å‡½æ•°ã€‚# ç¬¬ä¸‰ç§æ–¹å¼æ˜¯ä½¿ç”¨æ–‡ä»¶å¯¹è±¡çš„ write() æ–¹æ³•ï¼Œæ ‡å‡†è¾“å‡ºæ–‡ä»¶å¯ä»¥ç”¨ sys.stdout å¼•ç”¨ã€‚# å¦‚æœä½ å¸Œæœ›è¾“å‡ºçš„å½¢å¼æ›´åŠ å¤šæ ·ï¼Œå¯ä»¥ä½¿ç”¨ str.format() å‡½æ•°æ¥æ ¼å¼åŒ–è¾“å‡ºå€¼ã€‚# å¦‚æœä½ å¸Œæœ›å°†è¾“å‡ºçš„å€¼è½¬æˆå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ repr() æˆ– str() å‡½æ•°æ¥å®ç°ã€‚# str()ï¼š å‡½æ•°è¿”å›ä¸€ä¸ªç”¨æˆ·æ˜“è¯»çš„è¡¨è¾¾å½¢å¼ã€‚# repr()ï¼š äº§ç”Ÿä¸€ä¸ªè§£é‡Šå™¨æ˜“è¯»çš„è¡¨è¾¾å½¢å¼ã€‚print(&quot;Hello word!&quot;)print('{}ç½‘å€ï¼š &quot;{}!&quot;'.format('èœé¸Ÿæ•™ç¨‹', 'www.runoob.com'))print('{0} å’Œ {1}'.format('Google', 'Runoob'))print('ç«™ç‚¹åˆ—è¡¨ {0}, {1}, å’Œ {other}ã€‚'.format('Google', 'Runoob', other='Taobao'))# è¯»å–é”®ç›˜è¾“å…¥str = input(&quot;è¯·è¾“å…¥ï¼š&quot;);print (&quot;ä½ è¾“å…¥çš„å†…å®¹æ˜¯: &quot;, str)# è¯»å’Œå†™æ–‡ä»¶# open(filename, mode)# filenameï¼šåŒ…å«äº†ä½ è¦è®¿é—®çš„æ–‡ä»¶åç§°çš„å­—ç¬¦ä¸²å€¼ã€‚# modeï¼šå†³å®šäº†æ‰“å¼€æ–‡ä»¶çš„æ¨¡å¼ï¼šåªè¯»ï¼Œå†™å…¥ï¼Œè¿½åŠ ç­‰ã€‚æ‰€æœ‰å¯å–å€¼è§å¦‚ä¸‹çš„å®Œå…¨åˆ—è¡¨ã€‚è¿™ä¸ªå‚æ•°æ˜¯éå¼ºåˆ¶çš„ï¼Œé»˜è®¤æ–‡ä»¶è®¿é—®æ¨¡å¼ä¸ºåªè¯»(r)ã€‚# æ¨¡å¼ æè¿°# r ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚# rb ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºåªè¯»ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚# r+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚# rb+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚# w æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚# wb ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚# w+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚# wb+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚# a æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚# ab ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚# a+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚æ–‡ä»¶æ‰“å¼€æ—¶ä¼šæ˜¯è¿½åŠ æ¨¡å¼ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚# ab+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚# æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶f = open(&quot;/tmp/foo.txt&quot;, &quot;w&quot;)f.write( &quot;Python æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è¯­è¨€ã€‚\\næ˜¯çš„ï¼Œçš„ç¡®éå¸¸å¥½!!\\n&quot; )# f.read(size), è¿™å°†è¯»å–ä¸€å®šæ•°ç›®çš„æ•°æ®, ç„¶åä½œä¸ºå­—ç¬¦ä¸²æˆ–å­—èŠ‚å¯¹è±¡è¿”å›ã€‚size æ˜¯ä¸€ä¸ªå¯é€‰çš„æ•°å­—ç±»å‹çš„å‚æ•°ã€‚ å½“ size è¢«å¿½ç•¥äº†æˆ–è€…ä¸ºè´Ÿ, é‚£ä¹ˆè¯¥æ–‡ä»¶çš„æ‰€æœ‰å†…å®¹éƒ½å°†è¢«è¯»å–å¹¶ä¸”è¿”å›ã€‚print(f.read())# è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸², è¯´æ˜å·²ç»å·²ç»è¯»å–åˆ°æœ€åä¸€è¡Œã€‚print(f.readline())# è¿”å›æ‰€æœ‰è¡Œã€‚print(f.readlines())# å°† string å†™å…¥åˆ°æ–‡ä»¶ä¸­, ç„¶åè¿”å›å†™å…¥çš„å­—ç¬¦æ•°ã€‚f.write(&quot;string&quot;)# è¿”å›æ–‡ä»¶å¯¹è±¡å½“å‰æ‰€å¤„çš„ä½ç½®, å®ƒæ˜¯ä»æ–‡ä»¶å¼€å¤´å¼€å§‹ç®—èµ·çš„å­—èŠ‚æ•°ã€‚f.tell()# æ”¹å˜æ–‡ä»¶å½“å‰çš„ä½ç½®, å¯ä»¥ä½¿ç”¨ f.seek(offset, from_what) å‡½æ•°ã€‚# from_what çš„å€¼, å¦‚æœæ˜¯ 0 è¡¨ç¤ºå¼€å¤´, å¦‚æœæ˜¯ 1 è¡¨ç¤ºå½“å‰ä½ç½®, 2 è¡¨ç¤ºæ–‡ä»¶çš„ç»“å°¾ï¼Œä¾‹å¦‚ï¼š# seek(x,0) ï¼š ä»èµ·å§‹ä½ç½®å³æ–‡ä»¶é¦–è¡Œé¦–å­—ç¬¦å¼€å§‹ç§»åŠ¨ x ä¸ªå­—ç¬¦# seek(x,1) ï¼š è¡¨ç¤ºä»å½“å‰ä½ç½®å¾€åç§»åŠ¨xä¸ªå­—ç¬¦# seek(-x,2)ï¼šè¡¨ç¤ºä»æ–‡ä»¶çš„ç»“å°¾å¾€å‰ç§»åŠ¨xä¸ªå­—ç¬¦# from_what å€¼ä¸ºé»˜è®¤ä¸º0ï¼Œå³æ–‡ä»¶å¼€å¤´# å…³é—­æ‰“å¼€çš„æ–‡ä»¶f.close()# pickle æ¨¡å— å®ç°äº†åŸºæœ¬çš„æ•°æ®åºåˆ—å’Œååºåˆ—åŒ–ã€‚import pickle# ä½¿ç”¨pickleæ¨¡å—å°†æ•°æ®å¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶data1 = {'a': [1, 2.0, 3, 4+6j], 'b': ('string', u'Unicode string'), 'c': None}selfref_list = [1, 2, 3]selfref_list.append(selfref_list)output = open('data.pkl', 'wb')# Pickle dictionary using protocol 0.pickle.dump(data1, output)# Pickle the list using the highest protocol available.pickle.dump(selfref_list, output, -1)output.close()''' æ³¨é‡Š '''&quot;&quot;&quot;æ³¨é‡Š&quot;&quot;&quot;# ä¿ç•™å­— å…³é”®å­—endå¯ä»¥ç”¨äºå°†ç»“æœè¾“å‡ºåˆ°åŒä¸€è¡Œï¼Œæˆ–è€…åœ¨è¾“å‡ºçš„æœ«å°¾æ·»åŠ ä¸åŒçš„å­—ç¬¦print(b, end=',')print(&quot;ä¿ç•™å­—&quot;, keyword.kwlist)# ç¼©è¿›çš„ç©ºæ ¼æ•°æ˜¯å¯å˜çš„ï¼Œä½†æ˜¯åŒä¸€ä¸ªä»£ç å—çš„è¯­å¥å¿…é¡»åŒ…å«ç›¸åŒçš„ç¼©è¿›ç©ºæ ¼æ•°if True: print(&quot;ture&quot;)else: print('false')# å¤šè¡Œè¯­å¥ï¼Œè¯­å¥å¾ˆé•¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åæ–œæ (\\)æ¥å®ç°å¤šè¡Œè¯­å¥ï¼Œåœ¨ [], {}, æˆ– () ä¸­çš„å¤šè¡Œè¯­å¥ï¼Œä¸éœ€è¦ä½¿ç”¨åæ–œæ (\\)total = 'item_one' + \\ 'item_two' + \\ 'item_three'total1 = ['item_one', 'item_two', 'item_three', 'item_four', 'item_five']print(total)print(total1)''' ================åŸºæœ¬æ•°æ®ç±»å‹===================Python3 ä¸­æœ‰å…­ä¸ªæ ‡å‡†çš„æ•°æ®ç±»å‹ï¼šNumberï¼ˆæ•°å­—ï¼‰ï¼šintã€floatã€boolã€complexï¼ˆå¤æ•°ï¼‰Stringï¼ˆå­—ç¬¦ä¸²ï¼‰Listï¼ˆåˆ—è¡¨ï¼‰Tupleï¼ˆå…ƒç»„ï¼‰Setï¼ˆé›†åˆï¼‰Dictionaryï¼ˆå­—å…¸ï¼‰Python3 çš„å…­ä¸ªæ ‡å‡†æ•°æ®ç±»å‹ä¸­ï¼šä¸å¯å˜æ•°æ®ï¼ˆ3 ä¸ªï¼‰ï¼šNumberï¼ˆæ•°å­—ï¼‰ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€Tupleï¼ˆå…ƒç»„ï¼‰ï¼›å¯å˜æ•°æ®ï¼ˆ3 ä¸ªï¼‰ï¼šListï¼ˆåˆ—è¡¨ï¼‰ã€Dictionaryï¼ˆå­—å…¸ï¼‰ã€Setï¼ˆé›†åˆï¼‰ã€‚ type()æŸ¥çœ‹æ•°æ®ç±»å‹ï¼Œisinstance(a, int)è¿›è¡Œåˆ¤æ–­'''# Numberï¼ˆæ•°å­—ï¼‰------------------------------------------------------------------------# int(x) å°†xè½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°ã€‚# float(x) å°†xè½¬æ¢åˆ°ä¸€ä¸ªæµ®ç‚¹æ•°ã€‚# complex(x) å°†xè½¬æ¢åˆ°ä¸€ä¸ªå¤æ•°ï¼Œå®æ•°éƒ¨åˆ†ä¸º xï¼Œè™šæ•°éƒ¨åˆ†ä¸º 0ã€‚# complex(x, y) å°† x å’Œ y è½¬æ¢åˆ°ä¸€ä¸ªå¤æ•°ï¼Œå®æ•°éƒ¨åˆ†ä¸º xï¼Œè™šæ•°éƒ¨åˆ†ä¸º yã€‚x å’Œ y æ˜¯æ•°å­—è¡¨è¾¾å¼ã€‚# ==æ•°å­¦å‡½æ•°==# å‡½æ•° è¿”å›å€¼ ( æè¿° )# abs(x) è¿”å›æ•°å­—çš„ç»å¯¹å€¼ï¼Œå¦‚abs(-10) è¿”å› 10# ceil(x) è¿”å›æ•°å­—çš„ä¸Šå…¥æ•´æ•°ï¼Œå¦‚math.ceil(4.1) è¿”å› 5# cmp(x, y) å¦‚æœ x &lt; y è¿”å› -1, å¦‚æœ x == y è¿”å› 0, å¦‚æœ x &gt; y è¿”å› 1ã€‚ Python 3 å·²åºŸå¼ƒï¼Œä½¿ç”¨ (x&gt;y)-(x&lt;y) æ›¿æ¢ã€‚# exp(x) è¿”å›eçš„xæ¬¡å¹‚(ex),å¦‚math.exp(1) è¿”å›2.718281828459045# fabs(x) è¿”å›æ•°å­—çš„ç»å¯¹å€¼ï¼Œå¦‚math.fabs(-10) è¿”å›10.0# floor(x) è¿”å›æ•°å­—çš„ä¸‹èˆæ•´æ•°ï¼Œå¦‚math.floor(4.9)è¿”å› 4# log(x) å¦‚math.log(math.e)è¿”å›1.0,math.log(100,10)è¿”å›2.0# log10(x) è¿”å›ä»¥10ä¸ºåŸºæ•°çš„xçš„å¯¹æ•°ï¼Œå¦‚math.log10(100)è¿”å› 2.0# max(x1, x2,...) è¿”å›ç»™å®šå‚æ•°çš„æœ€å¤§å€¼ï¼Œå‚æ•°å¯ä»¥ä¸ºåºåˆ—ã€‚# min(x1, x2,...) è¿”å›ç»™å®šå‚æ•°çš„æœ€å°å€¼ï¼Œå‚æ•°å¯ä»¥ä¸ºåºåˆ—ã€‚# modf(x) è¿”å›xçš„æ•´æ•°éƒ¨åˆ†ä¸å°æ•°éƒ¨åˆ†ï¼Œä¸¤éƒ¨åˆ†çš„æ•°å€¼ç¬¦å·ä¸xç›¸åŒï¼Œæ•´æ•°éƒ¨åˆ†ä»¥æµ®ç‚¹å‹è¡¨ç¤ºã€‚# pow(x, y) x**y è¿ç®—åçš„å€¼ã€‚# round(x [,n]) è¿”å›æµ®ç‚¹æ•° x çš„å››èˆäº”å…¥å€¼ï¼Œå¦‚ç»™å‡º n å€¼ï¼Œåˆ™ä»£è¡¨èˆå…¥åˆ°å°æ•°ç‚¹åçš„ä½æ•°ã€‚å…¶å®å‡†ç¡®çš„è¯´æ˜¯ä¿ç•™å€¼å°†ä¿ç•™åˆ°ç¦»ä¸Šä¸€ä½æ›´è¿‘çš„ä¸€ç«¯ã€‚# sqrt(x) è¿”å›æ•°å­—xçš„å¹³æ–¹æ ¹ã€‚# ==éšæœºæ•°å‡½æ•°==# choice(seq) ä»åºåˆ—çš„å…ƒç´ ä¸­éšæœºæŒ‘é€‰ä¸€ä¸ªå…ƒç´ ï¼Œæ¯”å¦‚random.choice(range(10))ï¼Œä»0åˆ°9ä¸­éšæœºæŒ‘é€‰ä¸€ä¸ªæ•´æ•°ã€‚# randrange ([start,] stop [,step]) ä»æŒ‡å®šèŒƒå›´å†…ï¼ŒæŒ‰æŒ‡å®šåŸºæ•°é€’å¢çš„é›†åˆä¸­è·å–ä¸€ä¸ªéšæœºæ•°ï¼ŒåŸºæ•°é»˜è®¤å€¼ä¸º 1# random() éšæœºç”Ÿæˆä¸‹ä¸€ä¸ªå®æ•°ï¼Œå®ƒåœ¨[0,1)èŒƒå›´å†…ã€‚# seed([x]) æ”¹å˜éšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­seedã€‚å¦‚æœä½ ä¸äº†è§£å…¶åŸç†ï¼Œä½ ä¸å¿…ç‰¹åˆ«å»è®¾å®šseedï¼ŒPythonä¼šå¸®ä½ é€‰æ‹©seedã€‚# shuffle(lst) å°†åºåˆ—çš„æ‰€æœ‰å…ƒç´ éšæœºæ’åº# uniform(x, y) éšæœºç”Ÿæˆä¸‹ä¸€ä¸ªå®æ•°ï¼Œå®ƒåœ¨[x,y]èŒƒå›´å†…# ==ä¸‰è§’å‡½æ•°==# PythonåŒ…æ‹¬ä»¥ä¸‹ä¸‰è§’å‡½æ•°ï¼š# å‡½æ•° æè¿°# acos(x) è¿”å›xçš„åä½™å¼¦å¼§åº¦å€¼ã€‚# asin(x) è¿”å›xçš„åæ­£å¼¦å¼§åº¦å€¼ã€‚# atan(x) è¿”å›xçš„åæ­£åˆ‡å¼§åº¦å€¼ã€‚# atan2(y, x) è¿”å›ç»™å®šçš„ X åŠ Y åæ ‡å€¼çš„åæ­£åˆ‡å€¼ã€‚# cos(x) è¿”å›xçš„å¼§åº¦çš„ä½™å¼¦å€¼ã€‚# hypot(x, y) è¿”å›æ¬§å‡ é‡Œå¾·èŒƒæ•° sqrt(x*x + y*y)ã€‚# sin(x) è¿”å›çš„xå¼§åº¦çš„æ­£å¼¦å€¼ã€‚# tan(x) è¿”å›xå¼§åº¦çš„æ­£åˆ‡å€¼ã€‚# degrees(x) å°†å¼§åº¦è½¬æ¢ä¸ºè§’åº¦,å¦‚degrees(math.pi/2) ï¼Œ è¿”å›90.0# radians(x) å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦# ==æ•°å­¦å¸¸é‡==# å¸¸é‡ æè¿°# pi æ•°å­¦å¸¸é‡ piï¼ˆåœ†å‘¨ç‡ï¼Œä¸€èˆ¬ä»¥Ï€æ¥è¡¨ç¤ºï¼‰# e æ•°å­¦å¸¸é‡ eï¼Œeå³è‡ªç„¶å¸¸æ•°ï¼ˆè‡ªç„¶å¸¸æ•°ï¼‰ã€‚a = b = c = counter = 100 # åŒæ—¶ä¸ºå¤šä¸ªå˜é‡èµ‹å€¼æ•´å‹å˜é‡d, e, f = 1, 2, &quot;runoob&quot; # åŒæ—¶ä¸ºå¤šä¸ªå˜é‡èµ‹å€¼ä¸åŒçš„å€¼miles = 1000.0 # æµ®ç‚¹å‹å˜é‡name = &quot;runoob&quot; # å­—ç¬¦ä¸²# delè¯­å¥åˆ é™¤ä¸€äº›å¯¹è±¡å¼•ç”¨del a# æ•°å€¼è¿ç®—Division = 2 / 4 # é™¤æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªæµ®ç‚¹æ•°Division2 = 2 // 4 # é™¤æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªæ•´æ•°remainder = 17 % 3 # å–ä½™involution = 2 ** 5 # ä¹˜æ–¹print(Division, 'Division')print(Division2, 'Division2')# Stringï¼ˆå­—ç¬¦ä¸²ï¼‰------------------------------------------------------------------------------# ä»åé¢ç´¢å¼•01234567# ä»å‰é¢ç´¢å¼•-8-7-6-5-4-3-2-1# Good boy# ä»å‰é¢æˆªå–:123456:# ä»åé¢æˆªå–:-6-5-4-3-2-1:# åæ–œæ (\\)å¯ä»¥ä½œä¸ºç»­è¡Œç¬¦ï¼Œè¡¨ç¤ºä¸‹ä¸€è¡Œæ˜¯ä¸Šä¸€è¡Œçš„å»¶ç»­ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ &quot;&quot;&quot;...&quot;&quot;&quot; æˆ–è€… '''...''' è·¨è¶Šå¤šè¡Œ# ç”¨+è¿ç®—ç¬¦è¿æ¥åœ¨ä¸€èµ·ï¼Œç”¨*è¿ç®—ç¬¦é‡å¤# ==è½¬ä¹‰å­—ç¬¦==# \\(åœ¨è¡Œå°¾æ—¶) ç»­è¡Œç¬¦# &gt;&gt;&gt; print(&quot;line1 \\# ... line2 \\# ... line3&quot;)# line1 line2 line3# \\\\ åæ–œæ ç¬¦å·# &gt;&gt;&gt; print(&quot;\\\\&quot;)# \\# \\' å•å¼•å·# &gt;&gt;&gt; print('\\'')# '# \\&quot; åŒå¼•å·# &gt;&gt;&gt; print(&quot;\\&quot;&quot;)# &quot;# \\a å“é“ƒ# &gt;&gt;&gt; print(&quot;\\a&quot;)æ‰§è¡Œåç”µè„‘æœ‰å“å£°ã€‚# \\b é€€æ ¼(Backspace)# &gt;&gt;&gt; print(&quot;Hello \\b World!&quot;)# Hello World!# \\000 ç©º# &gt;&gt;&gt; print(&quot;\\000&quot;)## &gt;&gt;&gt;# \\n æ¢è¡Œ# &gt;&gt;&gt; print(&quot;\\n&quot;)## &gt;&gt;&gt;# \\v çºµå‘åˆ¶è¡¨ç¬¦# &gt;&gt;&gt; print(&quot;Hello \\v World!&quot;)# Hello# World!# &gt;&gt;&gt;# \\t æ¨ªå‘åˆ¶è¡¨ç¬¦# &gt;&gt;&gt; print(&quot;Hello \\t World!&quot;)# Hello World!# &gt;&gt;&gt;# \\r å›è½¦ï¼Œå°† \\r åé¢çš„å†…å®¹ç§»åˆ°å­—ç¬¦ä¸²å¼€å¤´ï¼Œå¹¶é€ä¸€æ›¿æ¢å¼€å¤´éƒ¨åˆ†çš„å­—ç¬¦ï¼Œç›´è‡³å°† \\r åé¢çš„å†…å®¹å®Œå…¨æ›¿æ¢å®Œæˆã€‚# &gt;&gt;&gt; print(&quot;Hello\\rWorld!&quot;)# World!# &gt;&gt;&gt; print('google runoob taobao\\r123456')# 123456 runoob taobao# \\f æ¢é¡µ# &gt;&gt;&gt; print(&quot;Hello \\f World!&quot;)# Hello# World!# &gt;&gt;&gt;# \\yyy å…«è¿›åˆ¶æ•°ï¼Œy ä»£è¡¨ 0~7 çš„å­—ç¬¦ï¼Œä¾‹å¦‚ï¼š\\012 ä»£è¡¨æ¢è¡Œã€‚# &gt;&gt;&gt; print(&quot;\\110\\145\\154\\154\\157\\40\\127\\157\\162\\154\\144\\41&quot;)# Hello World!# \\xyy åå…­è¿›åˆ¶æ•°ï¼Œä»¥ \\x å¼€å¤´ï¼Œy ä»£è¡¨çš„å­—ç¬¦ï¼Œä¾‹å¦‚ï¼š\\x0a ä»£è¡¨æ¢è¡Œ# &gt;&gt;&gt; print(&quot;\\x48\\x65\\x6c\\x6c\\x6f\\x20\\x57\\x6f\\x72\\x6c\\x64\\x21&quot;)# Hello World!# \\other å…¶å®ƒçš„å­—ç¬¦ä»¥æ™®é€šæ ¼å¼è¾“å‡º# ==å­—ç¬¦ä¸²è¿ç®—ç¬¦==# + å­—ç¬¦ä¸²è¿æ¥ a + b è¾“å‡ºç»“æœï¼š HelloPython# * é‡å¤è¾“å‡ºå­—ç¬¦ä¸² a*2 è¾“å‡ºç»“æœï¼šHelloHello# [] é€šè¿‡ç´¢å¼•è·å–å­—ç¬¦ä¸²ä¸­å­—ç¬¦ a[1] è¾“å‡ºç»“æœ e# [ : ] æˆªå–å­—ç¬¦ä¸²ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œéµå¾ªå·¦é—­å³å¼€åŸåˆ™ï¼Œstr[0:2] æ˜¯ä¸åŒ…å«ç¬¬ 3 ä¸ªå­—ç¬¦çš„ã€‚ a[1:4] è¾“å‡ºç»“æœ ell# in æˆå‘˜è¿ç®—ç¬¦ - å¦‚æœå­—ç¬¦ä¸²ä¸­åŒ…å«ç»™å®šçš„å­—ç¬¦è¿”å› True 'H' in a è¾“å‡ºç»“æœ True# not in æˆå‘˜è¿ç®—ç¬¦ - å¦‚æœå­—ç¬¦ä¸²ä¸­ä¸åŒ…å«ç»™å®šçš„å­—ç¬¦è¿”å› True 'M' not in a è¾“å‡ºç»“æœ True# r/R åŸå§‹å­—ç¬¦ä¸² - åŸå§‹å­—ç¬¦ä¸²ï¼šæ‰€æœ‰çš„å­—ç¬¦ä¸²éƒ½æ˜¯ç›´æ¥æŒ‰ç…§å­—é¢çš„æ„æ€æ¥ä½¿ç”¨ï¼Œæ²¡æœ‰è½¬ä¹‰ç‰¹æ®Šæˆ–ä¸èƒ½æ‰“å°çš„å­—ç¬¦ã€‚ åŸå§‹å­—ç¬¦ä¸²é™¤åœ¨å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå¼•å·å‰åŠ ä¸Šå­—æ¯ rï¼ˆå¯ä»¥å¤§å°å†™ï¼‰ä»¥å¤–ï¼Œä¸æ™®é€šå­—ç¬¦ä¸²æœ‰ç€å‡ ä¹å®Œå…¨ç›¸åŒçš„è¯­æ³•ã€‚ print( r'\\n' ) print( R'\\n' )# % æ ¼å¼å­—ç¬¦ä¸²# ==å­—ç¬¦ä¸²æ ¼å¼åŒ–==# % c æ ¼å¼åŒ–å­—ç¬¦åŠå…¶ASCIIç # % s æ ¼å¼åŒ–å­—ç¬¦ä¸²# % d æ ¼å¼åŒ–æ•´æ•°# % u æ ¼å¼åŒ–æ— ç¬¦å·æ•´å‹# % o æ ¼å¼åŒ–æ— ç¬¦å·å…«è¿›åˆ¶æ•°# % x æ ¼å¼åŒ–æ— ç¬¦å·åå…­è¿›åˆ¶æ•°# % X æ ¼å¼åŒ–æ— ç¬¦å·åå…­è¿›åˆ¶æ•°ï¼ˆå¤§å†™ï¼‰# % f æ ¼å¼åŒ–æµ®ç‚¹æ•°å­—ï¼Œå¯æŒ‡å®šå°æ•°ç‚¹åçš„ç²¾åº¦# % e ç”¨ç§‘å­¦è®¡æ•°æ³•æ ¼å¼åŒ–æµ®ç‚¹æ•°# % E ä½œç”¨åŒ % eï¼Œç”¨ç§‘å­¦è®¡æ•°æ³•æ ¼å¼åŒ–æµ®ç‚¹æ•°# % g % få’Œ % eçš„ç®€å†™# % G % f å’Œ % E çš„ç®€å†™# % p ç”¨åå…­è¿›åˆ¶æ•°æ ¼å¼åŒ–å˜é‡çš„åœ°å€# æ ¼å¼åŒ–æ“ä½œç¬¦è¾…åŠ©æŒ‡ä»¤:# ç¬¦å· åŠŸèƒ½# * å®šä¹‰å®½åº¦æˆ–è€…å°æ•°ç‚¹ç²¾åº¦# - ç”¨åšå·¦å¯¹é½# + åœ¨æ­£æ•°å‰é¢æ˜¾ç¤ºåŠ å·( + )# &lt;sp&gt; åœ¨æ­£æ•°å‰é¢æ˜¾ç¤ºç©ºæ ¼# # åœ¨å…«è¿›åˆ¶æ•°å‰é¢æ˜¾ç¤ºé›¶('0')ï¼Œåœ¨åå…­è¿›åˆ¶å‰é¢æ˜¾ç¤º'0x'æˆ–è€…'0X'(å–å†³äºç”¨çš„æ˜¯'x'è¿˜æ˜¯'X')# 0 æ˜¾ç¤ºçš„æ•°å­—å‰é¢å¡«å……'0'è€Œä¸æ˜¯é»˜è®¤çš„ç©ºæ ¼# % '%%'è¾“å‡ºä¸€ä¸ªå•ä¸€çš„'%'# (var) æ˜ å°„å˜é‡(å­—å…¸å‚æ•°)# m.n. m æ˜¯æ˜¾ç¤ºçš„æœ€å°æ€»å®½åº¦,n æ˜¯å°æ•°ç‚¹åçš„ä½æ•°(å¦‚æœå¯ç”¨çš„è¯)# ==f-string==name = 'Runoob'f'Hello {name}' # æ›¿æ¢å˜é‡'Hello Runoob'f'{1 + 2}' # ä½¿ç”¨è¡¨è¾¾å¼'3'w = {'name': 'Runoob', 'url': 'www.runoob.com'}f'{w[&quot;name&quot;]}: {w[&quot;url&quot;]}''Runoob: www.runoob.com'para_str = &quot;&quot;&quot;è¿™æ˜¯ä¸€ä¸ªå¤šè¡Œå­—ç¬¦ä¸²çš„å®ä¾‹å¤šè¡Œå­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨åˆ¶è¡¨ç¬¦TAB ( \\t )ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨æ¢è¡Œç¬¦ [ \\n ]ã€‚&quot;&quot;&quot;# ==å­—ç¬¦ä¸²å†…å»ºå‡½æ•°==# capitalize()# å°†å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå¤§å†™# center(width, fillchar)# è¿”å›ä¸€ä¸ªæŒ‡å®šçš„å®½åº¦ width å±…ä¸­çš„å­—ç¬¦ä¸²ï¼Œfillchar ä¸ºå¡«å……çš„å­—ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºæ ¼ã€‚# count(str, beg= 0,end=len(string))# è¿”å› str åœ¨ string é‡Œé¢å‡ºç°çš„æ¬¡æ•°ï¼Œå¦‚æœ beg æˆ–è€… end æŒ‡å®šåˆ™è¿”å›æŒ‡å®šèŒƒå›´å†… str å‡ºç°çš„æ¬¡æ•°# bytes.decode(encoding=&quot;utf-8&quot;, errors=&quot;strict&quot;)# Python3 ä¸­æ²¡æœ‰ decode æ–¹æ³•ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ bytes å¯¹è±¡çš„ decode() æ–¹æ³•æ¥è§£ç ç»™å®šçš„ bytes å¯¹è±¡ï¼Œè¿™ä¸ª bytes å¯¹è±¡å¯ä»¥ç”± str.encode() æ¥ç¼–ç è¿”å›ã€‚# encode(encoding='UTF-8',errors='strict')# ä»¥ encoding æŒ‡å®šçš„ç¼–ç æ ¼å¼ç¼–ç å­—ç¬¦ä¸²ï¼Œå¦‚æœå‡ºé”™é»˜è®¤æŠ¥ä¸€ä¸ªValueError çš„å¼‚å¸¸ï¼Œé™¤é errors æŒ‡å®šçš„æ˜¯'ignore'æˆ–è€…'replace'# endswith(suffix, beg=0, end=len(string))# æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥ obj ç»“æŸï¼Œå¦‚æœbeg æˆ–è€… end æŒ‡å®šåˆ™æ£€æŸ¥æŒ‡å®šçš„èŒƒå›´å†…æ˜¯å¦ä»¥ obj ç»“æŸï¼Œå¦‚æœæ˜¯ï¼Œè¿”å› True,å¦åˆ™è¿”å› False.# expandtabs(tabsize=8)# æŠŠå­—ç¬¦ä¸² string ä¸­çš„ tab ç¬¦å·è½¬ä¸ºç©ºæ ¼ï¼Œtab ç¬¦å·é»˜è®¤çš„ç©ºæ ¼æ•°æ˜¯ 8 ã€‚# find(str, beg=0, end=len(string))# æ£€æµ‹ str æ˜¯å¦åŒ…å«åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œå¦‚æœæŒ‡å®šèŒƒå›´ beg å’Œ end ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦åŒ…å«åœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œå¦‚æœåŒ…å«è¿”å›å¼€å§‹çš„ç´¢å¼•å€¼ï¼Œå¦åˆ™è¿”å›-1# index(str, beg=0, end=len(string))# è·Ÿfind()æ–¹æ³•ä¸€æ ·ï¼Œåªä¸è¿‡å¦‚æœsträ¸åœ¨å­—ç¬¦ä¸²ä¸­ä¼šæŠ¥ä¸€ä¸ªå¼‚å¸¸ã€‚# isalnum()# å¦‚æœå­—ç¬¦ä¸²è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦å¹¶ä¸”æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯å­—æ¯æˆ–æ•°å­—åˆ™è¿” å› Trueï¼Œå¦åˆ™è¿”å› False# isalpha()# å¦‚æœå­—ç¬¦ä¸²è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦å¹¶ä¸”æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯å­—æ¯æˆ–ä¸­æ–‡å­—åˆ™è¿”å› True, å¦åˆ™è¿”å› False# isdigit()# å¦‚æœå­—ç¬¦ä¸²åªåŒ…å«æ•°å­—åˆ™è¿”å› True å¦åˆ™è¿”å› False..# islower()# å¦‚æœå­—ç¬¦ä¸²ä¸­åŒ…å«è‡³å°‘ä¸€ä¸ªåŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ï¼Œå¹¶ä¸”æ‰€æœ‰è¿™äº›(åŒºåˆ†å¤§å°å†™çš„)å­—ç¬¦éƒ½æ˜¯å°å†™ï¼Œåˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› False# isnumeric()# å¦‚æœå­—ç¬¦ä¸²ä¸­åªåŒ…å«æ•°å­—å­—ç¬¦ï¼Œåˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› False# isspace()# å¦‚æœå­—ç¬¦ä¸²ä¸­åªåŒ…å«ç©ºç™½ï¼Œåˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› False.# istitle()# å¦‚æœå­—ç¬¦ä¸²æ˜¯æ ‡é¢˜åŒ–çš„(è§ title())åˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› False# isupper()# å¦‚æœå­—ç¬¦ä¸²ä¸­åŒ…å«è‡³å°‘ä¸€ä¸ªåŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ï¼Œå¹¶ä¸”æ‰€æœ‰è¿™äº›(åŒºåˆ†å¤§å°å†™çš„)å­—ç¬¦éƒ½æ˜¯å¤§å†™ï¼Œåˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› False# join(seq)# ä»¥æŒ‡å®šå­—ç¬¦ä¸²ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°† seq ä¸­æ‰€æœ‰çš„å…ƒç´ (çš„å­—ç¬¦ä¸²è¡¨ç¤º)åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²# len(string)# è¿”å›å­—ç¬¦ä¸²é•¿åº¦# ljust(width[, fillchar])# è¿”å›ä¸€ä¸ªåŸå­—ç¬¦ä¸²å·¦å¯¹é½,å¹¶ä½¿ç”¨ fillchar å¡«å……è‡³é•¿åº¦ width çš„æ–°å­—ç¬¦ä¸²ï¼Œfillchar é»˜è®¤ä¸ºç©ºæ ¼ã€‚# lower()# è½¬æ¢å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å¤§å†™å­—ç¬¦ä¸ºå°å†™.# lstrip()# æˆªæ‰å­—ç¬¦ä¸²å·¦è¾¹çš„ç©ºæ ¼æˆ–æŒ‡å®šå­—ç¬¦ã€‚# maketrans()# åˆ›å»ºå­—ç¬¦æ˜ å°„çš„è½¬æ¢è¡¨ï¼Œå¯¹äºæ¥å—ä¸¤ä¸ªå‚æ•°çš„æœ€ç®€å•çš„è°ƒç”¨æ–¹å¼ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºéœ€è¦è½¬æ¢çš„å­—ç¬¦ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¹Ÿæ˜¯å­—ç¬¦ä¸²è¡¨ç¤ºè½¬æ¢çš„ç›®æ ‡ã€‚# max(str)# è¿”å›å­—ç¬¦ä¸² str ä¸­æœ€å¤§çš„å­—æ¯ã€‚# min(str)# è¿”å›å­—ç¬¦ä¸² str ä¸­æœ€å°çš„å­—æ¯ã€‚# replace(old, new [, max])# æŠŠ å°†å­—ç¬¦ä¸²ä¸­çš„ old æ›¿æ¢æˆ new,å¦‚æœ max æŒ‡å®šï¼Œåˆ™æ›¿æ¢ä¸è¶…è¿‡ max æ¬¡ã€‚# rfind(str, beg=0,end=len(string))# ç±»ä¼¼äº find()å‡½æ•°ï¼Œä¸è¿‡æ˜¯ä»å³è¾¹å¼€å§‹æŸ¥æ‰¾.# rindex( str, beg=0, end=len(string))# ç±»ä¼¼äº index()ï¼Œä¸è¿‡æ˜¯ä»å³è¾¹å¼€å§‹.# rjust(width,[, fillchar])# è¿”å›ä¸€ä¸ªåŸå­—ç¬¦ä¸²å³å¯¹é½,å¹¶ä½¿ç”¨fillchar(é»˜è®¤ç©ºæ ¼ï¼‰å¡«å……è‡³é•¿åº¦ width çš„æ–°å­—ç¬¦ä¸²# rstrip()# åˆ é™¤å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºæ ¼æˆ–æŒ‡å®šå­—ç¬¦ã€‚# split(str=&quot;&quot;, num=string.count(str))# ä»¥ str ä¸ºåˆ†éš”ç¬¦æˆªå–å­—ç¬¦ä¸²ï¼Œå¦‚æœ num æœ‰æŒ‡å®šå€¼ï¼Œåˆ™ä»…æˆªå– num+1 ä¸ªå­å­—ç¬¦ä¸²# splitlines([keepends])# æŒ‰ç…§è¡Œ('\\r', '\\r\\n', \\n')åˆ†éš”ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å„è¡Œä½œä¸ºå…ƒç´ çš„åˆ—è¡¨ï¼Œå¦‚æœå‚æ•° keepends ä¸º Falseï¼Œä¸åŒ…å«æ¢è¡Œç¬¦ï¼Œå¦‚æœä¸º Trueï¼Œåˆ™ä¿ç•™æ¢è¡Œç¬¦ã€‚# startswith(substr, beg=0,end=len(string))# æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä»¥æŒ‡å®šå­å­—ç¬¦ä¸² substr å¼€å¤´ï¼Œæ˜¯åˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚å¦‚æœbeg å’Œ end æŒ‡å®šå€¼ï¼Œåˆ™åœ¨æŒ‡å®šèŒƒå›´å†…æ£€æŸ¥ã€‚# strip([chars])# åœ¨å­—ç¬¦ä¸²ä¸Šæ‰§è¡Œ lstrip()å’Œ rstrip()# swapcase()# å°†å­—ç¬¦ä¸²ä¸­å¤§å†™è½¬æ¢ä¸ºå°å†™ï¼Œå°å†™è½¬æ¢ä¸ºå¤§å†™# title()# è¿”å›&quot;æ ‡é¢˜åŒ–&quot;çš„å­—ç¬¦ä¸²,å°±æ˜¯è¯´æ‰€æœ‰å•è¯éƒ½æ˜¯ä»¥å¤§å†™å¼€å§‹ï¼Œå…¶ä½™å­—æ¯å‡ä¸ºå°å†™(è§ istitle())# translate(table, deletechars=&quot;&quot;)# æ ¹æ® str ç»™å‡ºçš„è¡¨(åŒ…å« 256 ä¸ªå­—ç¬¦)è½¬æ¢ string çš„å­—ç¬¦, è¦è¿‡æ»¤æ‰çš„å­—ç¬¦æ”¾åˆ° deletechars å‚æ•°ä¸­# upper()# è½¬æ¢å­—ç¬¦ä¸²ä¸­çš„å°å†™å­—æ¯ä¸ºå¤§å†™# zfill (width)# è¿”å›é•¿åº¦ä¸º width çš„å­—ç¬¦ä¸²ï¼ŒåŸå­—ç¬¦ä¸²å³å¯¹é½ï¼Œå‰é¢å¡«å……0# isdecimal()# æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åªåŒ…å«åè¿›åˆ¶å­—ç¬¦ï¼Œå¦‚æœæ˜¯è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚str = 'Lxl is a good boy'print(str) # è¾“å‡ºå­—ç¬¦ä¸²print(str[0:-1]) # è¾“å‡ºç¬¬ä¸€ä¸ªåˆ°å€’æ•°ç¬¬äºŒä¸ªçš„æ‰€æœ‰å­—ç¬¦print(str[0]) # è¾“å‡ºå­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦print(str[2:5]) # è¾“å‡ºä»ç¬¬ä¸‰ä¸ªå¼€å§‹åˆ°ç¬¬äº”ä¸ªçš„å­—ç¬¦print(str[2:]) # è¾“å‡ºä»ç¬¬ä¸‰ä¸ªå¼€å§‹çš„åçš„æ‰€æœ‰å­—ç¬¦print(str * 2) # è¾“å‡ºå­—ç¬¦ä¸²ä¸¤æ¬¡ï¼Œä¹Ÿå¯ä»¥å†™æˆ print (2 * str)print(str + &quot;TEST&quot;) # è¿æ¥å­—ç¬¦ä¸²# è½¬ä¹‰print('Ru\\noob')# ä¸è½¬ä¹‰å­—ç¬¦ä¸²å‰åŠ rprint(2 * r'Ru\\noob')# Listï¼ˆåˆ—è¡¨ï¼‰------------------------------------------------------------------------------# åˆ›å»ºåˆ—è¡¨åªéœ€è¦æ–¹æ‹¬å·æ‹¬èµ·æ¥ï¼Œé‡Œé¢æ•°æ®ç±»å‹å¯ä¸ä¸€è‡´ï¼Œç´¢å¼•æ­£0å-1ï¼Œ# åˆ—è¡¨ä¸­çš„å…ƒç´ æ˜¯å¯ä»¥æ”¹å˜çš„# append() è¿½åŠ  del åˆ é™¤# ==åˆ—è¡¨è„šæœ¬æ“ä½œç¬¦==# Python è¡¨è¾¾å¼ ç»“æœ æè¿°# len([1, 2, 3]) 3 é•¿åº¦# [1, 2, 3] + [4, 5, 6] [1, 2, 3, 4, 5, 6] ç»„åˆ# ['Hi!'] * 4 ['Hi!', 'Hi!', 'Hi!', 'Hi!'] é‡å¤# 3 in [1, 2, 3] True å…ƒç´ æ˜¯å¦å­˜åœ¨äºåˆ—è¡¨ä¸­# for x in [1, 2, 3]: print(x, end=&quot; &quot;) 1 2 3 è¿­ä»£# ==å‡½æ•°&amp;æ–¹æ³•==# len(list) åˆ—è¡¨å…ƒç´ ä¸ªæ•°# max(list) è¿”å›åˆ—è¡¨å…ƒç´ æœ€å¤§å€¼# min(list) è¿”å›åˆ—è¡¨å…ƒç´ æœ€å°å€¼# list(seq) å°†å…ƒç»„è½¬æ¢ä¸ºåˆ—è¡¨# 1 list.append(obj) åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ æ–°çš„å¯¹è±¡# 2 list.count(obj) ç»Ÿè®¡æŸä¸ªå…ƒç´ åœ¨åˆ—è¡¨ä¸­å‡ºç°çš„æ¬¡æ•°# 3 list.extend(seq) åœ¨åˆ—è¡¨æœ«å°¾ä¸€æ¬¡æ€§è¿½åŠ å¦ä¸€ä¸ªåºåˆ—ä¸­çš„å¤šä¸ªå€¼ï¼ˆç”¨æ–°åˆ—è¡¨æ‰©å±•åŸæ¥çš„åˆ—è¡¨ï¼‰# 4 list.index(obj) ä»åˆ—è¡¨ä¸­æ‰¾å‡ºæŸä¸ªå€¼ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ç´¢å¼•ä½ç½®# 5 list.insert(index, obj) å°†å¯¹è±¡æ’å…¥åˆ—è¡¨# 6 list.pop([index=-1]) ç§»é™¤åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ˆé»˜è®¤æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œå¹¶ä¸”è¿”å›è¯¥å…ƒç´ çš„å€¼# 7 list.remove(obj) ç§»é™¤åˆ—è¡¨ä¸­æŸä¸ªå€¼çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹# 8 list.reverse() åå‘åˆ—è¡¨ä¸­å…ƒç´ # 9 list.sort( key=None, reverse=False) å¯¹åŸåˆ—è¡¨è¿›è¡Œæ’åº# 10 list.clear() æ¸…ç©ºåˆ—è¡¨# 11 list.copy() å¤åˆ¶åˆ—è¡¨lists = ['1', '2', '3', '4', '5']print(lists[:])print(lists[:3])print(lists[1:3])print(lists[4:])print(lists[-1:])print(lists[:-2])print(lists * 3) # è¾“å‡ºå¤šæ¬¡åˆ—è¡¨print(lists + lists) # è¿æ¥åˆ—è¡¨for i, v in enumerate(['tic', 'tac', 'toe']): print(i, v)def reverseWords(input): # é€šè¿‡ç©ºæ ¼å°†å­—ç¬¦ä¸²åˆ†éš”ç¬¦ï¼ŒæŠŠå„ä¸ªå•è¯åˆ†éš”ä¸ºåˆ—è¡¨ inputWords = input.split(&quot; &quot;) # ç¿»è½¬å­—ç¬¦ä¸² # å‡è®¾åˆ—è¡¨ list = [1,2,3,4], # list[0]=1, list[1]=2 ï¼Œè€Œ -1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´  list[-1]=4 ( ä¸ list[3]=4 ä¸€æ ·) # inputWords[-1::-1] æœ‰ä¸‰ä¸ªå‚æ•° # ç¬¬ä¸€ä¸ªå‚æ•° -1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´  # ç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºï¼Œè¡¨ç¤ºç§»åŠ¨åˆ°åˆ—è¡¨æœ«å°¾ # ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæ­¥é•¿ï¼Œ-1 è¡¨ç¤ºé€†å‘ inputWords = inputWords[-1::-1] # é‡æ–°ç»„åˆå­—ç¬¦ä¸² output = ' '.join(inputWords) return outputif __name__ == &quot;__main__&quot;: input = 'I like runoob' rw = reverseWords(input) print(rw)# Tupleï¼ˆå…ƒç»„ï¼‰--------------------------------------------------------------------# å…ƒç»„ï¼ˆtupleï¼‰ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå…ƒç»„çš„å…ƒç´ ä¸èƒ½ä¿®æ”¹ï¼Œå…¶ä½¿ç”¨å°æ‹¬å·ï¼ˆï¼‰æˆ–ä¸è¦æ‹¬å·ï¼Œ# ä½†å®ƒå¯ä»¥åŒ…å«å¯å˜çš„å¯¹è±¡ï¼Œå¯ä»¥è¿æ¥ç»„åˆæˆæ–°å…ƒç¥–ï¼Œå…ƒç´ ä¸å…è®¸åˆ é™¤ä½†å¯ä»¥ä½¿ç”¨delåˆ é™¤æ•´ä¸ªå…ƒç¥–ã€‚# stringã€list å’Œ tuple éƒ½å±äº sequenceï¼ˆåºåˆ—ï¼‰ã€‚# å½“å…ƒç¥–åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œåé¢æ·»åŠ é€—å·ï¼Œå¦åˆ™æ‹¬å·ä¼šè¢«å½“åšè¿ç®—ç¬¦ä½¿ç”¨ï¼Œtup1 = (50)ä¸ºæ•´å‹ï¼Œtup1 = (50ï¼Œ)ä¸ºå…ƒç¥–# ==å…ƒç¥–è¿ç®—ç¬¦==# Python è¡¨è¾¾å¼ ç»“æœ æè¿°# len((1, 2, 3)) 3 è®¡ç®—å…ƒç´ ä¸ªæ•°# (1, 2, 3) + (4, 5, 6) (1, 2, 3, 4, 5, 6) è¿æ¥# ('Hi!',) * 4 ('Hi!', 'Hi!', 'Hi!', 'Hi!') å¤åˆ¶# 3 in (1, 2, 3) True å…ƒç´ æ˜¯å¦å­˜åœ¨# for x in (1, 2, 3): print (x,) 1 2 3 è¿­ä»£# ==å†…ç½®å‡½æ•°==# len(tuple) è®¡ç®—å…ƒç»„å…ƒç´ ä¸ªæ•°ã€‚# max(tuple) è¿”å›å…ƒç»„ä¸­å…ƒç´ æœ€å¤§å€¼ã€‚# min(tuple) è¿”å›å…ƒç»„ä¸­å…ƒç´ æœ€å°å€¼ã€‚# tuple(iterable) å°†å¯è¿­ä»£ç³»åˆ—è½¬æ¢ä¸ºå…ƒç»„ã€‚tuple = ('abcd', 786, 2.23, 'runoob', 70.2)tinytuple = (123, 'runoob')print(tuple) # è¾“å‡ºå®Œæ•´å…ƒç»„print(tuple[0]) # è¾“å‡ºå…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ print(tuple[1:3]) # è¾“å‡ºä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹åˆ°ç¬¬ä¸‰ä¸ªå…ƒç´ print(tuple[2:]) # è¾“å‡ºä»ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹çš„æ‰€æœ‰å…ƒç´ print(tinytuple * 2) # è¾“å‡ºä¸¤æ¬¡å…ƒç»„print(tuple + tinytuple) # è¿æ¥å…ƒç»„# Setï¼ˆé›†åˆï¼‰----------------------------------------------------------------------# åˆ›å»ºä¸€ä¸ªç©ºé›†åˆå¿…é¡»ç”¨ set() è€Œä¸æ˜¯ { }ï¼Œå› ä¸º { } æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ªç©ºå­—å…¸sites = {'Google', 'Taobao', 'Runoob', 'Facebook', 'Zhihu', 'Baidu'}sites1 = {}sites2 = ()set()# # æ·»åŠ å…ƒç´ ï¼Œé‡å¤ä¸æ“ä½œ# sites1.add(&quot;1&quot;)# # å¯ä»¥æ·»åŠ åˆ—è¡¨ï¼Œå…ƒç¥–å­—å…¸ç­‰# sites1.update(&quot;1&quot;)# print(sites) # è¾“å‡ºé›†åˆï¼Œé‡å¤çš„å…ƒç´ è¢«è‡ªåŠ¨å»æ‰# # ç§»é™¤ï¼Œä¸å­˜åœ¨æŠ¥é”™# sites1.remove( x )# # ç§»é™¤ï¼Œä¸å­˜åœ¨ä¸æŠ¥é”™# sites1.discard( x )# # éšæœºåˆ é™¤# sites1.pop()# # é•¿åº¦# len(sites1)# # æ¸…ç©º# sites1.clear()# # åˆ¤æ–­æ˜¯å¦å­˜åœ¨# x in s# ==å†…ç½®æ–¹æ³•å®Œæ•´åˆ—è¡¨==# add() ä¸ºé›†åˆæ·»åŠ å…ƒç´ # clear() ç§»é™¤é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ # copy() æ‹·è´ä¸€ä¸ªé›†åˆ# difference() è¿”å›å¤šä¸ªé›†åˆçš„å·®é›†# difference_update() ç§»é™¤é›†åˆä¸­çš„å…ƒç´ ï¼Œè¯¥å…ƒç´ åœ¨æŒ‡å®šçš„é›†åˆä¹Ÿå­˜åœ¨ã€‚# discard() åˆ é™¤é›†åˆä¸­æŒ‡å®šçš„å…ƒç´ # intersection() è¿”å›é›†åˆçš„äº¤é›†# intersection_update() è¿”å›é›†åˆçš„äº¤é›†ã€‚# isdisjoint() åˆ¤æ–­ä¸¤ä¸ªé›†åˆæ˜¯å¦åŒ…å«ç›¸åŒçš„å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚# issubset() åˆ¤æ–­æŒ‡å®šé›†åˆæ˜¯å¦ä¸ºè¯¥æ–¹æ³•å‚æ•°é›†åˆçš„å­é›†ã€‚# issuperset() åˆ¤æ–­è¯¥æ–¹æ³•çš„å‚æ•°é›†åˆæ˜¯å¦ä¸ºæŒ‡å®šé›†åˆçš„å­é›†# pop() éšæœºç§»é™¤å…ƒç´ # remove() ç§»é™¤æŒ‡å®šå…ƒç´ # symmetric_difference() è¿”å›ä¸¤ä¸ªé›†åˆä¸­ä¸é‡å¤çš„å…ƒç´ é›†åˆã€‚# symmetric_difference_update() ç§»é™¤å½“å‰é›†åˆä¸­åœ¨å¦å¤–ä¸€ä¸ªæŒ‡å®šé›†åˆç›¸åŒçš„å…ƒç´ ï¼Œå¹¶å°†å¦å¤–ä¸€ä¸ªæŒ‡å®šé›†åˆä¸­ä¸åŒçš„å…ƒç´ æ’å…¥åˆ°å½“å‰é›†åˆä¸­ã€‚# union() è¿”å›ä¸¤ä¸ªé›†åˆçš„å¹¶é›†# update() ç»™é›†åˆæ·»åŠ å…ƒç´ # æˆå‘˜æµ‹è¯•if 'Runoob' in sites: print('Runoob åœ¨é›†åˆä¸­')else: print('Runoob ä¸åœ¨é›†åˆä¸­')# setå¯ä»¥è¿›è¡Œé›†åˆè¿ç®—a = set('abracadabra')b = set('alacazam')print(a)print(a - b) # a å’Œ b çš„å·®é›†print(a | b) # a å’Œ b çš„å¹¶é›†print(a &amp; b) # a å’Œ b çš„äº¤é›†print(a ^ b) # a å’Œ b ä¸­ä¸åŒæ—¶å­˜åœ¨çš„å…ƒç´ # Dictionaryï¼ˆå­—å…¸ï¼‰------------------------------------------------------------------# å­—å…¸ï¼ˆdictionaryï¼‰æ˜¯Pythonä¸­å¦ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å†…ç½®æ•°æ®ç±»å‹ã€‚# åˆ—è¡¨æ˜¯æœ‰åºçš„å¯¹è±¡é›†åˆï¼Œå­—å…¸æ˜¯æ— åºçš„å¯¹è±¡é›†åˆã€‚ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«åœ¨äºï¼šå­—å…¸å½“ä¸­çš„å…ƒç´ æ˜¯é€šè¿‡é”®æ¥å­˜å–çš„ï¼Œè€Œä¸æ˜¯é€šè¿‡åç§»å­˜å–ã€‚# å­—å…¸æ˜¯ä¸€ç§æ˜ å°„ç±»å‹ï¼Œå­—å…¸ç”¨ { } æ ‡è¯†ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ— åºçš„ é”®(key) : å€¼(value) çš„é›†åˆã€‚# é”®(key)å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä½†å¿…é¡»ä½¿ç”¨ä¸å¯å˜ç±»å‹ã€‚# åœ¨åŒä¸€ä¸ªå­—å…¸ä¸­ï¼Œé”®(key)å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚# ==å†…ç½®å‡½æ•°==# len(dict) è®¡ç®—å­—å…¸å…ƒç´ ä¸ªæ•°ï¼Œå³é”®çš„æ€»æ•°ã€‚# str(dict) è¾“å‡ºå­—å…¸ï¼Œä»¥å¯æ‰“å°çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚# type(variable) è¿”å›è¾“å…¥çš„å˜é‡ç±»å‹ï¼Œå¦‚æœå˜é‡æ˜¯å­—å…¸å°±è¿”å›å­—å…¸ç±»å‹ã€‚# ==å†…ç½®æ–¹æ³•==# 1 radiansdict.clear() åˆ é™¤å­—å…¸å†…æ‰€æœ‰å…ƒç´ # 2 radiansdict.copy() è¿”å›ä¸€ä¸ªå­—å…¸çš„æµ…å¤åˆ¶# 3 radiansdict.fromkeys() åˆ›å»ºä¸€ä¸ªæ–°å­—å…¸ï¼Œä»¥åºåˆ—seqä¸­å…ƒç´ åšå­—å…¸çš„é”®ï¼Œvalä¸ºå­—å…¸æ‰€æœ‰é”®å¯¹åº”çš„åˆå§‹å€¼# 4 radiansdict.get(key, default=None) è¿”å›æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœé”®ä¸åœ¨å­—å…¸ä¸­è¿”å› default è®¾ç½®çš„é»˜è®¤å€¼# 5 key in dict å¦‚æœé”®åœ¨å­—å…¸dicté‡Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false# 6 radiansdict.items() ä»¥åˆ—è¡¨è¿”å›ä¸€ä¸ªè§†å›¾å¯¹è±¡# 7 radiansdict.keys() è¿”å›ä¸€ä¸ªè§†å›¾å¯¹è±¡# 8 radiansdict.setdefault(key, default=None) å’Œget()ç±»ä¼¼, ä½†å¦‚æœé”®ä¸å­˜åœ¨äºå­—å…¸ä¸­ï¼Œå°†ä¼šæ·»åŠ é”®å¹¶å°†å€¼è®¾ä¸ºdefault# 9 radiansdict.update(dict2) æŠŠå­—å…¸dict2çš„é”®/å€¼å¯¹æ›´æ–°åˆ°dicté‡Œ# 10 radiansdict.values() è¿”å›ä¸€ä¸ªè§†å›¾å¯¹è±¡# 11 pop(key[,default]) åˆ é™¤å­—å…¸ç»™å®šé”® key æ‰€å¯¹åº”çš„å€¼ï¼Œè¿”å›å€¼ä¸ºè¢«åˆ é™¤çš„å€¼ã€‚keyå€¼å¿…é¡»ç»™å‡ºã€‚ å¦åˆ™ï¼Œè¿”å›defaultå€¼ã€‚# 12 popitem() éšæœºè¿”å›å¹¶åˆ é™¤å­—å…¸ä¸­çš„æœ€åä¸€å¯¹é”®å’Œå€¼dict = {}dict['one'] = &quot;1 - èœé¸Ÿæ•™ç¨‹&quot;dict[2] = &quot;2 - èœé¸Ÿå·¥å…·&quot;tinydict = {'name': 'runoob', 'code': 1, 'site': 'www.runoob.com'}for k, v in knights.items(): print(k, v)print(dict['one']) # è¾“å‡ºé”®ä¸º 'one' çš„å€¼print(dict[2]) # è¾“å‡ºé”®ä¸º 2 çš„å€¼print(tinydict) # è¾“å‡ºå®Œæ•´çš„å­—å…¸print(tinydict.keys()) # è¾“å‡ºæ‰€æœ‰é”®print(tinydict.values()) # è¾“å‡ºæ‰€æœ‰å€¼del tinydict['name'] # åˆ é™¤é”® 'name'dict.clear() # æ¸…ç©ºå­—å…¸del tinydict # åˆ é™¤å­—å…¸# æ„é€ å‡½æ•° dict() å¯ä»¥ç›´æ¥ä»é”®å€¼å¯¹åºåˆ—ä¸­æ„å»ºå­—å…¸å¦‚ä¸‹'''============æ•°æ®ç±»å‹è½¬æ¢==============='''# int(x [,projects]) å°†xè½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°# float(x)å°†xè½¬æ¢åˆ°ä¸€ä¸ªæµ®ç‚¹æ•°# complex(real [,imag])åˆ›å»ºä¸€ä¸ªå¤æ•°# str(x)å°†å¯¹è±¡ x è½¬æ¢ä¸ºå­—ç¬¦ä¸²# repr(x)å°†å¯¹è±¡ x è½¬æ¢ä¸ºè¡¨è¾¾å¼å­—ç¬¦ä¸²# eval(str)ç”¨æ¥è®¡ç®—åœ¨å­—ç¬¦ä¸²ä¸­çš„æœ‰æ•ˆPythonè¡¨è¾¾å¼,å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡# tuple(s)å°†åºåˆ— s è½¬æ¢ä¸ºä¸€ä¸ªå…ƒç»„# list(s)å°†åºåˆ— s è½¬æ¢ä¸ºä¸€ä¸ªåˆ—è¡¨# set(s)è½¬æ¢ä¸ºå¯å˜é›†åˆ# dict(d)åˆ›å»ºä¸€ä¸ªå­—å…¸ã€‚d å¿…é¡»æ˜¯ä¸€ä¸ª (key, value)å…ƒç»„åºåˆ—ã€‚# frozenset(s)è½¬æ¢ä¸ºä¸å¯å˜é›†åˆ# chr(x)å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦# ord(x)å°†ä¸€ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå®ƒçš„æ•´æ•°å€¼# hex(x)å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºä¸€ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ä¸²# oct(x)å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºä¸€ä¸ªå…«è¿›åˆ¶å­—ç¬¦ä¸²'''============Python3è¿ç®—ç¬¦==============='''# ç®—æœ¯è¿ç®—ç¬¦ã€aä¸º10ï¼Œbä¸º21ã€‘----------------------------------# + åŠ  - ä¸¤ä¸ªå¯¹è±¡ç›¸åŠ  a + b è¾“å‡ºç»“æœ 31# - å‡ - å¾—åˆ°è´Ÿæ•°æˆ–æ˜¯ä¸€ä¸ªæ•°å‡å»å¦ä¸€ä¸ªæ•° a - b è¾“å‡ºç»“æœ -11# * ä¹˜ - ä¸¤ä¸ªæ•°ç›¸ä¹˜æˆ–æ˜¯è¿”å›ä¸€ä¸ªè¢«é‡å¤è‹¥å¹²æ¬¡çš„å­—ç¬¦ä¸² a * b è¾“å‡ºç»“æœ 210# / é™¤ - x é™¤ä»¥ y b / a è¾“å‡ºç»“æœ 2.1# % å–æ¨¡ - è¿”å›é™¤æ³•çš„ä½™æ•° b % a è¾“å‡ºç»“æœ 1# ** å¹‚ - è¿”å›xçš„yæ¬¡å¹‚ a**b ä¸º10çš„21æ¬¡æ–¹# // å–æ•´é™¤ - å‘ä¸‹å–æ¥è¿‘å•†çš„æ•´æ•°ï¼Œé™¤åå–å° 9//2=4 -9//2=-5# æ¯”è¾ƒï¼ˆå…³ç³»ï¼‰è¿ç®—ç¬¦ã€aä¸º10ï¼Œbä¸º20ã€‘-----------------------------# == ç­‰äº - æ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸ç­‰ (a == b) è¿”å› Falseã€‚# != ä¸ç­‰äº - æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸ç›¸ç­‰ (a != b) è¿”å› Trueã€‚# &gt; å¤§äº - è¿”å›xæ˜¯å¦å¤§äºy (a &gt; b) è¿”å› Falseã€‚# &lt; å°äº - è¿”å›xæ˜¯å¦å°äºyã€‚æ‰€æœ‰æ¯”è¾ƒè¿ç®—ç¬¦è¿”å›1è¡¨ç¤ºçœŸï¼Œè¿”å›0è¡¨ç¤ºå‡ã€‚è¿™åˆ†åˆ«ä¸ç‰¹æ®Šçš„å˜é‡Trueå’ŒFalseç­‰ä»·ã€‚æ³¨æ„ï¼Œè¿™äº›å˜é‡åçš„å¤§å†™ã€‚ (a &lt; b) è¿”å› Trueã€‚# &gt;= å¤§äºç­‰äº - è¿”å›xæ˜¯å¦å¤§äºç­‰äºyã€‚ (a &gt;= b) è¿”å› Falseã€‚# &lt;= å°äºç­‰äº - è¿”å›xæ˜¯å¦å°äºç­‰äºyã€‚ (a &lt;= b) è¿”å› Trueã€‚# èµ‹å€¼è¿ç®—ç¬¦ã€aä¸º10ï¼Œbä¸º20ã€‘----------------------------------# = ç®€å•çš„èµ‹å€¼è¿ç®—ç¬¦ c = a + b å°† a + b çš„è¿ç®—ç»“æœèµ‹å€¼ä¸º c# += åŠ æ³•èµ‹å€¼è¿ç®—ç¬¦ c += a ç­‰æ•ˆäº c = c + a# -= å‡æ³•èµ‹å€¼è¿ç®—ç¬¦ c -= a ç­‰æ•ˆäº c = c - a# *= ä¹˜æ³•èµ‹å€¼è¿ç®—ç¬¦ c *= a ç­‰æ•ˆäº c = c * a# /= é™¤æ³•èµ‹å€¼è¿ç®—ç¬¦ c /= a ç­‰æ•ˆäº c = c / a# %= å–æ¨¡èµ‹å€¼è¿ç®—ç¬¦ c %= a ç­‰æ•ˆäº c = c % a# **= å¹‚èµ‹å€¼è¿ç®—ç¬¦ c **= a ç­‰æ•ˆäº c = c ** a# //= å–æ•´é™¤èµ‹å€¼è¿ç®—ç¬¦ c //= a ç­‰æ•ˆäº c = c // a# := æµ·è±¡è¿ç®—ç¬¦ï¼Œå¯åœ¨è¡¨è¾¾å¼å†…éƒ¨ä¸ºå˜é‡èµ‹å€¼ã€‚Python3.8 ç‰ˆæœ¬æ–°å¢è¿ç®—ç¬¦ã€‚# åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œèµ‹å€¼è¡¨è¾¾å¼å¯ä»¥é¿å…è°ƒç”¨ len() ä¸¤æ¬¡:# if (n := len(a)) &gt; 10:# print(f&quot;List is too long ({n} elements, expected &lt;= 10)&quot;)# é€»è¾‘è¿ç®—ç¬¦-----------------------------------------------------# and x and y å¸ƒå°”&quot;ä¸&quot; - å¦‚æœ x ä¸º Falseï¼Œx and y è¿”å› x çš„å€¼ï¼Œå¦åˆ™è¿”å› y çš„è®¡ç®—å€¼ã€‚ (a and b) è¿”å› 20ã€‚# or x or y å¸ƒå°”&quot;æˆ–&quot; - å¦‚æœ x æ˜¯ Trueï¼Œå®ƒè¿”å› x çš„å€¼ï¼Œå¦åˆ™å®ƒè¿”å› y çš„è®¡ç®—å€¼ã€‚ (a or b) è¿”å› 10ã€‚# not not x å¸ƒå°”&quot;é&quot; - å¦‚æœ x ä¸º Trueï¼Œè¿”å› False ã€‚å¦‚æœ x ä¸º Falseï¼Œå®ƒè¿”å› Trueã€‚ not(a and b) è¿”å› False# ä½è¿ç®—ç¬¦-------------------------------------------------------# &amp; æŒ‰ä½ä¸è¿ç®—ç¬¦ï¼šå‚ä¸è¿ç®—çš„ä¸¤ä¸ªå€¼,å¦‚æœä¸¤ä¸ªç›¸åº”ä½éƒ½ä¸º1,åˆ™è¯¥ä½çš„ç»“æœä¸º1,å¦åˆ™ä¸º0 (a &amp; b) è¾“å‡ºç»“æœ 12 ï¼ŒäºŒè¿›åˆ¶è§£é‡Šï¼š 0000 1100# | æŒ‰ä½æˆ–è¿ç®—ç¬¦ï¼šåªè¦å¯¹åº”çš„äºŒä¸ªäºŒè¿›ä½æœ‰ä¸€ä¸ªä¸º1æ—¶ï¼Œç»“æœä½å°±ä¸º1ã€‚ (a | b) è¾“å‡ºç»“æœ 61 ï¼ŒäºŒè¿›åˆ¶è§£é‡Šï¼š 0011 1101# ^ æŒ‰ä½å¼‚æˆ–è¿ç®—ç¬¦ï¼šå½“ä¸¤å¯¹åº”çš„äºŒè¿›ä½ç›¸å¼‚æ—¶ï¼Œç»“æœä¸º1 (a ^ b) è¾“å‡ºç»“æœ 49 ï¼ŒäºŒè¿›åˆ¶è§£é‡Šï¼š 0011 0001# ~ æŒ‰ä½å–åè¿ç®—ç¬¦ï¼šå¯¹æ•°æ®çš„æ¯ä¸ªäºŒè¿›åˆ¶ä½å–å,å³æŠŠ1å˜ä¸º0,æŠŠ0å˜ä¸º1ã€‚~x ç±»ä¼¼äº -x-1 (~a ) è¾“å‡ºç»“æœ -61 ï¼ŒäºŒè¿›åˆ¶è§£é‡Šï¼š 1100 0011ï¼Œ åœ¨ä¸€ä¸ªæœ‰ç¬¦å·äºŒè¿›åˆ¶æ•°çš„è¡¥ç å½¢å¼ã€‚# &lt;&lt; å·¦ç§»åŠ¨è¿ç®—ç¬¦ï¼šè¿ç®—æ•°çš„å„äºŒè¿›ä½å…¨éƒ¨å·¦ç§»è‹¥å¹²ä½ï¼Œç”±&quot;&lt;&lt;&quot;å³è¾¹çš„æ•°æŒ‡å®šç§»åŠ¨çš„ä½æ•°ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0ã€‚ a &lt;&lt; 2 è¾“å‡ºç»“æœ 240 ï¼ŒäºŒè¿›åˆ¶è§£é‡Šï¼š 1111 0000# &gt;&gt; å³ç§»åŠ¨è¿ç®—ç¬¦ï¼šæŠŠ&quot;&gt;&gt;&quot;å·¦è¾¹çš„è¿ç®—æ•°çš„å„äºŒè¿›ä½å…¨éƒ¨å³ç§»è‹¥å¹²ä½ï¼Œ&quot;&gt;&gt;&quot;å³è¾¹çš„æ•°æŒ‡å®šç§»åŠ¨çš„ä½æ•° a &gt;&gt; 2 è¾“å‡ºç»“æœ 15 ï¼ŒäºŒè¿›åˆ¶è§£é‡Šï¼š 0000 1111# æˆå‘˜è¿ç®—ç¬¦----------------------------------------------------------# in å¦‚æœåœ¨æŒ‡å®šçš„åºåˆ—ä¸­æ‰¾åˆ°å€¼è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚ x åœ¨ y åºåˆ—ä¸­ , å¦‚æœ x åœ¨ y åºåˆ—ä¸­è¿”å› Trueã€‚# not in å¦‚æœåœ¨æŒ‡å®šçš„åºåˆ—ä¸­æ²¡æœ‰æ‰¾åˆ°å€¼è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚ x ä¸åœ¨ y åºåˆ—ä¸­ , å¦‚æœ x ä¸åœ¨ y åºåˆ—ä¸­è¿”å› Trueã€‚# èº«ä»½è¿ç®—ç¬¦------------------------------------------------------------# is is æ˜¯åˆ¤æ–­ä¸¤ä¸ªæ ‡è¯†ç¬¦æ˜¯ä¸æ˜¯å¼•ç”¨è‡ªä¸€ä¸ªå¯¹è±¡ x is y, ç±»ä¼¼ id(x) == id(y) , å¦‚æœå¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡åˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› False# is not is not æ˜¯åˆ¤æ–­ä¸¤ä¸ªæ ‡è¯†ç¬¦æ˜¯ä¸æ˜¯å¼•ç”¨è‡ªä¸åŒå¯¹è±¡ x is not y ï¼Œ ç±»ä¼¼ id(a) != id(b)ã€‚å¦‚æœå¼•ç”¨çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡åˆ™è¿”å›ç»“æœ Trueï¼Œå¦åˆ™è¿”å› Falseã€‚# è¿ç®—ç¬¦ä¼˜å…ˆçº§# ** æŒ‡æ•° (æœ€é«˜ä¼˜å…ˆçº§)# ~ + - æŒ‰ä½ç¿»è½¬, ä¸€å…ƒåŠ å·å’Œå‡å· (æœ€åä¸¤ä¸ªçš„æ–¹æ³•åä¸º +@ å’Œ -@)# * / % // ä¹˜ï¼Œé™¤ï¼Œæ±‚ä½™æ•°å’Œå–æ•´é™¤# + - åŠ æ³•å‡æ³•# &gt;&gt; &lt;&lt; å³ç§»ï¼Œå·¦ç§»è¿ç®—ç¬¦# &amp; ä½ 'AND'# ^ | ä½è¿ç®—ç¬¦# &lt;= &lt; &gt; &gt;= æ¯”è¾ƒè¿ç®—ç¬¦# == != ç­‰äºè¿ç®—ç¬¦# = %= /= //= -= += *= **= èµ‹å€¼è¿ç®—ç¬¦# is is not èº«ä»½è¿ç®—ç¬¦# in not in æˆå‘˜è¿ç®—ç¬¦# not and or é€»è¾‘è¿ç®—ç¬¦ æµç¨‹æ§åˆ¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485'''æµç¨‹æ§åˆ¶'''# ifif condition_1: statement_block_1elif condition_2: statement_block_2else: statement_block_3# while whlieåé¢ä¸ºfalseæ—¶åˆ™æ‰§è¡Œelseè¯­å¥å—while counter &lt;= n: sum = sum + counter counter += 1else: additional_statement(s)# for range()å‡½æ•°ã€‚å®ƒä¼šç”Ÿæˆæ•°åˆ—# break è¯­å¥å¯ä»¥è·³å‡º for å’Œ while çš„å¾ªç¯ä½“ã€‚å¦‚æœä½ ä» for æˆ– while å¾ªç¯ä¸­ç»ˆæ­¢ï¼Œä»»ä½•å¯¹åº”çš„å¾ªç¯ else å—å°†ä¸æ‰§è¡Œã€‚# continue è¯­å¥è¢«ç”¨æ¥å‘Šè¯‰ Python è·³è¿‡å½“å‰å¾ªç¯å—ä¸­çš„å‰©ä½™è¯­å¥ï¼Œç„¶åç»§ç»­è¿›è¡Œä¸‹ä¸€è½®å¾ªç¯ã€‚for i in range(5,9) : print(i)# pass ä¸åšä»»ä½•äº‹æƒ…ï¼Œä¸€èˆ¬ç”¨åšå ä½è¯­å¥for letter in 'Runoob': if letter == 'o': pass print('æ‰§è¡Œ pass å—') print('å½“å‰å­—æ¯ :', letter)print(&quot;Good bye!&quot;)'''è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨ iter()åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡ å’Œ next()è¾“å‡ºè¿­ä»£å™¨ä¸‹ä¸€ä¸ªå…ƒç´  Python çš„æ„é€ å‡½æ•°ä¸º __init__(),__iter__() æ–¹æ³•è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„è¿­ä»£å™¨å¯¹è±¡ï¼Œ è¿™ä¸ªè¿­ä»£å™¨å¯¹è±¡å®ç°äº† __next__() æ–¹æ³•å¹¶é€šè¿‡ StopIteration å¼‚å¸¸æ ‡è¯†è¿­ä»£çš„å®Œæˆã€‚__next__() æ–¹æ³•ï¼ˆPython 2 é‡Œæ˜¯ next()ï¼‰ä¼šè¿”å›ä¸‹ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚'''# StopIteration å¼‚å¸¸ç”¨äºæ ‡è¯†è¿­ä»£çš„å®Œæˆï¼Œé˜²æ­¢å‡ºç°æ— é™å¾ªç¯çš„æƒ…å†µï¼Œåœ¨ __next__() æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥è®¾ç½®åœ¨å®ŒæˆæŒ‡å®šå¾ªç¯æ¬¡æ•°åè§¦å‘ StopIteration å¼‚å¸¸æ¥ç»“æŸè¿­ä»£ã€‚class MyNumbers: def __iter__(self): self.a = 1 return self def __next__(self): if self.a &lt;= 20: x = self.a self.a += 1 return x else: raise StopIterationmyclass = MyNumbers()myiter = iter(myclass)for x in myiter: print(x)# ä½¿ç”¨äº† yield çš„å‡½æ•°è¢«ç§°ä¸ºç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰ã€‚# è·Ÿæ™®é€šå‡½æ•°ä¸åŒçš„æ˜¯ï¼Œç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªè¿”å›è¿­ä»£å™¨çš„å‡½æ•°ï¼Œåªèƒ½ç”¨äºè¿­ä»£æ“ä½œï¼Œæ›´ç®€å•ç‚¹ç†è§£ç”Ÿæˆå™¨å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚## åœ¨è°ƒç”¨ç”Ÿæˆå™¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡é‡åˆ° yield æ—¶å‡½æ•°ä¼šæš‚åœå¹¶ä¿å­˜å½“å‰æ‰€æœ‰çš„è¿è¡Œä¿¡æ¯ï¼Œè¿”å› yield çš„å€¼, å¹¶åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œ next() æ–¹æ³•æ—¶ä»å½“å‰ä½ç½®ç»§ç»­è¿è¡Œã€‚## è°ƒç”¨ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚import sysdef fibonacci(n): # ç”Ÿæˆå™¨å‡½æ•° - æ–æ³¢é‚£å¥‘ a, b, counter = 0, 1, 0 while True: if (counter &gt; n): return yield a a, b = b, a + b counter += 1f = fibonacci(10) # f æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”±ç”Ÿæˆå™¨è¿”å›ç”Ÿæˆwhile True: try: print(next(f), end=&quot; &quot;) except StopIteration: sys.exit() æ—¶é—´ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&quot;&quot;&quot;æ—¶é—´&quot;&quot;&quot;# Python æä¾›äº†ä¸€ä¸ª time å’Œ calendar æ¨¡å—å¯ä»¥ç”¨äºæ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´ã€‚# æ—¶é—´é—´éš”æ˜¯ä»¥ç§’ä¸ºå•ä½çš„æµ®ç‚¹å°æ•°ã€‚# æ¯ä¸ªæ—¶é—´æˆ³éƒ½ä»¥è‡ªä» 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œï¼ˆå†å…ƒï¼‰ç»è¿‡äº†å¤šé•¿æ—¶é—´æ¥è¡¨ç¤ºã€‚import time # å¼•å…¥timeæ¨¡å—ticks = time.time()print (&quot;å½“å‰æ—¶é—´æˆ³ä¸º:&quot;, ticks)# æ—¶é—´å…ƒç»„# å¾ˆå¤šPythonå‡½æ•°ç”¨ä¸€ä¸ªå…ƒç»„è£…èµ·æ¥çš„9ç»„æ•°å­—å¤„ç†æ—¶é—´:## åºå· å­—æ®µ å€¼# 0 4ä½æ•°å¹´ 2008# 1 æœˆ 1 åˆ° 12# 2 æ—¥ 1åˆ°31# 3 å°æ—¶ 0åˆ°23# 4 åˆ†é’Ÿ 0åˆ°59# 5 ç§’ 0åˆ°61 (60æˆ–61 æ˜¯é—°ç§’)# 6 ä¸€å‘¨çš„ç¬¬å‡ æ—¥ 0åˆ°6 (0æ˜¯å‘¨ä¸€)# 7 ä¸€å¹´çš„ç¬¬å‡ æ—¥ 1åˆ°366 (å„’ç•¥å†)# 8 å¤ä»¤æ—¶ -1, 0, 1, -1æ˜¯å†³å®šæ˜¯å¦ä¸ºå¤ä»¤æ—¶çš„æ——å¸œ# ä¸Šè¿°ä¹Ÿå°±æ˜¯struct_timeå…ƒç»„ã€‚è¿™ç§ç»“æ„å…·æœ‰å¦‚ä¸‹å±æ€§ï¼š# åºå· å±æ€§ å€¼# 0 tm_year 2008# 1 tm_mon 1 åˆ° 12# 2 tm_mday 1 åˆ° 31# 3 tm_hour 0 åˆ° 23# 4 tm_min 0 åˆ° 59# 5 tm_sec 0 åˆ° 61 (60æˆ–61 æ˜¯é—°ç§’)# 6 tm_wday 0åˆ°6 (0æ˜¯å‘¨ä¸€)# 7 tm_yday ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼Œ1 åˆ° 366# 8 tm_isdst æ˜¯å¦ä¸ºå¤ä»¤æ—¶ï¼Œå€¼æœ‰ï¼š1(å¤ä»¤æ—¶)ã€0(ä¸æ˜¯å¤ä»¤æ—¶)ã€-1(æœªçŸ¥)ï¼Œé»˜è®¤ -1# è·å–å½“å‰æ—¶é—´localtime = time.asctime( time.localtime(time.time()) )print (&quot;æœ¬åœ°æ—¶é—´ä¸º :&quot;, localtime)# æ ¼å¼åŒ–# %y ä¸¤ä½æ•°çš„å¹´ä»½è¡¨ç¤ºï¼ˆ00-99ï¼‰# %Y å››ä½æ•°çš„å¹´ä»½è¡¨ç¤ºï¼ˆ000-9999ï¼‰# %m æœˆä»½ï¼ˆ01-12ï¼‰# %d æœˆå†…ä¸­çš„ä¸€å¤©ï¼ˆ0-31ï¼‰# %H 24å°æ—¶åˆ¶å°æ—¶æ•°ï¼ˆ0-23ï¼‰# %I 12å°æ—¶åˆ¶å°æ—¶æ•°ï¼ˆ01-12ï¼‰# %M åˆ†é’Ÿæ•°ï¼ˆ00=59ï¼‰# %S ç§’ï¼ˆ00-59ï¼‰# %a æœ¬åœ°ç®€åŒ–æ˜ŸæœŸåç§°# %A æœ¬åœ°å®Œæ•´æ˜ŸæœŸåç§°# %b æœ¬åœ°ç®€åŒ–çš„æœˆä»½åç§°# %B æœ¬åœ°å®Œæ•´çš„æœˆä»½åç§°# %c æœ¬åœ°ç›¸åº”çš„æ—¥æœŸè¡¨ç¤ºå’Œæ—¶é—´è¡¨ç¤º# %j å¹´å†…çš„ä¸€å¤©ï¼ˆ001-366ï¼‰# %p æœ¬åœ°A.M.æˆ–P.M.çš„ç­‰ä»·ç¬¦# %U ä¸€å¹´ä¸­çš„æ˜ŸæœŸæ•°ï¼ˆ00-53ï¼‰æ˜ŸæœŸå¤©ä¸ºæ˜ŸæœŸçš„å¼€å§‹# %w æ˜ŸæœŸï¼ˆ0-6ï¼‰ï¼Œæ˜ŸæœŸå¤©ä¸ºæ˜ŸæœŸçš„å¼€å§‹# %W ä¸€å¹´ä¸­çš„æ˜ŸæœŸæ•°ï¼ˆ00-53ï¼‰æ˜ŸæœŸä¸€ä¸ºæ˜ŸæœŸçš„å¼€å§‹# %x æœ¬åœ°ç›¸åº”çš„æ—¥æœŸè¡¨ç¤º# %X æœ¬åœ°ç›¸åº”çš„æ—¶é—´è¡¨ç¤º# %Z å½“å‰æ—¶åŒºçš„åç§°# %% %å·æœ¬èº«print(time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()))# æ ¼å¼åŒ–æˆSat Mar 28 22:24:24 2016å½¢å¼print(time.strftime(&quot;%a %b %d %H:%M:%S %Y&quot;, time.localtime()))# å°†æ ¼å¼å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¶é—´æˆ³a = &quot;Sat Mar 28 22:24:24 2016&quot;print(time.mktime(time.strptime(a, &quot;%a %b %d %H:%M:%S %Y&quot;)))# è·å–æŸæœˆæ—¥å†import calendarcal = calendar.month(2016, 1)print (&quot;ä»¥ä¸‹è¾“å‡º2016å¹´1æœˆä»½çš„æ—¥å†:&quot;)print (cal) JSON 123456789101112131415161718192021222324252627282930313233343536373839404142434445&quot;&quot;&quot;JSON&quot;&quot;&quot;# json.dumps(): ==ç¼–ç ==# dict object# list, tuple array# str string# int, float, int- &amp; float-derived Enums number# True true# False false# None null# json.loads(): ==è§£ç ==# object dict# array list# string str# number (int) int# number (real) float# true True# false False# null Noneimport json# Python å­—å…¸ç±»å‹è½¬æ¢ä¸º JSON å¯¹è±¡data = { 'no': 1, 'name': 'Runoob', 'url': 'http://www.runoob.com'}json_str = json.dumps(data)print(&quot;Python åŸå§‹æ•°æ®ï¼š&quot;, repr(data))print(&quot;JSON å¯¹è±¡ï¼š&quot;, json_str)# å°† JSON å¯¹è±¡è½¬æ¢ä¸º Python å­—å…¸data2 = json.loads(json_str)print (&quot;data2['name']: &quot;, data2['name'])print (&quot;data2['url']: &quot;, data2['url'])# æ–‡ä»¶å¤„ç†# å†™å…¥ JSON æ•°æ®with open('data.json', 'w') as f: json.dump(data, f)# è¯»å–æ•°æ®with open('data.json', 'r') as f: data = json.load(f) æ ‡å‡†åº“æ¦‚è§ˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102&quot;&quot;&quot;æ ‡å‡†åº“æ¦‚è§ˆ&quot;&quot;&quot;# æ“ä½œç³»ç»Ÿæ¥å£-----------------------------import osos.getcwd() # è¿”å›å½“å‰çš„å·¥ä½œç›®å½•os.chdir('/server/accesslogs') # ä¿®æ”¹å½“å‰çš„å·¥ä½œç›®å½•os.system('mkdir today') # æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ mkdirimport shutilshutil.copyfile('data.db', 'archive.db')shutil.move('/build/executables', 'installdir')# æ–‡ä»¶é€šé…ç¬¦ ---------------------------------------------# ç”¨äºä»ç›®å½•é€šé…ç¬¦æœç´¢ä¸­ç”Ÿæˆæ–‡ä»¶åˆ—è¡¨import globglob.glob('*.py')# å‘½ä»¤è¡Œå‚æ•°------------------------------------import sysprint(sys.argv)# é”™è¯¯è¾“å‡ºé‡å®šå‘å’Œç¨‹åºç»ˆæ­¢-------------------------------# sys è¿˜æœ‰ stdinï¼Œstdout å’Œ stderr å±æ€§ï¼Œå³ä½¿åœ¨ stdout è¢«é‡å®šå‘æ—¶ï¼Œåè€…ä¹Ÿå¯ä»¥ç”¨äºæ˜¾ç¤ºè­¦å‘Šå’Œé”™è¯¯ä¿¡æ¯ã€‚sys.stderr.write('Warning, log file not found starting a new one\\n')# å­—ç¬¦ä¸²æ­£åˆ™åŒ¹é…-----------------------------------------------import rere.findall(r'\\bf[a-z]*', 'which foot or hand fell fastest')re.sub(r'(\\b[a-z]+) \\1', r'\\1', 'cat in the the hat')# æ•°å­¦-----------------------------------------------import mathmath.cos(math.pi / 4)math.log(1024, 2)import randomrandom.choice(['apple', 'pear', 'banana'])random.sample(range(100), 10) # sampling without replacementrandom.random() # random floatrandom.randrange(6)# äº’è”ç½‘-----------------------------------------------from urllib.request import urlopenfor line in urlopen('http://tycho.usno.navy.mil/cgi-bin/timer.pl'): line = line.decode('utf-8') # Decoding the binary data to text. if 'EST' in line or 'EDT' in line: # look for Eastern Time print(line)import smtplibserver = smtplib.SMTP('localhost')server.sendmail('soothsayer@example.org', 'jcaesar@example.org',&quot;&quot;&quot;To: jcaesar@example.org...From: soothsayer@example.org...... Beware the Ides of March.... &quot;&quot;&quot;)server.quit()# æ—¥æœŸå’Œæ—¶é—´-----------------------------------------------from datetime import datenow = date.today()print(now)now.strftime(&quot;%m-%d-%y. %d %b %Y is a %A on the %d day of %B.&quot;)# dates support calendar arithmeticbirthday = date(1964, 7, 31)age = now - birthdayage.days# æ•°æ®å‹ç¼©import zlibs = b'witch which has which witches wrist watch'len(s)t = zlib.compress(s)len(t)zlib.decompress(t)zlib.crc32(s)# æ€§èƒ½åº¦é‡from timeit import TimerTimer('t=a; a=b; b=t', 'a=1; b=2').timeit()Timer('a,b = b,a', 'a=1; b=2').timeit()# æµ‹è¯•æ¨¡å—def average(values): &quot;&quot;&quot;Computes the arithmetic mean of a list of numbers. &gt;&gt;&gt; print(average([20, 30, 70])) 40.0 &quot;&quot;&quot; return sum(values) / len(values)import doctestdoctest.testmod() # è‡ªåŠ¨éªŒè¯åµŒå…¥æµ‹è¯•# unittestæ¨¡å—ä¸åƒ doctestæ¨¡å—é‚£ä¹ˆå®¹æ˜“ä½¿ç”¨ï¼Œä¸è¿‡å®ƒå¯ä»¥åœ¨ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶é‡Œæä¾›ä¸€ä¸ªæ›´å…¨é¢çš„æµ‹è¯•é›†:import unittestclass TestStatisticalFunctions(unittest.TestCase): def test_average(self): self.assertEqual(average([20, 30, 70]), 40.0) self.assertEqual(round(average([1, 5, 7]), 1), 4.3) self.assertRaises(ZeroDivisionError, average, []) self.assertRaises(TypeError, average, 20, 30, 70)unittest.main() # Calling from the command line invokes all tests OOP 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129&quot;&quot;&quot;OOP&quot;&quot;&quot;# ===ç±»===# class ClassName:# &lt;statement-1&gt;# .# .# &lt;statement-N&gt;# ===ç±»å¯¹è±¡===# å±æ€§å¼•ç”¨å’Œå®ä¾‹åŒ–class MyClass: &quot;&quot;&quot;ä¸€ä¸ªç®€å•çš„ç±»å®ä¾‹&quot;&quot;&quot; i = 12345 def f(self): return 'hello world'# ===å®ä¾‹åŒ–ç±»===x = MyClass()# ===è®¿é—®ç±»çš„å±æ€§å’Œæ–¹æ³•===print(&quot;MyClass ç±»çš„å±æ€§ i ä¸ºï¼š&quot;, x.i)print(&quot;MyClass ç±»çš„æ–¹æ³• f è¾“å‡ºä¸ºï¼š&quot;, x.f())# ç±»æœ‰ä¸€ä¸ªåä¸º __init__() çš„ç‰¹æ®Šæ–¹æ³•ï¼ˆæ„é€ æ–¹æ³•ï¼‰ï¼Œè¯¥æ–¹æ³•åœ¨ç±»å®ä¾‹åŒ–æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š# __init__() æ–¹æ³•å¯ä»¥æœ‰å‚æ•°ï¼Œå‚æ•°é€šè¿‡ __init__() ä¼ é€’åˆ°ç±»çš„å®ä¾‹åŒ–æ“ä½œä¸Šï¼Œselfä»£è¡¨ç±»çš„å®ä¾‹ï¼Œè€Œéç±»def __init__(self): self.data = []class Test: def prt(self): print(self) print(self.__class__)t = Test()t.prt()# ===æ–¹æ³•===# defå®šä¹‰æ–¹æ³•,ä¸ä¸€èˆ¬å‡½æ•°å®šä¹‰ä¸åŒï¼Œç±»æ–¹æ³•å¿…é¡»åŒ…å«selfå‚æ•°ä¸”ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œselfä»£è¡¨ç±»çš„å®ä¾‹# ç±»å®šä¹‰class people: # å®šä¹‰åŸºæœ¬å±æ€§ name = '' age = 0 # å®šä¹‰ç§æœ‰å±æ€§,ç§æœ‰å±æ€§åœ¨ç±»å¤–éƒ¨æ— æ³•ç›´æ¥è¿›è¡Œè®¿é—® __weight = 0 # å®šä¹‰æ„é€ æ–¹æ³• def __init__(self, n, a, w): self.name = n self.age = a self.__weight = w def speak(self): print(&quot;%s è¯´: æˆ‘ %d å²ã€‚&quot; % (self.name, self.age))# å®ä¾‹åŒ–ç±»p = people('runoob', 10, 30)p.speak()# ===ç»§æ‰¿===# å­ç±»ï¼ˆæ´¾ç”Ÿç±» DerivedClassNameï¼‰ä¼šç»§æ‰¿çˆ¶ç±»ï¼ˆåŸºç±» BaseClassNameï¼‰çš„å±æ€§å’Œæ–¹æ³•ã€‚# class DerivedClassName(BaseClassName):# &lt;statement-1&gt;# .# .# .# &lt;statement-N&gt;# ===å¤šç»§æ‰¿===# class DerivedClassName(Base1, Base2, Base3):# &lt;statement-1&gt;# .# .# .# &lt;statement-N&gt;# è‹¥æ˜¯çˆ¶ç±»ä¸­æœ‰ç›¸åŒçš„æ–¹æ³•åï¼Œè€Œåœ¨å­ç±»ä½¿ç”¨æ—¶æœªæŒ‡å®šï¼Œpythonä»å·¦è‡³å³æœç´¢ å³æ–¹æ³•åœ¨å­ç±»ä¸­æœªæ‰¾åˆ°æ—¶ï¼Œä»å·¦åˆ°å³æŸ¥æ‰¾çˆ¶ç±»ä¸­æ˜¯å¦åŒ…å«æ–¹æ³•# ===æ–¹æ³•é‡å†™===class Parent: # å®šä¹‰çˆ¶ç±» def myMethod(self): print('è°ƒç”¨çˆ¶ç±»æ–¹æ³•')class Child(Parent): # å®šä¹‰å­ç±» def myMethod(self): print('è°ƒç”¨å­ç±»æ–¹æ³•')c = Child() # å­ç±»å®ä¾‹c.myMethod() # å­ç±»è°ƒç”¨é‡å†™æ–¹æ³•super(Child, c).myMethod() # ç”¨å­ç±»å¯¹è±¡è°ƒç”¨çˆ¶ç±»å·²è¢«è¦†ç›–çš„æ–¹æ³•# ===ç±»å±æ€§ä¸æ–¹æ³•===# ç±»çš„ç§æœ‰å±æ€§# __private_attrsï¼šä¸¤ä¸ªä¸‹åˆ’çº¿å¼€å¤´ï¼Œå£°æ˜è¯¥å±æ€§ä¸ºç§æœ‰ï¼Œä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨è¢«ä½¿ç”¨æˆ–ç›´æ¥è®¿é—®ã€‚åœ¨ç±»å†…éƒ¨çš„æ–¹æ³•ä¸­ä½¿ç”¨æ—¶ self.__private_attrsã€‚## ç±»çš„æ–¹æ³•# åœ¨ç±»çš„å†…éƒ¨ï¼Œä½¿ç”¨ def å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œä¸ä¸€èˆ¬å‡½æ•°å®šä¹‰ä¸åŒï¼Œç±»æ–¹æ³•å¿…é¡»åŒ…å«å‚æ•° selfï¼Œä¸”ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œself ä»£è¡¨çš„æ˜¯ç±»çš„å®ä¾‹ã€‚# self çš„åå­—å¹¶ä¸æ˜¯è§„å®šæ­»çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ thisï¼Œä½†æ˜¯æœ€å¥½è¿˜æ˜¯æŒ‰ç…§çº¦å®šä½¿ç”¨ selfã€‚## ç±»çš„ç§æœ‰æ–¹æ³•# __private_methodï¼šä¸¤ä¸ªä¸‹åˆ’çº¿å¼€å¤´ï¼Œå£°æ˜è¯¥æ–¹æ³•ä¸ºç§æœ‰æ–¹æ³•ï¼Œåªèƒ½åœ¨ç±»çš„å†…éƒ¨è°ƒç”¨ ï¼Œä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨è°ƒç”¨ã€‚self.__private_methodsã€‚# ==é‡è½½==class Vector: def __init__(self, a, b): self.a = a self.b = b def __str__(self): return 'Vector (%d, %d)' % (self.a, self.b) def __add__(self, other): return Vector(self.a + other.a, self.b + other.b)v1 = Vector(2, 10)v2 = Vector(5, -2)print(v1 + v2) å‡½æ•° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859'''å‡½æ•°'''# ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªç”±è‡ªå·±æƒ³è¦åŠŸèƒ½çš„å‡½æ•°ï¼Œä»¥ä¸‹æ˜¯ç®€å•çš„è§„åˆ™ï¼š## å‡½æ•°ä»£ç å—ä»¥ def å…³é”®è¯å¼€å¤´ï¼Œåæ¥å‡½æ•°æ ‡è¯†ç¬¦åç§°å’Œåœ†æ‹¬å· ()ã€‚# ä»»ä½•ä¼ å…¥å‚æ•°å’Œè‡ªå˜é‡å¿…é¡»æ”¾åœ¨åœ†æ‹¬å·ä¸­é—´ï¼Œåœ†æ‹¬å·ä¹‹é—´å¯ä»¥ç”¨äºå®šä¹‰å‚æ•°ã€‚# å‡½æ•°çš„ç¬¬ä¸€è¡Œè¯­å¥å¯ä»¥é€‰æ‹©æ€§åœ°ä½¿ç”¨æ–‡æ¡£å­—ç¬¦ä¸²â€”ç”¨äºå­˜æ”¾å‡½æ•°è¯´æ˜ã€‚# å‡½æ•°å†…å®¹ä»¥å†’å· : èµ·å§‹ï¼Œå¹¶ä¸”ç¼©è¿›ã€‚# return [è¡¨è¾¾å¼] ç»“æŸå‡½æ•°ï¼Œé€‰æ‹©æ€§åœ°è¿”å›ä¸€ä¸ªå€¼ç»™è°ƒç”¨æ–¹ï¼Œä¸å¸¦è¡¨è¾¾å¼çš„ return ç›¸å½“äºè¿”å› Noneã€‚def max(a, b): if a &gt; b: return a else: return b# python å‡½æ•°çš„å‚æ•°ä¼ é€’ï¼š# ä¸å¯å˜ç±»å‹ï¼šç±»ä¼¼ C++ çš„å€¼ä¼ é€’ï¼Œå¦‚æ•´æ•°ã€å­—ç¬¦ä¸²ã€å…ƒç»„ã€‚å¦‚ fun(a)ï¼Œä¼ é€’çš„åªæ˜¯ a çš„å€¼ï¼Œæ²¡æœ‰å½±å“ a å¯¹è±¡æœ¬èº«ã€‚å¦‚æœåœ¨ fun(a) å†…éƒ¨ä¿®æ”¹ a çš„å€¼ï¼Œåˆ™æ˜¯æ–°ç”Ÿæˆä¸€ä¸ª a çš„å¯¹è±¡ã€‚# å¯å˜ç±»å‹ï¼šç±»ä¼¼ C++ çš„å¼•ç”¨ä¼ é€’ï¼Œå¦‚ åˆ—è¡¨ï¼Œå­—å…¸ã€‚å¦‚ fun(la)ï¼Œåˆ™æ˜¯å°† la çœŸæ­£çš„ä¼ è¿‡å»ï¼Œä¿®æ”¹å fun å¤–éƒ¨çš„ la ä¹Ÿä¼šå—å½±å“# python ä¸­ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼Œä¸¥æ ¼æ„ä¹‰æˆ‘ä»¬ä¸èƒ½è¯´å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Œæˆ‘ä»¬åº”è¯¥è¯´ä¼ ä¸å¯å˜å¯¹è±¡å’Œä¼ å¯å˜å¯¹è±¡ã€‚# å¯é€šè¿‡id()å‡½æ•°æŸ¥çœ‹å¯¹è±¡å†…å­˜åœ°å€# å‚æ•°# ä»¥ä¸‹æ˜¯è°ƒç”¨å‡½æ•°æ—¶å¯ä½¿ç”¨çš„æ­£å¼å‚æ•°ç±»å‹ï¼š# å¿…éœ€å‚æ•°ã€è°ƒç”¨æ—¶çš„æ•°é‡å¿…é¡»å’Œå£°æ˜æ—¶çš„ä¸€æ ·ã€‘ def printme( str ):# å…³é”®å­—å‚æ•°ã€å…è®¸å‡½æ•°è°ƒç”¨æ—¶å‚æ•°çš„é¡ºåºä¸å£°æ˜æ—¶ä¸ä¸€è‡´ï¼Œå› ä¸º Python è§£é‡Šå™¨èƒ½å¤Ÿç”¨å‚æ•°ååŒ¹é…å‚æ•°å€¼ã€‘def printinfo( name, age ):# é»˜è®¤å‚æ•°ã€å¦‚æœæ²¡æœ‰ä¼ é€’å‚æ•°ï¼Œåˆ™ä¼šä½¿ç”¨é»˜è®¤å‚æ•°ã€‘def printinfo( name, age = 35 ):# ä¸å®šé•¿å‚æ•° ã€åŠ äº†æ˜Ÿå· * çš„å‚æ•°ä¼šä»¥å…ƒç»„(tuple)çš„å½¢å¼å¯¼å…¥ï¼Œå­˜æ”¾æ‰€æœ‰æœªå‘½åçš„å˜é‡å‚æ•°ï¼Œæ²¡æœ‰æŒ‡å®šå‚æ•°ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç©ºå…ƒç»„ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸å‘å‡½æ•°ä¼ é€’æœªå‘½åçš„å˜é‡ï¼ŒåŠ äº†ä¸¤ä¸ªæ˜Ÿå· ** çš„å‚æ•°ä¼šä»¥å­—å…¸çš„å½¢å¼å¯¼å…¥ï¼Œå¦‚æœå•ç‹¬å‡ºç°æ˜Ÿå· * åçš„å‚æ•°å¿…é¡»ç”¨å…³é”®å­—ä¼ å…¥ã€‘def functionname([formal_args,] *var_args_tuple ):'''åŒ¿åå‡½æ•°'''# lambda [arg1 [,arg2,.....argn]]:expression# å¯å†™å‡½æ•°è¯´æ˜sum = lambda arg1, arg2: arg1 + arg2# è°ƒç”¨sumå‡½æ•°print(&quot;ç›¸åŠ åçš„å€¼ä¸º : &quot;, sum(10, 20))print(&quot;ç›¸åŠ åçš„å€¼ä¸º : &quot;, sum(20, 20))'''å¼ºåˆ¶ä½ç½®å‚æ•°'''# åœ¨ä»¥ä¸‹çš„ä¾‹å­ä¸­ï¼Œå½¢å‚ a å’Œ b å¿…é¡»ä½¿ç”¨æŒ‡å®šä½ç½®å‚æ•°ï¼Œc æˆ– d å¯ä»¥æ˜¯ä½ç½®å½¢å‚æˆ–å…³é”®å­—å½¢å‚ï¼Œè€Œ e æˆ– f è¦æ±‚ä¸ºå…³é”®å­—å½¢å‚:def f(a, b, /, c, d, *, e, f): print(a, b, c, d, e, f)# ä»¥ä¸‹ä½¿ç”¨æ–¹æ³•æ˜¯æ­£ç¡®çš„:f(10, 20, 30, d=40, e=50, f=60)# ä»¥ä¸‹ä½¿ç”¨æ–¹æ³•ä¼šå‘ç”Ÿé”™è¯¯:f(10, b=20, c=30, d=40, e=50, f=60) # b ä¸èƒ½ä½¿ç”¨å…³é”®å­—å‚æ•°çš„å½¢å¼f(10, 20, 30, 40, 50, f=60) # e å¿…é¡»ä½¿ç”¨å…³é”®å­—å‚æ•°çš„å½¢å¼ æ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119&quot;&quot;&quot;æ–‡ä»¶&quot;&quot;&quot;# æ‰“å¼€æ–‡ä»¶è¿”å›æ–‡ä»¶å¯¹è±¡# file: å¿…éœ€ï¼Œæ–‡ä»¶è·¯å¾„ï¼ˆç›¸å¯¹æˆ–è€…ç»å¯¹è·¯å¾„ï¼‰ã€‚# mode: å¯é€‰ï¼Œæ–‡ä»¶æ‰“å¼€æ¨¡å¼# buffering: è®¾ç½®ç¼“å†²# encoding: ä¸€èˆ¬ä½¿ç”¨utf8# errors: æŠ¥é”™çº§åˆ«# newline: åŒºåˆ†æ¢è¡Œç¬¦# closefd: ä¼ å…¥çš„fileå‚æ•°ç±»å‹# opener: è®¾ç½®è‡ªå®šä¹‰å¼€å¯å™¨ï¼Œå¼€å¯å™¨çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ã€‚# mode å‚æ•°æœ‰ï¼š# æ¨¡å¼ æè¿°# t æ–‡æœ¬æ¨¡å¼ (é»˜è®¤)ã€‚# x å†™æ¨¡å¼ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™ä¼šæŠ¥é”™ã€‚# b äºŒè¿›åˆ¶æ¨¡å¼ã€‚# + æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œæ›´æ–°(å¯è¯»å¯å†™)ã€‚# U é€šç”¨æ¢è¡Œæ¨¡å¼ï¼ˆPython 3 ä¸æ”¯æŒï¼‰ã€‚# r ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚# rb ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºåªè¯»ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚# r+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚# rb+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚# w æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚# wb ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚# w+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚# wb+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚# a æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚# ab ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚# a+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚æ–‡ä»¶æ‰“å¼€æ—¶ä¼šæ˜¯è¿½åŠ æ¨¡å¼ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚# ab+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚file = open('filetest.txt', mode='r', buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None)# file å¯¹è±¡å¸¸ç”¨çš„å‡½æ•°ï¼š# file.close() å…³é—­æ–‡ä»¶ã€‚å…³é—­åæ–‡ä»¶ä¸èƒ½å†è¿›è¡Œè¯»å†™æ“ä½œã€‚# file.flush() åˆ·æ–°æ–‡ä»¶å†…éƒ¨ç¼“å†²ï¼Œç›´æ¥æŠŠå†…éƒ¨ç¼“å†²åŒºçš„æ•°æ®ç«‹åˆ»å†™å…¥æ–‡ä»¶, è€Œä¸æ˜¯è¢«åŠ¨çš„ç­‰å¾…è¾“å‡ºç¼“å†²åŒºå†™å…¥ã€‚# file.fileno() è¿”å›ä¸€ä¸ªæ•´å‹çš„æ–‡ä»¶æè¿°ç¬¦(file descriptor FD æ•´å‹), å¯ä»¥ç”¨åœ¨å¦‚osæ¨¡å—çš„readæ–¹æ³•ç­‰ä¸€äº›åº•å±‚æ“ä½œä¸Šã€‚# file.isatty() å¦‚æœæ–‡ä»¶è¿æ¥åˆ°ä¸€ä¸ªç»ˆç«¯è®¾å¤‡è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚# file.next() Python 3 ä¸­çš„ File å¯¹è±¡ä¸æ”¯æŒ next() æ–¹æ³•ã€‚ è¿”å›æ–‡ä»¶ä¸‹ä¸€è¡Œã€‚# file.read([size]) ä»æ–‡ä»¶è¯»å–æŒ‡å®šçš„å­—èŠ‚æ•°ï¼Œå¦‚æœæœªç»™å®šæˆ–ä¸ºè´Ÿåˆ™è¯»å–æ‰€æœ‰ã€‚# file.readline([size]) è¯»å–æ•´è¡Œï¼ŒåŒ…æ‹¬ &quot;\\n&quot; å­—ç¬¦ã€‚# file.readlines([sizeint]) è¯»å–æ‰€æœ‰è¡Œå¹¶è¿”å›åˆ—è¡¨ï¼Œè‹¥ç»™å®šsizeint&gt;0ï¼Œè¿”å›æ€»å’Œå¤§çº¦ä¸ºsizeintå­—èŠ‚çš„è¡Œ, å®é™…è¯»å–å€¼å¯èƒ½æ¯” sizeint è¾ƒå¤§, å› ä¸ºéœ€è¦å¡«å……ç¼“å†²åŒºã€‚# file.seek(offset[, whence]) ç§»åŠ¨æ–‡ä»¶è¯»å–æŒ‡é’ˆåˆ°æŒ‡å®šä½ç½®# file.tell() è¿”å›æ–‡ä»¶å½“å‰ä½ç½®ã€‚# file.truncate([size]) ä»æ–‡ä»¶çš„é¦–è¡Œé¦–å­—ç¬¦å¼€å§‹æˆªæ–­ï¼Œæˆªæ–­æ–‡ä»¶ä¸º size ä¸ªå­—ç¬¦ï¼Œæ—  size è¡¨ç¤ºä»å½“å‰ä½ç½®æˆªæ–­ï¼›æˆªæ–­ä¹‹ååé¢çš„æ‰€æœ‰å­—ç¬¦è¢«åˆ é™¤ï¼Œå…¶ä¸­ windows ç³»ç»Ÿä¸‹çš„æ¢è¡Œä»£è¡¨2ä¸ªå­—ç¬¦å¤§å°ã€‚# file.write(str) å°†å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ï¼Œè¿”å›çš„æ˜¯å†™å…¥çš„å­—ç¬¦é•¿åº¦ã€‚# file.writelines(sequence) å‘æ–‡ä»¶å†™å…¥ä¸€ä¸ªåºåˆ—å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¦‚æœéœ€è¦æ¢è¡Œåˆ™è¦è‡ªå·±åŠ å…¥æ¯è¡Œçš„æ¢è¡Œç¬¦ã€‚&quot;&quot;&quot;æ–‡ä»¶å’Œç›®å½•&quot;&quot;&quot;# os æ¨¡å—æä¾›äº†éå¸¸ä¸°å¯Œçš„æ–¹æ³•ç”¨æ¥å¤„ç†æ–‡ä»¶å’Œç›®å½•ã€‚å¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š## åºå· æ–¹æ³•åŠæè¿°# os.access(path, mode) æ£€éªŒæƒé™æ¨¡å¼# os.chdir(path) æ”¹å˜å½“å‰å·¥ä½œç›®å½•# os.chflags(path, flags) è®¾ç½®è·¯å¾„çš„æ ‡è®°ä¸ºæ•°å­—æ ‡è®°ã€‚# os.chmod(path, mode) æ›´æ”¹æƒé™# os.chown(path, uid, gid) æ›´æ”¹æ–‡ä»¶æ‰€æœ‰è€…# os.chroot(path) æ”¹å˜å½“å‰è¿›ç¨‹çš„æ ¹ç›®å½•# os.close(fd) å…³é—­æ–‡ä»¶æè¿°ç¬¦ fd# os.closerange(fd_low, fd_high) å…³é—­æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œä» fd_low (åŒ…å«) åˆ° fd_high (ä¸åŒ…å«), é”™è¯¯ä¼šå¿½ç•¥# os.dup(fd) å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦ fd# os.dup2(fd, fd2) å°†ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ fd å¤åˆ¶åˆ°å¦ä¸€ä¸ª fd2# os.fchdir(fd) é€šè¿‡æ–‡ä»¶æè¿°ç¬¦æ”¹å˜å½“å‰å·¥ä½œç›®å½•# os.fchmod(fd, mode) æ”¹å˜ä¸€ä¸ªæ–‡ä»¶çš„è®¿é—®æƒé™ï¼Œè¯¥æ–‡ä»¶ç”±å‚æ•°fdæŒ‡å®šï¼Œå‚æ•°modeæ˜¯Unixä¸‹çš„æ–‡ä»¶è®¿é—®æƒé™ã€‚# os.fchown(fd, uid, gid) ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶çš„æ‰€æœ‰æƒï¼Œè¿™ä¸ªå‡½æ•°ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶çš„ç”¨æˆ·IDå’Œç”¨æˆ·ç»„IDï¼Œè¯¥æ–‡ä»¶ç”±æ–‡ä»¶æè¿°ç¬¦fdæŒ‡å®šã€‚# os.fdatasync(fd) å¼ºåˆ¶å°†æ–‡ä»¶å†™å…¥ç£ç›˜ï¼Œè¯¥æ–‡ä»¶ç”±æ–‡ä»¶æè¿°ç¬¦fdæŒ‡å®šï¼Œä½†æ˜¯ä¸å¼ºåˆ¶æ›´æ–°æ–‡ä»¶çš„çŠ¶æ€ä¿¡æ¯ã€‚# os.fdopen(fd[, mode[, bufsize]]) é€šè¿‡æ–‡ä»¶æè¿°ç¬¦ fd åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼Œå¹¶è¿”å›è¿™ä¸ªæ–‡ä»¶å¯¹è±¡# os.fpathconf(fd, name) è¿”å›ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶çš„ç³»ç»Ÿé…ç½®ä¿¡æ¯ã€‚nameä¸ºæ£€ç´¢çš„ç³»ç»Ÿé…ç½®çš„å€¼ï¼Œå®ƒä¹Ÿè®¸æ˜¯ä¸€ä¸ªå®šä¹‰ç³»ç»Ÿå€¼çš„å­—ç¬¦ä¸²ï¼Œè¿™äº›åå­—åœ¨å¾ˆå¤šæ ‡å‡†ä¸­æŒ‡å®šï¼ˆPOSIX.1, Unix 95, Unix 98, å’Œå…¶å®ƒï¼‰ã€‚# os.fstat(fd) è¿”å›æ–‡ä»¶æè¿°ç¬¦fdçš„çŠ¶æ€ï¼Œåƒstat()ã€‚# os.fstatvfs(fd) è¿”å›åŒ…å«æ–‡ä»¶æè¿°ç¬¦fdçš„æ–‡ä»¶çš„æ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯ï¼ŒPython 3.3 ç›¸ç­‰äº statvfs()ã€‚# os.fsync(fd) å¼ºåˆ¶å°†æ–‡ä»¶æè¿°ç¬¦ä¸ºfdçš„æ–‡ä»¶å†™å…¥ç¡¬ç›˜ã€‚# os.ftruncate(fd, length) è£å‰ªæ–‡ä»¶æè¿°ç¬¦fdå¯¹åº”çš„æ–‡ä»¶, æ‰€ä»¥å®ƒæœ€å¤§ä¸èƒ½è¶…è¿‡æ–‡ä»¶å¤§å°ã€‚# os.getcwd() è¿”å›å½“å‰å·¥ä½œç›®å½•# os.getcwdb() è¿”å›ä¸€ä¸ªå½“å‰å·¥ä½œç›®å½•çš„Unicodeå¯¹è±¡# os.isatty(fd) å¦‚æœæ–‡ä»¶æè¿°ç¬¦fdæ˜¯æ‰“å¼€çš„ï¼ŒåŒæ—¶ä¸tty(-like)è®¾å¤‡ç›¸è¿ï¼Œåˆ™è¿”å›true, å¦åˆ™Falseã€‚# os.lchflags(path, flags) è®¾ç½®è·¯å¾„çš„æ ‡è®°ä¸ºæ•°å­—æ ‡è®°ï¼Œç±»ä¼¼ chflags()ï¼Œä½†æ˜¯æ²¡æœ‰è½¯é“¾æ¥# os.lchmod(path, mode) ä¿®æ”¹è¿æ¥æ–‡ä»¶æƒé™# os.lchown(path, uid, gid) æ›´æ”¹æ–‡ä»¶æ‰€æœ‰è€…ï¼Œç±»ä¼¼ chownï¼Œä½†æ˜¯ä¸è¿½è¸ªé“¾æ¥ã€‚# os.link(src, dst) åˆ›å»ºç¡¬é“¾æ¥ï¼Œåä¸ºå‚æ•° dstï¼ŒæŒ‡å‘å‚æ•° src# os.listdir(path) è¿”å›pathæŒ‡å®šçš„æ–‡ä»¶å¤¹åŒ…å«çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„åå­—çš„åˆ—è¡¨ã€‚# os.lseek(fd, pos, how) è®¾ç½®æ–‡ä»¶æè¿°ç¬¦ fdå½“å‰ä½ç½®ä¸ºpos, howæ–¹å¼ä¿®æ”¹: SEEK_SET æˆ–è€… 0 è®¾ç½®ä»æ–‡ä»¶å¼€å§‹çš„è®¡ç®—çš„pos; SEEK_CURæˆ–è€… 1 åˆ™ä»å½“å‰ä½ç½®è®¡ç®—; os.SEEK_ENDæˆ–è€…2åˆ™ä»æ–‡ä»¶å°¾éƒ¨å¼€å§‹. åœ¨unixï¼ŒWindowsä¸­æœ‰æ•ˆ# os.lstat(path) åƒstat(),ä½†æ˜¯æ²¡æœ‰è½¯é“¾æ¥# os.major(device) ä»åŸå§‹çš„è®¾å¤‡å·ä¸­æå–è®¾å¤‡majorå·ç  (ä½¿ç”¨statä¸­çš„st_devæˆ–è€…st_rdev field)ã€‚# os.makedev(major, minor) ä»¥majorå’Œminorè®¾å¤‡å·ç»„æˆä¸€ä¸ªåŸå§‹è®¾å¤‡å·# os.makedirs(path[, mode]) é€’å½’æ–‡ä»¶å¤¹åˆ›å»ºå‡½æ•°ã€‚åƒmkdir(), ä½†åˆ›å»ºçš„æ‰€æœ‰intermediate-levelæ–‡ä»¶å¤¹éœ€è¦åŒ…å«å­æ–‡ä»¶å¤¹ã€‚# os.minor(device) ä»åŸå§‹çš„è®¾å¤‡å·ä¸­æå–è®¾å¤‡minorå·ç  (ä½¿ç”¨statä¸­çš„st_devæˆ–è€…st_rdev field )ã€‚# os.mkdir(path[, mode]) ä»¥æ•°å­—modeçš„modeåˆ›å»ºä¸€ä¸ªåä¸ºpathçš„æ–‡ä»¶å¤¹.é»˜è®¤çš„ mode æ˜¯ 0777 (å…«è¿›åˆ¶)ã€‚# os.mkfifo(path[, mode]) åˆ›å»ºå‘½åç®¡é“ï¼Œmode ä¸ºæ•°å­—ï¼Œé»˜è®¤ä¸º 0666 (å…«è¿›åˆ¶)# os.mknod(filename[, mode=0600, device]) åˆ›å»ºä¸€ä¸ªåä¸ºfilenameæ–‡ä»¶ç³»ç»ŸèŠ‚ç‚¹ï¼ˆæ–‡ä»¶ï¼Œè®¾å¤‡ç‰¹åˆ«æ–‡ä»¶æˆ–è€…å‘½åpipeï¼‰ã€‚# os.open(file, flags[, mode]) æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”è®¾ç½®éœ€è¦çš„æ‰“å¼€é€‰é¡¹ï¼Œmodeå‚æ•°æ˜¯å¯é€‰çš„# os.openpty() æ‰“å¼€ä¸€ä¸ªæ–°çš„ä¼ªç»ˆç«¯å¯¹ã€‚è¿”å› pty å’Œ ttyçš„æ–‡ä»¶æè¿°ç¬¦ã€‚# os.pathconf(path, name) è¿”å›ç›¸å…³æ–‡ä»¶çš„ç³»ç»Ÿé…ç½®ä¿¡æ¯ã€‚# os.pipe() åˆ›å»ºä¸€ä¸ªç®¡é“. è¿”å›ä¸€å¯¹æ–‡ä»¶æè¿°ç¬¦(r, w) åˆ†åˆ«ä¸ºè¯»å’Œå†™# os.popen(command[, mode[, bufsize]]) ä»ä¸€ä¸ª command æ‰“å¼€ä¸€ä¸ªç®¡é“# os.read(fd, n) ä»æ–‡ä»¶æè¿°ç¬¦ fd ä¸­è¯»å–æœ€å¤š n ä¸ªå­—èŠ‚ï¼Œè¿”å›åŒ…å«è¯»å–å­—èŠ‚çš„å­—ç¬¦ä¸²ï¼Œæ–‡ä»¶æè¿°ç¬¦ fdå¯¹åº”æ–‡ä»¶å·²è¾¾åˆ°ç»“å°¾, è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚# os.readlink(path) è¿”å›è½¯é“¾æ¥æ‰€æŒ‡å‘çš„æ–‡ä»¶# os.remove(path) åˆ é™¤è·¯å¾„ä¸ºpathçš„æ–‡ä»¶ã€‚å¦‚æœpath æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå°†æŠ›å‡ºOSError; æŸ¥çœ‹ä¸‹é¢çš„rmdir()åˆ é™¤ä¸€ä¸ª directoryã€‚# os.removedirs(path) é€’å½’åˆ é™¤ç›®å½•ã€‚# os.rename(src, dst) é‡å‘½åæ–‡ä»¶æˆ–ç›®å½•ï¼Œä» src åˆ° dst# os.renames(old, new) é€’å½’åœ°å¯¹ç›®å½•è¿›è¡Œæ›´åï¼Œä¹Ÿå¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œæ›´åã€‚# os.rmdir(path) åˆ é™¤pathæŒ‡å®šçš„ç©ºç›®å½•ï¼Œå¦‚æœç›®å½•éç©ºï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªOSErrorå¼‚å¸¸ã€‚# os.stat(path) è·å–pathæŒ‡å®šçš„è·¯å¾„çš„ä¿¡æ¯ï¼ŒåŠŸèƒ½ç­‰åŒäºC APIä¸­çš„stat()ç³»ç»Ÿè°ƒç”¨ã€‚# os.stat_float_times([newvalue]) å†³å®šstat_resultæ˜¯å¦ä»¥floatå¯¹è±¡æ˜¾ç¤ºæ—¶é—´æˆ³# os.statvfs(path) è·å–æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯# os.symlink(src, dst) åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥# os.tcgetpgrp(fd) è¿”å›ä¸ç»ˆç«¯fdï¼ˆä¸€ä¸ªç”±os.open()è¿”å›çš„æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ï¼‰å…³è”çš„è¿›ç¨‹ç»„# os.tcsetpgrp(fd, pg) è®¾ç½®ä¸ç»ˆç«¯fdï¼ˆä¸€ä¸ªç”±os.open()è¿”å›çš„æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ï¼‰å…³è”çš„è¿›ç¨‹ç»„ä¸ºpgã€‚# os.tempnam([dir[, prefix]]) Python3 ä¸­å·²åˆ é™¤ã€‚è¿”å›å”¯ä¸€çš„è·¯å¾„åç”¨äºåˆ›å»ºä¸´æ—¶æ–‡ä»¶ã€‚# os.tmpfile() Python3 ä¸­å·²åˆ é™¤ã€‚è¿”å›ä¸€ä¸ªæ‰“å¼€çš„æ¨¡å¼ä¸º(w+b)çš„æ–‡ä»¶å¯¹è±¡ .è¿™æ–‡ä»¶å¯¹è±¡æ²¡æœ‰æ–‡ä»¶å¤¹å…¥å£ï¼Œæ²¡æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œå°†ä¼šè‡ªåŠ¨åˆ é™¤ã€‚# os.tmpnam() Python3 ä¸­å·²åˆ é™¤ã€‚ä¸ºåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶è¿”å›ä¸€ä¸ªå”¯ä¸€çš„è·¯å¾„# os.ttyname(fd) è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒè¡¨ç¤ºä¸æ–‡ä»¶æè¿°ç¬¦fd å…³è”çš„ç»ˆç«¯è®¾å¤‡ã€‚å¦‚æœfd æ²¡æœ‰ä¸ç»ˆç«¯è®¾å¤‡å…³è”ï¼Œåˆ™å¼•å‘ä¸€ä¸ªå¼‚å¸¸ã€‚# os.unlink(path) åˆ é™¤æ–‡ä»¶è·¯å¾„# os.utime(path, times) è¿”å›æŒ‡å®šçš„pathæ–‡ä»¶çš„è®¿é—®å’Œä¿®æ”¹çš„æ—¶é—´ã€‚# os.walk(top[, topdown=True[, onerror=None[, followlinks=False]]]) è¾“å‡ºåœ¨æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶åé€šè¿‡åœ¨æ ‘ä¸­æ¸¸èµ°ï¼Œå‘ä¸Šæˆ–è€…å‘ä¸‹ã€‚# os.write(fd, str) å†™å…¥å­—ç¬¦ä¸²åˆ°æ–‡ä»¶æè¿°ç¬¦ fdä¸­. è¿”å›å®é™…å†™å…¥çš„å­—ç¬¦ä¸²é•¿åº¦# os.path æ¨¡å— è·å–æ–‡ä»¶çš„å±æ€§ä¿¡æ¯ã€‚# os.pardir() è·å–å½“å‰ç›®å½•çš„çˆ¶ç›®å½•ï¼Œä»¥å­—ç¬¦ä¸²å½¢å¼æ˜¾ç¤ºç›®å½•åã€‚ è¯­æ³•é”™è¯¯å’Œå¼‚å¸¸ 1234567891011121314151617181920212223242526&quot;&quot;&quot;è¯­æ³•é”™è¯¯å’Œå¼‚å¸¸&quot;&quot;&quot;# è¯­æ³•é”™è¯¯ SyntaxError# å¼‚å¸¸ ZeroDivisionErrorï¼ŒNameError å’Œ TypeError# å¼‚å¸¸å¤„ç†# ---try/except---# ä¸€ä¸ªexceptå­å¥å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªå¼‚å¸¸ï¼Œè¿™äº›å¼‚å¸¸å°†è¢«æ”¾åœ¨ä¸€ä¸ªæ‹¬å·é‡Œæˆä¸ºä¸€ä¸ªå…ƒç»„ï¼Œä¾‹å¦‚:# except (RuntimeError, TypeError, NameError):while True: try: x = int(input(&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—: &quot;)) break except ValueError: print(&quot;æ‚¨è¾“å…¥çš„ä¸æ˜¯æ•°å­—ï¼Œè¯·å†æ¬¡å°è¯•è¾“å…¥ï¼&quot;)# ----try/except...else---else å­å¥å°†åœ¨ try å­å¥æ²¡æœ‰å‘ç”Ÿä»»ä½•å¼‚å¸¸çš„æ—¶å€™æ‰§è¡Œ# ---try-finally----# æŠ›å‡ºå¼‚å¸¸ raise [Exception [, args [, traceback]]]x = 10if x &gt; 5: raise Exception('x ä¸èƒ½å¤§äº 5ã€‚x çš„å€¼ä¸º: {}'.format(x))# ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„å¼‚å¸¸ç±»æ¥æ‹¥æœ‰è‡ªå·±çš„å¼‚å¸¸ã€‚å¼‚å¸¸ç±»ç»§æ‰¿è‡ª Exception ç±»ï¼Œå¯ä»¥ç›´æ¥ç»§æ‰¿ï¼Œæˆ–è€…é—´æ¥ç»§æ‰¿# with è¯­å¥å°±å¯ä»¥ä¿è¯è¯¸å¦‚æ–‡ä»¶ä¹‹ç±»çš„å¯¹è±¡åœ¨ä½¿ç”¨å®Œä¹‹åä¸€å®šä¼šæ­£ç¡®çš„æ‰§è¡Œä»–çš„æ¸…ç†æ–¹æ³•with open(&quot;myfile.txt&quot;) as f: for line in f: print(line, end=&quot;&quot;) Mysql 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273import mysql.connector# python -m pip install mysql-connector å®‰è£…è¿æ¥é©±åŠ¨# python -m pip install mysql-connector-python# pip uninstall mysql-connector å¸è½½mydb = mysql.connector.connect( host=&quot;localhost&quot;, # æ•°æ®åº“ä¸»æœºåœ°å€ user=&quot;root&quot;, # æ•°æ®åº“ç”¨æˆ·å passwd=&quot;root&quot; # æ•°æ®åº“å¯†ç  # auth_plugin='mysql_native_password' # database=&quot;runoob_db&quot; #æœ‰åˆ™ç›´æ¥è¿æ¥æ•°æ®åº“)print(mydb)# åˆ›å»ºæ•°æ®åº“mycursor = mydb.cursor()mycursor.execute(&quot;CREATE DATABASE runoob_db&quot;)# è¾“å‡ºæ‰€æœ‰æ•°æ®åº“åˆ—è¡¨mycursor.execute(&quot;SHOW DATABASES&quot;)for x in mycursor: print(x)# åˆ›å»ºè¡¨mycursor.execute(&quot;CREATE TABLE sites (name VARCHAR(255), url VARCHAR(255))&quot;)# mycursor.execute(sqlè¯­å¥)# å¢sql = &quot;INSERT INTO sites (name, url) VALUES (%s, %s)&quot;val = (&quot;RUNOOB&quot;, &quot;https://www.runoob.com&quot;)mycursor.execute(sql, val)mydb.commit() # æ•°æ®è¡¨å†…å®¹æœ‰æ›´æ–°ï¼Œå¿…é¡»ä½¿ç”¨åˆ°è¯¥è¯­å¥print(mycursor.rowcount, &quot;è®°å½•æ’å…¥æˆåŠŸã€‚&quot;)# æ‰¹é‡å¢sql = &quot;INSERT INTO sites (name, url) VALUES (%s, %s)&quot;val = [ ('Google', 'https://www.google.com'), ('Github', 'https://www.github.com'), ('Taobao', 'https://www.taobao.com'), ('stackoverflow', 'https://www.stackoverflow.com/')]mycursor.executemany(sql, val)mydb.commit() # æ•°æ®è¡¨å†…å®¹æœ‰æ›´æ–°ï¼Œå¿…é¡»ä½¿ç”¨åˆ°è¯¥è¯­å¥print(mycursor.rowcount, &quot;è®°å½•æ’å…¥æˆåŠŸ, ID:&quot;, mycursor.lastrowid)# æŸ¥mycursor.execute(&quot;SELECT * FROM sites&quot;)myresult = mycursor.fetchall() # fetchall() è·å–æ‰€æœ‰è®°å½•myresult = mycursor.fetchone() #è·å–ä¸€æ¡for x in myresult: print(x)# é˜²sqlæ³¨å…¥sql = &quot;SELECT * FROM sites WHERE name = %s&quot;na = (&quot;RUNOOB&quot;,)mycursor.execute(sql, na)myresult = mycursor.fetchall()for x in myresult: print(x)#åˆ sql = &quot;DELETE FROM sites WHERE name = 'stackoverflow'&quot;mycursor.execute(sql)mydb.commit()print(mycursor.rowcount, &quot; æ¡è®°å½•åˆ é™¤&quot;)# æ”¹sql = &quot;UPDATE sites SET name = 'ZH' WHERE name = 'Zhihu'&quot;mycursor.execute(sql)mydb.commit()print(mycursor.rowcount, &quot; æ¡è®°å½•è¢«ä¿®æ”¹&quot;) ç½‘ç»œç¼–ç¨‹ 123456789101112131415161718192021222324252627282930313233343536373839&quot;&quot;&quot;ç½‘ç»œç¼–ç¨‹&quot;&quot;&quot;# ä½çº§åˆ«çš„ç½‘ç»œæœåŠ¡æ”¯æŒåŸºæœ¬çš„ Socketï¼Œå®ƒæä¾›äº†æ ‡å‡†çš„ BSD Sockets APIï¼Œå¯ä»¥è®¿é—®åº•å±‚æ“ä½œç³»ç»Ÿ Socket æ¥å£çš„å…¨éƒ¨æ–¹æ³•ã€‚# é«˜çº§åˆ«çš„ç½‘ç»œæœåŠ¡æ¨¡å— SocketServerï¼Œ å®ƒæä¾›äº†æœåŠ¡å™¨ä¸­å¿ƒç±»ï¼Œå¯ä»¥ç®€åŒ–ç½‘ç»œæœåŠ¡å™¨çš„å¼€å‘ã€‚# socket()# socket.socket([family[, type[, proto]]])# family: å¥—æ¥å­—å®¶æ—å¯ä»¥ä½¿ AF_UNIX æˆ–è€… AF_INETã€‚# type:å¥—æ¥å­—ç±»å‹å¯ä»¥æ ¹æ®æ˜¯é¢å‘è¿æ¥çš„è¿˜æ˜¯éè¿æ¥åˆ†ä¸ºSOCK_STREAMæˆ–SOCK_DGRAMã€‚# protocol: ä¸€èˆ¬ä¸å¡«é»˜è®¤ä¸º 0ã€‚# Socket å¯¹è±¡(å†…å»º)æ–¹æ³•# å‡½æ•° æè¿°# æœåŠ¡å™¨ç«¯å¥—æ¥å­—-----------# s.bind() ç»‘å®šåœ°å€ï¼ˆhost,portï¼‰åˆ°å¥—æ¥å­—ï¼Œ åœ¨ AF_INETä¸‹ï¼Œä»¥å…ƒç»„ï¼ˆhost,portï¼‰çš„å½¢å¼è¡¨ç¤ºåœ°å€ã€‚# s.listen() å¼€å§‹ TCP ç›‘å¬ã€‚backlog æŒ‡å®šåœ¨æ‹’ç»è¿æ¥ä¹‹å‰ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥æŒ‚èµ·çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚è¯¥å€¼è‡³å°‘ä¸º 1ï¼Œå¤§éƒ¨åˆ†åº”ç”¨ç¨‹åºè®¾ä¸º 5 å°±å¯ä»¥äº†ã€‚# s.accept() è¢«åŠ¨æ¥å—TCPå®¢æˆ·ç«¯è¿æ¥,(é˜»å¡å¼)ç­‰å¾…è¿æ¥çš„åˆ°æ¥# å®¢æˆ·ç«¯å¥—æ¥å­—-----------# s.connect() ä¸»åŠ¨åˆå§‹åŒ–TCPæœåŠ¡å™¨è¿æ¥ï¼Œã€‚ä¸€èˆ¬addressçš„æ ¼å¼ä¸ºå…ƒç»„ï¼ˆhostname,portï¼‰ï¼Œå¦‚æœè¿æ¥å‡ºé”™ï¼Œè¿”å›socket.erroré”™è¯¯ã€‚# s.connect_ex() connect()å‡½æ•°çš„æ‰©å±•ç‰ˆæœ¬,å‡ºé”™æ—¶è¿”å›å‡ºé”™ç ,è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸# å…¬å…±ç”¨é€”çš„å¥—æ¥å­—å‡½æ•°----------# s.recv() æ¥æ”¶ TCP æ•°æ®ï¼Œæ•°æ®ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›ï¼Œbufsize æŒ‡å®šè¦æ¥æ”¶çš„æœ€å¤§æ•°æ®é‡ã€‚flag æä¾›æœ‰å…³æ¶ˆæ¯çš„å…¶ä»–ä¿¡æ¯ï¼Œé€šå¸¸å¯ä»¥å¿½ç•¥ã€‚# s.send() å‘é€ TCP æ•°æ®ï¼Œå°† string ä¸­çš„æ•°æ®å‘é€åˆ°è¿æ¥çš„å¥—æ¥å­—ã€‚è¿”å›å€¼æ˜¯è¦å‘é€çš„å­—èŠ‚æ•°é‡ï¼Œè¯¥æ•°é‡å¯èƒ½å°äº string çš„å­—èŠ‚å¤§å°ã€‚# s.sendall() å®Œæ•´å‘é€ TCP æ•°æ®ã€‚å°† string ä¸­çš„æ•°æ®å‘é€åˆ°è¿æ¥çš„å¥—æ¥å­—ï¼Œä½†åœ¨è¿”å›ä¹‹å‰ä¼šå°è¯•å‘é€æ‰€æœ‰æ•°æ®ã€‚æˆåŠŸè¿”å› Noneï¼Œå¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚# s.recvfrom() æ¥æ”¶ UDP æ•°æ®ï¼Œä¸ recv() ç±»ä¼¼ï¼Œä½†è¿”å›å€¼æ˜¯ï¼ˆdata,addressï¼‰ã€‚å…¶ä¸­ data æ˜¯åŒ…å«æ¥æ”¶æ•°æ®çš„å­—ç¬¦ä¸²ï¼Œaddress æ˜¯å‘é€æ•°æ®çš„å¥—æ¥å­—åœ°å€ã€‚# s.sendto() å‘é€ UDP æ•°æ®ï¼Œå°†æ•°æ®å‘é€åˆ°å¥—æ¥å­—ï¼Œaddress æ˜¯å½¢å¼ä¸ºï¼ˆipaddrï¼Œportï¼‰çš„å…ƒç»„ï¼ŒæŒ‡å®šè¿œç¨‹åœ°å€ã€‚è¿”å›å€¼æ˜¯å‘é€çš„å­—èŠ‚æ•°ã€‚# s.close() å…³é—­å¥—æ¥å­—# s.getpeername() è¿”å›è¿æ¥å¥—æ¥å­—çš„è¿œç¨‹åœ°å€ã€‚è¿”å›å€¼é€šå¸¸æ˜¯å…ƒç»„ï¼ˆipaddr,portï¼‰ã€‚# s.getsockname() è¿”å›å¥—æ¥å­—è‡ªå·±çš„åœ°å€ã€‚é€šå¸¸æ˜¯ä¸€ä¸ªå…ƒç»„(ipaddr,port)# s.setsockopt(level,optname,value) è®¾ç½®ç»™å®šå¥—æ¥å­—é€‰é¡¹çš„å€¼ã€‚# s.getsockopt(level,optname[.buflen]) è¿”å›å¥—æ¥å­—é€‰é¡¹çš„å€¼ã€‚# s.settimeout(timeout) è®¾ç½®å¥—æ¥å­—æ“ä½œçš„è¶…æ—¶æœŸï¼Œtimeoutæ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œå•ä½æ˜¯ç§’ã€‚å€¼ä¸ºNoneè¡¨ç¤ºæ²¡æœ‰è¶…æ—¶æœŸã€‚ä¸€èˆ¬ï¼Œè¶…æ—¶æœŸåº”è¯¥åœ¨åˆšåˆ›å»ºå¥—æ¥å­—æ—¶è®¾ç½®ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½ç”¨äºè¿æ¥çš„æ“ä½œï¼ˆå¦‚connect()ï¼‰# s.gettimeout() è¿”å›å½“å‰è¶…æ—¶æœŸçš„å€¼ï¼Œå•ä½æ˜¯ç§’ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¶…æ—¶æœŸï¼Œåˆ™è¿”å›Noneã€‚# s.fileno() è¿”å›å¥—æ¥å­—çš„æ–‡ä»¶æè¿°ç¬¦ã€‚# s.setblocking(flag) å¦‚æœflagä¸º0ï¼Œåˆ™å°†å¥—æ¥å­—è®¾ä¸ºéé˜»å¡æ¨¡å¼ï¼Œå¦åˆ™å°†å¥—æ¥å­—è®¾ä¸ºé˜»å¡æ¨¡å¼ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚éé˜»å¡æ¨¡å¼ä¸‹ï¼Œå¦‚æœè°ƒç”¨recv()æ²¡æœ‰å‘ç°ä»»ä½•æ•°æ®ï¼Œæˆ–send()è°ƒç”¨æ— æ³•ç«‹å³å‘é€æ•°æ®ï¼Œé‚£ä¹ˆå°†å¼•èµ·socket.errorå¼‚å¸¸ã€‚# s.makefile() åˆ›å»ºä¸€ä¸ªä¸è¯¥å¥—æ¥å­—ç›¸å…³è¿çš„æ–‡ä»¶ 123456789101112131415161718192021import socketimport sys# åˆ›å»º socket å¯¹è±¡s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)# è·å–æœ¬åœ°ä¸»æœºåhost = socket.gethostname()# è®¾ç½®ç«¯å£å·port = 9999# è¿æ¥æœåŠ¡ï¼ŒæŒ‡å®šä¸»æœºå’Œç«¯å£s.connect((host, port))# æ¥æ”¶å°äº 1024 å­—èŠ‚çš„æ•°æ®msg = s.recv(1024)s.close()print (msg.decode('utf-8')) 123456789101112131415161718192021222324252627import socketimport sys# åˆ›å»º socket å¯¹è±¡serversocket = socket.socket( socket.AF_INET, socket.SOCK_STREAM)# è·å–æœ¬åœ°ä¸»æœºåhost = socket.gethostname()port = 9999# ç»‘å®šç«¯å£å·serversocket.bind((host, port))# è®¾ç½®æœ€å¤§è¿æ¥æ•°ï¼Œè¶…è¿‡åæ’é˜Ÿserversocket.listen(5)while True: # å»ºç«‹å®¢æˆ·ç«¯è¿æ¥ clientsocket, addr = serversocket.accept() print(&quot;è¿æ¥åœ°å€: %s&quot; % str(addr)) msg = 'æ¬¢è¿è®¿é—®èœé¸Ÿæ•™ç¨‹ï¼' + &quot;\\r\\n&quot; clientsocket.send(msg.encode('utf-8')) clientsocket.close() SMTP 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101&quot;&quot;&quot;SMTP&quot;&quot;&quot;# SMTPï¼ˆSimple Mail Transfer Protocolï¼‰å³ç®€å•é‚®ä»¶ä¼ è¾“åè®®,å®ƒæ˜¯ä¸€ç»„ç”¨äºç”±æºåœ°å€åˆ°ç›®çš„åœ°å€ä¼ é€é‚®ä»¶çš„è§„åˆ™ï¼Œç”±å®ƒæ¥æ§åˆ¶ä¿¡ä»¶çš„ä¸­è½¬æ–¹å¼ã€‚# pythonçš„smtplibæä¾›äº†ä¸€ç§å¾ˆæ–¹ä¾¿çš„é€”å¾„å‘é€ç”µå­é‚®ä»¶ã€‚å®ƒå¯¹smtpåè®®è¿›è¡Œäº†ç®€å•çš„å°è£…ã€‚# Pythonåˆ›å»º SMTP å¯¹è±¡è¯­æ³•å¦‚ä¸‹ï¼š# import smtplib# smtpObj = smtplib.SMTP( [host [, port [, local_hostname]]] )# å‚æ•°è¯´æ˜ï¼š# host: SMTP æœåŠ¡å™¨ä¸»æœºã€‚ ä½ å¯ä»¥æŒ‡å®šä¸»æœºçš„ipåœ°å€æˆ–è€…åŸŸåå¦‚:runoob.comï¼Œè¿™ä¸ªæ˜¯å¯é€‰å‚æ•°ã€‚# port: å¦‚æœä½ æä¾›äº† host å‚æ•°, ä½ éœ€è¦æŒ‡å®š SMTP æœåŠ¡ä½¿ç”¨çš„ç«¯å£å·ï¼Œä¸€èˆ¬æƒ…å†µä¸‹SMTPç«¯å£å·ä¸º25ã€‚# local_hostname: å¦‚æœSMTPåœ¨ä½ çš„æœ¬æœºä¸Šï¼Œä½ åªéœ€è¦æŒ‡å®šæœåŠ¡å™¨åœ°å€ä¸º localhost å³å¯ã€‚# Python SMTPå¯¹è±¡ä½¿ç”¨sendmailæ–¹æ³•å‘é€é‚®ä»¶ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š# SMTP.sendmail(from_addr, to_addrs, msg[, mail_options, rcpt_options]# å‚æ•°è¯´æ˜ï¼š# from_addr: é‚®ä»¶å‘é€è€…åœ°å€ã€‚# to_addrs: å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œé‚®ä»¶å‘é€åœ°å€ã€‚# msg: å‘é€æ¶ˆæ¯# è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œmsgæ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºé‚®ä»¶ã€‚æˆ‘ä»¬çŸ¥é“é‚®ä»¶ä¸€èˆ¬ç”±æ ‡é¢˜ï¼Œå‘ä¿¡äººï¼Œæ”¶ä»¶äººï¼Œé‚®ä»¶å†…å®¹ï¼Œé™„ä»¶ç­‰æ„æˆï¼Œå‘é€é‚®ä»¶çš„æ—¶å€™ï¼Œè¦æ³¨æ„msgçš„æ ¼å¼ã€‚è¿™ä¸ªæ ¼å¼å°±æ˜¯smtpåè®®ä¸­å®šä¹‰çš„æ ¼å¼ã€‚import smtplibfrom email.mime.image import MIMEImagefrom email.mime.multipart import MIMEMultipartfrom email.mime.text import MIMETextfrom email.header import Headermy_sender='714416426@qq.com' # å‘ä»¶äººé‚®ç®±è´¦å·my_pass = '11111111' # å‘ä»¶äººé‚®ç®±å¯†ç my_user='714416426@qq.com' # æ”¶ä»¶äººé‚®ç®±è´¦å·ï¼Œæˆ‘è¿™è¾¹å‘é€ç»™è‡ªå·±sender = 'from@runoob.com'receivers = ['714416426@qq.com'] # æ¥æ”¶é‚®ä»¶ï¼Œå¯è®¾ç½®ä¸ºä½ çš„QQé‚®ç®±æˆ–è€…å…¶ä»–é‚®ç®±msgRoot = MIMEMultipart('related')msgRoot['From'] = Header(&quot;èœé¸Ÿæ•™ç¨‹&quot;, 'utf-8')msgRoot['To'] = Header(&quot;æµ‹è¯•&quot;, 'utf-8')subject = 'Python SMTP é‚®ä»¶æµ‹è¯•'msgRoot['Subject'] = Header(subject, 'utf-8')# å‘é€htmlå†…å®¹mail_msg = &quot;&quot;&quot;&lt;p&gt;Python é‚®ä»¶å‘é€æµ‹è¯•...&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://www.runoob.com&quot;&gt;è¿™æ˜¯ä¸€ä¸ªé“¾æ¥&lt;/a&gt;&lt;/p&gt;&quot;&quot;&quot;message = MIMEText(mail_msg, 'html', 'utf-8')# ä¸‰ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªä¸ºæ–‡æœ¬å†…å®¹ï¼Œç¬¬äºŒä¸ª plain è®¾ç½®æ–‡æœ¬æ ¼å¼ï¼Œç¬¬ä¸‰ä¸ª utf-8 è®¾ç½®ç¼–ç message = MIMEText('Python é‚®ä»¶å‘é€æµ‹è¯•...', 'plain', 'utf-8')message['From'] = Header(&quot;èœé¸Ÿæ•™ç¨‹&quot;, 'utf-8') # å‘é€è€…message['To'] = Header(&quot;æµ‹è¯•&quot;, 'utf-8') # æ¥æ”¶è€…subject = 'Python SMTP é‚®ä»¶æµ‹è¯•'message['Subject'] = Header(subject, 'utf-8')# å‘é€å¸¦é™„ä»¶å†…å®¹# # æ„é€ é™„ä»¶1ï¼Œä¼ é€å½“å‰ç›®å½•ä¸‹çš„ test.txt æ–‡ä»¶# att1 = MIMEText(open('test.txt', 'rb').read(), 'base64', 'utf-8')# att1[&quot;Content-Type&quot;] = 'application/octet-stream'# # è¿™é‡Œçš„filenameå¯ä»¥ä»»æ„å†™ï¼Œå†™ä»€ä¹ˆåå­—ï¼Œé‚®ä»¶ä¸­æ˜¾ç¤ºä»€ä¹ˆåå­—# att1[&quot;Content-Disposition&quot;] = 'attachment; filename=&quot;test.txt&quot;'# message.attach(att1)## # æ„é€ é™„ä»¶2ï¼Œä¼ é€å½“å‰ç›®å½•ä¸‹çš„ runoob.txt æ–‡ä»¶# att2 = MIMEText(open('runoob.txt', 'rb').read(), 'base64', 'utf-8')# att2[&quot;Content-Type&quot;] = 'application/octet-stream'# att2[&quot;Content-Disposition&quot;] = 'attachment; filename=&quot;runoob.txt&quot;'# message.attach(att2)# æ–‡æœ¬ä¸­æ·»åŠ å›¾ç‰‡# msgAlternative = MIMEMultipart('alternative')# msgRoot.attach(msgAlternative)# mail_msg = &quot;&quot;&quot;# &lt;p&gt;Python é‚®ä»¶å‘é€æµ‹è¯•...&lt;/p&gt;# &lt;p&gt;&lt;a href=&quot;http://www.runoob.com&quot;&gt;èœé¸Ÿæ•™ç¨‹é“¾æ¥&lt;/a&gt;&lt;/p&gt;# &lt;p&gt;å›¾ç‰‡æ¼”ç¤ºï¼š&lt;/p&gt;# &lt;p&gt;&lt;img src=&quot;cid:image1&quot;&gt;&lt;/p&gt;# &quot;&quot;&quot;# msgAlternative.attach(MIMEText(mail_msg, 'html', 'utf-8'))## # æŒ‡å®šå›¾ç‰‡ä¸ºå½“å‰ç›®å½•# fp = open('test.png', 'rb')# msgImage = MIMEImage(fp.read())# fp.close()## # å®šä¹‰å›¾ç‰‡ IDï¼Œåœ¨ HTML æ–‡æœ¬ä¸­å¼•ç”¨# msgImage.add_header('Content-ID', '&lt;image1&gt;')# msgRoot.attach(msgImage)try: smtpObj = smtplib.SMTP('localhost') smtpObj.sendmail(my_sender, receivers, message.as_string()) print(&quot;é‚®ä»¶å‘é€æˆåŠŸ&quot;)except smtplib.SMTPException: print(&quot;Error: æ— æ³•å‘é€é‚®ä»¶&quot;) å¤šçº¿ç¨‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101&quot;&quot;&quot;å¤šçº¿ç¨‹ï¼šå‡½æ•°æˆ–è€…ç”¨ç±»æ¥åŒ…è£…çº¿ç¨‹å¯¹è±¡&quot;&quot;&quot;# å‡½æ•°å¼ï¼šè°ƒç”¨threadæ¨¡å—ä¸­çš„start_new_thread()å‡½æ•°æ¥äº§ç”Ÿæ–°çº¿ç¨‹ã€‚è¯­æ³•å¦‚ä¸‹:# thread.start_new_thread ( function, args[, kwargs] )# å‚æ•°è¯´æ˜:# function - çº¿ç¨‹å‡½æ•°ã€‚# args - ä¼ é€’ç»™çº¿ç¨‹å‡½æ•°çš„å‚æ•°,ä»–å¿…é¡»æ˜¯ä¸ªtupleç±»å‹ã€‚# kwargs - å¯é€‰å‚æ•°ã€‚# ä¸¤ä¸ªæ¨¡å—# _thread# threading(æ¨èä½¿ç”¨)import _threadimport time# ä¸ºçº¿ç¨‹å®šä¹‰ä¸€ä¸ªå‡½æ•°def print_time( threadName, delay): count = 0 while count &lt; 5: time.sleep(delay) count += 1 print (&quot;%s: %s&quot; % ( threadName, time.ctime(time.time()) ))# åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹try: _thread.start_new_thread( print_time, (&quot;Thread-1&quot;, 2, ) ) _thread.start_new_thread( print_time, (&quot;Thread-2&quot;, 4, ) )except: print (&quot;Error: æ— æ³•å¯åŠ¨çº¿ç¨‹&quot;)while 1: pass# _thread æä¾›äº†ä½çº§åˆ«çš„ã€åŸå§‹çš„çº¿ç¨‹ä»¥åŠä¸€ä¸ªç®€å•çš„é”ï¼Œå®ƒç›¸æ¯”äº threading æ¨¡å—çš„åŠŸèƒ½è¿˜æ˜¯æ¯”è¾ƒæœ‰é™çš„ã€‚## threading æ¨¡å—é™¤äº†åŒ…å« _thread æ¨¡å—ä¸­çš„æ‰€æœ‰æ–¹æ³•å¤–ï¼Œè¿˜æä¾›çš„å…¶ä»–æ–¹æ³•ï¼š## threading.currentThread(): è¿”å›å½“å‰çš„çº¿ç¨‹å˜é‡ã€‚# threading.enumerate(): è¿”å›ä¸€ä¸ªåŒ…å«æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹çš„listã€‚æ­£åœ¨è¿è¡ŒæŒ‡çº¿ç¨‹å¯åŠ¨åã€ç»“æŸå‰ï¼Œä¸åŒ…æ‹¬å¯åŠ¨å‰å’Œç»ˆæ­¢åçš„çº¿ç¨‹ã€‚# threading.activeCount(): è¿”å›æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡ï¼Œä¸len(threading.enumerate())æœ‰ç›¸åŒçš„ç»“æœã€‚# é™¤äº†ä½¿ç”¨æ–¹æ³•å¤–ï¼Œçº¿ç¨‹æ¨¡å—åŒæ ·æä¾›äº†Threadç±»æ¥å¤„ç†çº¿ç¨‹ï¼ŒThreadç±»æä¾›äº†ä»¥ä¸‹æ–¹æ³•:## run(): ç”¨ä»¥è¡¨ç¤ºçº¿ç¨‹æ´»åŠ¨çš„æ–¹æ³•ã€‚# start():å¯åŠ¨çº¿ç¨‹æ´»åŠ¨ã€‚# join([time]): ç­‰å¾…è‡³çº¿ç¨‹ä¸­æ­¢ã€‚è¿™é˜»å¡è°ƒç”¨çº¿ç¨‹ç›´è‡³çº¿ç¨‹çš„join() æ–¹æ³•è¢«è°ƒç”¨ä¸­æ­¢-æ­£å¸¸é€€å‡ºæˆ–è€…æŠ›å‡ºæœªå¤„ç†çš„å¼‚å¸¸-æˆ–è€…æ˜¯å¯é€‰çš„è¶…æ—¶å‘ç”Ÿã€‚# isAlive(): è¿”å›çº¿ç¨‹æ˜¯å¦æ´»åŠ¨çš„ã€‚# getName(): è¿”å›çº¿ç¨‹åã€‚# setName(): è®¾ç½®çº¿ç¨‹åã€‚import threadingexitFlag = 0class myThread (threading.Thread): def __init__(self, threadID, name, counter): threading.Thread.__init__(self) self.threadID = threadID self.name = name self.counter = counter def run(self): print (&quot;å¼€å§‹çº¿ç¨‹ï¼š&quot; + self.name) print_time(self.name, self.counter, 5) print (&quot;é€€å‡ºçº¿ç¨‹ï¼š&quot; + self.name)def print_time(threadName, delay, counter): while counter: if exitFlag: threadName.exit() time.sleep(delay) print (&quot;%s: %s&quot; % (threadName, time.ctime(time.time()))) counter -= 1# åˆ›å»ºæ–°çº¿ç¨‹thread1 = myThread(1, &quot;Thread-1&quot;, 1)thread2 = myThread(2, &quot;Thread-2&quot;, 2)# å¼€å¯æ–°çº¿ç¨‹thread1.start()thread2.start()thread1.join()thread2.join()print (&quot;é€€å‡ºä¸»çº¿ç¨‹&quot;)# çº¿ç¨‹åŒæ­¥# ä½¿ç”¨ Thread å¯¹è±¡çš„ Lock å’Œ Rlock å¯ä»¥å®ç°ç®€å•çš„çº¿ç¨‹åŒæ­¥ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡éƒ½æœ‰ acquire æ–¹æ³•å’Œ release æ–¹æ³•ï¼Œå¯¹äºé‚£äº›éœ€è¦æ¯æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ“ä½œçš„æ•°æ®ï¼Œå¯ä»¥å°†å…¶æ“ä½œæ”¾åˆ° acquire å’Œ release æ–¹æ³•ä¹‹é—´# çº¿ç¨‹ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆ Queueï¼‰# Python çš„ Queue æ¨¡å—ä¸­æä¾›äº†åŒæ­¥çš„ã€çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—ç±»ï¼ŒåŒ…æ‹¬FIFOï¼ˆå…ˆå…¥å…ˆå‡º)é˜Ÿåˆ—Queueï¼ŒLIFOï¼ˆåå…¥å…ˆå‡ºï¼‰é˜Ÿåˆ—LifoQueueï¼Œå’Œä¼˜å…ˆçº§é˜Ÿåˆ— PriorityQueueã€‚# è¿™äº›é˜Ÿåˆ—éƒ½å®ç°äº†é”åŸè¯­ï¼Œèƒ½å¤Ÿåœ¨å¤šçº¿ç¨‹ä¸­ç›´æ¥ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨é˜Ÿåˆ—æ¥å®ç°çº¿ç¨‹é—´çš„åŒæ­¥ã€‚# Queue æ¨¡å—ä¸­çš„å¸¸ç”¨æ–¹æ³•:# Queue.qsize() è¿”å›é˜Ÿåˆ—çš„å¤§å°# Queue.empty() å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›True,åä¹‹False# Queue.full() å¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œè¿”å›True,åä¹‹False# Queue.full ä¸ maxsize å¤§å°å¯¹åº”# Queue.get([block[, timeout]])è·å–é˜Ÿåˆ—ï¼Œtimeoutç­‰å¾…æ—¶é—´# Queue.get_nowait() ç›¸å½“Queue.get(False)# Queue.put(item) å†™å…¥é˜Ÿåˆ—ï¼Œtimeoutç­‰å¾…æ—¶é—´# Queue.put_nowait(item) ç›¸å½“Queue.put(item, False)# Queue.task_done() åœ¨å®Œæˆä¸€é¡¹å·¥ä½œä¹‹åï¼ŒQueue.task_done()å‡½æ•°å‘ä»»åŠ¡å·²ç»å®Œæˆçš„é˜Ÿåˆ—å‘é€ä¸€ä¸ªä¿¡å·# Queue.join() å®é™…ä¸Šæ„å‘³ç€ç­‰åˆ°é˜Ÿåˆ—ä¸ºç©ºï¼Œå†æ‰§è¡Œåˆ«çš„æ“ä½œ urllib 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&quot;&quot;&quot;urllib åº“ç”¨äºæ“ä½œç½‘é¡µ URLï¼Œå¹¶å¯¹ç½‘é¡µçš„å†…å®¹è¿›è¡ŒæŠ“å–å¤„ç†ã€‚&quot;&quot;&quot;# urllib.request - æ‰“å¼€å’Œè¯»å– URLã€‚# urllib.error - åŒ…å« urllib.request æŠ›å‡ºçš„å¼‚å¸¸ã€‚# urllib.parse - è§£æ URLã€‚# urllib.robotparser - è§£æ robots.txt æ–‡ä»¶# urllib.request.urlopen(url, data=None, [timeout, ]*, cafile=None, capath=None, cadefault=False, context=None)# urlï¼šurl åœ°å€ã€‚# dataï¼šå‘é€åˆ°æœåŠ¡å™¨çš„å…¶ä»–æ•°æ®å¯¹è±¡ï¼Œé»˜è®¤ä¸º Noneã€‚# timeoutï¼šè®¾ç½®è®¿é—®è¶…æ—¶æ—¶é—´ã€‚# cafile å’Œ capathï¼šcafile ä¸º CA è¯ä¹¦ï¼Œ capath ä¸º CA è¯ä¹¦çš„è·¯å¾„ï¼Œä½¿ç”¨ HTTPS éœ€è¦ç”¨åˆ°ã€‚# cadefaultï¼šå·²ç»è¢«å¼ƒç”¨ã€‚# contextï¼šssl.SSLContextç±»å‹ï¼Œç”¨æ¥æŒ‡å®š SSL è®¾ç½®ã€‚from urllib.request import urlopenmyURL = urlopen(&quot;https://www.runoob.com/&quot;)print(myURL.read())print(myURL.read(600))print(myURL.readline())lines = myURL.readlines()for line in lines: print(line)print(myURL.getcode())f = open(&quot;runoob_urllib_test.html&quot;, &quot;wb&quot;)content = myURL.read() # è¯»å–ç½‘é¡µå†…å®¹f.write(content)f.close()import urllib.requestencode_url = urllib.request.quote(&quot;https://www.runoob.com/&quot;) # ç¼–ç print(encode_url)unencode_url = urllib.request.unquote(encode_url) # è§£ç print(unencode_url)# æ¨¡æ‹Ÿå¤´éƒ¨ä¿¡æ¯# class urllib.request.Request(url, data=None, headers={}, origin_req_host=None, unverifiable=False, method=None)# urlï¼šurl åœ°å€ã€‚# dataï¼šå‘é€åˆ°æœåŠ¡å™¨çš„å…¶ä»–æ•°æ®å¯¹è±¡ï¼Œé»˜è®¤ä¸º Noneã€‚# headersï¼šHTTP è¯·æ±‚çš„å¤´éƒ¨ä¿¡æ¯ï¼Œå­—å…¸æ ¼å¼ã€‚# origin_req_hostï¼šè¯·æ±‚çš„ä¸»æœºåœ°å€ï¼ŒIP æˆ–åŸŸåã€‚# unverifiableï¼šå¾ˆå°‘ç”¨æ•´ä¸ªå‚æ•°ï¼Œç”¨äºè®¾ç½®ç½‘é¡µæ˜¯å¦éœ€è¦éªŒè¯ï¼Œé»˜è®¤æ˜¯Falseã€‚ã€‚# methodï¼šè¯·æ±‚æ–¹æ³•ï¼Œ å¦‚ GETã€POSTã€DELETEã€PUTç­‰ã€‚import urllib.parseurl = 'https://www.runoob.com/?s=' # èœé¸Ÿæ•™ç¨‹æœç´¢é¡µé¢keyword = 'Python æ•™ç¨‹'key_code = urllib.request.quote(keyword) # å¯¹è¯·æ±‚è¿›è¡Œç¼–ç url_all = url+key_codeheader = { 'User-Agent':'Mozilla/5.0 (X11; Fedora; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36'} #å¤´éƒ¨ä¿¡æ¯request = urllib.request.Request(url_all,headers=header)reponse = urllib.request.urlopen(request).read()fh = open(&quot;./urllib_test_runoob_search.html&quot;,&quot;wb&quot;) # å°†æ–‡ä»¶å†™å…¥åˆ°å½“å‰ç›®å½•ä¸­fh.write(reponse)fh.close() XMLè§£æ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143&quot;&quot;&quot;XMLè§£æ&quot;&quot;&quot;# SAX æ˜¯ä¸€ç§åŸºäºäº‹ä»¶é©±åŠ¨çš„APIã€‚# åˆ©ç”¨ SAX è§£æ XML æ–‡æ¡£ç‰µæ¶‰åˆ°ä¸¤ä¸ªéƒ¨åˆ†: è§£æå™¨å’Œäº‹ä»¶å¤„ç†å™¨ã€‚# è§£æå™¨è´Ÿè´£è¯»å– XML æ–‡æ¡£ï¼Œå¹¶å‘äº‹ä»¶å¤„ç†å™¨å‘é€äº‹ä»¶ï¼Œå¦‚å…ƒç´ å¼€å§‹è·Ÿå…ƒç´ ç»“æŸäº‹ä»¶ã€‚# è€Œäº‹ä»¶å¤„ç†å™¨åˆ™è´Ÿè´£å¯¹äº‹ä»¶ä½œå‡ºå“åº”ï¼Œå¯¹ä¼ é€’çš„ XML æ•°æ®è¿›è¡Œå¤„ç†ã€‚# 1ã€å¯¹å¤§å‹æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼›# 2ã€åªéœ€è¦æ–‡ä»¶çš„éƒ¨åˆ†å†…å®¹ï¼Œæˆ–è€…åªéœ€ä»æ–‡ä»¶ä¸­å¾—åˆ°ç‰¹å®šä¿¡æ¯ã€‚# 3ã€æƒ³å»ºç«‹è‡ªå·±çš„å¯¹è±¡æ¨¡å‹çš„æ—¶å€™ã€‚# åœ¨ Python ä¸­ä½¿ç”¨ sax æ–¹å¼å¤„ç† xml è¦å…ˆå¼•å…¥ xml.sax ä¸­çš„ parse å‡½æ•°ï¼Œè¿˜æœ‰ xml.sax.handler ä¸­çš„ ContentHandlerã€‚# ContentHandler ç±»æ–¹æ³•ä»‹ç»# characters(content) æ–¹æ³•# è°ƒç”¨æ—¶æœºï¼š# ä»è¡Œå¼€å§‹ï¼Œé‡åˆ°æ ‡ç­¾ä¹‹å‰ï¼Œå­˜åœ¨å­—ç¬¦ï¼Œcontent çš„å€¼ä¸ºè¿™äº›å­—ç¬¦ä¸²ã€‚# ä»ä¸€ä¸ªæ ‡ç­¾ï¼Œé‡åˆ°ä¸‹ä¸€ä¸ªæ ‡ç­¾ä¹‹å‰ï¼Œ å­˜åœ¨å­—ç¬¦ï¼Œcontent çš„å€¼ä¸ºè¿™äº›å­—ç¬¦ä¸²ã€‚# ä»ä¸€ä¸ªæ ‡ç­¾ï¼Œé‡åˆ°è¡Œç»“æŸç¬¦ä¹‹å‰ï¼Œå­˜åœ¨å­—ç¬¦ï¼Œcontent çš„å€¼ä¸ºè¿™äº›å­—ç¬¦ä¸²ã€‚# æ ‡ç­¾å¯ä»¥æ˜¯å¼€å§‹æ ‡ç­¾ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»“æŸæ ‡ç­¾ã€‚# startDocument() æ–¹æ³•# æ–‡æ¡£å¯åŠ¨çš„æ—¶å€™è°ƒç”¨ã€‚# endDocument() æ–¹æ³•# è§£æå™¨åˆ°è¾¾æ–‡æ¡£ç»“å°¾æ—¶è°ƒç”¨ã€‚# startElement(name, attrs) æ–¹æ³•# é‡åˆ°XMLå¼€å§‹æ ‡ç­¾æ—¶è°ƒç”¨ï¼Œname æ˜¯æ ‡ç­¾çš„åå­—ï¼Œattrs æ˜¯æ ‡ç­¾çš„å±æ€§å€¼å­—å…¸ã€‚# endElement(name) æ–¹æ³•# é‡åˆ°XMLç»“æŸæ ‡ç­¾æ—¶è°ƒç”¨ã€‚# make_parser æ–¹æ³•# ä»¥ä¸‹æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„è§£æå™¨å¯¹è±¡å¹¶è¿”å›ã€‚# xml.sax.make_parser( [parser_list] )# å‚æ•°è¯´æ˜:# parser_list - å¯é€‰å‚æ•°ï¼Œè§£æå™¨åˆ—è¡¨# parser æ–¹æ³•# ä»¥ä¸‹æ–¹æ³•åˆ›å»ºä¸€ä¸ª SAX è§£æå™¨å¹¶è§£æxmlæ–‡æ¡£ï¼š# xml.sax.parse( xmlfile, contenthandler[, errorhandler])# å‚æ•°è¯´æ˜:# xmlfile - xmlæ–‡ä»¶å# contenthandler - å¿…é¡»æ˜¯ä¸€ä¸ª ContentHandler çš„å¯¹è±¡# errorhandler - å¦‚æœæŒ‡å®šè¯¥å‚æ•°ï¼Œerrorhandler å¿…é¡»æ˜¯ä¸€ä¸ª SAX ErrorHandler å¯¹è±¡# parseString æ–¹æ³•# parseString æ–¹æ³•åˆ›å»ºä¸€ä¸ª XML è§£æå™¨å¹¶è§£æ xml å­—ç¬¦ä¸²ï¼š# xml.sax.parseString(xmlstring, contenthandler[, errorhandler])# å‚æ•°è¯´æ˜:# xmlstring - xmlå­—ç¬¦ä¸²# contenthandler - å¿…é¡»æ˜¯ä¸€ä¸ª ContentHandler çš„å¯¹è±¡# errorhandler - å¦‚æœæŒ‡å®šè¯¥å‚æ•°ï¼Œerrorhandler å¿…é¡»æ˜¯ä¸€ä¸ª SAX ErrorHandlerå¯¹è±¡import xml.sax# from xml.dom.minidom import parse# import xml.dom.minidom# ä½¿ç”¨xml.domè§£æxml# æ–‡ä»¶å¯¹è±¡æ¨¡å‹ï¼ˆDocument Object Modelï¼Œç®€ç§°DOMï¼‰ï¼Œæ˜¯W3Cç»„ç»‡æ¨èçš„å¤„ç†å¯æ‰©å±•ç½®æ ‡è¯­è¨€çš„æ ‡å‡†ç¼–ç¨‹æ¥å£ã€‚# ä¸€ä¸ª DOM çš„è§£æå™¨åœ¨è§£æä¸€ä¸ª XML æ–‡æ¡£æ—¶ï¼Œä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªæ–‡æ¡£ï¼ŒæŠŠæ–‡æ¡£ä¸­æ‰€æœ‰å…ƒç´ ä¿å­˜åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªæ ‘ç»“æ„é‡Œï¼Œä¹‹åä½ å¯ä»¥åˆ©ç”¨DOM æä¾›çš„ä¸åŒçš„å‡½æ•°æ¥è¯»å–æˆ–ä¿®æ”¹æ–‡æ¡£çš„å†…å®¹å’Œç»“æ„ï¼Œä¹Ÿå¯ä»¥æŠŠä¿®æ”¹è¿‡çš„å†…å®¹å†™å…¥xmlæ–‡ä»¶ã€‚# pythonä¸­ç”¨xml.dom.minidomæ¥è§£æxmlæ–‡ä»¶# ä½¿ç”¨minidomè§£æå™¨æ‰“å¼€ XML æ–‡æ¡£# DOMTree = xml.dom.minidom.parse(&quot;movies.xml&quot;)# collection = DOMTree.documentElement# if collection.hasAttribute(&quot;shelf&quot;):# print (&quot;Root element : %s&quot; % collection.getAttribute(&quot;shelf&quot;))## # åœ¨é›†åˆä¸­è·å–æ‰€æœ‰ç”µå½±# movies = collection.getElementsByTagName(&quot;movie&quot;)## # æ‰“å°æ¯éƒ¨ç”µå½±çš„è¯¦ç»†ä¿¡æ¯# for movie in movies:# print (&quot;*****Movie*****&quot;)# if movie.hasAttribute(&quot;title&quot;):# print (&quot;Title: %s&quot; % movie.getAttribute(&quot;title&quot;))## type = movie.getElementsByTagName('type')[0]# print (&quot;Type: %s&quot; % type.childNodes[0].data)# format = movie.getElementsByTagName('format')[0]# print (&quot;Format: %s&quot; % format.childNodes[0].data)# rating = movie.getElementsByTagName('rating')[0]# print (&quot;Rating: %s&quot; % rating.childNodes[0].data)# description = movie.getElementsByTagName('description')[0]# print (&quot;Description: %s&quot; % description.childNodes[0].data)class MovieHandler(xml.sax.ContentHandler): def __init__(self): self.CurrentData = &quot;&quot; self.type = &quot;&quot; self.format = &quot;&quot; self.year = &quot;&quot; self.rating = &quot;&quot; self.stars = &quot;&quot; self.description = &quot;&quot; # å…ƒç´ å¼€å§‹è°ƒç”¨ def startElement(self, tag, attributes): self.CurrentData = tag if tag == &quot;movie&quot;: print(&quot;*****Movie*****&quot;) title = attributes[&quot;title&quot;] print(&quot;Title:&quot;, title) # å…ƒç´ ç»“æŸè°ƒç”¨ def endElement(self, tag): if self.CurrentData == &quot;type&quot;: print(&quot;Type:&quot;, self.type) elif self.CurrentData == &quot;format&quot;: print(&quot;Format:&quot;, self.format) elif self.CurrentData == &quot;year&quot;: print(&quot;Year:&quot;, self.year) elif self.CurrentData == &quot;rating&quot;: print(&quot;Rating:&quot;, self.rating) elif self.CurrentData == &quot;stars&quot;: print(&quot;Stars:&quot;, self.stars) elif self.CurrentData == &quot;description&quot;: print(&quot;Description:&quot;, self.description) self.CurrentData = &quot;&quot; # è¯»å–å­—ç¬¦æ—¶è°ƒç”¨ def characters(self, content): if self.CurrentData == &quot;type&quot;: self.type = content elif self.CurrentData == &quot;format&quot;: self.format = content elif self.CurrentData == &quot;year&quot;: self.year = content elif self.CurrentData == &quot;rating&quot;: self.rating = content elif self.CurrentData == &quot;stars&quot;: self.stars = content elif self.CurrentData == &quot;description&quot;: self.description = contentif (__name__ == &quot;__main__&quot;): # åˆ›å»ºä¸€ä¸ª XMLReader parser = xml.sax.make_parser() # å…³é—­å‘½åç©ºé—´ parser.setFeature(xml.sax.handler.feature_namespaces, 0) # é‡å†™ ContextHandler Handler = MovieHandler() parser.setContentHandler(Handler) parser.parse(&quot;movies.xml&quot;) åº”ç”¨é¢†åŸŸ Web and Internet Development Database Access Desktop GUIs Scientific &amp; Numeric Education Network Programming Software &amp; Game Development çˆ¬è™« WEBå¼€å‘ å›¾å½¢å¤„ç† æ·±åº¦å­¦ä¹  æ•°æ®åˆ†æ","link":"/2022/03/10/Draft/2021/Python3%E5%AD%A6%E4%B9%A0/"},{"title":"Spring","text":"Spring5 è½»é‡çº§çš„å¼€æºçš„ JavaEE æ¡†æ¶ è¿›åº¦ã€55ï¼ŒWebfluxã€‘ æºç è§£æç¬”è®°åŠ å…¥ è¿›åº¦ã€ã€‘ ç»¼åˆé—®é¢˜ [IOC?DI?AOP?](#IOCã€Inversion of Controlã€‘) BeanFactory å’Œ ApplicationContextåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ä»€ä¹ˆæ˜¯beanï¼Ÿä½œç”¨åŸŸï¼Ÿç”Ÿå‘½å‘¨æœŸï¼Ÿæ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Ÿ Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿä¼ æ’­è¡Œä¸ºï¼Ÿäº‹åŠ¡éš”ç¦»ï¼Ÿç›¸å…³æ³¨è§£ï¼Ÿ AOPåè¯æœ‰å“ªäº›ï¼ŸåŠ¨æ€ä»£ç†ï¼Ÿ å¸¸ç”¨æ³¨è§£ï¼Ÿ Springä¸­è®¾è®¡æ¨¡å¼ï¼ˆå·¥å‚ï¼Œä»£ç†ï¼‰ Spring5æ¡†æ¶æ¦‚è¿° 1ã€Spring æ˜¯è½»é‡çº§çš„å¼€æºçš„ JavaEE æ¡†æ¶ 2ã€Spring å¯ä»¥è§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§ 3ã€Spring æœ‰ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼šIOC å’ŒAOP ï¼ˆ1ï¼‰ IOCã€Inversion of Controlã€‘ï¼šæ§åˆ¶åè½¬ï¼ŒæŠŠåˆ›å»ºå¯¹è±¡è¿‡ç¨‹äº¤ç»™ Spring è¿›è¡Œç®¡ç† ï¼ˆ2ï¼‰ Aopã€Aspect Oriented Programmingã€‘ï¼šé¢å‘åˆ‡é¢ï¼Œä¸ä¿®æ”¹æºä»£ç è¿›è¡ŒåŠŸèƒ½å¢å¼º 4ã€Spring ç‰¹ç‚¹ ï¼ˆ1ï¼‰ æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ ï¼ˆ2ï¼‰ Aop ç¼–ç¨‹æ”¯æŒ ï¼ˆ3ï¼‰ æ–¹ä¾¿ç¨‹åºæµ‹è¯• ï¼ˆ4ï¼‰ æ–¹ä¾¿å’Œå…¶ä»–æ¡†æ¶è¿›è¡Œæ•´åˆ ï¼ˆ5ï¼‰ æ–¹ä¾¿è¿›è¡Œäº‹åŠ¡æ“ä½œ ï¼ˆ6ï¼‰ é™ä½ API å¼€å‘éš¾åº¦ ç›¸å…³èµ„æº å®˜ç½‘ ç‰ˆæœ¬è¯´æ˜ï¼š snapshot å¿«ç…§ alpha å†…æµ‹ beta å…¬æµ‹ release ç¨³å®šç‰ˆæœ¬ GA æœ€ç¨³å®šç‰ˆæœ¬ Final æ­£å¼ç‰ˆ Pro(professional) ä¸“ä¸šç‰ˆ Plus åŠ å¼ºç‰ˆ Retail é›¶å”®ç‰ˆ DEMO æ¼”ç¤ºç‰ˆ Build å†…éƒ¨æ ‡å· Delux è±ªåç‰ˆ (deluxeï¼šè±ªåçš„ï¼Œåä¸½çš„) Corporationæˆ–Enterpraise ä¼ä¸šç‰ˆ M1 M2 M3 Mæ˜¯milestoneçš„ç®€å†™ é‡Œç¨‹ç¢‘çš„æ„æ€ RC ç‰ˆæœ¬RC:(Release Candidate)ï¼Œå‡ ä¹å°±ä¸ä¼šåŠ å…¥æ–°çš„åŠŸèƒ½äº†ï¼Œè€Œä¸»è¦ç€é‡äºé™¤é”™ SR ä¿®æ­£ç‰ˆ Trial è¯•ç”¨ç‰ˆ Shareware å…±äº«ç‰ˆ Full å®Œå…¨ç‰ˆ ä¸‹è½½ï¼š https://repo.spring.io/ui/native/release https://repo.spring.io/ui/native/release/org/springframework/spring æ³¨ï¼šæœ¬æ–‡æ¡£ä½¿ç”¨5.2.6 åˆ›å»ºæ™®é€šå·¥ç¨‹ æ–°å»ºé¡¹ç›® å¼•å…¥ä¾èµ– å¯¹åº” Coreä¸­å››ä¸ªåŒ…å¼•å…¥ï¼Œä»¥åŠcommons-logging-1.1.1.jar æ–°å»ºlibæ–‡ä»¶å¤¹å¹¶å¼•å…¥jaråŒ… åˆ›å»ºæµ‹è¯•ç±» 12345public class User { public void Add(){ System.out.println(&quot;add.......&quot;); }} åˆ›å»ºXML 123456789&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--é…ç½®Userå¯¹è±¡åˆ›å»º--&gt; &lt;bean id=&quot;user&quot; class=&quot;com.lxl.spring5.User&quot;&gt;&lt;/bean&gt;&lt;/beans&gt; æµ‹è¯•ä»£ç  123456789101112131415161718192021222324252627282930package com.lxl.spring5.testdemo;import com.lxl.spring5.User;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;import org.springframework.context.support.FileSystemXmlApplicationContext;public class TestSpring5 { @Test public void testAdd(){//1 åŠ è½½ spring é…ç½®æ–‡ä»¶// ClassPathXmlApplicationContext() web src ä¸‹é…ç½®æ–‡ä»¶// FileSystemXmlApplicationContext() æŒ‡å®šç›˜ç¬¦è·¯å¾„é…ç½®æ–‡ä»¶ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean1.xml&quot;); //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼Œuserä¸ºé…ç½®æ–‡ä»¶ä¸­id User user = context.getBean(&quot;user&quot;, User.class); System.out.println(user); user.add(); }}ç»“æœï¼šcom.intellij.rt.junit.JUnitStarter -ideVersion5 com.lxl.spring5.testdemo.TestSpring5,testAddcom.lxl.spring5.User@46daef40add.......Process finished with exit code 0 IOCã€Inversion of Controlã€‘ æ¦‚å¿µåŸç† æ¦‚å¿µ ï¼ˆ1ï¼‰ æ§åˆ¶åè½¬ï¼ŒæŠŠå¯¹è±¡åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨è¿‡ç¨‹ï¼Œäº¤ç»™ Spring è¿›è¡Œç®¡ç† ï¼ˆ2ï¼‰ ä½¿ç”¨ IOC ç›®çš„ï¼šä¸ºäº†è€¦åˆåº¦é™ä½ï¼ˆæ”¹ï¼‰ ï¼ˆ3ï¼‰ ä¸Šé¢å…¥é—¨æ¡ˆä¾‹å°±æ˜¯ IOC å®ç° åŸç† xml è§£æã€å·¥å‚æ¨¡å¼ã€åå°„ åº•å±‚ ä¼˜åŒ–1 newå¯¹è±¡---ã€‹å·¥å‚æ¨¡å¼åˆ›å»ºï¼ˆè®©åˆ›å»ºç±»ä¸è¢«åˆ›å»ºç±»ä¸è€¦åˆï¼Œæ¯”å¦‚è¢«åˆ›å»ºç±»åœ°å€æ”¹å˜åˆ›å»ºç±»å¿…é¡»æ”¹å˜ï¼‰ ä¼˜åŒ–2 è§£æXML--ã€‹åå°„åˆ›å»ºå¯¹è±¡ IOCå®¹å™¨ 1ã€IOCæ€æƒ³åŸºäºIOCå®¹å™¨å®Œæˆï¼ŒIOCå®¹å™¨åº•å±‚å°±æ˜¯å¯¹è±¡å·¥å‚ 2ã€Springæä¾›IOCå®¹å™¨å®ç°ä¸¤ç§æ–¹å¼ï¼šï¼ˆä¸¤ä¸ªæ¥å£ï¼‰ ï¼ˆ1ï¼‰BeanFactoryï¼šIOCå®¹å™¨åŸºæœ¬å®ç°ï¼Œæ˜¯Springå†…éƒ¨çš„ä½¿ç”¨æ¥å£ï¼Œä¸æä¾›å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨ã€‚åŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™ä¸åˆ›å»ºå¯¹è±¡ï¼Œåœ¨è·å–å¯¹è±¡ï¼ˆä½¿ç”¨ï¼‰æ‰å»åˆ›å»ºå¯¹è±¡ ï¼ˆ2ï¼‰ApplicationContextï¼šBeanFactoryæ¥å£çš„å­æ¥å£ï¼Œæä¾›æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œä¸€èˆ¬ç”±å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨ã€‚åŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šæŠŠåœ¨é…ç½®æ–‡ä»¶å¯¹è±¡è¿›è¡Œåˆ›å»ºï¼ŒæœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œå¯¹webè¿è¡Œæ—¶æ•ˆæœæ›´å¥½ã€‚ æŸ¥çœ‹å®ç°ç±»ï¼ˆCtrl+Hï¼‰ ApplicationContextï¼š IOCæ“ä½œBeanç®¡ç† 1ã€ä»€ä¹ˆæ˜¯Beanç®¡ç† Beanç®¡ç†æŒ‡çš„æ˜¯ä¸¤ä¸ªæ“ä½œ ï¼ˆ1ï¼‰Springåˆ›å»ºå¯¹è±¡ ï¼ˆ2ï¼‰Spirngæ³¨å…¥å±æ€§ 2ã€Beanç®¡ç†æ“ä½œæœ‰ä¸¤ç§æ–¹å¼ ï¼ˆ1ï¼‰xmlé…ç½®æ–‡ä»¶æ–¹å¼ 1ã€åŸºäºxmlæ–¹å¼åˆ›å»ºå¯¹è±¡ 12345678910111213141516&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--é…ç½®Userå¯¹è±¡åˆ›å»º ï¼ˆ1ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨beanæ ‡ç­¾ï¼Œæ ‡ç­¾é‡Œé¢æ·»åŠ å¯¹åº”å±æ€§ï¼Œå°±å¯ä»¥å®ç°å¯¹è±¡åˆ›å»º ï¼ˆ2ï¼‰åœ¨beanæ ‡ç­¾æœ‰å¾ˆå¤šå±æ€§ï¼Œä»‹ç»å¸¸ç”¨çš„å±æ€§ * idå±æ€§ï¼šå”¯ä¸€æ ‡è¯†ï¼Œä¸å¯åŠ ç‰¹æ®Šå­—ç¬¦ * name :å”¯ä¸€è¡¨ç¤ºï¼Œå¯åŠ ç‰¹æ®Šå­—ç¬¦ * classå±æ€§ï¼šç±»å…¨è·¯å¾„ï¼ˆåŒ…ç±»è·¯å¾„ï¼‰ ï¼ˆ3ï¼‰åˆ›å»ºå¯¹è±¡æ—¶å€™ï¼Œé»˜è®¤ä¹Ÿæ˜¯æ‰§è¡Œæ— å‚æ•°æ„é€ æ–¹æ³•å®Œæˆå¯¹è±¡åˆ›å»º --&gt; &lt;bean id=&quot;user&quot; class=&quot;com.lxl.spring5.User&quot;&gt;&lt;/bean&gt;&lt;/beans&gt; 2ã€åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§ â€‹ DIï¼šä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯æ³¨å…¥å±æ€§,IOCçš„ä¸€ç§å…·ä½“å®ç°ï¼Œæ³¨å…¥å±æ€§éœ€è¦åœ¨åˆ›å»ºå¯¹è±¡çš„åŸºç¡€ä¹‹ä¸Šå®Œæˆã€‚ 2.1setæ–¹æ³•è¿›è¡Œæ³¨å…¥ åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§å’Œå¯¹åº”çš„setæ–¹æ³• 123456789101112131415public class Book { //åˆ›å»ºå±æ€§ private String bname; private String bauthor; //setæ–¹æ³•è¿›è¡Œæ³¨å…¥å±æ€§ public void setBname(String bname) { this.bname = bname; } public void setBauthor(String bauthor) { this.bauthor = bauthor; }} åœ¨springé…ç½®æ–‡ä»¶é…ç½®å¯¹è±¡åˆ›å»ºï¼Œé…ç½®å±æ€§æ³¨å…¥ 1234567&lt;!--=========================setæ–¹æ³•æ³¨å…¥å±æ€§=============================================--&gt; &lt;!--2 setæ–¹æ³•æ³¨å…¥å±æ€§--&gt; &lt;bean id=&quot;book&quot; class=&quot;com.lxl.spring5.Book&quot;&gt; &lt;!--ä½¿ç”¨propertyå®Œæˆå±æ€§æ³¨å…¥ nameï¼šç±»é‡Œé¢å±æ€§åç§° valueï¼šå‘å±æ€§æ³¨å…¥çš„å€¼ --&gt; &lt;property name=&quot;bname&quot; value=&quot;æ˜“ç­‹ç»&quot;&gt;&lt;/property&gt; &lt;property name=&quot;bauthor&quot; value=&quot;è¾¾æ‘©è€ç¥–&quot;&gt;&lt;/property&gt; &lt;/bean&gt; 2.2æœ‰å‚æ•°æ„é€ è¿›è¡Œæ³¨å…¥ åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§ï¼Œåˆ›å»ºå±æ€§å¯¹åº”æœ‰å‚æ•°æ„é€ æ–¹æ³• 123456789101112131415161718/** * ä½¿ç”¨æœ‰å‚æ•°æ„é€ æ³¨å…¥ */public class Orders { //å±æ€§ private String oname; private String address; //æœ‰å‚æ•°æ„é€  public Orders(String oname, String address) { this.oname = oname; this.address = address; } public void ShowOrder() { System.out.println(oname+&quot;::&quot;+address); }} é…ç½®æ–‡ä»¶åˆ›å»ºå¯¹è±¡ï¼Œæœ‰å‚æ³¨å…¥å±æ€§ 12345678&lt;!--==========================æœ‰å‚æ„é€ æ³¨å…¥===========================================--&gt; &lt;!--3 æœ‰å‚æ„é€ æ³¨å…¥--&gt; &lt;bean id=&quot;orders&quot; class=&quot;com.lxl.spring5.Orders&quot;&gt;&lt;!-- &lt;constructor-arg index=&quot;0&quot; value=&quot;&quot;/&gt; æ•ˆæœåŒä¸‹--&gt; &lt;constructor-arg name=&quot;oname&quot; value=&quot;ç”µè„‘&quot;&gt;&lt;/constructor-arg&gt;&lt;!-- &lt;constructor-arg index=&quot;1&quot; value=&quot;&quot;/&gt;--&gt; &lt;constructor-arg name=&quot;address&quot; value=&quot;China&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt; 2.3påç§°ç©ºé—´æ³¨å…¥ ä½¿ç”¨påç§°ç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç®€åŒ–åŸºäºxmlé…ç½®æ–¹å¼ ç¬¬ä¸€æ­¥ æ·»åŠ påç§°ç©ºé—´åœ¨é…ç½®æ–‡ä»¶ä¸­ 1234&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; ç¬¬äºŒæ­¥ è¿›è¡Œå±æ€§æ³¨å…¥ï¼Œåœ¨beanæ ‡ç­¾é‡Œé¢è¿›è¡Œæ“ä½œ 1234567891011&lt;!--=========================setæ–¹æ³•æ³¨å…¥å±æ€§=============================================--&gt; &lt;!--2 setæ–¹æ³•æ³¨å…¥å±æ€§--&gt; &lt;bean id=&quot;book&quot; class=&quot;com.lxl.spring5.Book&quot;&gt; &lt;!--ä½¿ç”¨propertyå®Œæˆå±æ€§æ³¨å…¥ nameï¼šç±»é‡Œé¢å±æ€§åç§° valueï¼šå‘å±æ€§æ³¨å…¥çš„å€¼ --&gt; &lt;property name=&quot;bname&quot; value=&quot;æ˜“ç­‹ç»&quot;&gt;&lt;/property&gt; &lt;property name=&quot;bauthor&quot; value=&quot;è¾¾æ‘©è€ç¥–&quot;&gt;&lt;/property&gt; &lt;/bean&gt;&lt;!--2.1 påç§°ç©ºé—´æ³¨å…¥æ–¹å¼ï¼Œå·²è¾¾åˆ°ç®€åŒ–ç›®çš„--&gt; &lt;bean id=&quot;book&quot; class=&quot;com.lxl.spring5.Book&quot; p:bname=&quot;æ˜“ç­‹ç»&quot; p:bauthor=&quot;è¾¾æ‘©è€ç¥–&quot;&gt;&lt;/bean&gt; 2.4xmlæ³¨å…¥å…¶ä»–ç±»å‹å±æ€§ **å­—é¢é‡ï¼š**å±æ€§è®¾ç½®çš„å›ºå®šå€¼ã€‚ nullå€¼ ï¼š &lt;property name=&quot;bname&quot; value=&quot;æ˜“ç­‹ç»&quot;&gt; åŒ…å«ç‰¹æ®Šç¬¦å·ï¼š è§£å†³ï¼šè½¬ä¹‰ã€ç‰¹æ®Šå†…å®¹å†™åˆ° å³ï¼š æ³¨å…¥å±æ€§-å¤–éƒ¨bean ï¼ˆ1ï¼‰åˆ›å»ºä¸¤ä¸ªç±» serviceç±»å’Œdaoç±» ï¼ˆ2ï¼‰åœ¨serviceè°ƒç”¨daoé‡Œé¢çš„æ–¹æ³• 123456789101112131415161718192021222324package com.lxl.spring5.service;import com.lxl.spring5.dao.UserDao;import com.lxl.spring5.dao.UserDaoImpl;public class UserService { //åˆ›å»ºUserDaoç±»å‹å±æ€§ï¼Œç”Ÿæˆsetæ–¹æ³• private UserDao userDao; public void setUserDao(UserDao userDao) { this.userDao = userDao; } public void add() { System.out.println(&quot;service add...............&quot;); // åŸå§‹åˆ›å»ºå¯¹è±¡// UserDao userDao = new UserDaoImpl();// userDao.update(); }} 123456789package com.lxl.spring5.dao;/** * @author Administrator */public interface UserDao { public void update();} 12345678package com.lxl.spring5.dao;public class UserDaoImpl implements UserDao{ @Override public void update() { System.out.println(&quot;dao update--------&quot;); }} ï¼ˆ3ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½® 12345678910111213&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--1 serviceå’Œdaoå¯¹è±¡åˆ›å»º--&gt; &lt;bean id=&quot;userService&quot; class=&quot;com.lxl.spring5.service.UserService&quot;&gt; &lt;!--æ³¨å…¥userDaoå¯¹è±¡ nameå±æ€§ï¼šç±»é‡Œé¢å±æ€§åç§° refå±æ€§ï¼šåˆ›å»ºuserDaoå¯¹è±¡beanæ ‡ç­¾idå€¼ --&gt; &lt;property name=&quot;userDao&quot; ref=&quot;userDaoImpl&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;bean id=&quot;userDaoImpl&quot; class=&quot;com.lxl.spring5.dao.UserDaoImpl&quot;&gt;&lt;/bean&gt;&lt;/beans&gt; ï¼ˆ4ï¼‰æµ‹è¯• 12345678910111213 @Test public void testAdd(){//1 åŠ è½½ spring é…ç½®æ–‡ä»¶// ClassPathXmlApplicationContext() web src ä¸‹é…ç½®æ–‡ä»¶// FileSystemXmlApplicationContext() æŒ‡å®šè·¯å¾„é…ç½®æ–‡ä»¶ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean2.xml&quot;); //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼Œuserä¸ºé…ç½®æ–‡ä»¶ä¸­id UserService userService = context.getBean(&quot;userService&quot;, UserService.class); System.out.println(userService); userService.add(); } æ³¨å…¥å±æ€§-å†…éƒ¨bean â€‹ å½“ä¸€ä¸ªbeanä»…è¢«ç”¨ä½œå¦ä¸€ä¸ªbeançš„å±æ€§æ—¶ï¼Œå®ƒèƒ½è¢«å£°æ˜ä¸ºä¸€ä¸ªå†…éƒ¨beanï¼Œä¸ºäº†å®šä¹‰innerbeanï¼Œåœ¨Springçš„åŸºäºXMLçš„é…ç½®å…ƒæ•°æ®ä¸­ï¼Œå¯ä»¥åœ¨æˆ–å…ƒç´ å†…ä½¿ç”¨å…ƒç´ ï¼Œå†…éƒ¨beané€šå¸¸æ˜¯åŒ¿åçš„ï¼Œå®ƒä»¬çš„Scopeä¸€èˆ¬æ˜¯prototype ï¼ˆ1ï¼‰ä¸€å¯¹å¤šä¸¤ä¸ªç±»ï¼š 12345678910111213141516171819202122232425package com.lxl.spring5.bean;//å‘˜å·¥ç±»public class Emp { private String ename; private String gender; //ä¸€å¯¹å¤š //å‘˜å·¥å±äºæŸä¸€ä¸ªéƒ¨é—¨ï¼Œä½¿ç”¨å¯¹è±¡å½¢å¼è¡¨ç¤º private Dept dept; public void setDept(Dept dept) { this.dept = dept; } public void setEname(String ename) { this.ename = ename; } public void setGender(String gender) { this.gender = gender; }public void add(){ System.out.println(ename+&quot;::&quot;+gender+&quot;::&quot;+dept);}} 1234567891011121314151617package com.lxl.spring5.bean;//éƒ¨é—¨ç±»public class Dept { private String dname; public void setDname(String dname) { this.dname = dname; } @Override public String toString() { return &quot;Dept{&quot; + &quot;dname='&quot; + dname + '\\'' + '}'; }} ï¼ˆ2ï¼‰xmlé…ç½® 1234567891011&lt;!--+++++++++++++++++++æ³¨å…¥å±æ€§-å†…éƒ¨beanï¼šä¸€å¯¹å¤š+++++++++++++++++++++++--&gt; &lt;!--å†…éƒ¨bean--&gt; &lt;bean id=&quot;emp&quot; class=&quot;com.lxl.spring5.bean.Emp&quot;&gt; &lt;!--è®¾ç½®ä¸¤ä¸ªæ™®é€šå±æ€§--&gt; &lt;property name=&quot;ename&quot; value=&quot;lucy&quot;&gt;&lt;/property&gt; &lt;property name=&quot;gender&quot; value=&quot;å¥³&quot;&gt;&lt;/property&gt; &lt;!--è®¾ç½®å¯¹è±¡ç±»å‹å±æ€§--&gt; &lt;property name=&quot;dept&quot;&gt; &lt;bean id=&quot;dept&quot; class=&quot;com.lxl.spring5.bean.Dept&quot;&gt; &lt;property name=&quot;dname&quot; value=&quot;å®‰ä¿éƒ¨&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt; ï¼ˆ3ï¼‰æµ‹è¯•ï¼š 12345678910111213 @Test public void testOneToMore(){//1 åŠ è½½ spring é…ç½®æ–‡ä»¶// ClassPathXmlApplicationContext() web src ä¸‹é…ç½®æ–‡ä»¶// FileSystemXmlApplicationContext() æŒ‡å®šè·¯å¾„é…ç½®æ–‡ä»¶ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean3.xml&quot;); //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼Œuserä¸ºé…ç½®æ–‡ä»¶ä¸­id Emp emp = context.getBean(&quot;emp&quot;, Emp.class); System.out.println(emp); emp.add(); } æ³¨å…¥å±æ€§-çº§è”èµ‹å€¼ä¸¤ç§æ–¹å¼ 1234567891011121314151617181920212223 &lt;!-- +++++++++++++++++++ çº§è”èµ‹å€¼ä¸¤ç§æ–¹å¼ +++++++++++++++++++++++--&gt; &lt;!--çº§è”èµ‹å€¼ æ–¹å¼ä¸€ --&gt; &lt;bean id=&quot;emp&quot; class=&quot;com.lxl.spring5.bean.Emp&quot;&gt; &lt;!--è®¾ç½®ä¸¤ä¸ªæ™®é€šå±æ€§--&gt; &lt;property name=&quot;ename&quot; value=&quot;lucy&quot;&gt;&lt;/property&gt; &lt;property name=&quot;gender&quot; value=&quot;å¥³&quot;&gt;&lt;/property&gt; &lt;!--çº§è”èµ‹å€¼--&gt; &lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;bean id=&quot;dept&quot; class=&quot;com.lxl.spring5.bean.Dept&quot;&gt; &lt;property name=&quot;dname&quot; value=&quot;è´¢åŠ¡éƒ¨&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--çº§è”èµ‹å€¼ æ–¹å¼äºŒ --&gt;&lt;!-- è®¾ç½®ä¸¤ä¸ªæ™®é€šå±æ€§ dept.dnameæ–¹å¼éœ€è¦æ·»åŠ deptçš„getæ–¹æ³• --&gt;&lt;!-- &lt;bean id=&quot;emp&quot; class=&quot;com.lxl.spring5.bean.Emp&quot;&gt; --&gt;&lt;!-- &lt;property name=&quot;ename&quot; value=&quot;lucy&quot;&gt;&lt;/property&gt;--&gt;&lt;!-- &lt;property name=&quot;gender&quot; value=&quot;å¥³&quot;&gt;&lt;/property&gt; --&gt;&lt;!-- &lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt;&lt;!-- &lt;property name=&quot;dept.dname&quot; value=&quot;æŠ€æœ¯éƒ¨&quot;&gt;&lt;/property&gt;--&gt;&lt;!-- &lt;/bean&gt;--&gt;&lt;!-- &lt;bean id=&quot;dept&quot; class=&quot;com.lxl.spring5.bean.Dept&quot;&gt;--&gt;&lt;!-- &lt;property name=&quot;dname&quot; value=&quot;è´¢åŠ¡éƒ¨&quot;&gt;&lt;/property&gt;--&gt;&lt;!-- &lt;/bean&gt;--&gt; 2.5xmlæ³¨å…¥é›†åˆç±»å±æ€§ ï¼ˆ1ï¼‰åˆ›å»ºç±»ï¼Œå®šä¹‰æ•°ç»„ã€listã€mapã€setç±»å‹å±æ€§ï¼Œç”Ÿæˆå¯¹åº”setæ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940package com.lxl.spring5.collectiontype;import java.util.Arrays;import java.util.List;import java.util.Map;import java.util.Set;public class Stu { //1 æ•°ç»„ç±»å‹å±æ€§ private String[] courses; //2 listé›†åˆç±»å‹å±æ€§ private List&lt;String&gt; list; //3 mapé›†åˆç±»å‹å±æ€§ private Map&lt;String, String&gt; maps; //4 seté›†åˆç±»å‹å±æ€§ private Set&lt;String&gt; sets; public void setSets(Set&lt;String&gt; sets) { this.sets = sets; } public void setCourses(String[] courses) { this.courses = courses; } public void setList(List&lt;String&gt; list) { this.list = list; } public void setMaps(Map&lt;String, String&gt; maps) { this.maps = maps; } public void test(){ System.out.println(Arrays.toString(courses)); System.out.println(list); System.out.println(maps); System.out.println(sets); }} ï¼ˆ2ï¼‰xmlé…ç½® 12345678910111213141516171819202122232425262728293031323334&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!-- +++++++++++++++++++ é›†åˆç±»å±æ€§æ³¨å…¥ +++++++++++++++++++++++--&gt; &lt;!--1 é›†åˆç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;bean id=&quot;stu&quot; class=&quot;com.lxl.spring5.collectiontype.Stu&quot;&gt; &lt;!--æ•°ç»„ç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;courses&quot;&gt; &lt;array&gt; &lt;value&gt;javaè¯¾ç¨‹&lt;/value&gt; &lt;value&gt;æ•°æ®åº“è¯¾ç¨‹&lt;/value&gt; &lt;/array&gt; &lt;/property&gt; &lt;!--listç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;list&quot;&gt; &lt;list&gt; &lt;value&gt;å¼ ä¸‰&lt;/value&gt; &lt;value&gt;å°ä¸‰&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;!--mapç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;maps&quot;&gt; &lt;map&gt; &lt;entry key=&quot;JAVA&quot; value=&quot;java&quot;&gt;&lt;/entry&gt; &lt;entry key=&quot;PHP&quot; value=&quot;php&quot;&gt;&lt;/entry&gt; &lt;/map&gt; &lt;/property&gt; &lt;!--setç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;sets&quot;&gt; &lt;set&gt; &lt;value&gt;MySQL&lt;/value&gt; &lt;value&gt;Redis&lt;/value&gt; &lt;/set&gt; &lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; ï¼ˆ3ï¼‰æµ‹è¯• 12345678910111213141516171819202122package com.lxl.spring5.testdemo;import com.lxl.spring5.bean.Emp;import com.lxl.spring5.collectiontype.Stu;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class TestCollection { @Test public void testOneToMore(){//1 åŠ è½½ spring é…ç½®æ–‡ä»¶// ClassPathXmlApplicationContext() web src ä¸‹é…ç½®æ–‡ä»¶// FileSystemXmlApplicationContext() æŒ‡å®šè·¯å¾„é…ç½®æ–‡ä»¶ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean5.xml&quot;); //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼Œuserä¸ºé…ç½®æ–‡ä»¶ä¸­id Stu stu = context.getBean(&quot;stu&quot;, Stu.class); stu.test(); }} 2.6åœ¨é›†åˆé‡Œé¢è®¾ç½®å¯¹è±¡ç±»å‹å€¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package com.lxl.spring5.collectiontype;import java.util.Arrays;import java.util.List;import java.util.Map;import java.util.Set;public class Stu { //1 æ•°ç»„ç±»å‹å±æ€§ private String[] courses; //2 listé›†åˆç±»å‹å±æ€§ private List&lt;String&gt; list; //3 mapé›†åˆç±»å‹å±æ€§ private Map&lt;String, String&gt; maps; //4 seté›†åˆç±»å‹å±æ€§ private Set&lt;String&gt; sets; //5 Listé›†åˆä¸­ä¸ºå¯¹è±¡ç±»å‹å±æ€§ private List&lt;Course&gt; courseList; public void setCourseList(List&lt;Course&gt; courseList) { this.courseList = courseList; } public void setSets(Set&lt;String&gt; sets) { this.sets = sets; } public void setCourses(String[] courses) { this.courses = courses; } public void setList(List&lt;String&gt; list) { this.list = list; } public void setMaps(Map&lt;String, String&gt; maps) { this.maps = maps; } public void test(){ System.out.println(Arrays.toString(courses)); System.out.println(list); System.out.println(maps); System.out.println(sets); System.out.println(courseList); }} 12345678910111213141516package com.lxl.spring5.collectiontype;public class Course { private String cname; public void setCname(String cname) { this.cname = cname; } @Override public String toString() { return &quot;Course{&quot; + &quot;cname='&quot; + cname + '\\'' + '}'; }} 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!-- +++++++++++++++++++ é›†åˆç±»å±æ€§æ³¨å…¥ã€é›†åˆå†…ä¸ºå¯¹è±¡æƒ…å†µæ³¨å…¥ +++++++++++++++++++++++--&gt; &lt;!--1 é›†åˆç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;bean id=&quot;stu&quot; class=&quot;com.lxl.spring5.collectiontype.Stu&quot;&gt; &lt;!--æ•°ç»„ç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;courses&quot;&gt; &lt;array&gt; &lt;value&gt;javaè¯¾ç¨‹&lt;/value&gt; &lt;value&gt;æ•°æ®åº“è¯¾ç¨‹&lt;/value&gt; &lt;/array&gt; &lt;/property&gt; &lt;!--listç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;list&quot;&gt; &lt;list&gt; &lt;value&gt;å¼ ä¸‰&lt;/value&gt; &lt;value&gt;å°ä¸‰&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;!--mapç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;maps&quot;&gt; &lt;map&gt; &lt;entry key=&quot;JAVA&quot; value=&quot;java&quot;&gt;&lt;/entry&gt; &lt;entry key=&quot;PHP&quot; value=&quot;php&quot;&gt;&lt;/entry&gt; &lt;/map&gt; &lt;/property&gt; &lt;!--setç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;sets&quot;&gt; &lt;set&gt; &lt;value&gt;MySQL&lt;/value&gt; &lt;value&gt;Redis&lt;/value&gt; &lt;/set&gt; &lt;/property&gt; &lt;!--æ³¨å…¥listé›†åˆç±»å‹ï¼Œå€¼æ˜¯å¯¹è±¡--&gt; &lt;property name=&quot;courseList&quot;&gt; &lt;list&gt; &lt;ref bean=&quot;course1&quot;&gt;&lt;/ref&gt; &lt;ref bean=&quot;course2&quot;&gt;&lt;/ref&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;bean id=&quot;course1&quot; class=&quot;com.lxl.spring5.collectiontype.Course&quot;&gt; &lt;property name=&quot;cname&quot; value=&quot;Spring5æ¡†æ¶&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;bean id=&quot;course2&quot; class=&quot;com.lxl.spring5.collectiontype.Course&quot;&gt; &lt;property name=&quot;cname&quot; value=&quot;MyBatisæ¡†æ¶&quot;&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; æŠŠé›†åˆæ³¨å…¥éƒ¨åˆ†æå–å‡ºæ¥ 1234567891011121314package com.lxl.spring5.collectiontype;import java.util.List;public class Book { private List&lt;String&gt; list; public void setList(List&lt;String&gt; list) { this.list = list; } public void test() { System.out.println(list); }} 1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt; &lt;!-- +++++++++++++++++++ é›†åˆå†…ä¸ºå¯¹è±¡æƒ…å†µæ³¨å…¥ +++++++++++++++++++++++--&gt; &lt;!--1 åŠ utilå…ƒç©ºé—´ xmlns:util=&quot;http://www.springframework.org/schema/util&quot; http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd --&gt; &lt;!--2 æå–listé›†åˆç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;util:list id=&quot;bookList&quot;&gt; &lt;value&gt;æ˜“ç­‹ç»&lt;/value&gt; &lt;value&gt;ä¹é˜´çœŸç»&lt;/value&gt; &lt;value&gt;ä¹é˜³ç¥åŠŸ&lt;/value&gt; &lt;/util:list&gt; &lt;!--3 æå–listé›†åˆç±»å‹å±æ€§æ³¨å…¥ä½¿ç”¨--&gt; &lt;bean id=&quot;book&quot; class=&quot;com.lxl.spring5.collectiontype.Book&quot;&gt; &lt;property name=&quot;list&quot; ref=&quot;bookList&quot;&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; æµ‹è¯•ç±» 1234567891011121314151617181920212223242526272829303132333435package com.lxl.spring5.testdemo;import com.lxl.spring5.collectiontype.Book;import com.lxl.spring5.bean.Emp;import com.lxl.spring5.collectiontype.Stu;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class TestCollection { @Test public void testOneToMore(){//1 åŠ è½½ spring é…ç½®æ–‡ä»¶// ClassPathXmlApplicationContext() web src ä¸‹é…ç½®æ–‡ä»¶// FileSystemXmlApplicationContext() æŒ‡å®šè·¯å¾„é…ç½®æ–‡ä»¶ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean5.xml&quot;); //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼Œuserä¸ºé…ç½®æ–‡ä»¶ä¸­id Stu stu = context.getBean(&quot;stu&quot;, Stu.class); stu.test(); } @Test public void testOneToMore1(){//1 åŠ è½½ spring é…ç½®æ–‡ä»¶// ClassPathXmlApplicationContext() web src ä¸‹é…ç½®æ–‡ä»¶// FileSystemXmlApplicationContext() æŒ‡å®šè·¯å¾„é…ç½®æ–‡ä»¶ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean6.xml&quot;); //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼Œuserä¸ºé…ç½®æ–‡ä»¶ä¸­id Book book = context.getBean(&quot;book&quot;, Book.class); book.test(); }} 2.7FactoryBean 1ã€Springæœ‰ä¸¤ç§ç±»å‹beanï¼Œä¸€ç§æ™®é€šbeanï¼Œå¦å¤–ä¸€ç§å·¥å‚beanï¼ˆFactoryBeanï¼‰ 2ã€æ™®é€šbeanï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰beanç±»å‹å°±æ˜¯è¿”å›ç±»å‹ 3ã€å·¥å‚beanï¼šåœ¨é…ç½®æ–‡ä»¶å®šä¹‰beanç±»å‹å¯ä»¥å’Œè¿”å›ç±»å‹ä¸ä¸€æ · ç¬¬ä¸€æ­¥ åˆ›å»ºç±»ï¼Œè®©è¿™ä¸ªç±»ä½œä¸ºå·¥å‚beanï¼Œå®ç°æ¥å£ FactoryBean ç¬¬äºŒæ­¥ å®ç°æ¥å£é‡Œé¢çš„æ–¹æ³•ï¼Œåœ¨å®ç°çš„æ–¹æ³•ä¸­å®šä¹‰è¿”å›çš„beanç±»å‹ 1234567891011121314151617181920212223242526package com.lxl.spring5.factorybean;import com.lxl.spring5.collectiontype.Course;import org.springframework.beans.factory.FactoryBean;/**FactoryBean*/public class MyBean implements FactoryBean&lt;Course&gt; { /**å®šä¹‰è¿”å›beanç±»å‹*/ @Override public Course getObject() throws Exception { Course course=new Course(); course.setCname(&quot;ä½“è‚²è¯¾&quot;); return course; } @Override public Class&lt;?&gt; getObjectType() { return null; } @Override public boolean isSingleton() { return FactoryBean.super.isSingleton(); }} 12&lt;bean id=&quot;myBean&quot; class=&quot;com.lxl.spring5.factorybean.MyBean&quot;&gt;&lt;/bean&gt; 12345678910 @Test public void testFactoryBean(){ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean7.xml&quot;); //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼Œuserä¸ºé…ç½®æ–‡ä»¶ä¸­id// MyBean myBean = context.getBean(&quot;myBean&quot;, MyBean.class); Course myBean = context.getBean(&quot;myBean&quot;, Course.class); System.out.println(myBean); } 2.8 bean ä½œç”¨åŸŸ 1ã€åœ¨Springé‡Œé¢ï¼Œè®¾ç½®åˆ›å»ºbeanå®ä¾‹æ˜¯å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹ 2ã€åœ¨Springé‡Œé¢ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œbeanæ˜¯å•å®ä¾‹å¯¹è±¡ 3ã€å¦‚ä½•è®¾ç½®å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹ ï¼ˆ1ï¼‰åœ¨springé…ç½®æ–‡ä»¶beanæ ‡ç­¾é‡Œé¢æœ‰å±æ€§ï¼ˆscopeï¼‰ç”¨äºè®¾ç½®å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹ï¼Œspringä¸­å¯ä½¿ç”¨@Scopeæ³¨è§£ ï¼ˆ2ï¼‰scopeå±æ€§å€¼ é»˜è®¤å€¼ï¼Œsingletonï¼Œè¡¨ç¤ºæ˜¯å•å®ä¾‹å¯¹è±¡ prototypeï¼Œè¡¨ç¤ºæ˜¯å¤šå®ä¾‹å¯¹è±¡ requestï¼šæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeanï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„SpringApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚ sessionï¼šåœ¨ä¸€ä¸ªHTTPSessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„SpringApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚ global-sessionï¼šåœ¨ä¸€ä¸ªå…¨å±€çš„HTTPSessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„SpringApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚ ï¼ˆ3ï¼‰singletonå’ŒprototypeåŒºåˆ« ç¬¬ä¸€ singletonå•å®ä¾‹ï¼Œprototypeå¤šå®ä¾‹ã€‚ ç¬¬äºŒ è®¾ç½®scopeå€¼æ˜¯singletonæ—¶å€™ï¼ŒåŠ è½½springé…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šåˆ›å»ºå•å®ä¾‹å¯¹è±¡ã€‚ è®¾ç½®scopeå€¼æ˜¯prototypeæ—¶å€™ï¼Œä¸æ˜¯åœ¨åŠ è½½springé…ç½®æ–‡ä»¶æ—¶å€™åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ˜¯åœ¨åœ¨è°ƒç”¨getBeanæ–¹æ³•æ—¶å€™åˆ›å»ºå¤šå®ä¾‹å¯¹è±¡ã€‚ 2.9Beanç”Ÿå‘½å‘¨æœŸ ï¼ˆ1ï¼‰é€šè¿‡æ„é€ å™¨åˆ›å»ºbeanå®ä¾‹ï¼ˆæ— å‚æ•°æ„é€ ï¼‰ ï¼ˆ2ï¼‰ä¸ºbeançš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»–beanå¼•ç”¨ï¼ˆè°ƒç”¨setæ–¹æ³•ï¼‰ ï¼ˆ3ï¼‰è°ƒç”¨beançš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰ ï¼ˆ4ï¼‰beanå¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰ ï¼ˆ5ï¼‰å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨beançš„é”€æ¯çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰ åˆ›å»ºå®ä¾‹ ==ã€‹ æ ¹æ®å®šä¹‰å¡«å……å…¶å±æ€§å’Œå¯¹å…¶ä»–beançš„å¼•ç”¨ ==ã€‹æ‰§è¡Œbeanåˆå§‹åŒ–æ–¹æ³•å¾—åˆ°bean ==ã€‹å®¹å™¨å…³é—­æ—¶é”€æ¯bean 123456789101112131415161718192021222324package com.lxl.spring5.lifecyclebean;public class Orders { //æ— å‚æ•°æ„é€  public Orders() { System.out.println(&quot;ç¬¬ä¸€æ­¥ æ‰§è¡Œæ— å‚æ•°æ„é€ åˆ›å»ºbeanå®ä¾‹&quot;); } private String oname; public void setOname(String oname) { this.oname = oname; System.out.println(&quot;ç¬¬äºŒæ­¥ è°ƒç”¨setæ–¹æ³•è®¾ç½®å±æ€§å€¼&quot;); } //åˆ›å»ºæ‰§è¡Œçš„åˆå§‹åŒ–çš„æ–¹æ³• public void initMethod() { System.out.println(&quot;ç¬¬ä¸‰æ­¥ æ‰§è¡Œåˆå§‹åŒ–çš„æ–¹æ³•&quot;); } //åˆ›å»ºæ‰§è¡Œçš„é”€æ¯çš„æ–¹æ³• public void destroyMethod() { System.out.println(&quot;ç¬¬äº”æ­¥ æ‰§è¡Œé”€æ¯çš„æ–¹æ³•&quot;); }} 1234&lt;!-- +++++++++++++++++++beanç”Ÿå‘½å‘¨æœŸ+++++++++++++++++++++++--&gt;&lt;bean id=&quot;orders&quot; class=&quot;com.lxl.spring5.lifecyclebean.Orders&quot; init-method=&quot;initMethod&quot; destroy-method=&quot;destroyMethod&quot;&gt; &lt;property name=&quot;oname&quot; value=&quot;é”®ç›˜&quot;&gt;&lt;/property&gt;&lt;/bean&gt; 1234567891011121314 @Test public void TestLifeCycle(){// ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean7.xml&quot;);// ClassPathXmlApplicationContext ä¸ºApplicationContextå­å®ç°ç±» ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean8.xml&quot;); //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼Œuserä¸ºé…ç½®æ–‡ä»¶ä¸­id// MyBean myBean = context.getBean(&quot;myBean&quot;, MyBean.class); Orders myBean = context.getBean(&quot;orders&quot;, Orders.class); System.out.println(&quot;ç¬¬å››æ­¥ è·å–åˆ›å»ºçš„beanå®ä¾‹&quot;); System.out.println(myBean); context.close(); } 2.10åç½®å¤„ç†å™¨ 123456789101112131415161718package com.lxl.spring5.lifecyclebean;import org.springframework.beans.BeansException;import org.springframework.beans.factory.config.BeanPostProcessor;public class BeforeAfter implements BeanPostProcessor { @Override public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException { System.out.println(&quot;åç½®å¤„ç†å™¨ï¼šåœ¨åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œçš„æ–¹æ³•&quot;); return BeanPostProcessor.super.postProcessBeforeInitialization(bean, beanName); } @Override public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException { System.out.println(&quot;åç½®å¤„ç†å™¨ï¼šåœ¨åˆå§‹åŒ–ä¹‹åæ‰§è¡Œçš„æ–¹æ³•&quot;); return BeanPostProcessor.super.postProcessAfterInitialization(bean, beanName); }} 12345678&lt;!--+++++++++++++++++++beanç”Ÿå‘½å‘¨æœŸã€åç½®å¤„ç†å™¨+++++++++++++++++++++++--&gt;&lt;bean id=&quot;orders&quot; class=&quot;com.lxl.spring5.lifecyclebean.Orders&quot; init-method=&quot;initMethod&quot; destroy-method=&quot;destroyMethod&quot;&gt; &lt;property name=&quot;oname&quot; value=&quot;é”®ç›˜&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!--åç½®å¤„ç†å™¨ ,åœ¨æ­¤é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰beanæ·»åŠ åç½®å¤„ç†å™¨--&gt;&lt;bean id=&quot;myBeanPost&quot; class=&quot;com.lxl.spring5.lifecyclebean.BeforeAfter&quot;&gt;&lt;/bean&gt; 2.12è‡ªåŠ¨è£…é… æœ‰äº”ç§è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å¯¼Springå®¹å™¨ç”¨è‡ªåŠ¨è£…é…æ–¹å¼æ¥è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚ noï¼šé»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œé€šè¿‡æ˜¾å¼è®¾ç½®refå±æ€§æ¥è¿›è¡Œè£…é…ã€‚ byNameï¼šé€šè¿‡å‚æ•°åè‡ªåŠ¨è£…é…ï¼ŒSpringå®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç°beançš„autowireå±æ€§è¢«è®¾ç½®æˆbynameï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥beançš„å±æ€§å…·æœ‰ç›¸åŒåå­—çš„beanã€‚ byType:ï¼šé€šè¿‡å‚æ•°ç±»å‹è‡ªåŠ¨è£…é…ï¼ŒSpringå®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç°beançš„autowireå±æ€§è¢«è®¾ç½®æˆbyTypeï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥beançš„å±æ€§å…·æœ‰ç›¸åŒç±»å‹çš„beanã€‚å¦‚æœæœ‰å¤šä¸ªbeanç¬¦åˆæ¡ä»¶ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚ constructorï¼šè¿™ä¸ªæ–¹å¼ç±»ä¼¼äºbyTypeï¼Œä½†æ˜¯è¦æä¾›ç»™æ„é€ å™¨å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰ç¡®å®šçš„å¸¦å‚æ•°çš„æ„é€ å™¨å‚æ•°ç±»å‹ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ autodetectï¼šé¦–å…ˆå°è¯•ä½¿ç”¨constructoræ¥è‡ªåŠ¨è£…é…ï¼Œå¦‚æœæ— æ³•å·¥ä½œï¼Œåˆ™ä½¿ç”¨byTypeæ–¹å¼ã€‚ 1234567891011package com.lxl.spring5.autowire;/** * @author Administrator */public class Dept { @Override public String toString() { return &quot;Dept{}&quot;; }} 1234567891011121314151617181920package com.lxl.spring5.testdemo;import com.lxl.spring5.autowire.Emp;import com.lxl.spring5.lifecyclebean.Orders;import org.junit.Test;import org.springframework.context.support.ClassPathXmlApplicationContext;public class TestAutoWire { @Test public void TestLifeCycle(){// ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean7.xml&quot;);// ClassPathXmlApplicationContext ä¸ºApplicationContextå­å®ç°ç±» ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean9.xml&quot;); //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼Œuserä¸ºé…ç½®æ–‡ä»¶ä¸­id// MyBean myBean = context.getBean(&quot;myBean&quot;, MyBean.class); Emp emp = context.getBean(&quot;emp&quot;, Emp.class); System.out.println(emp); }} 1234567891011121314151617181920&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt; &lt;!--+++++++++++++++++++è‡ªåŠ¨è£…é… autowire=&quot;byName/byType&quot;+++++++++++++++++++++++--&gt; &lt;!--å®ç°è‡ªåŠ¨è£…é… beanæ ‡ç­¾å±æ€§autowireï¼Œé…ç½®è‡ªåŠ¨è£…é… autowireå±æ€§å¸¸ç”¨ä¸¤ä¸ªå€¼ï¼š byNameæ ¹æ®å±æ€§åç§°æ³¨å…¥ ï¼Œæ³¨å…¥å€¼beançš„idå€¼å’Œç±»å±æ€§åç§°ä¸€æ ·ï¼Œå¦‚ä¸‹dept1ä¸ä¼šæ³¨å…¥ã€‚ byTypeæ ¹æ®å±æ€§ç±»å‹æ³¨å…¥ --&gt; &lt;bean id=&quot;emp&quot; class=&quot;com.lxl.spring5.autowire.Emp&quot; autowire=&quot;byName&quot;&gt;&lt;!-- Could not autowire. There is more than one bean of 'Dept' type. Beans: dept,dept1. Properties: 'dept'--&gt;&lt;!-- &lt;bean id=&quot;emp&quot; class=&quot;com.lxl.spring5.autowire.Emp&quot; autowire=&quot;byType&quot;&gt;--&gt;&lt;!-- åŸå§‹æ¨¡å¼--&gt;&lt;!-- &lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt; &lt;/bean&gt; &lt;!--åç½®å¤„ç†å™¨ ,åœ¨æ­¤é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰beanæ·»åŠ åç½®å¤„ç†å™¨--&gt; &lt;bean id=&quot;dept&quot; class=&quot;com.lxl.spring5.autowire.Dept&quot;&gt;&lt;/bean&gt; &lt;bean id=&quot;dept1&quot; class=&quot;com.lxl.spring5.autowire.Dept&quot;&gt;&lt;/bean&gt;&lt;/beans&gt; æµ‹è¯• 1234567891011121314151617181920package com.lxl.spring5.testdemo;import com.lxl.spring5.autowire.Emp;import com.lxl.spring5.lifecyclebean.Orders;import org.junit.Test;import org.springframework.context.support.ClassPathXmlApplicationContext;public class TestAutoWire { @Test public void TestLifeCycle(){// ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean7.xml&quot;);// ClassPathXmlApplicationContext ä¸ºApplicationContextå­å®ç°ç±» ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean9.xml&quot;); //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼Œuserä¸ºé…ç½®æ–‡ä»¶ä¸­id// MyBean myBean = context.getBean(&quot;myBean&quot;, MyBean.class); Emp emp = context.getBean(&quot;emp&quot;, Emp.class); System.out.println(emp); }} 2.13å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ 1ã€ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯ ï¼ˆ1ï¼‰é…ç½®å¾·é²ä¼Šè¿æ¥æ±  ï¼ˆ2ï¼‰å¼•å…¥å¾·é²ä¼Šè¿æ¥æ± ä¾èµ–jaråŒ… â€‹ å¤åˆ¶åˆ°libæ–‡ä»¶å¤¹å¹¶æ·»åŠ é¡¹ç›®ä¾èµ– 1234567891011121314151617181920212223242526272829303132&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:context =&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--+++++++++++++++++++å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ï¼Œæ•°æ®åº“è¿æ¥æ± ç¤ºä¾‹+++++++++++++++++++++++--&gt; &lt;!-- åŸå§‹å½¢å¼ï¼Œå›ºå®šå€¼--&gt;&lt;!-- &lt;bean id=&quot;dept1&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;--&gt;&lt;!-- &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;--&gt;&lt;!-- &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/userDb&quot;&gt;&lt;/property&gt;--&gt;&lt;!-- &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;--&gt;&lt;!-- &lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt;--&gt;&lt;!-- å¼•å…¥å¤–éƒ¨æ–‡ä»¶--&gt;&lt;!-- &lt;/bean&gt;--&gt;&lt;!-- å¼•å…¥å¤–éƒ¨æ–‡ä»¶å½¢å¼--&gt;&lt;!-- å¼•å…¥å¤–éƒ¨æ–‡ä»¶--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt;&lt;!-- é…ç½®è¿æ¥æ± --&gt; &lt;bean id=&quot;dept1&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;${prop.driverClass}&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;${prop.url}&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;${prop.userName}&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;${prop.password}&quot;&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; jdbc.properties 1234prop.driverClass=com.mysql.jdbc.Driverprop.url=jdbc:mysql://localhost:3306/userDbprop.userName=rootprop.password=root ï¼ˆ2ï¼‰æ³¨è§£æ–¹å¼ 1ã€ä»€ä¹ˆæ˜¯æ³¨è§£ ï¼ˆ1ï¼‰æ³¨è§£æ˜¯ä»£ç ç‰¹æ®Šæ ‡è®°ï¼Œæ ¼å¼ï¼š@æ³¨è§£åç§°(å±æ€§åç§°=å±æ€§å€¼, å±æ€§åç§°=å±æ€§å€¼..) ï¼ˆ2ï¼‰ä½¿ç”¨æ³¨è§£ï¼Œæ³¨è§£ä½œç”¨åœ¨ç±»ä¸Šé¢ï¼Œæ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢ ï¼ˆ3ï¼‰ä½¿ç”¨æ³¨è§£ç›®çš„ï¼šç®€åŒ–xmlé…ç½® 2ã€Springé’ˆå¯¹Beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£ ï¼ˆ1ï¼‰@Component ï¼ˆ2ï¼‰@Service ï¼ˆ3ï¼‰@Controller ï¼ˆ4ï¼‰@Repository ä¸Šé¢å››ä¸ªæ³¨è§£åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºbeanå®ä¾‹ï¼Œä½†æ˜¯ä¹ æƒ¯åœ¨ä¸åŒå±‚ä½¿ç”¨ä¸åŒæ³¨è§£ã€‚ å¼•å…¥aopçš„jaråŒ… ç±»æ³¨è§£ 12345678910111213141516171819202122232425package com.lxl.spring5.annotation;import org.springframework.stereotype.Component;import org.springframework.stereotype.Controller;import org.springframework.stereotype.Repository;import org.springframework.stereotype.Service;//åœ¨æ³¨è§£é‡Œé¢valueå±æ€§å€¼å¯ä»¥çœç•¥ä¸å†™ï¼Œ// é»˜è®¤å€¼æ˜¯ç±»åç§°ï¼Œé¦–å­—æ¯å°å†™// UserService -- userService@Component(value = &quot;userService&quot;) //ç­‰åŒ&lt;bean id=&quot;userService&quot; class=&quot;..&quot;/&gt;/** * @author Administrator*///@Component//@Service//@Controller//@Repository // å››ä¸ªæ³¨è§£æ•ˆæœç›¸åŒï¼Œä¹ æƒ¯ç”¨åœ¨ä¸åŒå±‚public class UserService { public void add() { System.out.println(&quot;service add ...&quot;); }} å¼€å¯ç»„ä»¶æ‰«æ 1234567891011121314151617181920212223242526272829&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--+++++++++++++++++++æ³¨è§£æ–¹å¼ï¼Œæ‰«æåŒ…+++++++++++++++++++++++--&gt; &lt;!--æ·»åŠ contextå‘½åç©ºé—´--&gt; &lt;!-- å¼€å¯ç»„ä»¶æ‰«æ 1.æ‰«æå¤šä¸ªåŒ…ï¼Œå¯é€—å·éš”å¼€ 2.æ‰«æå¤šä¸ªåŒ…çš„ä¸Šå±‚ç›®å½• --&gt; &lt;context:component-scan base-package=&quot;com.lxl&quot;&gt;&lt;/context:component-scan&gt; &lt;!--ç¤ºä¾‹1 use-default-filters=&quot;false&quot; è¡¨ç¤ºç°åœ¨ä¸ä½¿ç”¨é»˜è®¤filterï¼Œè‡ªå·±é…ç½®filter context:include-filter ï¼Œè®¾ç½®æ‰«æå“ªäº›å†…å®¹ --&gt; &lt;context:component-scan base-package=&quot;com.lxl&quot; use-default-filters=&quot;false&quot;&gt; &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt; &lt;/context:component-scan&gt; &lt;!--ç¤ºä¾‹2 ä¸‹é¢é…ç½®æ‰«æåŒ…æ‰€æœ‰å†…å®¹ context:exclude-filterï¼š è®¾ç½®å“ªäº›å†…å®¹ä¸è¿›è¡Œæ‰«æ --&gt; &lt;context:component-scan base-package=&quot;com.lxl&quot;&gt; &lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt; &lt;/context:component-scan&gt;&lt;/beans&gt; æµ‹è¯• 12345678910111213141516171819package com.lxl.spring5.testdemo;import com.lxl.spring5.annotation.UserService;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;/** * @author Administrator */public class TestAnnotation { @Test public void testAnnotation() {// spring-aop-4.3.10.RELEASE åŒ…æœªå¯¼å…¥ä¼šæŠ¥é”™ï¼šUnexpected exception parsing XML document from class path resource ApplicationContext applicationContext=new ClassPathXmlApplicationContext(&quot;bean11.xml&quot;); UserService userService = applicationContext.getBean(&quot;userService&quot;, UserService.class); userService.add(); }} 3.çº¯æ³¨è§£å¼€å‘ æ·»åŠ é…ç½®ç±»æ‰«æåŒ… 12345678910package com.lxl.spring5.annotation.allbyannotation.config;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;@Configuration@ComponentScan(basePackages = {&quot;com.lxl.spring5.annotation.allbyannotation&quot;})public class SpringConfig {} æµ‹è¯• 123456789101112131415161718package com.lxl.spring5.testdemo;import com.lxl.spring5.annotation.allbyannotation.config.SpringConfig;import com.lxl.spring5.annotation.allbyannotation.service.UserService1;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class TestAllByAnnotation { @Test public void testAllByAnnotation(){ //åŠ è½½é…ç½®ç±» ApplicationContext context = new AnnotationConfigApplicationContext(SpringConfig.class); UserService1 userService1 = context.getBean(&quot;userService1&quot;, UserService1.class); userService1.add(); }} AOPã€Aspect Oriented Programmingã€‘ AOPä»‹ç» 1ã€ä»€ä¹ˆæ˜¯AOP ï¼ˆ1ï¼‰é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆæ–¹é¢ï¼‰ï¼Œåˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚ ï¼ˆ2ï¼‰é€šä¿—æè¿°ï¼šä¸é€šè¿‡ä¿®æ”¹æºä»£ç æ–¹å¼ï¼Œåœ¨ä¸»å¹²åŠŸèƒ½é‡Œé¢æ·»åŠ æ–°åŠŸèƒ½ã€æ¯”å¦‚ç™»å½•çš„æƒé™è¿‡æ»¤ã€‚ AOPåº•å±‚åŸç† 1ã€AOPåº•å±‚ä½¿ç”¨åŠ¨æ€ä»£ç†çš„ä¸¤ç§æƒ…å†µï¼š ç¬¬ä¸€ç§ æœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨JDKåŠ¨æ€ä»£ç† âš« åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³• ç¬¬äºŒç§ æ²¡æœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨CGLIBåŠ¨æ€ä»£ç† âš« åˆ›å»ºå­ç±»çš„ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³• AOP JDK åŠ¨æ€ä»£ç† 1ã€ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼Œä½¿ç”¨Proxyç±»é‡Œé¢çš„æ–¹æ³•åˆ›å»ºä»£ç†å¯¹è±¡ ï¼ˆ1ï¼‰åˆ›å»ºæ¥å£ï¼Œå®šä¹‰æ–¹æ³• 12345678package com.lxl.spring5.aop.jdkdynamicproxy;public interface UserDao { public int add(int a, int b); public String update(String id);} ï¼ˆ2ï¼‰åˆ›å»ºæ¥å£å®ç°ç±»ï¼Œå®ç°æ–¹æ³• 12345678910111213package com.lxl.spring5.aop.jdkdynamicproxy;public class UserDaoImpl implements UserDao { @Override public int add(int a, int b) { return a + b; } @Override public String update(String id) { return id; }} ï¼ˆ3ï¼‰ä½¿ç”¨Proxyç±»åˆ›å»ºæ¥å£ä»£ç†å¯¹è±¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package com.lxl.spring5.aop.jdkdynamicproxy;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;import java.util.Arrays;/** * ä½¿ç”¨Proxyåˆ›å»ºä»£ç†å¯¹è±¡ */public class JDKProxy { public static void main(String[] args) { //åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡ Class[] interfaces = {UserDao.class};// getClassLoaderç±»åŠ è½½å™¨// interfacesè¦å®ç°çš„æ¥å£// Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, new InvocationHandler() {// @Override// public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {// return null;// }// }); UserDaoImpl userDao = new UserDaoImpl(); UserDao dao = (UserDao) Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, new UserDaoProxy(userDao)); int result = dao.add(1, 2); System.out.println(&quot;result:&quot; + result); }}//åˆ›å»ºä»£ç†å¯¹è±¡ä»£ç class UserDaoProxy implements InvocationHandler { //1 æŠŠåˆ›å»ºçš„æ˜¯è°çš„ä»£ç†å¯¹è±¡ï¼ŒæŠŠè°ä¼ é€’è¿‡æ¥ // æœ‰å‚æ•°æ„é€ ä¼ é€’ä»£ç†å¯¹è±¡ private Object obj; public UserDaoProxy(Object obj) { this.obj = obj; } //å¢å¼ºçš„é€»è¾‘// invokeæ–¹æ³•ç±»å¯¹è±¡åˆ›å»ºåå³è¢«è°ƒç”¨ @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { //æ–¹æ³•ä¹‹å‰ System.out.println(&quot;æ–¹æ³•ä¹‹å‰æ‰§è¡Œ....&quot; + method.getName() + &quot; :ä¼ é€’çš„å‚æ•°...&quot; + Arrays.toString(args)); // è¢«å¢å¼ºçš„æ–¹æ³•æ‰§è¡Œ Object res = method.invoke(obj, args); // æ–¹æ³•ä¹‹å System.out.println(&quot;æ–¹æ³•ä¹‹åæ‰§è¡Œ....&quot; + obj); return res; }} AOPä¸»è¦æœ¯è¯­ 1.è¿æ¥ç‚¹ï¼ˆJoint pointï¼‰ å¯ä»¥è¢«å¢å¼ºçš„ç¨‹åºå…·ä½“çš„æ–¹æ³• 2.åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ å®é™…è¢«å¢å¼ºçš„æ–¹æ³•ï¼ˆä¸€ä¸ªæˆ–ä¸€ç»„è¿æ¥ç‚¹ï¼‰ï¼Œå¯é€šè¿‡@Pointcutæ³¨è§£åˆ°æ–¹æ³•ä¸ŠæŠ½å–å…±åŒåˆ‡å…¥ç‚¹ï¼Œé€šè¿‡åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æˆ–è€…åŒ¹é…çš„æ–¹å¼æŒ‡æ˜åˆ‡å…¥ç‚¹ã€‚ 3.é€šçŸ¥ï¼ˆå¢å¼ºï¼‰ï¼ˆAdviceï¼‰ å®é™…å¢å¼ºçš„éƒ¨åˆ†ï¼Œåˆ‡é¢è¦å®Œæˆçš„å„ä¸ªå·¥ä½œï¼Œæ¯”å¦‚å‰ç½®åç½®æ—¥å¿—ç­‰ã€‚é€šçŸ¥ç±»å‹ï¼šå‰ç½®é€šçŸ¥ã€åç½®é€šçŸ¥ã€ç¯ç»•é€šçŸ¥ã€å¼‚å¸¸é€šçŸ¥ã€æœ€ç»ˆé€šçŸ¥ 4.åˆ‡é¢ï¼ˆAspectï¼‰ å°è£… å„ä¸ªé€šçŸ¥åº”ç”¨åˆ°åˆ‡å…¥ç‚¹çš„è¿‡ç¨‹åŠ¨ä½œ çš„ä¸€ä¸ª æ ‡æ³¨@Aspectçš„ ç±» AOPæ“ä½œï¼ˆå‡†å¤‡ï¼‰ 1ã€Springæ¡†æ¶ä¸€èˆ¬éƒ½æ˜¯åŸºäºAspectJå®ç°AOPæ“ä½œ ï¼ˆ1ï¼‰AspectJä¸æ˜¯Springç»„æˆéƒ¨åˆ†ï¼Œç‹¬ç«‹AOPæ¡†æ¶ï¼Œä¸€èˆ¬æŠŠAspectJå’ŒSpirngæ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œè¿›è¡ŒAOPæ“ä½œ 2ã€åŸºäº **AspectJ **å®ç°AOPæ“ä½œ ï¼ˆ1ï¼‰åŸºäºxmlé…ç½®æ–‡ä»¶å®ç° ï¼ˆ2ï¼‰åŸºäºæ³¨è§£æ–¹å¼å®ç°ï¼ˆä½¿ç”¨ï¼‰ 3ã€åœ¨é¡¹ç›®å·¥ç¨‹é‡Œé¢å¼•å…¥AOPç›¸å…³ä¾èµ– 4ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ ï¼ˆ1ï¼‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä½œç”¨ï¼šçŸ¥é“å¯¹å“ªä¸ªç±»é‡Œé¢çš„å“ªä¸ªæ–¹æ³•è¿›è¡Œå¢å¼º ï¼ˆ2ï¼‰è¯­æ³•ç»“æ„ï¼š execution([æƒé™ä¿®é¥°ç¬¦] [è¿”å›ç±»å‹] [ç±»å…¨è·¯å¾„] [æ–¹æ³•åç§° ]-([å‚æ•°åˆ—è¡¨])) ä¸¾ä¾‹1ï¼šå¯¹com.atguigu.dao.BookDaoç±»é‡Œé¢çš„addè¿›è¡Œå¢å¼º execution(* com.atguigu.dao.BookDao.add(..)) ä¸¾ä¾‹2ï¼šå¯¹com.atguigu.dao.BookDaoç±»é‡Œé¢çš„æ‰€æœ‰çš„æ–¹æ³•è¿›è¡Œå¢å¼º execution(* com.atguigu.dao.BookDao.* (..)) ä¸¾ä¾‹3ï¼šå¯¹com.atguigu.daoåŒ…é‡Œé¢æ‰€æœ‰ç±»ï¼Œç±»é‡Œé¢æ‰€æœ‰æ–¹æ³•è¿›è¡Œå¢å¼º execution(* com.atguigu.dao.. (..)) AOPæ“ä½œï¼ˆ æ³¨è§£ï¼‰ 1ã€åˆ›å»ºç±»ï¼Œåœ¨ç±»é‡Œé¢å®šä¹‰æ–¹æ³• 12345678import org.springframework.stereotype.Component;@Componentpublic class User { public void add() { System.out.println(&quot;add.......&quot;); }} 2ã€åˆ›å»ºå¢å¼ºç±»ï¼ˆç¼–å†™å¢å¼ºé€»è¾‘ï¼‰ â€‹ åœ¨å¢å¼ºç±»é‡Œé¢ï¼Œåˆ›å»ºæ–¹æ³•ï¼Œè®©ä¸åŒæ–¹æ³•ä»£è¡¨ä¸åŒé€šçŸ¥ç±»å‹,@AspectæŠŠå½“å‰ç±»æ ‡è¯†ä¸ºä¸€ä¸ªåˆ‡é¢ä¾›å®¹å™¨è¯»å–ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051package com.lxl.spring5.aop.aspectjanno;import org.aspectj.lang.ProceedingJoinPoint;import org.aspectj.lang.annotation.*;import org.springframework.stereotype.Component;//å¢å¼ºçš„ç±»@Component//æŠŠå½“å‰ç±»æ ‡è¯†ä¸ºä¸€ä¸ªåˆ‡é¢ä¾›å®¹å™¨è¯»å–@Aspect// ç”Ÿæˆä»£ç†å¯¹è±¡public class UserProxy { // å‰ç½®é€šçŸ¥ //@Beforeæ³¨è§£è¡¨ç¤ºä½œä¸ºå‰ç½®é€šçŸ¥ @Before(value = &quot;execution(* com.lxl.spring5.aop.aspectjanno.User.add(..))&quot;) public void before() { System.out.println(&quot;before.........&quot;); } //åç½®é€šçŸ¥ï¼ˆè¿”å›é€šçŸ¥ï¼‰// åœ¨æ–¹æ³•è¿”å›ç»“æœä¹‹åæ‰§è¡Œ// å¼‚å¸¸æ—¶ä¸æ‰§è¡Œ @AfterReturning(value = &quot;execution(* com.lxl.spring5.aop.aspectjanno.User.add(..))&quot;) public void afterReturning() { System.out.println(&quot;afterReturning.........&quot;); } //æœ€ç»ˆé€šçŸ¥// æ–¹æ³•ä¹‹åæ‰§è¡Œ// å¼‚å¸¸æ—¶ä¹Ÿæ‰§è¡Œ @After(value = &quot;execution(* com.lxl.spring5.aop.aspectjanno.User.add(..))&quot;) public void after() { System.out.println(&quot;after.........&quot;); } //å¼‚å¸¸é€šçŸ¥// å‡ºç°å¼‚å¸¸æ‰§è¡Œ @AfterThrowing(value = &quot;execution(* com.lxl.spring5.aop.aspectjanno.User.add(..))&quot;) public void afterThrowing() { System.out.println(&quot;afterThrowing.........&quot;); } //ç¯ç»•é€šçŸ¥ @Around(value = &quot;execution(* com.lxl.spring5.aop.aspectjanno.User.add(..))&quot;) public void around(ProceedingJoinPoint proceedingJoinPoint) throws Throwable { System.out.println(&quot;ç¯ç»•ä¹‹å‰.........&quot;);// è¢«å¢å¼ºçš„æ–¹æ³•æ‰§è¡Œ proceedingJoinPoint.proceed(); System.out.println(&quot;ç¯ç»•ä¹‹å.........&quot;); }} 3ã€è¿›è¡Œé€šçŸ¥çš„é…ç½® ï¼ˆ1ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯æ³¨è§£æ‰«æ 12345678910111213141516171819&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!--=====================AOPæ³¨è§£ä½¿ç”¨======================--&gt; &lt;!-- æ·»åŠ å‘½åç©ºé—´ï¼šaopã€context--&gt; &lt;!-- å¼€å¯æ³¨è§£æ‰«æ --&gt; &lt;context:component-scan base-package=&quot;com.lxl.spring5.aop.aspectjanno&quot;&gt;&lt;/context:component-scan&gt; &lt;!-- å¼€å¯Aspectç”Ÿæˆä»£ç†å¯¹è±¡--&gt; &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;&lt;/beans&gt; 4.æµ‹è¯• 12345678@Testpublic void TestAopAnno() { ApplicationContext context = new ClassPathXmlApplicationContext(&quot;aop1.xml&quot;); User user= context.getBean(&quot;user&quot;,User.class); user.add();} 5.ç»†èŠ‚ï¼šå…±åŒåˆ‡å…¥ç‚¹æŠ½å– 1234567891011 //å…±åŒåˆ‡å…¥ç‚¹æŠ½å– @Pointcut(value = &quot;execution(* com.lxl.spring5.aop.aspectjanno.User.add(..))&quot;) public void samepoint() { } // å‰ç½®é€šçŸ¥ //@Beforeæ³¨è§£è¡¨ç¤ºä½œä¸ºå‰ç½®é€šçŸ¥ @Before(value = &quot;samepoint()&quot;)// @Before(value = &quot;execution(* com.lxl.spring5.aop.aspectjanno.User.add(..))&quot;) public void before() { System.out.println(&quot;before.........&quot;); } 6ã€ç»†èŠ‚ï¼šè®¾ç½®å¢å¼ºç±»ä¼˜å…ˆçº§ â€‹ æœ‰å¤šä¸ªå¢å¼ºç±»å¤šåŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œè®¾ç½®å¢å¼ºç±»ä¼˜å…ˆçº§ï¼Œåœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ æ³¨è§£ @Order(æ•°å­—ç±»å‹å€¼)ï¼Œæ•°å­—ç±»å‹å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚ 1234567891011121314151617181920212223242526import org.aspectj.lang.ProceedingJoinPoint;import org.aspectj.lang.annotation.*;import org.springframework.core.annotation.Order;import org.springframework.stereotype.Component;//å¢å¼ºçš„ç±»@Component@Aspect@Order(1)// ç”Ÿæˆä»£ç†å¯¹è±¡public class PersonProxy { //å…±åŒåˆ‡å…¥ç‚¹æŠ½å– @Pointcut(value = &quot;execution(* com.lxl.spring5.aop.aspectjanno.User.add(..))&quot;) public void samepoint() { } // å‰ç½®é€šçŸ¥ //@Beforeæ³¨è§£è¡¨ç¤ºä½œä¸ºå‰ç½®é€šçŸ¥ @Before(value = &quot;samepoint()&quot;)// @Before(value = &quot;execution(* com.lxl.spring5.aop.aspectjanno.User.add(..))&quot;) public void before() { System.out.println(&quot;PersonProxy before.........&quot;); }} 7.å®Œå…¨ä½¿ç”¨æ³¨è§£å¼€å‘ ï¼ˆ1ï¼‰åˆ›å»ºé…ç½®ç±»ï¼Œä¸éœ€è¦åˆ›å»ºxmlé…ç½®æ–‡ä»¶ @Configuration @ComponentScan(basePackages = {&quot;com.lxl&quot;}) @EnableAspectJAutoProxy(proxyTargetClass = true) public class ConfigAop AOPæ“ä½œï¼ˆXMLï¼‰ 1.åˆ›å»ºç±»ä¸å¢å¼ºç±» 12345public class Book { public void buy() { System.out.println(&quot;buy--&quot;); }} 1234567package com.lxl.spring5.aop.aopxml;public class BookProxy { public void before() { System.out.println(&quot;before----&quot;); }} 2.é…ç½®åˆ‡å…¥ç‚¹ 12345678910111213141516171819202122232425&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!--=====================AOP xmlæ“ä½œ======================--&gt; &lt;!--åˆ›å»ºå¯¹è±¡--&gt; &lt;bean id=&quot;book&quot; class=&quot;com.lxl.spring5.aop.aopxml.Book&quot;/&gt; &lt;bean id=&quot;bookProxy&quot; class=&quot;com.lxl.spring5.aop.aopxml.BookProxy&quot;/&gt; &lt;!--é…ç½®aopå¢å¼º--&gt; &lt;aop:config&gt; &lt;!--åˆ‡å…¥ç‚¹--&gt; &lt;aop:pointcut id=&quot;p&quot; expression=&quot;execution(* com.lxl.spring5.aop.aopxml.Book.buy(..))&quot;/&gt; &lt;!--é…ç½®åˆ‡é¢ï¼Œå³æŠŠé€šçŸ¥ï¼ˆå¢å¼ºçš„éƒ¨åˆ†bookProxyï¼‰refåº”ç”¨åˆ°åˆ‡å…¥ç‚¹ï¼ˆbuy()ï¼‰çš„è¿‡ç¨‹åŠ¨ä½œ--&gt; &lt;aop:aspect ref=&quot;bookProxy&quot;&gt; &lt;!--å¢å¼ºä½œç”¨åœ¨å…·ä½“çš„æ–¹æ³•ä¸Š--&gt; &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;p&quot;/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt; 3.æµ‹è¯• 1234567891011121314151617package com.lxl.spring5.aop.aopxml;import com.lxl.spring5.aop.aopanno.User;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class TestAopXml { @Test public void TestAopAnno() { ApplicationContext context = new ClassPathXmlApplicationContext(&quot;aop2.xml&quot;); Book book= context.getBean(&quot;book&quot;,Book.class); book.buy(); }} JdbcTemplate ä¾èµ–å‡†å¤‡ é…ç½®è¿æ¥æ±  jdbc.properties 1234prop.driverClass=com.mysql.jdbc.Driverprop.url=jdbc:mysql://localhost:3306/learn?useUnicode=true&amp;characterEncoding=utf8prop.userName=rootprop.password=root 1234567891011121314151617181920212223242526&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!-- å¼•å…¥å¤–éƒ¨æ–‡ä»¶--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;!-- é…ç½®druidè¿æ¥æ± --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;${prop.driverClass}&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;${prop.url}&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;${prop.userName}&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;${prop.password}&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- JdbcTemplateå¯¹è±¡ --&gt; &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt; &lt;!--æ³¨å…¥dataSource--&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- ç»„ä»¶æ‰«æ --&gt; &lt;context:component-scan base-package=&quot;com.lxl.spring5.jdbctemplatel&quot;&gt;&lt;/context:component-scan&gt;&lt;/beans&gt; æ‰€æœ‰æ•°æ®åº“åŸºæœ¬æ“ä½œ åˆ›å»ºå®ä½“ç±»ã€serviceç±»ï¼Œåˆ›å»ºdaoç±»ï¼Œåœ¨daoæ³¨å…¥jdbcTemplateå¯¹è±¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185//=======================Dao=============================import com.lxl.spring5.jdbctemplatel.entity.Book;import java.util.List;public interface BookDao { public void add(Book book); public void delete(String id); public void updateBook(Book book); public int selectCount(); public Book selectOneBook(String bookid); public List&lt;Book&gt; selectAllBooks(); public void batchInsert(List&lt;Object[]&gt; books); public void batchUpdateBook(List&lt;Object[]&gt; batchArgs); public void batchDeleteBook(List&lt;Object[]&gt; batchArgs);}//=======================DaoImpl=============================import com.lxl.spring5.jdbctemplatel.entity.Book;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.jdbc.core.BeanPropertyRowMapper;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.stereotype.Repository;import java.util.Arrays;import java.util.List;@Repositorypublic class BookDaoImpl implements BookDao { //æ³¨å…¥JdbcTemplate @Autowired private JdbcTemplate jdbcTemplate; @Override public void add(Book book) { String sql = &quot;insert into book values(?,?,?) &quot;; String args[] = {book.getBookId(), book.getBookName(), book.getBookStatus()}; int update = jdbcTemplate.update(sql, args); System.out.println(&quot;æ›´æ–°äº†&quot; + update + &quot;æ¡æ•°æ®&quot;); } @Override public void updateBook(Book book) { String sql = &quot;update book set bookname=?,bookstatus=? where bookid=?&quot;; Object[] args = {book.getBookName(), book.getBookStatus(), book.getBookId()}; int update = jdbcTemplate.update(sql, args); System.out.println(update); } @Override public void delete(String id) { String sql = &quot;delete from book where bookid=?&quot;; int update = jdbcTemplate.update(sql, id); System.out.println(update); } //æŸ¥è¯¢è¡¨è®°å½•æ•° @Override public int selectCount() { String sql = &quot;select count(*) from book&quot;; Integer count = jdbcTemplate.queryForObject(sql, Integer.class); return count; } //æŸ¥è¯¢å•ä¸ªå¯¹è±¡ @Override public Book selectOneBook(String bookid) { String sql = &quot;select * from book where bookid=?&quot;; Book book = jdbcTemplate.queryForObject(sql, new BeanPropertyRowMapper&lt;Book&gt;(Book.class), bookid); return book; } //æŸ¥è¯¢å¤šä¸ªå¯¹è±¡ @Override public List&lt;Book&gt; selectAllBooks() { String sql = &quot;select * from book&quot;; List&lt;Book&gt; query = jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;Book&gt;(Book.class)); return query; } @Override public void batchInsert(List&lt;Object[]&gt; books) { String sql = &quot;insert into book values(?,?,?)&quot;; int[] ints = jdbcTemplate.batchUpdate(sql, books); System.out.println(Arrays.toString(ints)); }// æ‰¹é‡ä¿®æ”¹ @Override public void batchUpdateBook(List&lt;Object[]&gt; batchArgs) { String sql = &quot;update book set bookname=?,bookstatus=? where bookid=?&quot;; int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs); System.out.println(Arrays.toString(ints)); }// æ‰¹é‡åˆ é™¤ @Override public void batchDeleteBook(List&lt;Object[]&gt; batchArgs) { String sql = &quot;delete from book where bookid=?&quot;; int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs); System.out.println(Arrays.toString(ints)); }}//======================Service==============================import com.lxl.spring5.jdbctemplatel.dao.BookDao;import com.lxl.spring5.jdbctemplatel.entity.Book;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.List;@Servicepublic class BookService { //æ³¨å…¥dao @Autowired private BookDao bookDao; public void addBook(Book book){ bookDao.add(book); } public void updateBook(Book book){ bookDao.updateBook(book); } public void delete(String id){ bookDao.delete(id); } public int selectCount(){ return bookDao.selectCount(); } public Book selectOneBook(String bookid){ return bookDao.selectOneBook(bookid); } public List&lt;Book&gt; selectAllBooks(){ return bookDao.selectAllBooks(); } public void batchInsert(List&lt;Object[]&gt; books){ bookDao.batchInsert(books); }; public void batchUpdateBook(List&lt;Object[]&gt; books){ bookDao.batchUpdateBook(books); }; public void batchDeleteBook(List&lt;Object[]&gt; books){ bookDao.batchDeleteBook(books); };}//========================entity============================public class Book { private String BookId; private String BookName; private String BookStatus; @Override public String toString() { return &quot;Book{&quot; + &quot;BookId='&quot; + BookId + '\\'' + &quot;, BookName='&quot; + BookName + '\\'' + &quot;, BookStatus='&quot; + BookStatus + '\\'' + '}'; } public String getBookId() { return BookId; } public void setBookId(String bookId) { BookId = bookId; } public String getBookName() { return BookName; } public void setBookName(String bookName) { BookName = bookName; } public String getBookStatus() { return BookStatus; } public void setBookStatus(String bookStatus) { BookStatus = bookStatus; }} æ–°å»ºå¯¹åº”æ•°æ®åº“å­—æ®µåæµ‹è¯• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283import com.lxl.spring5.jdbctemplatel.entity.Book;import com.lxl.spring5.jdbctemplatel.service.BookService;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;import java.util.ArrayList;import java.util.List;public class BookTest { @Test public void jdbcTemplateTest() { ApplicationContext context = new ClassPathXmlApplicationContext(&quot;jdbctemplate1.xml&quot;);// å¢åŠ // Book book = new Book();// BookService bookService = context.getBean(&quot;bookService&quot;, BookService.class);// book.setBookId(&quot;1&quot;);// book.setBookName(&quot;Javaå®å…¸&quot;);// book.setBookStatus(&quot;å®Œå¥½&quot;);// bookService.addBook(book);// ä¿®æ”¹ï¼Œæ— å€¼æ”¹ä¸ºnull// Book book = new Book();// BookService bookService = context.getBean(&quot;bookService&quot;, BookService.class);// book.setBookId(&quot;1&quot;);// book.setBookStatus(&quot;æ”¹äº†&quot;);// bookService.updateBook(book);// æ ¹æ®idåˆ é™¤// BookService bookService = context.getBean(&quot;bookService&quot;, BookService.class);// bookService.delete(&quot;1&quot;);// æŸ¥è¯¢æ•°ç›®// BookService bookService = context.getBean(&quot;bookService&quot;, BookService.class);// int i = bookService.selectCount();// System.out.println(i);// æŸ¥è¯¢å•ä¸ªå¯¹è±¡// BookService bookService = context.getBean(&quot;bookService&quot;, BookService.class);// Book book = bookService.selectOneBook(&quot;1&quot;);// System.out.println(book);// æŸ¥è¯¢ä¸€ç»„å¯¹è±¡// BookService bookService = context.getBean(&quot;bookService&quot;, BookService.class);// List&lt;Book&gt; book = bookService.selectAllBooks();// System.out.println(book);// æ‰¹é‡æ–°å¢ä¸€ç»„å¯¹è±¡// BookService bookService = context.getBean(&quot;bookService&quot;, BookService.class);// List&lt;Object[]&gt; books = new ArrayList&lt;&gt;();// Object[] o1={&quot;3&quot;,&quot;java&quot;,&quot;a&quot;};// Object[] o2={&quot;4&quot;,&quot;orcle&quot;,&quot;b&quot;};// Object[] o3={&quot;5&quot;,&quot;net&quot;,&quot;v&quot;};// books.add(o1);// books.add(o2);// books.add(o3);// bookService.batchInsert(books);// æ‰¹é‡ä¿®æ”¹// BookService bookService = context.getBean(&quot;bookService&quot;, BookService.class);// List&lt;Object[]&gt; batchArgs = new ArrayList&lt;&gt;();//// sqlå‚æ•°é¡ºåº// Object[] o1 = {&quot;java1&quot;, &quot;a3&quot;, &quot;3&quot;};// Object[] o2 = {&quot;orcle1&quot;, &quot;b4&quot;, &quot;4&quot;};// batchArgs.add(o1);// batchArgs.add(o2);//// è°ƒç”¨æ–¹æ³•å®ç°æ‰¹é‡ä¿®æ”¹// bookService.batchUpdateBook(batchArgs); //æ‰¹é‡åˆ é™¤ BookService bookService = context.getBean(&quot;bookService&quot;, BookService.class); List&lt;Object[]&gt; batchArgs = new ArrayList&lt;&gt;(); Object[] o1 = {&quot;3&quot;}; Object[] o2 = {&quot;4&quot;}; batchArgs.add(o1); batchArgs.add(o2); //è°ƒç”¨æ–¹æ³•å®ç°æ‰¹é‡åˆ é™¤ bookService.batchDeleteBook(batchArgs); }} å¯èƒ½BUG Client does not support authentication protocol requested by server; 123mysql -hlocalhost -uroot -pALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';FLUSH PRIVILEGES; Unknown initial character set index '255' received from server. Initial client character set can be forced via the 'characterEncoding' property. 12String urlåæ·»åŠ ?useUnicode=true&amp;characterEncoding=utf8 mybatis urlåæ·»åŠ ?useUnicode=true&amp;characterEncoding=utf8 äº‹åŠ¡ 1.ä»€ä¹ˆæ˜¯äº‹åŠ¡ ï¼ˆ1ï¼‰äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œæœ€åŸºæœ¬å•å…ƒï¼Œé€»è¾‘ä¸Šä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥æ‰€æœ‰æ“ä½œéƒ½å¤±è´¥ ï¼ˆ2ï¼‰å…¸å‹åœºæ™¯ï¼šé“¶è¡Œè½¬è´¦ lucy è½¬è´¦100å…ƒ ç»™mary lucyå°‘100ï¼Œmaryå¤š100 2.äº‹åŠ¡å››ä¸ªç‰¹æ€§ï¼ˆACIDï¼‰ ï¼ˆ1ï¼‰åŸå­æ€§ ï¼ˆ2ï¼‰ä¸€è‡´æ€§ ï¼ˆ3ï¼‰éš”ç¦»æ€§ ï¼ˆ4ï¼‰æŒä¹…æ€§ 3.äº‹ç‰©æµ‹è¯•ç¯å¢ƒæ­å»º åˆ›å»ºæ•°æ®åº“ 123456789101112131415161718192021SET NAMES utf8mb4;SET FOREIGN_KEY_CHECKS = 0;-- ------------------------------ Table structure for t_account-- ----------------------------DROP TABLE IF EXISTS `t_account`;CREATE TABLE `t_account` ( `id` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL, `username` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, `money` int NULL DEFAULT NULL, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;-- ------------------------------ Records of t_account-- ----------------------------INSERT INTO `t_account` VALUES ('1', 'lucy', 900);INSERT INTO `t_account` VALUES ('2', 'mary', 1100);SET FOREIGN_KEY_CHECKS = 1; åˆ›å»ºserviceï¼Œæ­å»ºdaoï¼Œå®Œæˆå¯¹è±¡åˆ›å»ºå’Œæ³¨å…¥å…³ç³» 123456package com.lxl.spring5.transactionl.dao;public interface UserDao { public void reduceMoney(); public void addMoney();} 1234567891011121314151617181920212223242526package com.lxl.spring5.transactionl.dao;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.stereotype.Repository;@Repositorypublic class UserDaoImpl implements UserDao { @Autowired private JdbcTemplate jdbcTemplate; //lucyè½¬è´¦100ç»™mary // å°‘é’± @Override public void reduceMoney() { String sql = &quot;update t_account set money=money-? where username=?&quot;; jdbcTemplate.update(sql, 100, &quot;lucy&quot;); } //å¤šé’± @Override public void addMoney() { String sql = &quot;update t_account set money=money+? where username=?&quot;; jdbcTemplate.update(sql, 100, &quot;mary&quot;); }} 1234567891011121314151617181920package com.lxl.spring5.transactionl.service;import com.lxl.spring5.transactionl.dao.UserDao;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;@Servicepublic class UserService { // æ³¨å…¥dao @Autowired private UserDao userDao; //è½¬è´¦çš„æ–¹æ³• public void accountMoney() { // lucyå°‘100 userDao.reduceMoney(); // maryå¤š100 userDao.addMoney(); }} 1234567891011121314151617181920212223242526&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!-- å¼•å…¥å¤–éƒ¨æ–‡ä»¶--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;!-- é…ç½®è¿æ¥æ± --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;${prop.driverClass}&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;${prop.url}&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;${prop.userName}&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;${prop.password}&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- JdbcTemplateå¯¹è±¡ --&gt; &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt; &lt;!--æ³¨å…¥dataSource--&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- ç»„ä»¶æ‰«æ --&gt; &lt;context:component-scan base-package=&quot;com.lxl.spring5.transactionl&quot;&gt;&lt;/context:component-scan&gt;&lt;/beans&gt; æµ‹è¯• 12345678910111213141516package com.lxl.spring5.transactionl.test;import com.lxl.spring5.transactionl.service.UserService;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class transactionTest {@Test public void transactionTest() { ApplicationContext context = new ClassPathXmlApplicationContext(&quot;transaction1.xml&quot;); UserService userService = context.getBean(&quot;userService&quot;, UserService.class); userService.accountMoney();}} 4.å‡ºç°å¼‚å¸¸ å‡ºç°å¼‚å¸¸åï¼Œlucyå°‘100ï¼Œmaryä¸ä¼šå˜å¯¼è‡´æ•°æ®æ›´æ”¹é”™è¯¯ã€‚ è§£å†³1ï¼štryæ£€æµ‹å¼‚å¸¸ï¼Œcatchæ‰‹åŠ¨å›æ»š è§£å†³2ï¼šä½¿ç”¨Springå£°æ˜å¼äº‹åŠ¡ï¼Œå¦‚ä¸‹5æ‰€ç¤ºã€‚ 1234567public void accountMoney() { // lucyå°‘100 userDao.reduceMoney(); int i=10/0; // maryå¤š100 userDao.addMoney();} 5.äº‹åŠ¡æ“ä½œï¼ˆåŠæ³¨è§£ï¼‰ äº‹åŠ¡æ·»åŠ åˆ°JavaEEä¸‰å±‚ç»“æ„é‡Œé¢Serviceå±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰ åœ¨Springè¿›è¡Œäº‹åŠ¡ç®¡ç†æ“ä½œ ï¼ˆ1ï¼‰æœ‰ä¸¤ç§æ–¹å¼ï¼šç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†å’Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼ˆä½¿ç”¨ï¼‰ å£°æ˜å¼äº‹åŠ¡ç®¡ç† ï¼ˆ1ï¼‰åŸºäºæ³¨è§£æ–¹å¼ï¼ˆä½¿ç”¨ï¼‰ ï¼ˆ2ï¼‰åŸºäºxmlé…ç½®æ–‡ä»¶æ–¹å¼ åœ¨Springè¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œåº•å±‚ä½¿ç”¨AOPåŸç† Springäº‹åŠ¡ç®¡ç†API ï¼ˆ1ï¼‰æä¾›ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿™ä¸ªæ¥å£é’ˆå¯¹ä¸åŒçš„æ¡†æ¶æä¾›ä¸åŒçš„å®ç°ç±» ï¼ˆ2ï¼‰é…ç½®äº‹ç‰©ç®¡ç†å™¨ï¼Œå¼•å…¥åç§°ç©ºé—´ txï¼Œå¼€å¯äº‹ç‰©æ³¨è§£ 12345678910111213&lt;!--1.å¼•å…¥åç§°ç©ºé—´tx--&gt;xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&lt;!--2.åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨--&gt;&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;!--3.æ³¨å…¥æ•°æ®æº--&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!--4.å¼€å¯äº‹åŠ¡æ³¨è§£--&gt;&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;&lt;!--5.æ·»åŠ @Transactionalæ³¨è§£åˆ°éœ€è¦çš„ç±»æˆ–è€…æ–¹æ³•ä¸Šï¼Œå…¶ä½ç½®å†³å®šèµ·ä½œç”¨åŸŸã€‚--&gt; 6.äº‹åŠ¡å‚æ•° propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º â€‹ ï¼ˆ1ï¼‰äº‹åŠ¡ä¼ æ’­è¡Œä¸ºç”¨æ¥æè¿°ç”±æŸä¸€ä¸ªäº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¿®é¥°çš„æ–¹æ³•è¢«åµŒå¥—è¿›å¦ä¸€ä¸ªæ–¹æ³•çš„æ—¶äº‹åŠ¡å¦‚ä½•ä¼ æ’­ã€‚ ç”¨ä¼ªä»£ç è¯´æ˜ï¼š 123456789public void methodA(){ methodB(); //doSomething}@Transaction(Propagation=XXX)public void methodB(){ //doSomething} â€‹ ä»£ç ä¸­methodA()æ–¹æ³•åµŒå¥—è°ƒç”¨äº†methodB()æ–¹æ³•ï¼ŒmethodB()çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºç”±@Transaction(Propagation=XXX)è®¾ç½®å†³å®šã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯methodA()å¹¶æ²¡æœ‰å¼€å¯äº‹åŠ¡ï¼ŒæŸä¸€ä¸ªäº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¿®é¥°çš„æ–¹æ³•å¹¶ä¸æ˜¯å¿…é¡»è¦åœ¨å¼€å¯äº‹åŠ¡çš„å¤–å›´æ–¹æ³•ä¸­è°ƒç”¨ã€‚ â€‹ ï¼ˆ2ï¼‰Springä¸­ä¸ƒç§äº‹åŠ¡ä¼ æ’­è¡Œä¸º äº‹åŠ¡ä¼ æ’­( propagation )è¡Œä¸ºç±»å‹ è¯´æ˜ PROPAGATION_REQUIRED requirde å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœå·²ç»å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŠ å…¥åˆ°è¿™ä¸ªäº‹åŠ¡ä¸­ã€‚è¿™æ˜¯æœ€å¸¸è§çš„é€‰æ‹©ã€‚ PROPAGATION_SUPPORTS supports æ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œã€‚ PROPAGATION_MANDATORY mandatory ä½¿ç”¨å½“å‰çš„äº‹åŠ¡ï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚ PROPAGATION_REQUIRES_NEW requirde _new æ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚ PROPAGATION_NOT_SUPPORTED not_supportedä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚ PROPAGATION_NEVER never ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ PROPAGATION_NESTED nested å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ‰§è¡Œä¸PROPAGATION_REQUIREDç±»ä¼¼çš„æ“ä½œã€‚ ioslationï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¼ æ’­å±æ€§ â€‹ 1.é¦–å…ˆè¯´æ˜ä¸€ä¸‹äº‹åŠ¡å¹¶å‘å¼•èµ·çš„ä¸‰ç§æƒ…å†µï¼š 1) Dirty Reads è„è¯» ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨å¯¹æ•°æ®è¿›è¡Œæ›´æ–°æ“ä½œï¼Œä½†æ˜¯æ›´æ–°è¿˜æœªæäº¤ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡è¿™æ—¶ä¹Ÿæ¥æ“ä½œè¿™ç»„æ•°æ®ï¼Œå¹¶ä¸”è¯»å–äº†å‰ä¸€ä¸ªäº‹åŠ¡è¿˜æœªæäº¤çš„æ•°æ®ï¼Œè€Œå‰ä¸€ä¸ªäº‹åŠ¡å¦‚æœæ“ä½œå¤±è´¥è¿›è¡Œäº†å›æ»šï¼Œåä¸€ä¸ªäº‹åŠ¡è¯»å–çš„å°±æ˜¯é”™è¯¯æ•°æ®ï¼Œè¿™æ ·å°±é€ æˆäº†è„è¯»ã€‚å‰äººåæ‚”åäººé­æ®ƒ 2) Non-Repeatable Reads ä¸å¯é‡å¤è¯» ä¸€ä¸ªäº‹åŠ¡å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œåœ¨è¯¥äº‹åŠ¡è¿˜æœªç»“æŸæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿå¯¹è¯¥æ•°æ®è¿›è¡Œäº†æ“ä½œï¼Œè€Œä¸”åœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸¤æ¬¡æ¬¡è¯»å–ä¹‹é—´ï¼Œç¬¬äºŒä¸ªäº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œäº†æ›´æ–°ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªäº‹åŠ¡å‰åä¸¤æ¬¡è¯»å–åˆ°çš„æ•°æ®æ˜¯ä¸åŒçš„ï¼Œè¿™æ ·å°±é€ æˆäº†ä¸å¯é‡å¤è¯»ã€‚æˆ‘ç”¨å¦å…‹ä½ æ”¹æˆé£æœº 3) Phantom Reads å¹»åƒè¯» ç¬¬ä¸€ä¸ªæ•°æ®æ­£åœ¨æŸ¥è¯¢ç¬¦åˆæŸä¸€æ¡ä»¶çš„æ•°æ®ï¼Œè¿™æ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡åˆæ’å…¥äº†ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡åœ¨ç¬¬äºŒæ¬¡æŸ¥è¯¢ç¬¦åˆåŒä¸€æ¡ä»¶çš„æ•°æ®æ—¶ï¼Œå‘ç°å¤šäº†ä¸€æ¡å‰ä¸€æ¬¡æŸ¥è¯¢æ—¶æ²¡æœ‰çš„æ•°æ®ï¼Œä»¿ä½›å¹»è§‰ä¸€æ ·ï¼Œè¿™å°±æ˜¯å¹»åƒè¯»ã€‚ä½ åƒé»„è‰²é¢åŒ…ç»™ä½ å¡å¨é»„è‰²ç‰©ä½“ éé‡å¤åº¦å’Œå¹»åƒè¯»çš„åŒºåˆ«ï¼š éé‡å¤è¯»æ˜¯æŒ‡åŒä¸€æŸ¥è¯¢åœ¨åŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¿›è¡Œï¼Œç”±äºå…¶ä»–æäº¤äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹æˆ–åˆ é™¤ï¼Œæ¯æ¬¡è¿”å›ä¸åŒçš„ç»“æœé›†ï¼Œæ­¤æ—¶å‘ç”Ÿéé‡å¤è¯»ã€‚å¹»åƒè¯»æ˜¯æŒ‡åŒä¸€æŸ¥è¯¢åœ¨åŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¿›è¡Œï¼Œç”±äºå…¶ä»–æäº¤äº‹åŠ¡æ‰€åšçš„æ’å…¥æ“ä½œï¼Œæ¯æ¬¡è¿”å›ä¸åŒçš„ç»“æœé›†ï¼Œæ­¤æ—¶å‘ç”Ÿå¹»åƒè¯»ã€‚è¡¨é¢ä¸Šçœ‹ï¼ŒåŒºåˆ«å°±åœ¨äºéé‡å¤è¯»èƒ½çœ‹è§å…¶ä»–äº‹åŠ¡æäº¤çš„ä¿®æ”¹å’Œåˆ é™¤ï¼Œè€Œå¹»åƒèƒ½çœ‹è§å…¶ä»–äº‹åŠ¡æäº¤çš„æ’å…¥ã€‚ â€‹ 2.éš”ç¦»çº§åˆ«ï¼š 1) DEFAULT ï¼ˆé»˜è®¤ï¼‰ è¿™æ˜¯ä¸€ä¸ªPlatfromTransactionManageré»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼Œä½¿ç”¨æ•°æ®åº“é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚å¦å¤–å››ä¸ªä¸JDBCçš„éš”ç¦»çº§åˆ«ç›¸å¯¹åº”ã€‚ 2) READ_UNCOMMITTED ï¼ˆè¯»æœªæäº¤ï¼‰ è¿™æ˜¯äº‹åŠ¡æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå®ƒå…è®¸å¦å¤–ä¸€ä¸ªäº‹åŠ¡å¯ä»¥çœ‹åˆ°è¿™ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚è¿™ç§éš”ç¦»çº§åˆ«ä¼šäº§ç”Ÿè„è¯»ï¼Œä¸å¯é‡å¤è¯»å’Œå¹»åƒè¯»ã€‚ 3) READ_COMMITTED ï¼ˆè¯»å·²æäº¤ï¼‰ ä¿è¯ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹çš„æ•°æ®æäº¤åæ‰èƒ½è¢«å¦å¤–ä¸€ä¸ªäº‹åŠ¡è¯»å–ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¸èƒ½è¯»å–è¯¥äº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚è¿™ç§äº‹åŠ¡éš”ç¦»çº§åˆ«å¯ä»¥é¿å…è„è¯»å‡ºç°ï¼Œä½†æ˜¯å¯èƒ½ä¼šå‡ºç°ä¸å¯é‡å¤è¯»å’Œå¹»åƒè¯»ã€‚ 4) REPEATABLE_READ ï¼ˆå¯é‡å¤è¯»ï¼‰ è¿™ç§äº‹åŠ¡éš”ç¦»çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼Œä½†æ˜¯å¯èƒ½å‡ºç°å¹»åƒè¯»ã€‚å®ƒé™¤äº†ä¿è¯ä¸€ä¸ªäº‹åŠ¡ä¸èƒ½è¯»å–å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®å¤–ï¼Œè¿˜ä¿è¯äº†ä¸å¯é‡å¤è¯»ã€‚ 5) SERIALIZABLEï¼ˆä¸²è¡ŒåŒ–ï¼‰ è¿™æ˜¯èŠ±è´¹æœ€é«˜ä»£ä»·ä½†æ˜¯æœ€å¯é çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œäº‹åŠ¡è¢«å¤„ç†ä¸ºé¡ºåºæ‰§è¡Œã€‚é™¤äº†é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»å¤–ï¼Œè¿˜é¿å…äº†å¹»åƒè¯»ã€‚ timeoutï¼šè¶…æ—¶æ—¶é—´ ï¼ˆ1ï¼‰äº‹åŠ¡éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œæäº¤ï¼Œå¦‚æœä¸æäº¤è¿›è¡Œå›æ»š ï¼ˆ2ï¼‰é»˜è®¤å€¼æ˜¯ -1 ï¼Œè®¾ç½®æ—¶é—´ä»¥ç§’å•ä½è¿›è¡Œè®¡ç®— readOnlyï¼šæ˜¯å¦åªè¯» ï¼ˆ1ï¼‰è¯»ï¼šæŸ¥è¯¢æ“ä½œï¼Œå†™ï¼šæ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ ï¼ˆ2ï¼‰readOnlyé»˜è®¤å€¼falseï¼Œè¡¨ç¤ºå¯ä»¥æŸ¥è¯¢ï¼Œå¯ä»¥æ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ ï¼ˆ3ï¼‰è®¾ç½®readOnlyå€¼æ˜¯trueï¼Œè®¾ç½®æˆtrueä¹‹åï¼Œåªèƒ½æŸ¥è¯¢ rollbackForï¼šå›æ»š ï¼ˆ1ï¼‰è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸è¿›è¡Œäº‹åŠ¡å›æ»š noRollbackForï¼šä¸å›æ»š ï¼ˆ1ï¼‰è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸ä¸è¿›è¡Œäº‹åŠ¡å›æ»š 7.äº‹åŠ¡æ“ä½œï¼ˆXMLï¼‰ ç»­ç”¨ä¸Šé¢ç¤ºä¾‹ï¼Œæ·»åŠ ä¸€ä¸‹é…ç½®å®ç°ä»¥XMLæ–¹å¼å®ç°äº‹ç‰©æ“ä½œï¼Œå»æ‰@Transactionæ³¨è§£åå¤åˆ¶æµ‹è¯•æ–¹æ³•è¿›è¡Œæµ‹è¯•ã€‚ 1234567891011121314&lt;!--æ·»åŠ aopå‘½åç©ºé—´--&gt; &lt;!--æ— éœ€äº‹åŠ¡æ³¨è§£é…ç½®--&gt;&lt;!-- &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;--&gt; &lt;!--é…ç½®é€šçŸ¥--&gt; &lt;tx:advice id=&quot;txadvice&quot;&gt; &lt;!--é…ç½®äº‹åŠ¡å‚æ•°--&gt; &lt;tx:attributes&gt; &lt;!--æŒ‡å®šå“ªç§è§„åˆ™çš„æ–¹æ³•ä¸Šé¢æ·»åŠ äº‹åŠ¡--&gt; &lt;tx:method name=&quot;accountMoney&quot; propagation=&quot;REQUIRED&quot;/&gt; &lt;!--&lt;tx:method name=&quot;account*&quot;/&gt;--&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;!--3 é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢--&gt; &lt;aop:config&gt; &lt;!--é…ç½®åˆ‡å…¥ç‚¹--&gt; &lt;aop:pointcut id=&quot;pt&quot; expression=&quot;execution(* com.lxl.spring5.transactionl.service.UserService.*(..))&quot;/&gt; &lt;!--é…ç½®åˆ‡é¢--&gt; &lt;aop:advisor advice-ref=&quot;txadvice&quot; pointcut-ref=&quot;pt&quot;/&gt; &lt;/aop:config&gt; 8.äº‹åŠ¡æ“ä½œï¼ˆå®Œå…¨æ³¨è§£ï¼‰ æ·»åŠ é…ç½®ç±» 123456789101112131415161718192021222324252627282930313233343536373839404142434445package com.lxl.spring5.transactionl;import com.alibaba.druid.pool.DruidDataSource;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.jdbc.datasource.DataSourceTransactionManager;import org.springframework.transaction.annotation.EnableTransactionManagement;import javax.sql.DataSource;@Configuration//é…ç½®ç±»@ComponentScan(basePackages = &quot;com.lxl.spring5.transactionl&quot;)//ç»„ä»¶æ‰«æ@EnableTransactionManagement// å¼€å¯äº‹åŠ¡public class TxConfig { // åˆ›å»ºæ•°æ®åº“è¿æ¥æ±  @Bean public DruidDataSource getDruidDataSource() { DruidDataSource dataSource = new DruidDataSource(); dataSource.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;); dataSource.setUrl(&quot;jdbc:mysql://localhost:3306/learn?useUnicode=true&amp;characterEncoding=utf8&quot;); dataSource.setUsername(&quot;root&quot;); dataSource.setPassword(&quot;root&quot;); return dataSource; } //åˆ›å»ºJdbcTemplateå¯¹è±¡ @Bean public JdbcTemplate getJdbcTemplate(DataSource dataSource) { //åˆ°iocå®¹å™¨ä¸­æ ¹æ®ç±»å‹æ‰¾åˆ°dataSource JdbcTemplate jdbcTemplate = new JdbcTemplate(); // æ³¨å…¥dataSource jdbcTemplate.setDataSource(dataSource);return jdbcTemplate;} //åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨ @Bean public DataSourceTransactionManager getDataSourceTransactionManager(DataSource dataSource) { DataSourceTransactionManager transactionManager = new DataSourceTransactionManager(); transactionManager.setDataSource(dataSource); return transactionManager; }} æµ‹è¯• 123456789 //å…¨æ³¨è§£æ–¹å¼æµ‹è¯•// å…ˆå»æ‰@Transactionæ³¨è§£ @Test public void transactionAllAnnoTest() { ApplicationContext context = new AnnotationConfigApplicationContext(TxConfig.class); UserService userService = context.getBean(&quot;userService&quot;, UserService.class); userService.accountMoney(); } Spring5æ–°åŠŸèƒ½ Log4j2 æ•´ä¸ªSpring5æ¡†æ¶çš„ä»£ç åŸºäºJava8ï¼Œè¿è¡Œæ—¶å…¼å®¹JDK9ï¼Œè®¸å¤šä¸å»ºè®®ä½¿ç”¨çš„ç±»å’Œæ–¹æ³•åœ¨ä»£ç åº“ä¸­åˆ é™¤Spring 5.0æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£… ï¼ˆ1ï¼‰Spring5å·²ç»ç§»é™¤Log4jConfigListenerï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨Log4j2 ï¼ˆ2ï¼‰Spring5æ¡†æ¶æ•´åˆLog4j2 ç¬¬ä¸€æ­¥ å¼•å…¥jaråŒ… å‡†å¤‡ å¯¼å…¥jaråŒ…å¹¶å¯¼å…¥ä¾èµ–ã€2021.12 Log4j2.17.0 RCE(CVE-2021-44832)æ¼æ´ã€‘ç”Ÿäº§å»ºè®®ä½¿ç”¨2.17.1ä»¥ä¸Š åˆ›å»ºé…ç½®æ–‡ä»¶log4j2 123456789101112131415161718192021&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!--æ—¥å¿—çº§åˆ«ä»¥åŠä¼˜å…ˆçº§æ’åº: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL --&gt;&lt;!--Configurationåé¢çš„statusç”¨äºè®¾ç½®log4j2è‡ªèº«å†…éƒ¨çš„ä¿¡æ¯è¾“å‡ºï¼Œå¯ä»¥ä¸è®¾ç½®ï¼Œå½“è®¾ç½®æˆtraceæ—¶ï¼Œå¯ä»¥çœ‹åˆ°log4j2å†…éƒ¨å„ç§è¯¦ç»†è¾“å‡º--&gt;&lt;!--è®¾ç½®INFOä¼šè¾“å‡ºå‰é¢çº§åˆ«æ‰€æœ‰æ—¥å¿—--&gt;&lt;configuration status=&quot;INFO&quot;&gt; &lt;!--å…ˆå®šä¹‰æ‰€æœ‰çš„appender--&gt; &lt;appenders&gt; &lt;!--è¾“å‡ºæ—¥å¿—ä¿¡æ¯åˆ°æ§åˆ¶å°--&gt; &lt;console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt; &lt;!--æ§åˆ¶æ—¥å¿—è¾“å‡ºçš„æ ¼å¼--&gt; &lt;PatternLayout pattern=&quot;%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt; &lt;/console&gt; &lt;/appenders&gt; &lt;!--ç„¶åå®šä¹‰loggerï¼Œåªæœ‰å®šä¹‰äº†loggerå¹¶å¼•å…¥çš„appenderï¼Œappenderæ‰ä¼šç”Ÿæ•ˆ--&gt; &lt;!--rootï¼šç”¨äºæŒ‡å®šé¡¹ç›®çš„æ ¹æ—¥å¿—ï¼Œå¦‚æœæ²¡æœ‰å•ç‹¬æŒ‡å®šLoggerï¼Œåˆ™ä¼šä½¿ç”¨rootä½œä¸ºé»˜è®¤çš„æ—¥å¿—è¾“å‡º--&gt; &lt;loggers&gt; &lt;root level=&quot;info&quot;&gt; &lt;appender-ref ref=&quot;Console&quot;/&gt; &lt;/root&gt; &lt;/loggers&gt;&lt;/configuration&gt; ä»»æ„è¿è¡Œç¨‹åºå¯è§æ—¥å¿—ï¼Œæ›´æ”¹ æŸ¥çœ‹ä¸åŒçº§åˆ«æ—¥å¿—ã€‚ æ‰‹åŠ¨åŠ æ—¥å¿— 12345@Testpublic void manualLogTest(){ final Logger log = LoggerFactory.getLogger(transactionTest.class); log.warn(&quot;hello log4j==============&quot;);} @Nullable Spring5æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ@Nullableæ³¨è§£ ï¼ˆ1ï¼‰@Nullableæ³¨è§£å¯ä»¥ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢ï¼Œå‚æ•°ä¸Šé¢ï¼Œè¡¨ç¤ºæ–¹æ³•è¿”å›å¯ä»¥ä¸ºç©ºï¼Œå±æ€§å€¼å¯ä»¥ä¸ºç©ºï¼Œå‚æ•°å€¼å¯ä»¥ä¸ºç©º ï¼ˆ2ï¼‰æ³¨è§£ç”¨åœ¨æ–¹æ³•ä¸Šé¢ï¼Œæ–¹æ³•è¿”å›å€¼å¯ä»¥ä¸ºç©º ï¼ˆ3ï¼‰æ³¨è§£ä½¿ç”¨åœ¨æ–¹æ³•å‚æ•°é‡Œé¢ï¼Œæ–¹æ³•å‚æ•°å¯ä»¥ä¸ºç©º ï¼ˆ4ï¼‰æ³¨è§£ä½¿ç”¨åœ¨å±æ€§ä¸Šé¢ï¼Œå±æ€§å€¼å¯ä»¥ä¸ºç©º GenericApplicationContext Spring5æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼GenericApplicationContext,æŠŠè‡ªå·±newçš„å¯¹è±¡åŠ å…¥æœspringç®¡ç†ä¸­ã€‚ 123456789101112//å‡½æ•°å¼é£æ ¼åˆ›å»ºå¯¹è±¡ï¼Œäº¤ç»™springè¿›è¡Œç®¡ç† @Test public void testGenericApplicationContext() { //1 åˆ›å»ºGenericApplicationContextå¯¹è±¡ GenericApplicationContext context = new GenericApplicationContext(); //2 è°ƒç”¨contextçš„æ–¹æ³•å¯¹è±¡æ³¨å†Œ context.refresh(); context.registerBean(&quot;user1&quot;,User.class,() -&gt; new User()); //3 è·å–åœ¨springæ³¨å†Œçš„å¯¹è±¡ // User user = (User)context.getBean(&quot;com.atguigu.spring5.test.User&quot;); User user = (User)context.getBean(&quot;user1&quot;); System.out.println(user); } Spring5æ”¯æŒæ•´åˆJUnit5 ï¼ˆ1ï¼‰æ•´åˆJUnit4 ç¬¬ä¸€æ­¥ å¼•å…¥Springç›¸å…³é’ˆå¯¹æµ‹è¯•ä¾èµ– æµ‹è¯•ä»£ç  1234567891011121314151617181920212223package com.lxl.spring5.JunitTest;import com.lxl.spring5.transactionl.service.UserService;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;@RunWith(SpringJUnit4ClassRunner.class)//å•å…ƒæµ‹è¯•æ¡†æ¶ @ContextConfiguration(&quot;classpath:transaction1.xml&quot;)//åŠ è½½é…ç½®æ–‡ä»¶public class JunitTest4 { @Autowired private UserService userService; @Test public void test1() { userService.accountMoney(); }} ï¼ˆ2ï¼‰Junit5 ideaç‚¹å‡»@Testå¯¼å…¥åŒ… 1234567891011121314151617181920212223package com.lxl.spring5.JunitTest;import com.lxl.spring5.transactionl.service.UserService;import org.junit.jupiter.api.Test;import org.junit.jupiter.api.extension.ExtendWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.junit.jupiter.SpringExtension;import org.springframework.test.context.junit.jupiter.SpringJUnitConfig;//@ExtendWith(SpringExtension.class)//@ContextConfiguration(&quot;classpath:transaction1.xml&quot;)//SpringJUnitConfigæ•ˆæœåŒä¸Šé¢ä¸¤ä¸ªåŒæ—¶ä½¿ç”¨@SpringJUnitConfig(locations = &quot;classpath:transaction1.xml&quot;)public class JunitTest5 { @Autowired private UserService userService; @Test public void test1() { userService.accountMoney(); }} Webflux 1ã€SpringWebfluxä»‹ç» ï¼ˆ1ï¼‰æ˜¯Spring5æ·»åŠ æ–°çš„æ¨¡å—ï¼Œç”¨äºwebå¼€å‘çš„ï¼ŒåŠŸèƒ½å’ŒSpringMVCç±»ä¼¼çš„ï¼ŒWebfluxä½¿ç”¨å½“å‰ä¸€ç§æ¯”è¾ƒæµç¨‹å“åº”å¼ç¼–ç¨‹å‡ºç°çš„æ¡†æ¶ã€‚ ï¼ˆ2ï¼‰ä½¿ç”¨ä¼ ç»Ÿwebæ¡†æ¶ï¼Œæ¯”å¦‚SpringMVCï¼Œè¿™äº›åŸºäºServletå®¹å™¨ï¼ŒWebfluxæ˜¯ä¸€ç§å¼‚æ­¥éé˜»å¡çš„æ¡†æ¶ï¼Œå¼‚æ­¥éé˜»å¡çš„æ¡†æ¶åœ¨Servlet3.1ä»¥åæ‰æ”¯æŒï¼Œæ ¸å¿ƒæ˜¯åŸºäºReactorçš„ç›¸å…³APIå®ç°çš„ã€‚ ï¼ˆ3ï¼‰è§£é‡Šä»€ä¹ˆæ˜¯å¼‚æ­¥éé˜»å¡ å¼‚æ­¥å’ŒåŒæ­¥ éé˜»å¡å’Œé˜»å¡ ä¸Šé¢éƒ½æ˜¯é’ˆå¯¹å¯¹è±¡ä¸ä¸€æ · å¼‚æ­¥å’ŒåŒæ­¥é’ˆå¯¹è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…å‘é€è¯·æ±‚ï¼Œå¦‚æœç­‰ç€å¯¹æ–¹å›åº”ä¹‹åæ‰å»åšå…¶ä»–äº‹æƒ…å°±æ˜¯åŒæ­¥ï¼Œå¦‚æœå‘é€è¯·æ±‚ä¹‹åä¸ç­‰ç€å¯¹æ–¹å›åº”å°±å»åšå…¶ä»–äº‹æƒ…å°±æ˜¯å¼‚æ­¥é˜»å¡å’Œéé˜»å¡é’ˆå¯¹è¢«è°ƒç”¨è€…ï¼Œè¢«è°ƒç”¨è€…å—åˆ°è¯·æ±‚ä¹‹åï¼Œåšå®Œè¯·æ±‚ä»»åŠ¡ä¹‹åæ‰ç»™å‡ºåé¦ˆå°±æ˜¯é˜»å¡ï¼Œå—åˆ°è¯·æ±‚ä¹‹åé©¬ä¸Šç»™å‡ºåé¦ˆç„¶åå†å»åšäº‹æƒ…å°±æ˜¯éé˜»å¡ ï¼ˆ4ï¼‰Webfluxç‰¹ç‚¹ï¼š ç¬¬ä¸€ éé˜»å¡å¼ï¼šåœ¨æœ‰é™èµ„æºä¸‹ï¼Œæé«˜ç³»ç»Ÿååé‡å’Œä¼¸ç¼©æ€§ï¼Œä»¥Reactorä¸ºåŸºç¡€å®ç°å“åº”å¼ç¼–ç¨‹ ç¬¬äºŒ å‡½æ•°å¼ç¼–ç¨‹ï¼šSpring5æ¡†æ¶åŸºäºjava8ï¼ŒWebfluxä½¿ç”¨Java8å‡½æ•°å¼ç¼–ç¨‹æ–¹å¼å®ç°è·¯ç”±è¯·æ±‚ ï¼ˆ5ï¼‰æ¯”è¾ƒSpringMVC ç¬¬ä¸€ ä¸¤ä¸ªæ¡†æ¶éƒ½å¯ä»¥ä½¿ç”¨æ³¨è§£æ–¹å¼ï¼Œéƒ½è¿è¡Œåœ¨Tometç­‰å®¹å™¨ä¸­ ç¬¬äºŒ SpringMVCé‡‡ç”¨å‘½ä»¤å¼ç¼–ç¨‹ï¼ŒWebfluxé‡‡ç”¨å¼‚æ­¥å“åº”å¼ç¼–ç¨‹ æ—¶é—´ç´§è¿«ï¼Œæœªå®Œå¾…ç»­","link":"/2021/02/24/Draft/2021/Spring/"},{"title":"é­‘é­…å…ˆç”Ÿ | å‰ç«¯","text":"VUEã€HTMLã€JSã€ã€ã€ã€ VUE 1.1. åŸºç¡€ 1.1.1. å®‰è£… æµè§ˆå™¨æ’ä»¶ Vue Devtools 12345&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt;&lt;/script&gt;&lt;!--å°½é‡æ˜ç¡®ç‰ˆå·--&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.6.14&quot;&gt;&lt;/script&gt;&lt;!--åŸç”ŸES--&gt;&lt;script type=&quot;module&quot;&gt; import Vue from 'https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.esm.browser.js' &lt;/script&gt; NPM â€¢ NPM èƒ½å¾ˆå¥½åœ°å’Œè¯¸å¦‚ webpack æˆ– Browserify æ¨¡å—æ‰“åŒ…å™¨é…åˆä½¿ç”¨ã€‚åŒæ—¶ Vue ä¹Ÿæä¾›é…å¥—å·¥å…·æ¥å¼€å‘å•æ–‡ä»¶ç»„ä»¶ã€‚ # æœ€æ–°ç¨³å®šç‰ˆ $ npm install vue Â· å‘½ä»¤è¡Œå·¥å…· (CLI) â€¢ Vue æä¾›äº†ä¸€ä¸ªå®˜æ–¹çš„ CLIï¼Œä¸ºå•é¡µé¢åº”ç”¨ (SPA) å¿«é€Ÿæ­å»ºç¹æ‚çš„è„šæ‰‹æ¶ã€‚å®ƒä¸ºç°ä»£å‰ç«¯å·¥ä½œæµæä¾›äº† batteries-included çš„æ„å»ºè®¾ç½®ã€‚åªéœ€è¦å‡ åˆ†é’Ÿçš„æ—¶é—´å°±å¯ä»¥è¿è¡Œèµ·æ¥å¹¶å¸¦æœ‰çƒ­é‡è½½ã€ä¿å­˜æ—¶ lint æ ¡éªŒï¼Œä»¥åŠç”Ÿäº§ç¯å¢ƒå¯ç”¨çš„æ„å»ºç‰ˆæœ¬ã€‚ 1.1.2. ç®€ä»‹ Â· Vue (è¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äº view) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸ç°ä»£åŒ–çš„å·¥å…·é“¾ä»¥åŠå„ç§æ”¯æŒç±»åº“ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚ Â· å£°æ˜å¼æ¸²æŸ“ â€¢ æŒ‡ä»¤ â€¢ v-bind â€¢ æŠŠæ•°æ®ç»‘å®šåˆ° DOM æ–‡æœ¬æˆ– attributeæˆ–DOM ç»“æ„ Â· æ¡ä»¶ä¸å¾ªç¯ â€¢ æŒ‡ä»¤ â€¢ v-for â€¢ ç»‘å®šæ•°ç»„çš„æ•°æ®æ¥æ¸²æŸ“ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨ï¼š â€¢ v-if â€¢ æ§åˆ¶åˆ‡æ¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ˜¾ç¤º Â· å¤„ç†ç”¨æˆ·è¾“å…¥ â€¢ æŒ‡ä»¤ â€¢ v-on Â· ç»„ä»¶åŒ–åº”ç”¨æ„å»º â€¢ // å®šä¹‰åä¸º todo-item çš„æ–°ç»„ä»¶ Vue.component('todo-item', { template: 'è¿™æ˜¯ä¸ªå¾…åŠé¡¹' }) var app = new Vue(...) Â· ä¸è‡ªå®šä¹‰å…ƒç´ çš„å…³ç³» Â· MVVMï¼ˆModel-View-ViewModelï¼‰ â€¢ æ•°æ®-è¯•å›¾-Vueå®ä¾‹åŒ–å¯¹è±¡ Â· ç‰¹ç‚¹ â€¢ å“åº”å¼ â€¢ ç»„ä»¶åŒ– â€¢ ä¼ ç»Ÿæ˜¯jsæˆ–jqæ“ä½œDOMï¼Œæ•°æ®å’Œç•Œé¢åœ¨ä¸€èµ· â€¢ VUEæ˜¯æ•°æ®å±‚å’Œè§†å›¾å±‚åˆ†ç¦»å¼€çš„ 1.1.3. Vue å®ä¾‹ Â· åˆ›å»ºä¸€ä¸ª Vue å®ä¾‹ â€¢ var vm = new Vue({ // é€‰é¡¹ }) Â· æ•°æ®ä¸æ–¹æ³• â€¢ å½“ä¸€ä¸ª Vue å®ä¾‹è¢«åˆ›å»ºæ—¶ï¼Œå®ƒå°† data å¯¹è±¡ä¸­çš„æ‰€æœ‰çš„ property åŠ å…¥åˆ° Vue çš„å“åº”å¼ç³»ç»Ÿä¸­ã€‚å½“è¿™äº› property çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§†å›¾å°†ä¼šäº§ç”Ÿâ€œå“åº”â€ï¼Œå³åŒ¹é…æ›´æ–°ä¸ºæ–°çš„å€¼ã€‚ â€¢ Object.freeze(å¯¹è±¡)ï¼Œè¿™ä¼šé˜»æ­¢ä¿®æ”¹ç°æœ‰çš„ propertyï¼Œä¹Ÿæ„å‘³ç€å“åº”ç³»ç»Ÿæ— æ³•å†è¿½è¸ªå˜åŒ–ã€‚ Â· å®ä¾‹ç”Ÿå‘½å‘¨æœŸé’©å­ â€¢ created â€¢ åœ¨ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºä¹‹åæ‰§è¡Œä»£ç  â€¢ mountedã€updated å’Œ destroyedã€‚ç”Ÿå‘½å‘¨æœŸé’©å­çš„ this ä¸Šä¸‹æ–‡æŒ‡å‘è°ƒç”¨å®ƒçš„ Vue å®ä¾‹ â€¢ ä¸è¦åœ¨é€‰é¡¹ property æˆ–å›è°ƒä¸Šä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œæ¯”å¦‚ created: () =&gt; console.log(this.a) æˆ– vm.$watch('a', newValue =&gt; this.myMethod())ã€‚å› ä¸ºç®­å¤´å‡½æ•°å¹¶æ²¡æœ‰ thisï¼Œthis ä¼šä½œä¸ºå˜é‡ä¸€ç›´å‘ä¸Šçº§è¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œç›´è‡³æ‰¾åˆ°ä¸ºæ­¢ï¼Œç»å¸¸å¯¼è‡´ Uncaught TypeError: Cannot read property of undefined æˆ– Uncaught TypeError: this.myMethod is not a function ä¹‹ç±»çš„é”™è¯¯ã€‚ Â· ç”Ÿå‘½å‘¨æœŸå›¾ç¤º 1.1.4. æ¨¡æ¿è¯­æ³• Â· Vue.js ä½¿ç”¨äº†åŸºäº HTML çš„æ¨¡æ¿è¯­æ³•ï¼Œå…è®¸å¼€å‘è€…å£°æ˜å¼åœ°å°† DOM ç»‘å®šè‡³åº•å±‚ Vue å®ä¾‹çš„æ•°æ®ã€‚æ‰€æœ‰ Vue.js çš„æ¨¡æ¿éƒ½æ˜¯åˆæ³•çš„ HTMLï¼Œæ‰€ä»¥èƒ½è¢«éµå¾ªè§„èŒƒçš„æµè§ˆå™¨å’Œ HTML è§£æå™¨è§£æã€‚ åœ¨åº•å±‚çš„å®ç°ä¸Šï¼ŒVue å°†æ¨¡æ¿ç¼–è¯‘æˆè™šæ‹Ÿ DOM æ¸²æŸ“å‡½æ•°ã€‚ç»“åˆå“åº”ç³»ç»Ÿï¼ŒVue èƒ½å¤Ÿæ™ºèƒ½åœ°è®¡ç®—å‡ºæœ€å°‘éœ€è¦é‡æ–°æ¸²æŸ“å¤šå°‘ç»„ä»¶ï¼Œå¹¶æŠŠ DOM æ“ä½œæ¬¡æ•°å‡åˆ°æœ€å°‘ã€‚ å¦‚æœä½ ç†Ÿæ‚‰è™šæ‹Ÿ DOM å¹¶ä¸”åçˆ± JavaScript çš„åŸå§‹åŠ›é‡ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ç”¨æ¨¡æ¿ï¼Œç›´æ¥å†™æ¸²æŸ“ (render) å‡½æ•°ï¼Œä½¿ç”¨å¯é€‰çš„ JSX è¯­æ³•ã€‚ Â· æ’å€¼ â€¢ æ–‡æœ¬ â€¢ â€œMustacheâ€è¯­æ³• (åŒå¤§æ‹¬å·) â€¢ v-once æŒ‡ä»¤ï¼Œä½ ä¹Ÿèƒ½æ‰§è¡Œä¸€æ¬¡æ€§åœ°æ’å€¼ï¼Œå½“æ•°æ®æ”¹å˜æ—¶ï¼Œæ’å€¼å¤„çš„å†…å®¹ä¸ä¼šæ›´æ–°ã€‚ä½†è¯·ç•™å¿ƒè¿™ä¼šå½±å“åˆ°è¯¥èŠ‚ç‚¹ä¸Šçš„å…¶å®ƒæ•°æ®ç»‘å®šï¼š è¿™ä¸ªå°†ä¸ä¼šæ”¹å˜: â€¢ æŒ‡ä»¤ â€¢ v-once â€¢ åŸå§‹ HTML â€¢ æŒ‡ä»¤ â€¢ v-html â€¢ åŒå¤§æ‹¬å·ä¼šå°†æ•°æ®è§£é‡Šä¸ºæ™®é€šæ–‡æœ¬ï¼Œè€Œé HTML ä»£ç ã€‚ä¸ºäº†è¾“å‡ºçœŸæ­£çš„ HTMLï¼Œä½ éœ€è¦ä½¿ç”¨ v-html æŒ‡ä»¤ â€¢ span çš„å†…å®¹å°†ä¼šè¢«æ›¿æ¢æˆä¸º property å€¼ rawHtmlï¼Œç›´æ¥ä½œä¸º HTMLâ€”â€”ä¼šå¿½ç•¥è§£æ property å€¼ä¸­çš„æ•°æ®ç»‘å®šã€‚æ³¨æ„ï¼Œä½ ä¸èƒ½ä½¿ç”¨ v-html æ¥å¤åˆå±€éƒ¨æ¨¡æ¿ï¼Œå› ä¸º Vue ä¸æ˜¯åŸºäºå­—ç¬¦ä¸²çš„æ¨¡æ¿å¼•æ“ã€‚åä¹‹ï¼Œå¯¹äºç”¨æˆ·ç•Œé¢ (UI)ï¼Œç»„ä»¶æ›´é€‚åˆä½œä¸ºå¯é‡ç”¨å’Œå¯ç»„åˆçš„åŸºæœ¬å•ä½ã€‚ â€¢ ä½ çš„ç«™ç‚¹ä¸ŠåŠ¨æ€æ¸²æŸ“çš„ä»»æ„ HTML å¯èƒ½ä¼šéå¸¸å±é™©ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“å¯¼è‡´ XSS æ”»å‡»ã€‚è¯·åªå¯¹å¯ä¿¡å†…å®¹ä½¿ç”¨ HTML æ’å€¼ï¼Œç»ä¸è¦å¯¹ç”¨æˆ·æä¾›çš„å†…å®¹ä½¿ç”¨æ’å€¼ã€‚ â€¢ Attribute â€¢ æŒ‡ä»¤ â€¢ v-bind â€¢ Mustache è¯­æ³•ä¸èƒ½ä½œç”¨åœ¨ HTML attribute ä¸Šï¼Œé‡åˆ°è¿™ç§æƒ…å†µåº”è¯¥ä½¿ç”¨ v-bind æŒ‡ä»¤ï¼š å¯¹äºå¸ƒå°” attribute (å®ƒä»¬åªè¦å­˜åœ¨å°±æ„å‘³ç€å€¼ä¸º true)ï¼Œv-bind å·¥ä½œèµ·æ¥ç•¥æœ‰ä¸åŒï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š Button å¦‚æœ isButtonDisabled çš„å€¼æ˜¯ nullã€undefined æˆ– falseï¼Œåˆ™ disabled attribute ç”šè‡³ä¸ä¼šè¢«åŒ…å«åœ¨æ¸²æŸ“å‡ºæ¥çš„ å…ƒç´ ä¸­ã€‚ â€¢ ä½¿ç”¨ JavaScript è¡¨è¾¾å¼ Â· æŒ‡ä»¤ â€¢ æŒ‡ä»¤ (Directives) æ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Š attributeã€‚æŒ‡ä»¤ attribute çš„å€¼é¢„æœŸæ˜¯å•ä¸ª JavaScript è¡¨è¾¾å¼ (v-for æ˜¯ä¾‹å¤–æƒ…å†µï¼Œç¨åæˆ‘ä»¬å†è®¨è®º)ã€‚æŒ‡ä»¤çš„èŒè´£æ˜¯ï¼Œå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äº DOMã€‚ â€¢ å‚æ•° â€¢ ä¸€äº›æŒ‡ä»¤èƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ªâ€œå‚æ•°â€ï¼Œåœ¨æŒ‡ä»¤åç§°ä¹‹åä»¥å†’å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œv-bind æŒ‡ä»¤å¯ä»¥ç”¨äºå“åº”å¼åœ°æ›´æ–° HTML attributeï¼š ... åœ¨è¿™é‡Œ href æ˜¯å‚æ•°ï¼Œå‘ŠçŸ¥ v-bind æŒ‡ä»¤å°†è¯¥å…ƒç´ çš„ href attribute ä¸è¡¨è¾¾å¼ url çš„å€¼ç»‘å®šã€‚ å¦ä¸€ä¸ªä¾‹å­æ˜¯ v-on æŒ‡ä»¤ï¼Œå®ƒç”¨äºç›‘å¬ DOM äº‹ä»¶ï¼š ... åœ¨è¿™é‡Œå‚æ•°æ˜¯ç›‘å¬çš„äº‹ä»¶åã€‚æˆ‘ä»¬ä¹Ÿä¼šæ›´è¯¦ç»†åœ°è®¨è®ºäº‹ä»¶å¤„ç†ã€‚ â€¢ åŠ¨æ€å‚æ•° â€¢ ä» 2.6.0 å¼€å§‹ï¼Œå¯ä»¥ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„ JavaScript è¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªæŒ‡ä»¤çš„å‚æ•°ï¼š &lt;a v-bind:[attributeName]=&quot;url&quot;&gt; ... è¿™é‡Œçš„ attributeName ä¼šè¢«ä½œä¸ºä¸€ä¸ª JavaScript è¡¨è¾¾å¼è¿›è¡ŒåŠ¨æ€æ±‚å€¼ï¼Œæ±‚å¾—çš„å€¼å°†ä¼šä½œä¸ºæœ€ç»ˆçš„å‚æ•°æ¥ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„ Vue å®ä¾‹æœ‰ä¸€ä¸ª data property attributeNameï¼Œå…¶å€¼ä¸º &quot;href&quot;ï¼Œé‚£ä¹ˆè¿™ä¸ªç»‘å®šå°†ç­‰ä»·äº v-bind:hrefã€‚ åŒæ ·åœ°ï¼Œä½ å¯ä»¥ä½¿ç”¨åŠ¨æ€å‚æ•°ä¸ºä¸€ä¸ªåŠ¨æ€çš„äº‹ä»¶åç»‘å®šå¤„ç†å‡½æ•°ï¼š &lt;a v-on:[eventName]=&quot;doSomething&quot;&gt; ... åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå½“ eventName çš„å€¼ä¸º &quot;focus&quot; æ—¶ï¼Œv-on:[eventName] å°†ç­‰ä»·äº v-on:focusã€‚ â€¢ å¯¹åŠ¨æ€å‚æ•°çš„å€¼çš„çº¦æŸ åŠ¨æ€å‚æ•°é¢„æœŸä¼šæ±‚å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¼‚å¸¸æƒ…å†µä¸‹å€¼ä¸º nullã€‚è¿™ä¸ªç‰¹æ®Šçš„ null å€¼å¯ä»¥è¢«æ˜¾æ€§åœ°ç”¨äºç§»é™¤ç»‘å®šã€‚ä»»ä½•å…¶å®ƒéå­—ç¬¦ä¸²ç±»å‹çš„å€¼éƒ½å°†ä¼šè§¦å‘ä¸€ä¸ªè­¦å‘Šã€‚ â€¢ å¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸ åŠ¨æ€å‚æ•°è¡¨è¾¾å¼æœ‰ä¸€äº›è¯­æ³•çº¦æŸï¼Œå› ä¸ºæŸäº›å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼å’Œå¼•å·ï¼Œæ”¾åœ¨ HTML attribute åé‡Œæ˜¯æ— æ•ˆçš„ã€‚ä¾‹å¦‚ï¼š &lt;a v-bind:['foo' + bar]=&quot;value&quot;&gt; ... å˜é€šçš„åŠæ³•æ˜¯ä½¿ç”¨æ²¡æœ‰ç©ºæ ¼æˆ–å¼•å·çš„è¡¨è¾¾å¼ï¼Œæˆ–ç”¨è®¡ç®—å±æ€§æ›¿ä»£è¿™ç§å¤æ‚è¡¨è¾¾å¼ã€‚ åœ¨ DOM ä¸­ä½¿ç”¨æ¨¡æ¿æ—¶ (ç›´æ¥åœ¨ä¸€ä¸ª HTML æ–‡ä»¶é‡Œæ’°å†™æ¨¡æ¿)ï¼Œè¿˜éœ€è¦é¿å…ä½¿ç”¨å¤§å†™å­—ç¬¦æ¥å‘½åé”®åï¼Œå› ä¸ºæµè§ˆå™¨ä¼šæŠŠ attribute åå…¨éƒ¨å¼ºåˆ¶è½¬ä¸ºå°å†™ï¼š &lt;a v-bind:[someAttr]=&quot;value&quot;&gt; ... â€¢ ä¿®é¥°ç¬¦ â€¢ ä¿®é¥°ç¬¦ (modifier) æ˜¯ä»¥åŠè§’å¥å· . æŒ‡æ˜çš„ç‰¹æ®Šåç¼€ï¼Œç”¨äºæŒ‡å‡ºä¸€ä¸ªæŒ‡ä»¤åº”è¯¥ä»¥ç‰¹æ®Šæ–¹å¼ç»‘å®šã€‚ä¾‹å¦‚ï¼Œ.prevent ä¿®é¥°ç¬¦å‘Šè¯‰ v-on æŒ‡ä»¤å¯¹äºè§¦å‘çš„äº‹ä»¶è°ƒç”¨ event.preventDefault()ï¼š ... åœ¨æ¥ä¸‹æ¥å¯¹ v-on å’Œ v-for ç­‰åŠŸèƒ½çš„æ¢ç´¢ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ä¿®é¥°ç¬¦çš„å…¶å®ƒä¾‹å­ã€‚ Â· ç¼©å†™ â€¢ v- å‰ç¼€ä½œä¸ºä¸€ç§è§†è§‰æç¤ºï¼Œç”¨æ¥è¯†åˆ«æ¨¡æ¿ä¸­ Vue ç‰¹å®šçš„ attributeã€‚å½“ä½ åœ¨ä½¿ç”¨ Vue.js ä¸ºç°æœ‰æ ‡ç­¾æ·»åŠ åŠ¨æ€è¡Œä¸º (dynamic behavior) æ—¶ï¼Œv- å‰ç¼€å¾ˆæœ‰å¸®åŠ©ï¼Œç„¶è€Œï¼Œå¯¹äºä¸€äº›é¢‘ç¹ç”¨åˆ°çš„æŒ‡ä»¤æ¥è¯´ï¼Œå°±ä¼šæ„Ÿåˆ°ä½¿ç”¨ç¹çã€‚åŒæ—¶ï¼Œåœ¨æ„å»ºç”± Vue ç®¡ç†æ‰€æœ‰æ¨¡æ¿çš„å•é¡µé¢åº”ç”¨ç¨‹åº (SPA - single page application) æ—¶ï¼Œv- å‰ç¼€ä¹Ÿå˜å¾—æ²¡é‚£ä¹ˆé‡è¦äº†ã€‚å› æ­¤ï¼ŒVue ä¸º v-bind å’Œ v-on è¿™ä¸¤ä¸ªæœ€å¸¸ç”¨çš„æŒ‡ä»¤ï¼Œæä¾›äº†ç‰¹å®šç®€å†™ï¼š â€¢ v-bind ç¼©å†™ ... ... &lt;a :[key]=&quot;url&quot;&gt; ... â€¢ v-on ç¼©å†™ ... &lt;a @click=&quot;doSomething&quot;&gt;... &lt;a @[event]=&quot;doSomething&quot;&gt; ... å®ƒä»¬çœ‹èµ·æ¥å¯èƒ½ä¸æ™®é€šçš„ HTML ç•¥æœ‰ä¸åŒï¼Œä½† : ä¸ @ å¯¹äº attribute åæ¥è¯´éƒ½æ˜¯åˆæ³•å­—ç¬¦ï¼Œåœ¨æ‰€æœ‰æ”¯æŒ Vue çš„æµè§ˆå™¨éƒ½èƒ½è¢«æ­£ç¡®åœ°è§£æã€‚è€Œä¸”ï¼Œå®ƒä»¬ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆæ¸²æŸ“çš„æ ‡è®°ä¸­ã€‚ç¼©å†™è¯­æ³•æ˜¯å®Œå…¨å¯é€‰çš„ï¼Œä½†éšç€ä½ æ›´æ·±å…¥åœ°äº†è§£å®ƒä»¬çš„ä½œç”¨ï¼Œä½ ä¼šåº†å¹¸æ‹¥æœ‰å®ƒä»¬ã€‚ 1.1.5. è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨ Â· è®¡ç®—å±æ€§ â€¢ æ¨¡æ¿å†…çš„è¡¨è¾¾å¼éå¸¸ä¾¿åˆ©ï¼Œä½†æ˜¯è®¾è®¡å®ƒä»¬çš„åˆè¡·æ˜¯ç”¨äºç®€å•è¿ç®—çš„ã€‚åœ¨æ¨¡æ¿ä¸­æ”¾å…¥å¤ªå¤šçš„é€»è¾‘ä¼šè®©æ¨¡æ¿è¿‡é‡ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ä¾‹å¦‚ï¼š 1234{{ message.split('').reverse().join('') }} &lt;div id=&quot;example&quot;&gt; {{ message.split('').reverse().join('') }} &lt;/div&gt; åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œæ¨¡æ¿ä¸å†æ˜¯ç®€å•çš„å£°æ˜å¼é€»è¾‘ã€‚ä½ å¿…é¡»çœ‹ä¸€æ®µæ—¶é—´æ‰èƒ½æ„è¯†åˆ°ï¼Œè¿™é‡Œæ˜¯æƒ³è¦æ˜¾ç¤ºå˜é‡ message çš„ç¿»è½¬å­—ç¬¦ä¸²ã€‚å½“ä½ æƒ³è¦åœ¨æ¨¡æ¿ä¸­å¤šåŒ…å«æ­¤å¤„çš„ç¿»è½¬å­—ç¬¦ä¸²æ—¶ï¼Œå°±ä¼šæ›´åŠ éš¾ä»¥å¤„ç†ã€‚ æ‰€ä»¥ï¼Œå¯¹äºä»»ä½•å¤æ‚é€»è¾‘ï¼Œä½ éƒ½åº”å½“ä½¿ç”¨è®¡ç®—å±æ€§ã€‚ â€¢ åŸºç¡€ä¾‹å­ 12345678910111213var vm = new Vue({ el: '#example', data: { message: 'Hello' }, computed: { // è®¡ç®—å±æ€§çš„ getter reversedMessage: function () { // `this` æŒ‡å‘ vm å®ä¾‹ return this.message.split('').reverse().join('') } } }) â€¢ è®¡ç®—å±æ€§ç¼“å­˜ vs æ–¹æ³• â€¢ ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¡¨è¾¾å¼ä¸­è°ƒç”¨æ–¹æ³•æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼š 12345678&lt;p&gt;Reversed message: &quot;{{ reversedMessage() }}&quot;&lt;/p&gt;// åœ¨ç»„ä»¶ä¸­methods: { reversedMessage: function () { return this.message.split('').reverse().join('') }} æˆ‘ä»¬å¯ä»¥å°†åŒä¸€å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ã€‚ä¸¤ç§æ–¹å¼çš„æœ€ç»ˆç»“æœç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ç„¶è€Œï¼Œä¸åŒçš„æ˜¯è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„ã€‚åªåœ¨ç›¸å…³å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚è¿™å°±æ„å‘³ç€åªè¦ message è¿˜æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¤šæ¬¡è®¿é—® reversedMessage è®¡ç®—å±æ€§ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸å¿…å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚ è¿™ä¹ŸåŒæ ·æ„å‘³ç€ä¸‹é¢çš„è®¡ç®—å±æ€§å°†ä¸å†æ›´æ–°ï¼Œå› ä¸º Date.now() ä¸æ˜¯å“åº”å¼ä¾èµ–ï¼š computed: { now: function () { return Date.now() } } ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ¯å½“è§¦å‘é‡æ–°æ¸²æŸ“æ—¶ï¼Œè°ƒç”¨æ–¹æ³•å°†æ€»ä¼šå†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚ æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§çš„è®¡ç®—å±æ€§ Aï¼Œå®ƒéœ€è¦éå†ä¸€ä¸ªå·¨å¤§çš„æ•°ç»„å¹¶åšå¤§é‡çš„è®¡ç®—ã€‚ç„¶åæˆ‘ä»¬å¯èƒ½æœ‰å…¶ä»–çš„è®¡ç®—å±æ€§ä¾èµ–äº Aã€‚å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œæˆ‘ä»¬å°†ä¸å¯é¿å…çš„å¤šæ¬¡æ‰§è¡Œ A çš„ getterï¼å¦‚æœä½ ä¸å¸Œæœ›æœ‰ç¼“å­˜ï¼Œè¯·ç”¨æ–¹æ³•æ¥æ›¿ä»£ã€‚ â€¢ è®¡ç®—å±æ€§ vs ä¾¦å¬å±æ€§ â€¢ Vue æä¾›äº†ä¸€ç§æ›´é€šç”¨çš„æ–¹å¼æ¥è§‚å¯Ÿå’Œå“åº” Vue å®ä¾‹ä¸Šçš„æ•°æ®å˜åŠ¨ï¼šä¾¦å¬å±æ€§ã€‚å½“ä½ æœ‰ä¸€äº›æ•°æ®éœ€è¦éšç€å…¶å®ƒæ•°æ®å˜åŠ¨è€Œå˜åŠ¨æ—¶ï¼Œä½ å¾ˆå®¹æ˜“æ»¥ç”¨ watchâ€”â€”ç‰¹åˆ«æ˜¯å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡ AngularJSã€‚ç„¶è€Œï¼Œé€šå¸¸æ›´å¥½çš„åšæ³•æ˜¯ä½¿ç”¨è®¡ç®—å±æ€§è€Œä¸æ˜¯å‘½ä»¤å¼çš„ watch å›è°ƒã€‚ç»†æƒ³ä¸€ä¸‹è¿™ä¸ªä¾‹å­ï¼š var vm = new Vue({ el: '#demo', data: { firstName: 'Foo', lastName: 'Bar', fullName: 'Foo Bar' }, watch: { firstName: function (val) { this.fullName = val + ' ' + this.lastName }, lastName: function (val) { this.fullName = this.firstName + ' ' + val } } }) ä¸Šé¢ä»£ç æ˜¯å‘½ä»¤å¼ä¸”é‡å¤çš„ã€‚å°†å®ƒä¸è®¡ç®—å±æ€§çš„ç‰ˆæœ¬è¿›è¡Œæ¯”è¾ƒï¼š var vm = new Vue({ el: '#demo', data: { firstName: 'Foo', lastName: 'Bar' }, computed: { fullName: function () { return this.firstName + ' ' + this.lastName } } }) å¥½å¾—å¤šäº†ï¼Œä¸æ˜¯å—ï¼Ÿ â€¢ è®¡ç®—å±æ€§çš„ setter â€¢ è®¡ç®—å±æ€§é»˜è®¤åªæœ‰ getterï¼Œä¸è¿‡åœ¨éœ€è¦æ—¶ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª setterï¼š // ... computed: { fullName: { // getter get: function () { return this.firstName + ' ' + this.lastName }, // setter set: function (newValue) { var names = newValue.split(' ') this.firstName = names[0] this.lastName = names[names.length - 1] } } } // ... ç°åœ¨å†è¿è¡Œ vm.fullName = 'John Doe' æ—¶ï¼Œsetter ä¼šè¢«è°ƒç”¨ï¼Œvm.firstName å’Œ vm.lastName ä¹Ÿä¼šç›¸åº”åœ°è¢«æ›´æ–°ã€‚ Â· ä¾¦å¬å™¨ â€¢ è™½ç„¶è®¡ç®—å±æ€§åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ›´åˆé€‚ï¼Œä½†æœ‰æ—¶ä¹Ÿéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰çš„ä¾¦å¬å™¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Vue é€šè¿‡ watch é€‰é¡¹æä¾›äº†ä¸€ä¸ªæ›´é€šç”¨çš„æ–¹æ³•ï¼Œæ¥å“åº”æ•°æ®çš„å˜åŒ–ã€‚å½“éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œè¿™ä¸ªæ–¹å¼æ˜¯æœ€æœ‰ç”¨çš„ã€‚ ä¾‹å¦‚ï¼š Ask a yes/no question: var watchExampleVM = new Vue({ el: '#watch-example', data: { question: '', answer: 'I cannot give you an answer until you ask a question!' }, watch: { // å¦‚æœ `question` å‘ç”Ÿæ”¹å˜ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¿è¡Œ question: function (newQuestion, oldQuestion) { this.answer = 'Waiting for you to stop typing...' this.debouncedGetAnswer() } }, created: function () { // `_.debounce` æ˜¯ä¸€ä¸ªé€šè¿‡ Lodash é™åˆ¶æ“ä½œé¢‘ç‡çš„å‡½æ•°ã€‚ // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›é™åˆ¶è®¿é—® yesno.wtf/api çš„é¢‘ç‡ // AJAX è¯·æ±‚ç›´åˆ°ç”¨æˆ·è¾“å…¥å®Œæ¯•æ‰ä¼šå‘å‡ºã€‚æƒ³è¦äº†è§£æ›´å¤šå…³äº // `_.debounce` å‡½æ•° (åŠå…¶è¿‘äº² `_.throttle`) çš„çŸ¥è¯†ï¼Œ // è¯·å‚è€ƒï¼šhttps://lodash.com/docs#debounce this.debouncedGetAnswer = _.debounce(this.getAnswer, 500) }, methods: { getAnswer: function () { if (this.question.indexOf('?') === -1) { this.answer = 'Questions usually contain a question mark. ;-)' return } this.answer = 'Thinking...' var vm = this axios.get('https://yesno.wtf/api') .then(function (response) { vm.answer = _.capitalize(response.data.answer) }) .catch(function (error) { vm.answer = 'Error! Could not reach the API. ' + error }) } } }) ç»“æœï¼š Ask a yes/no question: I cannot give you an answer until you ask a question! åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ watch é€‰é¡¹å…è®¸æˆ‘ä»¬æ‰§è¡Œå¼‚æ­¥æ“ä½œ (è®¿é—®ä¸€ä¸ª API)ï¼Œé™åˆ¶æˆ‘ä»¬æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡ï¼Œå¹¶åœ¨æˆ‘ä»¬å¾—åˆ°æœ€ç»ˆç»“æœå‰ï¼Œè®¾ç½®ä¸­é—´çŠ¶æ€ã€‚è¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„ã€‚ é™¤äº† watch é€‰é¡¹ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨å‘½ä»¤å¼çš„ vm.$watch APIã€‚ 1.1.6. Class ä¸ Style ç»‘å®š Â· æ“ä½œå…ƒç´ çš„ class åˆ—è¡¨å’Œå†…è”æ ·å¼æ˜¯æ•°æ®ç»‘å®šçš„ä¸€ä¸ªå¸¸è§éœ€æ±‚ã€‚å› ä¸ºå®ƒä»¬éƒ½æ˜¯ attributeï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ v-bind å¤„ç†å®ƒä»¬ï¼šåªéœ€è¦é€šè¿‡è¡¨è¾¾å¼è®¡ç®—å‡ºå­—ç¬¦ä¸²ç»“æœå³å¯ã€‚ä¸è¿‡ï¼Œå­—ç¬¦ä¸²æ‹¼æ¥éº»çƒ¦ä¸”æ˜“é”™ã€‚å› æ­¤ï¼Œåœ¨å°† v-bind ç”¨äº class å’Œ style æ—¶ï¼ŒVue.js åšäº†ä¸“é—¨çš„å¢å¼ºã€‚è¡¨è¾¾å¼ç»“æœçš„ç±»å‹é™¤äº†å­—ç¬¦ä¸²ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ˜¯å¯¹è±¡æˆ–æ•°ç»„ã€‚ Â· ç»‘å®š HTML Class â€¢ å¯¹è±¡è¯­æ³• â€¢ æˆ‘ä»¬å¯ä»¥ä¼ ç»™ v-bind:class ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥åŠ¨æ€åœ°åˆ‡æ¢ classï¼š ä¸Šé¢çš„è¯­æ³•è¡¨ç¤º active è¿™ä¸ª class å­˜åœ¨ä¸å¦å°†å–å†³äºæ•°æ® property isActive çš„ truthinessã€‚ ä½ å¯ä»¥åœ¨å¯¹è±¡ä¸­ä¼ å…¥æ›´å¤šå­—æ®µæ¥åŠ¨æ€åˆ‡æ¢å¤šä¸ª classã€‚æ­¤å¤–ï¼Œv-bind:class æŒ‡ä»¤ä¹Ÿå¯ä»¥ä¸æ™®é€šçš„ class attribute å…±å­˜ã€‚å½“æœ‰å¦‚ä¸‹æ¨¡æ¿ï¼š å’Œå¦‚ä¸‹ dataï¼š data: { isActive: true, hasError: false } ç»“æœæ¸²æŸ“ä¸ºï¼š å½“ isActive æˆ–è€… hasError å˜åŒ–æ—¶ï¼Œclass åˆ—è¡¨å°†ç›¸åº”åœ°æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ hasError çš„å€¼ä¸º trueï¼Œclass åˆ—è¡¨å°†å˜ä¸º \"static active text-danger\"ã€‚ ç»‘å®šçš„æ•°æ®å¯¹è±¡ä¸å¿…å†…è”å®šä¹‰åœ¨æ¨¡æ¿é‡Œï¼š data: { classObject: { active: true, 'text-danger': false } } æ¸²æŸ“çš„ç»“æœå’Œä¸Šé¢ä¸€æ ·ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œç»‘å®šä¸€ä¸ªè¿”å›å¯¹è±¡çš„è®¡ç®—å±æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨ä¸”å¼ºå¤§çš„æ¨¡å¼ï¼š data: { isActive: true, error: null }, computed: { classObject: function () { return { active: this.isActive && !this.error, 'text-danger': this.error && this.error.type === 'fatal' } } } â€¢ æ•°ç»„è¯­æ³• â€¢ æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªæ•°ç»„ä¼ ç»™ v-bind:classï¼Œä»¥åº”ç”¨ä¸€ä¸ª class åˆ—è¡¨ï¼š data: { activeClass: 'active', errorClass: 'text-danger' } æ¸²æŸ“ä¸ºï¼š å¦‚æœä½ ä¹Ÿæƒ³æ ¹æ®æ¡ä»¶åˆ‡æ¢åˆ—è¡¨ä¸­çš„ classï¼Œå¯ä»¥ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ï¼š è¿™æ ·å†™å°†å§‹ç»ˆæ·»åŠ  errorClassï¼Œä½†æ˜¯åªæœ‰åœ¨ isActive æ˜¯ truthy[1] æ—¶æ‰æ·»åŠ  activeClassã€‚ ä¸è¿‡ï¼Œå½“æœ‰å¤šä¸ªæ¡ä»¶ class æ—¶è¿™æ ·å†™æœ‰äº›ç¹çã€‚æ‰€ä»¥åœ¨æ•°ç»„è¯­æ³•ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡è¯­æ³•ï¼š â€¢ ç”¨åœ¨ç»„ä»¶ä¸Š â€¢ è¿™ä¸ªç« èŠ‚å‡è®¾ä½ å·²ç»å¯¹ Vue ç»„ä»¶æœ‰ä¸€å®šçš„äº†è§£ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥å…ˆè·³è¿‡è¿™é‡Œï¼Œç¨åå†å›è¿‡å¤´æ¥çœ‹ã€‚ å½“åœ¨ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ä¸Šä½¿ç”¨ class property æ—¶ï¼Œè¿™äº› class å°†è¢«æ·»åŠ åˆ°è¯¥ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šé¢ã€‚è¿™ä¸ªå…ƒç´ ä¸Šå·²ç»å­˜åœ¨çš„ class ä¸ä¼šè¢«è¦†ç›–ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ å£°æ˜äº†è¿™ä¸ªç»„ä»¶ï¼š Vue.component('my-component', { template: 'Hi' }) ç„¶ååœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™æ·»åŠ ä¸€äº› classï¼š HTML å°†è¢«æ¸²æŸ“ä¸ºï¼š Hi å¯¹äºå¸¦æ•°æ®ç»‘å®š class ä¹ŸåŒæ ·é€‚ç”¨ï¼š å½“ isActive ä¸º truthy[1] æ—¶ï¼ŒHTML å°†è¢«æ¸²æŸ“æˆä¸ºï¼š Hi Â· ç»‘å®šå†…è”æ ·å¼ â€¢ å¯¹è±¡è¯­æ³• â€¢ v-bind:style çš„å¯¹è±¡è¯­æ³•ååˆ†ç›´è§‚â€”â€”çœ‹ç€éå¸¸åƒ CSSï¼Œä½†å…¶å®æ˜¯ä¸€ä¸ª JavaScript å¯¹è±¡ã€‚CSS property åå¯ä»¥ç”¨é©¼å³°å¼ (camelCase) æˆ–çŸ­æ¨ªçº¿åˆ†éš” (kebab-caseï¼Œè®°å¾—ç”¨å¼•å·æ‹¬èµ·æ¥) æ¥å‘½åï¼š data: { activeColor: 'red', fontSize: 30 } ç›´æ¥ç»‘å®šåˆ°ä¸€ä¸ªæ ·å¼å¯¹è±¡é€šå¸¸æ›´å¥½ï¼Œè¿™ä¼šè®©æ¨¡æ¿æ›´æ¸…æ™°ï¼š data: { styleObject: { color: 'red', fontSize: '13px' } } åŒæ ·çš„ï¼Œå¯¹è±¡è¯­æ³•å¸¸å¸¸ç»“åˆè¿”å›å¯¹è±¡çš„è®¡ç®—å±æ€§ä½¿ç”¨ã€‚ â€¢ æ•°ç»„è¯­æ³• â€¢ v-bind:style çš„æ•°ç»„è¯­æ³•å¯ä»¥å°†å¤šä¸ªæ ·å¼å¯¹è±¡åº”ç”¨åˆ°åŒä¸€ä¸ªå…ƒç´ ä¸Šï¼š â€¢ è‡ªåŠ¨æ·»åŠ å‰ç¼€ â€¢ å½“ v-bind:style ä½¿ç”¨éœ€è¦æ·»åŠ æµè§ˆå™¨å¼•æ“å‰ç¼€çš„ CSS property æ—¶ï¼Œå¦‚ transformï¼ŒVue.js ä¼šè‡ªåŠ¨ä¾¦æµ‹å¹¶æ·»åŠ ç›¸åº”çš„å‰ç¼€ã€‚ â€¢ å¤šé‡å€¼ â€¢ ä» 2.3.0 èµ·ä½ å¯ä»¥ä¸º style ç»‘å®šä¸­çš„ property æä¾›ä¸€ä¸ªåŒ…å«å¤šä¸ªå€¼çš„æ•°ç»„ï¼Œå¸¸ç”¨äºæä¾›å¤šä¸ªå¸¦å‰ç¼€çš„å€¼ï¼Œä¾‹å¦‚ï¼š è¿™æ ·å†™åªä¼šæ¸²æŸ“æ•°ç»„ä¸­æœ€åä¸€ä¸ªè¢«æµè§ˆå™¨æ”¯æŒçš„å€¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå¦‚æœæµè§ˆå™¨æ”¯æŒä¸å¸¦æµè§ˆå™¨å‰ç¼€çš„ flexboxï¼Œé‚£ä¹ˆå°±åªä¼šæ¸²æŸ“ display: flexã€‚ è¯‘è€…æ³¨ [1] truthy ä¸æ˜¯ trueï¼Œè¯¦è§ MDN çš„è§£é‡Šã€‚ 1.1.7. æ¡ä»¶æ¸²æŸ“ Â· v-if â€¢ v-if æŒ‡ä»¤ç”¨äºæ¡ä»¶æ€§åœ°æ¸²æŸ“ä¸€å—å†…å®¹ã€‚è¿™å—å†…å®¹åªä¼šåœ¨æŒ‡ä»¤çš„è¡¨è¾¾å¼è¿”å› truthy å€¼çš„æ—¶å€™è¢«æ¸²æŸ“ã€‚ Vue is awesome! ä¹Ÿå¯ä»¥ç”¨ v-else æ·»åŠ ä¸€ä¸ªâ€œelse å—â€ï¼š Vue is awesome! Oh no ğŸ˜¢ â€¢ åœ¨ å…ƒç´ ä¸Šä½¿ç”¨ v-if æ¡ä»¶æ¸²æŸ“åˆ†ç»„ â€¢ å› ä¸º v-if æ˜¯ä¸€ä¸ªæŒ‡ä»¤ï¼Œæ‰€ä»¥å¿…é¡»å°†å®ƒæ·»åŠ åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šã€‚ä½†æ˜¯å¦‚æœæƒ³åˆ‡æ¢å¤šä¸ªå…ƒç´ å‘¢ï¼Ÿæ­¤æ—¶å¯ä»¥æŠŠä¸€ä¸ª å…ƒç´ å½“åšä¸å¯è§çš„åŒ…è£¹å…ƒç´ ï¼Œå¹¶åœ¨ä¸Šé¢ä½¿ç”¨ v-ifã€‚æœ€ç»ˆçš„æ¸²æŸ“ç»“æœå°†ä¸åŒ…å« å…ƒç´ ã€‚ Title Paragraph 1 Paragraph 2 â€¢ v-else â€¢ ä½ å¯ä»¥ä½¿ç”¨ v-else æŒ‡ä»¤æ¥è¡¨ç¤º v-if çš„â€œelse å—â€ï¼š Now you see me Now you don't v-else å…ƒç´ å¿…é¡»ç´§è·Ÿåœ¨å¸¦ v-if æˆ–è€… v-else-if çš„å…ƒç´ çš„åé¢ï¼Œå¦åˆ™å®ƒå°†ä¸ä¼šè¢«è¯†åˆ«ã€‚ â€¢ v-else-if â€¢ 2.1.0 æ–°å¢ v-else-ifï¼Œé¡¾åæ€ä¹‰ï¼Œå……å½“ v-if çš„â€œelse-if å—â€ï¼Œå¯ä»¥è¿ç»­ä½¿ç”¨ï¼š A B C Not A/B/C ç±»ä¼¼äº v-elseï¼Œv-else-if ä¹Ÿå¿…é¡»ç´§è·Ÿåœ¨å¸¦ v-if æˆ–è€… v-else-if çš„å…ƒç´ ä¹‹åã€‚ â€¢ ç”¨ key ç®¡ç†å¯å¤ç”¨çš„å…ƒç´  â€¢ Vue ä¼šå°½å¯èƒ½é«˜æ•ˆåœ°æ¸²æŸ“å…ƒç´ ï¼Œé€šå¸¸ä¼šå¤ç”¨å·²æœ‰å…ƒç´ è€Œä¸æ˜¯ä»å¤´å¼€å§‹æ¸²æŸ“ã€‚è¿™ä¹ˆåšé™¤äº†ä½¿ Vue å˜å¾—éå¸¸å¿«ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶å®ƒä¸€äº›å¥½å¤„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å…è®¸ç”¨æˆ·åœ¨ä¸åŒçš„ç™»å½•æ–¹å¼ä¹‹é—´åˆ‡æ¢ï¼š Username Email é‚£ä¹ˆåœ¨ä¸Šé¢çš„ä»£ç ä¸­åˆ‡æ¢ loginType å°†ä¸ä¼šæ¸…é™¤ç”¨æˆ·å·²ç»è¾“å…¥çš„å†…å®¹ã€‚å› ä¸ºä¸¤ä¸ªæ¨¡æ¿ä½¿ç”¨äº†ç›¸åŒçš„å…ƒç´ ï¼Œ ä¸ä¼šè¢«æ›¿æ¢æ‰â€”â€”ä»…ä»…æ˜¯æ›¿æ¢äº†å®ƒçš„ placeholderã€‚ è‡ªå·±åŠ¨æ‰‹è¯•ä¸€è¯•ï¼Œåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä¸€äº›æ–‡æœ¬ï¼Œç„¶åæŒ‰ä¸‹åˆ‡æ¢æŒ‰é’®ï¼š è¿™æ ·ä¹Ÿä¸æ€»æ˜¯ç¬¦åˆå®é™…éœ€æ±‚ï¼Œæ‰€ä»¥ Vue ä¸ºä½ æä¾›äº†ä¸€ç§æ–¹å¼æ¥è¡¨è¾¾â€œè¿™ä¸¤ä¸ªå…ƒç´ æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œä¸è¦å¤ç”¨å®ƒä»¬â€ã€‚åªéœ€æ·»åŠ ä¸€ä¸ªå…·æœ‰å”¯ä¸€å€¼çš„ key attribute å³å¯ï¼š Username Email ç°åœ¨ï¼Œæ¯æ¬¡åˆ‡æ¢æ—¶ï¼Œè¾“å…¥æ¡†éƒ½å°†è¢«é‡æ–°æ¸²æŸ“ã€‚è¯·çœ‹ï¼š æ³¨æ„ï¼Œ å…ƒç´ ä»ç„¶ä¼šè¢«é«˜æ•ˆåœ°å¤ç”¨ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰æ·»åŠ  key attributeã€‚ Â· v-show â€¢ å¦ä¸€ä¸ªç”¨äºæ ¹æ®æ¡ä»¶å±•ç¤ºå…ƒç´ çš„é€‰é¡¹æ˜¯ v-show æŒ‡ä»¤ã€‚ç”¨æ³•å¤§è‡´ä¸€æ ·ï¼š Hello! ä¸åŒçš„æ˜¯å¸¦æœ‰ v-show çš„å…ƒç´ å§‹ç»ˆä¼šè¢«æ¸²æŸ“å¹¶ä¿ç•™åœ¨ DOM ä¸­ã€‚v-show åªæ˜¯ç®€å•åœ°åˆ‡æ¢å…ƒç´ çš„ CSS property displayã€‚ æ³¨æ„ï¼Œv-show ä¸æ”¯æŒ å…ƒç´ ï¼Œä¹Ÿä¸æ”¯æŒ v-elseã€‚ v-if vs v-show v-if æ˜¯â€œçœŸæ­£â€çš„æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒä¼šç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æ¡ä»¶å—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶é€‚å½“åœ°è¢«é”€æ¯å’Œé‡å»ºã€‚ v-if ä¹Ÿæ˜¯æƒ°æ€§çš„ï¼šå¦‚æœåœ¨åˆå§‹æ¸²æŸ“æ—¶æ¡ä»¶ä¸ºå‡ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšâ€”â€”ç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“æ¡ä»¶å—ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œv-show å°±ç®€å•å¾—å¤šâ€”â€”ä¸ç®¡åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Œå…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“ï¼Œå¹¶ä¸”åªæ˜¯ç®€å•åœ°åŸºäº CSS è¿›è¡Œåˆ‡æ¢ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œv-if æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ v-show æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦éå¸¸é¢‘ç¹åœ°åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨ v-show è¾ƒå¥½ï¼›å¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™ä½¿ç”¨ v-if è¾ƒå¥½ã€‚ v-if ä¸ v-for ä¸€èµ·ä½¿ç”¨ ä¸æ¨èåŒæ—¶ä½¿ç”¨ v-if å’Œ v-forã€‚è¯·æŸ¥é˜…é£æ ¼æŒ‡å—ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚ å½“ v-if ä¸ v-for ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œv-for å…·æœ‰æ¯” v-if æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚è¯·æŸ¥é˜…åˆ—è¡¨æ¸²æŸ“æŒ‡å—ä»¥è·å–è¯¦ç»†ä¿¡æ¯ã€‚ 1.1.8. åˆ—è¡¨æ¸²æŸ“ Â· ç”¨ v-for æŠŠä¸€ä¸ªæ•°ç»„å¯¹åº”ä¸ºä¸€ç»„å…ƒç´  â€¢ æˆ‘ä»¬å¯ä»¥ç”¨ v-for æŒ‡ä»¤åŸºäºä¸€ä¸ªæ•°ç»„æ¥æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨ã€‚v-for æŒ‡ä»¤éœ€è¦ä½¿ç”¨ item in items å½¢å¼çš„ç‰¹æ®Šè¯­æ³•ï¼Œå…¶ä¸­ items æ˜¯æºæ•°æ®æ•°ç»„ï¼Œè€Œ item åˆ™æ˜¯è¢«è¿­ä»£çš„æ•°ç»„å…ƒç´ çš„åˆ«åã€‚ var example1 = new Vue({ el: '#example-1', data: { items: [ { message: 'Foo' }, { message: 'Bar' } ] } }) ç»“æœï¼š åœ¨ v-for å—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ propertyã€‚v-for è¿˜æ”¯æŒä¸€ä¸ªå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå³å½“å‰é¡¹çš„ç´¢å¼•ã€‚ - - var example2 = new Vue({ el: '#example-2', data: { parentMessage: 'Parent', items: [ { message: 'Foo' }, { message: 'Bar' } ] } }) ç»“æœï¼š ä½ ä¹Ÿå¯ä»¥ç”¨ of æ›¿ä»£ in ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå› ä¸ºå®ƒæ›´æ¥è¿‘ JavaScript è¿­ä»£å™¨çš„è¯­æ³•ï¼š Â· åœ¨ v-for é‡Œä½¿ç”¨å¯¹è±¡ â€¢ ä½ ä¹Ÿå¯ä»¥ç”¨ v-for æ¥éå†ä¸€ä¸ªå¯¹è±¡çš„ propertyã€‚ new Vue({ el: '#v-for-object', data: { object: { title: 'How to do lists in Vue', author: 'Jane Doe', publishedAt: '2016-04-10' } } }) ç»“æœï¼š ä½ ä¹Ÿå¯ä»¥æä¾›ç¬¬äºŒä¸ªçš„å‚æ•°ä¸º property åç§° (ä¹Ÿå°±æ˜¯é”®å)ï¼š : è¿˜å¯ä»¥ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°ä½œä¸ºç´¢å¼•ï¼š . : åœ¨éå†å¯¹è±¡æ—¶ï¼Œä¼šæŒ‰ Object.keys() çš„ç»“æœéå†ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯å®ƒçš„ç»“æœåœ¨ä¸åŒçš„ JavaScript å¼•æ“ä¸‹éƒ½ä¸€è‡´ã€‚ Â· ç»´æŠ¤çŠ¶æ€ â€¢ å½“ Vue æ­£åœ¨æ›´æ–°ä½¿ç”¨ v-for æ¸²æŸ“çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨â€œå°±åœ°æ›´æ–°â€çš„ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVue å°†ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯å°±åœ°æ›´æ–°æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒä»¬åœ¨æ¯ä¸ªç´¢å¼•ä½ç½®æ­£ç¡®æ¸²æŸ“ã€‚è¿™ä¸ªç±»ä¼¼ Vue 1.x çš„ track-by=&quot;$index&quot;ã€‚ è¿™ä¸ªé»˜è®¤çš„æ¨¡å¼æ˜¯é«˜æ•ˆçš„ï¼Œä½†æ˜¯åªé€‚ç”¨äºä¸ä¾èµ–å­ç»„ä»¶çŠ¶æ€æˆ–ä¸´æ—¶ DOM çŠ¶æ€ (ä¾‹å¦‚ï¼šè¡¨å•è¾“å…¥å€¼) çš„åˆ—è¡¨æ¸²æŸ“è¾“å‡ºã€‚ ä¸ºäº†ç»™ Vue ä¸€ä¸ªæç¤ºï¼Œä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½ï¼Œä»è€Œé‡ç”¨å’Œé‡æ–°æ’åºç°æœ‰å…ƒç´ ï¼Œä½ éœ€è¦ä¸ºæ¯é¡¹æä¾›ä¸€ä¸ªå”¯ä¸€ key attributeï¼š å»ºè®®å°½å¯èƒ½åœ¨ä½¿ç”¨ v-for æ—¶æä¾› key attributeï¼Œé™¤ééå†è¾“å‡ºçš„ DOM å†…å®¹éå¸¸ç®€å•ï¼Œæˆ–è€…æ˜¯åˆ»æ„ä¾èµ–é»˜è®¤è¡Œä¸ºä»¥è·å–æ€§èƒ½ä¸Šçš„æå‡ã€‚ å› ä¸ºå®ƒæ˜¯ Vue è¯†åˆ«èŠ‚ç‚¹çš„ä¸€ä¸ªé€šç”¨æœºåˆ¶ï¼Œkey å¹¶ä¸ä»…ä¸ v-for ç‰¹åˆ«å…³è”ã€‚åé¢æˆ‘ä»¬å°†åœ¨æŒ‡å—ä¸­çœ‹åˆ°ï¼Œå®ƒè¿˜å…·æœ‰å…¶å®ƒç”¨é€”ã€‚ ä¸è¦ä½¿ç”¨å¯¹è±¡æˆ–æ•°ç»„ä¹‹ç±»çš„éåŸºæœ¬ç±»å‹å€¼ä½œä¸º v-for çš„ keyã€‚è¯·ç”¨å­—ç¬¦ä¸²æˆ–æ•°å€¼ç±»å‹çš„å€¼ã€‚ æ›´å¤š key attribute çš„ç»†èŠ‚ç”¨æ³•è¯·ç§»æ­¥è‡³ key çš„ API æ–‡æ¡£ã€‚ Â· æ•°ç»„æ›´æ–°æ£€æµ‹ â€¢ å˜æ›´æ–¹æ³• â€¢ Vue å°†è¢«ä¾¦å¬çš„æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿå°†ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚è¿™äº›è¢«åŒ…è£¹è¿‡çš„æ–¹æ³•åŒ…æ‹¬ï¼š push() pop() shift() unshift() splice() sort() reverse() ä½ å¯ä»¥æ‰“å¼€æ§åˆ¶å°ï¼Œç„¶åå¯¹å‰é¢ä¾‹å­çš„ items æ•°ç»„å°è¯•è°ƒç”¨å˜æ›´æ–¹æ³•ã€‚æ¯”å¦‚ example1.items.push({ message: 'Baz' })ã€‚ â€¢ æ›¿æ¢æ•°ç»„ â€¢ å˜æ›´æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œä¼šå˜æ›´è°ƒç”¨äº†è¿™äº›æ–¹æ³•çš„åŸå§‹æ•°ç»„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¹Ÿæœ‰éå˜æ›´æ–¹æ³•ï¼Œä¾‹å¦‚ filter()ã€concat() å’Œ slice()ã€‚å®ƒä»¬ä¸ä¼šå˜æ›´åŸå§‹æ•°ç»„ï¼Œè€Œæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚å½“ä½¿ç”¨éå˜æ›´æ–¹æ³•æ—¶ï¼Œå¯ä»¥ç”¨æ–°æ•°ç»„æ›¿æ¢æ—§æ•°ç»„ï¼š example1.items = example1.items.filter(function (item) { return item.message.match(/Foo/) }) ä½ å¯èƒ½è®¤ä¸ºè¿™å°†å¯¼è‡´ Vue ä¸¢å¼ƒç°æœ‰ DOM å¹¶é‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ã€‚å¹¸è¿çš„æ˜¯ï¼Œäº‹å®å¹¶éå¦‚æ­¤ã€‚Vue ä¸ºäº†ä½¿å¾— DOM å…ƒç´ å¾—åˆ°æœ€å¤§èŒƒå›´çš„é‡ç”¨è€Œå®ç°äº†ä¸€äº›æ™ºèƒ½çš„å¯å‘å¼æ–¹æ³•ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªå«æœ‰ç›¸åŒå…ƒç´ çš„æ•°ç»„å»æ›¿æ¢åŸæ¥çš„æ•°ç»„æ˜¯éå¸¸é«˜æ•ˆçš„æ“ä½œã€‚ æ³¨æ„äº‹é¡¹ ç”±äº JavaScript çš„é™åˆ¶ï¼ŒVue ä¸èƒ½æ£€æµ‹æ•°ç»„å’Œå¯¹è±¡çš„å˜åŒ–ã€‚æ·±å…¥å“åº”å¼åŸç†ä¸­æœ‰ç›¸å…³çš„è®¨è®ºã€‚ Â· æ˜¾ç¤ºè¿‡æ»¤/æ’åºåçš„ç»“æœ â€¢ æœ‰æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦æ˜¾ç¤ºä¸€ä¸ªæ•°ç»„ç»è¿‡è¿‡æ»¤æˆ–æ’åºåçš„ç‰ˆæœ¬ï¼Œè€Œä¸å®é™…å˜æ›´æˆ–é‡ç½®åŸå§‹æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œæ¥è¿”å›è¿‡æ»¤æˆ–æ’åºåçš„æ•°ç»„ã€‚ ä¾‹å¦‚ï¼š data: { numbers: [ 1, 2, 3, 4, 5 ] }, computed: { evenNumbers: function () { return this.numbers.filter(function (number) { return number % 2 === 0 }) } } åœ¨è®¡ç®—å±æ€§ä¸é€‚ç”¨çš„æƒ…å†µä¸‹ (ä¾‹å¦‚ï¼Œåœ¨åµŒå¥— v-for å¾ªç¯ä¸­) ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•ï¼š data: { sets: [[ 1, 2, 3, 4, 5 ], [6, 7, 8, 9, 10]] }, methods: { even: function (numbers) { return numbers.filter(function (number) { return number % 2 === 0 }) } } Â· åœ¨ v-for é‡Œä½¿ç”¨å€¼èŒƒå›´ â€¢ åœ¨ v-for é‡Œä½¿ç”¨å€¼èŒƒå›´ v-for ä¹Ÿå¯ä»¥æ¥å—æ•´æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä¼šæŠŠæ¨¡æ¿é‡å¤å¯¹åº”æ¬¡æ•°ã€‚ ç»“æœï¼š12345678910 Â· åœ¨ ä¸Šä½¿ç”¨ v-for â€¢ ç±»ä¼¼äº v-ifï¼Œä½ ä¹Ÿå¯ä»¥åˆ©ç”¨å¸¦æœ‰ v-for çš„ æ¥å¾ªç¯æ¸²æŸ“ä¸€æ®µåŒ…å«å¤šä¸ªå…ƒç´ çš„å†…å®¹ã€‚æ¯”å¦‚ï¼š Â· v-for ä¸ v-if ä¸€åŒä½¿ç”¨ â€¢ æ³¨æ„æˆ‘ä»¬ä¸æ¨èåœ¨åŒä¸€å…ƒç´ ä¸Šä½¿ç”¨ v-if å’Œ v-forã€‚æ›´å¤šç»†èŠ‚å¯æŸ¥é˜…é£æ ¼æŒ‡å—ã€‚ å½“å®ƒä»¬å¤„äºåŒä¸€èŠ‚ç‚¹ï¼Œv-for çš„ä¼˜å…ˆçº§æ¯” v-if æ›´é«˜ï¼Œè¿™æ„å‘³ç€ v-if å°†åˆ†åˆ«é‡å¤è¿è¡Œäºæ¯ä¸ª v-for å¾ªç¯ä¸­ã€‚å½“ä½ åªæƒ³ä¸ºéƒ¨åˆ†é¡¹æ¸²æŸ“èŠ‚ç‚¹æ—¶ï¼Œè¿™ç§ä¼˜å…ˆçº§çš„æœºåˆ¶ä¼šååˆ†æœ‰ç”¨ï¼Œå¦‚ä¸‹ï¼š ä¸Šé¢çš„ä»£ç å°†åªæ¸²æŸ“æœªå®Œæˆçš„ todoã€‚ è€Œå¦‚æœä½ çš„ç›®çš„æ˜¯æœ‰æ¡ä»¶åœ°è·³è¿‡å¾ªç¯çš„æ‰§è¡Œï¼Œé‚£ä¹ˆå¯ä»¥å°† v-if ç½®äºå¤–å±‚å…ƒç´  (æˆ– ) ä¸Šã€‚å¦‚ï¼š No todos left! Â· åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ v-for â€¢ è¿™éƒ¨åˆ†å†…å®¹å‡å®šä½ å·²ç»äº†è§£ç»„ä»¶ç›¸å…³çŸ¥è¯†ã€‚ä½ ä¹Ÿå®Œå…¨å¯ä»¥å…ˆè·³è¿‡å®ƒï¼Œä»¥åå†å›æ¥æŸ¥çœ‹ã€‚ åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Šï¼Œä½ å¯ä»¥åƒåœ¨ä»»ä½•æ™®é€šå…ƒç´ ä¸Šä¸€æ ·ä½¿ç”¨ v-forã€‚ 2.2.0+ çš„ç‰ˆæœ¬é‡Œï¼Œå½“åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ v-for æ—¶ï¼Œkey ç°åœ¨æ˜¯å¿…é¡»çš„ã€‚ ç„¶è€Œï¼Œä»»ä½•æ•°æ®éƒ½ä¸ä¼šè¢«è‡ªåŠ¨ä¼ é€’åˆ°ç»„ä»¶é‡Œï¼Œå› ä¸ºç»„ä»¶æœ‰è‡ªå·±ç‹¬ç«‹çš„ä½œç”¨åŸŸã€‚ä¸ºäº†æŠŠè¿­ä»£æ•°æ®ä¼ é€’åˆ°ç»„ä»¶é‡Œï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ propï¼š ä¸è‡ªåŠ¨å°† item æ³¨å…¥åˆ°ç»„ä»¶é‡Œçš„åŸå› æ˜¯ï¼Œè¿™ä¼šä½¿å¾—ç»„ä»¶ä¸ v-for çš„è¿ä½œç´§å¯†è€¦åˆã€‚æ˜ç¡®ç»„ä»¶æ•°æ®çš„æ¥æºèƒ½å¤Ÿä½¿ç»„ä»¶åœ¨å…¶ä»–åœºåˆé‡å¤ä½¿ç”¨ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ todo åˆ—è¡¨çš„å®Œæ•´ä¾‹å­ï¼š Add a todo Add æ³¨æ„è¿™é‡Œçš„ is=&quot;todo-item&quot; attributeã€‚è¿™ç§åšæ³•åœ¨ä½¿ç”¨ DOM æ¨¡æ¿æ—¶æ˜¯ååˆ†å¿…è¦çš„ï¼Œå› ä¸ºåœ¨ å…ƒç´ å†…åªæœ‰ å…ƒç´ ä¼šè¢«çœ‹ä½œæœ‰æ•ˆå†…å®¹ã€‚è¿™æ ·åšå®ç°çš„æ•ˆæœä¸ ç›¸åŒï¼Œä½†æ˜¯å¯ä»¥é¿å¼€ä¸€äº›æ½œåœ¨çš„æµè§ˆå™¨è§£æé”™è¯¯ã€‚æŸ¥çœ‹ DOM æ¨¡æ¿è§£æè¯´æ˜ æ¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚ Vue.component('todo-item', { template: '\\ \\ é­‘é­…å…ˆç”Ÿ | å‰ç«¯\\ Remove\\ \\ ', props: ['title'] }) new Vue({ el: '#todo-list-example', data: { newTodoText: '', todos: [ { id: 1, title: 'Do the dishes', }, { id: 2, title: 'Take out the trash', }, { id: 3, title: 'Mow the lawn' } ], nextTodoId: 4 }, methods: { addNewTodo: function () { this.todos.push({ id: this.nextTodoId++, title: this.newTodoText }) this.newTodoText = '' } } }) 1.1.9. äº‹ä»¶å¤„ç† Â· ç›‘å¬äº‹ä»¶ â€¢ å¯ä»¥ç”¨ v-on æŒ‡ä»¤ç›‘å¬ DOM äº‹ä»¶ï¼Œå¹¶åœ¨è§¦å‘æ—¶è¿è¡Œä¸€äº› JavaScript ä»£ç ã€‚ ç¤ºä¾‹ï¼š Add 1 The button above has been clicked times. var example1 = new Vue({ el: '#example-1', data: { counter: 0 } }) Â· äº‹ä»¶å¤„ç†æ–¹æ³• â€¢ ç„¶è€Œè®¸å¤šäº‹ä»¶å¤„ç†é€»è¾‘ä¼šæ›´ä¸ºå¤æ‚ï¼Œæ‰€ä»¥ç›´æ¥æŠŠ JavaScript ä»£ç å†™åœ¨ v-on æŒ‡ä»¤ä¸­æ˜¯ä¸å¯è¡Œçš„ã€‚å› æ­¤ v-on è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªéœ€è¦è°ƒç”¨çš„æ–¹æ³•åç§°ã€‚ ç¤ºä¾‹ï¼š Greet var example2 = new Vue({ el: '#example-2', data: { name: 'Vue.js' }, // åœ¨ `methods` å¯¹è±¡ä¸­å®šä¹‰æ–¹æ³• methods: { greet: function (event) { // `this` åœ¨æ–¹æ³•é‡ŒæŒ‡å‘å½“å‰ Vue å®ä¾‹ alert('Hello ' + this.name + '!') // `event` æ˜¯åŸç”Ÿ DOM äº‹ä»¶ if (event) { alert(event.target.tagName) } } } }) // ä¹Ÿå¯ä»¥ç”¨ JavaScript ç›´æ¥è°ƒç”¨æ–¹æ³• example2.greet() // =&gt; 'Hello Vue.js!' Â· å†…è”å¤„ç†å™¨ä¸­çš„æ–¹æ³• â€¢ é™¤äº†ç›´æ¥ç»‘å®šåˆ°ä¸€ä¸ªæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥åœ¨å†…è” JavaScript è¯­å¥ä¸­è°ƒç”¨æ–¹æ³•ï¼š Say hi Say what new Vue({ el: '#example-3', methods: { say: function (message) { alert(message) } } }) ç»“æœï¼š æœ‰æ—¶ä¹Ÿéœ€è¦åœ¨å†…è”è¯­å¥å¤„ç†å™¨ä¸­è®¿é—®åŸå§‹çš„ DOM äº‹ä»¶ã€‚å¯ä»¥ç”¨ç‰¹æ®Šå˜é‡ $event æŠŠå®ƒä¼ å…¥æ–¹æ³•ï¼š Submit // ... methods: { warn: function (message, event) { // ç°åœ¨æˆ‘ä»¬å¯ä»¥è®¿é—®åŸç”Ÿäº‹ä»¶å¯¹è±¡ if (event) { event.preventDefault() } alert(message) } } Â· äº‹ä»¶ä¿®é¥°ç¬¦ â€¢ åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­è°ƒç”¨ event.preventDefault() æˆ– event.stopPropagation() æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ã€‚å°½ç®¡æˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•ä¸­è½»æ¾å®ç°è¿™ç‚¹ï¼Œä½†æ›´å¥½çš„æ–¹å¼æ˜¯ï¼šæ–¹æ³•åªæœ‰çº¯ç²¹çš„æ•°æ®é€»è¾‘ï¼Œè€Œä¸æ˜¯å»å¤„ç† DOM äº‹ä»¶ç»†èŠ‚ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVue.js ä¸º v-on æä¾›äº†äº‹ä»¶ä¿®é¥°ç¬¦ã€‚ä¹‹å‰æè¿‡ï¼Œä¿®é¥°ç¬¦æ˜¯ç”±ç‚¹å¼€å¤´çš„æŒ‡ä»¤åç¼€æ¥è¡¨ç¤ºçš„ã€‚ .stop .prevent .capture .self .once .passive ... ... ä½¿ç”¨ä¿®é¥°ç¬¦æ—¶ï¼Œé¡ºåºå¾ˆé‡è¦ï¼›ç›¸åº”çš„ä»£ç ä¼šä»¥åŒæ ·çš„é¡ºåºäº§ç”Ÿã€‚å› æ­¤ï¼Œç”¨ v-on:click.prevent.self ä¼šé˜»æ­¢æ‰€æœ‰çš„ç‚¹å‡»ï¼Œè€Œ v-on:click.self.prevent åªä¼šé˜»æ­¢å¯¹å…ƒç´ è‡ªèº«çš„ç‚¹å‡»ã€‚ 2.1.4 æ–°å¢ ä¸åƒå…¶å®ƒåªèƒ½å¯¹åŸç”Ÿçš„ DOM äº‹ä»¶èµ·ä½œç”¨çš„ä¿®é¥°ç¬¦ï¼Œ.once ä¿®é¥°ç¬¦è¿˜èƒ½è¢«ç”¨åˆ°è‡ªå®šä¹‰çš„ç»„ä»¶äº‹ä»¶ä¸Šã€‚å¦‚æœä½ è¿˜æ²¡æœ‰é˜…è¯»å…³äºç»„ä»¶çš„æ–‡æ¡£ï¼Œç°åœ¨å¤§å¯ä¸å¿…æ‹…å¿ƒã€‚ 2.3.0 æ–°å¢ Vue è¿˜å¯¹åº” addEventListener ä¸­çš„ passive é€‰é¡¹æä¾›äº† .passive ä¿®é¥°ç¬¦ã€‚ ... è¿™ä¸ª .passive ä¿®é¥°ç¬¦å°¤å…¶èƒ½å¤Ÿæå‡ç§»åŠ¨ç«¯çš„æ€§èƒ½ã€‚ ä¸è¦æŠŠ .passive å’Œ .prevent ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸º .prevent å°†ä¼šè¢«å¿½ç•¥ï¼ŒåŒæ—¶æµè§ˆå™¨å¯èƒ½ä¼šå‘ä½ å±•ç¤ºä¸€ä¸ªè­¦å‘Šã€‚è¯·è®°ä½ï¼Œ.passive ä¼šå‘Šè¯‰æµè§ˆå™¨ä½ ä¸æƒ³é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚ Â· æŒ‰é”®ä¿®é¥°ç¬¦ â€¢ åœ¨ç›‘å¬é”®ç›˜äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ£€æŸ¥è¯¦ç»†çš„æŒ‰é”®ã€‚Vue å…è®¸ä¸º v-on åœ¨ç›‘å¬é”®ç›˜äº‹ä»¶æ—¶æ·»åŠ æŒ‰é”®ä¿®é¥°ç¬¦ï¼š ä½ å¯ä»¥ç›´æ¥å°† KeyboardEvent.key æš´éœ²çš„ä»»æ„æœ‰æ•ˆæŒ‰é”®åè½¬æ¢ä¸º kebab-case æ¥ä½œä¸ºä¿®é¥°ç¬¦ã€‚ åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå¤„ç†å‡½æ•°åªä¼šåœ¨ $event.key ç­‰äº PageDown æ—¶è¢«è°ƒç”¨ã€‚ â€¢ æŒ‰é”®ç  â€¢ keyCode çš„äº‹ä»¶ç”¨æ³•å·²ç»è¢«åºŸå¼ƒäº†å¹¶å¯èƒ½ä¸ä¼šè¢«æœ€æ–°çš„æµè§ˆå™¨æ”¯æŒã€‚ ä½¿ç”¨ keyCode attribute ä¹Ÿæ˜¯å…è®¸çš„ï¼š ä¸ºäº†åœ¨å¿…è¦çš„æƒ…å†µä¸‹æ”¯æŒæ—§æµè§ˆå™¨ï¼ŒVue æä¾›äº†ç»å¤§å¤šæ•°å¸¸ç”¨çš„æŒ‰é”®ç çš„åˆ«åï¼š .enter .tab .delete (æ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®) .esc .space .up .down .left .right æœ‰ä¸€äº›æŒ‰é”® (.esc ä»¥åŠæ‰€æœ‰çš„æ–¹å‘é”®) åœ¨ IE9 ä¸­æœ‰ä¸åŒçš„ key å€¼, å¦‚æœä½ æƒ³æ”¯æŒ IE9ï¼Œè¿™äº›å†…ç½®çš„åˆ«ååº”è¯¥æ˜¯é¦–é€‰ã€‚ ä½ è¿˜å¯ä»¥é€šè¿‡å…¨å±€ config.keyCodes å¯¹è±¡è‡ªå®šä¹‰æŒ‰é”®ä¿®é¥°ç¬¦åˆ«åï¼š // å¯ä»¥ä½¿ç”¨ v-on:keyup.f1 Vue.config.keyCodes.f1 = 112 Â· ç³»ç»Ÿä¿®é¥°é”® â€¢ 2.1.0 æ–°å¢ â€¢ å¯ä»¥ç”¨å¦‚ä¸‹ä¿®é¥°ç¬¦æ¥å®ç°ä»…åœ¨æŒ‰ä¸‹ç›¸åº”æŒ‰é”®æ—¶æ‰è§¦å‘é¼ æ ‡æˆ–é”®ç›˜äº‹ä»¶çš„ç›‘å¬å™¨ã€‚ .ctrl .alt .shift .meta æ³¨æ„ï¼šåœ¨ Mac ç³»ç»Ÿé”®ç›˜ä¸Šï¼Œmeta å¯¹åº” command é”® (âŒ˜)ã€‚åœ¨ Windows ç³»ç»Ÿé”®ç›˜ meta å¯¹åº” Windows å¾½æ ‡é”® (âŠ)ã€‚åœ¨ Sun æ“ä½œç³»ç»Ÿé”®ç›˜ä¸Šï¼Œmeta å¯¹åº”å®å¿ƒå®çŸ³é”® (â—†)ã€‚åœ¨å…¶ä»–ç‰¹å®šé”®ç›˜ä¸Šï¼Œå°¤å…¶åœ¨ MIT å’Œ Lisp æœºå™¨çš„é”®ç›˜ã€ä»¥åŠå…¶åç»§äº§å“ï¼Œæ¯”å¦‚ Knight é”®ç›˜ã€space-cadet é”®ç›˜ï¼Œmeta è¢«æ ‡è®°ä¸ºâ€œMETAâ€ã€‚åœ¨ Symbolics é”®ç›˜ä¸Šï¼Œmeta è¢«æ ‡è®°ä¸ºâ€œMETAâ€æˆ–è€…â€œMetaâ€ã€‚ ä¾‹å¦‚ï¼š Do something è¯·æ³¨æ„ä¿®é¥°é”®ä¸å¸¸è§„æŒ‰é”®ä¸åŒï¼Œåœ¨å’Œ keyup äº‹ä»¶ä¸€èµ·ç”¨æ—¶ï¼Œäº‹ä»¶è§¦å‘æ—¶ä¿®é¥°é”®å¿…é¡»å¤„äºæŒ‰ä¸‹çŠ¶æ€ã€‚æ¢å¥è¯è¯´ï¼Œåªæœ‰åœ¨æŒ‰ä½ ctrl çš„æƒ…å†µä¸‹é‡Šæ”¾å…¶å®ƒæŒ‰é”®ï¼Œæ‰èƒ½è§¦å‘ keyup.ctrlã€‚è€Œå•å•é‡Šæ”¾ ctrl ä¹Ÿä¸ä¼šè§¦å‘äº‹ä»¶ã€‚å¦‚æœä½ æƒ³è¦è¿™æ ·çš„è¡Œä¸ºï¼Œè¯·ä¸º ctrl æ¢ç”¨ keyCodeï¼škeyup.17ã€‚ â€¢ .exact ä¿®é¥°ç¬¦ â€¢ 2.5.0 æ–°å¢ .exact ä¿®é¥°ç¬¦å…è®¸ä½ æ§åˆ¶ç”±ç²¾ç¡®çš„ç³»ç»Ÿä¿®é¥°ç¬¦ç»„åˆè§¦å‘çš„äº‹ä»¶ã€‚ A A A â€¢ é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦ â€¢ .left .right .middle è¿™äº›ä¿®é¥°ç¬¦ä¼šé™åˆ¶å¤„ç†å‡½æ•°ä»…å“åº”ç‰¹å®šçš„é¼ æ ‡æŒ‰é’®ã€‚ â€¢ ä¸ºä»€ä¹ˆåœ¨ HTML ä¸­ç›‘å¬äº‹ä»¶ï¼Ÿ â€¢ ä½ å¯èƒ½æ³¨æ„åˆ°è¿™ç§äº‹ä»¶ç›‘å¬çš„æ–¹å¼è¿èƒŒäº†å…³æ³¨ç‚¹åˆ†ç¦» (separation of concern) è¿™ä¸ªé•¿æœŸä»¥æ¥çš„ä¼˜è‰¯ä¼ ç»Ÿã€‚ä½†ä¸å¿…æ‹…å¿ƒï¼Œå› ä¸ºæ‰€æœ‰çš„ Vue.js äº‹ä»¶å¤„ç†æ–¹æ³•å’Œè¡¨è¾¾å¼éƒ½ä¸¥æ ¼ç»‘å®šåœ¨å½“å‰è§†å›¾çš„ ViewModel ä¸Šï¼Œå®ƒä¸ä¼šå¯¼è‡´ä»»ä½•ç»´æŠ¤ä¸Šçš„å›°éš¾ã€‚å®é™…ä¸Šï¼Œä½¿ç”¨ v-on æœ‰å‡ ä¸ªå¥½å¤„ï¼š æ‰«ä¸€çœ¼ HTML æ¨¡æ¿ä¾¿èƒ½è½»æ¾å®šä½åœ¨ JavaScript ä»£ç é‡Œå¯¹åº”çš„æ–¹æ³•ã€‚ å› ä¸ºä½ æ— é¡»åœ¨ JavaScript é‡Œæ‰‹åŠ¨ç»‘å®šäº‹ä»¶ï¼Œä½ çš„ ViewModel ä»£ç å¯ä»¥æ˜¯éå¸¸çº¯ç²¹çš„é€»è¾‘ï¼Œå’Œ DOM å®Œå…¨è§£è€¦ï¼Œæ›´æ˜“äºæµ‹è¯•ã€‚ å½“ä¸€ä¸ª ViewModel è¢«é”€æ¯æ—¶ï¼Œæ‰€æœ‰çš„äº‹ä»¶å¤„ç†å™¨éƒ½ä¼šè‡ªåŠ¨è¢«åˆ é™¤ã€‚ä½ æ— é¡»æ‹…å¿ƒå¦‚ä½•æ¸…ç†å®ƒä»¬ã€‚ Â· è¡¨å•è¾“å…¥ç»‘å®š â€¢ åŸºç¡€ç”¨æ³• â€¢ ä½ å¯ä»¥ç”¨ v-model æŒ‡ä»¤åœ¨è¡¨å• ã€ åŠ å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®šã€‚å®ƒä¼šæ ¹æ®æ§ä»¶ç±»å‹è‡ªåŠ¨é€‰å–æ­£ç¡®çš„æ–¹æ³•æ¥æ›´æ–°å…ƒç´ ã€‚å°½ç®¡æœ‰äº›ç¥å¥‡ï¼Œä½† v-model æœ¬è´¨ä¸Šä¸è¿‡æ˜¯è¯­æ³•ç³–ã€‚å®ƒè´Ÿè´£ç›‘å¬ç”¨æˆ·çš„è¾“å…¥äº‹ä»¶ä»¥æ›´æ–°æ•°æ®ï¼Œå¹¶å¯¹ä¸€äº›æç«¯åœºæ™¯è¿›è¡Œä¸€äº›ç‰¹æ®Šå¤„ç†ã€‚ v-model ä¼šå¿½ç•¥æ‰€æœ‰è¡¨å•å…ƒç´ çš„ valueã€checkedã€selected attribute çš„åˆå§‹å€¼è€Œæ€»æ˜¯å°† Vue å®ä¾‹çš„æ•°æ®ä½œä¸ºæ•°æ®æ¥æºã€‚ä½ åº”è¯¥é€šè¿‡ JavaScript åœ¨ç»„ä»¶çš„ data é€‰é¡¹ä¸­å£°æ˜åˆå§‹å€¼ã€‚ v-model åœ¨å†…éƒ¨ä¸ºä¸åŒçš„è¾“å…¥å…ƒç´ ä½¿ç”¨ä¸åŒçš„ property å¹¶æŠ›å‡ºä¸åŒçš„äº‹ä»¶ï¼š text å’Œ textarea å…ƒç´ ä½¿ç”¨ value property å’Œ input äº‹ä»¶ï¼› checkbox å’Œ radio ä½¿ç”¨ checked property å’Œ change äº‹ä»¶ï¼› select å­—æ®µå°† value ä½œä¸º prop å¹¶å°† change ä½œä¸ºäº‹ä»¶ã€‚ å¯¹äºéœ€è¦ä½¿ç”¨è¾“å…¥æ³• (å¦‚ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰) çš„è¯­è¨€ï¼Œä½ ä¼šå‘ç° v-model ä¸ä¼šåœ¨è¾“å…¥æ³•ç»„åˆæ–‡å­—è¿‡ç¨‹ä¸­å¾—åˆ°æ›´æ–°ã€‚å¦‚æœä½ ä¹Ÿæƒ³å¤„ç†è¿™ä¸ªè¿‡ç¨‹ï¼Œè¯·ä½¿ç”¨ input äº‹ä»¶ã€‚ â€¢ æ–‡æœ¬ â€¢ Message is: â€¢ å¤šè¡Œæ–‡æœ¬ â€¢ Multiline message is: â€¢ åœ¨æ–‡æœ¬åŒºåŸŸæ’å€¼ () å¹¶ä¸ä¼šç”Ÿæ•ˆï¼Œåº”ç”¨ v-model æ¥ä»£æ›¿ã€‚ â€¢ å¤é€‰æ¡† â€¢ å•ä¸ªå¤é€‰æ¡†ï¼Œç»‘å®šåˆ°å¸ƒå°”å€¼ï¼š â€¢ å¤šä¸ªå¤é€‰æ¡†ï¼Œç»‘å®šåˆ°åŒä¸€ä¸ªæ•°ç»„ï¼š Jack John Mike Checked names: new Vue({ el: '...', data: { checkedNames: [] } }) â€¢ å•é€‰æŒ‰é’® â€¢ One Two Picked: new Vue({ el: '#example-4', data: { picked: '' } }) â€¢ é€‰æ‹©æ¡† â€¢ å•é€‰æ—¶ï¼š è¯·é€‰æ‹© A B C Selected: new Vue({ el: '...', data: { selected: '' } }) è¯·é€‰æ‹© Selected: å¦‚æœ v-model è¡¨è¾¾å¼çš„åˆå§‹å€¼æœªèƒ½åŒ¹é…ä»»ä½•é€‰é¡¹ï¼Œ å…ƒç´ å°†è¢«æ¸²æŸ“ä¸ºâ€œæœªé€‰ä¸­â€çŠ¶æ€ã€‚åœ¨ iOS ä¸­ï¼Œè¿™ä¼šä½¿ç”¨æˆ·æ— æ³•é€‰æ‹©ç¬¬ä¸€ä¸ªé€‰é¡¹ã€‚å› ä¸ºè¿™æ ·çš„æƒ…å†µä¸‹ï¼ŒiOS ä¸ä¼šè§¦å‘ change äº‹ä»¶ã€‚å› æ­¤ï¼Œæ›´æ¨èåƒä¸Šé¢è¿™æ ·æä¾›ä¸€ä¸ªå€¼ä¸ºç©ºçš„ç¦ç”¨é€‰é¡¹ã€‚ â€¢ å¤šé€‰æ—¶ (ç»‘å®šåˆ°ä¸€ä¸ªæ•°ç»„)ï¼š A B C Selected: new Vue({ el: '#example-6', data: { selected: [] } }) ABC Selected: [] ç”¨ v-for æ¸²æŸ“çš„åŠ¨æ€é€‰é¡¹ï¼š Selected: new Vue({ el: '...', data: { selected: 'A', options: [ { text: 'One', value: 'A' }, { text: 'Two', value: 'B' }, { text: 'Three', value: 'C' } ] } }) â€¢ å€¼ç»‘å®š â€¢ å¯¹äºå•é€‰æŒ‰é’®ï¼Œå¤é€‰æ¡†åŠé€‰æ‹©æ¡†çš„é€‰é¡¹ï¼Œv-model ç»‘å®šçš„å€¼é€šå¸¸æ˜¯é™æ€å­—ç¬¦ä¸² (å¯¹äºå¤é€‰æ¡†ä¹Ÿå¯ä»¥æ˜¯å¸ƒå°”å€¼)ï¼š ABC ä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬å¯èƒ½æƒ³æŠŠå€¼ç»‘å®šåˆ° Vue å®ä¾‹çš„ä¸€ä¸ªåŠ¨æ€ property ä¸Šï¼Œè¿™æ—¶å¯ä»¥ç”¨ v-bind å®ç°ï¼Œå¹¶ä¸”è¿™ä¸ª property çš„å€¼å¯ä»¥ä¸æ˜¯å­—ç¬¦ä¸²ã€‚ â€¢ å¤é€‰æ¡† â€¢ &lt;input type=&quot;checkbox&quot; v-model=&quot;toggle&quot; true-value=&quot;yes&quot; false-value=&quot;no&quot; &gt; // å½“é€‰ä¸­æ—¶ vm.toggle === 'yes' // å½“æ²¡æœ‰é€‰ä¸­æ—¶ vm.toggle === 'no' è¿™é‡Œçš„ true-value å’Œ false-value attribute å¹¶ä¸ä¼šå½±å“è¾“å…¥æ§ä»¶çš„ value attributeï¼Œå› ä¸ºæµè§ˆå™¨åœ¨æäº¤è¡¨å•æ—¶å¹¶ä¸ä¼šåŒ…å«æœªè¢«é€‰ä¸­çš„å¤é€‰æ¡†ã€‚å¦‚æœè¦ç¡®ä¿è¡¨å•ä¸­è¿™ä¸¤ä¸ªå€¼ä¸­çš„ä¸€ä¸ªèƒ½å¤Ÿè¢«æäº¤ï¼Œ(å³â€œyesâ€æˆ–â€œnoâ€)ï¼Œè¯·æ¢ç”¨å•é€‰æŒ‰é’®ã€‚ â€¢ å•é€‰æŒ‰é’® â€¢ // å½“é€‰ä¸­æ—¶ vm.pick === vm.a â€¢ é€‰æ‹©æ¡†çš„é€‰é¡¹ â€¢ 123 // å½“é€‰ä¸­æ—¶ typeof vm.selected // => 'object' vm.selected.number // => 123 â€¢ ä¿®é¥°ç¬¦ â€¢ .lazy â€¢ åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œv-model åœ¨æ¯æ¬¡ input äº‹ä»¶è§¦å‘åå°†è¾“å…¥æ¡†çš„å€¼ä¸æ•°æ®è¿›è¡ŒåŒæ­¥ (é™¤äº†ä¸Šè¿°è¾“å…¥æ³•ç»„åˆæ–‡å­—æ—¶)ã€‚ä½ å¯ä»¥æ·»åŠ  lazy ä¿®é¥°ç¬¦ï¼Œä»è€Œè½¬ä¸ºåœ¨ change äº‹ä»¶_ä¹‹å_è¿›è¡ŒåŒæ­¥ï¼š â€¢ .number â€¢ å¦‚æœæƒ³è‡ªåŠ¨å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬ä¸ºæ•°å€¼ç±»å‹ï¼Œå¯ä»¥ç»™ v-model æ·»åŠ  number ä¿®é¥°ç¬¦ï¼š è¿™é€šå¸¸å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå³ä½¿åœ¨ type=\"number\" æ—¶ï¼ŒHTML è¾“å…¥å…ƒç´ çš„å€¼ä¹Ÿæ€»ä¼šè¿”å›å­—ç¬¦ä¸²ã€‚å¦‚æœè¿™ä¸ªå€¼æ— æ³•è¢« parseFloat() è§£æï¼Œåˆ™ä¼šè¿”å›åŸå§‹çš„å€¼ã€‚ â€¢ .trim â€¢ å¦‚æœè¦è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºç™½å­—ç¬¦ï¼Œå¯ä»¥ç»™ v-model æ·»åŠ  trim ä¿®é¥°ç¬¦ï¼š â€¢ åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ v-model â€¢ å¦‚æœä½ è¿˜ä¸ç†Ÿæ‚‰ Vue çš„ç»„ä»¶ï¼Œå¯ä»¥æš‚ä¸”è·³è¿‡è¿™é‡Œã€‚ HTML åŸç”Ÿçš„è¾“å…¥å…ƒç´ ç±»å‹å¹¶ä¸æ€»èƒ½æ»¡è¶³éœ€æ±‚ã€‚å¹¸å¥½ï¼ŒVue çš„ç»„ä»¶ç³»ç»Ÿå…è®¸ä½ åˆ›å»ºå…·æœ‰å®Œå…¨è‡ªå®šä¹‰è¡Œä¸ºä¸”å¯å¤ç”¨çš„è¾“å…¥ç»„ä»¶ã€‚è¿™äº›è¾“å…¥ç»„ä»¶ç”šè‡³å¯ä»¥å’Œ v-model ä¸€èµ·ä½¿ç”¨ï¼ 1.1.10. ç»„ä»¶åŸºç¡€ Â· åŸºæœ¬ç¤ºä¾‹ â€¢ // å®šä¹‰ä¸€ä¸ªåä¸º button-counter çš„æ–°ç»„ä»¶ Vue.component('button-counter', { data: function () { return { count: 0 } }, template: 'You clicked me times.' }) ç»„ä»¶æ˜¯å¯å¤ç”¨çš„ Vue å®ä¾‹ï¼Œä¸”å¸¦æœ‰ä¸€ä¸ªåå­—ï¼šåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªé€šè¿‡ new Vue åˆ›å»ºçš„ Vue æ ¹å®ä¾‹ä¸­ï¼ŒæŠŠè¿™ä¸ªç»„ä»¶ä½œä¸ºè‡ªå®šä¹‰å…ƒç´ æ¥ä½¿ç”¨ï¼š new Vue({ el: '#components-demo' }) å› ä¸ºç»„ä»¶æ˜¯å¯å¤ç”¨çš„ Vue å®ä¾‹ï¼Œæ‰€ä»¥å®ƒä»¬ä¸ new Vue æ¥æ”¶ç›¸åŒçš„é€‰é¡¹ï¼Œä¾‹å¦‚ dataã€computedã€watchã€methods ä»¥åŠç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ã€‚ä»…æœ‰çš„ä¾‹å¤–æ˜¯åƒ el è¿™æ ·æ ¹å®ä¾‹ç‰¹æœ‰çš„é€‰é¡¹ã€‚ Â· ç»„ä»¶çš„å¤ç”¨ â€¢ ä½ å¯ä»¥å°†ç»„ä»¶è¿›è¡Œä»»æ„æ¬¡æ•°çš„å¤ç”¨ï¼š æ³¨æ„å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½ä¼šå„è‡ªç‹¬ç«‹ç»´æŠ¤å®ƒçš„ countã€‚å› ä¸ºä½ æ¯ç”¨ä¸€æ¬¡ç»„ä»¶ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªå®ƒçš„æ–°å®ä¾‹è¢«åˆ›å»ºã€‚ â€¢ data å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•° â€¢ å½“æˆ‘ä»¬å®šä¹‰è¿™ä¸ª ç»„ä»¶æ—¶ï¼Œä½ å¯èƒ½ä¼šå‘ç°å®ƒçš„ data å¹¶ä¸æ˜¯åƒè¿™æ ·ç›´æ¥æä¾›ä¸€ä¸ªå¯¹è±¡ï¼š data: { count: 0 } å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä¸€ä¸ªç»„ä»¶çš„ data é€‰é¡¹å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æ¯ä¸ªå®ä¾‹å¯ä»¥ç»´æŠ¤ä¸€ä»½è¢«è¿”å›å¯¹è±¡çš„ç‹¬ç«‹çš„æ‹·è´ï¼š data: function () { return { count: 0 } } å¦‚æœ Vue æ²¡æœ‰è¿™æ¡è§„åˆ™ï¼Œç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å°±å¯èƒ½ä¼šåƒå¦‚ä¸‹ä»£ç ä¸€æ ·å½±å“åˆ°å…¶å®ƒæ‰€æœ‰å®ä¾‹ï¼š Â· ç»„ä»¶çš„ç»„ç»‡ â€¢ é€šå¸¸ä¸€ä¸ªåº”ç”¨ä¼šä»¥ä¸€æ£µåµŒå¥—çš„ç»„ä»¶æ ‘çš„å½¢å¼æ¥ç»„ç»‡ï¼š Component Tree ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šæœ‰é¡µå¤´ã€ä¾§è¾¹æ ã€å†…å®¹åŒºç­‰ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶åˆåŒ…å«äº†å…¶å®ƒçš„åƒå¯¼èˆªé“¾æ¥ã€åšæ–‡ä¹‹ç±»çš„ç»„ä»¶ã€‚ ä¸ºäº†èƒ½åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼Œè¿™äº›ç»„ä»¶å¿…é¡»å…ˆæ³¨å†Œä»¥ä¾¿ Vue èƒ½å¤Ÿè¯†åˆ«ã€‚è¿™é‡Œæœ‰ä¸¤ç§ç»„ä»¶çš„æ³¨å†Œç±»å‹ï¼šå…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ç»„ä»¶éƒ½åªæ˜¯é€šè¿‡ Vue.component å…¨å±€æ³¨å†Œçš„ï¼š Vue.component('my-component-name', { // ... options ... }) å…¨å±€æ³¨å†Œçš„ç»„ä»¶å¯ä»¥ç”¨åœ¨å…¶è¢«æ³¨å†Œä¹‹åçš„ä»»ä½• (é€šè¿‡ new Vue) æ–°åˆ›å»ºçš„ Vue æ ¹å®ä¾‹ï¼Œä¹ŸåŒ…æ‹¬å…¶ç»„ä»¶æ ‘ä¸­çš„æ‰€æœ‰å­ç»„ä»¶çš„æ¨¡æ¿ä¸­ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå…³äºç»„ä»¶æ³¨å†Œä½ éœ€è¦äº†è§£çš„å°±è¿™äº›äº†ï¼Œå¦‚æœä½ é˜…è¯»å®Œæœ¬é¡µå†…å®¹å¹¶æŒæ¡äº†å®ƒçš„å†…å®¹ï¼Œæˆ‘ä»¬ä¼šæ¨èä½ å†å›æ¥æŠŠç»„ä»¶æ³¨å†Œè¯»å®Œã€‚ Â· é€šè¿‡ Prop å‘å­ç»„ä»¶ä¼ é€’æ•°æ® â€¢ æ—©äº›æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°äº†åˆ›å»ºä¸€ä¸ªåšæ–‡ç»„ä»¶çš„äº‹æƒ…ã€‚é—®é¢˜æ˜¯å¦‚æœä½ ä¸èƒ½å‘è¿™ä¸ªç»„ä»¶ä¼ é€’æŸä¸€ç¯‡åšæ–‡çš„æ ‡é¢˜æˆ–å†…å®¹ä¹‹ç±»çš„æˆ‘ä»¬æƒ³å±•ç¤ºçš„æ•°æ®çš„è¯ï¼Œå®ƒæ˜¯æ²¡æœ‰åŠæ³•ä½¿ç”¨çš„ã€‚è¿™ä¹Ÿæ­£æ˜¯ prop çš„ç”±æ¥ã€‚ Prop æ˜¯ä½ å¯ä»¥åœ¨ç»„ä»¶ä¸Šæ³¨å†Œçš„ä¸€äº›è‡ªå®šä¹‰ attributeã€‚å½“ä¸€ä¸ªå€¼ä¼ é€’ç»™ä¸€ä¸ª prop attribute çš„æ—¶å€™ï¼Œå®ƒå°±å˜æˆäº†é‚£ä¸ªç»„ä»¶å®ä¾‹çš„ä¸€ä¸ª propertyã€‚ä¸ºäº†ç»™åšæ–‡ç»„ä»¶ä¼ é€’ä¸€ä¸ªæ ‡é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª props é€‰é¡¹å°†å…¶åŒ…å«åœ¨è¯¥ç»„ä»¶å¯æ¥å—çš„ prop åˆ—è¡¨ä¸­ï¼š Vue.component('blog-post', { props: ['title'], template: 'é­‘é­…å…ˆç”Ÿ | å‰ç«¯' }) ä¸€ä¸ªç»„ä»¶é»˜è®¤å¯ä»¥æ‹¥æœ‰ä»»æ„æ•°é‡çš„ propï¼Œä»»ä½•å€¼éƒ½å¯ä»¥ä¼ é€’ç»™ä»»ä½• propã€‚åœ¨ä¸Šè¿°æ¨¡æ¿ä¸­ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬èƒ½å¤Ÿåœ¨ç»„ä»¶å®ä¾‹ä¸­è®¿é—®è¿™ä¸ªå€¼ï¼Œå°±åƒè®¿é—® data ä¸­çš„å€¼ä¸€æ ·ã€‚ ä¸€ä¸ª prop è¢«æ³¨å†Œä¹‹åï¼Œä½ å°±å¯ä»¥åƒè¿™æ ·æŠŠæ•°æ®ä½œä¸ºä¸€ä¸ªè‡ªå®šä¹‰ attribute ä¼ é€’è¿›æ¥ï¼š ç„¶è€Œåœ¨ä¸€ä¸ªå…¸å‹çš„åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½åœ¨ data é‡Œæœ‰ä¸€ä¸ªåšæ–‡çš„æ•°ç»„ï¼š new Vue({ el: '#blog-post-demo', data: { posts: [ { id: 1, title: 'My journey with Vue' }, { id: 2, title: 'Blogging with Vue' }, { id: 3, title: 'Why Vue is so fun' } ] } }) å¹¶æƒ³è¦ä¸ºæ¯ç¯‡åšæ–‡æ¸²æŸ“ä¸€ä¸ªç»„ä»¶ï¼š &lt;blog-post v-for=&quot;post in posts&quot; v-bind:key=&quot;post.id&quot; v-bind:title=&quot;post.title&quot; &gt; å¦‚ä¸Šæ‰€ç¤ºï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ v-bind æ¥åŠ¨æ€ä¼ é€’ propã€‚è¿™åœ¨ä½ ä¸€å¼€å§‹ä¸æ¸…æ¥šè¦æ¸²æŸ“çš„å…·ä½“å†…å®¹ï¼Œæ¯”å¦‚ä»ä¸€ä¸ª API è·å–åšæ–‡åˆ—è¡¨çš„æ—¶å€™ï¼Œæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå…³äº prop ä½ éœ€è¦äº†è§£çš„å¤§æ¦‚å°±è¿™äº›äº†ï¼Œå¦‚æœä½ é˜…è¯»å®Œæœ¬é¡µå†…å®¹å¹¶æŒæ¡äº†å®ƒçš„å†…å®¹ï¼Œæˆ‘ä»¬ä¼šæ¨èä½ å†å›æ¥æŠŠ prop è¯»å®Œã€‚ Â· å•ä¸ªæ ¹å…ƒç´  â€¢ å½“æ„å»ºä¸€ä¸ª ç»„ä»¶æ—¶ï¼Œä½ çš„æ¨¡æ¿æœ€ç»ˆä¼šåŒ…å«çš„ä¸œè¥¿è¿œä¸æ­¢ä¸€ä¸ªæ ‡é¢˜ï¼š é­‘é­…å…ˆç”Ÿ | å‰ç«¯ æœ€æœ€èµ·ç ï¼Œä½ ä¼šåŒ…å«è¿™ç¯‡åšæ–‡çš„æ­£æ–‡ï¼š é­‘é­…å…ˆç”Ÿ | å‰ç«¯ ç„¶è€Œå¦‚æœä½ åœ¨æ¨¡æ¿ä¸­å°è¯•è¿™æ ·å†™ï¼ŒVue ä¼šæ˜¾ç¤ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶è§£é‡Šé“ every component must have a single root element (æ¯ä¸ªç»„ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªæ ¹å…ƒç´ )ã€‚ä½ å¯ä»¥å°†æ¨¡æ¿çš„å†…å®¹åŒ…è£¹åœ¨ä¸€ä¸ªçˆ¶å…ƒç´ å†…ï¼Œæ¥ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚ï¼š é­‘é­…å…ˆç”Ÿ | å‰ç«¯ çœ‹èµ·æ¥å½“ç»„ä»¶å˜å¾—è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„åšæ–‡ä¸åªéœ€è¦æ ‡é¢˜å’Œå†…å®¹ï¼Œè¿˜éœ€è¦å‘å¸ƒæ—¥æœŸã€è¯„è®ºç­‰ç­‰ã€‚ä¸ºæ¯ä¸ªç›¸å…³çš„ä¿¡æ¯å®šä¹‰ä¸€ä¸ª prop ä¼šå˜å¾—å¾ˆéº»çƒ¦ï¼š æ‰€ä»¥æ˜¯æ—¶å€™é‡æ„ä¸€ä¸‹è¿™ä¸ª ç»„ä»¶äº†ï¼Œè®©å®ƒå˜æˆæ¥å—ä¸€ä¸ªå•ç‹¬çš„ post propï¼š Vue.component('blog-post', { props: ['post'], template: &lt;div class=&quot;blog-post&quot;&gt; &lt;h3&gt;{{ post.title }}&lt;/h3&gt; &lt;div v-html=&quot;post.content&quot;&gt;&lt;/div&gt; &lt;/div&gt; }) ä¸Šè¿°çš„è¿™ä¸ªå’Œä¸€äº›æ¥ä¸‹æ¥çš„ç¤ºä¾‹ä½¿ç”¨äº† JavaScript çš„æ¨¡æ¿å­—ç¬¦ä¸²æ¥è®©å¤šè¡Œçš„æ¨¡æ¿æ›´æ˜“è¯»ã€‚å®ƒä»¬åœ¨ IE ä¸‹å¹¶æ²¡æœ‰è¢«æ”¯æŒï¼Œæ‰€ä»¥å¦‚æœä½ éœ€è¦åœ¨ä¸ (ç»è¿‡ Babel æˆ– TypeScript ä¹‹ç±»çš„å·¥å…·) ç¼–è¯‘çš„æƒ…å†µä¸‹æ”¯æŒ IEï¼Œè¯·ä½¿ç”¨æŠ˜è¡Œè½¬ä¹‰å­—ç¬¦å–è€Œä»£ä¹‹ã€‚ ç°åœ¨ï¼Œä¸è®ºä½•æ—¶ä¸º post å¯¹è±¡æ·»åŠ ä¸€ä¸ªæ–°çš„ propertyï¼Œå®ƒéƒ½ä¼šè‡ªåŠ¨åœ°åœ¨ å†…å¯ç”¨ã€‚ Â· ç›‘å¬å­ç»„ä»¶äº‹ä»¶ â€¢ åœ¨æˆ‘ä»¬å¼€å‘ ç»„ä»¶æ—¶ï¼Œå®ƒçš„ä¸€äº›åŠŸèƒ½å¯èƒ½è¦æ±‚æˆ‘ä»¬å’Œçˆ¶çº§ç»„ä»¶è¿›è¡Œæ²Ÿé€šã€‚ä¾‹å¦‚æˆ‘ä»¬å¯èƒ½ä¼šå¼•å…¥ä¸€ä¸ªè¾…åŠ©åŠŸèƒ½æ¥æ”¾å¤§åšæ–‡çš„å­—å·ï¼ŒåŒæ—¶è®©é¡µé¢çš„å…¶å®ƒéƒ¨åˆ†ä¿æŒé»˜è®¤çš„å­—å·ã€‚ åœ¨å…¶çˆ¶ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ª postFontSize æ•°æ® property æ¥æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼š new Vue({ el: '#blog-posts-events-demo', data: { posts: [/* ... */], postFontSize: 1 } }) å®ƒå¯ä»¥åœ¨æ¨¡æ¿ä¸­ç”¨æ¥æ§åˆ¶æ‰€æœ‰åšæ–‡çš„å­—å·ï¼š ç°åœ¨æˆ‘ä»¬åœ¨æ¯ç¯‡åšæ–‡æ­£æ–‡ä¹‹å‰æ·»åŠ ä¸€ä¸ªæŒ‰é’®æ¥æ”¾å¤§å­—å·ï¼š Vue.component('blog-post', { props: ['post'], template: &lt;div class=&quot;blog-post&quot;&gt; &lt;h3&gt;{{ post.title }}&lt;/h3&gt; &lt;button&gt; Enlarge text &lt;/button&gt; &lt;div v-html=&quot;post.content&quot;&gt;&lt;/div&gt; &lt;/div&gt; }) é—®é¢˜æ˜¯è¿™ä¸ªæŒ‰é’®ä¸ä¼šåšä»»ä½•äº‹ï¼š Enlarge text å½“ç‚¹å‡»è¿™ä¸ªæŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰çˆ¶çº§ç»„ä»¶æ”¾å¤§æ‰€æœ‰åšæ–‡çš„æ–‡æœ¬ã€‚å¹¸å¥½ Vue å®ä¾‹æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶çš„ç³»ç»Ÿæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚çˆ¶çº§ç»„ä»¶å¯ä»¥åƒå¤„ç† native DOM äº‹ä»¶ä¸€æ ·é€šè¿‡ v-on ç›‘å¬å­ç»„ä»¶å®ä¾‹çš„ä»»æ„äº‹ä»¶ï¼š &lt;blog-post ... v-on:enlarge-text=&quot;postFontSize += 0.1&quot; &gt; åŒæ—¶å­ç»„ä»¶å¯ä»¥é€šè¿‡è°ƒç”¨å†…å»ºçš„ $emit æ–¹æ³•å¹¶ä¼ å…¥äº‹ä»¶åç§°æ¥è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼š Enlarge text æœ‰äº†è¿™ä¸ª v-on:enlarge-text=&quot;postFontSize += 0.1&quot; ç›‘å¬å™¨ï¼Œçˆ¶çº§ç»„ä»¶å°±ä¼šæ¥æ”¶è¯¥äº‹ä»¶å¹¶æ›´æ–° postFontSize çš„å€¼ã€‚ â€¢ ä½¿ç”¨äº‹ä»¶æŠ›å‡ºä¸€ä¸ªå€¼ â€¢ æœ‰çš„æ—¶å€™ç”¨ä¸€ä¸ªäº‹ä»¶æ¥æŠ›å‡ºä¸€ä¸ªç‰¹å®šçš„å€¼æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯èƒ½æƒ³è®© ç»„ä»¶å†³å®šå®ƒçš„æ–‡æœ¬è¦æ”¾å¤§å¤šå°‘ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨ $emit çš„ç¬¬äºŒä¸ªå‚æ•°æ¥æä¾›è¿™ä¸ªå€¼ï¼š Enlarge text ç„¶åå½“åœ¨çˆ¶çº§ç»„ä»¶ç›‘å¬è¿™ä¸ªäº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ $event è®¿é—®åˆ°è¢«æŠ›å‡ºçš„è¿™ä¸ªå€¼ï¼š &lt;blog-post ... v-on:enlarge-text=&quot;postFontSize += $event&quot; &gt; æˆ–è€…ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼š &lt;blog-post ... v-on:enlarge-text=&quot;onEnlargeText&quot; &gt; é‚£ä¹ˆè¿™ä¸ªå€¼å°†ä¼šä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥è¿™ä¸ªæ–¹æ³•ï¼š methods: { onEnlargeText: function (enlargeAmount) { this.postFontSize += enlargeAmount } } â€¢ åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ v-model â€¢ è‡ªå®šä¹‰äº‹ä»¶ä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºæ”¯æŒ v-model çš„è‡ªå®šä¹‰è¾“å…¥ç»„ä»¶ã€‚è®°ä½ï¼š ç­‰ä»·äºï¼š &lt;input v-bind:value=&quot;searchText&quot; v-on:input=&quot;searchText = $event.target.value&quot; &gt; å½“ç”¨åœ¨ç»„ä»¶ä¸Šæ—¶ï¼Œv-model åˆ™ä¼šè¿™æ ·ï¼š &lt;custom-input v-bind:value=&quot;searchText&quot; v-on:input=&quot;searchText = $event&quot; &gt; ä¸ºäº†è®©å®ƒæ­£å¸¸å·¥ä½œï¼Œè¿™ä¸ªç»„ä»¶å†…çš„ å¿…é¡»ï¼š å°†å…¶ value attribute ç»‘å®šåˆ°ä¸€ä¸ªåå« value çš„ prop ä¸Š åœ¨å…¶ input äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå°†æ–°çš„å€¼é€šè¿‡è‡ªå®šä¹‰çš„ input äº‹ä»¶æŠ›å‡º å†™æˆä»£ç ä¹‹åæ˜¯è¿™æ ·çš„ï¼š Vue.component('custom-input', { props: ['value'], template: &lt;input v-bind:value=&quot;value&quot; v-on:input=&quot;$emit('input', $event.target.value)&quot; \\&gt; }) ç°åœ¨ v-model å°±åº”è¯¥å¯ä»¥åœ¨è¿™ä¸ªç»„ä»¶ä¸Šå®Œç¾åœ°å·¥ä½œèµ·æ¥äº†ï¼š åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå…³äºç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶ä½ éœ€è¦äº†è§£çš„å¤§æ¦‚å°±è¿™äº›äº†ï¼Œå¦‚æœä½ é˜…è¯»å®Œæœ¬é¡µå†…å®¹å¹¶æŒæ¡äº†å®ƒçš„å†…å®¹ï¼Œæˆ‘ä»¬ä¼šæ¨èä½ å†å›æ¥æŠŠè‡ªå®šä¹‰äº‹ä»¶è¯»å®Œã€‚ Â· é€šè¿‡æ’æ§½åˆ†å‘å†…å®¹ â€¢ å’Œ HTML å…ƒç´ ä¸€æ ·ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å‘ä¸€ä¸ªç»„ä»¶ä¼ é€’å†…å®¹ï¼Œåƒè¿™æ ·ï¼š Something bad happened. å¯èƒ½ä¼šæ¸²æŸ“å‡ºè¿™æ ·çš„ä¸œè¥¿ï¼š å¹¸å¥½ï¼ŒVue è‡ªå®šä¹‰çš„ å…ƒç´ è®©è¿™å˜å¾—éå¸¸ç®€å•ï¼š Vue.component('alert-box', { template: ` Error! ` }) å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬åªè¦åœ¨éœ€è¦çš„åœ°æ–¹åŠ å…¥æ’æ§½å°±è¡Œäº†â€”â€”å°±è¿™ä¹ˆç®€å•ï¼ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå…³äºæ’æ§½ä½ éœ€è¦äº†è§£çš„å¤§æ¦‚å°±è¿™äº›äº†ï¼Œå¦‚æœä½ é˜…è¯»å®Œæœ¬é¡µå†…å®¹å¹¶æŒæ¡äº†å®ƒçš„å†…å®¹ï¼Œæˆ‘ä»¬ä¼šæ¨èä½ å†å›æ¥æŠŠæ’æ§½è¯»å®Œã€‚ Â· åŠ¨æ€ç»„ä»¶ â€¢ æœ‰çš„æ—¶å€™ï¼Œåœ¨ä¸åŒç»„ä»¶ä¹‹é—´è¿›è¡ŒåŠ¨æ€åˆ‡æ¢æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªå¤šæ ‡ç­¾çš„ç•Œé¢é‡Œï¼š ä¸Šè¿°å†…å®¹å¯ä»¥é€šè¿‡ Vue çš„ å…ƒç´ åŠ ä¸€ä¸ªç‰¹æ®Šçš„ is attribute æ¥å®ç°ï¼š åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼ŒcurrentTabComponent å¯ä»¥åŒ…æ‹¬ å·²æ³¨å†Œç»„ä»¶çš„åå­—ï¼Œæˆ– ä¸€ä¸ªç»„ä»¶çš„é€‰é¡¹å¯¹è±¡ ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥é˜…å¹¶ä½“éªŒå®Œæ•´çš„ä»£ç ï¼Œæˆ–åœ¨è¿™ä¸ªç‰ˆæœ¬äº†è§£ç»‘å®šç»„ä»¶é€‰é¡¹å¯¹è±¡ï¼Œè€Œä¸æ˜¯å·²æ³¨å†Œç»„ä»¶åçš„ç¤ºä¾‹ã€‚ è¯·ç•™æ„ï¼Œè¿™ä¸ª attribute å¯ä»¥ç”¨äºå¸¸è§„ HTML å…ƒç´ ï¼Œä½†è¿™äº›å…ƒç´ å°†è¢«è§†ä¸ºç»„ä»¶ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰çš„ attribute éƒ½ä¼šä½œä¸º DOM attribute è¢«ç»‘å®šã€‚å¯¹äºåƒ value è¿™æ ·çš„ propertyï¼Œè‹¥æƒ³è®©å…¶å¦‚é¢„æœŸèˆ¬å·¥ä½œï¼Œä½ éœ€è¦ä½¿ç”¨ .prop ä¿®é¥°å™¨ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå…³äºåŠ¨æ€ç»„ä»¶ä½ éœ€è¦äº†è§£çš„å¤§æ¦‚å°±è¿™äº›äº†ï¼Œå¦‚æœä½ é˜…è¯»å®Œæœ¬é¡µå†…å®¹å¹¶æŒæ¡äº†å®ƒçš„å†…å®¹ï¼Œæˆ‘ä»¬ä¼šæ¨èä½ å†å›æ¥æŠŠåŠ¨æ€å’Œå¼‚æ­¥ç»„ä»¶è¯»å®Œã€‚ Â· è§£æ DOM æ¨¡æ¿æ—¶çš„æ³¨æ„äº‹é¡¹ â€¢ æœ‰äº› HTML å…ƒç´ ï¼Œè¯¸å¦‚ ã€ã€ å’Œ ï¼Œå¯¹äºå“ªäº›å…ƒç´ å¯ä»¥å‡ºç°åœ¨å…¶å†…éƒ¨æ˜¯æœ‰ä¸¥æ ¼é™åˆ¶çš„ã€‚è€Œæœ‰äº›å…ƒç´ ï¼Œè¯¸å¦‚ ã€ å’Œ ï¼Œåªèƒ½å‡ºç°åœ¨å…¶å®ƒæŸäº›ç‰¹å®šçš„å…ƒç´ å†…éƒ¨ã€‚ è¿™ä¼šå¯¼è‡´æˆ‘ä»¬ä½¿ç”¨è¿™äº›æœ‰çº¦æŸæ¡ä»¶çš„å…ƒç´ æ—¶é‡åˆ°ä¸€äº›é—®é¢˜ã€‚ä¾‹å¦‚ï¼š è¿™ä¸ªè‡ªå®šä¹‰ç»„ä»¶ ä¼šè¢«ä½œä¸ºæ— æ•ˆçš„å†…å®¹æå‡åˆ°å¤–éƒ¨ï¼Œå¹¶å¯¼è‡´æœ€ç»ˆæ¸²æŸ“ç»“æœå‡ºé”™ã€‚å¹¸å¥½è¿™ä¸ªç‰¹æ®Šçš„ is attribute ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå˜é€šçš„åŠæ³•ï¼š éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœæˆ‘ä»¬ä»ä»¥ä¸‹æ¥æºä½¿ç”¨æ¨¡æ¿çš„è¯ï¼Œè¿™æ¡é™åˆ¶æ˜¯ä¸å­˜åœ¨çš„ï¼š å­—ç¬¦ä¸² (ä¾‹å¦‚ï¼štemplate: '...') å•æ–‡ä»¶ç»„ä»¶ (.vue) åˆ°è¿™é‡Œï¼Œä½ éœ€è¦äº†è§£çš„è§£æ DOM æ¨¡æ¿æ—¶çš„æ³¨æ„äº‹é¡¹â€”â€”å®é™…ä¸Šä¹Ÿæ˜¯ Vue çš„å…¨éƒ¨å¿…è¦å†…å®¹ï¼Œå¤§æ¦‚å°±æ˜¯è¿™äº›äº†ã€‚æ­å–œä½ ï¼æ¥ä¸‹æ¥è¿˜æœ‰å¾ˆå¤šä¸œè¥¿è¦å»å­¦ä¹ ï¼Œä¸è¿‡é¦–å…ˆï¼Œæˆ‘ä»¬æ¨èä½ å…ˆä¼‘æ¯ä¸€ä¸‹ï¼Œè¯•ç”¨ä¸€ä¸‹ Vueï¼Œè‡ªå·±éšæ„åšäº›å¥½ç©çš„ä¸œè¥¿ã€‚ å¦‚æœä½ æ„Ÿè§‰å·²ç»æŒæ¡äº†è¿™äº›çŸ¥è¯†ï¼Œæˆ‘ä»¬æ¨èä½ å†å›æ¥æŠŠå®Œæ•´çš„ç»„ä»¶æŒ‡å—ï¼ŒåŒ…æ‹¬ä¾§è¾¹æ ä¸­ç»„ä»¶æ·±å…¥ç« èŠ‚çš„æ‰€æœ‰é¡µé¢è¯»å®Œã€‚ ## 1.2. æ·±å…¥äº†è§£ç»„ä»¶ ## 1.3. è¿‡æ¸¡ & åŠ¨ç”» ## 1.4. å¯å¤ç”¨æ€§ & ç»„åˆ ## 1.5. å·¥å…· ### 1.5.1. CLI å®˜æ–¹è„šæ‰‹æ¶ï¼Œå¿«é€Ÿåˆ›å»ºé¡¹ç›® å®‰è£… â€¢ å®‰è£…node.js å®‰è£…æ·˜å®é•œåƒï¼ˆä¸ç„¶ä¼šæ…¢çš„ä¸€Xï¼‰ å…¨å±€å®‰è£…webpack cnpm install webpack -g å…¨å±€å®‰è£…vue-cli (cnpm install -g vue-cli) (ç”¨webpackæ¨¡æ¿æ¥åˆ›å»ºä¸€ä¸ªvueé¡¹ç›®)vue init webpack my-project å®‰è£…é¡¹ç›®ä¾èµ– cd my-project / cnpm install å¯åŠ¨é¡¹ç›® ç¼–è¯‘vueä¸ºé™æ€æ–‡ä»¶(npm run build)c â€¢ https://nodejs.org/en/ â€¢ node/npm -v â€¢ å®‰è£…cnpm â€¢ npm install -g cnpm --registry=http://registry.npm.taobao.org â€¢ cnpm -v â€¢ npm install -g @vue/cli \\# OR yarn global add @vue/cli â€¢ vue --version â€¢ é¡¹ç›®ä¾èµ– ä¸Šé¢åˆ—å‡ºæ¥çš„å‘½ä»¤æ˜¯ç”¨äºå‡çº§å…¨å±€çš„ Vue CLIã€‚å¦‚éœ€å‡çº§é¡¹ç›®ä¸­çš„ Vue CLI ç›¸å…³æ¨¡å—ï¼ˆä»¥ @vue/cli-plugin- æˆ– vue-cli-plugin- å¼€å¤´ï¼‰ï¼Œè¯·åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ vue upgradeï¼š ç”¨æ³•ï¼š upgrade [options] [plugin-name] ï¼ˆè¯•ç”¨ï¼‰å‡çº§ Vue CLI æœåŠ¡åŠæ’ä»¶ é€‰é¡¹ï¼š -t, --to å‡çº§ åˆ°æŒ‡å®šçš„ç‰ˆæœ¬ -f, --from è·³è¿‡æœ¬åœ°ç‰ˆæœ¬æ£€æµ‹ï¼Œé»˜è®¤æ’ä»¶æ˜¯ä»æ­¤å¤„æŒ‡å®šçš„ç‰ˆæœ¬å‡çº§ä¸Šæ¥ -r, --registry ä½¿ç”¨æŒ‡å®šçš„ registry åœ°å€å®‰è£…ä¾èµ– --all å‡çº§æ‰€æœ‰çš„æ’ä»¶ --next æ£€æŸ¥æ’ä»¶æ–°ç‰ˆæœ¬æ—¶ï¼ŒåŒ…æ‹¬ alpha/beta/rc ç‰ˆæœ¬åœ¨å†… -h, --help è¾“å‡ºå¸®åŠ©å†…å®¹ â€¢ vue init webpack my-first-demo(é¡¹ç›®æ–‡ä»¶å¤¹å)ã€‚ â€¢ é€šè¿‡è¾“å…¥cd my-first-demoå°±å¯ä»¥è¿›å…¥ç›®å½•å…·ä½“æ–‡ä»¶å¤¹å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼šcnmp installæˆ–è€…npm installå®‰è£…ä¾èµ–åŒ…ã€‚é‡æ–°æ‰“å¼€è·¯å¾„ä¸‹çš„æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ–‡ä»¶å¤¹ä¸­æ¯”ä¹‹å‰çš„æ–‡ä»¶å¤¹å¤šäº†ä¸€ä¸ªnode_modulesæ–‡ä»¶å¤¹ï¼Œåˆ°æ­¤è„šæ‰‹æ¶å®‰è£…å®Œæˆã€‚ â€¢ npm run dev Â· å¿«é€ŸåŸå‹å¼€å‘ â€¢ å®‰è£…ä¸€ä¸ªå…¨å±€çš„æ‰©å±•ï¼š npm install -g @vue/cli-service-global â€¢ vue serve Usage: serve [options] [entry] åœ¨å¼€å‘ç¯å¢ƒæ¨¡å¼ä¸‹é›¶é…ç½®ä¸º .js æˆ– .vue æ–‡ä»¶å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ Options: -o, --open æ‰“å¼€æµè§ˆå™¨ -c, --copy å°†æœ¬åœ° URL å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ -h, --help è¾“å‡ºç”¨æ³•ä¿¡æ¯ â€¢ App.vue æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹è¿è¡Œï¼š vue serve â€¢ vue build Usage: build [options] [entry] åœ¨ç”Ÿäº§ç¯å¢ƒæ¨¡å¼ä¸‹é›¶é…ç½®æ„å»ºä¸€ä¸ª .js æˆ– .vue æ–‡ä»¶ Options: -t, --target æ„å»ºç›®æ ‡ (app | lib | wc | wc-async, é»˜è®¤å€¼ï¼šapp) -n, --name åº“çš„åå­—æˆ– Web Components ç»„ä»¶çš„åå­— (é»˜è®¤å€¼ï¼šå…¥å£æ–‡ä»¶å) -d, --dest è¾“å‡ºç›®å½• (é»˜è®¤å€¼ï¼šdist) -h, --help è¾“å‡ºç”¨æ³•ä¿¡æ¯ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ vue build å°†ç›®æ ‡æ–‡ä»¶æ„å»ºæˆä¸€ä¸ªç”Ÿäº§ç¯å¢ƒçš„åŒ…å¹¶ç”¨æ¥éƒ¨ç½²ï¼š vue build MyComponent.vue Â· åˆ›å»ºä¸€ä¸ªé¡¹ç›® â€¢ å®‰è£…node node -væ£€æµ‹æ˜¯å¦æˆåŠŸ â€¢ npm install -g @vue/cli â€¢ yarn global add @vue/cli â€¢ vue create hello-world â€¢ vue create --help â€¢ vue uiè¿›å…¥å›¾å½¢åŒ–ç•Œé¢ Â· æ’ä»¶å’Œ Preset â€¢ vue add eslint Â· CLI æœåŠ¡ â€¢ vue-cli-service serve ç”¨æ³•ï¼švue-cli-service serve [options] [entry] é€‰é¡¹ï¼š --open åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶æ‰“å¼€æµè§ˆå™¨ --copy åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶å°† URL å¤åˆ¶åˆ°å‰ªåˆ‡ç‰ˆ --mode æŒ‡å®šç¯å¢ƒæ¨¡å¼ (é»˜è®¤å€¼ï¼šdevelopment) --host æŒ‡å®š host (é»˜è®¤å€¼ï¼š0.0.0.0) --port æŒ‡å®š port (é»˜è®¤å€¼ï¼š8080) --https ä½¿ç”¨ https (é»˜è®¤å€¼ï¼šfalse) â€¢ vue-cli-service build ç”¨æ³•ï¼švue-cli-service build [options] [entry|pattern] é€‰é¡¹ï¼š --mode æŒ‡å®šç¯å¢ƒæ¨¡å¼ (é»˜è®¤å€¼ï¼šproduction) --dest æŒ‡å®šè¾“å‡ºç›®å½• (é»˜è®¤å€¼ï¼šdist) --modern é¢å‘ç°ä»£æµè§ˆå™¨å¸¦è‡ªåŠ¨å›é€€åœ°æ„å»ºåº”ç”¨ --target app | lib | wc | wc-async (é»˜è®¤å€¼ï¼šapp) --name åº“æˆ– Web Components æ¨¡å¼ä¸‹çš„åå­— (é»˜è®¤å€¼ï¼špackage.json ä¸­çš„ \"name\" å­—æ®µæˆ–å…¥å£æ–‡ä»¶å) --no-clean åœ¨æ„å»ºé¡¹ç›®ä¹‹å‰ä¸æ¸…é™¤ç›®æ ‡ç›®å½• --report ç”Ÿæˆ report.html ä»¥å¸®åŠ©åˆ†æåŒ…å†…å®¹ --report-json ç”Ÿæˆ report.json ä»¥å¸®åŠ©åˆ†æåŒ…å†…å®¹ --watch ç›‘å¬æ–‡ä»¶å˜åŒ– ### 1.5.2. npm ### 1.5.3. webpak Â· jsåº”ç”¨ç¨‹åºæ¨¡å—æ‰“åŒ…å·¥å…· Â· ä»»ä½•æ–‡ä»¶ï¼Œå›¾ç‰‡ï¼Œcssï¼Œå­—ä½“æˆä¸ºæ¨¡å—ï¼ˆModelï¼‰ï¼Œå½¼æ­¤å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œwebpackå°±æ˜¯æ¥å¤„ç†æ¨¡å—é—´çš„å…³ç³»ï¼Œå¹¶å¯¹å…¶æ‰“åŒ… Â· npm install webpack --save-devå±€éƒ¨å®‰è£… Â· npm install webpack-dev-server --save-devå¯ä»¥æä¾›å¾ˆå¤šæœåŠ¡ï¼Œæ¯”å¦‚ Â· webpack --progress --hide-modulesæ‰“åŒ… Â· æ ¸å¿ƒæ¦‚å¿µ â€¢ webpackå°±æ˜¯ä¸€ä¸ªjsæ–‡ä»¶ï¼š â€¢ package.json â€¢ { \"name\": \"bootvue\", \"version\": \"1.0.0\", \"description\": \"A Vue.js project\", \"author\": \"lxl \", \"private\": true, //scripts dev:å¿«é€Ÿå¯åŠ¨webpack-dev-serveræœåŠ¡è„šæœ¬ \"scripts\": { \"dev\": \"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js\", \"start\": \"npm run dev\", \"build\": \"node build/build.js\" }, \"dependencies\": { }, \"devDependencies\": { }, \"engines\": { \"node\": \">= 6.0.0\", \"npm\": \">= 3.0.0\" }, \"browserslist\": [ \"> 1%\", \"last 2 versions\", \"not ie","link":"/2021/03/01/Draft/2021/%E5%89%8D%E7%AB%AF/"},{"title":"MongoDB","text":"æœ€åƒå…³ç³»å‹æ•°æ®åº“çš„éå…³ç³»å‹æ•°æ®åº“ æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ï¼š WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ï¼š HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘ï¼šèœé¸Ÿã€å®˜æ–¹æ–‡æ¡£ LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ï¼š è¿›åº¦ï¼šã€ä¸€å¤©ã€‘ å¿«æŸ¥ å‘½ä»¤ è§£é‡Š å¤‡æ³¨ show dbs æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ db æ˜¾ç¤ºå½“å‰æ•°æ®åº“å¯¹è±¡æˆ–é›†åˆ use è¿æ¥åˆ°ä¸€ä¸ªæŒ‡å®šçš„æ•°æ®åº“ db.createCollection(name, options) åˆ›å»ºé›†åˆ show collections æˆ– show tables æŸ¥çœ‹é›†åˆ å…³ç³»å›¾ ä¸€ã€ç®€ä»‹ C++è¯­è¨€ç¼–å†™çš„ï¼Œæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„å¼€æºæ•°æ®åº“ç³»ç»Ÿã€‚ åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ æ›´å¤šçš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä¿è¯æœåŠ¡å™¨æ€§èƒ½ã€‚ MongoDB æ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚ MongoDB å°†æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ•°æ®ç»“æ„ç”±é”®å€¼(key=&gt;value)å¯¹ç»„æˆã€‚MongoDB æ–‡æ¡£ç±»ä¼¼äº JSON å¯¹è±¡ã€‚å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚ ç¯å¢ƒï¼šwin10 äºŒã€åŸºç¡€æ¦‚å¿µ SQLæœ¯è¯­/æ¦‚å¿µ MongoDBæœ¯è¯­/æ¦‚å¿µ è§£é‡Š/è¯´æ˜ database database æ•°æ®åº“ table collection æ•°æ®åº“è¡¨/é›†åˆ row document æ•°æ®è®°å½•è¡Œ/æ–‡æ¡£ column field æ•°æ®å­—æ®µ/åŸŸ index index ç´¢å¼• table joins è¡¨è¿æ¥,MongoDBä¸æ”¯æŒ primary key primary key ä¸»é”®,MongoDBè‡ªåŠ¨å°†_idå­—æ®µè®¾ç½®ä¸ºä¸»é”® é»˜è®¤æ•°æ®åº“ä¸ºdbæ–‡ä»¶å¤¹éœ€è¦è‡ªå·±åˆ›å»ºï¼Œæ•°æ®æ”¾åœ¨dataæ–‡ä»¶å¤¹ä¸­ æ–‡æ¡£(Document) â€‹ æ–‡æ¡£æ˜¯ä¸€ç»„é”®å€¼(key-value)å¯¹(å³ BSON)ã€‚MongoDB çš„æ–‡æ¡£ä¸éœ€è¦è®¾ç½®ç›¸åŒçš„å­—æ®µï¼Œå¹¶ä¸”ç›¸åŒçš„å­—æ®µä¸éœ€è¦ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œè¿™ä¸å…³ç³»å‹æ•°æ®åº“æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œä¹Ÿæ˜¯ MongoDB éå¸¸çªå‡ºçš„ç‰¹ç‚¹ã€‚ä¸€ä¸ªç®€å•çš„æ–‡æ¡£ä¾‹å­å¦‚ä¸‹ï¼š 1{&quot;site&quot;:&quot;www.runoob.com&quot;, &quot;name&quot;:&quot;èœé¸Ÿæ•™ç¨‹&quot;} ä¸‹è¡¨åˆ—å‡ºäº† RDBMS ä¸ MongoDB å¯¹åº”çš„æœ¯è¯­ï¼š RDBMS MongoDB æ•°æ®åº“ æ•°æ®åº“ è¡¨æ ¼ é›†åˆ è¡Œ æ–‡æ¡£ åˆ— å­—æ®µ è¡¨è”åˆ åµŒå…¥æ–‡æ¡£ ä¸»é”® ä¸»é”® (MongoDB æä¾›äº† key ä¸º _id ) æ•°æ®åº“æœåŠ¡å’Œå®¢æˆ·ç«¯ Mysqld/Oracle mongod mysql/sqlplus mongo éœ€è¦æ³¨æ„çš„æ˜¯ï¼š æ–‡æ¡£ä¸­çš„é”®/å€¼å¯¹æ˜¯æœ‰åºçš„ã€‚ æ–‡æ¡£ä¸­çš„å€¼ä¸ä»…å¯ä»¥æ˜¯åœ¨åŒå¼•å·é‡Œé¢çš„å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥æ˜¯å…¶ä»–å‡ ç§æ•°æ®ç±»å‹ï¼ˆç”šè‡³å¯ä»¥æ˜¯æ•´ä¸ªåµŒå…¥çš„æ–‡æ¡£)ã€‚ MongoDBåŒºåˆ†ç±»å‹å’Œå¤§å°å†™ã€‚ MongoDBçš„æ–‡æ¡£ä¸èƒ½æœ‰é‡å¤çš„é”®ã€‚ æ–‡æ¡£çš„é”®æ˜¯å­—ç¬¦ä¸²ã€‚é™¤äº†å°‘æ•°ä¾‹å¤–æƒ…å†µï¼Œé”®å¯ä»¥ä½¿ç”¨ä»»æ„UTF-8å­—ç¬¦ã€‚ æ–‡æ¡£é”®å‘½åè§„èŒƒï¼š é”®ä¸èƒ½å«æœ‰\\0 (ç©ºå­—ç¬¦)ã€‚è¿™ä¸ªå­—ç¬¦ç”¨æ¥è¡¨ç¤ºé”®çš„ç»“å°¾ã€‚ .å’Œ$æœ‰ç‰¹åˆ«çš„æ„ä¹‰ï¼Œåªæœ‰åœ¨ç‰¹å®šç¯å¢ƒä¸‹æ‰èƒ½ä½¿ç”¨ã€‚ ä»¥ä¸‹åˆ’çº¿&quot;_&quot;å¼€å¤´çš„é”®æ˜¯ä¿ç•™çš„(ä¸æ˜¯ä¸¥æ ¼è¦æ±‚çš„)ã€‚ é›†åˆ / è¡¨ é›†åˆå°±æ˜¯ MongoDB æ–‡æ¡£ç»„ï¼Œç±»ä¼¼äº RDBMS ï¼ˆå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼šRelational Database Management System)ä¸­çš„è¡¨æ ¼ã€‚ é›†åˆå­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œé›†åˆæ²¡æœ‰å›ºå®šçš„ç»“æ„ï¼Œè¿™æ„å‘³ç€ä½ åœ¨å¯¹é›†åˆå¯ä»¥æ’å…¥ä¸åŒæ ¼å¼å’Œç±»å‹çš„æ•°æ®ï¼Œä½†é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ’å…¥é›†åˆçš„æ•°æ®éƒ½ä¼šæœ‰ä¸€å®šçš„å…³è”æ€§ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»¥ä¸‹ä¸åŒæ•°æ®ç»“æ„çš„æ–‡æ¡£æ’å…¥åˆ°é›†åˆä¸­ï¼š 123{&quot;site&quot;:&quot;www.baidu.com&quot;}{&quot;site&quot;:&quot;www.google.com&quot;,&quot;name&quot;:&quot;Google&quot;}{&quot;site&quot;:&quot;www.runoob.com&quot;,&quot;name&quot;:&quot;èœé¸Ÿæ•™ç¨‹&quot;,&quot;num&quot;:5} å½“ç¬¬ä¸€ä¸ªæ–‡æ¡£æ’å…¥æ—¶ï¼Œé›†åˆå°±ä¼šè¢«åˆ›å»ºã€‚ åˆæ³•çš„é›†åˆå é›†åˆåä¸èƒ½æ˜¯ç©ºå­—ç¬¦ä¸²&quot;&quot;ã€‚ é›†åˆåä¸èƒ½å«æœ‰\\0å­—ç¬¦ï¼ˆç©ºå­—ç¬¦)ï¼Œè¿™ä¸ªå­—ç¬¦è¡¨ç¤ºé›†åˆåçš„ç»“å°¾ã€‚ é›†åˆåä¸èƒ½ä»¥&quot;system.&quot;å¼€å¤´ï¼Œè¿™æ˜¯ä¸ºç³»ç»Ÿé›†åˆä¿ç•™çš„å‰ç¼€ã€‚ ç”¨æˆ·åˆ›å»ºçš„é›†åˆåå­—ä¸èƒ½å«æœ‰ä¿ç•™å­—ç¬¦ã€‚æœ‰äº›é©±åŠ¨ç¨‹åºçš„ç¡®æ”¯æŒåœ¨é›†åˆåé‡Œé¢åŒ…å«ï¼Œè¿™æ˜¯å› ä¸ºæŸäº›ç³»ç»Ÿç”Ÿæˆçš„é›†åˆä¸­åŒ…å«è¯¥å­—ç¬¦ã€‚é™¤éä½ è¦è®¿é—®è¿™ç§ç³»ç»Ÿåˆ›å»ºçš„é›†åˆï¼Œå¦åˆ™åƒä¸‡ä¸è¦åœ¨åå­—é‡Œå‡ºç°$ã€‚ å¦‚ä¸‹å®ä¾‹ï¼š 1db.col.findOne() capped collections Capped collections å°±æ˜¯å›ºå®šå¤§å°çš„collectionã€‚ å®ƒæœ‰å¾ˆé«˜çš„æ€§èƒ½ä»¥åŠé˜Ÿåˆ—è¿‡æœŸçš„ç‰¹æ€§(è¿‡æœŸæŒ‰ç…§æ’å…¥çš„é¡ºåº). æœ‰ç‚¹å’Œ &quot;RRD&quot; æ¦‚å¿µç±»ä¼¼ã€‚ Capped collections æ˜¯é«˜æ€§èƒ½è‡ªåŠ¨çš„ç»´æŠ¤å¯¹è±¡çš„æ’å…¥é¡ºåºã€‚å®ƒéå¸¸é€‚åˆç±»ä¼¼è®°å½•æ—¥å¿—çš„åŠŸèƒ½ï¼Œå’Œæ ‡å‡†çš„ collection ä¸åŒï¼Œä½ å¿…é¡»è¦æ˜¾å¼çš„åˆ›å»ºä¸€ä¸ªcapped collectionï¼ŒæŒ‡å®šä¸€ä¸ª collection çš„å¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ã€‚collection çš„æ•°æ®å­˜å‚¨ç©ºé—´å€¼æå‰åˆ†é…çš„ã€‚ Capped collections å¯ä»¥æŒ‰ç…§æ–‡æ¡£çš„æ’å…¥é¡ºåºä¿å­˜åˆ°é›†åˆä¸­ï¼Œè€Œä¸”è¿™äº›æ–‡æ¡£åœ¨ç£ç›˜ä¸Šå­˜æ”¾ä½ç½®ä¹Ÿæ˜¯æŒ‰ç…§æ’å…¥é¡ºåºæ¥ä¿å­˜çš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ›´æ–°Capped collections ä¸­æ–‡æ¡£çš„æ—¶å€™ï¼Œæ›´æ–°åçš„æ–‡æ¡£ä¸å¯ä»¥è¶…è¿‡ä¹‹å‰æ–‡æ¡£çš„å¤§å°ï¼Œè¿™æ ·è¯å°±å¯ä»¥ç¡®ä¿æ‰€æœ‰æ–‡æ¡£åœ¨ç£ç›˜ä¸Šçš„ä½ç½®ä¸€ç›´ä¿æŒä¸å˜ã€‚ ç”±äº Capped collection æ˜¯æŒ‰ç…§æ–‡æ¡£çš„æ’å…¥é¡ºåºè€Œä¸æ˜¯ä½¿ç”¨ç´¢å¼•ç¡®å®šæ’å…¥ä½ç½®ï¼Œè¿™æ ·çš„è¯å¯ä»¥æé«˜å¢æ·»æ•°æ®çš„æ•ˆç‡ã€‚MongoDB çš„æ“ä½œæ—¥å¿—æ–‡ä»¶ oplog.rs å°±æ˜¯åˆ©ç”¨ Capped Collection æ¥å®ç°çš„ã€‚ è¦æ³¨æ„çš„æ˜¯æŒ‡å®šçš„å­˜å‚¨å¤§å°åŒ…å«äº†æ•°æ®åº“çš„å¤´ä¿¡æ¯ã€‚ 1db.createCollection(&quot;mycoll&quot;, {capped:true, size:100000}) åœ¨ capped collection ä¸­ï¼Œä½ èƒ½æ·»åŠ æ–°çš„å¯¹è±¡ã€‚ èƒ½è¿›è¡Œæ›´æ–°ï¼Œç„¶è€Œï¼Œå¯¹è±¡ä¸ä¼šå¢åŠ å­˜å‚¨ç©ºé—´ã€‚å¦‚æœå¢åŠ ï¼Œæ›´æ–°å°±ä¼šå¤±è´¥ ã€‚ ä½¿ç”¨ Capped Collection ä¸èƒ½åˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼Œå¯ä»¥ä½¿ç”¨ drop() æ–¹æ³•åˆ é™¤ collection æ‰€æœ‰çš„è¡Œã€‚ åˆ é™¤ä¹‹åï¼Œä½ å¿…é¡»æ˜¾å¼çš„é‡æ–°åˆ›å»ºè¿™ä¸ª collectionã€‚ åœ¨32bitæœºå™¨ä¸­ï¼Œcapped collection æœ€å¤§å­˜å‚¨ä¸º 1e9( 1X109)ä¸ªå­—èŠ‚ã€‚ å…ƒæ•°æ® æ•°æ®åº“çš„ä¿¡æ¯æ˜¯å­˜å‚¨åœ¨é›†åˆä¸­ã€‚å®ƒä»¬ä½¿ç”¨äº†ç³»ç»Ÿçš„å‘½åç©ºé—´ï¼š 1dbname.system.* åœ¨MongoDBæ•°æ®åº“ä¸­åå­—ç©ºé—´ .system.* æ˜¯åŒ…å«å¤šç§ç³»ç»Ÿä¿¡æ¯çš„ç‰¹æ®Šé›†åˆ(Collection)ï¼Œå¦‚ä¸‹: é›†åˆå‘½åç©ºé—´ æè¿° dbname.system.namespaces åˆ—å‡ºæ‰€æœ‰åå­—ç©ºé—´ã€‚ dbname.system.indexes åˆ—å‡ºæ‰€æœ‰ç´¢å¼•ã€‚ dbname.system.profile åŒ…å«æ•°æ®åº“æ¦‚è¦(profile)ä¿¡æ¯ã€‚ dbname.system.users åˆ—å‡ºæ‰€æœ‰å¯è®¿é—®æ•°æ®åº“çš„ç”¨æˆ·ã€‚ dbname.local.sources åŒ…å«å¤åˆ¶å¯¹ç«¯ï¼ˆslaveï¼‰çš„æœåŠ¡å™¨ä¿¡æ¯å’ŒçŠ¶æ€ã€‚ å¯¹äºä¿®æ”¹ç³»ç»Ÿé›†åˆä¸­çš„å¯¹è±¡æœ‰å¦‚ä¸‹é™åˆ¶ã€‚ åœ¨æ’å…¥æ•°æ®ï¼Œå¯ä»¥åˆ›å»ºç´¢å¼•ã€‚ä½†é™¤æ­¤ä¹‹å¤–è¯¥è¡¨ä¿¡æ¯æ˜¯ä¸å¯å˜çš„(ç‰¹æ®Šçš„drop indexå‘½ä»¤å°†è‡ªåŠ¨æ›´æ–°ç›¸å…³ä¿¡æ¯)ã€‚ æ˜¯å¯ä¿®æ”¹çš„ã€‚ æ˜¯å¯åˆ é™¤çš„ã€‚ MongoDB æ•°æ®ç±»å‹ ä¸‹è¡¨ä¸ºMongoDBä¸­å¸¸ç”¨çš„å‡ ç§æ•°æ®ç±»å‹ã€‚ æ•°æ®ç±»å‹ æè¿° String å­—ç¬¦ä¸²ã€‚å­˜å‚¨æ•°æ®å¸¸ç”¨çš„æ•°æ®ç±»å‹ã€‚åœ¨ MongoDB ä¸­ï¼ŒUTF-8 ç¼–ç çš„å­—ç¬¦ä¸²æ‰æ˜¯åˆæ³•çš„ã€‚ Integer æ•´å‹æ•°å€¼ã€‚ç”¨äºå­˜å‚¨æ•°å€¼ã€‚æ ¹æ®ä½ æ‰€é‡‡ç”¨çš„æœåŠ¡å™¨ï¼Œå¯åˆ†ä¸º 32 ä½æˆ– 64 ä½ã€‚ Boolean å¸ƒå°”å€¼ã€‚ç”¨äºå­˜å‚¨å¸ƒå°”å€¼ï¼ˆçœŸ/å‡ï¼‰ã€‚ Double åŒç²¾åº¦æµ®ç‚¹å€¼ã€‚ç”¨äºå­˜å‚¨æµ®ç‚¹å€¼ã€‚ Min/Max keys å°†ä¸€ä¸ªå€¼ä¸ BSONï¼ˆäºŒè¿›åˆ¶çš„ JSONï¼‰å…ƒç´ çš„æœ€ä½å€¼å’Œæœ€é«˜å€¼ç›¸å¯¹æ¯”ã€‚ Array ç”¨äºå°†æ•°ç»„æˆ–åˆ—è¡¨æˆ–å¤šä¸ªå€¼å­˜å‚¨ä¸ºä¸€ä¸ªé”®ã€‚ Timestamp æ—¶é—´æˆ³ã€‚è®°å½•æ–‡æ¡£ä¿®æ”¹æˆ–æ·»åŠ çš„å…·ä½“æ—¶é—´ã€‚ Object ç”¨äºå†…åµŒæ–‡æ¡£ã€‚ Null ç”¨äºåˆ›å»ºç©ºå€¼ã€‚ Symbol ç¬¦å·ã€‚è¯¥æ•°æ®ç±»å‹åŸºæœ¬ä¸Šç­‰åŒäºå­—ç¬¦ä¸²ç±»å‹ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œå®ƒä¸€èˆ¬ç”¨äºé‡‡ç”¨ç‰¹æ®Šç¬¦å·ç±»å‹çš„è¯­è¨€ã€‚ Date æ—¥æœŸæ—¶é—´ã€‚ç”¨ UNIX æ—¶é—´æ ¼å¼æ¥å­˜å‚¨å½“å‰æ—¥æœŸæˆ–æ—¶é—´ã€‚ä½ å¯ä»¥æŒ‡å®šè‡ªå·±çš„æ—¥æœŸæ—¶é—´ï¼šåˆ›å»º Date å¯¹è±¡ï¼Œä¼ å…¥å¹´æœˆæ—¥ä¿¡æ¯ã€‚ Object ID å¯¹è±¡ IDã€‚ç”¨äºåˆ›å»ºæ–‡æ¡£çš„ IDã€‚ Binary Data äºŒè¿›åˆ¶æ•°æ®ã€‚ç”¨äºå­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ã€‚ Code ä»£ç ç±»å‹ã€‚ç”¨äºåœ¨æ–‡æ¡£ä¸­å­˜å‚¨ JavaScript ä»£ç ã€‚ Regular expression æ­£åˆ™è¡¨è¾¾å¼ç±»å‹ã€‚ç”¨äºå­˜å‚¨æ­£åˆ™è¡¨è¾¾å¼ã€‚ ä¸‹é¢è¯´æ˜ä¸‹å‡ ç§é‡è¦çš„æ•°æ®ç±»å‹ã€‚ ObjectId ObjectId ç±»ä¼¼å”¯ä¸€ä¸»é”®ï¼Œå¯ä»¥å¾ˆå¿«çš„å»ç”Ÿæˆå’Œæ’åºï¼ŒåŒ…å« 12 bytesï¼Œå«ä¹‰æ˜¯ï¼š å‰ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºåˆ›å»º unix æ—¶é—´æˆ³,æ ¼æ—å°¼æ²»æ—¶é—´ UTC æ—¶é—´ï¼Œæ¯”åŒ—äº¬æ—¶é—´æ™šäº† 8 ä¸ªå°æ—¶ æ¥ä¸‹æ¥çš„ 3 ä¸ªå­—èŠ‚æ˜¯æœºå™¨æ ‡è¯†ç  ç´§æ¥çš„ä¸¤ä¸ªå­—èŠ‚ç”±è¿›ç¨‹ id ç»„æˆ PID æœ€åä¸‰ä¸ªå­—èŠ‚æ˜¯éšæœºæ•° MongoDB ä¸­å­˜å‚¨çš„æ–‡æ¡£å¿…é¡»æœ‰ä¸€ä¸ª _id é”®ã€‚è¿™ä¸ªé”®çš„å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„ï¼Œé»˜è®¤æ˜¯ä¸ª ObjectId å¯¹è±¡ ç”±äº ObjectId ä¸­ä¿å­˜äº†åˆ›å»ºçš„æ—¶é—´æˆ³ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦ä¸ºä½ çš„æ–‡æ¡£ä¿å­˜æ—¶é—´æˆ³å­—æ®µï¼Œä½ å¯ä»¥é€šè¿‡ getTimestamp å‡½æ•°æ¥è·å–æ–‡æ¡£çš„åˆ›å»ºæ—¶é—´: 123&gt; var newObject = ObjectId()&gt; newObject.getTimestamp()ISODate(&quot;2017-11-25T07:21:10Z&quot;) ObjectId è½¬ä¸ºå­—ç¬¦ä¸² 12&gt; newObject.str5a1919e63df83ce79df8b38f å­—ç¬¦ä¸² BSON å­—ç¬¦ä¸²éƒ½æ˜¯ UTF-8 ç¼–ç ã€‚ æ—¶é—´æˆ³ BSON æœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ—¶é—´æˆ³ç±»å‹ç”¨äº MongoDB å†…éƒ¨ä½¿ç”¨ï¼Œä¸æ™®é€šçš„ æ—¥æœŸ ç±»å‹ä¸ç›¸å…³ã€‚ æ—¶é—´æˆ³å€¼æ˜¯ä¸€ä¸ª 64 ä½çš„å€¼ã€‚å…¶ä¸­ï¼š å‰32ä½æ˜¯ä¸€ä¸ª time_t å€¼ï¼ˆä¸Unixæ–°çºªå…ƒç›¸å·®çš„ç§’æ•°ï¼‰ å32ä½æ˜¯åœ¨æŸç§’ä¸­æ“ä½œçš„ä¸€ä¸ªé€’å¢çš„åºæ•° åœ¨å•ä¸ª mongod å®ä¾‹ä¸­ï¼Œæ—¶é—´æˆ³å€¼é€šå¸¸æ˜¯å”¯ä¸€çš„ã€‚ åœ¨å¤åˆ¶é›†ä¸­ï¼Œ oplog æœ‰ä¸€ä¸ª ts å­—æ®µã€‚è¿™ä¸ªå­—æ®µä¸­çš„å€¼ä½¿ç”¨BSONæ—¶é—´æˆ³è¡¨ç¤ºäº†æ“ä½œæ—¶é—´ã€‚ BSON æ—¶é—´æˆ³ç±»å‹ä¸»è¦ç”¨äº MongoDB å†…éƒ¨ä½¿ç”¨ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹çš„åº”ç”¨å¼€å‘ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ BSON æ—¥æœŸç±»å‹ã€‚ æ—¥æœŸ è¡¨ç¤ºå½“å‰è·ç¦» Unixæ–°çºªå…ƒï¼ˆ1970å¹´1æœˆ1æ—¥ï¼‰çš„æ¯«ç§’æ•°ã€‚æ—¥æœŸç±»å‹æ˜¯æœ‰ç¬¦å·çš„, è´Ÿæ•°è¡¨ç¤º 1970 å¹´ä¹‹å‰çš„æ—¥æœŸã€‚ 12345678910&gt; var mydate1 = new Date() //æ ¼æ—å°¼æ²»æ—¶é—´&gt; mydate1ISODate(&quot;2018-03-04T14:58:51.233Z&quot;)&gt; typeof mydate1object&gt; var mydate2 = ISODate() //æ ¼æ—å°¼æ²»æ—¶é—´&gt; mydate2ISODate(&quot;2018-03-04T15:00:45.479Z&quot;)&gt; typeof mydate2object è¿™æ ·åˆ›å»ºçš„æ—¶é—´æ˜¯æ—¥æœŸç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ JS ä¸­çš„ Date ç±»å‹çš„æ–¹æ³•ã€‚ è¿”å›ä¸€ä¸ªæ—¶é—´ç±»å‹çš„å­—ç¬¦ä¸²ï¼š 12345&gt; var mydate1str = mydate1.toString()&gt; mydate1strSun Mar 04 2018 14:58:51 GMT+0000 (UTC) &gt; typeof mydate1strstring æˆ–è€… 12&gt; Date()Sun Mar 04 2018 15:02:59 GMT+0000 (UTC) ä¸‰ã€å®‰è£…ï¼ˆwinï¼‰ ä¸‹è½½ å®‰è£… åˆ›å»ºé»˜è®¤æ•°æ®æ–‡ä»¶å¤¹ \\data\\db ä¸ \\data\\log \\MongoDB.logæ–‡ä»¶ æ‰‹åŠ¨è¿è¡ŒMongoDBæœåŠ¡å™¨ 12345678#å®‰è£…ç›®å½•\\bin\\mongod --dbpath è‡ªå·±å®šä¹‰çš„æ•°æ®æ–‡ä»¶å¤¹ï¼ˆc:\\data\\dbï¼‰F:\\Softs\\Installed\\MongoDB\\bin\\mongod --dbpath F:\\Softs\\Installed\\MongoDB\\data\\db#æˆåŠŸç»“æœï¼š{&quot;t&quot;:{&quot;$date&quot;:&quot;2022-01-18T14:50:04.760+08:00&quot;},&quot;s&quot;:&quot;I&quot;, &quot;c&quot;:&quot;CONTROL&quot;, &quot;id&quot;:23285, &quot;ctx&quot;:&quot;-&quot;,&quot;msg&quot;:&quot;Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'&quot;}{&quot;t&quot;:{&quot;$date&quot;:&quot;2022-01-18T14:50:04.761+08:00&quot;},&quot;s&quot;:&quot;I&quot;, &quot;c&quot;:&quot;NETWORK&quot;, &quot;id&quot;:4915701, &quot;ctx&quot;:&quot;-&quot;,&quot;msg&quot;:&quot;Initialized wire specification&quot;,&quot;attr&quot;:{&quot;spec&quot;:{&quot;incomingExternalClient&quot;:{&quot;minWireVersion&quot;:0,&quot;maxWireVersion&quot;:13},&quot;incomingInternalClient&quot;:{&quot;minWireVersion&quot;:0,&quot;maxWireVersion&quot;:13},&quot;outgoing&quot;:{&quot;minWireVersion&quot;:0,&quot;maxWireVersion&quot;:13},&quot;isInternalClient&quot;:true}}}ã€‚ã€‚ã€‚ å››ã€è¿æ¥ 12345678910111213141516171819202122232425#ä¸€#å°†å…¶é…ç½®æˆæœåŠ¡åå¯åŠ¨æœåŠ¡mongod --dbpath &quot;F:\\Softs\\Installed\\MongoDB\\data\\db&quot; --logpath &quot;F:\\Softs\\Installed\\MongoDB\\data\\log\\MongoDB.log&quot; --install --serviceName &quot;MongoDB&quot;PS F:\\Softs\\Installed\\MongoDB\\bin&gt; net start mongodbè¯·æ±‚çš„æœåŠ¡å·²ç»å¯åŠ¨ã€‚#äºŒ#é…ç½®binç›®å½•ç¯å¢ƒå˜é‡åï¼Œç”¨mongoè¿æ¥C:\\Users\\Administrator&gt;mongoMongoDB shell version v5.0.6-rc0connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodbImplicit session: session { &quot;id&quot; : UUID(&quot;4f5de15b-0c12-4dde-8cc4-325ae6b23114&quot;) }MongoDB server version: 5.0.6-rc0#å…³é—­#ä¸ä¸ºç³»ç»ŸæœåŠ¡æ—¶å…³é—­mongoå‘½ä»¤çª—å£#ç³»ç»ŸæœåŠ¡NET stop MongoDB (å…³é—­æœåŠ¡)#åˆ é™¤è¿›ç¨‹mongod --dbpath &quot;d:\\mongodb\\data\\db&quot; --logpath &quot;d:\\mongodb\\data\\log\\MongoDB.log&quot; --remove --serviceName &quot;MongoDB&quot; äº”ã€æ•°æ®åº“ 1234567891011121314151617181920212223242526272829303132#åˆ›å»ºæ•°æ®åº“ï¼Œæ²¡æœ‰åˆ›å»ºï¼Œæœ‰åˆ™åˆ‡æ¢ï¼Œ#æ•°æ®å‘½åè§„åˆ™ï¼š#ä¸èƒ½æ˜¯ç©ºå­—ç¬¦ä¸²ï¼ˆ&quot;&quot;)ã€‚#ä¸å¾—å«æœ‰' 'ï¼ˆç©ºæ ¼)ã€.ã€$ã€/ã€\\å’Œ\\0 (ç©ºå­—ç¬¦)ã€‚#åº”å…¨éƒ¨å°å†™ã€‚#æœ€å¤š64å­—èŠ‚ã€‚#æœ‰ä¸€äº›æ•°æ®åº“åæ˜¯ä¿ç•™çš„ï¼Œå¯ä»¥ç›´æ¥è®¿é—®è¿™äº›æœ‰ç‰¹æ®Šä½œç”¨çš„æ•°æ®åº“ã€‚#adminï¼š ä»æƒé™çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯&quot;root&quot;æ•°æ®åº“ã€‚è¦æ˜¯å°†ä¸€ä¸ªç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªæ•°æ®åº“ï¼Œè¿™ä¸ªç”¨æˆ·è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰æ•°æ®åº“çš„æƒé™ã€‚ä¸€äº›ç‰¹å®šçš„æœåŠ¡å™¨ç«¯å‘½ä»¤ä¹Ÿåªèƒ½ä»è¿™ä¸ªæ•°æ®åº“è¿è¡Œï¼Œæ¯”å¦‚åˆ—å‡ºæ‰€æœ‰çš„æ•°æ®åº“æˆ–è€…å…³é—­æœåŠ¡å™¨ã€‚#local: è¿™ä¸ªæ•°æ®æ°¸è¿œä¸ä¼šè¢«å¤åˆ¶ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨é™äºæœ¬åœ°å•å°æœåŠ¡å™¨çš„ä»»æ„é›†åˆ#config: å½“Mongoç”¨äºåˆ†ç‰‡è®¾ç½®æ—¶ï¼Œconfigæ•°æ®åº“åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œç”¨äºä¿å­˜åˆ†ç‰‡çš„ç›¸å…³ä¿¡æ¯ã€‚&gt; use userswitched to db user#æŸ¥çœ‹å½“å‰æ•°æ®åº“å&gt; dbuser#æ’å…¥æ•°æ®&gt; db.user.insert({&quot;name&quot;:&quot;lxl&quot;})WriteResult({ &quot;nInserted&quot; : 1 })#æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨ï¼Œæœ‰æ•°æ®çš„æ•°æ®åº“æ‰ä¼šæ˜¾ç¤º&gt; show dbsadmin 0.000GBconfig 0.000GBlocal 0.000GBuser 0.000GB#åˆ é™¤æ•°æ®åº“&gt; use userswitched to db user&gt; db.dropDatabase(){ &quot;ok&quot; : 1 } å…­ã€é›†åˆ 1234567891011121314151617181920#æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“&gt; show dbsadmin 0.000GBconfig 0.000GBlocal 0.000GB&gt; use studentswitched to db student#åˆ›å»ºé›†åˆæ•°æ®&gt; db.createCollection(&quot;students&quot;){ &quot;ok&quot; : 1 }#æŸ¥çœ‹é›†åˆshow collections æˆ– show tables&gt; show tablesstudents&gt; db.student.drop()false#åˆ é™¤é›†åˆæ•°æ®&gt; db.students.drop()true&gt; show tables&gt; options å‚æ•°ï¼š å­—æ®µ ç±»å‹ æè¿° capped å¸ƒå°” ï¼ˆå¯é€‰ï¼‰å¦‚æœä¸º trueï¼Œåˆ™åˆ›å»ºå›ºå®šé›†åˆã€‚å›ºå®šé›†åˆæ˜¯æŒ‡æœ‰ç€å›ºå®šå¤§å°çš„é›†åˆï¼Œå½“è¾¾åˆ°æœ€å¤§å€¼æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è¦†ç›–æœ€æ—©çš„æ–‡æ¡£ã€‚ å½“è¯¥å€¼ä¸º true æ—¶ï¼Œå¿…é¡»æŒ‡å®š size å‚æ•°ã€‚ autoIndexId å¸ƒå°” 3.2 ä¹‹åä¸å†æ”¯æŒè¯¥å‚æ•°ã€‚ï¼ˆå¯é€‰ï¼‰å¦‚ä¸º trueï¼Œè‡ªåŠ¨åœ¨ _id å­—æ®µåˆ›å»ºç´¢å¼•ã€‚é»˜è®¤ä¸º falseã€‚ size æ•°å€¼ ï¼ˆå¯é€‰ï¼‰ä¸ºå›ºå®šé›†åˆæŒ‡å®šä¸€ä¸ªæœ€å¤§å€¼ï¼Œå³å­—èŠ‚æ•°ã€‚ å¦‚æœ capped ä¸º trueï¼Œä¹Ÿéœ€è¦æŒ‡å®šè¯¥å­—æ®µã€‚ max æ•°å€¼ ï¼ˆå¯é€‰ï¼‰æŒ‡å®šå›ºå®šé›†åˆä¸­åŒ…å«æ–‡æ¡£çš„æœ€å¤§æ•°é‡ã€‚ ä¸ƒã€æ–‡æ¡£ å¢ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&gt; show tables&gt; dbstudent&gt; show collections&gt; dbstudent#æ’å…¥æ–‡æ¡£ insertï¼ˆï¼‰&gt; db.student.insert({name:&quot;lxl&quot;})WriteResult({ &quot;nInserted&quot; : 1 })#æŸ¥çœ‹æ–‡æ¡£ find()&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lxl&quot; }# å°†æ–‡æ¡£å£°æ˜æˆå˜é‡å†æ’å…¥&gt; document=({age:18}){ &quot;age&quot; : 18 }&gt; db.student.insert(document)WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lxl&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 18 }&gt; document=({&quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;),age:19}){ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }# æ’å…¥æ–‡æ¡£ saveï¼ˆï¼‰ï¼Œæœ‰_idæ—¶é‡å¤åˆ™ä¿®æ”¹&gt; db.student.save(document)WriteResult({ &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lxl&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }&gt; document=({&quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;),age:20}){ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 20 }#æ’å…¥æ–‡æ¡£ insetOneï¼ˆï¼‰idé‡å¤æŠ¥é”™ db.collection.insertMany()ä¸€æ¬¡æ’å…¥å¤šä¸ªæ–‡æ¡£&gt; db.student.insertOne(document)WriteError({ &quot;index&quot; : 0, &quot;code&quot; : 11000, &quot;errmsg&quot; : &quot;E11000 duplicate key error collection: student.student index: _id_ dup key: { _id: ObjectId('61e7ae456e48f4bf534731d7') }&quot;, &quot;op&quot; : { &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 20 }}) :WriteError({ &quot;index&quot; : 0, &quot;code&quot; : 11000, &quot;errmsg&quot; : &quot;E11000 duplicate key error collection: student.student index: _id_ dup key: { _id: ObjectId('61e7ae456e48f4bf534731d7') }&quot;, &quot;op&quot; : { &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 20 }})WriteError@src/mongo/shell/bulk_api.js:465:48mergeBatchResults@src/mongo/shell/bulk_api.js:871:49executeBatch@src/mongo/shell/bulk_api.js:940:13Bulk/this.execute@src/mongo/shell/bulk_api.js:1182:21DBCollection.prototype.insertOne@src/mongo/shell/crud_api.js:264:9@(shell):1:1#æ’å…¥æ–‡æ¡£replaceOneï¼ˆï¼‰&gt; db.student.replaceOne(document)uncaught exception: TypeError: can't convert undefined to object :DBCollection.prototype.replaceOne@src/mongo/shell/crud_api.js:477:16@(shell):1:1&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lxl&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }&gt; æ”¹ æ¨¡æ¿ 123456789db.collection.update( &lt;query&gt;, &lt;update&gt;, { upsert: &lt;boolean&gt;, multi: &lt;boolean&gt;, writeConcern: &lt;document&gt; }) å‚æ•°è¯´æ˜ï¼š query : updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåé¢çš„ã€‚ update : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$inc...ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥è¯¢å†…setåé¢çš„ upsert : å¯é€‰ï¼Œå¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚ multi : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚ writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lxl&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }#æ›´æ–°ç¬¬ä¸€æ¡æ–‡æ¡£&gt; db.student.update({&quot;name&quot;:&quot;lxl&quot;},{$set:{&quot;name&quot;:&quot;lll&quot;}})WriteResult({ &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lll&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }&gt; document=({age:21}){ &quot;age&quot; : 21 }&gt; db.student.insert(document)WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lll&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }{ &quot;_id&quot; : ObjectId(&quot;61e7b1736e48f4bf534731d8&quot;), &quot;age&quot; : 21 }&gt; document=({age:21}){ &quot;age&quot; : 21 }&gt; db.student.insert(document)WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lll&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }{ &quot;_id&quot; : ObjectId(&quot;61e7b1736e48f4bf534731d8&quot;), &quot;age&quot; : 21 }{ &quot;_id&quot; : ObjectId(&quot;61e7b19a6e48f4bf534731d9&quot;), &quot;age&quot; : 21 }#æ›´æ–°ç±»å‹å¿…é¡»ç›¸åŒ&gt; db.student.update({&quot;age&quot;:&quot;21&quot;},{$set:{&quot;age&quot;:&quot;22&quot;}})WriteResult({ &quot;nMatched&quot; : 0, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 0 })#å¤šæ¡æ–‡æ¡£ç›¸åŒåªæ›´æ–°ç¬¬ä¸€æ¡&gt; db.student.update({&quot;age&quot;:21},{$set:{&quot;age&quot;:22}})WriteResult({ &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lll&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }{ &quot;_id&quot; : ObjectId(&quot;61e7b1736e48f4bf534731d8&quot;), &quot;age&quot; : 22 }{ &quot;_id&quot; : ObjectId(&quot;61e7b19a6e48f4bf534731d9&quot;), &quot;age&quot; : 21 }&gt; db.student.update({&quot;age&quot;:22},{$set:{&quot;age&quot;:21}})WriteResult({ &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lll&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }{ &quot;_id&quot; : ObjectId(&quot;61e7b1736e48f4bf534731d8&quot;), &quot;age&quot; : 21 }{ &quot;_id&quot; : ObjectId(&quot;61e7b19a6e48f4bf534731d9&quot;), &quot;age&quot; : 21 }#,{multi:true}å°†å…¨éƒ¨ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£éƒ½æ›´æ–°&gt; db.student.update({&quot;age&quot;:21},{$set:{&quot;age&quot;:22}},{multi:true})WriteResult({ &quot;nMatched&quot; : 2, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 2 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lll&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }{ &quot;_id&quot; : ObjectId(&quot;61e7b1736e48f4bf534731d8&quot;), &quot;age&quot; : 22 }{ &quot;_id&quot; : ObjectId(&quot;61e7b19a6e48f4bf534731d9&quot;), &quot;age&quot; : 22 }&gt; åˆ  1234567db.collection.remove( &lt;query&gt;, { justOne: &lt;boolean&gt;, writeConcern: &lt;document&gt; }) å‚æ•°è¯´æ˜ï¼š query :ï¼ˆå¯é€‰ï¼‰åˆ é™¤çš„æ–‡æ¡£çš„æ¡ä»¶ã€‚ justOne : ï¼ˆå¯é€‰ï¼‰å¦‚æœè®¾ä¸º true æˆ– 1ï¼Œåˆ™åªåˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼Œå¦‚æœä¸è®¾ç½®è¯¥å‚æ•°ï¼Œæˆ–ä½¿ç”¨é»˜è®¤å€¼ falseï¼Œåˆ™åˆ é™¤æ‰€æœ‰åŒ¹é…æ¡ä»¶çš„æ–‡æ¡£ã€‚ writeConcern :ï¼ˆå¯é€‰ï¼‰æŠ›å‡ºå¼‚å¸¸çš„çº§åˆ« 12345678910111213141516171819202122232425262728293031323334353637&gt; db.student.find({&quot;age&quot;:22}){ &quot;_id&quot; : ObjectId(&quot;61e7b1736e48f4bf534731d8&quot;), &quot;age&quot; : 22 }{ &quot;_id&quot; : ObjectId(&quot;61e7b19a6e48f4bf534731d9&quot;), &quot;age&quot; : 22 }#åˆ é™¤æ‰€æœ‰å¤åˆæ¡ä»¶çš„æ–‡æ¡£&gt; db.student.remove({&quot;age&quot;:22})WriteResult({ &quot;nRemoved&quot; : 2 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lll&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }&gt; db.student.insert(document)WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.student.insert(document)WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lll&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }{ &quot;_id&quot; : ObjectId(&quot;61e7b3d76e48f4bf534731da&quot;), &quot;age&quot; : 21 }{ &quot;_id&quot; : ObjectId(&quot;61e7b3d96e48f4bf534731db&quot;), &quot;age&quot; : 21 }#è®¾ç½®justOneä¸ºtrueæˆ–1ï¼Œåˆ é™¤ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€æ¡æ–‡æ¡£&gt; db.student.remove({&quot;age&quot;:22},1)WriteResult({ &quot;nRemoved&quot; : 0 })&gt; db.student.remove({&quot;age&quot;:21},1)WriteResult({ &quot;nRemoved&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7add36e48f4bf534731d6&quot;), &quot;name&quot; : &quot;lll&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7ae456e48f4bf534731d7&quot;), &quot;age&quot; : 19 }{ &quot;_id&quot; : ObjectId(&quot;61e7b3d96e48f4bf534731db&quot;), &quot;age&quot; : 21 }#åˆ é™¤æ‰€æœ‰æ–‡æ¡£&gt; db.student.remove()uncaught exception: Error: remove needs a query :DBCollection.prototype._parseRemove@src/mongo/shell/collection.js:364:15DBCollection.prototype.remove@src/mongo/shell/collection.js:394:18@(shell):1:1&gt; db.student.remove({})WriteResult({ &quot;nRemoved&quot; : 3 })&gt; db.student.find()&gt; æŸ¥ 1db.collection.find(query, projection) query ï¼šå¯é€‰ï¼Œä½¿ç”¨æŸ¥è¯¢æ“ä½œç¬¦æŒ‡å®šæŸ¥è¯¢æ¡ä»¶ projection ï¼šå¯é€‰ï¼Œä½¿ç”¨æŠ•å½±æ“ä½œç¬¦æŒ‡å®šè¿”å›çš„é”®ã€‚æŸ¥è¯¢æ—¶è¿”å›æ–‡æ¡£ä¸­æ‰€æœ‰é”®å€¼ï¼Œ åªéœ€çœç•¥è¯¥å‚æ•°å³å¯ï¼ˆé»˜è®¤çœç•¥ï¼‰ã€‚ å¦‚æœä½ éœ€è¦ä»¥æ˜“è¯»çš„æ–¹å¼æ¥è¯»å–æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ pretty() æ–¹æ³•ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š 1&gt;db.col.find().pretty() pretty() æ–¹æ³•ä»¥æ ¼å¼åŒ–çš„æ–¹å¼æ¥æ˜¾ç¤ºæ‰€æœ‰æ–‡æ¡£ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273&gt; db.student.remove({})WriteResult({ &quot;nRemoved&quot; : 2 })&gt; db.student.insert({&quot;age&quot;:22,name:&quot;a1&quot;})WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.student.insert({&quot;age&quot;:11,name:&quot;a2&quot;}) WriteResult({ &quot;nInserted&quot; : 1 })#æŸ¥è¯¢ç¬¬ä¸€ä¸ª&gt; db.student.findOne(){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }&gt; db.student.find().pretty(){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }#æŸ¥è¯¢å…¨éƒ¨&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }#æ¡ä»¶æŸ¥è¯¢ å°äº$lt&gt; db.student.find({age:{$lt:20}}){ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }#æŸ¥è¯¢å°äº$ltçš„æŒ‡å®šå­—æ®µ&gt; db.student.find({age:{$lt:20}}ï¼Œ{&quot;_id&quot;:1}){ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;)}#æŸ¥è¯¢å°äº$ltçš„æŒ‡å®šå¤–å­—æ®µ&gt; db.student.find({age:{$lt:20}}ï¼Œ{&quot;_id&quot;:0}){ &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }#æ¡ä»¶æŸ¥è¯¢ å°äºæˆ–ç­‰äº$lt&gt; db.student.find({age:{$lte:22}}){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }#æ¡ä»¶æŸ¥è¯¢ å¤§äº$lt&gt; db.student.find({age:{$gt:20}}){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }#æ¡ä»¶æŸ¥è¯¢ å¤§äºæˆ–ç­‰äº$lt&gt; db.student.find({age:{$gte:11}}){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }#æ¡ä»¶æŸ¥è¯¢ ä¸ç­‰äº$lt&gt; db.student.find({age:{$ne:11}}){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }&gt; db.student.insert({&quot;age&quot;:11,name:&quot;a3&quot;})WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }#æ¡ä»¶æŸ¥è¯¢ and $ne&gt; db.student.find({age:{$ne:22},name:&quot;a2&quot;}){ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }&gt; db.student.insert({&quot;age&quot;:33,name:&quot;a3&quot;})WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }#æ¡ä»¶æŸ¥è¯¢ or $or ç¼ºå°‘å†’å·&gt; db.student.find({$or[age:{$ne:11},name:&quot;a2&quot;]})uncaught exception: SyntaxError: missing : after property id :@(shell):1:20#æ¡ä»¶æŸ¥è¯¢ or $or ç¼ºå°‘æ‹¬å·&gt; db.student.find({$or:[age:{$ne:11},name:&quot;a2&quot;]})uncaught exception: SyntaxError: missing ] after element list :@(shell):1:25#æ¡ä»¶æŸ¥è¯¢ or $or&gt; db.student.find({$or:[{age:{$ne:11}},{name:&quot;a2&quot;}]}){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }#æ¡ä»¶æŸ¥è¯¢ or + and&gt; db.student.find({name:&quot;a3&quot;,$or:[{age:{$ne:11}},{name:&quot;a2&quot;}]}){ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }&gt; $type æ“ä½œç¬¦ ç±»å‹ æ•°å­— å¤‡æ³¨ Double 1 String 2 Object 3 Array 4 Binary data 5 Undefined 6 å·²åºŸå¼ƒã€‚ Object id 7 Boolean 8 Date 9 Null 10 Regular Expression 11 JavaScript 13 Symbol 14 JavaScript (with scope) 15 32-bit integer 16 Timestamp 17 64-bit integer 18 Min key 255 Query with -1. Max key 127 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&gt; db.student.insert({&quot;age&quot;:33,name:1})WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }&gt; db.student.find({&quot;name&quot;:{$type:'32-bit integer'}})Error: error: { &quot;ok&quot; : 0, &quot;errmsg&quot; : &quot;Unknown type name alias: 32-bit integer&quot;, &quot;code&quot; : 2, &quot;codeName&quot; : &quot;BadValue&quot;}&gt; db.student.find({&quot;name&quot;:{$type:'integer'}})Error: error: { &quot;ok&quot; : 0, &quot;errmsg&quot; : &quot;Unknown type name alias: integer&quot;, &quot;code&quot; : 2, &quot;codeName&quot; : &quot;BadValue&quot;}&gt; db.student.find({&quot;name&quot;:{$type:16}})&gt; db.student.find({&quot;name&quot;:{$type:2}}){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }&gt; db.student.find({&quot;name&quot;:{$type:18}})#ç±»å‹æ•°å­—é»˜è®¤ä¸ºdouble å³1 ç±»å‹&gt; db.student.find({&quot;name&quot;:{$type:1}}){ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }&gt; db.student.find({&quot;name&quot;:{$type:'Double'}})Error: error: { &quot;ok&quot; : 0, &quot;errmsg&quot; : &quot;Unknown type name alias: Double&quot;, &quot;code&quot; : 2, &quot;codeName&quot; : &quot;BadValue&quot;}&gt; db.student.find({&quot;name&quot;:{$type:Double}})uncaught exception: ReferenceError: Double is not defined :@(shell):1:26&gt; db.student.find({&quot;name&quot;:{$type:double}})uncaught exception: ReferenceError: double is not defined :@(shell):1:26#ç±»å‹å°å†™å¼•å·&gt; db.student.find({&quot;name&quot;:{$type:'double'}}){ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }&gt; Limit() æ–¹æ³• 12345678910111213141516&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }&gt; db.student.find().limit(2){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }&gt; db.student.find({name:{$type:1}}).limit(2){ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }#æ¡ä»¶ç­›é€‰åé™åˆ¶æŸ¥è¯¢æ•°é‡&gt; db.student.find({name:{$type:2}}).limit(2){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }&gt; Skip() æ–¹æ³• 12345678910111213141516171819&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }&gt; db.student.find().limit(2){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }&gt; db.student.find({name:{$type:1}}).limit(2){ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }&gt; db.student.find({name:{$type:2}}).limit(2){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }#è·³è¿‡å¯¹åº”æ•°é‡çš„é™åˆ¶æŸ¥è¯¢çš„æ•°æ®&gt; db.student.find({name:{$type:2}}).limit(2).skip(1){ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }&gt; sort() æ–¹æ³• 12345678910111213&gt; db.student.find().sort({age:1}){ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }&gt; db.student.find().sort({age:-1}){ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }{ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }&gt; å…«ã€ç´¢å¼• createIndex() æ–¹æ³•` 1234567891011121314151617181920212223242526272829303132333435&gt; db.student.find().sort({age:1}){ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }&gt; db.student.find().sort({age:-1}){ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }{ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }&gt; db.student.createIndex({&quot;age&quot;:1}){ &quot;numIndexesBefore&quot; : 1, &quot;numIndexesAfter&quot; : 2, &quot;createdCollectionAutomatically&quot; : false, &quot;ok&quot; : 1}&gt; db.student.createIndex({&quot;age&quot;:-1}){ &quot;numIndexesBefore&quot; : 2, &quot;numIndexesAfter&quot; : 3, &quot;createdCollectionAutomatically&quot; : false, &quot;ok&quot; : 1}#åˆ›å»ºç´¢å¼• 1ä¸ºæ­£åºï¼Œå¯ä½¿ç”¨å¤šä¸ªå­—æ®µåˆ›å»ºç´¢å¼•&gt; db.student.createIndex({&quot;age&quot;:-1,&quot;name&quot;:1}){ &quot;numIndexesBefore&quot; : 3, &quot;numIndexesAfter&quot; : 4, &quot;createdCollectionAutomatically&quot; : false, &quot;ok&quot; : 1}&gt; Parameter Type Description background Boolean å»ºç´¢å¼•è¿‡ç¨‹ä¼šé˜»å¡å…¶å®ƒæ•°æ®åº“æ“ä½œï¼Œbackgroundå¯æŒ‡å®šä»¥åå°æ–¹å¼åˆ›å»ºç´¢å¼•ï¼Œå³å¢åŠ  &quot;background&quot; å¯é€‰å‚æ•°ã€‚ &quot;background&quot; é»˜è®¤å€¼ä¸ºfalseã€‚ unique Boolean å»ºç«‹çš„ç´¢å¼•æ˜¯å¦å”¯ä¸€ã€‚æŒ‡å®šä¸ºtrueåˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚é»˜è®¤å€¼ä¸ºfalse. name string ç´¢å¼•çš„åç§°ã€‚å¦‚æœæœªæŒ‡å®šï¼ŒMongoDBçš„é€šè¿‡è¿æ¥ç´¢å¼•çš„å­—æ®µåå’Œæ’åºé¡ºåºç”Ÿæˆä¸€ä¸ªç´¢å¼•åç§°ã€‚ dropDups Boolean **3.0+ç‰ˆæœ¬å·²åºŸå¼ƒã€‚**åœ¨å»ºç«‹å”¯ä¸€ç´¢å¼•æ—¶æ˜¯å¦åˆ é™¤é‡å¤è®°å½•,æŒ‡å®š true åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚é»˜è®¤å€¼ä¸º false. sparse Boolean å¯¹æ–‡æ¡£ä¸­ä¸å­˜åœ¨çš„å­—æ®µæ•°æ®ä¸å¯ç”¨ç´¢å¼•ï¼›è¿™ä¸ªå‚æ•°éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœè®¾ç½®ä¸ºtrueçš„è¯ï¼Œåœ¨ç´¢å¼•å­—æ®µä¸­ä¸ä¼šæŸ¥è¯¢å‡ºä¸åŒ…å«å¯¹åº”å­—æ®µçš„æ–‡æ¡£.ã€‚é»˜è®¤å€¼ä¸º false. expireAfterSeconds integer æŒ‡å®šä¸€ä¸ªä»¥ç§’ä¸ºå•ä½çš„æ•°å€¼ï¼Œå®Œæˆ TTLè®¾å®šï¼Œè®¾å®šé›†åˆçš„ç”Ÿå­˜æ—¶é—´ã€‚ v index version ç´¢å¼•çš„ç‰ˆæœ¬å·ã€‚é»˜è®¤çš„ç´¢å¼•ç‰ˆæœ¬å–å†³äºmongodåˆ›å»ºç´¢å¼•æ—¶è¿è¡Œçš„ç‰ˆæœ¬ã€‚ weights document ç´¢å¼•æƒé‡å€¼ï¼Œæ•°å€¼åœ¨ 1 åˆ° 99,999 ä¹‹é—´ï¼Œè¡¨ç¤ºè¯¥ç´¢å¼•ç›¸å¯¹äºå…¶ä»–ç´¢å¼•å­—æ®µçš„å¾—åˆ†æƒé‡ã€‚ default_language string å¯¹äºæ–‡æœ¬ç´¢å¼•ï¼Œè¯¥å‚æ•°å†³å®šäº†åœç”¨è¯åŠè¯å¹²å’Œè¯å™¨çš„è§„åˆ™çš„åˆ—è¡¨ã€‚ é»˜è®¤ä¸ºè‹±è¯­ language_override string å¯¹äºæ–‡æœ¬ç´¢å¼•ï¼Œè¯¥å‚æ•°æŒ‡å®šäº†åŒ…å«åœ¨æ–‡æ¡£ä¸­çš„å­—æ®µåï¼Œè¯­è¨€è¦†ç›–é»˜è®¤çš„languageï¼Œé»˜è®¤å€¼ä¸º language. ä¹ã€èšåˆ aggregate() æ–¹æ³• å¤„ç†æ•°æ®(è¯¸å¦‚ç»Ÿè®¡å¹³å‡å€¼ï¼Œæ±‚å’Œç­‰) 12345678910111213&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }#é€šè¿‡nameåˆ¤æ–­ç›¸åŒnameæœ‰å¤šå°‘æ•°æ®&gt; db.student.aggregate([{$group:{_id:&quot;$name&quot;,num_tutorial:{$sum:1}}}]){ &quot;_id&quot; : &quot;a2&quot;, &quot;num_tutorial&quot; : 1 }{ &quot;_id&quot; : &quot;a3&quot;, &quot;num_tutorial&quot; : 2 }{ &quot;_id&quot; : &quot;a1&quot;, &quot;num_tutorial&quot; : 1 }{ &quot;_id&quot; : 1, &quot;num_tutorial&quot; : 1 }&gt; èšåˆçš„è¡¨è¾¾å¼: è¡¨è¾¾å¼ æè¿° å®ä¾‹ $sum è®¡ç®—æ€»å’Œã€‚ db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$sum : &quot;$likes&quot;}}}]) $avg è®¡ç®—å¹³å‡å€¼ db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$avg : &quot;$likes&quot;}}}]) $min è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å°å€¼ã€‚ db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$min : &quot;$likes&quot;}}}]) $max è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å¤§å€¼ã€‚ db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$max : &quot;$likes&quot;}}}]) $push å°†å€¼åŠ å…¥ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä¸ä¼šåˆ¤æ–­æ˜¯å¦æœ‰é‡å¤çš„å€¼ã€‚ db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, url : {$push: &quot;$url&quot;}}}]) $addToSet å°†å€¼åŠ å…¥ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä¼šåˆ¤æ–­æ˜¯å¦æœ‰é‡å¤çš„å€¼ï¼Œè‹¥ç›¸åŒçš„å€¼åœ¨æ•°ç»„ä¸­å·²ç»å­˜åœ¨äº†ï¼Œåˆ™ä¸åŠ å…¥ã€‚ db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, url : {$addToSet : &quot;$url&quot;}}}]) $first æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®ã€‚ db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, first_url : {$first : &quot;$url&quot;}}}]) $last æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–æœ€åä¸€ä¸ªæ–‡æ¡£æ•°æ® db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, last_url : {$last : &quot;$url&quot;}}}]) ç®¡é“ ç®¡é“åœ¨Unixå’ŒLinuxä¸­ä¸€èˆ¬ç”¨äºå°†å½“å‰å‘½ä»¤çš„è¾“å‡ºç»“æœä½œä¸ºä¸‹ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°ã€‚ MongoDBçš„èšåˆç®¡é“å°†MongoDBæ–‡æ¡£åœ¨ä¸€ä¸ªç®¡é“å¤„ç†å®Œæ¯•åå°†ç»“æœä¼ é€’ç»™ä¸‹ä¸€ä¸ªç®¡é“å¤„ç†ã€‚ç®¡é“æ“ä½œæ˜¯å¯ä»¥é‡å¤çš„ã€‚ è¡¨è¾¾å¼ï¼šå¤„ç†è¾“å…¥æ–‡æ¡£å¹¶è¾“å‡ºã€‚è¡¨è¾¾å¼æ˜¯æ— çŠ¶æ€çš„ï¼Œåªèƒ½ç”¨äºè®¡ç®—å½“å‰èšåˆç®¡é“çš„æ–‡æ¡£ï¼Œä¸èƒ½å¤„ç†å…¶å®ƒçš„æ–‡æ¡£ã€‚ è¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹èšåˆæ¡†æ¶ä¸­å¸¸ç”¨çš„å‡ ä¸ªæ“ä½œï¼š $projectï¼šä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ã€‚å¯ä»¥ç”¨æ¥é‡å‘½åã€å¢åŠ æˆ–åˆ é™¤åŸŸï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºè®¡ç®—ç»“æœä»¥åŠåµŒå¥—æ–‡æ¡£ã€‚ $matchï¼šç”¨äºè¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚$matchä½¿ç”¨MongoDBçš„æ ‡å‡†æŸ¥è¯¢æ“ä½œã€‚ $limitï¼šç”¨æ¥é™åˆ¶MongoDBèšåˆç®¡é“è¿”å›çš„æ–‡æ¡£æ•°ã€‚ $skipï¼šåœ¨èšåˆç®¡é“ä¸­è·³è¿‡æŒ‡å®šæ•°é‡çš„æ–‡æ¡£ï¼Œå¹¶è¿”å›ä½™ä¸‹çš„æ–‡æ¡£ã€‚ $unwindï¼šå°†æ–‡æ¡£ä¸­çš„æŸä¸€ä¸ªæ•°ç»„ç±»å‹å­—æ®µæ‹†åˆ†æˆå¤šæ¡ï¼Œæ¯æ¡åŒ…å«æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼ã€‚ $groupï¼šå°†é›†åˆä¸­çš„æ–‡æ¡£åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœã€‚ $sortï¼šå°†è¾“å…¥æ–‡æ¡£æ’åºåè¾“å‡ºã€‚ $geoNearï¼šè¾“å‡ºæ¥è¿‘æŸä¸€åœ°ç†ä½ç½®çš„æœ‰åºæ–‡æ¡£ã€‚ 12345678910111213141516171819202122232425262728&gt; db.student.find(){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;age&quot; : 22, &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;age&quot; : 11, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }#åªæ˜¾ç¤ºé»˜è®¤çš„idä¸name&gt; db.student.aggregate({$project:{name:1}}){ &quot;_id&quot; : ObjectId(&quot;61e7b65b6e48f4bf534731dd&quot;), &quot;name&quot; : &quot;a1&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6646e48f4bf534731de&quot;), &quot;name&quot; : &quot;a2&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b6f66e48f4bf534731df&quot;), &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;name&quot; : 1 }#å»æ‰é»˜è®¤idï¼Œåªæ˜¾ç¤ºname&gt; db.student.aggregate({$project:{_id:0,name:1}}){ &quot;name&quot; : &quot;a1&quot; }{ &quot;name&quot; : &quot;a2&quot; }{ &quot;name&quot; : &quot;a3&quot; }{ &quot;name&quot; : &quot;a3&quot; }{ &quot;name&quot; : 1 }#æ˜¾ç¤ºå‰ä¸‰æ¡ä¹‹åçš„æ•°æ®&gt; db.student.aggregate({$skip:3}){ &quot;_id&quot; : ObjectId(&quot;61e7b78a6e48f4bf534731e0&quot;), &quot;age&quot; : 33, &quot;name&quot; : &quot;a3&quot; }{ &quot;_id&quot; : ObjectId(&quot;61e8eedf6e48f4bf534731e1&quot;), &quot;age&quot; : 33, &quot;name&quot; : 1 }#æ˜¾ç¤ºå¤§äº10 å°äºç­‰äº25çš„ä¸€æ¡æ•°æ®&gt; db.student.aggregate( [{ $match : { age : { $gt:10,$lte:25}}},{ $group:{ _id: null, count: { $sum: 1 } } } ] );{ &quot;_id&quot; : null, &quot;count&quot; : 3 }&gt; åã€å¤åˆ¶ æ•°æ®å†—ä½™å¤‡ä»½ï¼Œç¡¬ä»¶æ•…éšœï¼ŒæœåŠ¡ä¸­æ–­æ•°æ®æ¢å¤ã€‚æ— éœ€åœæœºç»´æŠ¤ï¼Œåˆ†å¸ƒå¼è¯»å–æ•°æ®ã€‚ mongodbçš„å¤åˆ¶è‡³å°‘éœ€è¦ä¸¤ä¸ªèŠ‚ç‚¹ã€‚å…¶ä¸­ä¸€ä¸ªæ˜¯ä¸»èŠ‚ç‚¹ï¼Œè´Ÿè´£å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå…¶ä½™çš„éƒ½æ˜¯ä»èŠ‚ç‚¹ï¼Œè´Ÿè´£å¤åˆ¶ä¸»èŠ‚ç‚¹ä¸Šçš„æ•°æ®ã€‚ mongodbå„ä¸ªèŠ‚ç‚¹å¸¸è§çš„æ­é…æ–¹å¼ä¸ºï¼šä¸€ä¸»ä¸€ä»ã€ä¸€ä¸»å¤šä»ã€‚ ä¸»èŠ‚ç‚¹è®°å½•åœ¨å…¶ä¸Šçš„æ‰€æœ‰æ“ä½œoplogï¼Œä»èŠ‚ç‚¹å®šæœŸè½®è¯¢ä¸»èŠ‚ç‚¹è·å–è¿™äº›æ“ä½œï¼Œç„¶åå¯¹è‡ªå·±çš„æ•°æ®å‰¯æœ¬æ‰§è¡Œè¿™äº›æ“ä½œï¼Œä»è€Œä¿è¯ä»èŠ‚ç‚¹çš„æ•°æ®ä¸ä¸»èŠ‚ç‚¹ä¸€è‡´ã€‚ MongoDBå¤åˆ¶ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š ä»¥ä¸Šç»“æ„å›¾ä¸­ï¼Œå®¢æˆ·ç«¯ä»ä¸»èŠ‚ç‚¹è¯»å–æ•°æ®ï¼Œåœ¨å®¢æˆ·ç«¯å†™å…¥æ•°æ®åˆ°ä¸»èŠ‚ç‚¹æ—¶ï¼Œ ä¸»èŠ‚ç‚¹ä¸ä»èŠ‚ç‚¹è¿›è¡Œæ•°æ®äº¤äº’ä¿éšœæ•°æ®çš„ä¸€è‡´æ€§ã€‚ å‰¯æœ¬é›†ç‰¹å¾ï¼š N ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ ä»»ä½•èŠ‚ç‚¹å¯ä½œä¸ºä¸»èŠ‚ç‚¹ æ‰€æœ‰å†™å…¥æ“ä½œéƒ½åœ¨ä¸»èŠ‚ç‚¹ä¸Š è‡ªåŠ¨æ•…éšœè½¬ç§» è‡ªåŠ¨æ¢å¤ MongoDBå‰¯æœ¬é›†è®¾ç½® åœ¨æœ¬æ•™ç¨‹ä¸­æˆ‘ä»¬ä½¿ç”¨åŒä¸€ä¸ªMongoDBæ¥åšMongoDBä¸»ä»çš„å®éªŒï¼Œ æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š 1ã€å…³é—­æ­£åœ¨è¿è¡Œçš„MongoDBæœåŠ¡å™¨ã€‚ ç°åœ¨æˆ‘ä»¬é€šè¿‡æŒ‡å®š --replSet é€‰é¡¹æ¥å¯åŠ¨mongoDBã€‚--replSet åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š 1mongod --port &quot;PORT&quot; --dbpath &quot;YOUR_DB_DATA_PATH&quot; --replSet &quot;REPLICA_SET_INSTANCE_NAME&quot; ç¤ºä¾‹ 1mongod --port 27017 --dbpath &quot;F:\\Softs\\Installed\\MongoDB\\data&quot; --replSet rs0 ç¤ºä¾‹å¯åŠ¨ä¸€ä¸ªåä¸ºrs0çš„MongoDBå®ä¾‹ï¼Œå…¶ç«¯å£å·ä¸º27017ã€‚å¯åŠ¨åæ‰“å¼€å‘½ä»¤æç¤ºæ¡†å¹¶è¿æ¥ä¸ŠmongoDBæœåŠ¡ã€‚åœ¨Mongoå®¢æˆ·ç«¯ä½¿ç”¨å‘½ä»¤rs.initiate()æ¥å¯åŠ¨ä¸€ä¸ªæ–°çš„å‰¯æœ¬é›†ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨rs.conf()æ¥æŸ¥çœ‹å‰¯æœ¬é›†çš„é…ç½®æŸ¥çœ‹å‰¯æœ¬é›†çŠ¶æ€ä½¿ç”¨ rs.status() å‘½ä»¤ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155#å…³é—­æœåŠ¡C:\\Users\\Administrator&gt;net stop mongodb#åˆ›å»ºrs0å®ä¾‹C:\\Users\\Administrator&gt;mongod --port 27017 --dbpath &quot;F:\\Softs\\Installed\\MongoDB\\data&quot; --replSet rs0#å¯åŠ¨C:\\Users\\Administrator&gt;mongoMongoDB shell version v5.0.6-rc0connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodbImplicit session: session { &quot;id&quot; : UUID(&quot;a7bc72f5-0db4-4de3-b3c1-4f457b526e8b&quot;) }MongoDB server version: 5.0.6-rc0================Warning: the &quot;mongo&quot; shell has been superseded by &quot;mongosh&quot;,which delivers improved usability and compatibility.The &quot;mongo&quot; shell has been deprecated and will be removed inan upcoming release.For installation instructions, seehttps://docs.mongodb.com/mongodb-shell/install/================#å¯åŠ¨æ–°çš„å‰¯æœ¬é›†&gt; rs.initiate(){ &quot;info2&quot; : &quot;no configuration specified. Using a default configuration for the set&quot;, &quot;me&quot; : &quot;localhost:27017&quot;, &quot;ok&quot; : 1}æŸ¥çœ‹å‰¯æœ¬é…ç½®rs0:SECONDARY&gt; rs.conf(){ &quot;_id&quot; : &quot;rs0&quot;, &quot;version&quot; : 1, &quot;term&quot; : 1, &quot;members&quot; : [ { &quot;_id&quot; : 0, &quot;host&quot; : &quot;localhost:27017&quot;, &quot;arbiterOnly&quot; : false, &quot;buildIndexes&quot; : true, &quot;hidden&quot; : false, &quot;priority&quot; : 1, &quot;tags&quot; : { }, &quot;secondaryDelaySecs&quot; : NumberLong(0), &quot;votes&quot; : 1 } ], &quot;protocolVersion&quot; : NumberLong(1), &quot;writeConcernMajorityJournalDefault&quot; : true, &quot;settings&quot; : { &quot;chainingAllowed&quot; : true, &quot;heartbeatIntervalMillis&quot; : 2000, &quot;heartbeatTimeoutSecs&quot; : 10, &quot;electionTimeoutMillis&quot; : 10000, &quot;catchUpTimeoutMillis&quot; : -1, &quot;catchUpTakeoverDelayMillis&quot; : 30000, &quot;getLastErrorModes&quot; : { }, &quot;getLastErrorDefaults&quot; : { &quot;w&quot; : 1, &quot;wtimeout&quot; : 0 }, &quot;replicaSetId&quot; : ObjectId(&quot;61ea43d55303298c0a702c41&quot;) }}#æŸ¥çœ‹å‰¯æœ¬é›†çŠ¶æ€rs0:PRIMARY&gt; rs.status(){ &quot;set&quot; : &quot;rs0&quot;, &quot;date&quot; : ISODate(&quot;2022-01-21T05:26:33.032Z&quot;), &quot;myState&quot; : 1, &quot;term&quot; : NumberLong(1), &quot;syncSourceHost&quot; : &quot;&quot;, &quot;syncSourceId&quot; : -1, &quot;heartbeatIntervalMillis&quot; : NumberLong(2000), &quot;majorityVoteCount&quot; : 1, &quot;writeMajorityCount&quot; : 1, &quot;votingMembersCount&quot; : 1, &quot;writableVotingMembersCount&quot; : 1, &quot;optimes&quot; : { &quot;lastCommittedOpTime&quot; : { &quot;ts&quot; : Timestamp(1642742783, 1), &quot;t&quot; : NumberLong(1) }, &quot;lastCommittedWallTime&quot; : ISODate(&quot;2022-01-21T05:26:23.117Z&quot;), &quot;readConcernMajorityOpTime&quot; : { &quot;ts&quot; : Timestamp(1642742783, 1), &quot;t&quot; : NumberLong(1) }, &quot;appliedOpTime&quot; : { &quot;ts&quot; : Timestamp(1642742783, 1), &quot;t&quot; : NumberLong(1) }, &quot;durableOpTime&quot; : { &quot;ts&quot; : Timestamp(1642742783, 1), &quot;t&quot; : NumberLong(1) }, &quot;lastAppliedWallTime&quot; : ISODate(&quot;2022-01-21T05:26:23.117Z&quot;), &quot;lastDurableWallTime&quot; : ISODate(&quot;2022-01-21T05:26:23.117Z&quot;) }, &quot;lastStableRecoveryTimestamp&quot; : Timestamp(1642742741, 1), &quot;electionCandidateMetrics&quot; : { &quot;lastElectionReason&quot; : &quot;electionTimeout&quot;, &quot;lastElectionDate&quot; : ISODate(&quot;2022-01-21T05:25:42.687Z&quot;), &quot;electionTerm&quot; : NumberLong(1), &quot;lastCommittedOpTimeAtElection&quot; : { &quot;ts&quot; : Timestamp(1642742741, 1), &quot;t&quot; : NumberLong(-1) }, &quot;lastSeenOpTimeAtElection&quot; : { &quot;ts&quot; : Timestamp(1642742741, 1), &quot;t&quot; : NumberLong(-1) }, &quot;numVotesNeeded&quot; : 1, &quot;priorityAtElection&quot; : 1, &quot;electionTimeoutMillis&quot; : NumberLong(10000), &quot;newTermStartDate&quot; : ISODate(&quot;2022-01-21T05:25:42.963Z&quot;), &quot;wMajorityWriteAvailabilityDate&quot; : ISODate(&quot;2022-01-21T05:25:43.131Z&quot;) }, &quot;members&quot; : [ { &quot;_id&quot; : 0, &quot;name&quot; : &quot;localhost:27017&quot;, &quot;health&quot; : 1, &quot;state&quot; : 1, &quot;stateStr&quot; : &quot;PRIMARY&quot;, &quot;uptime&quot; : 203, &quot;optime&quot; : { &quot;ts&quot; : Timestamp(1642742783, 1), &quot;t&quot; : NumberLong(1) }, &quot;optimeDate&quot; : ISODate(&quot;2022-01-21T05:26:23Z&quot;), &quot;lastAppliedWallTime&quot; : ISODate(&quot;2022-01-21T05:26:23.117Z&quot;), &quot;lastDurableWallTime&quot; : ISODate(&quot;2022-01-21T05:26:23.117Z&quot;), &quot;syncSourceHost&quot; : &quot;&quot;, &quot;syncSourceId&quot; : -1, &quot;infoMessage&quot; : &quot;Could not find member to sync from&quot;, &quot;electionTime&quot; : Timestamp(1642742742, 1), &quot;electionDate&quot; : ISODate(&quot;2022-01-21T05:25:42Z&quot;), &quot;configVersion&quot; : 1, &quot;configTerm&quot; : 1, &quot;self&quot; : true, &quot;lastHeartbeatMessage&quot; : &quot;&quot; } ], &quot;ok&quot; : 1, &quot;$clusterTime&quot; : { &quot;clusterTime&quot; : Timestamp(1642742783, 1), &quot;signature&quot; : { &quot;hash&quot; : BinData(0,&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&quot;), &quot;keyId&quot; : NumberLong(0) } }, &quot;operationTime&quot; : Timestamp(1642742783, 1)}rs0:PRIMARY&gt; å‰¯æœ¬é›†æ·»åŠ æˆå‘˜ æ·»åŠ å‰¯æœ¬é›†çš„æˆå‘˜ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¤šå°æœåŠ¡å™¨æ¥å¯åŠ¨mongoæœåŠ¡ã€‚è¿›å…¥Mongoå®¢æˆ·ç«¯ï¼Œå¹¶ä½¿ç”¨rs.add()æ–¹æ³•æ¥æ·»åŠ å‰¯æœ¬é›†çš„æˆå‘˜ã€‚ è¯­æ³• rs.add() å‘½ä»¤åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š 1&gt;rs.add(HOST_NAME:PORT) å®ä¾‹ å‡è®¾ä½ å·²ç»å¯åŠ¨äº†ä¸€ä¸ªåä¸ºmongod1.netï¼Œç«¯å£å·ä¸º27017çš„MongoæœåŠ¡ã€‚ åœ¨å®¢æˆ·ç«¯å‘½ä»¤çª—å£ä½¿ç”¨rs.add() å‘½ä»¤å°†å…¶æ·»åŠ åˆ°å‰¯æœ¬é›†ä¸­ï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š 12&gt;rs.add(&quot;mongod1.net:27017&quot;)&gt; MongoDBä¸­ä½ åªèƒ½é€šè¿‡ä¸»èŠ‚ç‚¹å°†MongoæœåŠ¡æ·»åŠ åˆ°å‰¯æœ¬é›†ä¸­ï¼Œ åˆ¤æ–­å½“å‰è¿è¡Œçš„MongoæœåŠ¡æ˜¯å¦ä¸ºä¸»èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨å‘½ä»¤db.isMaster() ã€‚ MongoDBçš„å‰¯æœ¬é›†ä¸æˆ‘ä»¬å¸¸è§çš„ä¸»ä»æœ‰æ‰€ä¸åŒï¼Œä¸»ä»åœ¨ä¸»æœºå®•æœºåæ‰€æœ‰æœåŠ¡å°†åœæ­¢ï¼Œè€Œå‰¯æœ¬é›†åœ¨ä¸»æœºå®•æœºåï¼Œå‰¯æœ¬ä¼šæ¥ç®¡ä¸»èŠ‚ç‚¹æˆä¸ºä¸»èŠ‚ç‚¹ï¼Œä¸ä¼šå‡ºç°å®•æœºçš„æƒ…å†µã€‚ åä¸€ã€åˆ†ç‰‡ åˆ†ç‰‡ åœ¨Mongodbé‡Œé¢å­˜åœ¨å¦ä¸€ç§é›†ç¾¤ï¼Œå°±æ˜¯åˆ†ç‰‡æŠ€æœ¯,å¯ä»¥æ»¡è¶³MongoDBæ•°æ®é‡å¤§é‡å¢é•¿çš„éœ€æ±‚ã€‚ å½“MongoDBå­˜å‚¨æµ·é‡çš„æ•°æ®æ—¶ï¼Œä¸€å°æœºå™¨å¯èƒ½ä¸è¶³ä»¥å­˜å‚¨æ•°æ®ï¼Œä¹Ÿå¯èƒ½ä¸è¶³ä»¥æä¾›å¯æ¥å—çš„è¯»å†™ååé‡ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åœ¨å¤šå°æœºå™¨ä¸Šåˆ†å‰²æ•°æ®ï¼Œä½¿å¾—æ•°æ®åº“ç³»ç»Ÿèƒ½å­˜å‚¨å’Œå¤„ç†æ›´å¤šçš„æ•°æ®ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨åˆ†ç‰‡ å¤åˆ¶æ‰€æœ‰çš„å†™å…¥æ“ä½œåˆ°ä¸»èŠ‚ç‚¹ å»¶è¿Ÿçš„æ•æ„Ÿæ•°æ®ä¼šåœ¨ä¸»èŠ‚ç‚¹æŸ¥è¯¢ å•ä¸ªå‰¯æœ¬é›†é™åˆ¶åœ¨12ä¸ªèŠ‚ç‚¹ å½“è¯·æ±‚é‡å·¨å¤§æ—¶ä¼šå‡ºç°å†…å­˜ä¸è¶³ã€‚ æœ¬åœ°ç£ç›˜ä¸è¶³ å‚ç›´æ‰©å±•ä»·æ ¼æ˜‚è´µ MongoDBåˆ†ç‰‡ ä¸‹å›¾å±•ç¤ºäº†åœ¨MongoDBä¸­ä½¿ç”¨åˆ†ç‰‡é›†ç¾¤ç»“æ„åˆ†å¸ƒï¼š ä¸Šå›¾ä¸­ä¸»è¦æœ‰å¦‚ä¸‹æ‰€è¿°ä¸‰ä¸ªä¸»è¦ç»„ä»¶ï¼š Shard: ç”¨äºå­˜å‚¨å®é™…çš„æ•°æ®å—ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­ä¸€ä¸ªshard serverè§’è‰²å¯ç”±å‡ å°æœºå™¨ç»„ä¸ªä¸€ä¸ªreplica setæ‰¿æ‹…ï¼Œé˜²æ­¢ä¸»æœºå•ç‚¹æ•…éšœ Config Server: mongod å®ä¾‹ï¼Œå­˜å‚¨äº†æ•´ä¸ª ClusterMetadataï¼Œå…¶ä¸­åŒ…æ‹¬ chunk ä¿¡æ¯ã€‚ Query Routers: å‰ç«¯è·¯ç”±ï¼Œå®¢æˆ·ç«¯ç”±æ­¤æ¥å…¥ï¼Œä¸”è®©æ•´ä¸ªé›†ç¾¤çœ‹ä¸Šå»åƒå•ä¸€æ•°æ®åº“ï¼Œå‰ç«¯åº”ç”¨å¯ä»¥é€æ˜ä½¿ç”¨ã€‚ åˆ†ç‰‡å®ä¾‹ åˆ†ç‰‡ç»“æ„ç«¯å£åˆ†å¸ƒå¦‚ä¸‹ï¼š 123456Shard Server 1ï¼š27020Shard Server 2ï¼š27021Shard Server 3ï¼š27022Shard Server 4ï¼š27023Config Server ï¼š27100Route Processï¼š40000 æ­¥éª¤ä¸€ï¼šå¯åŠ¨Shard Server 12345678[root@100 /]# mkdir -p /www/mongoDB/shard/s0[root@100 /]# mkdir -p /www/mongoDB/shard/s1[root@100 /]# mkdir -p /www/mongoDB/shard/s2[root@100 /]# mkdir -p /www/mongoDB/shard/s3[root@100 /]# mkdir -p /www/mongoDB/shard/log[root@100 /]# /usr/local/mongoDB/bin/mongod --port 27020 --dbpath=/www/mongoDB/shard/s0 --logpath=/www/mongoDB/shard/log/s0.log --logappend --fork....[root@100 /]# /usr/local/mongoDB/bin/mongod --port 27023 --dbpath=/www/mongoDB/shard/s3 --logpath=/www/mongoDB/shard/log/s3.log --logappend --fork æ­¥éª¤äºŒï¼š å¯åŠ¨Config Server 12[root@100 /]# mkdir -p /www/mongoDB/shard/config[root@100 /]# /usr/local/mongoDB/bin/mongod --port 27100 --dbpath=/www/mongoDB/shard/config --logpath=/www/mongoDB/shard/log/config.log --logappend --fork **æ³¨æ„ï¼š**è¿™é‡Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åƒå¯åŠ¨æ™®é€šmongodbæœåŠ¡ä¸€æ ·å¯åŠ¨ï¼Œä¸éœ€è¦æ·»åŠ â€”shardsvrå’Œconfigsvrå‚æ•°ã€‚å› ä¸ºè¿™ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨å°±æ˜¯æ”¹å˜å¯åŠ¨ç«¯å£çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªè¡ŒæŒ‡å®šäº†ç«¯å£å°±å¯ä»¥ã€‚ æ­¥éª¤ä¸‰ï¼š å¯åŠ¨Route Process 1/usr/local/mongoDB/bin/mongos --port 40000 --configdb localhost:27100 --fork --logpath=/www/mongoDB/shard/log/route.log --chunkSize 500 mongoså¯åŠ¨å‚æ•°ä¸­ï¼ŒchunkSizeè¿™ä¸€é¡¹æ˜¯ç”¨æ¥æŒ‡å®šchunkçš„å¤§å°çš„ï¼Œå•ä½æ˜¯MBï¼Œé»˜è®¤å¤§å°ä¸º200MB. æ­¥éª¤å››ï¼š é…ç½®Sharding æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨MongoDB Shellç™»å½•åˆ°mongosï¼Œæ·»åŠ ShardèŠ‚ç‚¹ 123456789101112[root@100 shard]# /usr/local/mongoDB/bin/mongo admin --port 40000MongoDB shell version: 2.0.7connecting to: 127.0.0.1:40000/adminmongos&gt; db.runCommand({ addshard:&quot;localhost:27020&quot; }){ &quot;shardAdded&quot; : &quot;shard0000&quot;, &quot;ok&quot; : 1 }......mongos&gt; db.runCommand({ addshard:&quot;localhost:27029&quot; }){ &quot;shardAdded&quot; : &quot;shard0009&quot;, &quot;ok&quot; : 1 }mongos&gt; db.runCommand({ enablesharding:&quot;test&quot; }) #è®¾ç½®åˆ†ç‰‡å­˜å‚¨çš„æ•°æ®åº“{ &quot;ok&quot; : 1 }mongos&gt; db.runCommand({ shardcollection: &quot;test.log&quot;, key: { id:1,time:1}}){ &quot;collectionsharded&quot; : &quot;test.log&quot;, &quot;ok&quot; : 1 } æ­¥éª¤äº”ï¼š ç¨‹åºä»£ç å†…æ— éœ€å¤ªå¤§æ›´æ”¹ï¼Œç›´æ¥æŒ‰ç…§è¿æ¥æ™®é€šçš„mongoæ•°æ®åº“é‚£æ ·ï¼Œå°†æ•°æ®åº“è¿æ¥æ¥å…¥æ¥å£40000 åäºŒã€å®‰è£…å…¶ä»–å·¥å…· ä¸‹è½½åå°†å…¶binç›®å½•ä¸‹å¤åˆ¶åˆ°dataä¸‹binç›®å½•ä¸‹ï¼š https://www.mongodb.com/try/download/database-tools åä¸‰ã€å¤‡ä»½ / æ¢å¤ æ•°æ®å¤‡ä»½ å¤‡ä»½(mongodump)ä¸æ¢å¤(mongorestore)ã€‚åœ¨Mongodbä¸­æˆ‘ä»¬ä½¿ç”¨mongodumpå‘½ä»¤æ¥å¤‡ä»½MongoDBæ•°æ®ã€‚è¯¥å‘½ä»¤å¯ä»¥å¯¼å‡ºæ‰€æœ‰æ•°æ®åˆ°æŒ‡å®šç›®å½•ä¸­ã€‚ mongodumpå‘½ä»¤å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šå¯¼å‡ºçš„æ•°æ®é‡çº§è½¬å­˜çš„æœåŠ¡å™¨ã€‚ è¯­æ³• mongodumpå‘½ä»¤è„šæœ¬è¯­æ³•å¦‚ä¸‹ï¼š 1&gt;mongodump -h dbhost -d dbname -o dbdirectory -hï¼š MongoDB æ‰€åœ¨æœåŠ¡å™¨åœ°å€ï¼Œä¾‹å¦‚ï¼š127.0.0.1ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šç«¯å£å·ï¼š127.0.0.1:27017 -dï¼š éœ€è¦å¤‡ä»½çš„æ•°æ®åº“å®ä¾‹ï¼Œä¾‹å¦‚ï¼štest -oï¼š å¤‡ä»½çš„æ•°æ®å­˜æ”¾ä½ç½®ï¼Œä¾‹å¦‚ï¼šc:\\data\\dumpï¼Œå½“ç„¶è¯¥ç›®å½•éœ€è¦æå‰å»ºç«‹ï¼Œåœ¨å¤‡ä»½å®Œæˆåï¼Œç³»ç»Ÿè‡ªåŠ¨åœ¨dumpç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªtestç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢å­˜æ”¾è¯¥æ•°æ®åº“å®ä¾‹çš„å¤‡ä»½æ•°æ®ã€‚ å®ä¾‹ åœ¨æœ¬åœ°ä½¿ç”¨ 27017 å¯åŠ¨ä½ çš„mongodæœåŠ¡ã€‚æ‰“å¼€å‘½ä»¤æç¤ºç¬¦çª—å£ï¼Œè¿›å…¥MongoDBå®‰è£…ç›®å½•çš„binç›®å½•è¾“å…¥å‘½ä»¤mongodump: 1&gt;mongodump #å³mongod æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œå®¢æˆ·ç«¯ä¼šè¿æ¥åˆ°ipä¸º 127.0.0.1 ç«¯å£å·ä¸º 27017 çš„MongoDBæœåŠ¡ä¸Šï¼Œå¹¶å¤‡ä»½æ‰€æœ‰æ•°æ®åˆ° bin/dump/ ç›®å½•ä¸­ã€‚å‘½ä»¤è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š mongodump å‘½ä»¤å¯é€‰å‚æ•°åˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š è¯­æ³• æè¿° å®ä¾‹ mongodump --host HOST_NAME --port PORT_NUMBER è¯¥å‘½ä»¤å°†å¤‡ä»½æ‰€æœ‰MongoDBæ•°æ® mongodump --host runoob.com --port 27017 mongodump --dbpath DB_PATH --out BACKUP_DIRECTORY mongodump --dbpath /data/db/ --out /data/backup/ mongodump --collection COLLECTION --db DB_NAME è¯¥å‘½ä»¤å°†å¤‡ä»½æŒ‡å®šæ•°æ®åº“çš„é›†åˆã€‚ mongodump --collection mycol --db test æ•°æ®æ¢å¤ mongodbä½¿ç”¨ mongorestore å‘½ä»¤æ¥æ¢å¤å¤‡ä»½çš„æ•°æ®ã€‚ è¯­æ³• mongorestoreå‘½ä»¤è„šæœ¬è¯­æ³•å¦‚ä¸‹ï¼š 1&gt;mongorestore -h &lt;hostname&gt;&lt;:port&gt; -d dbname &lt;path&gt; --host &lt;:port&gt;, -h &lt;:port&gt;ï¼š MongoDBæ‰€åœ¨æœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤ä¸ºï¼š localhost:27017 --db , -d ï¼š éœ€è¦æ¢å¤çš„æ•°æ®åº“å®ä¾‹ï¼Œä¾‹å¦‚ï¼štestï¼Œå½“ç„¶è¿™ä¸ªåç§°ä¹Ÿå¯ä»¥å’Œå¤‡ä»½æ—¶å€™çš„ä¸ä¸€æ ·ï¼Œæ¯”å¦‚test2 --dropï¼š æ¢å¤çš„æ—¶å€™ï¼Œå…ˆåˆ é™¤å½“å‰æ•°æ®ï¼Œç„¶åæ¢å¤å¤‡ä»½çš„æ•°æ®ã€‚å°±æ˜¯è¯´ï¼Œæ¢å¤åï¼Œå¤‡ä»½åæ·»åŠ ä¿®æ”¹çš„æ•°æ®éƒ½ä¼šè¢«åˆ é™¤ï¼Œæ…ç”¨å“¦ï¼ ï¼š mongorestore æœ€åçš„ä¸€ä¸ªå‚æ•°ï¼Œè®¾ç½®å¤‡ä»½æ•°æ®æ‰€åœ¨ä½ç½®ï¼Œä¾‹å¦‚ï¼šc:\\data\\dump\\testã€‚ ä½ ä¸èƒ½åŒæ—¶æŒ‡å®š å’Œ --dir é€‰é¡¹ï¼Œ--dirä¹Ÿå¯ä»¥è®¾ç½®å¤‡ä»½ç›®å½•ã€‚ --dirï¼š æŒ‡å®šå¤‡ä»½çš„ç›®å½• ä½ ä¸èƒ½åŒæ—¶æŒ‡å®š å’Œ --dir é€‰é¡¹ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤: 1&gt;mongorestore æ‰§è¡Œä»¥ä¸Šå‘½ä»¤è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š åå››ã€ç›‘æ§ åœ¨ä½ å·²ç»å®‰è£…éƒ¨ç½²å¹¶å…è®¸MongoDBæœåŠ¡åï¼Œä½ å¿…é¡»è¦äº†è§£MongoDBçš„è¿è¡Œæƒ…å†µï¼Œå¹¶æŸ¥çœ‹MongoDBçš„æ€§èƒ½ã€‚è¿™æ ·åœ¨å¤§æµé‡å¾—æƒ…å†µä¸‹å¯ä»¥å¾ˆå¥½çš„åº”å¯¹å¹¶ä¿è¯MongoDBæ­£å¸¸è¿ä½œã€‚ MongoDBä¸­æä¾›äº†mongostat å’Œ mongotop ä¸¤ä¸ªå‘½ä»¤æ¥ç›‘æ§MongoDBçš„è¿è¡Œæƒ…å†µã€‚ mongostat å‘½ä»¤ mongostatæ˜¯mongodbè‡ªå¸¦çš„çŠ¶æ€æ£€æµ‹å·¥å…·ï¼Œåœ¨å‘½ä»¤è¡Œä¸‹ä½¿ç”¨ã€‚å®ƒä¼šé—´éš”å›ºå®šæ—¶é—´è·å–mongodbçš„å½“å‰è¿è¡ŒçŠ¶æ€ï¼Œå¹¶è¾“å‡ºã€‚å¦‚æœä½ å‘ç°æ•°æ®åº“çªç„¶å˜æ…¢æˆ–è€…æœ‰å…¶ä»–é—®é¢˜çš„è¯ï¼Œä½ ç¬¬ä¸€æ‰‹çš„æ“ä½œå°±è€ƒè™‘é‡‡ç”¨mongostatæ¥æŸ¥çœ‹mongoçš„çŠ¶æ€ã€‚ å¯åŠ¨ä½ çš„MongodæœåŠ¡ï¼Œè¿›å…¥åˆ°ä½ å®‰è£…çš„MongoDBç›®å½•ä¸‹çš„binç›®å½•ï¼Œ ç„¶åè¾“å…¥mongostatå‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1D:\\set up\\mongodb\\bin&gt;mongostat ä»¥ä¸Šå‘½ä»¤è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š mongotop å‘½ä»¤ mongotopä¹Ÿæ˜¯mongodbä¸‹çš„ä¸€ä¸ªå†…ç½®å·¥å…·ï¼Œmongotopæä¾›äº†ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è·Ÿè¸ªä¸€ä¸ªMongoDBçš„å®ä¾‹ï¼ŒæŸ¥çœ‹å“ªäº›å¤§é‡çš„æ—¶é—´èŠ±è´¹åœ¨è¯»å–å’Œå†™å…¥æ•°æ®ã€‚ mongotopæä¾›æ¯ä¸ªé›†åˆçš„æ°´å¹³çš„ç»Ÿè®¡æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œmongotopè¿”å›å€¼çš„æ¯ä¸€ç§’ã€‚ å¯åŠ¨ä½ çš„MongodæœåŠ¡ï¼Œè¿›å…¥åˆ°ä½ å®‰è£…çš„MongoDBç›®å½•ä¸‹çš„binç›®å½•ï¼Œ ç„¶åè¾“å…¥mongotopå‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1D:\\set up\\mongodb\\bin&gt;mongotop ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š å¸¦å‚æ•°å®ä¾‹ 1E:\\mongodb-win32-x86_64-2.2.1\\bin&gt;mongotop 10 åé¢çš„10æ˜¯**å‚æ•° ï¼Œå¯ä»¥ä¸ä½¿ç”¨ï¼Œç­‰å¾…çš„æ—¶é—´é•¿åº¦ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œmongotopç­‰å¾…è°ƒç”¨ä¹‹é—´ã€‚é€šè¿‡çš„é»˜è®¤mongotopè¿”å›æ•°æ®çš„æ¯ä¸€ç§’ã€‚ 1E:\\mongodb-win32-x86_64-2.2.1\\bin&gt;mongotop --locks æŠ¥å‘Šæ¯ä¸ªæ•°æ®åº“çš„é”çš„ä½¿ç”¨ä¸­ï¼Œä½¿ç”¨mongotop - é”ï¼Œè¿™å°†äº§ç”Ÿä»¥ä¸‹è¾“å‡ºï¼š è¾“å‡ºç»“æœå­—æ®µè¯´æ˜ï¼š nsï¼š åŒ…å«æ•°æ®åº“å‘½åç©ºé—´ï¼Œåè€…ç»“åˆäº†æ•°æ®åº“åç§°å’Œé›†åˆã€‚ dbï¼š åŒ…å«æ•°æ®åº“çš„åç§°ã€‚åä¸º . çš„æ•°æ®åº“é’ˆå¯¹å…¨å±€é”å®šï¼Œè€Œéç‰¹å®šæ•°æ®åº“ã€‚ totalï¼š mongodèŠ±è´¹çš„æ—¶é—´å·¥ä½œåœ¨è¿™ä¸ªå‘½åç©ºé—´æä¾›æ€»é¢ã€‚ readï¼š æä¾›äº†å¤§é‡çš„æ—¶é—´ï¼Œè¿™mongodèŠ±è´¹åœ¨æ‰§è¡Œè¯»æ“ä½œï¼Œåœ¨æ­¤å‘½åç©ºé—´ã€‚ writeï¼š æä¾›è¿™ä¸ªå‘½åç©ºé—´è¿›è¡Œå†™æ“ä½œï¼Œè¿™mongodèŠ±äº†å¤§é‡çš„æ—¶é—´ã€‚ åäº”ã€MongoDBCompassä½¿ç”¨ MongoDBå¯è§†åŒ–å·¥å…· mongoå‘½ä»¤è¿æ¥æœåŠ¡å™¨åæ‰“å¼€å·¥å…· ç‚¹å‡»è¿æ¥é»˜è®¤çš„æœåŠ¡å™¨ã€æ¥å£å’ŒNoneè®¤è¯çš„æœåŠ¡ åå…­ã€Javaä½¿ç”¨ æ–‡æ¡£ å¼•å…¥ä¾èµ– 123456&lt;!--MongoDB--&gt;&lt;dependency&gt; &lt;groupId&gt;org.mongodb&lt;/groupId&gt; &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt; &lt;version&gt;4.4.1&lt;/version&gt;&lt;/dependency&gt; è¿æ¥ 1234567891011121314151617181920212223242526272829303132333435363738394041424344package pers.lxl.mylearnproject.programbase.nosql.mongolearn;import static com.mongodb.client.model.Filters.eq;import org.bson.Document;import com.mongodb.client.MongoClient;import com.mongodb.client.MongoClients;import com.mongodb.client.MongoCollection;import com.mongodb.client.MongoDatabase;public class HelloMongoDB {//1.æ·»åŠ ä¾èµ–// &lt;dependency&gt;// &lt;groupId&gt;org.mongodb&lt;/groupId&gt;// &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;// &lt;version&gt;4.4.1&lt;/version&gt;// &lt;/dependency&gt;// 2.è¿æ¥åˆ°æ•°æ®åº“public static void main( String args[] ){// try{// // è¿æ¥åˆ° mongodb æœåŠ¡// MongoClient mongoClient = new MongoClient( &quot;localhost&quot; , 27017 );//// // è¿æ¥åˆ°æ•°æ®åº“// MongoDatabase mongoDatabase = mongoClient.getDatabase(&quot;mycol&quot;);// System.out.println(&quot;Connect to database successfully&quot;);//// }catch(Exception e){// System.err.println( e.getClass().getName() + &quot;: &quot; + e.getMessage() );// }// Replace the uri string with your MongoDB deployment's connection string// IllegalArgumentException: Unsupported compressor 'disabled'// String uri = &quot;mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb&quot;;// Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/mongodb/internal/connection/InternalConnectionPoolSettings å‡çº§springbootç‰ˆæœ¬ String uri = &quot;mongodb://127.0.0.1:27017/?gssapiServiceName=mongodb&quot;; try (MongoClient mongoClient = MongoClients.create(uri)) {// show dbs MongoDatabase database = mongoClient.getDatabase(&quot;student&quot;);// show collections æˆ– show tables MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;student&quot;); Document doc = collection.find(eq(&quot;age&quot;, 11)).first(); System.out.println(doc.toJson()+&quot;==========&quot;); }}} åä¸ƒã€å…³ç³» MongoDB çš„å…³ç³»è¡¨ç¤ºå¤šä¸ªæ–‡æ¡£ä¹‹é—´åœ¨é€»è¾‘ä¸Šçš„ç›¸äº’è”ç³»ã€‚ æ–‡æ¡£é—´å¯ä»¥é€šè¿‡åµŒå…¥å’Œå¼•ç”¨æ¥å»ºç«‹è”ç³»ã€‚ MongoDB ä¸­çš„å…³ç³»å¯ä»¥æ˜¯ï¼š 1:1 (1å¯¹1) 1: N (1å¯¹å¤š) N: 1 (å¤šå¯¹1) N: N (å¤šå¯¹å¤š) æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è€ƒè™‘ä¸‹ç”¨æˆ·ä¸ç”¨æˆ·åœ°å€çš„å…³ç³»ã€‚ ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªåœ°å€ï¼Œæ‰€ä»¥æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚ ä»¥ä¸‹æ˜¯ user æ–‡æ¡£çš„ç®€å•ç»“æ„ï¼š 123456{ &quot;_id&quot;:ObjectId(&quot;52ffc33cd85242f436000001&quot;), &quot;name&quot;: &quot;Tom Hanks&quot;, &quot;contact&quot;: &quot;987654321&quot;, &quot;dob&quot;: &quot;01-01-1991&quot;} ä»¥ä¸‹æ˜¯ address æ–‡æ¡£çš„ç®€å•ç»“æ„ï¼š 1234567{ &quot;_id&quot;:ObjectId(&quot;52ffc4a5d85242602e000000&quot;), &quot;building&quot;: &quot;22 A, Indiana Apt&quot;, &quot;pincode&quot;: 123456, &quot;city&quot;: &quot;Los Angeles&quot;, &quot;state&quot;: &quot;California&quot;} åµŒå…¥å¼å…³ç³» ä½¿ç”¨åµŒå…¥å¼æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç”¨æˆ·åœ°å€åµŒå…¥åˆ°ç”¨æˆ·çš„æ–‡æ¡£ä¸­ï¼š 12345678910111213141516171819{ &quot;_id&quot;:ObjectId(&quot;52ffc33cd85242f436000001&quot;), &quot;contact&quot;: &quot;987654321&quot;, &quot;dob&quot;: &quot;01-01-1991&quot;, &quot;name&quot;: &quot;Tom Benzamin&quot;, &quot;address&quot;: [ { &quot;building&quot;: &quot;22 A, Indiana Apt&quot;, &quot;pincode&quot;: 123456, &quot;city&quot;: &quot;Los Angeles&quot;, &quot;state&quot;: &quot;California&quot; }, { &quot;building&quot;: &quot;170 A, Acropolis Apt&quot;, &quot;pincode&quot;: 456789, &quot;city&quot;: &quot;Chicago&quot;, &quot;state&quot;: &quot;Illinois&quot; }]} ä»¥ä¸Šæ•°æ®ä¿å­˜åœ¨å•ä¸€çš„æ–‡æ¡£ä¸­ï¼Œå¯ä»¥æ¯”è¾ƒå®¹æ˜“çš„è·å–å’Œç»´æŠ¤æ•°æ®ã€‚ ä½ å¯ä»¥è¿™æ ·æŸ¥è¯¢ç”¨æˆ·çš„åœ°å€ï¼š 1&gt;db.users.findOne({&quot;name&quot;:&quot;Tom Benzamin&quot;},{&quot;address&quot;:1}) æ³¨æ„ï¼šä»¥ä¸ŠæŸ¥è¯¢ä¸­ db å’Œ users è¡¨ç¤ºæ•°æ®åº“å’Œé›†åˆã€‚ è¿™ç§æ•°æ®ç»“æ„çš„ç¼ºç‚¹æ˜¯ï¼Œå¦‚æœç”¨æˆ·å’Œç”¨æˆ·åœ°å€åœ¨ä¸æ–­å¢åŠ ï¼Œæ•°æ®é‡ä¸æ–­å˜å¤§ï¼Œä¼šå½±å“è¯»å†™æ€§èƒ½ã€‚ å¼•ç”¨å¼å…³ç³» å¼•ç”¨å¼å…³ç³»æ˜¯è®¾è®¡æ•°æ®åº“æ—¶ç»å¸¸ç”¨åˆ°çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•æŠŠç”¨æˆ·æ•°æ®æ–‡æ¡£å’Œç”¨æˆ·åœ°å€æ•°æ®æ–‡æ¡£åˆ†å¼€ï¼Œé€šè¿‡å¼•ç”¨æ–‡æ¡£çš„ id å­—æ®µæ¥å»ºç«‹å…³ç³»ã€‚ 12345678910{ &quot;_id&quot;:ObjectId(&quot;52ffc33cd85242f436000001&quot;), &quot;contact&quot;: &quot;987654321&quot;, &quot;dob&quot;: &quot;01-01-1991&quot;, &quot;name&quot;: &quot;Tom Benzamin&quot;, &quot;address_ids&quot;: [ ObjectId(&quot;52ffc4a5d85242602e000000&quot;), ObjectId(&quot;52ffc4a5d85242602e000001&quot;) ]} ä»¥ä¸Šå®ä¾‹ä¸­ï¼Œç”¨æˆ·æ–‡æ¡£çš„ address_ids å­—æ®µåŒ…å«ç”¨æˆ·åœ°å€çš„å¯¹è±¡idï¼ˆObjectIdï¼‰æ•°ç»„ã€‚ æˆ‘ä»¬å¯ä»¥è¯»å–è¿™äº›ç”¨æˆ·åœ°å€çš„å¯¹è±¡idï¼ˆObjectIdï¼‰æ¥è·å–ç”¨æˆ·çš„è¯¦ç»†åœ°å€ä¿¡æ¯ã€‚ è¿™ç§æ–¹æ³•éœ€è¦ä¸¤æ¬¡æŸ¥è¯¢ï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ç”¨æˆ·åœ°å€çš„å¯¹è±¡idï¼ˆObjectIdï¼‰ï¼Œç¬¬äºŒæ¬¡é€šè¿‡æŸ¥è¯¢çš„idè·å–ç”¨æˆ·çš„è¯¦ç»†åœ°å€ä¿¡æ¯ã€‚ 12&gt;var result = db.users.findOne({&quot;name&quot;:&quot;Tom Benzamin&quot;},{&quot;address_ids&quot;:1})&gt;var addresses = db.address.find({&quot;_id&quot;:{&quot;$in&quot;:result[&quot;address_ids&quot;]}}) åå…«ã€æ•°æ®åº“å¼•ç”¨ åœ¨ä¸Šä¸€ç« èŠ‚MongoDBå…³ç³»ä¸­æˆ‘ä»¬æåˆ°äº†MongoDBçš„å¼•ç”¨æ¥è§„èŒƒæ•°æ®ç»“æ„æ–‡æ¡£ã€‚ MongoDB å¼•ç”¨æœ‰ä¸¤ç§ï¼š æ‰‹åŠ¨å¼•ç”¨ï¼ˆManual Referencesï¼‰ DBRefs DBRefs vs æ‰‹åŠ¨å¼•ç”¨ è€ƒè™‘è¿™æ ·çš„ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬åœ¨ä¸åŒçš„é›†åˆä¸­ (address_home, address_office, address_mailing, ç­‰)å­˜å‚¨ä¸åŒçš„åœ°å€ï¼ˆä½å€ï¼ŒåŠå…¬å®¤åœ°å€ï¼Œé‚®ä»¶åœ°å€ç­‰ï¼‰ã€‚ è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨ä¸åŒåœ°å€æ—¶ï¼Œä¹Ÿéœ€è¦æŒ‡å®šé›†åˆï¼Œä¸€ä¸ªæ–‡æ¡£ä»å¤šä¸ªé›†åˆå¼•ç”¨æ–‡æ¡£ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ DBRefsã€‚ ä½¿ç”¨ DBRefs DBRefçš„å½¢å¼ï¼š 1{ $ref : , $id : , $db : } ä¸‰ä¸ªå­—æ®µè¡¨ç¤ºçš„æ„ä¹‰ä¸ºï¼š $refï¼šé›†åˆåç§° $idï¼šå¼•ç”¨çš„id $db:æ•°æ®åº“åç§°ï¼Œå¯é€‰å‚æ•° ä»¥ä¸‹å®ä¾‹ä¸­ç”¨æˆ·æ•°æ®æ–‡æ¡£ä½¿ç”¨äº† DBRef, å­—æ®µ addressï¼š 12345678910{ &quot;_id&quot;:ObjectId(&quot;53402597d852426020000002&quot;), &quot;address&quot;: { &quot;$ref&quot;: &quot;address_home&quot;, &quot;$id&quot;: ObjectId(&quot;534009e4d852427820000002&quot;), &quot;$db&quot;: &quot;runoob&quot;}, &quot;contact&quot;: &quot;987654321&quot;, &quot;dob&quot;: &quot;01-01-1991&quot;, &quot;name&quot;: &quot;Tom Benzamin&quot;} address DBRef å­—æ®µæŒ‡å®šäº†å¼•ç”¨çš„åœ°å€æ–‡æ¡£æ˜¯åœ¨ runoob æ•°æ®åº“ä¸‹çš„ address_home é›†åˆï¼Œid ä¸º 534009e4d852427820000002ã€‚ ä»¥ä¸‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æŒ‡å®š $ref å‚æ•°ï¼ˆaddress_home é›†åˆï¼‰æ¥æŸ¥æ‰¾é›†åˆä¸­æŒ‡å®šidçš„ç”¨æˆ·åœ°å€ä¿¡æ¯ï¼š 123&gt;var user = db.users.findOne({&quot;name&quot;:&quot;Tom Benzamin&quot;})&gt;var dbRef = user.address&gt;db[dbRef.$ref].findOne({&quot;_id&quot;:(dbRef.$id)}) ä»¥ä¸Šå®ä¾‹è¿”å›äº† address_home é›†åˆä¸­çš„åœ°å€æ•°æ®ï¼š 1234567{ &quot;_id&quot; : ObjectId(&quot;534009e4d852427820000002&quot;), &quot;building&quot; : &quot;22 A, Indiana Apt&quot;, &quot;pincode&quot; : 123456, &quot;city&quot; : &quot;Los Angeles&quot;, &quot;state&quot; : &quot;California&quot;} åä¹ã€è¦†ç›–ç´¢å¼•æŸ¥è¯¢ å®˜æ–¹çš„MongoDBçš„æ–‡æ¡£ä¸­è¯´æ˜ï¼Œè¦†ç›–æŸ¥è¯¢æ˜¯ä»¥ä¸‹çš„æŸ¥è¯¢ï¼š æ‰€æœ‰çš„æŸ¥è¯¢å­—æ®µæ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ† æ‰€æœ‰çš„æŸ¥è¯¢è¿”å›å­—æ®µåœ¨åŒä¸€ä¸ªç´¢å¼•ä¸­ ç”±äºæ‰€æœ‰å‡ºç°åœ¨æŸ¥è¯¢ä¸­çš„å­—æ®µæ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œ MongoDB æ— éœ€åœ¨æ•´ä¸ªæ•°æ®æ–‡æ¡£ä¸­æ£€ç´¢åŒ¹é…æŸ¥è¯¢æ¡ä»¶å’Œè¿”å›ä½¿ç”¨ç›¸åŒç´¢å¼•çš„æŸ¥è¯¢ç»“æœã€‚ å› ä¸ºç´¢å¼•å­˜åœ¨äºRAMä¸­ï¼Œä»ç´¢å¼•ä¸­è·å–æ•°æ®æ¯”é€šè¿‡æ‰«ææ–‡æ¡£è¯»å–æ•°æ®è¦å¿«å¾—å¤šã€‚ ä½¿ç”¨è¦†ç›–ç´¢å¼•æŸ¥è¯¢ ä¸ºäº†æµ‹è¯•è¦†ç›–ç´¢å¼•æŸ¥è¯¢ï¼Œä½¿ç”¨ä»¥ä¸‹ users é›†åˆ: 12345678{ &quot;_id&quot;: ObjectId(&quot;53402597d852426020000002&quot;), &quot;contact&quot;: &quot;987654321&quot;, &quot;dob&quot;: &quot;01-01-1991&quot;, &quot;gender&quot;: &quot;M&quot;, &quot;name&quot;: &quot;Tom Benzamin&quot;, &quot;user_name&quot;: &quot;tombenzamin&quot;} æˆ‘ä»¬åœ¨ users é›†åˆä¸­åˆ›å»ºè”åˆç´¢å¼•ï¼Œå­—æ®µä¸º gender å’Œ user_name : 1&gt;db.users.ensureIndex({gender:1,user_name:1}) ç°åœ¨ï¼Œè¯¥ç´¢å¼•ä¼šè¦†ç›–ä»¥ä¸‹æŸ¥è¯¢ï¼š 1&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0}) ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä¸Šè¿°æŸ¥è¯¢ï¼ŒMongoDBçš„ä¸ä¼šå»æ•°æ®åº“æ–‡ä»¶ä¸­æŸ¥æ‰¾ã€‚ç›¸åï¼Œå®ƒä¼šä»ç´¢å¼•ä¸­æå–æ•°æ®ï¼Œè¿™æ˜¯éå¸¸å¿«é€Ÿçš„æ•°æ®æŸ¥è¯¢ã€‚ ç”±äºæˆ‘ä»¬çš„ç´¢å¼•ä¸­ä¸åŒ…æ‹¬ _id å­—æ®µï¼Œ_idåœ¨æŸ¥è¯¢ä¸­ä¼šé»˜è®¤è¿”å›ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨MongoDBçš„æŸ¥è¯¢ç»“æœé›†ä¸­æ’é™¤å®ƒã€‚ ä¸‹é¢çš„å®ä¾‹æ²¡æœ‰æ’é™¤_idï¼ŒæŸ¥è¯¢å°±ä¸ä¼šè¢«è¦†ç›–ï¼š 1&gt;db.users.find({gender:&quot;M&quot;},{user_name:1}) æœ€åï¼Œå¦‚æœæ˜¯ä»¥ä¸‹çš„æŸ¥è¯¢ï¼Œä¸èƒ½ä½¿ç”¨è¦†ç›–ç´¢å¼•æŸ¥è¯¢ï¼š æ‰€æœ‰ç´¢å¼•å­—æ®µæ˜¯ä¸€ä¸ªæ•°ç»„ æ‰€æœ‰ç´¢å¼•å­—æ®µæ˜¯ä¸€ä¸ªå­æ–‡æ¡£ äºŒåã€æŸ¥è¯¢åˆ†æ MongoDB æŸ¥è¯¢åˆ†æå¯ä»¥ç¡®ä¿æˆ‘ä»¬æ‰€å»ºç«‹çš„ç´¢å¼•æ˜¯å¦æœ‰æ•ˆï¼Œæ˜¯æŸ¥è¯¢è¯­å¥æ€§èƒ½åˆ†æçš„é‡è¦å·¥å…·ã€‚ MongoDB æŸ¥è¯¢åˆ†æå¸¸ç”¨å‡½æ•°æœ‰ï¼šexplain() å’Œ hint()ã€‚ ä½¿ç”¨ explain() explain æ“ä½œæä¾›äº†æŸ¥è¯¢ä¿¡æ¯ï¼Œä½¿ç”¨ç´¢å¼•åŠæŸ¥è¯¢ç»Ÿè®¡ç­‰ã€‚æœ‰åˆ©äºæˆ‘ä»¬å¯¹ç´¢å¼•çš„ä¼˜åŒ–ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ users é›†åˆä¸­åˆ›å»º gender å’Œ user_name çš„ç´¢å¼•ï¼š 1&gt;db.users.ensureIndex({gender:1,user_name:1}) ç°åœ¨åœ¨æŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨ explain ï¼š 1&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0}).explain() ä»¥ä¸Šçš„ explain() æŸ¥è¯¢è¿”å›å¦‚ä¸‹ç»“æœï¼š 1234567891011121314151617181920212223242526272829303132{ &quot;cursor&quot; : &quot;BtreeCursor gender_1_user_name_1&quot;, &quot;isMultiKey&quot; : false, &quot;n&quot; : 1, &quot;nscannedObjects&quot; : 0, &quot;nscanned&quot; : 1, &quot;nscannedObjectsAllPlans&quot; : 0, &quot;nscannedAllPlans&quot; : 1, &quot;scanAndOrder&quot; : false, &quot;indexOnly&quot; : true,//**indexOnly**: å­—æ®µä¸º true ï¼Œè¡¨ç¤ºæˆ‘ä»¬ä½¿ç”¨äº†ç´¢å¼•ã€‚ &quot;nYields&quot; : 0, &quot;nChunkSkips&quot; : 0, &quot;millis&quot; : 0, &quot;indexBounds&quot; : { &quot;gender&quot; : [ [ &quot;M&quot;, &quot;M&quot; ] ], &quot;user_name&quot; : [ [ { &quot;$minElement&quot; : 1 }, { &quot;$maxElement&quot; : 1 } ] ] }} ç°åœ¨ï¼Œæˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªç»“æœé›†çš„å­—æ®µï¼š indexOnly: å­—æ®µä¸º true ï¼Œè¡¨ç¤ºæˆ‘ä»¬ä½¿ç”¨äº†ç´¢å¼•ã€‚ cursorï¼šå› ä¸ºè¿™ä¸ªæŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ï¼ŒMongoDB ä¸­ç´¢å¼•å­˜å‚¨åœ¨Bæ ‘ç»“æ„ä¸­ï¼Œæ‰€ä»¥è¿™æ˜¯ä¹Ÿä½¿ç”¨äº† BtreeCursor ç±»å‹çš„æ¸¸æ ‡ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼Œæ¸¸æ ‡çš„ç±»å‹æ˜¯ BasicCursorã€‚è¿™ä¸ªé”®è¿˜ä¼šç»™å‡ºä½ æ‰€ä½¿ç”¨çš„ç´¢å¼•çš„åç§°ï¼Œä½ é€šè¿‡è¿™ä¸ªåç§°å¯ä»¥æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸‹çš„system.indexesé›†åˆï¼ˆç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºï¼Œç”±äºå­˜å‚¨ç´¢å¼•ä¿¡æ¯ï¼Œè¿™ä¸ªç¨å¾®ä¼šæåˆ°ï¼‰æ¥å¾—åˆ°ç´¢å¼•çš„è¯¦ç»†ä¿¡æ¯ã€‚ nï¼šå½“å‰æŸ¥è¯¢è¿”å›çš„æ–‡æ¡£æ•°é‡ã€‚ nscanned/nscannedObjectsï¼šè¡¨æ˜å½“å‰è¿™æ¬¡æŸ¥è¯¢ä¸€å…±æ‰«æäº†é›†åˆä¸­å¤šå°‘ä¸ªæ–‡æ¡£ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯ï¼Œè®©è¿™ä¸ªæ•°å€¼å’Œè¿”å›æ–‡æ¡£çš„æ•°é‡è¶Šæ¥è¿‘è¶Šå¥½ã€‚ millisï¼šå½“å‰æŸ¥è¯¢æ‰€éœ€æ—¶é—´ï¼Œæ¯«ç§’æ•°ã€‚ indexBoundsï¼šå½“å‰æŸ¥è¯¢å…·ä½“ä½¿ç”¨çš„ç´¢å¼•ã€‚ ä½¿ç”¨ hint() è™½ç„¶MongoDBæŸ¥è¯¢ä¼˜åŒ–å™¨ä¸€èˆ¬å·¥ä½œçš„å¾ˆä¸é”™ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ä½¿ç”¨ hint æ¥å¼ºåˆ¶ MongoDB ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„ç´¢å¼•ã€‚ è¿™ç§æ–¹æ³•æŸäº›æƒ…å½¢ä¸‹ä¼šæå‡æ€§èƒ½ã€‚ ä¸€ä¸ªæœ‰ç´¢å¼•çš„ collection å¹¶ä¸”æ‰§è¡Œä¸€ä¸ªå¤šå­—æ®µçš„æŸ¥è¯¢(ä¸€äº›å­—æ®µå·²ç»ç´¢å¼•äº†)ã€‚ å¦‚ä¸‹æŸ¥è¯¢å®ä¾‹æŒ‡å®šäº†ä½¿ç”¨ gender å’Œ user_name ç´¢å¼•å­—æ®µæ¥æŸ¥è¯¢ï¼š 1&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0}).hint({gender:1,user_name:1}) å¯ä»¥ä½¿ç”¨ explain() å‡½æ•°æ¥åˆ†æä»¥ä¸ŠæŸ¥è¯¢ï¼š 1&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0}).hint({gender:1,user_name:1}).explain() äºŒä¸€ã€MongoDB åŸå­æ“ä½œ mongodbä¸æ”¯æŒäº‹åŠ¡ï¼Œæ‰€ä»¥ï¼Œåœ¨ä½ çš„é¡¹ç›®ä¸­åº”ç”¨æ—¶ï¼Œè¦æ³¨æ„è¿™ç‚¹ã€‚æ— è®ºä»€ä¹ˆè®¾è®¡ï¼Œéƒ½ä¸è¦è¦æ±‚mongodbä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚ ä½†æ˜¯mongodbæä¾›äº†è®¸å¤šåŸå­æ“ä½œï¼Œæ¯”å¦‚æ–‡æ¡£çš„ä¿å­˜ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ç­‰ï¼Œéƒ½æ˜¯åŸå­æ“ä½œã€‚ æ‰€è°“åŸå­æ“ä½œå°±æ˜¯è¦ä¹ˆè¿™ä¸ªæ–‡æ¡£ä¿å­˜åˆ°Mongodbï¼Œè¦ä¹ˆæ²¡æœ‰ä¿å­˜åˆ°Mongodbï¼Œä¸ä¼šå‡ºç°æŸ¥è¯¢åˆ°çš„æ–‡æ¡£æ²¡æœ‰ä¿å­˜å®Œæ•´çš„æƒ…å†µã€‚ åŸå­æ“ä½œæ•°æ®æ¨¡å‹ è€ƒè™‘ä¸‹é¢çš„ä¾‹å­ï¼Œå›¾ä¹¦é¦†çš„ä¹¦ç±åŠç»“è´¦ä¿¡æ¯ã€‚ å®ä¾‹è¯´æ˜äº†åœ¨ä¸€ä¸ªç›¸åŒçš„æ–‡æ¡£ä¸­å¦‚ä½•ç¡®ä¿åµŒå…¥å­—æ®µå…³è”åŸå­æ“ä½œï¼ˆupdateï¼šæ›´æ–°ï¼‰çš„å­—æ®µæ˜¯åŒæ­¥çš„ã€‚ 1234567891011book = { _id: 123456789, title: &quot;MongoDB: The Definitive Guide&quot;, author: [ &quot;Kristina Chodorow&quot;, &quot;Mike Dirolf&quot; ], published_date: ISODate(&quot;2010-09-24&quot;), pages: 216, language: &quot;English&quot;, publisher_id: &quot;oreilly&quot;, available: 3, checkout: [ { by: &quot;joe&quot;, date: ISODate(&quot;2012-10-15&quot;) } ] } ä½ å¯ä»¥ä½¿ç”¨ db.collection.findAndModify() æ–¹æ³•æ¥åˆ¤æ–­ä¹¦ç±æ˜¯å¦å¯ç»“ç®—å¹¶æ›´æ–°æ–°çš„ç»“ç®—ä¿¡æ¯ã€‚ åœ¨åŒä¸€ä¸ªæ–‡æ¡£ä¸­åµŒå…¥çš„ available å’Œ checkout å­—æ®µæ¥ç¡®ä¿è¿™äº›å­—æ®µæ˜¯åŒæ­¥æ›´æ–°çš„: 12345678910db.books.findAndModify ( { query: { _id: 123456789, available: { $gt: 0 } }, update: { $inc: { available: -1 }, $push: { checkout: { by: &quot;abc&quot;, date: new Date() } } }} ) åŸå­æ“ä½œå¸¸ç”¨å‘½ä»¤ $set ç”¨æ¥æŒ‡å®šä¸€ä¸ªé”®å¹¶æ›´æ–°é”®å€¼ï¼Œè‹¥é”®ä¸å­˜åœ¨å¹¶åˆ›å»ºã€‚ 1{ $set : { field : value } } $unset ç”¨æ¥åˆ é™¤ä¸€ä¸ªé”®ã€‚ 1{ $unset : { field : 1} } $inc $incå¯ä»¥å¯¹æ–‡æ¡£çš„æŸä¸ªå€¼ä¸ºæ•°å­—å‹ï¼ˆåªèƒ½ä¸ºæ»¡è¶³è¦æ±‚çš„æ•°å­—ï¼‰çš„é”®è¿›è¡Œå¢å‡çš„æ“ä½œã€‚ 1{ $inc : { field : value } } $push ç”¨æ³•ï¼š 1{ $push : { field : value } } æŠŠvalueè¿½åŠ åˆ°fieldé‡Œé¢å»ï¼Œfieldä¸€å®šè¦æ˜¯æ•°ç»„ç±»å‹æ‰è¡Œï¼Œå¦‚æœfieldä¸å­˜åœ¨ï¼Œä¼šæ–°å¢ä¸€ä¸ªæ•°ç»„ç±»å‹åŠ è¿›å»ã€‚ $pushAll åŒ$push,åªæ˜¯ä¸€æ¬¡å¯ä»¥è¿½åŠ å¤šä¸ªå€¼åˆ°ä¸€ä¸ªæ•°ç»„å­—æ®µå†…ã€‚ 1{ $pushAll : { field : value_array } } $pull ä»æ•°ç»„fieldå†…åˆ é™¤ä¸€ä¸ªç­‰äºvalueå€¼ã€‚ 1{ $pull : { field : _value } } $addToSet å¢åŠ ä¸€ä¸ªå€¼åˆ°æ•°ç»„å†…ï¼Œè€Œä¸”åªæœ‰å½“è¿™ä¸ªå€¼ä¸åœ¨æ•°ç»„å†…æ‰å¢åŠ ã€‚ $pop åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå…ƒç´  1{ $pop : { field : 1 } } $rename ä¿®æ”¹å­—æ®µåç§° 1{ $rename : { old_field_name : new_field_name } } $bit ä½æ“ä½œï¼Œintegerç±»å‹ 1{$bit : { field : {and : 5}}} åç§»æ“ä½œç¬¦ 12345&gt; t.find() { &quot;_id&quot; : ObjectId(&quot;4b97e62bf1d8c7152c9ccb74&quot;), &quot;title&quot; : &quot;ABC&quot;, &quot;comments&quot; : [ { &quot;by&quot; : &quot;joe&quot;, &quot;votes&quot; : 3 }, { &quot;by&quot; : &quot;jane&quot;, &quot;votes&quot; : 7 } ] } &gt; t.update( {'comments.by':'joe'}, {$inc:{'comments.$.votes':1}}, false, true ) &gt; t.find() { &quot;_id&quot; : ObjectId(&quot;4b97e62bf1d8c7152c9ccb74&quot;), &quot;title&quot; : &quot;ABC&quot;, &quot;comments&quot; : [ { &quot;by&quot; : &quot;joe&quot;, &quot;votes&quot; : 4 }, { &quot;by&quot; : &quot;jane&quot;, &quot;votes&quot; : 7 } ] } äºŒäºŒã€é«˜çº§ç´¢å¼• è€ƒè™‘ä»¥ä¸‹æ–‡æ¡£é›†åˆï¼ˆusers ï¼‰: 12345678910111213{ &quot;address&quot;: { &quot;city&quot;: &quot;Los Angeles&quot;, &quot;state&quot;: &quot;California&quot;, &quot;pincode&quot;: &quot;123&quot; }, &quot;tags&quot;: [ &quot;music&quot;, &quot;cricket&quot;, &quot;blogs&quot; ], &quot;name&quot;: &quot;Tom Benzamin&quot;} ä»¥ä¸Šæ–‡æ¡£åŒ…å«äº† address å­æ–‡æ¡£å’Œ tags æ•°ç»„ã€‚ ç´¢å¼•æ•°ç»„å­—æ®µ å‡è®¾æˆ‘ä»¬åŸºäºæ ‡ç­¾æ¥æ£€ç´¢ç”¨æˆ·ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦å¯¹é›†åˆä¸­çš„æ•°ç»„ tags å»ºç«‹ç´¢å¼•ã€‚ åœ¨æ•°ç»„ä¸­åˆ›å»ºç´¢å¼•ï¼Œéœ€è¦å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå­—æ®µä¾æ¬¡å»ºç«‹ç´¢å¼•ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬ä¸ºæ•°ç»„ tags åˆ›å»ºç´¢å¼•æ—¶ï¼Œä¼šä¸º musicã€cricketã€blogsä¸‰ä¸ªå€¼å»ºç«‹å•ç‹¬çš„ç´¢å¼•ã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ•°ç»„ç´¢å¼•ï¼š 1234567891011121314#3.0å¼ƒç”¨&gt;db.users.ensureIndex({&quot;tags&quot;:1})&gt; db.users.ensureIndex({&quot;tags&quot;:1})uncaught exception: TypeError: db.users.ensureIndex is not a function :@(shell):1:1&gt; db.users.createIndex({&quot;tags&quot;:1}){ &quot;numIndexesBefore&quot; : 1, &quot;numIndexesAfter&quot; : 2, &quot;createdCollectionAutomatically&quot; : false, &quot;ok&quot; : 1}&gt; åˆ›å»ºç´¢å¼•åï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ£€ç´¢é›†åˆçš„ tags å­—æ®µï¼š 1&gt;db.users.find({tags:&quot;cricket&quot;}) ä¸ºäº†éªŒè¯æˆ‘ä»¬ä½¿ç”¨ä½¿ç”¨äº†ç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨ explain å‘½ä»¤ï¼š 1&gt;db.users.find({tags:&quot;cricket&quot;}).explain() ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œç»“æœä¸­ä¼šæ˜¾ç¤º &quot;cursor&quot; : &quot;BtreeCursor tags_1&quot; ï¼Œåˆ™è¡¨ç¤ºå·²ç»ä½¿ç”¨äº†ç´¢å¼•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970db.users.find({tags:&quot;cricket&quot;}).explain(){ &quot;explainVersion&quot; : &quot;1&quot;, &quot;queryPlanner&quot; : { &quot;namespace&quot; : &quot;users.users&quot;, &quot;indexFilterSet&quot; : false, &quot;parsedQuery&quot; : { &quot;tags&quot; : { &quot;$eq&quot; : &quot;cricket&quot; } }, &quot;queryHash&quot; : &quot;9D3B61A7&quot;, &quot;planCacheKey&quot; : &quot;3C3D3201&quot;, &quot;maxIndexedOrSolutionsReached&quot; : false, &quot;maxIndexedAndSolutionsReached&quot; : false, &quot;maxScansToExplodeReached&quot; : false, &quot;winningPlan&quot; : { &quot;stage&quot; : &quot;FETCH&quot;, &quot;inputStage&quot; : { &quot;stage&quot; : &quot;IXSCAN&quot;, &quot;keyPattern&quot; : { &quot;tags&quot; : 1 }, &quot;indexName&quot; : &quot;tags_1&quot;, &quot;isMultiKey&quot; : true, &quot;multiKeyPaths&quot; : { &quot;tags&quot; : [ &quot;tags&quot; ] }, &quot;isUnique&quot; : false, &quot;isSparse&quot; : false, &quot;isPartial&quot; : false, &quot;indexVersion&quot; : 2, &quot;direction&quot; : &quot;forward&quot;, &quot;indexBounds&quot; : { &quot;tags&quot; : [ &quot;[\\&quot;cricket\\&quot;, \\&quot;cricket\\&quot;]&quot; ] } } }, &quot;rejectedPlans&quot; : [ ] }, &quot;command&quot; : { &quot;find&quot; : &quot;users&quot;, &quot;filter&quot; : { &quot;tags&quot; : &quot;cricket&quot; }, &quot;$db&quot; : &quot;users&quot; }, &quot;serverInfo&quot; : { &quot;host&quot; : &quot;BF-202103261718&quot;, &quot;port&quot; : 27017, &quot;version&quot; : &quot;5.0.6-rc0&quot;, &quot;gitVersion&quot; : &quot;60af56dfe1a17c60bbd628163fda0a161105b6c0&quot; }, &quot;serverParameters&quot; : { &quot;internalQueryFacetBufferSizeBytes&quot; : 104857600, &quot;internalQueryFacetMaxOutputDocSizeBytes&quot; : 104857600, &quot;internalLookupStageIntermediateDocumentMaxSizeBytes&quot; : 104857600, &quot;internalDocumentSourceGroupMaxMemoryBytes&quot; : 104857600, &quot;internalQueryMaxBlockingSortMemoryUsageBytes&quot; : 104857600, &quot;internalQueryProhibitBlockingMergeOnMongoS&quot; : 0, &quot;internalQueryMaxAddToSetBytes&quot; : 104857600, &quot;internalDocumentSourceSetWindowFieldsMaxMemoryBytes&quot; : 104857600 }, &quot;ok&quot; : 1}&gt; ç´¢å¼•å­æ–‡æ¡£å­—æ®µ å‡è®¾æˆ‘ä»¬éœ€è¦é€šè¿‡cityã€stateã€pincodeå­—æ®µæ¥æ£€ç´¢æ–‡æ¡£ï¼Œç”±äºè¿™äº›å­—æ®µæ˜¯å­æ–‡æ¡£çš„å­—æ®µï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹å­æ–‡æ¡£å»ºç«‹ç´¢å¼•ã€‚ ä¸ºå­æ–‡æ¡£çš„ä¸‰ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1&gt;db.users.ensureIndex({&quot;address.city&quot;:1,&quot;address.state&quot;:1,&quot;address.pincode&quot;:1}) ä¸€æ—¦åˆ›å»ºç´¢å¼•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­æ–‡æ¡£çš„å­—æ®µæ¥æ£€ç´¢æ•°æ®ï¼š 1&gt;db.users.find({&quot;address.city&quot;:&quot;Los Angeles&quot;}) æŸ¥è¯¢è¡¨è¾¾ä¸ä¸€å®šéµå¾ªæŒ‡å®šçš„ç´¢å¼•çš„é¡ºåºï¼Œmongodb ä¼šè‡ªåŠ¨ä¼˜åŒ–ã€‚æ‰€ä»¥ä¸Šé¢åˆ›å»ºçš„ç´¢å¼•å°†æ”¯æŒä»¥ä¸‹æŸ¥è¯¢ï¼š 1&gt;db.users.find({&quot;address.state&quot;:&quot;California&quot;,&quot;address.city&quot;:&quot;Los Angeles&quot;}) åŒæ ·æ”¯æŒä»¥ä¸‹æŸ¥è¯¢ï¼š 1&gt;db.users.find({&quot;address.city&quot;:&quot;Los Angeles&quot;,&quot;address.state&quot;:&quot;California&quot;,&quot;address.pincode&quot;:&quot;123&quot;}) äºŒä¸‰ã€ç´¢å¼•é™åˆ¶ é¢å¤–å¼€é”€ æ¯ä¸ªç´¢å¼•å æ®ä¸€å®šçš„å­˜å‚¨ç©ºé—´ï¼Œåœ¨è¿›è¡Œæ’å…¥ï¼Œæ›´æ–°å’Œåˆ é™¤æ“ä½œæ—¶ä¹Ÿéœ€è¦å¯¹ç´¢å¼•è¿›è¡Œæ“ä½œã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ å¾ˆå°‘å¯¹é›†åˆè¿›è¡Œè¯»å–æ“ä½œï¼Œå»ºè®®ä¸ä½¿ç”¨ç´¢å¼•ã€‚ å†…å­˜(RAM)ä½¿ç”¨ ç”±äºç´¢å¼•æ˜¯å­˜å‚¨åœ¨å†…å­˜(RAM)ä¸­,ä½ åº”è¯¥ç¡®ä¿è¯¥ç´¢å¼•çš„å¤§å°ä¸è¶…è¿‡å†…å­˜çš„é™åˆ¶ã€‚ å¦‚æœç´¢å¼•çš„å¤§å°å¤§äºå†…å­˜çš„é™åˆ¶ï¼ŒMongoDBä¼šåˆ é™¤ä¸€äº›ç´¢å¼•ï¼Œè¿™å°†å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ æŸ¥è¯¢é™åˆ¶ ç´¢å¼•ä¸èƒ½è¢«ä»¥ä¸‹çš„æŸ¥è¯¢ä½¿ç”¨ï¼š æ­£åˆ™è¡¨è¾¾å¼åŠéæ“ä½œç¬¦ï¼Œå¦‚ $nin, $not, ç­‰ã€‚ ç®—æœ¯è¿ç®—ç¬¦ï¼Œå¦‚ $mod, ç­‰ã€‚ $where å­å¥ æ‰€ä»¥ï¼Œæ£€æµ‹ä½ çš„è¯­å¥æ˜¯å¦ä½¿ç”¨ç´¢å¼•æ˜¯ä¸€ä¸ªå¥½çš„ä¹ æƒ¯ï¼Œå¯ä»¥ç”¨explainæ¥æŸ¥çœ‹ã€‚ ç´¢å¼•é”®é™åˆ¶ ä»2.6ç‰ˆæœ¬å¼€å§‹ï¼Œå¦‚æœç°æœ‰çš„ç´¢å¼•å­—æ®µçš„å€¼è¶…è¿‡ç´¢å¼•é”®çš„é™åˆ¶ï¼ŒMongoDBä¸­ä¸ä¼šåˆ›å»ºç´¢å¼•ã€‚ æ’å…¥æ–‡æ¡£è¶…è¿‡ç´¢å¼•é”®é™åˆ¶ å¦‚æœæ–‡æ¡£çš„ç´¢å¼•å­—æ®µå€¼è¶…è¿‡äº†ç´¢å¼•é”®çš„é™åˆ¶ï¼ŒMongoDBä¸ä¼šå°†ä»»ä½•æ–‡æ¡£è½¬æ¢æˆç´¢å¼•çš„é›†åˆã€‚ä¸mongorestoreå’Œmongoimportå·¥å…·ç±»ä¼¼ã€‚ æœ€å¤§èŒƒå›´ é›†åˆä¸­ç´¢å¼•ä¸èƒ½è¶…è¿‡64ä¸ª ç´¢å¼•åçš„é•¿åº¦ä¸èƒ½è¶…è¿‡128ä¸ªå­—ç¬¦ ä¸€ä¸ªå¤åˆç´¢å¼•æœ€å¤šå¯ä»¥æœ‰31ä¸ªå­—æ®µ äºŒå››ã€MongoDB ObjectId åœ¨å‰é¢å‡ ä¸ªç« èŠ‚ä¸­æˆ‘ä»¬å·²ç»ä½¿ç”¨äº†MongoDB çš„å¯¹è±¡ Id(ObjectId)ã€‚ åœ¨æœ¬ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£çš„ObjectIdçš„ç»“æ„ã€‚ ObjectId æ˜¯ä¸€ä¸ª12å­—èŠ‚ BSON ç±»å‹æ•°æ®ï¼Œæœ‰ä»¥ä¸‹æ ¼å¼ï¼š å‰4ä¸ªå­—èŠ‚è¡¨ç¤ºæ—¶é—´æˆ³ æ¥ä¸‹æ¥çš„3ä¸ªå­—èŠ‚æ˜¯æœºå™¨æ ‡è¯†ç  ç´§æ¥çš„ä¸¤ä¸ªå­—èŠ‚ç”±è¿›ç¨‹idç»„æˆï¼ˆPIDï¼‰ æœ€åä¸‰ä¸ªå­—èŠ‚æ˜¯éšæœºæ•°ã€‚ MongoDBä¸­å­˜å‚¨çš„æ–‡æ¡£å¿…é¡»æœ‰ä¸€ä¸ª&quot;_id&quot;é”®ã€‚è¿™ä¸ªé”®çš„å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„ï¼Œé»˜è®¤æ˜¯ä¸ªObjectIdå¯¹è±¡ã€‚ åœ¨ä¸€ä¸ªé›†åˆé‡Œé¢ï¼Œæ¯ä¸ªæ–‡æ¡£éƒ½æœ‰å”¯ä¸€çš„&quot;_id&quot;å€¼ï¼Œæ¥ç¡®ä¿é›†åˆé‡Œé¢æ¯ä¸ªæ–‡æ¡£éƒ½èƒ½è¢«å”¯ä¸€æ ‡è¯†ã€‚ MongoDBé‡‡ç”¨ObjectIdï¼Œè€Œä¸æ˜¯å…¶ä»–æ¯”è¾ƒå¸¸è§„çš„åšæ³•ï¼ˆæ¯”å¦‚è‡ªåŠ¨å¢åŠ çš„ä¸»é”®ï¼‰çš„ä¸»è¦åŸå› ï¼Œå› ä¸ºåœ¨å¤šä¸ª æœåŠ¡å™¨ä¸ŠåŒæ­¥è‡ªåŠ¨å¢åŠ ä¸»é”®å€¼æ—¢è´¹åŠ›è¿˜è´¹æ—¶ã€‚ åˆ›å»ºæ–°çš„ObjectId ä½¿ç”¨ä»¥ä¸‹ä»£ç ç”Ÿæˆæ–°çš„ObjectIdï¼š 1&gt;newObjectId = ObjectId() ä¸Šé¢çš„è¯­å¥è¿”å›ä»¥ä¸‹å”¯ä¸€ç”Ÿæˆçš„idï¼š 1ObjectId(&quot;5349b4ddd2781d08c09890f3&quot;) ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç”Ÿæˆçš„idæ¥å–ä»£MongoDBè‡ªåŠ¨ç”Ÿæˆçš„ObjectIdï¼š 1&gt;myObjectId = ObjectId(&quot;5349b4ddd2781d08c09890f4&quot;) åˆ›å»ºæ–‡æ¡£çš„æ—¶é—´æˆ³ ç”±äº ObjectId ä¸­å­˜å‚¨äº† 4 ä¸ªå­—èŠ‚çš„æ—¶é—´æˆ³ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦ä¸ºä½ çš„æ–‡æ¡£ä¿å­˜æ—¶é—´æˆ³å­—æ®µï¼Œä½ å¯ä»¥é€šè¿‡ getTimestamp å‡½æ•°æ¥è·å–æ–‡æ¡£çš„åˆ›å»ºæ—¶é—´: 1&gt;ObjectId(&quot;5349b4ddd2781d08c09890f4&quot;).getTimestamp() ä»¥ä¸Šä»£ç å°†è¿”å› ISO æ ¼å¼çš„æ–‡æ¡£åˆ›å»ºæ—¶é—´ï¼š 1ISODate(&quot;2014-04-12T21:49:17Z&quot;) ObjectId è½¬æ¢ä¸ºå­—ç¬¦ä¸² åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦å°†ObjectIdè½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼š 1&gt;new ObjectId().str ä»¥ä¸Šä»£ç å°†è¿”å›Guidæ ¼å¼çš„å­—ç¬¦ä¸²ï¼šï¼š 15349b4ddd2781d08c09890f3 äºŒäº”ã€ Map Reduce Map-Reduceæ˜¯ä¸€ç§è®¡ç®—æ¨¡å‹ï¼Œç®€å•çš„è¯´å°±æ˜¯å°†å¤§æ‰¹é‡çš„å·¥ä½œï¼ˆæ•°æ®ï¼‰åˆ†è§£ï¼ˆMAPï¼‰æ‰§è¡Œï¼Œç„¶åå†å°†ç»“æœåˆå¹¶æˆæœ€ç»ˆç»“æœï¼ˆREDUCEï¼‰ã€‚ MongoDBæä¾›çš„Map-Reduceéå¸¸çµæ´»ï¼Œå¯¹äºå¤§è§„æ¨¡æ•°æ®åˆ†æä¹Ÿç›¸å½“å®ç”¨ã€‚ MapReduce å‘½ä»¤ ä»¥ä¸‹æ˜¯MapReduceçš„åŸºæœ¬è¯­æ³•ï¼š 12345678910&gt;db.collection.mapReduce( function() {emit(key,value);}, //map å‡½æ•° function(key,values) {return reduceFunction}, //reduce å‡½æ•° { out: collection, query: document, sort: document, limit: number }) ä½¿ç”¨ MapReduce è¦å®ç°ä¸¤ä¸ªå‡½æ•° Map å‡½æ•°å’Œ Reduce å‡½æ•°,Map å‡½æ•°è°ƒç”¨ emit(key, value), éå† collection ä¸­æ‰€æœ‰çš„è®°å½•, å°† key ä¸ value ä¼ é€’ç»™ Reduce å‡½æ•°è¿›è¡Œå¤„ç†ã€‚ Map å‡½æ•°å¿…é¡»è°ƒç”¨ emit(key, value) è¿”å›é”®å€¼å¯¹ã€‚ å‚æ•°è¯´æ˜: map ï¼šæ˜ å°„å‡½æ•° (ç”Ÿæˆé”®å€¼å¯¹åºåˆ—,ä½œä¸º reduce å‡½æ•°å‚æ•°)ã€‚ reduce ç»Ÿè®¡å‡½æ•°ï¼Œreduceå‡½æ•°çš„ä»»åŠ¡å°±æ˜¯å°†key-valueså˜æˆkey-valueï¼Œä¹Ÿå°±æ˜¯æŠŠvaluesæ•°ç»„å˜æˆä¸€ä¸ªå•ä¸€çš„å€¼valueã€‚ã€‚ out ç»Ÿè®¡ç»“æœå­˜æ”¾é›†åˆ (ä¸æŒ‡å®šåˆ™ä½¿ç”¨ä¸´æ—¶é›†åˆ,åœ¨å®¢æˆ·ç«¯æ–­å¼€åè‡ªåŠ¨åˆ é™¤)ã€‚ query ä¸€ä¸ªç­›é€‰æ¡ä»¶ï¼Œåªæœ‰æ»¡è¶³æ¡ä»¶çš„æ–‡æ¡£æ‰ä¼šè°ƒç”¨mapå‡½æ•°ã€‚ï¼ˆqueryã€‚limitï¼Œsortå¯ä»¥éšæ„ç»„åˆï¼‰ sort å’Œlimitç»“åˆçš„sortæ’åºå‚æ•°ï¼ˆä¹Ÿæ˜¯åœ¨å‘å¾€mapå‡½æ•°å‰ç»™æ–‡æ¡£æ’åºï¼‰ï¼Œå¯ä»¥ä¼˜åŒ–åˆ†ç»„æœºåˆ¶ limit å‘å¾€mapå‡½æ•°çš„æ–‡æ¡£æ•°é‡çš„ä¸Šé™ï¼ˆè¦æ˜¯æ²¡æœ‰limitï¼Œå•ç‹¬ä½¿ç”¨sortçš„ç”¨å¤„ä¸å¤§ï¼‰ ä»¥ä¸‹å®ä¾‹åœ¨é›†åˆ orders ä¸­æŸ¥æ‰¾ status:&quot;A&quot; çš„æ•°æ®ï¼Œå¹¶æ ¹æ® cust_id æ¥åˆ†ç»„ï¼Œå¹¶è®¡ç®— amount çš„æ€»å’Œã€‚ ä½¿ç”¨ MapReduce è€ƒè™‘ä»¥ä¸‹æ–‡æ¡£ç»“æ„å­˜å‚¨ç”¨æˆ·çš„æ–‡ç« ï¼Œæ–‡æ¡£å­˜å‚¨äº†ç”¨æˆ·çš„ user_name å’Œæ–‡ç« çš„ status å­—æ®µï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&gt;db.posts.insert({ &quot;post_text&quot;: &quot;èœé¸Ÿæ•™ç¨‹ï¼Œæœ€å…¨çš„æŠ€æœ¯æ–‡æ¡£ã€‚&quot;, &quot;user_name&quot;: &quot;mark&quot;, &quot;status&quot;:&quot;active&quot;})WriteResult({ &quot;nInserted&quot; : 1 })&gt;db.posts.insert({ &quot;post_text&quot;: &quot;èœé¸Ÿæ•™ç¨‹ï¼Œæœ€å…¨çš„æŠ€æœ¯æ–‡æ¡£ã€‚&quot;, &quot;user_name&quot;: &quot;mark&quot;, &quot;status&quot;:&quot;active&quot;})WriteResult({ &quot;nInserted&quot; : 1 })&gt;db.posts.insert({ &quot;post_text&quot;: &quot;èœé¸Ÿæ•™ç¨‹ï¼Œæœ€å…¨çš„æŠ€æœ¯æ–‡æ¡£ã€‚&quot;, &quot;user_name&quot;: &quot;mark&quot;, &quot;status&quot;:&quot;active&quot;})WriteResult({ &quot;nInserted&quot; : 1 })&gt;db.posts.insert({ &quot;post_text&quot;: &quot;èœé¸Ÿæ•™ç¨‹ï¼Œæœ€å…¨çš„æŠ€æœ¯æ–‡æ¡£ã€‚&quot;, &quot;user_name&quot;: &quot;mark&quot;, &quot;status&quot;:&quot;active&quot;})WriteResult({ &quot;nInserted&quot; : 1 })&gt;db.posts.insert({ &quot;post_text&quot;: &quot;èœé¸Ÿæ•™ç¨‹ï¼Œæœ€å…¨çš„æŠ€æœ¯æ–‡æ¡£ã€‚&quot;, &quot;user_name&quot;: &quot;mark&quot;, &quot;status&quot;:&quot;disabled&quot;})WriteResult({ &quot;nInserted&quot; : 1 })&gt;db.posts.insert({ &quot;post_text&quot;: &quot;èœé¸Ÿæ•™ç¨‹ï¼Œæœ€å…¨çš„æŠ€æœ¯æ–‡æ¡£ã€‚&quot;, &quot;user_name&quot;: &quot;runoob&quot;, &quot;status&quot;:&quot;disabled&quot;})WriteResult({ &quot;nInserted&quot; : 1 })&gt;db.posts.insert({ &quot;post_text&quot;: &quot;èœé¸Ÿæ•™ç¨‹ï¼Œæœ€å…¨çš„æŠ€æœ¯æ–‡æ¡£ã€‚&quot;, &quot;user_name&quot;: &quot;runoob&quot;, &quot;status&quot;:&quot;disabled&quot;})WriteResult({ &quot;nInserted&quot; : 1 })&gt;db.posts.insert({ &quot;post_text&quot;: &quot;èœé¸Ÿæ•™ç¨‹ï¼Œæœ€å…¨çš„æŠ€æœ¯æ–‡æ¡£ã€‚&quot;, &quot;user_name&quot;: &quot;runoob&quot;, &quot;status&quot;:&quot;active&quot;})WriteResult({ &quot;nInserted&quot; : 1 }) ç°åœ¨ï¼Œæˆ‘ä»¬å°†åœ¨ posts é›†åˆä¸­ä½¿ç”¨ mapReduce å‡½æ•°æ¥é€‰å–å·²å‘å¸ƒçš„æ–‡ç« (status:&quot;active&quot;)ï¼Œå¹¶é€šè¿‡user_nameåˆ†ç»„ï¼Œè®¡ç®—æ¯ä¸ªç”¨æˆ·çš„æ–‡ç« æ•°ï¼š 12345678&gt;db.posts.mapReduce( function() { emit(this.user_name,1); }, function(key, values) {return Array.sum(values)}, { query:{status:&quot;active&quot;}, out:&quot;post_total&quot; }) ä»¥ä¸Š mapReduce è¾“å‡ºç»“æœä¸ºï¼š 1234567891011{ &quot;result&quot; : &quot;post_total&quot;, &quot;timeMillis&quot; : 23, &quot;counts&quot; : { &quot;input&quot; : 5, &quot;emit&quot; : 5, &quot;reduce&quot; : 1, &quot;output&quot; : 2 }, &quot;ok&quot; : 1} ç»“æœè¡¨æ˜ï¼Œå…±æœ‰ 5 ä¸ªç¬¦åˆæŸ¥è¯¢æ¡ä»¶ï¼ˆstatus:&quot;active&quot;ï¼‰çš„æ–‡æ¡£ï¼Œ åœ¨mapå‡½æ•°ä¸­ç”Ÿæˆäº† 5 ä¸ªé”®å€¼å¯¹æ–‡æ¡£ï¼Œæœ€åä½¿ç”¨reduceå‡½æ•°å°†ç›¸åŒçš„é”®å€¼åˆ†ä¸º 2 ç»„ã€‚ å…·ä½“å‚æ•°è¯´æ˜ï¼š resultï¼šå‚¨å­˜ç»“æœçš„collectionçš„åå­—,è¿™æ˜¯ä¸ªä¸´æ—¶é›†åˆï¼ŒMapReduceçš„è¿æ¥å…³é—­åè‡ªåŠ¨å°±è¢«åˆ é™¤äº†ã€‚ timeMillisï¼šæ‰§è¡ŒèŠ±è´¹çš„æ—¶é—´ï¼Œæ¯«ç§’ä¸ºå•ä½ inputï¼šæ»¡è¶³æ¡ä»¶è¢«å‘é€åˆ°mapå‡½æ•°çš„æ–‡æ¡£ä¸ªæ•° emitï¼šåœ¨mapå‡½æ•°ä¸­emitè¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰é›†åˆä¸­çš„æ•°æ®æ€»é‡ ouputï¼šç»“æœé›†åˆä¸­çš„æ–‡æ¡£ä¸ªæ•°**ï¼ˆcountå¯¹è°ƒè¯•éå¸¸æœ‰å¸®åŠ©ï¼‰** okï¼šæ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸä¸º1 errï¼šå¦‚æœå¤±è´¥ï¼Œè¿™é‡Œå¯ä»¥æœ‰å¤±è´¥åŸå› ï¼Œä¸è¿‡ä»ç»éªŒä¸Šæ¥çœ‹ï¼ŒåŸå› æ¯”è¾ƒæ¨¡ç³Šï¼Œä½œç”¨ä¸å¤§ ä½¿ç”¨ find æ“ä½œç¬¦æ¥æŸ¥çœ‹ mapReduce çš„æŸ¥è¯¢ç»“æœï¼š 12345678&gt;db.posts.mapReduce( function() { emit(this.user_name,1); }, function(key, values) {return Array.sum(values)}, { query:{status:&quot;active&quot;}, out:&quot;post_total&quot; }).find() ä»¥ä¸ŠæŸ¥è¯¢æ˜¾ç¤ºå¦‚ä¸‹ç»“æœ: 12{ &quot;_id&quot; : &quot;mark&quot;, &quot;value&quot; : 4 }{ &quot;_id&quot; : &quot;runoob&quot;, &quot;value&quot; : 1 } ç”¨ç±»ä¼¼çš„æ–¹å¼ï¼ŒMapReduceå¯ä»¥è¢«ç”¨æ¥æ„å»ºå¤§å‹å¤æ‚çš„èšåˆæŸ¥è¯¢ã€‚ Mapå‡½æ•°å’ŒReduceå‡½æ•°å¯ä»¥ä½¿ç”¨ JavaScript æ¥å®ç°ï¼Œä½¿å¾—MapReduceçš„ä½¿ç”¨éå¸¸çµæ´»å’Œå¼ºå¤§ã€‚ äºŒå…­ã€å…¨æ–‡æ£€ç´¢ å…¨æ–‡æ£€ç´¢å¯¹æ¯ä¸€ä¸ªè¯å»ºç«‹ä¸€ä¸ªç´¢å¼•ï¼ŒæŒ‡æ˜è¯¥è¯åœ¨æ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°å’Œä½ç½®ï¼Œå½“ç”¨æˆ·æŸ¥è¯¢æ—¶ï¼Œæ£€ç´¢ç¨‹åºå°±æ ¹æ®äº‹å…ˆå»ºç«‹çš„ç´¢å¼•è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¹¶å°†æŸ¥æ‰¾çš„ç»“æœåé¦ˆç»™ç”¨æˆ·çš„æ£€ç´¢æ–¹å¼ã€‚ è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼äºé€šè¿‡å­—å…¸ä¸­çš„æ£€ç´¢å­—è¡¨æŸ¥å­—çš„è¿‡ç¨‹ã€‚ MongoDB ä» 2.4 ç‰ˆæœ¬å¼€å§‹æ”¯æŒå…¨æ–‡æ£€ç´¢ï¼Œç›®å‰æ”¯æŒ15ç§è¯­è¨€çš„å…¨æ–‡ç´¢å¼•ã€‚ danish dutch english finnish french german hungarian italian norwegian portuguese romanian russian spanish swedish turkish å¯ç”¨å…¨æ–‡æ£€ç´¢ MongoDB åœ¨ 2.6 ç‰ˆæœ¬ä»¥åæ˜¯é»˜è®¤å¼€å¯å…¨æ–‡æ£€ç´¢çš„ï¼Œå¦‚æœä½ ä½¿ç”¨ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œä½ éœ€è¦ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥å¯ç”¨å…¨æ–‡æ£€ç´¢: 1&gt;db.adminCommand({setParameter:true,textSearchEnabled:true}) æˆ–è€…ä½¿ç”¨å‘½ä»¤ï¼š 1mongod --setParameter textSearchEnabled=true åˆ›å»ºå…¨æ–‡ç´¢å¼• è€ƒè™‘ä»¥ä¸‹ posts é›†åˆçš„æ–‡æ¡£æ•°æ®ï¼ŒåŒ…å«äº†æ–‡ç« å†…å®¹ï¼ˆpost_textï¼‰åŠæ ‡ç­¾(tags)ï¼š 1234567{ &quot;post_text&quot;: &quot;enjoy the mongodb articles on Runoob&quot;, &quot;tags&quot;: [ &quot;mongodb&quot;, &quot;runoob&quot; ]} æˆ‘ä»¬å¯ä»¥å¯¹ post_text å­—æ®µå»ºç«‹å…¨æ–‡ç´¢å¼•ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æœç´¢æ–‡ç« å†…çš„å†…å®¹ï¼š 1&gt;db.posts.ensureIndex({post_text:&quot;text&quot;}) ä½¿ç”¨å…¨æ–‡ç´¢å¼• ç°åœ¨æˆ‘ä»¬å·²ç»å¯¹ post_text å»ºç«‹äº†å…¨æ–‡ç´¢å¼•ï¼Œæˆ‘ä»¬å¯ä»¥æœç´¢æ–‡ç« ä¸­çš„å…³é”®è¯ runoobï¼š 1&gt;db.posts.find({$text:{$search:&quot;runoob&quot;}}) ä»¥ä¸‹å‘½ä»¤è¿”å›äº†å¦‚ä¸‹åŒ…å« runoob å…³é”®è¯çš„æ–‡æ¡£æ•°æ®ï¼š 12345{ &quot;_id&quot; : ObjectId(&quot;53493d14d852429c10000002&quot;), &quot;post_text&quot; : &quot;enjoy the mongodb articles on Runoob&quot;, &quot;tags&quot; : [ &quot;mongodb&quot;, &quot;runoob&quot; ]} å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬çš„ MongoDBï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1&gt;db.posts.runCommand(&quot;text&quot;,{search:&quot;runoob&quot;}) ä½¿ç”¨å…¨æ–‡ç´¢å¼•å¯ä»¥æé«˜æœç´¢æ•ˆç‡ã€‚ åˆ é™¤å…¨æ–‡ç´¢å¼• åˆ é™¤å·²å­˜åœ¨çš„å…¨æ–‡ç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨ find å‘½ä»¤æŸ¥æ‰¾ç´¢å¼•åï¼š 1&gt;db.posts.getIndexes() é€šè¿‡ä»¥ä¸Šå‘½ä»¤è·å–ç´¢å¼•åï¼Œæœ¬ä¾‹çš„ç´¢å¼•åä¸ºpost_text_textï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ é™¤ç´¢å¼•ï¼š 1&gt;db.posts.dropIndex(&quot;post_text_text&quot;) äºŒä¸ƒã€æ­£åˆ™è¡¨è¾¾å¼ æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä½¿ç”¨å•ä¸ªå­—ç¬¦ä¸²æ¥æè¿°ã€åŒ¹é…ä¸€ç³»åˆ—ç¬¦åˆæŸä¸ªå¥æ³•è§„åˆ™çš„å­—ç¬¦ä¸²ã€‚ è®¸å¤šç¨‹åºè®¾è®¡è¯­è¨€éƒ½æ”¯æŒåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œå­—ç¬¦ä¸²æ“ä½œã€‚ MongoDB ä½¿ç”¨ $regex æ“ä½œç¬¦æ¥è®¾ç½®åŒ¹é…å­—ç¬¦ä¸²çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ MongoDBä½¿ç”¨PCRE (Perl Compatible Regular Expression) ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼è¯­è¨€ã€‚ ä¸åŒäºå…¨æ–‡æ£€ç´¢ï¼Œæˆ‘ä»¬ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¸éœ€è¦åšä»»ä½•é…ç½®ã€‚ è€ƒè™‘ä»¥ä¸‹ posts é›†åˆçš„æ–‡æ¡£ç»“æ„ï¼Œè¯¥æ–‡æ¡£åŒ…å«äº†æ–‡ç« å†…å®¹å’Œæ ‡ç­¾ï¼š 1234567{ &quot;post_text&quot;: &quot;enjoy the mongodb articles on runoob&quot;, &quot;tags&quot;: [ &quot;mongodb&quot;, &quot;runoob&quot; ]} ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾åŒ…å« runoob å­—ç¬¦ä¸²çš„æ–‡ç« ï¼š 1&gt;db.posts.find({post_text:{$regex:&quot;runoob&quot;}}) ä»¥ä¸ŠæŸ¥è¯¢ä¹Ÿå¯ä»¥å†™ä¸ºï¼š 1&gt;db.posts.find({post_text:/runoob/}) ä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™è¡¨è¾¾å¼ å¦‚æœæ£€ç´¢éœ€è¦ä¸åŒºåˆ†å¤§å°å†™ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® $options ä¸º $iã€‚ ä»¥ä¸‹å‘½ä»¤å°†æŸ¥æ‰¾ä¸åŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ä¸² runoobï¼š 1&gt;db.posts.find({post_text:{$regex:&quot;runoob&quot;,$options:&quot;$i&quot;}}) é›†åˆä¸­ä¼šè¿”å›æ‰€æœ‰åŒ…å«å­—ç¬¦ä¸² runoob çš„æ•°æ®ï¼Œä¸”ä¸åŒºåˆ†å¤§å°å†™ï¼š 12345{ &quot;_id&quot; : ObjectId(&quot;53493d37d852429c10000004&quot;), &quot;post_text&quot; : &quot;hey! this is my post on runoob&quot;, &quot;tags&quot; : [ &quot;runoob&quot; ]} æ•°ç»„å…ƒç´ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ æˆ‘ä»¬è¿˜å¯ä»¥åœ¨æ•°ç»„å­—æ®µä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æŸ¥æ‰¾å†…å®¹ã€‚ è¿™åœ¨æ ‡ç­¾çš„å®ç°ä¸Šéå¸¸æœ‰ç”¨ï¼Œå¦‚æœä½ éœ€è¦æŸ¥æ‰¾åŒ…å«ä»¥ run å¼€å¤´çš„æ ‡ç­¾æ•°æ®(ru æˆ– run æˆ– runoob)ï¼Œ ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š 1&gt;db.posts.find({tags:{$regex:&quot;run&quot;}}) ä¼˜åŒ–æ­£åˆ™è¡¨è¾¾å¼æŸ¥è¯¢ å¦‚æœä½ çš„æ–‡æ¡£ä¸­å­—æ®µè®¾ç½®äº†ç´¢å¼•ï¼Œé‚£ä¹ˆä½¿ç”¨ç´¢å¼•ç›¸æ¯”äºæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æŸ¥æ‰¾æ‰€æœ‰çš„æ•°æ®æŸ¥è¯¢é€Ÿåº¦æ›´å¿«ã€‚ å¦‚æœæ­£åˆ™è¡¨è¾¾å¼æ˜¯å‰ç¼€è¡¨è¾¾å¼ï¼Œæ‰€æœ‰åŒ¹é…çš„æ•°æ®å°†ä»¥æŒ‡å®šçš„å‰ç¼€å­—ç¬¦ä¸²ä¸ºå¼€å§‹ã€‚ä¾‹å¦‚ï¼š å¦‚æœæ­£åˆ™è¡¨è¾¾å¼ä¸º ^tut ï¼ŒæŸ¥è¯¢è¯­å¥å°†æŸ¥æ‰¾ä»¥ tut ä¸ºå¼€å¤´çš„å­—ç¬¦ä¸²ã€‚ è¿™é‡Œé¢ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨å˜é‡ã€‚ä¸€å®šè¦ä½¿ç”¨evalå°†ç»„åˆçš„å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢ï¼Œä¸èƒ½ç›´æ¥å°†å­—ç¬¦ä¸²æ‹¼æ¥åä¼ å…¥ç»™è¡¨è¾¾å¼ã€‚å¦åˆ™æ²¡æœ‰æŠ¥é”™ä¿¡æ¯ï¼Œåªæ˜¯ç»“æœä¸ºç©ºï¼å®ä¾‹å¦‚ä¸‹ï¼š 1var name=eval(&quot;/&quot; + å˜é‡å€¼key +&quot;/i&quot;); ä»¥ä¸‹æ˜¯æ¨¡ç³ŠæŸ¥è¯¢åŒ…å«titleå…³é”®è¯, ä¸”ä¸åŒºåˆ†å¤§å°å†™: 1title:eval(&quot;/&quot;+title+&quot;/i&quot;) // ç­‰åŒäº title:{$regex:title,$Option:&quot;$i&quot;} äºŒå…«ã€ç®¡ç†å·¥å…·: Rockmongo RockMongoæ˜¯PHP5å†™çš„ä¸€ä¸ªMongoDBç®¡ç†å·¥å…·ã€‚ é€šè¿‡ Rockmongo ä½ å¯ä»¥ç®¡ç† MongoDBæœåŠ¡ï¼Œæ•°æ®åº“ï¼Œé›†åˆï¼Œæ–‡æ¡£ï¼Œç´¢å¼•ç­‰ç­‰ã€‚ å®ƒæä¾›äº†éå¸¸äººæ€§åŒ–çš„æ“ä½œã€‚ç±»ä¼¼ phpMyAdminï¼ˆPHPå¼€å‘çš„MySqlç®¡ç†å·¥å…·ï¼‰ã€‚ Rockmongo ä¸‹è½½åœ°å€ï¼šhttps://github.com/iwind/rockmongo ç®€ä»‹ ä¸»è¦ç‰¹å¾ï¼š ä½¿ç”¨å®½æ¾çš„New BSD Licenseåè®® é€Ÿåº¦å¿«ï¼Œå®‰è£…ç®€å• æ”¯æŒå¤šè¯­è¨€ï¼ˆç›®å‰æä¾›ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ã€å·´è¥¿è‘¡è„ç‰™è¯­ã€æ³•è¯­ã€å¾·è¯­ã€ä¿„è¯­ã€æ„å¤§åˆ©è¯­ï¼‰ ç³»ç»Ÿ å¯ä»¥é…ç½®å¤šä¸ªä¸»æœºï¼Œæ¯ä¸ªä¸»æœºå¯ä»¥æœ‰å¤šä¸ªç®¡ç†å‘˜ éœ€è¦ç®¡ç†å‘˜å¯†ç æ‰èƒ½ç™»å…¥æ“ä½œï¼Œç¡®ä¿æ•°æ®åº“çš„å®‰å…¨æ€§ æœåŠ¡å™¨ æœåŠ¡å™¨ä¿¡æ¯ (WEBæœåŠ¡å™¨, PHP, PHP.iniç›¸å…³æŒ‡ä»¤ ...) çŠ¶æ€ æ•°æ®åº“ä¿¡æ¯ æ•°æ®åº“ æŸ¥è¯¢ï¼Œåˆ›å»ºå’Œåˆ é™¤ æ‰§è¡Œå‘½ä»¤å’ŒJavascriptä»£ç  ç»Ÿè®¡ä¿¡æ¯ é›†åˆï¼ˆç›¸å½“äºè¡¨ï¼‰ å¼ºå¤§çš„æŸ¥è¯¢å·¥å…· è¯»æ•°æ®ï¼Œå†™æ•°æ®ï¼Œæ›´æ”¹æ•°æ®ï¼Œå¤åˆ¶æ•°æ®ï¼Œåˆ é™¤æ•°æ® æŸ¥è¯¢ã€åˆ›å»ºå’Œåˆ é™¤ç´¢å¼• æ¸…ç©ºæ•°æ® æ‰¹é‡åˆ é™¤å’Œæ›´æ”¹æ•°æ® ç»Ÿè®¡ä¿¡æ¯ GridFS æŸ¥çœ‹åˆ†å— ä¸‹è½½æ–‡ä»¶ å®‰è£… éœ€æ±‚ ä¸€ä¸ªèƒ½è¿è¡ŒPHPçš„WebæœåŠ¡å™¨ï¼Œæ¯”å¦‚Apache Httpd, Nginx ... PHP - éœ€è¦PHP v5.1.6æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œéœ€è¦æ”¯æŒSESSION ä¸ºäº†èƒ½è¿æ¥MongoDBï¼Œä½ éœ€è¦å®‰è£…php_mongoæ‰©å±• å¿«é€Ÿå®‰è£… ä¸‹è½½å®‰è£…åŒ… è§£å‹åˆ°ä½ çš„ç½‘ç«™ç›®å½•ä¸‹ ç”¨ç¼–è¾‘å™¨æ‰“å¼€config.phpï¼Œä¿®æ”¹host, port, adminsç­‰å‚æ•° åœ¨æµè§ˆå™¨ä¸­è®¿é—®index.phpï¼Œæ¯”å¦‚è¯´ï¼šhttp://localhost/rockmongo/index.php ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ç™»å½•ï¼Œé»˜è®¤ä¸º&quot;admin&quot;å’Œ&quot;admin&quot; å¼€å§‹ç©è½¬MongoDB! äºŒä¹ã€GridFS GridFS ç”¨äºå­˜å‚¨å’Œæ¢å¤é‚£äº›è¶…è¿‡16Mï¼ˆBSONæ–‡ä»¶é™åˆ¶ï¼‰çš„æ–‡ä»¶(å¦‚ï¼šå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰)ã€‚ GridFS ä¹Ÿæ˜¯æ–‡ä»¶å­˜å‚¨çš„ä¸€ç§æ–¹å¼ï¼Œä½†æ˜¯å®ƒæ˜¯å­˜å‚¨åœ¨MonoDBçš„é›†åˆä¸­ã€‚ GridFS å¯ä»¥æ›´å¥½çš„å­˜å‚¨å¤§äº16Mçš„æ–‡ä»¶ã€‚ GridFS ä¼šå°†å¤§æ–‡ä»¶å¯¹è±¡åˆ†å‰²æˆå¤šä¸ªå°çš„chunk(æ–‡ä»¶ç‰‡æ®µ),ä¸€èˆ¬ä¸º256k/ä¸ª,æ¯ä¸ªchunkå°†ä½œä¸ºMongoDBçš„ä¸€ä¸ªæ–‡æ¡£(document)è¢«å­˜å‚¨åœ¨chunksé›†åˆä¸­ã€‚ GridFS ç”¨ä¸¤ä¸ªé›†åˆæ¥å­˜å‚¨ä¸€ä¸ªæ–‡ä»¶ï¼šfs.filesä¸fs.chunksã€‚ æ¯ä¸ªæ–‡ä»¶çš„å®é™…å†…å®¹è¢«å­˜åœ¨chunks(äºŒè¿›åˆ¶æ•°æ®)ä¸­,å’Œæ–‡ä»¶æœ‰å…³çš„metaæ•°æ®(filename,content_type,è¿˜æœ‰ç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§)å°†ä¼šè¢«å­˜åœ¨filesé›†åˆä¸­ã€‚ ä»¥ä¸‹æ˜¯ç®€å•çš„ fs.files é›†åˆæ–‡æ¡£ï¼š 1234567{ &quot;filename&quot;: &quot;test.txt&quot;, &quot;chunkSize&quot;: NumberInt(261120), &quot;uploadDate&quot;: ISODate(&quot;2014-04-13T11:32:33.557Z&quot;), &quot;md5&quot;: &quot;7b762939321e146569b07f72c62cca4f&quot;, &quot;length&quot;: NumberInt(646)} ä»¥ä¸‹æ˜¯ç®€å•çš„ fs.chunks é›†åˆæ–‡æ¡£ï¼š 12345{ &quot;files_id&quot;: ObjectId(&quot;534a75d19f54bfec8a2fe44b&quot;), &quot;n&quot;: NumberInt(0), &quot;data&quot;: &quot;Mongo Binary Data&quot;} GridFS æ·»åŠ æ–‡ä»¶ ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ GridFS çš„ put å‘½ä»¤æ¥å­˜å‚¨ mp3 æ–‡ä»¶ã€‚ è°ƒç”¨ MongoDB å®‰è£…ç›®å½•ä¸‹binçš„ mongofiles.exeå·¥å…·ã€‚ æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¿›å…¥åˆ°MongoDBçš„å®‰è£…ç›®å½•çš„binç›®å½•ä¸­ï¼Œæ‰¾åˆ°mongofiles.exeï¼Œå¹¶è¾“å…¥ä¸‹é¢çš„ä»£ç ï¼š 1&gt;mongofiles.exe -d gridfs put song.mp3 -d gridfs æŒ‡å®šå­˜å‚¨æ–‡ä»¶çš„æ•°æ®åº“åç§°ï¼Œå¦‚æœä¸å­˜åœ¨è¯¥æ•°æ®åº“ï¼ŒMongoDBä¼šè‡ªåŠ¨åˆ›å»ºã€‚å¦‚æœä¸å­˜åœ¨è¯¥æ•°æ®åº“ï¼ŒMongoDBä¼šè‡ªåŠ¨åˆ›å»ºã€‚Song.mp3 æ˜¯éŸ³é¢‘æ–‡ä»¶åã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ•°æ®åº“ä¸­æ–‡ä»¶çš„æ–‡æ¡£ï¼š 1&gt;db.fs.files.find() ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œåè¿”å›ä»¥ä¸‹æ–‡æ¡£æ•°æ®ï¼š 1234567{ _id: ObjectId('534a811bf8b4aa4d33fdf94d'), filename: &quot;song.mp3&quot;, chunkSize: 261120, uploadDate: new Date(1397391643474), md5: &quot;e4f53379c909f7bed2e9d631e15c1c41&quot;, length: 10401959 } æˆ‘ä»¬å¯ä»¥çœ‹åˆ° fs.chunks é›†åˆä¸­æ‰€æœ‰çš„åŒºå—ï¼Œä»¥ä¸‹æˆ‘ä»¬å¾—åˆ°äº†æ–‡ä»¶çš„ _id å€¼ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ª _id è·å–åŒºå—(chunk)çš„æ•°æ®ï¼š 1&gt;db.fs.chunks.find({files_id:ObjectId('534a811bf8b4aa4d33fdf94d')}) ä»¥ä¸Šå®ä¾‹ä¸­ï¼ŒæŸ¥è¯¢è¿”å›äº† 40 ä¸ªæ–‡æ¡£çš„æ•°æ®ï¼Œæ„å‘³ç€mp3æ–‡ä»¶è¢«å­˜å‚¨åœ¨40ä¸ªåŒºå—ä¸­ã€‚ ä¸‰åã€å›ºå®šé›†åˆï¼ˆCapped Collectionsï¼‰ MongoDB å›ºå®šé›†åˆï¼ˆCapped Collectionsï¼‰æ˜¯æ€§èƒ½å‡ºè‰²ä¸”æœ‰ç€å›ºå®šå¤§å°çš„é›†åˆï¼Œå¯¹äºå¤§å°å›ºå®šï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡å…¶å°±åƒä¸€ä¸ªç¯å½¢é˜Ÿåˆ—ï¼Œå½“é›†åˆç©ºé—´ç”¨å®Œåï¼Œå†æ’å…¥çš„å…ƒç´ å°±ä¼šè¦†ç›–æœ€åˆå§‹çš„å¤´éƒ¨çš„å…ƒç´ ï¼ åˆ›å»ºå›ºå®šé›†åˆ æˆ‘ä»¬é€šè¿‡createCollectionæ¥åˆ›å»ºä¸€ä¸ªå›ºå®šé›†åˆï¼Œä¸”cappedé€‰é¡¹è®¾ç½®ä¸ºtrueï¼š 1&gt;db.createCollection(&quot;cappedLogCollection&quot;,{capped:true,size:10000}) è¿˜å¯ä»¥æŒ‡å®šæ–‡æ¡£ä¸ªæ•°,åŠ ä¸Šmax:1000å±æ€§ï¼š 1&gt;db.createCollection(&quot;cappedLogCollection&quot;,{capped:true,size:10000,max:1000}) åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºå›ºå®šé›†åˆ: 1&gt;db.cappedLogCollection.isCapped() å¦‚æœéœ€è¦å°†å·²å­˜åœ¨çš„é›†åˆè½¬æ¢ä¸ºå›ºå®šé›†åˆå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1&gt;db.runCommand({&quot;convertToCapped&quot;:&quot;posts&quot;,size:10000}) ä»¥ä¸Šä»£ç å°†æˆ‘ä»¬å·²å­˜åœ¨çš„ posts é›†åˆè½¬æ¢ä¸ºå›ºå®šé›†åˆã€‚ å›ºå®šé›†åˆæŸ¥è¯¢ å›ºå®šé›†åˆæ–‡æ¡£æŒ‰ç…§æ’å…¥é¡ºåºå‚¨å­˜çš„,é»˜è®¤æƒ…å†µä¸‹æŸ¥è¯¢å°±æ˜¯æŒ‰ç…§æ’å…¥é¡ºåºè¿”å›çš„,ä¹Ÿå¯ä»¥ä½¿ç”¨$naturalè°ƒæ•´è¿”å›é¡ºåºã€‚ 1&gt;db.cappedLogCollection.find().sort({$natural:-1}) å›ºå®šé›†åˆçš„åŠŸèƒ½ç‰¹ç‚¹ å¯ä»¥æ’å…¥åŠæ›´æ–°,ä½†æ›´æ–°ä¸èƒ½è¶…å‡ºcollectionçš„å¤§å°,å¦åˆ™æ›´æ–°å¤±è´¥,ä¸å…è®¸åˆ é™¤,ä½†æ˜¯å¯ä»¥è°ƒç”¨drop()åˆ é™¤é›†åˆä¸­çš„æ‰€æœ‰è¡Œ,ä½†æ˜¯dropåéœ€è¦æ˜¾å¼åœ°é‡å»ºé›†åˆã€‚ åœ¨32ä½æœºå­ä¸Šä¸€ä¸ªcappped collectionçš„æœ€å¤§å€¼çº¦ä¸º482.5M,64ä½ä¸Šåªå—ç³»ç»Ÿæ–‡ä»¶å¤§å°çš„é™åˆ¶ã€‚ å›ºå®šé›†åˆå±æ€§åŠç”¨æ³• å±æ€§ å±æ€§1:å¯¹å›ºå®šé›†åˆè¿›è¡Œæ’å…¥é€Ÿåº¦æå¿« å±æ€§2:æŒ‰ç…§æ’å…¥é¡ºåºçš„æŸ¥è¯¢è¾“å‡ºé€Ÿåº¦æå¿« å±æ€§3:èƒ½å¤Ÿåœ¨æ’å…¥æœ€æ–°æ•°æ®æ—¶,æ·˜æ±°æœ€æ—©çš„æ•°æ® ç”¨æ³• ç”¨æ³•1:å‚¨å­˜æ—¥å¿—ä¿¡æ¯ ç”¨æ³•2:ç¼“å­˜ä¸€äº›å°‘é‡çš„æ–‡æ¡£ ä¸‰ä¸€ã€è‡ªåŠ¨å¢é•¿ MongoDB æ²¡æœ‰åƒ SQL ä¸€æ ·æœ‰è‡ªåŠ¨å¢é•¿çš„åŠŸèƒ½ï¼Œ MongoDB çš„ _id æ˜¯ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„12å­—èŠ‚å”¯ä¸€æ ‡è¯†ã€‚ ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å®ç° ObjectId è‡ªåŠ¨å¢é•¿åŠŸèƒ½ã€‚ ç”±äº MongoDB æ²¡æœ‰å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼æ¥å®ç°ï¼Œä»¥ä¸‹æˆ‘ä»¬å°†åœ¨ counters é›†åˆä¸­å®ç°_idå­—æ®µè‡ªåŠ¨å¢é•¿ã€‚ ä½¿ç”¨ counters é›†åˆ è€ƒè™‘ä»¥ä¸‹ products æ–‡æ¡£ã€‚æˆ‘ä»¬å¸Œæœ› _id å­—æ®µå®ç° ä» 1,2,3,4 åˆ° n çš„è‡ªåŠ¨å¢é•¿åŠŸèƒ½ã€‚ 12345{ &quot;_id&quot;:1, &quot;product_name&quot;: &quot;Apple iPhone&quot;, &quot;category&quot;: &quot;mobiles&quot;} ä¸ºæ­¤ï¼Œåˆ›å»º counters é›†åˆï¼Œåºåˆ—å­—æ®µå€¼å¯ä»¥å®ç°è‡ªåŠ¨é•¿ï¼š 1&gt;db.createCollection(&quot;counters&quot;) ç°åœ¨æˆ‘ä»¬å‘ counters é›†åˆä¸­æ’å…¥ä»¥ä¸‹æ–‡æ¡£ï¼Œä½¿ç”¨ productid ä½œä¸º key: 1234{ &quot;_id&quot;:&quot;productid&quot;, &quot;sequence_value&quot;: 0} sequence_value å­—æ®µæ˜¯åºåˆ—é€šè¿‡è‡ªåŠ¨å¢é•¿åçš„ä¸€ä¸ªå€¼ã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ’å…¥ counters é›†åˆçš„åºåˆ—æ–‡æ¡£ä¸­ï¼š 1&gt;db.counters.insert({_id:&quot;productid&quot;,sequence_value:0}) åˆ›å»º Javascript å‡½æ•° ç°åœ¨ï¼Œæˆ‘ä»¬åˆ›å»ºå‡½æ•° getNextSequenceValue æ¥ä½œä¸ºåºåˆ—åçš„è¾“å…¥ï¼Œ æŒ‡å®šçš„åºåˆ—ä¼šè‡ªåŠ¨å¢é•¿ 1 å¹¶è¿”å›æœ€æ–°åºåˆ—å€¼ã€‚åœ¨æœ¬æ–‡çš„å®ä¾‹ä¸­åºåˆ—åä¸º productid ã€‚ 123456789&gt;function getNextSequenceValue(sequenceName){ var sequenceDocument = db.counters.findAndModify( { query:{_id: sequenceName }, update: {$inc:{sequence_value:1}}, &quot;new&quot;:true }); return sequenceDocument.sequence_value;} ä½¿ç”¨ Javascript å‡½æ•° æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä½¿ç”¨ getNextSequenceValue å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡æ¡£ï¼Œ å¹¶è®¾ç½®æ–‡æ¡£ _id è‡ªåŠ¨ä¸ºè¿”å›çš„åºåˆ—å€¼ï¼š 123456789&gt;db.products.insert({ &quot;_id&quot;:getNextSequenceValue(&quot;productid&quot;), &quot;product_name&quot;:&quot;Apple iPhone&quot;, &quot;category&quot;:&quot;mobiles&quot;})&gt;db.products.insert({ &quot;_id&quot;:getNextSequenceValue(&quot;productid&quot;), &quot;product_name&quot;:&quot;Samsung S3&quot;, &quot;category&quot;:&quot;mobiles&quot;}) å°±å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ getNextSequenceValue å‡½æ•°æ¥è®¾ç½® _id å­—æ®µã€‚ ä¸ºäº†éªŒè¯å‡½æ•°æ˜¯å¦æœ‰æ•ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¯»å–æ–‡æ¡£ï¼š 1&gt;db.products.find() ä»¥ä¸Šå‘½ä»¤å°†è¿”å›ä»¥ä¸‹ç»“æœï¼Œæˆ‘ä»¬å‘ç° _id å­—æ®µæ˜¯è‡ªå¢é•¿çš„ï¼š 123{ &quot;_id&quot; : 1, &quot;product_name&quot; : &quot;Apple iPhone&quot;, &quot;category&quot; : &quot;mobiles&quot;}{ &quot;_id&quot; : 2, &quot;product_name&quot; : &quot;Samsung S3&quot;, &quot;category&quot; : &quot;mobiles&quot; }","link":"/2022/03/10/Draft/2021/MongoDB/"},{"title":"MYSQLä¼˜åŒ–","text":"MySqlçŸ¥è¯†åŠä¼˜åŒ– ç›¸å…³èµ„æºï¼šbiliè§†é¢‘ã€å®˜æ–¹æ–‡æ¡£ MySQLåŸºç¡€ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ•°æ®åº“ å†…å­˜ ä¼˜ï¼š å­˜å–é€Ÿåº¦å¿«ï¼›ç¼ºï¼š æ•°æ®ä¸èƒ½æ°¸ä¹…ä¿å­˜ æ–‡ä»¶ ä¼˜ï¼š æ•°æ®æ°¸ä¹…ä¿å­˜ï¼›ç¼ºï¼š1ï¼‰é€Ÿåº¦æ¯”å†…å­˜æ“ä½œæ…¢ï¼Œé¢‘ç¹çš„IOæ“ä½œ 2ï¼‰æŸ¥è¯¢ä¸æ–¹ä¾¿ æ•°æ®åº“ 1ï¼‰æ•°æ®æ°¸ä¹…ä¿å­˜ 2ï¼‰ä½¿ç”¨SQLè¯­å¥ï¼ŒæŸ¥è¯¢æ–¹ä¾¿æ•ˆç‡é«˜ã€‚3ï¼‰ç®¡ç†æ•°æ®æ–¹ä¾¿ ä»€ä¹ˆæ˜¯SQLï¼Ÿ ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€(Structured Query Language)ï¼Œç”¨äºå­˜å–æ•°æ®ã€æŸ¥è¯¢ã€æ›´æ–°å’Œç®¡ç†å…³ç³»æ•°æ®åº“ç³»ç»Ÿçš„æ•°æ®åº“æŸ¥è¯¢è¯­è¨€ ä»€ä¹ˆæ˜¯MySQL? å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ æ•°æ®åº“ä¸‰å¤§èŒƒå¼æ˜¯ä»€ä¹ˆ ç¬¬ä¸€èŒƒå¼ï¼šæ¯ä¸ªåˆ—éƒ½ä¸å¯ä»¥å†æ‹†åˆ†ã€‚ ç¬¬äºŒèŒƒå¼ï¼šåœ¨ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Šï¼Œéä¸»é”®åˆ—å®Œå…¨ä¾èµ–äºä¸»é”®ï¼Œè€Œä¸èƒ½æ˜¯ä¾èµ–äºä¸»é”®çš„ä¸€éƒ¨åˆ†ã€‚ ç¬¬ä¸‰èŒƒå¼ï¼šåœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šï¼Œéä¸»é”®åˆ—åªä¾èµ–äºä¸»é”®ï¼Œä¸ä¾èµ–äºå…¶ä»–éä¸»é”®ã€‚ åœ¨è®¾è®¡æ•°æ®åº“ç»“æ„çš„æ—¶å€™ï¼Œè¦å°½é‡éµå®ˆä¸‰èŒƒå¼ï¼Œå¦‚æœä¸éµå®ˆï¼Œå¿…é¡»æœ‰è¶³å¤Ÿçš„ç†ç”±ã€‚æ¯”å¦‚æ€§èƒ½ã€‚äº‹å®ä¸Šæˆ‘ä»¬ç»å¸¸ä¼šä¸ºäº†æ€§èƒ½è€Œå¦¥åæ•°æ®åº“çš„è®¾è®¡ã€‚ mysqlæœ‰å…³æƒé™çš„è¡¨éƒ½æœ‰å“ªå‡ ä¸ª MySQLæœåŠ¡å™¨é€šè¿‡æƒé™è¡¨æ¥æ§åˆ¶ç”¨æˆ·å¯¹æ•°æ®åº“çš„è®¿é—®ï¼Œæƒé™è¡¨å­˜æ”¾åœ¨mysqlæ•°æ®åº“é‡Œï¼Œç”±mysql_install_dbè„šæœ¬åˆå§‹åŒ–ã€‚è¿™äº›æƒé™è¡¨åˆ†åˆ«userï¼Œdbï¼Œtable_privï¼Œcolumns_privå’Œhostã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸€ä¸‹è¿™äº›è¡¨çš„ç»“æ„å’Œå†…å®¹ï¼š useræƒé™è¡¨ï¼šè®°å½•å…è®¸è¿æ¥åˆ°æœåŠ¡å™¨çš„ç”¨æˆ·å¸å·ä¿¡æ¯ï¼Œé‡Œé¢çš„æƒé™æ˜¯å…¨å±€çº§çš„ã€‚ dbæƒé™è¡¨ï¼šè®°å½•å„ä¸ªå¸å·åœ¨å„ä¸ªæ•°æ®åº“ä¸Šçš„æ“ä½œæƒé™ã€‚ table_privæƒé™è¡¨ï¼šè®°å½•æ•°æ®è¡¨çº§çš„æ“ä½œæƒé™ã€‚ columns_privæƒé™è¡¨ï¼šè®°å½•æ•°æ®åˆ—çº§çš„æ“ä½œæƒé™ã€‚ hostæƒé™è¡¨ï¼šé…åˆdbæƒé™è¡¨å¯¹ç»™å®šä¸»æœºä¸Šæ•°æ®åº“çº§æ“ä½œæƒé™ä½œæ›´ç»†è‡´çš„æ§åˆ¶ã€‚è¿™ä¸ªæƒé™è¡¨ä¸å—GRANTå’ŒREVOKEè¯­å¥çš„å½±å“ã€‚ MySQLçš„binlogæœ‰æœ‰å‡ ç§å½•å…¥æ ¼å¼ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ æœ‰ä¸‰ç§æ ¼å¼ï¼Œstatementï¼Œrowå’Œmixedã€‚ statementæ¨¡å¼ä¸‹ï¼Œæ¯ä¸€æ¡ä¼šä¿®æ”¹æ•°æ®çš„sqléƒ½ä¼šè®°å½•åœ¨binlogä¸­ã€‚ä¸éœ€è¦è®°å½•æ¯ä¸€è¡Œçš„å˜åŒ–ï¼Œå‡å°‘äº†binlogæ—¥å¿—é‡ï¼ŒèŠ‚çº¦äº†IOï¼Œæé«˜æ€§èƒ½ã€‚ç”±äºsqlçš„æ‰§è¡Œæ˜¯æœ‰ä¸Šä¸‹æ–‡çš„ï¼Œå› æ­¤åœ¨ä¿å­˜çš„æ—¶å€™éœ€è¦ä¿å­˜ç›¸å…³çš„ä¿¡æ¯ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€äº›ä½¿ç”¨äº†å‡½æ•°ä¹‹ç±»çš„è¯­å¥æ— æ³•è¢«è®°å½•å¤åˆ¶ã€‚ rowçº§åˆ«ä¸‹ï¼Œä¸è®°å½•sqlè¯­å¥ä¸Šä¸‹æ–‡ç›¸å…³ä¿¡æ¯ï¼Œä»…ä¿å­˜å“ªæ¡è®°å½•è¢«ä¿®æ”¹ã€‚è®°å½•å•å…ƒä¸ºæ¯ä¸€è¡Œçš„æ”¹åŠ¨ï¼ŒåŸºæœ¬æ˜¯å¯ä»¥å…¨éƒ¨è®°ä¸‹æ¥ä½†æ˜¯ç”±äºå¾ˆå¤šæ“ä½œï¼Œä¼šå¯¼è‡´å¤§é‡è¡Œçš„æ”¹åŠ¨(æ¯”å¦‚alter table)ï¼Œå› æ­¤è¿™ç§æ¨¡å¼çš„æ–‡ä»¶ä¿å­˜çš„ä¿¡æ¯å¤ªå¤šï¼Œæ—¥å¿—é‡å¤ªå¤§ã€‚ mixedï¼Œä¸€ç§æŠ˜ä¸­çš„æ–¹æ¡ˆï¼Œæ™®é€šæ“ä½œä½¿ç”¨statementè®°å½•ï¼Œå½“æ— æ³•ä½¿ç”¨statementçš„æ—¶å€™ä½¿ç”¨rowã€‚ æ­¤å¤–ï¼Œæ–°ç‰ˆçš„MySQLä¸­å¯¹rowçº§åˆ«ä¹Ÿåšäº†ä¸€äº›ä¼˜åŒ–ï¼Œå½“è¡¨ç»“æ„å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¼šè®°å½•è¯­å¥è€Œä¸æ˜¯é€è¡Œè®°å½•ã€‚ æ‰§è¡Œé¡ºåº ![desc](file:///C:/Users/ADMINI~1/AppData/Local/Temp/msohtmlclip1/01/clip_image002.png) CREATEï¼ˆdropï¼Œuseï¼‰ DATABASE æ•°æ®åº“å; CREATE TABLE IF NOT EXISTS runoob_tbl( runoob_id INT UNSIGNED AUTO_INCREMENT, runoob_title VARCHAR(100) NOT NULL, runoob_author VARCHAR(40) NOT NULL, submission_date DATE, PRIMARY KEY ( runoob_id ) )ENGINE=InnoDB DEFAULT CHARSET=utf8; å¢åˆ æ”¹æŸ¥ â€¢ INSERT INTO table_name ( field1, field2,...fieldN ) VALUES ( value1, value2,...valueN )ï¼Œ ( value11, value22,...valueNN ); â€¢ SELECT column_name,column_name FROM table_name [WHERE condition1 [AND [OR]] condition2 field1 LIKE condition1 [AND [OR]] filed2 = 'somevalue'][LIMIT N][ OFFSET M] æŸ¥è¯¢è¯­å¥ä¸­ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¡¨ï¼Œè¡¨ä¹‹é—´ä½¿ç”¨é€—å·(,)åˆ†å‰²ï¼Œå¹¶ä½¿ç”¨WHEREè¯­å¥æ¥è®¾å®šæŸ¥è¯¢æ¡ä»¶ã€‚ SELECT å‘½ä»¤å¯ä»¥è¯»å–ä¸€æ¡æˆ–è€…å¤šæ¡è®°å½•ã€‚ ä½ å¯ä»¥ä½¿ç”¨æ˜Ÿå·ï¼ˆ*ï¼‰æ¥ä»£æ›¿å…¶ä»–å­—æ®µï¼ŒSELECTè¯­å¥ä¼šè¿”å›è¡¨çš„æ‰€æœ‰å­—æ®µæ•°æ® ä½ å¯ä»¥ä½¿ç”¨ WHERE è¯­å¥æ¥åŒ…å«ä»»ä½•æ¡ä»¶ï¼Œä½¿ç”¨ AND æˆ–è€… OR æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ã€‚ ä½ å¯ä»¥ä½¿ç”¨LIKEå­å¥ä»£æ›¿ç­‰å· =ã€‚- ä»£è¡¨å•ä¸ªï¼Œ% è¡¨ç¤ºä»»æ„ 0 ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚å¯åŒ¹é…ä»»æ„ç±»å‹å’Œé•¿åº¦çš„å­—ç¬¦ï¼Œæœ‰äº›æƒ…å†µä¸‹è‹¥æ˜¯ä¸­æ–‡ï¼Œè¯·ä½¿ç”¨ä¸¤ä¸ªç™¾åˆ†å·ï¼ˆ%%ï¼‰è¡¨ç¤ºã€‚[]ï¼šè¡¨ç¤ºæ‹¬å·å†…æ‰€åˆ—å­—ç¬¦ä¸­çš„ä¸€ä¸ªï¼ˆç±»ä¼¼æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚æŒ‡å®šä¸€ä¸ªå­—ç¬¦ã€å­—ç¬¦ä¸²æˆ–èŒƒå›´ï¼Œè¦æ±‚æ‰€åŒ¹é…å¯¹è±¡ä¸ºå®ƒä»¬ä¸­çš„ä»»ä¸€ä¸ªã€‚[^] ï¼šè¡¨ç¤ºä¸åœ¨æ‹¬å·æ‰€åˆ—ä¹‹å†…çš„å•ä¸ªå­—ç¬¦ã€‚å…¶å–å€¼å’Œ [] ç›¸åŒï¼Œä½†å®ƒè¦æ±‚æ‰€åŒ¹é…å¯¹è±¡ä¸ºæŒ‡å®šå­—ç¬¦ä»¥å¤–çš„ä»»ä¸€ä¸ªå­—ç¬¦ã€‚ æŸ¥è¯¢å†…å®¹åŒ…å«é€šé…ç¬¦æ—¶,ç”±äºé€šé…ç¬¦çš„ç¼˜æ•…ï¼Œå¯¼è‡´æˆ‘ä»¬æŸ¥è¯¢ç‰¹æ®Šå­—ç¬¦ â€œ%â€ã€â€œ_â€ã€â€œ[â€ çš„è¯­å¥æ— æ³•æ­£å¸¸å®ç°ï¼Œè€ŒæŠŠç‰¹æ®Šå­—ç¬¦ç”¨ â€œ[ ]â€ æ‹¬èµ·ä¾¿å¯æ­£å¸¸æŸ¥è¯¢ã€‚ ä½ å¯ä»¥ä½¿ç”¨ LIMIT å±æ€§æ¥è®¾å®šè¿”å›çš„è®°å½•æ•°ã€‚ ä½ å¯ä»¥é€šè¿‡OFFSETæŒ‡å®šSELECTè¯­å¥å¼€å§‹æŸ¥è¯¢çš„æ•°æ®åç§»é‡ã€‚é»˜è®¤æƒ…å†µä¸‹åç§»é‡ä¸º0ã€‚ â€¢ SELECT expression1, expression2, ... expression_n FROM tables [WHERE conditions] UNION [ALL | DISTINCT] SELECT expression1, expression2, ... expression_n FROM tables [WHERE conditions]; UNION æ“ä½œç¬¦ç”¨äºè¿æ¥ä¸¤ä¸ªä»¥ä¸Šçš„ SELECT è¯­å¥çš„ç»“æœç»„åˆåˆ°ä¸€ä¸ªç»“æœé›†åˆä¸­ã€‚å¤šä¸ª SELECT è¯­å¥ä¼šåˆ é™¤é‡å¤çš„æ•°æ®ã€‚ expression1, expression2, ... expression_n: è¦æ£€ç´¢çš„åˆ—ã€‚ tables: è¦æ£€ç´¢çš„æ•°æ®è¡¨ã€‚ WHERE conditions: å¯é€‰ï¼Œ æ£€ç´¢æ¡ä»¶ã€‚ DISTINCT: å¯é€‰ï¼Œåˆ é™¤ç»“æœé›†ä¸­é‡å¤çš„æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ UNION æ“ä½œç¬¦å·²ç»åˆ é™¤äº†é‡å¤æ•°æ®ï¼Œæ‰€ä»¥ DISTINCT ä¿®é¥°ç¬¦å¯¹ç»“æœæ²¡å•¥å½±å“ã€‚ ALL: å¯é€‰ï¼Œè¿”å›æ‰€æœ‰ç»“æœé›†ï¼ŒåŒ…å«é‡å¤æ•°æ®ã€‚ â€¢ SELECT field1, field2,...fieldN FROM table_name1, table_name2...ORDER BY field1 [ASC [DESC][é»˜è®¤ ASC]], [field2...] [ASC [DESC][é»˜è®¤ ASC]] â€¢ SELECT column_name, function(column_name) FROM table_name WHERE column_name operator value GROUP BY column_name; â€¢ æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æœé›†è¿›è¡Œåˆ†ç»„ã€‚ åœ¨åˆ†ç»„çš„åˆ—ä¸Šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ COUNT, SUM, AVG,ç­‰å‡½æ•°ã€‚ WITH ROLLUP å¯ä»¥å®ç°åœ¨åˆ†ç»„ç»Ÿè®¡æ•°æ®åŸºç¡€ä¸Šå†è¿›è¡Œç›¸åŒçš„ç»Ÿè®¡ï¼ˆSUM,AVG,COUNTâ€¦ï¼‰ â€¢ ä½¿ç”¨èšåˆå‡½æ•°åéœ€è¦group byåˆ†ç»„ï¼Œhavingåªèƒ½ç”¨äºgroup by åé¢ â€¢ INNER JOINï¼ˆå†…è¿æ¥,æˆ–ç­‰å€¼è¿æ¥ï¼‰ã€äº¤é›†ã€‘ï¼šè·å–ä¸¤ä¸ªè¡¨ä¸­å­—æ®µåŒ¹é…å…³ç³»çš„è®°å½•ã€‚ LEFT JOINï¼ˆå·¦è¿æ¥ï¼‰ã€å·¦äº¤ã€‘ï¼šè·å–å·¦è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å³è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•ã€‚ RIGHT JOINï¼ˆå³è¿æ¥ï¼‰ã€å·¦äº¤ã€‘ï¼š ä¸ LEFT JOIN ç›¸åï¼Œç”¨äºè·å–å³è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å·¦è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•ã€‚ â€¢ select p.id,p.name,t.content from person p left join task t on p.id=t.person_id order by p.id â€¢ UPDATE table_name SET field1=new-value1, field2=new-value2 [WHERE Clause] ä½ å¯ä»¥åŒæ—¶æ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µã€‚ ä½ å¯ä»¥åœ¨ WHERE å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶ã€‚ ä½ å¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬è¡¨ä¸­åŒæ—¶æ›´æ–°æ•°æ®ã€‚ â€¢ update titles_test set emp_no=replace(emp_no,'10001','10005') where id=5 â€¢ DELETE FROM table_name [WHERE Clause] å¦‚æœæ²¡æœ‰æŒ‡å®š WHERE å­å¥ï¼ŒMySQL è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å°†è¢«åˆ é™¤ã€‚ ä½ å¯ä»¥åœ¨ WHERE å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶ æ‚¨å¯ä»¥åœ¨å•ä¸ªè¡¨ä¸­ä¸€æ¬¡æ€§åˆ é™¤è®°å½•ã€‚ DROP TABLE table_name ; ALTER TABLE table_name DROP i; ADD i INT ; åˆ é™¤ï¼Œæ·»åŠ æˆ–ä¿®æ”¹è¡¨å­—æ®µ MODIFY c CHAR(10) ; CHANGE i j BIGINT; ä¿®æ”¹å­—æ®µç±»å‹åŠåç§° ALTER i SET DEFAULT 1000; ALTER i DROP DEFAULT; ä¿®æ”¹,åˆ é™¤å­—æ®µçš„é»˜è®¤å€¼ ALTER TABLE testalter_tbl RENAME TO alter_tbl;æ”¹è¡¨å Â· è¡¨ä¸­åªå‰©ä½™ä¸€ä¸ªå­—æ®µåˆ™æ— æ³•ä½¿ç”¨DROPæ¥åˆ é™¤å­—æ®µ SQLè¯­å¥ä¸»è¦åˆ†ä¸ºå“ªå‡ ç±» **æ•°æ®å®šä¹‰è¯­è¨€ DDLï¼ˆData Ddefinition Languageï¼‰**CREATEï¼ŒDROPï¼ŒALTER å¯¹é€»è¾‘ç»“æ„ç­‰æœ‰æ“ä½œçš„ï¼Œå…¶ä¸­åŒ…æ‹¬è¡¨ç»“æ„ï¼Œè§†å›¾å’Œç´¢å¼•ã€‚ æ•°æ®æŸ¥è¯¢è¯­è¨€ DQLï¼ˆData Query Languageï¼‰SELECT æŸ¥è¯¢æ“ä½œï¼Œä»¥ select å…³é”®å­—ã€‚ç®€å•æŸ¥è¯¢ï¼Œè¿æ¥æŸ¥è¯¢ç­‰ éƒ½å±äº DQLã€‚ **æ•°æ®æ“çºµè¯­è¨€ DMLï¼ˆData Manipulation Languageï¼‰**INSERTï¼ŒUPDATEï¼ŒDELETE æ•°æ®æ“ä½œï¼Œå¯¹åº”ä¸Šé¢æ‰€è¯´çš„æŸ¥è¯¢æ“ä½œ DQL ä¸ DML å…±åŒæ„å»ºäº†å¤šæ•°åˆçº§ç¨‹åºå‘˜å¸¸ç”¨çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚æŸ¥è¯¢è¾ƒä¸ºç‰¹æ®Šåˆ’åˆ†åˆ° DQL ä¸­ã€‚ **æ•°æ®æ§åˆ¶åŠŸèƒ½ DCLï¼ˆData Control Languageï¼‰**GRANTï¼ŒREVOKEï¼ŒCOMMITï¼ŒROLLBACK å¯¹æ•°æ®åº“å®‰å…¨æ€§å®Œæ•´æ€§ç­‰æœ‰æ“ä½œçš„ï¼Œæƒé™æ§åˆ¶ç­‰ DQMC è¶…é”®ã€å€™é€‰é”®ã€ä¸»é”®ã€å¤–é”®åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ è¶…é”®ï¼šåœ¨å…³ç³»ä¸­èƒ½å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§é›†ç§°ä¸ºå…³ç³»æ¨¡å¼çš„è¶…é”®ã€‚ä¸€ä¸ªå±æ€§å¯ä»¥ä¸ºä½œä¸ºä¸€ä¸ªè¶…é”®ï¼Œå¤šä¸ªå±æ€§ç»„åˆåœ¨ä¸€èµ·ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè¶…é”®ã€‚è¶…é”®åŒ…å«å€™é€‰é”®å’Œä¸»é”®ã€‚ å€™é€‰é”®ï¼šæ˜¯æœ€å°è¶…é”®ï¼Œå³æ²¡æœ‰å†—ä½™å…ƒç´ çš„è¶…é”®ã€‚ ä¸»é”®ï¼šæ•°æ®åº“è¡¨ä¸­å¯¹å‚¨å­˜æ•°æ®å¯¹è±¡äºˆä»¥å”¯ä¸€å’Œå®Œæ•´æ ‡è¯†çš„æ•°æ®åˆ—æˆ–å±æ€§çš„ç»„åˆã€‚ä¸€ä¸ªæ•°æ®åˆ—åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä¸”ä¸»é”®çš„å–å€¼ä¸èƒ½ç¼ºå¤±ï¼Œå³ä¸èƒ½ä¸ºç©ºå€¼ï¼ˆNullï¼‰ã€‚ å¤–é”®ï¼šåœ¨ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨çš„å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®ç§°æ­¤è¡¨çš„å¤–é”®ã€‚ SQL çº¦æŸæœ‰å“ªå‡ ç§ï¼Ÿ NOT NULL: ç”¨äºæ§åˆ¶å­—æ®µçš„å†…å®¹ä¸€å®šä¸èƒ½ä¸ºç©ºï¼ˆNULLï¼‰ã€‚ UNIQUE: æ§ä»¶å­—æ®µå†…å®¹ä¸èƒ½é‡å¤ï¼Œä¸€ä¸ªè¡¨å…è®¸æœ‰å¤šä¸ª Unique çº¦æŸã€‚ PRIMARY KEY: ä¹Ÿæ˜¯ç”¨äºæ§ä»¶å­—æ®µå†…å®¹ä¸èƒ½é‡å¤ï¼Œä½†å®ƒåœ¨ä¸€ä¸ªè¡¨åªå…è®¸å‡ºç°ä¸€ä¸ªã€‚ FOREIGN KEY: ç”¨äºé¢„é˜²ç ´åè¡¨ä¹‹é—´è¿æ¥çš„åŠ¨ä½œï¼Œä¹Ÿèƒ½é˜²æ­¢éæ³•æ•°æ®æ’å…¥å¤–é”®åˆ—ï¼Œå› ä¸ºå®ƒå¿…é¡»æ˜¯å®ƒæŒ‡å‘çš„é‚£ä¸ªè¡¨ä¸­çš„å€¼ä¹‹ä¸€ã€‚ CHECK: ç”¨äºæ§åˆ¶å­—æ®µçš„å€¼èŒƒå›´ã€‚ å…­ç§å…³è”æŸ¥è¯¢ äº¤å‰è¿æ¥ï¼ˆCROSS JOINï¼‰ å†…è¿æ¥ï¼ˆINNER JOINï¼‰ å¤–è¿æ¥ï¼ˆLEFT JOIN/RIGHT JOINï¼‰ è”åˆæŸ¥è¯¢ï¼ˆUNION ä¸ UNION ALLï¼‰ å…¨è¿æ¥ï¼ˆFULL JOINï¼‰ Â· äº¤å‰è¿æ¥ï¼ˆCROSS JOINï¼‰ SELECT * FROM A,B(,C) æˆ–è€… SELECT * FROM A CROSS JOIN B (CROSS JOIN C) #æ²¡æœ‰ä»»ä½•å…³è”æ¡ä»¶ï¼Œç»“æœæ˜¯ç¬›å¡å°”ç§¯ï¼Œç»“æœé›†ä¼šå¾ˆå¤§ï¼Œæ²¡æœ‰æ„ä¹‰ï¼Œå¾ˆå°‘ä½¿ç”¨å†…è¿æ¥ï¼ˆINNER JOINï¼‰SELECT * FROM A,B WHERE A.id=B.idæˆ–è€…SELECT * FROM A INNER JOIN B ON A.id=B.idå¤šè¡¨ä¸­åŒæ—¶ç¬¦åˆæŸç§æ¡ä»¶çš„æ•°æ®è®°å½•çš„é›†åˆï¼ŒINNER JOINå¯ä»¥ç¼©å†™ä¸ºJOIN Â· å†…è¿æ¥åˆ†ä¸ºä¸‰ç±» ç­‰å€¼è¿æ¥ï¼šON A.id=B.id ä¸ç­‰å€¼è¿æ¥ï¼šON A.id &gt; B.id è‡ªè¿æ¥ï¼šSELECT * FROM A T1 INNER JOIN A T2 ON T1.id=T2.pid Â· å¤–è¿æ¥ï¼ˆLEFT JOIN/RIGHT JOINï¼‰ å·¦å¤–è¿æ¥ï¼šLEFT OUTER JOIN, ä»¥å·¦è¡¨ä¸ºä¸»ï¼Œå…ˆæŸ¥è¯¢å‡ºå·¦è¡¨ï¼ŒæŒ‰ç…§ ON åçš„å…³è”æ¡ä»¶åŒ¹é…å³è¡¨ï¼Œæ²¡æœ‰åŒ¹é…åˆ°çš„ç”¨ NULL å¡«å……ï¼Œå¯ä»¥ç®€å†™æˆ LEFT JOIN å³å¤–è¿æ¥ï¼šRIGHT OUTER JOIN, ä»¥å³è¡¨ä¸ºä¸»ï¼Œå…ˆæŸ¥è¯¢å‡ºå³è¡¨ï¼ŒæŒ‰ç…§ ON åçš„å…³è”æ¡ä»¶åŒ¹é…å·¦è¡¨ï¼Œæ²¡æœ‰åŒ¹é…åˆ°çš„ç”¨ NULL å¡«å……ï¼Œå¯ä»¥ç®€å†™æˆ RIGHT JOIN Â· è”åˆæŸ¥è¯¢ï¼ˆUNION ä¸ UNION ALLï¼‰ SELECT * FROM A UNION SELECT * FROM B UNION ... å°±æ˜¯æŠŠå¤šä¸ªç»“æœé›†é›†ä¸­åœ¨ä¸€èµ·ï¼ŒUNION å‰çš„ç»“æœä¸ºåŸºå‡†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è”åˆæŸ¥è¯¢çš„åˆ—æ•°è¦ç›¸ç­‰ï¼Œç›¸åŒçš„è®°å½•è¡Œä¼šåˆå¹¶ å¦‚æœä½¿ç”¨ UNION ALLï¼Œä¸ä¼šåˆå¹¶é‡å¤çš„è®°å½•è¡Œ æ•ˆç‡ UNION é«˜äº UNION ALL Â· å…¨è¿æ¥ï¼ˆFULL JOINï¼‰ MySQL ä¸æ”¯æŒå…¨è¿æ¥ å¯ä»¥ä½¿ç”¨ LEFT JOIN å’Œ UNION å’Œ RIGHT JOIN è”åˆä½¿ç”¨ SELECT * FROM A LEFT JOIN B ON A.id=B.id UNIONSELECT * FROM A RIGHT JOIN B ON A.id=B.id ä»€ä¹ˆæ˜¯å­æŸ¥è¯¢ æ¡ä»¶ï¼šä¸€æ¡ SQL è¯­å¥çš„æŸ¥è¯¢ç»“æœåšä¸ºå¦ä¸€æ¡æŸ¥è¯¢è¯­å¥çš„æ¡ä»¶æˆ–æŸ¥è¯¢ç»“æœ åµŒå¥—ï¼šå¤šæ¡ SQL è¯­å¥åµŒå¥—ä½¿ç”¨ï¼Œå†…éƒ¨çš„ SQL æŸ¥è¯¢è¯­å¥ç§°ä¸ºå­æŸ¥è¯¢ã€‚ å­æŸ¥è¯¢çš„ä¸‰ç§æƒ…å†µ å­æŸ¥è¯¢æ˜¯å•è¡Œå•åˆ—çš„æƒ…å†µï¼šç»“æœé›†æ˜¯ä¸€ä¸ªå€¼ï¼Œçˆ¶æŸ¥è¯¢ä½¿ç”¨ï¼š=ã€ &lt;ã€&gt; ç­‰è¿ç®—ç¬¦ -- æŸ¥è¯¢å·¥èµ„æœ€é«˜çš„å‘˜å·¥æ˜¯è°ï¼Ÿ select * from employee where salary=(select max(salary) from employee); å­æŸ¥è¯¢æ˜¯å¤šè¡Œå•åˆ—çš„æƒ…å†µï¼šç»“æœé›†ç±»ä¼¼äºä¸€ä¸ªæ•°ç»„ï¼Œçˆ¶æŸ¥è¯¢ä½¿ç”¨ï¼šin è¿ç®—ç¬¦ -- æŸ¥è¯¢å·¥èµ„æœ€é«˜çš„å‘˜å·¥æ˜¯è°ï¼Ÿ select * from employee where salary=(select max(salary) from employee); å­æŸ¥è¯¢æ˜¯å¤šè¡Œå¤šåˆ—çš„æƒ…å†µï¼šç»“æœé›†ç±»ä¼¼äºä¸€å¼ è™šæ‹Ÿè¡¨ï¼Œä¸èƒ½ç”¨äº where æ¡ä»¶ï¼Œç”¨äº select å­å¥ä¸­åšä¸ºå­è¡¨ -- 1) æŸ¥è¯¢å‡º2011å¹´ä»¥åå…¥èŒçš„å‘˜å·¥ä¿¡æ¯ -- 2) æŸ¥è¯¢æ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯ï¼Œä¸ä¸Šé¢çš„è™šæ‹Ÿè¡¨ä¸­çš„ä¿¡æ¯æ¯”å¯¹ï¼Œæ‰¾å‡ºæ‰€æœ‰éƒ¨é—¨IDç›¸ç­‰çš„å‘˜å·¥ã€‚ select * from dept d, (select * from employee where join_date &gt; '2011-1-1') e where e.dept_id = d.id; -- ä½¿ç”¨è¡¨è¿æ¥ï¼š select d., e. from dept d inner join employee e on d.id = e.dept_id where e.join_date &gt; '2011-1-1' mysqlä¸­ in å’Œ exists åŒºåˆ« mysql ä¸­çš„ in è¯­å¥æ˜¯æŠŠå¤–è¡¨å’Œå†…è¡¨ä½œ hash è¿æ¥ï¼Œè€Œ exists è¯­å¥æ˜¯å¯¹å¤–è¡¨ä½œ loop å¾ªç¯ï¼Œæ¯æ¬¡ loop å¾ªç¯å†å¯¹å†…è¡¨è¿›è¡ŒæŸ¥è¯¢ã€‚ä¸€ç›´å¤§å®¶éƒ½è®¤ä¸º exists æ¯” in è¯­å¥çš„æ•ˆç‡è¦é«˜ï¼Œè¿™ç§è¯´æ³•å…¶å®æ˜¯ä¸å‡†ç¡®çš„ã€‚è¿™ä¸ªæ˜¯è¦åŒºåˆ†ç¯å¢ƒçš„ã€‚ å¦‚æœæŸ¥è¯¢çš„ä¸¤ä¸ªè¡¨å¤§å°ç›¸å½“ï¼Œé‚£ä¹ˆç”¨ in å’Œ exists å·®åˆ«ä¸å¤§ã€‚ å¦‚æœä¸¤ä¸ªè¡¨ä¸­ä¸€ä¸ªè¾ƒå°ï¼Œä¸€ä¸ªæ˜¯å¤§è¡¨ï¼Œåˆ™å­æŸ¥è¯¢è¡¨å¤§çš„ç”¨ existsï¼Œå­æŸ¥è¯¢è¡¨å°çš„ç”¨ inã€‚ not in å’Œ not existsï¼šå¦‚æœæŸ¥è¯¢è¯­å¥ä½¿ç”¨äº† not inï¼Œé‚£ä¹ˆå†…å¤–è¡¨éƒ½è¿›è¡Œå…¨è¡¨æ‰«æï¼Œæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼›è€Œ not extsts çš„å­æŸ¥è¯¢ä¾ç„¶èƒ½ç”¨åˆ°è¡¨ä¸Šçš„ç´¢å¼•ã€‚æ‰€ä»¥æ— è®ºé‚£ä¸ªè¡¨å¤§ï¼Œç”¨ not exists éƒ½æ¯” not in è¦å¿«ã€‚ varcharä¸charçš„åŒºåˆ« char çš„ç‰¹ç‚¹ char è¡¨ç¤ºå®šé•¿å­—ç¬¦ä¸²ï¼Œé•¿åº¦æ˜¯å›ºå®šçš„ï¼› å¦‚æœæ’å…¥æ•°æ®çš„é•¿åº¦å°äº char çš„å›ºå®šé•¿åº¦æ—¶ï¼Œåˆ™ç”¨ç©ºæ ¼å¡«å……ï¼› å› ä¸ºé•¿åº¦å›ºå®šï¼Œæ‰€ä»¥å­˜å–é€Ÿåº¦è¦æ¯” varchar å¿«å¾ˆå¤šï¼Œç”šè‡³èƒ½å¿« 50%ï¼Œä½†æ­£å› ä¸ºå…¶é•¿åº¦å›ºå®šï¼Œæ‰€ä»¥ä¼šå æ®å¤šä½™çš„ç©ºé—´ï¼Œæ˜¯ç©ºé—´æ¢æ—¶é—´çš„åšæ³•ï¼› å¯¹äº char æ¥è¯´ï¼Œæœ€å¤šèƒ½å­˜æ”¾çš„å­—ç¬¦ä¸ªæ•°ä¸º 255ï¼Œå’Œç¼–ç æ— å…³ varchar çš„ç‰¹ç‚¹ varchar è¡¨ç¤ºå¯å˜é•¿å­—ç¬¦ä¸²ï¼Œé•¿åº¦æ˜¯å¯å˜çš„ï¼› æ’å…¥çš„æ•°æ®æ˜¯å¤šé•¿ï¼Œå°±æŒ‰ç…§å¤šé•¿æ¥å­˜å‚¨ï¼› varchar åœ¨å­˜å–æ–¹é¢ä¸ char ç›¸åï¼Œå®ƒå­˜å–æ…¢ï¼Œå› ä¸ºé•¿åº¦ä¸å›ºå®šï¼Œä½†æ­£å› å¦‚æ­¤ï¼Œä¸å æ®å¤šä½™çš„ç©ºé—´ï¼Œæ˜¯æ—¶é—´æ¢ç©ºé—´çš„åšæ³•ï¼› å¯¹äº varchar æ¥è¯´ï¼Œæœ€å¤šèƒ½å­˜æ”¾çš„å­—ç¬¦ä¸ªæ•°ä¸º 65532 æ€»ä¹‹ï¼Œç»“åˆæ€§èƒ½è§’åº¦ï¼ˆchar æ›´å¿«ï¼‰å’ŒèŠ‚çœç£ç›˜ç©ºé—´è§’åº¦ï¼ˆvarchar æ›´å°ï¼‰ï¼Œå…·ä½“æƒ…å†µè¿˜éœ€å…·ä½“æ¥è®¾è®¡æ•°æ®åº“æ‰æ˜¯å¦¥å½“çš„åšæ³•ã€‚ varchar(50)ä¸­50çš„æ¶µä¹‰ æœ€å¤šå­˜æ”¾ 50 ä¸ªå­—ç¬¦ï¼Œvarchar(50)å’Œ (200) å­˜å‚¨ hello æ‰€å ç©ºé—´ä¸€æ ·ï¼Œä½†åè€…åœ¨æ’åºæ—¶ä¼šæ¶ˆè€—æ›´å¤šå†…å­˜ï¼Œå› ä¸º order by col é‡‡ç”¨ fixed_length è®¡ç®— col é•¿åº¦(memory å¼•æ“ä¹Ÿä¸€æ ·)ã€‚åœ¨æ—©æœŸ MySQL ç‰ˆæœ¬ä¸­ï¼Œ 50 ä»£è¡¨å­—èŠ‚æ•°ï¼Œç°åœ¨ä»£è¡¨å­—ç¬¦æ•°ã€‚ int(20)ä¸­20çš„æ¶µä¹‰ æ˜¯æŒ‡æ˜¾ç¤ºå­—ç¬¦çš„é•¿åº¦ã€‚20 è¡¨ç¤ºæœ€å¤§æ˜¾ç¤ºå®½åº¦ä¸º 20ï¼Œä½†ä»å  4 å­—èŠ‚å­˜å‚¨ï¼Œå­˜å‚¨èŒƒå›´ä¸å˜ï¼› ä¸å½±å“å†…éƒ¨å­˜å‚¨ï¼Œåªæ˜¯å½±å“å¸¦ zerofill å®šä¹‰çš„ int æ—¶ï¼Œå‰é¢è¡¥å¤šå°‘ä¸ª 0ï¼Œæ˜“äºæŠ¥è¡¨å±•ç¤º mysqlä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ å¯¹å¤§å¤šæ•°åº”ç”¨æ²¡æœ‰æ„ä¹‰ï¼Œåªæ˜¯è§„å®šä¸€äº›å·¥å…·ç”¨æ¥æ˜¾ç¤ºå­—ç¬¦çš„ä¸ªæ•°ï¼›int(1) å’Œ int(20) å­˜å‚¨å’Œè®¡ç®—å‡ä¸€æ ·ï¼› mysqlä¸­int(10)å’Œchar(10)ä»¥åŠvarchar(10)çš„åŒºåˆ« int(10) çš„ 10 è¡¨ç¤ºæ˜¾ç¤ºçš„æ•°æ®çš„é•¿åº¦ï¼Œä¸æ˜¯å­˜å‚¨æ•°æ®çš„å¤§å°ï¼›chart(10) å’Œ varchar(10) çš„ 10 è¡¨ç¤ºå­˜å‚¨æ•°æ®çš„å¤§å°ï¼Œå³è¡¨ç¤ºå­˜å‚¨å¤šå°‘ä¸ªå­—ç¬¦ã€‚ int(10) 10 ä½çš„æ•°æ®é•¿åº¦ 9999999999ï¼Œå  32 ä¸ªå­—èŠ‚ï¼Œint å‹ 4 ä½ char(10) 10 ä½å›ºå®šå­—ç¬¦ä¸²ï¼Œä¸è¶³è¡¥ç©ºæ ¼ æœ€å¤š 10 ä¸ªå­—ç¬¦ varchar(10) 10 ä½å¯å˜å­—ç¬¦ä¸²ï¼Œä¸è¶³è¡¥ç©ºæ ¼ æœ€å¤š 10 ä¸ªå­—ç¬¦ char(10) è¡¨ç¤ºå­˜å‚¨å®šé•¿çš„ 10 ä¸ªå­—ç¬¦ï¼Œä¸è¶³ 10 ä¸ªå°±ç”¨ç©ºæ ¼è¡¥é½ï¼Œå ç”¨æ›´å¤šçš„å­˜å‚¨ç©ºé—´ varchar(10) è¡¨ç¤ºå­˜å‚¨ 10 ä¸ªå˜é•¿çš„å­—ç¬¦ï¼Œå­˜å‚¨å¤šå°‘ä¸ªå°±æ˜¯å¤šå°‘ä¸ªï¼Œç©ºæ ¼ä¹ŸæŒ‰ä¸€ä¸ªå­—ç¬¦å­˜å‚¨ï¼Œè¿™ä¸€ç‚¹æ˜¯å’Œ char(10) çš„ç©ºæ ¼ä¸åŒçš„ï¼Œchar(10) çš„ç©ºæ ¼è¡¨ç¤ºå ä½ä¸ç®—ä¸€ä¸ªå­—ç¬¦ FLOATå’ŒDOUBLEçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ FLOAT ç±»å‹æ•°æ®å¯ä»¥å­˜å‚¨è‡³å¤š 8 ä½åè¿›åˆ¶æ•°ï¼Œå¹¶åœ¨å†…å­˜ä¸­å  4 å­—èŠ‚ã€‚ DOUBLE ç±»å‹æ•°æ®å¯ä»¥å­˜å‚¨è‡³å¤š 18 ä½åè¿›åˆ¶æ•°ï¼Œå¹¶åœ¨å†…å­˜ä¸­å  8 å­—èŠ‚ã€‚ dropã€deleteä¸truncateçš„åŒºåˆ« â€‹ Delete Truncate Drop ç±»å‹ å±äº DML å±äº DDL å±äº DDL å›æ»š å¯å›æ»š ä¸å¯å›æ»š ä¸å¯å›æ»š åˆ é™¤å†…å®¹ è¡¨ç»“æ„è¿˜åœ¨ï¼Œåˆ é™¤è¡¨çš„å…¨éƒ¨æˆ–è€…ä¸€éƒ¨åˆ†æ•°æ®è¡Œ è¡¨ç»“æ„è¿˜åœ¨ï¼Œåˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰æ•°æ® ä»æ•°æ®åº“ä¸­åˆ é™¤è¡¨ï¼Œæ‰€æœ‰çš„æ•°æ®è¡Œï¼Œç´¢å¼•å’Œæƒé™ä¹Ÿä¼šè¢«åˆ é™¤ åˆ é™¤é€Ÿåº¦ åˆ é™¤é€Ÿåº¦æ…¢ï¼Œéœ€è¦é€è¡Œåˆ é™¤ åˆ é™¤é€Ÿåº¦å¿« åˆ é™¤é€Ÿåº¦æœ€å¿« å› æ­¤ï¼Œåœ¨ä¸å†éœ€è¦ä¸€å¼ è¡¨çš„æ—¶å€™ï¼Œç”¨ dropï¼›åœ¨æƒ³åˆ é™¤éƒ¨åˆ†æ•°æ®è¡Œæ—¶å€™ï¼Œç”¨ deleteï¼›åœ¨ä¿ç•™è¡¨è€Œåˆ é™¤æ‰€æœ‰æ•°æ®çš„æ—¶å€™ç”¨ truncateã€‚ UNIONä¸UNION ALLçš„åŒºåˆ«ï¼Ÿ å¦‚æœä½¿ç”¨ UNION ALLï¼Œä¸ä¼šåˆå¹¶é‡å¤çš„è®°å½•è¡Œ æ•ˆç‡ UNION é«˜äº UNION ALL æ•°æ®ç±»å‹ 1bit ä½ 1å­—èŠ‚=8bit 1k=1024å­—èŠ‚ 1å…†=1024k 1G=1023M 1T=1024G å¼•æ“ MySQLå­˜å‚¨å¼•æ“MyISAMä¸InnoDBåŒºåˆ« å­˜å‚¨å¼•æ“ Storage engineï¼šMySQL ä¸­çš„æ•°æ®ã€ç´¢å¼•ä»¥åŠå…¶ä»–å¯¹è±¡æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Œæ˜¯ä¸€å¥—æ–‡ä»¶ç³»ç»Ÿçš„å®ç°ã€‚ MyISAMç´¢å¼•ä¸InnoDBç´¢å¼•çš„åŒºåˆ«ï¼Ÿ Innodb å¼•æ“ï¼šInnodb å¼•æ“æä¾›äº†å¯¹æ•°æ®åº“ ACID äº‹åŠ¡çš„æ”¯æŒã€‚å¹¶ä¸”è¿˜æä¾›äº†è¡Œçº§é”å’Œå¤–é”®çš„çº¦æŸã€‚å®ƒçš„è®¾è®¡çš„ç›®æ ‡å°±æ˜¯å¤„ç†å¤§æ•°æ®å®¹é‡çš„æ•°æ®åº“ç³»ç»Ÿã€‚ MyIASM å¼•æ“ (åŸæœ¬ Mysql çš„é»˜è®¤å¼•æ“)ï¼šä¸æä¾›äº‹åŠ¡çš„æ”¯æŒï¼Œä¹Ÿä¸æ”¯æŒè¡Œçº§é”å’Œå¤–é”®ã€‚ MEMORY å¼•æ“ï¼šæ‰€æœ‰çš„æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œæ•°æ®çš„å¤„ç†é€Ÿåº¦å¿«ï¼Œä½†æ˜¯å®‰å…¨æ€§ä¸é«˜ã€‚ InnoDB ç´¢å¼•æ˜¯èšç°‡ç´¢å¼•ï¼ŒMyISAM ç´¢å¼•æ˜¯éèšç°‡ç´¢å¼•ã€‚ InnoDB çš„ä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨ç€è¡Œæ•°æ®ï¼Œå› æ­¤ä¸»é”®ç´¢å¼•éå¸¸é«˜æ•ˆã€‚ MyISAM ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯è¡Œæ•°æ®åœ°å€ï¼Œéœ€è¦å†å¯»å€ä¸€æ¬¡æ‰èƒ½å¾—åˆ°æ•°æ®ã€‚ InnoDB éä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ä¸»é”®å’Œå…¶ä»–å¸¦ç´¢å¼•çš„åˆ—æ•°æ®ï¼Œå› æ­¤æŸ¥è¯¢æ—¶åšåˆ°è¦†ç›–ç´¢å¼•ä¼šéå¸¸é«˜æ•ˆã€‚ InnoDBå¼•æ“çš„4å¤§ç‰¹æ€§ æ’å…¥ç¼“å†²ï¼ˆinsert buffer) äºŒæ¬¡å†™ (double write) è‡ªé€‚åº”å“ˆå¸Œç´¢å¼• (ahi) é¢„è¯» (read ahead) å­˜å‚¨å¼•æ“é€‰æ‹© å¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„éœ€æ±‚ï¼Œä½¿ç”¨é»˜è®¤çš„Innodbå³å¯ã€‚ MyISAMï¼šä»¥è¯»å†™æ’å…¥ä¸ºä¸»çš„åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚åšå®¢ç³»ç»Ÿã€æ–°é—»é—¨æˆ·ç½‘ç«™ã€‚ Innodbï¼šæ›´æ–°ï¼ˆåˆ é™¤ï¼‰æ“ä½œé¢‘ç‡ä¹Ÿé«˜ï¼Œæˆ–è€…è¦ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼›å¹¶å‘é‡é«˜ï¼Œæ”¯æŒäº‹åŠ¡å’Œå¤–é”®ã€‚æ¯”å¦‚ OA è‡ªåŠ¨åŒ–åŠå…¬ç³»ç»Ÿã€‚ ç´¢å¼• ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿ ç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ (InnoDB æ•°æ®è¡¨ä¸Šçš„ç´¢å¼•æ˜¯è¡¨ç©ºé—´çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†)ï¼Œå®ƒä»¬åŒ…å«ç€å¯¹æ•°æ®è¡¨é‡Œæ‰€æœ‰è®°å½•çš„å¼•ç”¨æŒ‡é’ˆã€‚ ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®ç»“æ„ã€‚æ•°æ®åº“ç´¢å¼•ï¼Œæ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ä¸€ä¸ªæ’åºçš„æ•°æ®ç»“æ„ï¼Œä»¥ååŠ©å¿«é€ŸæŸ¥è¯¢ã€æ›´æ–°æ•°æ®åº“è¡¨ä¸­æ•°æ®ã€‚ç´¢å¼•çš„å®ç°é€šå¸¸ä½¿ç”¨ B æ ‘åŠå…¶å˜ç§ B + æ ‘ã€‚ æ›´é€šä¿—çš„è¯´ï¼Œç´¢å¼•å°±ç›¸å½“äºç›®å½•ã€‚ä¸ºäº†æ–¹ä¾¿æŸ¥æ‰¾ä¹¦ä¸­çš„å†…å®¹ï¼Œé€šè¿‡å¯¹å†…å®¹å»ºç«‹ç´¢å¼•å½¢æˆç›®å½•ã€‚ç´¢å¼•æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒæ˜¯è¦å æ®ç‰©ç†ç©ºé—´çš„ã€‚ ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ ä¼˜ å¯ä»¥å¤§å¤§åŠ å¿«æ•°æ®çš„æ£€ç´¢é€Ÿåº¦ï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºç´¢å¼•çš„æœ€ä¸»è¦çš„åŸå› ã€‚ é€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ä¼˜åŒ–éšè—å™¨ï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚ ç¼º æ—¶é—´æ–¹é¢ï¼šåˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´ï¼Œå…·ä½“åœ°ï¼Œå½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤ï¼Œä¼šé™ä½å¢ / æ”¹ / åˆ çš„æ‰§è¡Œæ•ˆç‡ï¼› ç©ºé—´æ–¹é¢ï¼šç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´ ç´¢å¼•ä½¿ç”¨åœºæ™¯ï¼ˆé‡ç‚¹ï¼‰ where å¯ä»¥å°è¯•åœ¨ä¸€ä¸ªå­—æ®µæœªå»ºç«‹ç´¢å¼•æ—¶ï¼Œæ ¹æ®è¯¥å­—æ®µæŸ¥è¯¢çš„æ•ˆç‡ï¼Œç„¶åå¯¹è¯¥å­—æ®µå»ºç«‹ç´¢å¼•ï¼ˆalter table è¡¨å add index(å­—æ®µå)ï¼‰ï¼ŒåŒæ ·çš„ SQL æ‰§è¡Œçš„æ•ˆç‡ï¼Œä½ ä¼šå‘ç°æŸ¥è¯¢æ•ˆç‡ä¼šæœ‰æ˜æ˜¾çš„æå‡ï¼ˆæ•°æ®é‡è¶Šå¤§è¶Šæ˜æ˜¾ï¼‰ã€‚ order by ä½¿ç”¨order byå°†æŸ¥è¯¢ç»“æœæŒ‰ç…§æŸä¸ªå­—æ®µæ’åºæ—¶ï¼Œå¦‚æœè¯¥å­—æ®µæ²¡æœ‰å»ºç«‹ç´¢å¼•ï¼Œé‚£ä¹ˆæ‰§è¡Œè®¡åˆ’ä¼šå°†æŸ¥è¯¢å‡ºçš„æ‰€æœ‰æ•°æ®ä½¿ç”¨å¤–éƒ¨æ’åºï¼ˆå°†æ•°æ®ä»ç¡¬ç›˜åˆ†æ‰¹è¯»å–åˆ°å†…å­˜ä½¿ç”¨å†…éƒ¨æ’åºï¼Œæœ€ååˆå¹¶æ’åºç»“æœï¼‰ï¼Œè¿™æ“ä½œå¾ˆå½±å“æ€§èƒ½çš„ï¼Œå› ä¸ºéœ€è¦å°†æŸ¥è¯¢æ¶‰åŠåˆ°çš„æ‰€æœ‰æ•°æ®ä»ç£ç›˜ä¸­è¯»åˆ°å†…å­˜ï¼ˆå¦‚æœå•æ¡æ•°æ®è¿‡å¤§æˆ–è€…æ•°æ®é‡è¿‡å¤šéƒ½ä¼šé™ä½æ•ˆç‡ï¼‰ï¼Œæ›´æ— è®ºè¯»åˆ°å†…å­˜ä¹‹åçš„æ’åºäº†ã€‚ ä½†æ˜¯å¦‚æœæˆ‘ä»¬å¯¹è¯¥å­—æ®µå»ºç«‹ç´¢å¼•alter table è¡¨å add index(å­—æ®µå)ï¼Œé‚£ä¹ˆç”±äºç´¢å¼•æœ¬èº«æ˜¯æœ‰åºçš„ï¼Œå› æ­¤ç›´æ¥æŒ‰ç…§ç´¢å¼•çš„é¡ºåºå’Œæ˜ å°„å…³ç³»é€æ¡å–å‡ºæ•°æ®å³å¯ã€‚è€Œä¸”å¦‚æœåˆ†é¡µçš„ï¼Œé‚£ä¹ˆåªç”¨å–å‡ºç´¢å¼•è¡¨æŸä¸ªèŒƒå›´å†…çš„ç´¢å¼•å¯¹åº”çš„æ•°æ®ï¼Œè€Œä¸ç”¨åƒä¸Šè¿°é‚£å–å‡ºæ‰€æœ‰æ•°æ®è¿›è¡Œæ’åºå†è¿”å›æŸä¸ªèŒƒå›´å†…çš„æ•°æ®ã€‚ï¼ˆä»ç£ç›˜å–æ•°æ®æ˜¯æœ€å½±å“æ€§èƒ½çš„ï¼‰ join å¯¹joinè¯­å¥åŒ¹é…å…³ç³»ï¼ˆonï¼‰æ¶‰åŠçš„å­—æ®µå»ºç«‹ç´¢å¼•èƒ½å¤Ÿæé«˜æ•ˆç‡ ç´¢å¼•è¦†ç›– å¦‚æœè¦æŸ¥è¯¢çš„å­—æ®µéƒ½å»ºç«‹è¿‡ç´¢å¼•ï¼Œé‚£ä¹ˆå¼•æ“ä¼šç›´æ¥åœ¨ç´¢å¼•è¡¨ä¸­æŸ¥è¯¢è€Œä¸ä¼šè®¿é—®åŸå§‹æ•°æ®ï¼ˆå¦åˆ™åªè¦æœ‰ä¸€ä¸ªå­—æ®µæ²¡æœ‰å»ºç«‹ç´¢å¼•å°±ä¼šåšå…¨è¡¨æ‰«æï¼‰ï¼Œè¿™å«ç´¢å¼•è¦†ç›–ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å°½å¯èƒ½çš„åœ¨selectååªå†™å¿…è¦çš„æŸ¥è¯¢å­—æ®µï¼Œä»¥å¢åŠ ç´¢å¼•è¦†ç›–çš„å‡ ç‡ã€‚ è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯ä¸è¦æƒ³ç€ä¸ºæ¯ä¸ªå­—æ®µå»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºä¼˜å…ˆä½¿ç”¨ç´¢å¼•çš„ä¼˜åŠ¿å°±åœ¨äºå…¶ä½“ç§¯å°ã€‚ ç´¢å¼•æœ‰å“ªå‡ ç§ç±»å‹ï¼Ÿ 1ï¼‰ä»å­˜å‚¨ç»“æ„ä¸Šæ¥åˆ’åˆ† Â· Btree ç´¢å¼•ï¼ˆB+treeï¼ŒB-tree) Â· å“ˆå¸Œç´¢å¼• Â· full-index å…¨æ–‡ç´¢å¼• Â· RTree 2ï¼‰ä»åº”ç”¨å±‚æ¬¡ä¸Šæ¥åˆ’åˆ† Â· æ™®é€šç´¢å¼•: åŸºæœ¬çš„ç´¢å¼•ç±»å‹ï¼Œæ²¡æœ‰å”¯ä¸€æ€§çš„é™åˆ¶ï¼Œå…è®¸ä¸º NULL å€¼ã€‚ CREATE INDEX indexName ON table_name (column_name)æˆ– ALTER TABLE table_name ADD INDEX index_name (column);åˆ›å»ºæ™®é€šç´¢å¼• ALTER TABLE table_name ADD INDEX index_name(column1, column2, column3);åˆ›å»ºç»„åˆç´¢å¼• â€¢ ALTER TABLE testalter_tbl ADD/DROP INDEX (c); Â· å”¯ä¸€ç´¢å¼•: æ•°æ®åˆ—ä¸å…è®¸é‡å¤ï¼Œå…è®¸ä¸º NULL å€¼ï¼Œä¸€ä¸ªè¡¨å…è®¸å¤šä¸ªåˆ—åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚ å¯ä»¥é€šè¿‡ ALTER TABLE table_name ADD UNIQUE (column); åˆ›å»ºå”¯ä¸€ç´¢å¼• å¯ä»¥é€šè¿‡ ALTER TABLE table_name ADD UNIQUE (column1,column2); åˆ›å»ºå”¯ä¸€ç»„åˆç´¢å¼• Â· ä¸»é”®ç´¢å¼•: æ•°æ®åˆ—ä¸å…è®¸é‡å¤ï¼Œä¸å…è®¸ä¸º NULLï¼Œä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ã€‚ ALTER TABLE table_name ADD PRIMARY KEY ( column ) 3ï¼‰ä»è¡¨è®°å½•çš„æ’åˆ—é¡ºåºå’Œç´¢å¼•çš„æ’åˆ—é¡ºåºæ˜¯å¦ä¸€è‡´æ¥åˆ’åˆ† Â· **èšé›†ç´¢å¼•ï¼š**è¡¨è®°å½•çš„æ’åˆ—é¡ºåºå’Œç´¢å¼•çš„æ’åˆ—é¡ºåºä¸€è‡´ã€‚ â€¢ å°±æ˜¯ä»¥ä¸»é”®åˆ›å»ºçš„ç´¢å¼•ã€‚ Â· **éèšé›†ç´¢å¼•ï¼š**è¡¨è®°å½•çš„æ’åˆ—é¡ºåºå’Œç´¢å¼•çš„æ’åˆ—é¡ºåºä¸ä¸€è‡´ã€‚ â€¢ ä»¥éä¸»é”®åˆ›å»ºçš„ç´¢å¼•ï¼ˆä¹Ÿå«åšäºŒçº§ç´¢å¼•ï¼‰ã€‚ ç´¢å¼•çš„æ•°æ®ç»“æ„ï¼ˆbæ ‘ï¼Œhashï¼‰ æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ InnoDB å­˜å‚¨å¼•æ“çš„é»˜è®¤ç´¢å¼•å®ç°ä¸ºï¼šB + æ ‘ç´¢å¼•ã€‚å¯¹äºå“ˆå¸Œç´¢å¼•æ¥è¯´ï¼Œåº•å±‚çš„æ•°æ®ç»“æ„å°±æ˜¯å“ˆå¸Œè¡¨ï¼Œå› æ­¤åœ¨ç»å¤§å¤šæ•°éœ€æ±‚ä¸ºå•æ¡è®°å½•æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©å“ˆå¸Œç´¢å¼•ï¼ŒæŸ¥è¯¢æ€§èƒ½æœ€å¿«ï¼›å…¶ä½™å¤§éƒ¨åˆ†åœºæ™¯ï¼Œå»ºè®®é€‰æ‹© BTree ç´¢å¼•ã€‚ B æ ‘ç´¢å¼• Â· mysql é€šè¿‡å­˜å‚¨å¼•æ“å–æ•°æ®ï¼ŒåŸºæœ¬ä¸Š 90% çš„äººç”¨çš„å°±æ˜¯ InnoDB äº†ï¼ŒæŒ‰ç…§å®ç°æ–¹å¼åˆ†ï¼ŒInnoDB çš„ç´¢å¼•ç±»å‹ç›®å‰åªæœ‰ä¸¤ç§ï¼šBTREEï¼ˆB æ ‘ï¼‰ç´¢å¼•å’Œ HASH ç´¢å¼•ã€‚B æ ‘ç´¢å¼•æ˜¯ Mysql æ•°æ®åº“ä¸­ä½¿ç”¨æœ€é¢‘ç¹çš„ç´¢å¼•ç±»å‹ï¼ŒåŸºæœ¬æ‰€æœ‰å­˜å‚¨å¼•æ“éƒ½æ”¯æŒ BTree ç´¢å¼•ã€‚é€šå¸¸æˆ‘ä»¬è¯´çš„ç´¢å¼•ä¸å‡ºæ„å¤–æŒ‡çš„å°±æ˜¯ï¼ˆB æ ‘ï¼‰ç´¢å¼•ï¼ˆå®é™…æ˜¯ç”¨ B + æ ‘å®ç°çš„ï¼Œå› ä¸ºåœ¨æŸ¥çœ‹è¡¨ç´¢å¼•æ—¶ï¼Œmysql ä¸€å¾‹æ‰“å° BTREEï¼Œæ‰€ä»¥ç®€ç§°ä¸º B æ ‘ç´¢å¼•ï¼‰ â€¢ æŸ¥è¯¢æ–¹å¼ï¼š ä¸»é”®ç´¢å¼•åŒº: PI(å…³è”ä¿å­˜çš„æ—¶æ•°æ®çš„åœ°å€) æŒ‰ä¸»é”®æŸ¥è¯¢, æ™®é€šç´¢å¼•åŒº: si(å…³è”çš„ id çš„åœ°å€, ç„¶åå†åˆ°è¾¾ä¸Šé¢çš„åœ°å€)ã€‚æ‰€ä»¥æŒ‰ä¸»é”®æŸ¥è¯¢, é€Ÿåº¦æœ€å¿« B+tree æ€§è´¨ï¼š 1.ï¼‰n æ£µå­ tree çš„èŠ‚ç‚¹åŒ…å« n ä¸ªå…³é”®å­—ï¼Œä¸ç”¨æ¥ä¿å­˜æ•°æ®è€Œæ˜¯ä¿å­˜æ•°æ®çš„ç´¢å¼•ã€‚ 2.ï¼‰æ‰€æœ‰çš„å¶å­ç»“ç‚¹ä¸­åŒ…å«äº†å…¨éƒ¨å…³é”®å­—çš„ä¿¡æ¯ï¼ŒåŠæŒ‡å‘å«è¿™äº›å…³é”®å­—è®°å½•çš„æŒ‡é’ˆï¼Œä¸”å¶å­ç»“ç‚¹æœ¬èº«ä¾å…³é”®å­—çš„å¤§å°è‡ªå°è€Œå¤§é¡ºåºé“¾æ¥ã€‚ 3.ï¼‰æ‰€æœ‰çš„éç»ˆç«¯ç»“ç‚¹å¯ä»¥çœ‹æˆæ˜¯ç´¢å¼•éƒ¨åˆ†ï¼Œç»“ç‚¹ä¸­ä»…å«å…¶å­æ ‘ä¸­çš„æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å…³é”®å­—ã€‚ 4.ï¼‰B+ æ ‘ä¸­ï¼Œæ•°æ®å¯¹è±¡çš„æ’å…¥å’Œåˆ é™¤ä»…åœ¨å¶èŠ‚ç‚¹ä¸Šè¿›è¡Œã€‚ 5.ï¼‰B + æ ‘æœ‰ 2 ä¸ªå¤´æŒ‡é’ˆï¼Œä¸€ä¸ªæ˜¯æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯æœ€å°å…³é”®ç çš„å¶èŠ‚ç‚¹ã€‚ å“ˆå¸Œç´¢å¼• ![desc](file:///C:/Users/ADMINI~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png) ç®€è¦è¯´ä¸‹ï¼Œç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­ç®€å•å®ç°çš„ HASH è¡¨ï¼ˆæ•£åˆ—è¡¨ï¼‰ä¸€æ ·ï¼Œå½“æˆ‘ä»¬åœ¨ mysql ä¸­ç”¨å“ˆå¸Œç´¢å¼•æ—¶ï¼Œä¸»è¦å°±æ˜¯é€šè¿‡ Hash ç®—æ³•ï¼ˆå¸¸è§çš„ Hash ç®—æ³•æœ‰ç›´æ¥å®šå€æ³•ã€å¹³æ–¹å–ä¸­æ³•ã€æŠ˜å æ³•ã€é™¤æ•°å–ä½™æ³•ã€éšæœºæ•°æ³•ï¼‰ï¼Œå°†æ•°æ®åº“å­—æ®µæ•°æ®è½¬æ¢æˆå®šé•¿çš„ Hash å€¼ï¼Œä¸è¿™æ¡æ•°æ®çš„è¡ŒæŒ‡é’ˆä¸€å¹¶å­˜å…¥ Hash è¡¨çš„å¯¹åº”ä½ç½®ï¼›å¦‚æœå‘ç”Ÿ Hash ç¢°æ’ï¼ˆä¸¤ä¸ªä¸åŒå…³é”®å­—çš„ Hash å€¼ç›¸åŒï¼‰ï¼Œåˆ™åœ¨å¯¹åº” Hash é”®ä¸‹ä»¥é“¾è¡¨å½¢å¼å­˜å‚¨ã€‚å½“ç„¶è¿™åªæ˜¯ç®€ç•¥æ¨¡æ‹Ÿå›¾ã€‚ ç´¢å¼•çš„åŸºæœ¬åŸç† ç´¢å¼•ç”¨æ¥å¿«é€Ÿåœ°å¯»æ‰¾é‚£äº›å…·æœ‰ç‰¹å®šå€¼çš„è®°å½•ã€‚å¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œä¸€èˆ¬æ¥è¯´æ‰§è¡ŒæŸ¥è¯¢æ—¶éå†æ•´å¼ è¡¨ã€‚ ç´¢å¼•çš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠæ— åºçš„æ•°æ®å˜æˆæœ‰åºçš„æŸ¥è¯¢ æŠŠåˆ›å»ºäº†ç´¢å¼•çš„åˆ—çš„å†…å®¹è¿›è¡Œæ’åº å¯¹æ’åºç»“æœç”Ÿæˆå€’æ’è¡¨ åœ¨å€’æ’è¡¨å†…å®¹ä¸Šæ‹¼ä¸Šæ•°æ®åœ°å€é“¾ åœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œå…ˆæ‹¿åˆ°å€’æ’è¡¨å†…å®¹ï¼Œå†å–å‡ºæ•°æ®åœ°å€é“¾ï¼Œä»è€Œæ‹¿åˆ°å…·ä½“æ•°æ® ç´¢å¼•ç®—æ³•æœ‰å“ªäº›ï¼Ÿ BTree ç®—æ³• BTree æ˜¯æœ€å¸¸ç”¨çš„ mysql æ•°æ®åº“ç´¢å¼•ç®—æ³•ï¼Œä¹Ÿæ˜¯ mysql é»˜è®¤çš„ç®—æ³•ã€‚å› ä¸ºå®ƒä¸ä»…å¯ä»¥è¢«ç”¨åœ¨ =,&gt;,&gt;=,&lt;,&lt;= å’Œ between è¿™äº›æ¯”è¾ƒæ“ä½œç¬¦ä¸Šï¼Œè€Œä¸”è¿˜å¯ä»¥ç”¨äº like æ“ä½œç¬¦ï¼Œåªè¦å®ƒçš„æŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªä¸ä»¥é€šé…ç¬¦å¼€å¤´çš„å¸¸é‡ï¼Œ ä¾‹å¦‚ï¼š -- åªè¦å®ƒçš„æŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªä¸ä»¥é€šé…ç¬¦å¼€å¤´çš„å¸¸é‡ select * from user where name like 'jack%'; -- å¦‚æœä¸€é€šé…ç¬¦å¼€å¤´ï¼Œæˆ–è€…æ²¡æœ‰ä½¿ç”¨å¸¸é‡ï¼Œåˆ™ä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œä¾‹å¦‚ï¼š select * from user where name like '%jack'; Hash ç®—æ³• Hash Hash ç´¢å¼•åªèƒ½ç”¨äºå¯¹ç­‰æ¯”è¾ƒï¼Œä¾‹å¦‚ =,&lt;=&gt;ï¼ˆç›¸å½“äº =ï¼‰æ“ä½œç¬¦ã€‚ç”±äºæ˜¯ä¸€æ¬¡å®šä½æ•°æ®ï¼Œä¸åƒ BTree ç´¢å¼•éœ€è¦ä»æ ¹èŠ‚ç‚¹åˆ°æèŠ‚ç‚¹ï¼Œæœ€åæ‰èƒ½è®¿é—®åˆ°é¡µèŠ‚ç‚¹è¿™æ ·å¤šæ¬¡ IO è®¿é—®ï¼Œæ‰€ä»¥æ£€ç´¢æ•ˆç‡è¿œé«˜äº BTree ç´¢å¼•ã€‚ ç´¢å¼•è®¾è®¡çš„åŸåˆ™ï¼Ÿ é€‚åˆç´¢å¼•çš„åˆ—æ˜¯å‡ºç°åœ¨ where å­å¥ä¸­çš„åˆ—ï¼Œæˆ–è€…è¿æ¥å­å¥ä¸­æŒ‡å®šçš„åˆ— åŸºæ•°è¾ƒå°çš„ç±»ï¼Œç´¢å¼•æ•ˆæœè¾ƒå·®ï¼Œæ²¡æœ‰å¿…è¦åœ¨æ­¤åˆ—å»ºç«‹ç´¢å¼• ä½¿ç”¨çŸ­ç´¢å¼•ï¼Œå¦‚æœå¯¹é•¿å­—ç¬¦ä¸²åˆ—è¿›è¡Œç´¢å¼•ï¼Œåº”è¯¥æŒ‡å®šä¸€ä¸ªå‰ç¼€é•¿åº¦ï¼Œè¿™æ ·èƒ½å¤ŸèŠ‚çœå¤§é‡ç´¢å¼•ç©ºé—´ ä¸è¦è¿‡åº¦ç´¢å¼•ã€‚ç´¢å¼•éœ€è¦é¢å¤–çš„ç£ç›˜ç©ºé—´ï¼Œå¹¶é™ä½å†™æ“ä½œçš„æ€§èƒ½ã€‚åœ¨ä¿®æ”¹è¡¨å†…å®¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¼šè¿›è¡Œæ›´æ–°ç”šè‡³é‡æ„ï¼Œç´¢å¼•åˆ—è¶Šå¤šï¼Œè¿™ä¸ªæ—¶é—´å°±ä¼šè¶Šé•¿ã€‚æ‰€ä»¥åªä¿æŒéœ€è¦çš„ç´¢å¼•æœ‰åˆ©äºæŸ¥è¯¢å³å¯ã€‚ åˆ›å»ºç´¢å¼•çš„åŸåˆ™ï¼ˆé‡ä¸­ä¹‹é‡ï¼‰ ç´¢å¼•è™½å¥½ï¼Œä½†ä¹Ÿä¸æ˜¯æ— é™åˆ¶çš„ä½¿ç”¨ï¼Œæœ€å¥½ç¬¦åˆä¸€ä¸‹å‡ ä¸ªåŸåˆ™ 1ï¼‰ æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œç»„åˆç´¢å¼•éå¸¸é‡è¦çš„åŸåˆ™ï¼Œmysql ä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢ (&gt;ã€&lt;ã€betweenã€like) å°±åœæ­¢åŒ¹é…ï¼Œæ¯”å¦‚ a = 1 and b = 2 and c &gt; 3 and d = 4 å¦‚æœå»ºç«‹ (a,b,c,d) é¡ºåºçš„ç´¢å¼•ï¼Œd æ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹ (a,b,d,c) çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,d çš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚ 2ï¼‰è¾ƒé¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µæ‰å»åˆ›å»ºç´¢å¼• 3ï¼‰æ›´æ–°é¢‘ç¹å­—æ®µä¸é€‚åˆåˆ›å»ºç´¢å¼• 4ï¼‰è‹¥æ˜¯ä¸èƒ½æœ‰æ•ˆåŒºåˆ†æ•°æ®çš„åˆ—ä¸é€‚åˆåšç´¢å¼•åˆ— (å¦‚æ€§åˆ«ï¼Œç”·å¥³æœªçŸ¥ï¼Œæœ€å¤šä¹Ÿå°±ä¸‰ç§ï¼ŒåŒºåˆ†åº¦å®åœ¨å¤ªä½) 5ï¼‰å°½é‡çš„æ‰©å±•ç´¢å¼•ï¼Œä¸è¦æ–°å»ºç´¢å¼•ã€‚æ¯”å¦‚è¡¨ä¸­å·²ç»æœ‰ a çš„ç´¢å¼•ï¼Œç°åœ¨è¦åŠ  (a,b) çš„ç´¢å¼•ï¼Œé‚£ä¹ˆåªéœ€è¦ä¿®æ”¹åŸæ¥çš„ç´¢å¼•å³å¯ã€‚ 6ï¼‰å®šä¹‰æœ‰å¤–é”®çš„æ•°æ®åˆ—ä¸€å®šè¦å»ºç«‹ç´¢å¼•ã€‚ 7ï¼‰å¯¹äºé‚£äº›æŸ¥è¯¢ä¸­å¾ˆå°‘æ¶‰åŠçš„åˆ—ï¼Œé‡å¤å€¼æ¯”è¾ƒå¤šçš„åˆ—ä¸è¦å»ºç«‹ç´¢å¼•ã€‚ 8ï¼‰å¯¹äºå®šä¹‰ä¸º textã€image å’Œ bit çš„æ•°æ®ç±»å‹çš„åˆ—ä¸è¦å»ºç«‹ç´¢å¼•ã€‚ åˆ›å»ºç´¢å¼•çš„ä¸‰ç§æ–¹å¼ï¼Œåˆ é™¤ç´¢å¼• ç¬¬ä¸€ç§æ–¹å¼ï¼šåœ¨æ‰§è¡Œ CREATE TABLE æ—¶åˆ›å»ºç´¢å¼• CREATE TABLE user_index2 ( id INT auto_increment PRIMARY KEY, first_name VARCHAR (16), last_name VARCHAR (16), id_card VARCHAR (18), information text, KEY name (first_name, last_name), FULLTEXT KEY (information), UNIQUE KEY (id_card) ); ç¬¬äºŒç§æ–¹å¼ï¼šä½¿ç”¨ ALTER TABLE å‘½ä»¤å»å¢åŠ ç´¢å¼• ALTER TABLE table_name ADD INDEX index_name (column_list); ALTER TABLE ç”¨æ¥åˆ›å»ºæ™®é€šç´¢å¼•ã€UNIQUE ç´¢å¼•æˆ– PRIMARY KEY ç´¢å¼•ã€‚ å…¶ä¸­ table_name æ˜¯è¦å¢åŠ ç´¢å¼•çš„è¡¨åï¼Œcolumn_list æŒ‡å‡ºå¯¹å“ªäº›åˆ—è¿›è¡Œç´¢å¼•ï¼Œå¤šåˆ—æ—¶å„åˆ—ä¹‹é—´ç”¨é€—å·åˆ†éš”ã€‚ ç´¢å¼•å index_name å¯è‡ªå·±å‘½åï¼Œç¼ºçœæ—¶ï¼ŒMySQL å°†æ ¹æ®ç¬¬ä¸€ä¸ªç´¢å¼•åˆ—èµ‹ä¸€ä¸ªåç§°ã€‚å¦å¤–ï¼ŒALTER TABLE å…è®¸åœ¨å•ä¸ªè¯­å¥ä¸­æ›´æ”¹å¤šä¸ªè¡¨ï¼Œå› æ­¤å¯ä»¥åœ¨åŒæ—¶åˆ›å»ºå¤šä¸ªç´¢å¼•ã€‚ ç¬¬ä¸‰ç§æ–¹å¼ï¼šä½¿ç”¨ CREATE INDEX å‘½ä»¤åˆ›å»º CREATE INDEX index_name ON table_name (column_list); CREATE INDEX å¯å¯¹è¡¨å¢åŠ æ™®é€šç´¢å¼•æˆ– UNIQUE ç´¢å¼•ã€‚ï¼ˆä½†æ˜¯ï¼Œä¸èƒ½åˆ›å»º PRIMARY KEY ç´¢å¼•ï¼‰ åˆ é™¤ç´¢å¼• æ ¹æ®ç´¢å¼•ååˆ é™¤æ™®é€šç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ï¼šalter table è¡¨å drop KEY ç´¢å¼•å alter table user_index drop KEY name; alter table user_index drop KEY id_card; alter table user_index drop KEY information; åˆ é™¤ä¸»é”®ç´¢å¼•ï¼šalter table è¡¨å drop primary keyï¼ˆå› ä¸ºä¸»é”®åªæœ‰ä¸€ä¸ªï¼‰ã€‚è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸»é”®è‡ªå¢é•¿ï¼Œé‚£ä¹ˆä¸èƒ½ç›´æ¥æ‰§è¡Œæ­¤æ“ä½œï¼ˆè‡ªå¢é•¿ä¾èµ–äºä¸»é”®ç´¢å¼•ï¼‰ï¼š éœ€è¦å–æ¶ˆè‡ªå¢é•¿å†è¡Œåˆ é™¤ï¼š alter table user_index -- é‡æ–°å®šä¹‰å­—æ®µ MODIFY id int, drop PRIMARY KEY ä½†é€šå¸¸ä¸ä¼šåˆ é™¤ä¸»é”®ï¼Œå› ä¸ºè®¾è®¡ä¸»é”®ä¸€å®šä¸ä¸šåŠ¡é€»è¾‘æ— å…³ã€‚ ![desc](file:///C:/Users/ADMINI~1/AppData/Local/Temp/msohtmlclip1/01/clip_image010.png) åˆ›å»ºç´¢å¼•æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ éç©ºå­—æ®µï¼šåº”è¯¥æŒ‡å®šåˆ—ä¸º NOT NULLï¼Œé™¤éä½ æƒ³å­˜å‚¨ NULLã€‚åœ¨ mysql ä¸­ï¼Œå«æœ‰ç©ºå€¼çš„åˆ—å¾ˆéš¾è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–ï¼Œå› ä¸ºå®ƒä»¬ä½¿å¾—ç´¢å¼•ã€ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ä»¥åŠæ¯”è¾ƒè¿ç®—æ›´åŠ å¤æ‚ã€‚ä½ åº”è¯¥ç”¨ 0ã€ä¸€ä¸ªç‰¹æ®Šçš„å€¼æˆ–è€…ä¸€ä¸ªç©ºä¸²ä»£æ›¿ç©ºå€¼ï¼› å–å€¼ç¦»æ•£å¤§çš„å­—æ®µï¼šï¼ˆå˜é‡å„ä¸ªå–å€¼ä¹‹é—´çš„å·®å¼‚ç¨‹åº¦ï¼‰çš„åˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å‰é¢ï¼Œå¯ä»¥é€šè¿‡ count() å‡½æ•°æŸ¥çœ‹å­—æ®µçš„å·®å¼‚å€¼ï¼Œè¿”å›å€¼è¶Šå¤§è¯´æ˜å­—æ®µçš„å”¯ä¸€å€¼è¶Šå¤šå­—æ®µçš„ç¦»æ•£ç¨‹åº¦é«˜ï¼› ç´¢å¼•å­—æ®µè¶Šå°è¶Šå¥½ï¼šæ•°æ®åº“çš„æ•°æ®å­˜å‚¨ä»¥é¡µä¸ºå•ä½ä¸€é¡µå­˜å‚¨çš„æ•°æ®è¶Šå¤šä¸€æ¬¡ IO æ“ä½œè·å–çš„æ•°æ®è¶Šå¤§æ•ˆç‡è¶Šé«˜ã€‚ ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿä¸ºä»€ä¹ˆ é€šå¸¸ï¼Œé€šè¿‡ç´¢å¼•æŸ¥è¯¢æ•°æ®æ¯”å…¨è¡¨æ‰«æè¦å¿«ã€‚ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¿…é¡»æ³¨æ„åˆ°å®ƒçš„ä»£ä»·ã€‚ ç´¢å¼•éœ€è¦ç©ºé—´æ¥å­˜å‚¨ï¼Œä¹Ÿéœ€è¦å®šæœŸç»´æŠ¤ï¼Œ æ¯å½“æœ‰è®°å½•åœ¨è¡¨ä¸­å¢å‡æˆ–ç´¢å¼•åˆ—è¢«ä¿®æ”¹æ—¶ï¼Œç´¢å¼•æœ¬èº«ä¹Ÿä¼šè¢«ä¿®æ”¹ã€‚ è¿™æ„å‘³ç€æ¯æ¡è®°å½•çš„ INSERTï¼ŒDELETEï¼ŒUPDATE å°†ä¸ºæ­¤å¤šä»˜å‡º 4ï¼Œ5 æ¬¡çš„ç£ç›˜ I/Oã€‚ å› ä¸ºç´¢å¼•éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´å’Œå¤„ç†ï¼Œé‚£äº›ä¸å¿…è¦çš„ç´¢å¼•åè€Œä¼šä½¿æŸ¥è¯¢ååº”æ—¶é—´å˜æ…¢ã€‚ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸ä¸€å®šèƒ½æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œç´¢å¼•èŒƒå›´æŸ¥è¯¢ (INDEX RANGE SCAN) é€‚ç”¨äºä¸¤ç§æƒ…å†µ: åŸºäºä¸€ä¸ªèŒƒå›´çš„æ£€ç´¢ï¼Œä¸€èˆ¬æŸ¥è¯¢è¿”å›ç»“æœé›†å°äºè¡¨ä¸­è®°å½•æ•°çš„ 30% åŸºäºéå”¯ä¸€æ€§ç´¢å¼•çš„æ£€ç´¢ ç™¾ä¸‡çº§åˆ«æˆ–ä»¥ä¸Šçš„æ•°æ®å¦‚ä½•åˆ é™¤ å…³äºç´¢å¼•ï¼šç”±äºç´¢å¼•éœ€è¦é¢å¤–çš„ç»´æŠ¤æˆæœ¬ï¼Œå› ä¸ºç´¢å¼•æ–‡ä»¶æ˜¯å•ç‹¬å­˜åœ¨çš„æ–‡ä»¶, æ‰€ä»¥å½“æˆ‘ä»¬å¯¹æ•°æ®çš„å¢åŠ , ä¿®æ”¹, åˆ é™¤, éƒ½ä¼šäº§ç”Ÿé¢å¤–çš„å¯¹ç´¢å¼•æ–‡ä»¶çš„æ“ä½œ, è¿™äº›æ“ä½œéœ€è¦æ¶ˆè€—é¢å¤–çš„ IO, ä¼šé™ä½å¢ / æ”¹ / åˆ çš„æ‰§è¡Œæ•ˆç‡ã€‚æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬åˆ é™¤æ•°æ®åº“ç™¾ä¸‡çº§åˆ«æ•°æ®çš„æ—¶å€™ï¼ŒæŸ¥è¯¢ MySQL å®˜æ–¹æ‰‹å†Œå¾—çŸ¥åˆ é™¤æ•°æ®çš„é€Ÿåº¦å’Œåˆ›å»ºçš„ç´¢å¼•æ•°é‡æ˜¯æˆæ­£æ¯”çš„ã€‚ æ‰€ä»¥æˆ‘ä»¬æƒ³è¦åˆ é™¤ç™¾ä¸‡æ•°æ®çš„æ—¶å€™å¯ä»¥å…ˆåˆ é™¤ç´¢å¼•ï¼ˆæ­¤æ—¶å¤§æ¦‚è€—æ—¶ä¸‰åˆ†å¤šé’Ÿï¼‰ ç„¶ååˆ é™¤å…¶ä¸­æ— ç”¨æ•°æ®ï¼ˆæ­¤è¿‡ç¨‹éœ€è¦ä¸åˆ°ä¸¤åˆ†é’Ÿï¼‰ åˆ é™¤å®Œæˆåé‡æ–°åˆ›å»ºç´¢å¼• (æ­¤æ—¶æ•°æ®è¾ƒå°‘äº†) åˆ›å»ºç´¢å¼•ä¹Ÿéå¸¸å¿«ï¼Œçº¦ååˆ†é’Ÿå·¦å³ã€‚ ä¸ä¹‹å‰çš„ç›´æ¥åˆ é™¤ç»å¯¹æ˜¯è¦å¿«é€Ÿå¾ˆå¤šï¼Œæ›´åˆ«è¯´ä¸‡ä¸€åˆ é™¤ä¸­æ–­, ä¸€åˆ‡åˆ é™¤ä¼šå›æ»šã€‚é‚£æ›´æ˜¯å‘äº†ã€‚ å‰ç¼€ç´¢å¼• è¯­æ³•ï¼šindex(field(10))ï¼Œä½¿ç”¨å­—æ®µå€¼çš„å‰ 10 ä¸ªå­—ç¬¦å»ºç«‹ç´¢å¼•ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨å­—æ®µçš„å…¨éƒ¨å†…å®¹å»ºç«‹ç´¢å¼•ã€‚ å‰æï¼šå‰ç¼€çš„æ ‡è¯†åº¦é«˜ã€‚æ¯”å¦‚å¯†ç å°±é€‚åˆå»ºç«‹å‰ç¼€ç´¢å¼•ï¼Œå› ä¸ºå¯†ç å‡ ä¹å„ä¸ç›¸åŒã€‚ å®æ“çš„éš¾åº¦ï¼šåœ¨äºå‰ç¼€æˆªå–çš„é•¿åº¦ã€‚ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨select count(*)/count(distinct left(password,prefixLen));ï¼Œé€šè¿‡ä»è°ƒæ•´prefixLençš„å€¼ï¼ˆä» 1 è‡ªå¢ï¼‰æŸ¥çœ‹ä¸åŒå‰ç¼€é•¿åº¦çš„ä¸€ä¸ªå¹³å‡åŒ¹é…åº¦ï¼Œæ¥è¿‘ 1 æ—¶å°±å¯ä»¥äº†ï¼ˆè¡¨ç¤ºä¸€ä¸ªå¯†ç çš„å‰prefixLenä¸ªå­—ç¬¦å‡ ä¹èƒ½ç¡®å®šå”¯ä¸€ä¸€æ¡è®°å½•ï¼‰ ä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æœ€å·¦ä¼˜å…ˆï¼Œåœ¨åˆ›å»ºå¤šåˆ—ç´¢å¼•æ—¶ï¼Œè¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œwhere å­å¥ä¸­ä½¿ç”¨æœ€é¢‘ç¹çš„ä¸€åˆ—æ”¾åœ¨æœ€å·¦è¾¹ã€‚ æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œéå¸¸é‡è¦çš„åŸåˆ™ï¼Œmysql ä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢ (&gt;ã€&lt;ã€betweenã€like) å°±åœæ­¢åŒ¹é…ï¼Œæ¯”å¦‚ a = 1 and b = 2 and c &gt; 3 and d = 4 å¦‚æœå»ºç«‹ (a,b,c,d) é¡ºåºçš„ç´¢å¼•ï¼Œd æ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹ (a,b,d,c) çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,d çš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚ = å’Œ in å¯ä»¥ä¹±åºï¼Œæ¯”å¦‚ a = 1 and b = 2 and c = 3 å»ºç«‹ (a,b,c) ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼Œmysql çš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼ Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ« åœ¨ B æ ‘ä¸­ï¼Œä½ å¯ä»¥å°†é”®å’Œå€¼å­˜æ”¾åœ¨å†…éƒ¨èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹ï¼›ä½†åœ¨ B + æ ‘ä¸­ï¼Œå†…éƒ¨èŠ‚ç‚¹éƒ½æ˜¯é”®ï¼Œæ²¡æœ‰å€¼ï¼Œå¶å­èŠ‚ç‚¹åŒæ—¶å­˜æ”¾é”®å’Œå€¼ã€‚ B + æ ‘çš„å¶å­èŠ‚ç‚¹æœ‰ä¸€æ¡é“¾ç›¸è¿ï¼Œè€Œ B æ ‘çš„å¶å­èŠ‚ç‚¹å„è‡ªç‹¬ç«‹ã€‚ Â· ![desc](file:///C:/Users/ADMINI~1/AppData/Local/Temp/msohtmlclip1/01/clip_image012.png) ä½¿ç”¨Bæ ‘çš„å¥½å¤„ B æ ‘å¯ä»¥åœ¨å†…éƒ¨èŠ‚ç‚¹åŒæ—¶å­˜å‚¨é”®å’Œå€¼ï¼Œå› æ­¤ï¼ŒæŠŠé¢‘ç¹è®¿é—®çš„æ•°æ®æ”¾åœ¨é è¿‘æ ¹èŠ‚ç‚¹çš„åœ°æ–¹å°†ä¼šå¤§å¤§æé«˜çƒ­ç‚¹æ•°æ®çš„æŸ¥è¯¢æ•ˆç‡ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾— B æ ‘åœ¨ç‰¹å®šæ•°æ®é‡å¤å¤šæ¬¡æŸ¥è¯¢çš„åœºæ™¯ä¸­æ›´åŠ é«˜æ•ˆã€‚ ä½¿ç”¨B+æ ‘çš„å¥½å¤„ ç”±äº B + æ ‘çš„å†…éƒ¨èŠ‚ç‚¹åªå­˜æ”¾é”®ï¼Œä¸å­˜æ”¾å€¼ï¼Œå› æ­¤ï¼Œä¸€æ¬¡è¯»å–ï¼Œå¯ä»¥åœ¨å†…å­˜é¡µä¸­è·å–æ›´å¤šçš„é”®ï¼Œæœ‰åˆ©äºæ›´å¿«åœ°ç¼©å°æŸ¥æ‰¾èŒƒå›´ã€‚ B + æ ‘çš„å¶èŠ‚ç‚¹ç”±ä¸€æ¡é“¾ç›¸è¿ï¼Œå› æ­¤ï¼Œå½“éœ€è¦è¿›è¡Œä¸€æ¬¡å…¨æ•°æ®éå†çš„æ—¶å€™ï¼ŒB + æ ‘åªéœ€è¦ä½¿ç”¨ O(logN) æ—¶é—´æ‰¾åˆ°æœ€å°çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡é“¾è¿›è¡Œ O(N) çš„é¡ºåºéå†å³å¯ã€‚è€Œ B æ ‘åˆ™éœ€è¦å¯¹æ ‘çš„æ¯ä¸€å±‚è¿›è¡Œéå†ï¼Œè¿™ä¼šéœ€è¦æ›´å¤šçš„å†…å­˜ç½®æ¢æ¬¡æ•°ï¼Œå› æ­¤ä¹Ÿå°±éœ€è¦èŠ±è´¹æ›´å¤šçš„æ—¶é—´ Hashç´¢å¼•å’ŒB+æ ‘æ‰€æœ‰æœ‰ä»€ä¹ˆåŒºåˆ«æˆ–è€…è¯´ä¼˜åŠ£å‘¢? é¦–å…ˆè¦çŸ¥é“ Hash ç´¢å¼•å’Œ B + æ ‘ç´¢å¼•çš„åº•å±‚å®ç°åŸç†ï¼š hash ç´¢å¼•åº•å±‚å°±æ˜¯ hash è¡¨ï¼Œè¿›è¡ŒæŸ¥æ‰¾æ—¶ï¼Œè°ƒç”¨ä¸€æ¬¡ hash å‡½æ•°å°±å¯ä»¥è·å–åˆ°ç›¸åº”çš„é”®å€¼ï¼Œä¹‹åè¿›è¡Œå›è¡¨æŸ¥è¯¢è·å¾—å®é™…æ•°æ®ã€‚B + æ ‘åº•å±‚å®ç°æ˜¯å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ã€‚å¯¹äºæ¯ä¸€æ¬¡çš„æŸ¥è¯¢éƒ½æ˜¯ä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼ŒæŸ¥æ‰¾åˆ°å¶å­èŠ‚ç‚¹æ–¹å¯ä»¥è·å¾—æ‰€æŸ¥é”®å€¼ï¼Œç„¶åæ ¹æ®æŸ¥è¯¢åˆ¤æ–­æ˜¯å¦éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®ã€‚ é‚£ä¹ˆå¯ä»¥çœ‹å‡ºä»–ä»¬æœ‰ä»¥ä¸‹çš„ä¸åŒï¼š hash ç´¢å¼•è¿›è¡Œç­‰å€¼æŸ¥è¯¢æ›´å¿« (ä¸€èˆ¬æƒ…å†µä¸‹)ï¼Œä½†æ˜¯å´æ— æ³•è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ã€‚ å› ä¸ºåœ¨ hash ç´¢å¼•ä¸­ç»è¿‡ hash å‡½æ•°å»ºç«‹ç´¢å¼•ä¹‹åï¼Œç´¢å¼•çš„é¡ºåºä¸åŸé¡ºåºæ— æ³•ä¿æŒä¸€è‡´ï¼Œä¸èƒ½æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€‚è€Œ B + æ ‘çš„çš„æ‰€æœ‰èŠ‚ç‚¹çš†éµå¾ª (å·¦èŠ‚ç‚¹å°äºçˆ¶èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œå¤šå‰æ ‘ä¹Ÿç±»ä¼¼)ï¼Œå¤©ç„¶æ”¯æŒèŒƒå›´ã€‚ hash ç´¢å¼•ä¸æ”¯æŒä½¿ç”¨ç´¢å¼•è¿›è¡Œæ’åºï¼ŒåŸç†åŒä¸Šã€‚ hash ç´¢å¼•ä¸æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢ä»¥åŠå¤šåˆ—ç´¢å¼•çš„æœ€å·¦å‰ç¼€åŒ¹é…ã€‚åŸç†ä¹Ÿæ˜¯å› ä¸º hash å‡½æ•°çš„ä¸å¯é¢„æµ‹ã€‚AAAA å’Œ AAAAB çš„ç´¢å¼•æ²¡æœ‰ç›¸å…³æ€§ã€‚ hash ç´¢å¼•ä»»ä½•æ—¶å€™éƒ½é¿å…ä¸äº†å›è¡¨æŸ¥è¯¢æ•°æ®ï¼Œè€Œ B + æ ‘åœ¨ç¬¦åˆæŸäº›æ¡ä»¶ (èšç°‡ç´¢å¼•ï¼Œè¦†ç›–ç´¢å¼•ç­‰) çš„æ—¶å€™å¯ä»¥åªé€šè¿‡ç´¢å¼•å®ŒæˆæŸ¥è¯¢ã€‚ hash ç´¢å¼•è™½ç„¶åœ¨ç­‰å€¼æŸ¥è¯¢ä¸Šè¾ƒå¿«ï¼Œä½†æ˜¯ä¸ç¨³å®šã€‚æ€§èƒ½ä¸å¯é¢„æµ‹ï¼Œå½“æŸä¸ªé”®å€¼å­˜åœ¨å¤§é‡é‡å¤çš„æ—¶å€™ï¼Œå‘ç”Ÿ hash ç¢°æ’ï¼Œæ­¤æ—¶æ•ˆç‡å¯èƒ½æå·®ã€‚è€Œ B + æ ‘çš„æŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒç¨³å®šï¼Œå¯¹äºæ‰€æœ‰çš„æŸ¥è¯¢éƒ½æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ï¼Œä¸”æ ‘çš„é«˜åº¦è¾ƒä½ã€‚ å› æ­¤ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç›´æ¥é€‰æ‹© B + æ ‘ç´¢å¼•å¯ä»¥è·å¾—ç¨³å®šä¸”è¾ƒå¥½çš„æŸ¥è¯¢é€Ÿåº¦ã€‚è€Œä¸éœ€è¦ä½¿ç”¨ hash ç´¢å¼•ã€‚ æ•°æ®åº“ä¸ºä»€ä¹ˆä½¿ç”¨B+æ ‘è€Œä¸æ˜¯Bæ ‘ B æ ‘åªé€‚åˆéšæœºæ£€ç´¢ï¼Œè€Œ B + æ ‘åŒæ—¶æ”¯æŒéšæœºæ£€ç´¢å’Œé¡ºåºæ£€ç´¢ï¼› B + æ ‘ç©ºé—´åˆ©ç”¨ç‡æ›´é«˜ï¼Œå¯å‡å°‘ I/O æ¬¡æ•°ï¼Œç£ç›˜è¯»å†™ä»£ä»·æ›´ä½ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç´¢å¼•æœ¬èº«ä¹Ÿå¾ˆå¤§ï¼Œä¸å¯èƒ½å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤ç´¢å¼•å¾€å¾€ä»¥ç´¢å¼•æ–‡ä»¶çš„å½¢å¼å­˜å‚¨çš„ç£ç›˜ä¸Šã€‚è¿™æ ·çš„è¯ï¼Œç´¢å¼•æŸ¥æ‰¾è¿‡ç¨‹ä¸­å°±è¦äº§ç”Ÿç£ç›˜ I/O æ¶ˆè€—ã€‚B + æ ‘çš„å†…éƒ¨ç»“ç‚¹å¹¶æ²¡æœ‰æŒ‡å‘å…³é”®å­—å…·ä½“ä¿¡æ¯çš„æŒ‡é’ˆï¼Œåªæ˜¯ä½œä¸ºç´¢å¼•ä½¿ç”¨ï¼Œå…¶å†…éƒ¨ç»“ç‚¹æ¯” B æ ‘å°ï¼Œç›˜å—èƒ½å®¹çº³çš„ç»“ç‚¹ä¸­å…³é”®å­—æ•°é‡æ›´å¤šï¼Œä¸€æ¬¡æ€§è¯»å…¥å†…å­˜ä¸­å¯ä»¥æŸ¥æ‰¾çš„å…³é”®å­—ä¹Ÿå°±è¶Šå¤šï¼Œç›¸å¯¹çš„ï¼ŒIO è¯»å†™æ¬¡æ•°ä¹Ÿå°±é™ä½äº†ã€‚è€Œ IO è¯»å†™æ¬¡æ•°æ˜¯å½±å“ç´¢å¼•æ£€ç´¢æ•ˆç‡çš„æœ€å¤§å› ç´ ï¼› B + æ ‘çš„æŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®šã€‚B æ ‘æœç´¢æœ‰å¯èƒ½ä¼šåœ¨éå¶å­ç»“ç‚¹ç»“æŸï¼Œè¶Šé è¿‘æ ¹èŠ‚ç‚¹çš„è®°å½•æŸ¥æ‰¾æ—¶é—´è¶ŠçŸ­ï¼Œåªè¦æ‰¾åˆ°å…³é”®å­—å³å¯ç¡®å®šè®°å½•çš„å­˜åœ¨ï¼Œå…¶æ€§èƒ½ç­‰ä»·äºåœ¨å…³é”®å­—å…¨é›†å†…åšä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ã€‚è€Œåœ¨ B + æ ‘ä¸­ï¼Œé¡ºåºæ£€ç´¢æ¯”è¾ƒæ˜æ˜¾ï¼Œéšæœºæ£€ç´¢æ—¶ï¼Œä»»ä½•å…³é”®å­—çš„æŸ¥æ‰¾éƒ½å¿…é¡»èµ°ä¸€æ¡ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯ï¼Œæ‰€æœ‰å…³é”®å­—çš„æŸ¥æ‰¾è·¯å¾„é•¿åº¦ç›¸åŒï¼Œå¯¼è‡´æ¯ä¸€ä¸ªå…³é”®å­—çš„æŸ¥è¯¢æ•ˆç‡ç›¸å½“ã€‚ B - æ ‘åœ¨æé«˜äº†ç£ç›˜ IO æ€§èƒ½çš„åŒæ—¶å¹¶æ²¡æœ‰è§£å†³å…ƒç´ éå†çš„æ•ˆç‡ä½ä¸‹çš„é—®é¢˜ã€‚B + æ ‘çš„å¶å­èŠ‚ç‚¹ä½¿ç”¨æŒ‡é’ˆé¡ºåºè¿æ¥åœ¨ä¸€èµ·ï¼Œåªè¦éå†å¶å­èŠ‚ç‚¹å°±å¯ä»¥å®ç°æ•´æ£µæ ‘çš„éå†ã€‚è€Œä¸”åœ¨æ•°æ®åº“ä¸­åŸºäºèŒƒå›´çš„æŸ¥è¯¢æ˜¯éå¸¸é¢‘ç¹çš„ï¼Œè€Œ B æ ‘ä¸æ”¯æŒè¿™æ ·çš„æ“ä½œã€‚ å¢åˆ æ–‡ä»¶ï¼ˆèŠ‚ç‚¹ï¼‰æ—¶ï¼Œæ•ˆç‡æ›´é«˜ã€‚å› ä¸º B + æ ‘çš„å¶å­èŠ‚ç‚¹åŒ…å«æ‰€æœ‰å…³é”®å­—ï¼Œå¹¶ä»¥æœ‰åºçš„é“¾è¡¨ç»“æ„å­˜å‚¨ï¼Œè¿™æ ·å¯å¾ˆå¥½æé«˜å¢åˆ æ•ˆç‡ã€‚ B+æ ‘åœ¨æ»¡è¶³èšç°‡ç´¢å¼•å’Œè¦†ç›–ç´¢å¼•çš„æ—¶å€™ä¸éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®ï¼Œ åœ¨ B + æ ‘çš„ç´¢å¼•ä¸­ï¼Œå¶å­èŠ‚ç‚¹å¯èƒ½å­˜å‚¨äº†å½“å‰çš„ key å€¼ï¼Œä¹Ÿå¯èƒ½å­˜å‚¨äº†å½“å‰çš„ key å€¼ä»¥åŠæ•´è¡Œçš„æ•°æ®ï¼Œè¿™å°±æ˜¯èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ã€‚ åœ¨ InnoDB ä¸­ï¼Œåªæœ‰ä¸»é”®ç´¢å¼•æ˜¯èšç°‡ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰ä¸»é”®ï¼Œåˆ™æŒ‘é€‰ä¸€ä¸ªå”¯ä¸€é”®å»ºç«‹èšç°‡ç´¢å¼•ã€‚å¦‚æœæ²¡æœ‰å”¯ä¸€é”®ï¼Œåˆ™éšå¼çš„ç”Ÿæˆä¸€ä¸ªé”®æ¥å»ºç«‹èšç°‡ç´¢å¼•ã€‚ å½“æŸ¥è¯¢ä½¿ç”¨èšç°‡ç´¢å¼•æ—¶ï¼Œåœ¨å¯¹åº”çš„å¶å­èŠ‚ç‚¹ï¼Œå¯ä»¥è·å–åˆ°æ•´è¡Œæ•°æ®ï¼Œå› æ­¤ä¸ç”¨å†æ¬¡è¿›è¡Œå›è¡¨æŸ¥è¯¢ã€‚ ä»€ä¹ˆæ˜¯èšç°‡ç´¢å¼•ï¼Ÿä½•æ—¶ä½¿ç”¨èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼• èšç°‡ç´¢å¼•ï¼šå°†æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æ”¾åˆ°äº†ä¸€å—ï¼Œæ‰¾åˆ°ç´¢å¼•ä¹Ÿå°±æ‰¾åˆ°äº†æ•°æ® éèšç°‡ç´¢å¼•ï¼šå°†æ•°æ®å­˜å‚¨äºç´¢å¼•åˆ†å¼€ç»“æ„ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹æŒ‡å‘äº†æ•°æ®çš„å¯¹åº”è¡Œï¼Œmyisam é€šè¿‡ key_buffer æŠŠç´¢å¼•å…ˆç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œå½“éœ€è¦è®¿é—®æ•°æ®æ—¶ï¼ˆé€šè¿‡ç´¢å¼•è®¿é—®æ•°æ®ï¼‰ï¼Œåœ¨å†…å­˜ä¸­ç›´æ¥æœç´¢ç´¢å¼•ï¼Œç„¶åé€šè¿‡ç´¢å¼•æ‰¾åˆ°ç£ç›˜ç›¸åº”æ•°æ®ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆç´¢å¼•ä¸åœ¨ key buffer å‘½ä¸­æ—¶ï¼Œé€Ÿåº¦æ…¢çš„åŸå›  æ¾„æ¸…ä¸€ä¸ªæ¦‚å¿µï¼šinnodb ä¸­ï¼Œåœ¨èšç°‡ç´¢å¼•ä¹‹ä¸Šåˆ›å»ºçš„ç´¢å¼•ç§°ä¹‹ä¸ºè¾…åŠ©ç´¢å¼•ï¼Œè¾…åŠ©ç´¢å¼•è®¿é—®æ•°æ®æ€»æ˜¯éœ€è¦äºŒæ¬¡æŸ¥æ‰¾ï¼Œéèšç°‡ç´¢å¼•éƒ½æ˜¯è¾…åŠ©ç´¢å¼•ï¼Œåƒå¤åˆç´¢å¼•ã€å‰ç¼€ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ï¼Œè¾…åŠ©ç´¢å¼•å¶å­èŠ‚ç‚¹å­˜å‚¨çš„ä¸å†æ˜¯è¡Œçš„ç‰©ç†ä½ç½®ï¼Œè€Œæ˜¯ä¸»é”®å€¼ ä½•æ—¶ä½¿ç”¨èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼• Â· ![desc](file:///C:/Users/ADMINI~1/AppData/Local/Temp/msohtmlclip1/01/clip_image014.png) éèšç°‡ç´¢å¼•ä¸€å®šä¼šå›è¡¨æŸ¥è¯¢å—ï¼Ÿ ä¸ä¸€å®šï¼Œè¿™æ¶‰åŠåˆ°æŸ¥è¯¢è¯­å¥æ‰€è¦æ±‚çš„å­—æ®µæ˜¯å¦å…¨éƒ¨å‘½ä¸­äº†ç´¢å¼•ï¼Œå¦‚æœå…¨éƒ¨å‘½ä¸­äº†ç´¢å¼•ï¼Œé‚£ä¹ˆå°±ä¸å¿…å†è¿›è¡Œå›è¡¨æŸ¥è¯¢ã€‚ ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬åœ¨å‘˜å·¥è¡¨çš„å¹´é¾„ä¸Šå»ºç«‹äº†ç´¢å¼•ï¼Œé‚£ä¹ˆå½“è¿›è¡Œselect age from employee where age &lt; 20çš„æŸ¥è¯¢æ—¶ï¼Œåœ¨ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œå·²ç»åŒ…å«äº† age ä¿¡æ¯ï¼Œä¸ä¼šå†æ¬¡è¿›è¡Œå›è¡¨æŸ¥è¯¢ã€‚ è”åˆç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„è”åˆç´¢å¼•ä¸­çš„é¡ºåºï¼Ÿ MySQL å¯ä»¥ä½¿ç”¨å¤šä¸ªå­—æ®µåŒæ—¶å»ºç«‹ä¸€ä¸ªç´¢å¼•ï¼Œå«åšè”åˆç´¢å¼•ã€‚åœ¨è”åˆç´¢å¼•ä¸­ï¼Œå¦‚æœæƒ³è¦å‘½ä¸­ç´¢å¼•ï¼Œéœ€è¦æŒ‰ç…§å»ºç«‹ç´¢å¼•æ—¶çš„å­—æ®µé¡ºåºæŒ¨ä¸ªä½¿ç”¨ï¼Œå¦åˆ™æ— æ³•å‘½ä¸­ç´¢å¼•ã€‚ å…·ä½“åŸå› ä¸º: MySQL ä½¿ç”¨ç´¢å¼•æ—¶éœ€è¦ç´¢å¼•æœ‰åºï¼Œå‡è®¾ç°åœ¨å»ºç«‹äº† &quot;nameï¼Œageï¼Œschool&quot; çš„è”åˆç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•çš„æ’åºä¸º: å…ˆæŒ‰ç…§ name æ’åºï¼Œå¦‚æœ name ç›¸åŒï¼Œåˆ™æŒ‰ç…§ age æ’åºï¼Œå¦‚æœ age çš„å€¼ä¹Ÿç›¸ç­‰ï¼Œåˆ™æŒ‰ç…§ school è¿›è¡Œæ’åºã€‚ å½“è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œæ­¤æ—¶ç´¢å¼•ä»…ä»…æŒ‰ç…§ name ä¸¥æ ¼æœ‰åºï¼Œå› æ­¤å¿…é¡»é¦–å…ˆä½¿ç”¨ name å­—æ®µè¿›è¡Œç­‰å€¼æŸ¥è¯¢ï¼Œä¹‹åå¯¹äºåŒ¹é…åˆ°çš„åˆ—è€Œè¨€ï¼Œå…¶æŒ‰ç…§ age å­—æ®µä¸¥æ ¼æœ‰åºï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ age å­—æ®µç”¨åšç´¢å¼•æŸ¥æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ã€‚å› æ­¤åœ¨å»ºç«‹è”åˆç´¢å¼•çš„æ—¶å€™åº”è¯¥æ³¨æ„ç´¢å¼•åˆ—çš„é¡ºåºï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°†æŸ¥è¯¢éœ€æ±‚é¢‘ç¹æˆ–è€…å­—æ®µé€‰æ‹©æ€§é«˜çš„åˆ—æ”¾åœ¨å‰é¢ã€‚æ­¤å¤–å¯ä»¥æ ¹æ®ç‰¹ä¾‹çš„æŸ¥è¯¢æˆ–è€…è¡¨ç»“æ„è¿›è¡Œå•ç‹¬çš„è°ƒæ•´ã€‚ äº‹åŠ¡ ä»€ä¹ˆæ˜¯æ•°æ®åº“äº‹åŠ¡ï¼Ÿ 1ã€ç”¨ BEGIN, ROLLBACK, COMMITæ¥å®ç° BEGIN å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ ROLLBACK äº‹åŠ¡å›æ»š COMMIT äº‹åŠ¡ç¡®è®¤ 2ã€ç›´æ¥ç”¨ SET æ¥æ”¹å˜ MySQL çš„è‡ªåŠ¨æäº¤æ¨¡å¼: SET AUTOCOMMIT=0 ç¦æ­¢è‡ªåŠ¨æäº¤ SET AUTOCOMMIT=1 å¼€å¯è‡ªåŠ¨æäº¤ åœ¨ MySQL ä¸­åªæœ‰ä½¿ç”¨äº† Innodb æ•°æ®åº“å¼•æ“çš„æ•°æ®åº“æˆ–è¡¨æ‰æ”¯æŒäº‹åŠ¡ã€‚ äº‹åŠ¡å¤„ç†å¯ä»¥ç”¨æ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œä¿è¯æˆæ‰¹çš„ SQL è¯­å¥è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚ äº‹åŠ¡ç”¨æ¥ç®¡ç† insert,update,delete è¯­å¥ äº‹ç‰©çš„å››å¤§ç‰¹æ€§(ACID)ä»‹ç»ä¸€ä¸‹? **åŸå­æ€§ï¼š**ä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚ **ä¸€è‡´æ€§ï¼š**åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚ **éš”ç¦»æ€§ï¼š**æ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚ **æŒä¹…æ€§ï¼š**äº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ ä»€ä¹ˆæ˜¯è„è¯»ï¼Ÿå¹»è¯»ï¼Ÿä¸å¯é‡å¤è¯»ï¼Ÿ ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ é” å¯¹MySQLçš„é”äº†è§£å— éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³» æŒ‰ç…§é”çš„ç²’åº¦åˆ†æ•°æ®åº“é”æœ‰å“ªäº›ï¼Ÿé”æœºåˆ¶ä¸InnoDBé”ç®—æ³• ä»é”çš„ç±»åˆ«ä¸Šåˆ†MySQLéƒ½æœ‰å“ªäº›é”å‘¢ï¼Ÿåƒä¸Šé¢é‚£æ ·å­è¿›è¡Œé”å®šå²‚ä¸æ˜¯æœ‰ç‚¹é˜»ç¢å¹¶å‘æ•ˆç‡äº† MySQLä¸­InnoDBå¼•æ“çš„è¡Œé”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ InnoDBå­˜å‚¨å¼•æ“çš„é”çš„ç®—æ³•æœ‰ä¸‰ç§ ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆå®ç°çš„ï¼Ÿ è§†å›¾ 1234567#åˆ›å»ºè§†å›¾create view è§†å›¾åç§° as selectè¯­å¥;#--æŸ¥çœ‹è§†å›¾ç»“æ„ï¼šdesc user_view; show create view user_view;#--æŸ¥çœ‹è§†å›¾å†…å®¹ï¼šselect * from user_view; ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾ï¼Ÿä»€ä¹ˆæ˜¯è§†å›¾ï¼Ÿ ç”±åŸºè¡¨é€šè¿‡SQLåŠ¨æ€ç”Ÿæˆçš„è™šæ‹Ÿè¡¨ï¼Œæœ¬èº«ä¸åŒ…å«æ•°æ®ï¼ŒåŸºè¡¨å’Œè§†å›¾æ•°æ®ä¼šäº’ç›¸å½±å“ã€‚åªæœ‰åŸºè¡¨å’Œè§†å›¾å­—æ®µä¸€ä¸€å¯¹åº”æ‰å¯ä»¥å¢åˆ æ”¹æŸ¥ã€‚ åœ¨Mysqlä¸­è§†å›¾çš„ç±»å‹åˆ†ä¸ºï¼š 1ã€MERGE å°†è§†å›¾çš„sqlè¯­å¥å’Œå¼•ç”¨è§†å›¾çš„sqlè¯­å¥åˆå¹¶åœ¨ä¸€èµ·ï¼Œæœ€åä¸€èµ·æ‰§è¡Œã€‚ 2ã€TEMPTABLE å°†è§†å›¾çš„ç»“æœé›†å­˜æ”¾åœ¨ä¸´æ—¶è¡¨ä¸­ï¼Œæ¯æ¬¡æ‰§è¡Œæ—¶ä»ä¸´æ—¶è¡¨ä¸­æ“ä½œã€‚ 3ã€UNDEFINED é»˜è®¤çš„è§†å›¾ç±»å‹ï¼ŒDBMSå€¾å‘äºé€‰æ‹©è€Œä¸æ˜¯å¿…å®šé€‰æ‹©MERGEï¼Œå› ä¸ºMERGEçš„æ•ˆç‡æ›´é«˜ï¼Œæ›´é‡è¦çš„æ˜¯ä¸´æ—¶è¡¨è§†å›¾ä¸èƒ½æ›´æ–°ã€‚ æ‰€ä»¥ï¼Œè¿™é‡Œæ¨èä½¿ç”¨MERGEç®—æ³•ç±»å‹è§†å›¾ã€‚ è§†å›¾æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ 1ï¼‰ç®€å•ï¼šä½¿ç”¨è§†å›¾çš„ç”¨æˆ·å®Œå…¨ä¸éœ€è¦å…³å¿ƒåé¢å¯¹åº”çš„è¡¨çš„ç»“æ„ã€å…³è”æ¡ä»¶å’Œç­›é€‰æ¡ä»¶ï¼Œå¯¹ç”¨æˆ·æ¥è¯´å·²ç»æ˜¯è¿‡æ»¤å¥½çš„å¤åˆæ¡ä»¶çš„ç»“æœé›†ã€‚ 2ï¼‰å®‰å…¨ï¼šä½¿ç”¨è§†å›¾çš„ç”¨æˆ·åªèƒ½è®¿é—®ä»–ä»¬è¢«å…è®¸æŸ¥è¯¢çš„ç»“æœé›†ï¼Œå¯¹è¡¨çš„æƒé™ç®¡ç†å¹¶ä¸èƒ½é™åˆ¶åˆ°æŸä¸ªè¡ŒæŸä¸ªåˆ—ï¼Œä½†æ˜¯é€šè¿‡è§†å›¾å°±å¯ä»¥ç®€å•çš„å®ç°ã€‚ 3ï¼‰æ•°æ®ç‹¬ç«‹ï¼šä¸€æ—¦è§†å›¾çš„ç»“æ„ç¡®å®šäº†ï¼Œå¯ä»¥å±è”½è¡¨ç»“æ„å˜åŒ–å¯¹ç”¨æˆ·çš„å½±å“ï¼Œæºè¡¨å¢åŠ åˆ—å¯¹è§†å›¾æ²¡æœ‰å½±å“ï¼›æºè¡¨ä¿®æ”¹åˆ—åï¼Œåˆ™å¯ä»¥é€šè¿‡ä¿®æ”¹è§†å›¾æ¥è§£å†³ï¼Œä¸ä¼šé€ æˆå¯¹è®¿é—®è€…çš„å½±å“ã€‚ æ€»è€Œè¨€ä¹‹ï¼Œä½¿ç”¨è§†å›¾çš„å¤§éƒ¨åˆ†æƒ…å†µæ˜¯ä¸ºäº†ä¿éšœæ•°æ®å®‰å…¨æ€§ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚ è§†å›¾çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ åˆ†è¡¨ å¯ç”¨è®¡ç®—åˆ— å¦‚æœ‰è®¢å•æ•°é‡å’Œå•ä»·ï¼Œä¸€èˆ¬æ•°æ®åº“è®¾è®¡ä¸ä¼šæœ‰æ€»ä»·å­—æ®µï¼Œè§†å›¾å¯æœ‰ å¯¼å…¥å¯¼å‡ºè¡¨ ä½¿ç”¨è§†å›¾å¯¼å…¥å¯¼å‡ºæ•°æ® æƒé™æ§åˆ¶ï¼Œæé«˜å®‰å…¨æ€§ åˆ›å»ºè§†å›¾æ§åˆ¶æ˜¾ç¤ºå­—æ®µï¼Œç”¨æˆ·ä»è§†å›¾æŸ¥è¯¢åªä¼šæ˜¾ç¤ºæ§åˆ¶çš„å­—æ®µï¼Œå¯ä»¥æŠŠæƒé™é™å®šåˆ°è¡Œåˆ—çº§åˆ« è§£è€¦åˆ åˆ›å»ºè§†å›¾ååŸºè¡¨ç»“æ„æ”¹å˜ä¸å½±å“è§†å›¾ï¼Œé‡æ„æ•°æ®åº“ä¸å½±å“ç¨‹åºï¼Œå‘åå…¼å®¹ã€‚ ç®€åŒ–æ•°æ®æ“ä½œ å°†å¤æ‚çš„è”åˆç­‰æŸ¥è¯¢åˆ›å»ºä¸ºè§†å›¾ï¼Œå¯åªæŸ¥è¯¢è§†å›¾æ¥ç®€åŒ–æ“ä½œ è§†å›¾çš„ä¼˜ç‚¹ è§†å›¾çš„ç¼ºç‚¹ æŸ¥è¯¢æ€§èƒ½é™ä½ï¼Œä¿®æ”¹è§†å›¾ä¼šç›´æ¥ä¿®æ”¹åŸæ•°æ®ï¼ŒåŸºè¡¨è§†å›¾ç›¸äº’ä¾èµ–ã€‚ ä»€ä¹ˆæ˜¯æ¸¸æ ‡ï¼Ÿ æ¸¸æ ‡çš„ç‰¹æ€§ ä¸æ•æ„Ÿï¼šæ•°æ®åº“å¯ä»¥é€‰æ‹©ä¸å¤åˆ¶ç»“æœé›† åªè¯» ä¸æ»šåŠ¨ï¼šæ¸¸æ ‡åªèƒ½å‘ä¸€æ–¹å‘å‰è¿›ï¼Œå¹¶ä¸”ä¸å¯ä»¥è·³è¿‡ä»»ä½•ä¸€è¡Œæ•°æ® æ¸¸æ ‡çš„ä¼˜ç‚¹ æ¸¸æ ‡æ˜¯é’ˆå¯¹è¡Œæ“ä½œçš„ï¼Œå¯¹ä»æ•°æ®åº“ä¸­ select æŸ¥è¯¢å¾—åˆ°çš„ç»“æœé›†çš„ æ¯ä¸€è¡Œå¯ä»¥ è¿›è¡Œåˆ†å¼€çš„ç‹¬ç«‹çš„ç›¸åŒæˆ–è€…ä¸ç›¸åŒçš„æ“ä½œï¼Œæ˜¯ä¸€ç§åˆ†ç¦»çš„æ€æƒ³ã€‚ æ¸¸æ ‡çš„ç¼ºç‚¹ æ€§èƒ½ä¸é«˜ åªèƒ½ä¸€è¡Œä¸€è¡Œæ“ä½œ ä½¿ç”¨æ¸¸æ ‡ä¼šäº§ç”Ÿæ­»é”ï¼Œé€ æˆå†…å­˜å¼€é”€å¤§ æ¸¸æ ‡çš„é€‚ç”¨åœºæ™¯ å­˜å‚¨è¿‡ç¨‹ å‡½æ•° è§¦å‘å™¨ äº‹ä»¶ æ¸¸æ ‡çš„æ“ä½œ 1ã€æ¸¸æ ‡çš„å®šä¹‰ DECLARE å…‰æ ‡åç§° CURSOR FOR æŸ¥è¯¢è¯­æ³• declare cursor_name cursor for select_statement 2ã€æ‰“å¼€æ¸¸æ ‡ OPEN å…‰æ ‡åç§° open cursor_name 3ã€å–æ¸¸æ ‡ä¸­çš„æ•°æ® FETCH å…‰æ ‡åç§° INFO var_name [ï¼Œvar_name ]..... fetch cursor_name info var_name 4ã€å…³é—­æ¸¸æ ‡ CLOSE curso_name; close å…‰æ ‡åç§° 5ã€é‡Šæ”¾æ¸¸æ ‡ DEALLOCATE å…‰æ ‡åç§° deallocate cursor_name; å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•° ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿæœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ è§¦å‘å™¨ ä»€ä¹ˆæ˜¯è§¦å‘å™¨ï¼Ÿè§¦å‘å™¨çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ è§¦å‘å™¨æ˜¯é’ˆå¯¹æ¯ä¸€è¡Œçš„ï¼›å¯¹å¢åˆ æ”¹éå¸¸é¢‘ç¹çš„è¡¨ä¸Šåˆ‡è®°ä¸è¦ä½¿ç”¨è§¦å‘å™¨ï¼Œå› ä¸ºå®ƒä¼šéå¸¸æ¶ˆè€—èµ„æºã€‚ è§¦å‘å™¨æ˜¯é’ˆå¯¹æ¯ä¸€è¡Œçš„ï¼›å¯¹å¢åˆ æ”¹éå¸¸é¢‘ç¹çš„è¡¨ä¸Šåˆ‡è®°ä¸è¦ä½¿ç”¨è§¦å‘å™¨ï¼Œå› ä¸ºå®ƒä¼šéå¸¸æ¶ˆè€—èµ„æºã€‚ 1234567891011121314151617181920212223242526CREATE [DEFINER = { user | CURRENT_USER }]TRIGGER trigger_nametrigger_time trigger_eventON tbl_name FOR EACH ROW [trigger_order]trigger_bodytrigger_time: { BEFORE | AFTER }trigger_event: { INSERT | UPDATE | DELETE }trigger_order: { FOLLOWS | PRECEDES } other_trigger_name&gt; BEFOREå’ŒAFTERå‚æ•°æŒ‡å®šäº†è§¦å‘æ‰§è¡Œçš„æ—¶é—´ï¼Œåœ¨äº‹ä»¶ä¹‹å‰æˆ–æ˜¯ä¹‹åã€‚&gt; FOR EACH ROWè¡¨ç¤ºä»»ä½•ä¸€æ¡è®°å½•ä¸Šçš„æ“ä½œæ»¡è¶³è§¦å‘äº‹ä»¶éƒ½ä¼šè§¦å‘è¯¥è§¦å‘å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´è§¦å‘å™¨çš„è§¦å‘é¢‘ç‡æ˜¯é’ˆå¯¹æ¯ä¸€è¡Œæ•°æ®è§¦å‘ä¸€æ¬¡ã€‚&gt; tigger_eventè¯¦è§£ï¼š â‘ INSERTå‹è§¦å‘å™¨ï¼šæ’å…¥æŸä¸€è¡Œæ—¶æ¿€æ´»è§¦å‘å™¨ï¼Œå¯èƒ½é€šè¿‡INSERTã€LOAD DATAã€REPLACE è¯­å¥è§¦å‘(LOAD DATè¯­å¥ç”¨äºå°†ä¸€ä¸ªæ–‡ä»¶è£…å…¥åˆ°ä¸€ä¸ªæ•°æ®è¡¨ä¸­ï¼Œç›¸å½“ä¸ä¸€ç³»åˆ—çš„INSERTæ“ä½œ)ï¼› â‘¡UPDATEå‹è§¦å‘å™¨ï¼šæ›´æ”¹æŸä¸€è¡Œæ—¶æ¿€æ´»è§¦å‘å™¨ï¼Œå¯èƒ½é€šè¿‡UPDATEè¯­å¥è§¦å‘ï¼› â‘¢DELETEå‹è§¦å‘å™¨ï¼šåˆ é™¤æŸä¸€è¡Œæ—¶æ¿€æ´»è§¦å‘å™¨ï¼Œå¯èƒ½é€šè¿‡DELETEã€REPLACEè¯­å¥è§¦å‘ã€‚&gt; trigger_orderæ˜¯MySQL5.7ä¹‹åçš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨äºå®šä¹‰å¤šä¸ªè§¦å‘å™¨ï¼Œä½¿ç”¨follows(å°¾éš)æˆ–precedes(åœ¨â€¦ä¹‹å…ˆ)æ¥é€‰æ‹©è§¦å‘å™¨æ‰§è¡Œçš„å…ˆåé¡ºåºã€‚ NEWä¸OLDè¯¦è§£ MySQL ä¸­å®šä¹‰äº† NEW å’Œ OLDï¼Œç”¨æ¥è¡¨ç¤ºè§¦å‘å™¨çš„æ‰€åœ¨è¡¨ä¸­ï¼Œè§¦å‘äº†è§¦å‘å™¨çš„é‚£ä¸€è¡Œæ•°æ®ï¼Œæ¥å¼•ç”¨è§¦å‘å™¨ä¸­å‘ç”Ÿå˜åŒ–çš„è®°å½•å†…å®¹ï¼Œå…·ä½“åœ°ï¼š â‘ åœ¨INSERTå‹è§¦å‘å™¨ä¸­ï¼ŒNEWç”¨æ¥è¡¨ç¤ºå°†è¦ï¼ˆBEFOREï¼‰æˆ–å·²ç»ï¼ˆAFTERï¼‰æ’å…¥çš„æ–°æ•°æ®ï¼› â‘¡åœ¨UPDATEå‹è§¦å‘å™¨ä¸­ï¼ŒOLDç”¨æ¥è¡¨ç¤ºå°†è¦æˆ–å·²ç»è¢«ä¿®æ”¹çš„åŸæ•°æ®ï¼ŒNEWç”¨æ¥è¡¨ç¤ºå°†è¦æˆ–å·²ç»ä¿®æ”¹ä¸ºçš„æ–°æ•°æ®ï¼› â‘¢åœ¨DELETEå‹è§¦å‘å™¨ä¸­ï¼ŒOLDç”¨æ¥è¡¨ç¤ºå°†è¦æˆ–å·²ç»è¢«åˆ é™¤çš„åŸæ•°æ®ï¼› æŸ¥çœ‹è§¦å‘å™¨ 1select * from information_schema.triggers MySQLä¸­éƒ½æœ‰å“ªäº›è§¦å‘å™¨ï¼Ÿ SQLä¼˜åŒ– å¦‚ä½•å®šä½åŠä¼˜åŒ–SQLè¯­å¥çš„æ€§èƒ½é—®é¢˜ï¼Ÿåˆ›å»ºçš„ç´¢å¼•æœ‰æ²¡æœ‰è¢«ä½¿ç”¨åˆ°?æˆ–è€…è¯´æ€ä¹ˆæ‰å¯ä»¥çŸ¥é“è¿™æ¡è¯­å¥è¿è¡Œå¾ˆæ…¢çš„åŸå› ï¼Ÿ SQLçš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ å¤§è¡¨æ•°æ®æŸ¥è¯¢ï¼Œæ€ä¹ˆä¼˜åŒ– è¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†ï¼Ÿ mysql åˆ†é¡µ æ…¢æŸ¥è¯¢æ—¥å¿— å…³å¿ƒè¿‡ä¸šåŠ¡ç³»ç»Ÿé‡Œé¢çš„sqlè€—æ—¶å—ï¼Ÿç»Ÿè®¡è¿‡æ…¢æŸ¥è¯¢å—ï¼Ÿå¯¹æ…¢æŸ¥è¯¢éƒ½æ€ä¹ˆä¼˜åŒ–è¿‡ï¼Ÿ ä¸ºä»€ä¹ˆè¦å°½é‡è®¾å®šä¸€ä¸ªä¸»é”®ï¼Ÿ ä¸»é”®ä½¿ç”¨è‡ªå¢IDè¿˜æ˜¯UUIDï¼Ÿ å­—æ®µä¸ºä»€ä¹ˆè¦æ±‚å®šä¹‰ä¸ºnot nullï¼Ÿ å¦‚æœè¦å­˜å‚¨ç”¨æˆ·çš„å¯†ç æ•£åˆ—ï¼Œåº”è¯¥ä½¿ç”¨ä»€ä¹ˆå­—æ®µè¿›è¡Œå­˜å‚¨ï¼Ÿ ä¼˜åŒ–æŸ¥è¯¢è¿‡ç¨‹ä¸­çš„æ•°æ®è®¿é—® ä¼˜åŒ–é•¿éš¾çš„æŸ¥è¯¢è¯­å¥ ä¼˜åŒ–ç‰¹å®šç±»å‹çš„æŸ¥è¯¢è¯­å¥ ä¼˜åŒ–å…³è”æŸ¥è¯¢ ä¼˜åŒ–å­æŸ¥è¯¢ ä¼˜åŒ–LIMITåˆ†é¡µ ä¼˜åŒ–UNIONæŸ¥è¯¢ ä¼˜åŒ–WHEREå­å¥ æ•°æ®åº“ä¼˜åŒ– ä¸ºä»€ä¹ˆè¦ä¼˜åŒ– æ•°æ®åº“ç»“æ„ä¼˜åŒ– MySQLæ•°æ®åº“cpué£™å‡åˆ°500%çš„è¯æ€ä¹ˆå¤„ç†ï¼Ÿ å¤§è¡¨æ€ä¹ˆä¼˜åŒ–ï¼ŸæŸä¸ªè¡¨æœ‰è¿‘åƒä¸‡æ•°æ®ï¼ŒCRUDæ¯”è¾ƒæ…¢ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿåˆ†åº“åˆ†è¡¨äº†æ˜¯æ€ä¹ˆåšçš„ï¼Ÿåˆ†è¡¨åˆ†åº“äº†æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿæœ‰ç”¨åˆ°ä¸­é—´ä»¶ä¹ˆï¼Ÿä»–ä»¬çš„åŸç†çŸ¥é“ä¹ˆï¼Ÿ å‚ç›´åˆ†è¡¨ é€‚ç”¨åœºæ™¯ ç¼ºç‚¹ æ°´å¹³åˆ†è¡¨ï¼š é€‚ç”¨åœºæ™¯ æ°´å¹³åˆ‡åˆ†çš„ç¼ºç‚¹ MySQLçš„å¤åˆ¶åŸç†ä»¥åŠæµç¨‹ è¯»å†™åˆ†ç¦»æœ‰å“ªäº›è§£å†³æ–¹æ¡ˆï¼Ÿ å¤‡ä»½è®¡åˆ’ï¼Œmysqldumpä»¥åŠxtranbackupçš„å®ç°åŸç† æ•°æ®è¡¨æŸåçš„ä¿®å¤æ–¹å¼æœ‰å“ªäº›ï¼Ÿ Linuxä¸‹RPMç‰ˆMYSQLå®‰è£…ã€å¯åœ MySQLå¯åŠ¨é—®é¢˜ã€é…ç½®æ–‡ä»¶ã€ç¼–ç é—®é¢˜ MYSQLåˆ†å±‚ã€å­˜å‚¨å¼•æ“ è¿æ¥å±‚ï¼ˆæä¾›ä¸å®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡ï¼‰ æœåŠ¡å±‚ï¼ˆæä¾›å„ç§ç”¨æˆ·ä½¿ç”¨çš„æ¥å£ï¼Œæä¾›SQLä¼˜åŒ–å™¨ã€MySQL Query Optimizerã€‘ï¼‰ï¼‰ å¼•æ“å±‚ï¼ˆæä¾›å„ç§å­˜å‚¨æ•°æ®çš„æ–¹å¼ã€InnoDBï¼šäº‹ç‰©ä¼˜å…ˆï¼Œé€‚åˆé«˜å¹¶å‘ï¼Œè¡Œé”ï¼›MyISAMï¼šæ€§èƒ½ä¼˜å…ˆï¼Œè¡¨é”ã€‘ï¼‰ show engines; æ˜¾ç¤ºæ”¯æŒå¼•æ“ +--------------------+---------+----------------------------------------------------------------+--------------+------+------------+ | Engine | Support | Comment | Transactions | XA | Savepoints | +--------------------+---------+----------------------------------------------------------------+--------------+------+------------+ | MEMORY | YES | Hash based, stored in memory, useful for temporary tables | NO | NO | NO | | MRG_MYISAM | YES | Collection of identical MyISAM tables | NO | NO | NO | | CSV | YES | CSV storage engine | NO | NO | NO | | FEDERATED | NO | Federated MySQL storage engine | NULL | NULL | NULL | | PERFORMANCE_SCHEMA | YES | Performance Schema | NO | NO | NO | | MyISAM | YES | MyISAM storage engine | NO | NO | NO | | InnoDB | DEFAULT | Supports transactions, row-level locking, and foreign keys | YES | YES | YES | | BLACKHOLE | YES | /dev/null storage engine (anything you write to it disappears) | NO | NO | NO | | ARCHIVE | YES | Archive storage engine | NO | NO | NO | +--------------------+---------+----------------------------------------------------------------+--------------+------+------------+ show variables like â€˜%storage_engine%â€™; æŸ¥çœ‹å½“å‰ä½¿ç”¨å¼•æ“ 12345678-- æŒ‡å®šæ•°æ®åº“å¼•æ“create table tb(â€‹ id int(4) auto_increment,â€‹ name varchar(5),â€‹ dept varchar(5),â€‹ primary key(id))ENGINE=MyISAM AUTO_INCREMENT=1DEFAULT CHARSET=utf-8 å­˜å‚¨å±‚ï¼ˆå­˜å‚¨æ•°æ®ï¼‰ SQLè§£æè¿‡ç¨‹ã€ç´¢å¼•ã€Bæ ‘ sqlä¼˜åŒ–ï¼š åŸå› ï¼šæ€§èƒ½ä½ï¼Œæ‰§è¡Œæˆ–ç­‰å¾…æ—¶é—´å¤ªé•¿ï¼ŒSQLè¯­å¥æ¬ ä½³ï¼ˆè¿æ¥æŸ¥è¯¢ï¼‰ã€ç´¢å¼•å¤±æ•ˆã€æœåŠ¡å™¨å‚æ•°è®¾ç½®ä¸å¯¹ SQLç¼–å†™è¿‡ç¨‹ä¸è§£æè¿‡ç¨‹ï¼š ç¼–å†™:select dinstinct ..from â€¦join ..on ..where ..group by ..having ..order by ..limit è§£æ:form ..on ..join ..where ..group vy ..having ..select dinstinct ..order by limit.. ç´¢å¼• ç®€ä»‹ sqlä¼˜åŒ–ä¸»è¦æ˜¯ä¼˜åŒ–ç´¢å¼•ï¼Œç´¢å¼•ï¼ˆindexï¼‰ç›¸å½“äºä¹¦çš„ç›®å½•ã€‚ç´¢å¼•æ˜¯æ•°æ®ç»“æ„ï¼ˆé»˜è®¤Bæ ‘ã€å°å·¦å¤§å³ã€‘ï¼‰ ä¼˜ç‚¹ æé«˜æŸ¥è¯¢æ•ˆç‡ï¼ˆé™ä½IOã€CPUä½¿ç”¨ç‡ï¼‰ ç¼ºç‚¹ ç´¢å¼•æœ¬èº«å¾ˆå¤§ï¼ˆå¯ä»¥å­˜æ”¾åœ¨å†…å­˜/ç¡¬ç›˜ï¼‰ ç´¢å¼•ä¸æ˜¯æ‰€æœ‰æƒ…å†µéƒ½é€‚ç”¨ï¼šå°‘é‡æ•°æ®ï¼Œé¢‘ç¹æ›´æ–°å­—æ®µï¼Œå¾ˆå°‘ä½¿ç”¨çš„å­—æ®µ ç´¢å¼•ä¼šé™ä½å¢åˆ æ”¹æŸ¥æ•ˆç‡ åˆ†ç±» å•å€¼ç´¢å¼•ï¼šå•å­—æ®µ å”¯ä¸€ç´¢å¼•ï¼šä¸èƒ½é‡å¤ ä¸»é”®ç´¢å¼•ï¼šä¸èƒ½é‡å¤ï¼Œä¸èƒ½ä¸ºnullï¼Œä¸»é”®é»˜è®¤æ˜¯ä¸»é”®ç´¢å¼• å¤åˆç´¢å¼•ï¼šç›¸å½“äºäºŒçº§ç›®å½•ï¼ˆnameï¼Œageï¼‰ åˆ›å»ºç´¢å¼• æ–¹å¼ä¸€ create ç´¢å¼•ç±»å‹ ç´¢å¼•å on è¡¨ï¼ˆå­—æ®µï¼‰ å•å€¼ç´¢å¼•ï¼šcreate index dept_index on tb(dept); å”¯ä¸€ç´¢å¼•ï¼šcreate unique index name-index on tb(name) å¤åˆç´¢å¼•ï¼šcreate index dept_name_index on tb(dept,name); æ–¹å¼äºŒ alter table è¡¨å add ç´¢å¼•ç±»å‹ ç´¢å¼•åï¼ˆå­—æ®µï¼‰ å•å€¼ç´¢å¼•ï¼šalter table tb add index dept_index(dept); å”¯ä¸€ç´¢å¼•ï¼šalter table tb add unique index name-index(name) å¤åˆç´¢å¼•ï¼šalter table tb add index dept_name_index(dept,name); åˆ é™¤ç´¢å¼• drop index ç´¢å¼•å on è¡¨å æŸ¥è¯¢ç´¢å¼• show index from è¡¨å\\G SQLä¼˜åŒ–å‡†å¤‡ åˆ†æSQLçš„æ‰§è¡Œè®¡åˆ’ï¼šexplain+sqlè¯­å¥ï¼Œæ¨¡æ‹Ÿsqlä¼˜åŒ–å™¨æ‰§è¡Œsqlè¯­å¥ï¼Œä»è€Œè®©å¼€å‘äººå‘˜çŸ¥é“è‡ªå·±SQLè¯­å¥æƒ…å†µ id select_type table partitions type possible_keys key key_len ref rows filtered Extra 1 SIMPLE user const PRIMARY PRIMARY 152 const 1 100.00 id ç¼–å· å­æŸ¥è¯¢idä¸åŒï¼Œå…³è”æŸ¥è¯¢ç›¸åŒ **select_type ** æŸ¥è¯¢ç±»å‹** **table ** æŸ¥è¯¢è¡¨ idç›¸åŒæ•°æ®é‡è¶Šå°‘è¶Šä¼˜å…ˆæŸ¥è¯¢ï¼Œidä¸é€šidè¶Šå¤§è¶Šä¼˜å…ˆ partitions **type ** ç±»å‹ **possible_keys ** é¢„æµ‹ç”¨åˆ°çš„ç´¢å¼• **key ** å®é™…ç”¨åˆ°çš„ç´¢å¼• **key_len ** å®é™…ä½¿ç”¨ç´¢å¼•çš„é•¿åº¦ **ref ** è¡¨ä¹‹é—´çš„å¼•ç”¨ **rows ** é€šè¿‡ç´¢å¼•æŸ¥è¯¢åˆ°çš„æ•°æ®é‡ filtered **Extra ** é¢å¤–çš„ä¿¡æ¯ idã€table å…ˆæŸ¥å†…å±‚ï¼Œå†æŸ¥å¤–å±‚ã€‚å­æŸ¥è¯¢idä¸åŒï¼Œå…³è”æŸ¥è¯¢idç›¸åŒã€‚ idç›¸åŒæ•°æ®é‡è¶Šå°‘è¶Šä¼˜å…ˆæŸ¥è¯¢ï¼Œidä¸é€šidè¶Šå¤§è¶Šä¼˜å…ˆ explain SELECT * from teacher where tid=(select tid from course where cid='2') or tcid=(select tcid from teachercard where tcid='3') explain select t.* from teacher t,course c,teacherCard tc where t.tid=c.tid and t.tcid=tc.tcid and (c.cid='2' or tc.tcid='3') select_typeï¼ˆæŸ¥è¯¢ç±»å‹ï¼‰ PRIMARYï¼šåŒ…å«å­æŸ¥è¯¢SQLä¸­çš„ ä¸»æŸ¥è¯¢ï¼ˆæœ€å¤–å±‚ï¼‰ SUBQUERYï¼šåŒ…å«å­æŸ¥è¯¢SQLä¸­çš„å­æŸ¥è¯¢ï¼ˆéæœ€å¤–å±‚ï¼‰ SIMPLEï¼šç®€å•æŸ¥è¯¢ï¼ˆä¸åŒ…å«å­æŸ¥è¯¢ã€unionï¼‰ unionï¼š derivedï¼šè¡ç”ŸæŸ¥è¯¢ï¼ˆä½¿ç”¨åˆ°äº†ä¸´æ—¶è¡¨ï¼‰ åœ¨formå­æŸ¥è¯¢ä¸­åªæœ‰ä¸€å¼ è¡¨ explain select cr.cname from (select * from course where tid in (1,2)) cr; formå­æŸ¥è¯¢ä¸­ï¼Œå¦‚æœæœ‰table1 union table2ï¼Œåˆ™table1 å°±æ˜¯çš„riverd explain select cr.cname from (select * from course where tid =1 union select * from course where tid =2) cr; typeï¼ˆç´¢å¼•ç±»å‹ï¼‰ system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; all å¯¹TYPEä¼˜åŒ–å‰æï¼šæœ‰ç´¢å¼• systemï¼ŒconstçŸ¥è¯†ç†æƒ³æƒ…å†µï¼Œå®é™…èƒ½è¾¾åˆ° ref &gt;range systemï¼ˆå¿½ç•¥ï¼‰ï¼šåªæœ‰ä¸€æ¡æ•°æ®çš„ç³»ç»Ÿè¡¨ï¼›æˆ–è¡ç”Ÿè¡¨åªæœ‰ä¸€æ¡æ•°æ®çš„ä¸»æŸ¥è¯¢ constï¼šä»…ä»…èƒ½æŸ¥åˆ°ä¸€æ¡æ•°æ®çš„SQLï¼Œç”¨äºPrimayr key æˆ–uniqueç´¢å¼•ï¼ˆç±»å‹ä¸ç´¢å¼•ç±»å‹æœ‰å…³ï¼‰ eq_refï¼šå”¯ä¸€æ€§ç´¢å¼•ï¼šå¯¹äºæ¯ä¸ªç´¢å¼•å»ºçš„æŸ¥è¯¢ï¼Œè¿”å›åŒ¹é…å”¯ä¸€è¡Œæ•°æ®ï¼ˆæœ‰ä¸”åªæœ‰1ä¸ªï¼Œä¸èƒ½å¤šã€ä¸èƒ½0ï¼‰ select Â·Â· from Â·Â·where name=Â·Â·Â·å¸¸è§å”¯ä¸€ç´¢å¼•å’Œä¸»é”®ç´¢å¼• refï¼šéå”¯ä¸€æ€§ç´¢å¼•ï¼Œå¯¹äºæ¯ä¸ªç´¢å¼•å»ºçš„æŸ¥è¯¢ï¼Œè¿”å›åŒ¹é…çš„æ‰€æœ‰è¡Œï¼ˆ0ï¼Œå¤šï¼‰ rangeï¼šæ£€ç´¢æŒ‡å®šèŒƒå›´çš„è¡Œï¼Œwhereåé¢æ˜¯ä¸€ä¸ªèŒƒå›´æŸ¥è¯¢ï¼ˆbetweenï¼Œinï¼Œ&gt; &lt; &gt;=ï¼Œinæœ‰æ—¶å€™ä¼šå¤±æ•ˆï¼Œä»è€Œè½¬ä¸ºallï¼‰ indexï¼šæŸ¥è¯¢å…¨éƒ¨ç´¢å¼•ä¸­çš„æ•°æ®ï¼Œåªéœ€è¦æ‰«æç´¢å¼•è¡¨ï¼Œä¸éœ€è¦æ‰€æœ‰è¡¨ä¸­çš„æ‰€æœ‰æ•°æ® allï¼šæŸ¥è¯¢å…¨éƒ¨è¡¨ä¸­çš„æ•°æ®ï¼Œéœ€è¦å…¨è¡¨æ‰€æœ‰ï¼Œå³éœ€è¦æ‰€æœ‰è¡¨ä¸­çš„æ‰€æœ‰æ•°æ® possible_keys å¯èƒ½ç”¨åˆ°çš„ç´¢å¼•ï¼Œæ˜¯ä¸€ç§é¢„æµ‹ï¼Œä¸å‡† key å®é™…ç”¨åˆ°çš„ç´¢å¼• key_lenï¼š ç´¢å¼•é•¿åº¦ï¼Œç”¨äºåˆ¤æ–­å¤åˆç´¢å¼•æ˜¯å¦å®Œå…¨ä½¿ç”¨ï¼Œå¦‚æœç´¢å¼•å­—æ®µå¯ä¸ºnullï¼Œåˆ™ä¼šä½¿ç”¨1ä¸ªå­—èŠ‚ç”¨äºæ ‡è¯†ï¼Œç´¢å¼•å­—æ®µä¸ºå¯å˜é•¿åº¦ï¼Œåˆ™ä¼šä½¿ç”¨2ä¸ªå­—èŠ‚ ref æ³¨æ„ä¸typeå€¼ä¸­çš„refå€¼åŒºåˆ† ä½œç”¨ï¼šæŒ‡æ˜å½“å‰è¡¨æ‰€å‚ç…§çš„å­—æ®µ select ã€‚ã€‚ã€‚ where a.c=b.x ï¼ˆï¼‰ rows è¢«ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢çš„æ•°æ®ä¸ªæ•°ï¼ˆå®é™…é€šè¿‡ç´¢å¼•è€ŒæŸ¥è¯¢åˆ°çš„æ•°æ®ä¸ªæ•°ï¼‰ extra using filesortï¼šæ€§èƒ½æ¶ˆè€—å¤§,éœ€è¦é¢å¤–çš„ä¸€æ¬¡æ’åºï¼ˆæŸ¥è¯¢ï¼‰ å•ç´¢å¼•ï¼šå¦‚æœæ’åºå’ŒæŸ¥æ‰¾æ˜¯åŒä¸€ä¸ªå­—æ®µï¼Œåˆ™ä¸ä¼šå‡ºç°using filesort ï¼›å¦‚æœæ’åºå’ŒæŸ¥æ‰¾ä¸æ˜¯åŒä¸€ä¸ªå­—æ®µï¼Œåˆ™ä¼šå‡ºç°ã€‚ é¿å…ï¼šwhereå“ªäº›å­—æ®µå°±order byå“ªäº›å­—æ®µ å¤åˆç´¢å¼•ï¼šä¸èƒ½è·¨åˆ—ï¼ˆæœ€ä½³å·¦å‰ç¼€ï¼‰ é¿å…ï¼šwhereå’Œorder by æŒ‰ç…§å¤åˆç´¢å¼•çš„é¡ºåºé€‚åº”ï¼Œä¸è¦è·¨åˆ—æˆ–æ— åºä½¿ç”¨ using temporaryï¼šæ€§èƒ½æŸè€—è¾ƒå¤§ï¼Œç”¨åˆ°äº†ä¸´æ—¶è¡¨ã€‚ä¸€èˆ¬å‡ºç°åœ¨ group by è¯­å¥ä¸­ï¼› explain select a1 from test02 where a1 in(â€˜1â€™,â€™2â€™,â€™3â€™) group by a1; explain select a1 from test02 where a1 in(â€˜1â€™,â€™2â€™,â€™3â€™) group by a2; â€”â€“using tempporary é¿å…ï¼šæŸ¥è¯¢å“ªäº›åˆ—ï¼Œå°±æ ¹æ®å“ªäº›åˆ—group by using temporaryï¼šæ€§èƒ½æå‡ï¼Œç´¢å¼•è¦†ç›–ï¼ŒåŸå› ï¼šä¸è¯»å–æºæ–‡ä»¶ï¼Œåªä»ç´¢å¼•ä¸­è·å–æ•°æ®ï¼Œä½¿ç”¨åˆ°çš„åˆ—å…¨éƒ¨éƒ½åœ¨ç´¢å¼•ä¸­ using whereï¼šéœ€è¦å›åŸè¡¨æŸ¥è¯¢ impossible whereï¼šwhereå­å¥æ°¸è¿œä¸ºfalse ä¼˜åŒ–ç¤ºä¾‹ create table test03 (a1 int(4) not null, a2 int(4) not null, a3 int(4) not null, a4 int(4) not null ) alter table test03 add index idx_a1_a2_a3_a4(a1,a2,a3,a4); explain select a1,a2,a3,a4 from test03 where a1=1 and a2=2 and a3=3 and a4=4;â€”-æ¨èå†™æ³• explain select a1,a2,a3,a4 from test03 where a4=1 and a2=2 and a1=3 and a4=4;â€”-è™½ç„¶ç¼–å†™åçš„é¡ºåºå’Œç´¢å¼•é¡ºåºä¸ä¸€è‡´ï¼Œä½†æ˜¯sqlæ‰§è¡Œå‰ç»è¿‡äº†sqlä¼˜åŒ–å™¨çš„è°ƒæ•´ï¼Œç»“æœä¸ä¸Šæ¡sqlæ˜¯ä¸€è‡´çš„ã€‚ â€”â€“ä»¥ä¸Šä¸¤ä¸ªsqlä½¿ç”¨äº†å…¨éƒ¨çš„ç´¢å¼• explain select a1,a2,a3,a4 from test03 where a4=1 and a2=2 and a4=4 order by and a1; â€”-ä»¥ä¸ŠSQLç”¨åˆ°äº†a1 a2ä¸¤ä¸ªç´¢å¼•ï¼Œè¯¥ä¸¤ä¸ªå­—æ®µ ä¸éœ€è¦å›è¡¨æŸ¥è¯¢using index ï¼›a4è·¨åˆ—ä½¿ç”¨é€ æˆäº†è¯¥ç´¢å¼•å¤±æ•ˆï¼Œæ‰€ä»¥éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œå› æ­¤æ˜¯using where ï¼Œä»¥ä¸Šå¯ä»¥é€šè¿‡key_lenéªŒè¯ explain select a1,a2,a3,a4 from test03 where a4=1 and a4=4 order by and a3; â€”-ä»¥ä¸ŠSQLå‡ºç°äº†using filesortï¼ˆæ–‡ä»¶å†…æ’åºï¼Œâ€å¤šäº†ä¸€æ¬¡é¢å¤–çš„æŸ¥æ‰¾/æ’åºâ€œï¼‰ä¸è¦è·¨åˆ—ä½¿ç”¨ï¼ˆwhere å’Œorder byæ‹¼æ¥èµ·æ¥ä½¿ç”¨ï¼‰ explain select a1,a2,a3,a4 from test03 where a4=1 and a4=4 order by and a2,a3; ===è¿™æ ·ä¾¿ä¸ä¼šå‡ºç° using filesortï¼Œå¦‚æœå¤åˆç´¢å¼•å’Œä½¿ç”¨é¡ºåºå…¨éƒ¨ä¸€è‡´ï¼Œåˆ™å¤åˆç´¢å¼•å…¨éƒ¨ä½¿ç”¨ï¼Œéƒ¨åˆ†ä¸€è‡´åˆ™ä½¿ç”¨éƒ¨åˆ†ç´¢å¼•ã€‚ å•è¡¨ä¼˜åŒ–åŠæ€»ç»“ ï¼ˆ1ï¼‰å•è¡¨ä¼˜åŒ– create table book ( bid int(4) primary key, name varchar(20) not null, authorid int(4) not null, publicid int(4) not null, typeid int(4) not null ); insert into book values(1,'tjava',1,1,2) ; insert into book values(2,'tc',2,1,2) ; insert into book values(3,'wx',3,2,1) ; insert into book values(4,'math',4,2,3) ; commit; æŸ¥è¯¢authorid=1ä¸” typeidä¸º2æˆ–3çš„ bid explain select bid from book where typeid in(2,3) and authorid=1 order by typeid desc ; (a,b,c) (a,b) ä¼˜åŒ–ï¼šåŠ ç´¢å¼• alter table book add index idx_bta (bid,typeid,authorid); ç´¢å¼•ä¸€æ—¦è¿›è¡Œ å‡çº§ä¼˜åŒ–ï¼Œéœ€è¦å°†ä¹‹å‰åºŸå¼ƒçš„ç´¢å¼•åˆ æ‰ï¼Œé˜²æ­¢å¹²æ‰°ã€‚ drop index idx_bta on book; æ ¹æ®SQLå®é™…è§£æçš„é¡ºåºï¼Œè°ƒæ•´ç´¢å¼•çš„é¡ºåºï¼š alter table book add index idx_tab (typeid,authorid,bid); --è™½ç„¶å¯ä»¥å›è¡¨æŸ¥è¯¢bidï¼Œä½†æ˜¯å°†bidæ”¾åˆ°ç´¢å¼•ä¸­ å¯ä»¥æå‡ä½¿ç”¨using index ; å†æ¬¡ä¼˜åŒ–ï¼ˆä¹‹å‰æ˜¯indexçº§åˆ«ï¼‰ï¼šæ€è·¯ã€‚å› ä¸ºèŒƒå›´æŸ¥è¯¢inæœ‰æ—¶ä¼šå®ç°ï¼Œå› æ­¤äº¤æ¢ ç´¢å¼•çš„é¡ºåºï¼Œå°†typeid in(2,3) æ”¾åˆ°æœ€åã€‚ drop index idx_tab on book; alter table book add index idx_atb (authorid,typeid,bid); explain select bid from book where authorid=1 and typeid in(2,3) order by typeid desc ; â€‹ â€‹ --å°ç»“ï¼š a.æœ€ä½³åšå‰ç¼€ï¼Œä¿æŒç´¢å¼•çš„å®šä¹‰å’Œä½¿ç”¨çš„é¡ºåºä¸€è‡´æ€§ b.ç´¢å¼•éœ€è¦é€æ­¥ä¼˜åŒ– c.å°†å«Inçš„èŒƒå›´æŸ¥è¯¢ æ”¾åˆ°whereæ¡ä»¶çš„æœ€åï¼Œé˜²æ­¢å¤±æ•ˆã€‚ â€‹ â€‹ æœ¬ä¾‹ä¸­åŒæ—¶å‡ºç°äº†Using whereï¼ˆéœ€è¦å›åŸè¡¨ï¼‰; Using indexï¼ˆä¸éœ€è¦å›åŸè¡¨ï¼‰ï¼šåŸå› ï¼Œwhere authorid=1 and typeid in(2,3)ä¸­authoridåœ¨ç´¢å¼•(authorid,typeid,bid)ä¸­ï¼Œå› æ­¤ä¸éœ€è¦å›åŸè¡¨ï¼ˆç›´æ¥åœ¨ç´¢å¼•è¡¨ä¸­èƒ½æŸ¥åˆ°ï¼‰ï¼›è€Œtypeidè™½ç„¶ä¹Ÿåœ¨ç´¢å¼•(authorid,typeid,bid)ä¸­ï¼Œä½†æ˜¯å«inçš„èŒƒå›´æŸ¥è¯¢å·²ç»ä½¿è¯¥typeidç´¢å¼•å¤±æ•ˆï¼Œå› æ­¤ç›¸å½“äºæ²¡æœ‰typeidè¿™ä¸ªç´¢å¼•ï¼Œæ‰€ä»¥éœ€è¦å›åŸè¡¨ï¼ˆusing whereï¼‰ï¼› â€‹ ä¾‹å¦‚ä»¥ä¸‹æ²¡æœ‰äº†Inï¼Œåˆ™ä¸ä¼šå‡ºç°using where â€‹ explain select bid from book where authorid=1 and typeid =3 order by typeid desc ; â€‹ â€‹ è¿˜å¯ä»¥é€šè¿‡key_lenè¯æ˜Inå¯ä»¥ä½¿ç´¢å¼•å¤±æ•ˆã€‚ â€‹ ï¼ˆ2ï¼‰ä¸¤è¡¨ä¼˜åŒ– create table teacher2 ( tid int(4) primary key, cid int(4) not null ); insert into teacher2 values(1,2); insert into teacher2 values(2,1); insert into teacher2 values(3,3); create table course2 ( cid int(4) , cname varchar(20) ); insert into course2 values(1,'java'); insert into course2 values(2,'python'); insert into course2 values(3,'kotlin'); commit; å·¦è¿æ¥ï¼š explain select *from teacher2 t left outer join course2 c on t.cid=c.cid where c.cname='java'; ç´¢å¼•å¾€å“ªå¼ è¡¨åŠ ï¼Ÿ -å°è¡¨é©±åŠ¨å¤§è¡¨ -ç´¢å¼•å»ºç«‹ç»å¸¸ä½¿ç”¨çš„å­—æ®µä¸Š ï¼ˆæœ¬é¢˜ t.cid=c.cidå¯çŸ¥ï¼Œt.cidå­—æ®µä½¿ç”¨é¢‘ç¹ï¼Œå› æ­¤ç»™è¯¥å­—æ®µåŠ ç´¢å¼•ï¼‰ [ä¸€èˆ¬æƒ…å†µå¯¹äºå·¦å¤–è¿æ¥ï¼Œç»™å·¦è¡¨åŠ ç´¢å¼•ï¼›å³å¤–è¿æ¥ï¼Œç»™å³è¡¨åŠ ç´¢å¼•] å°è¡¨ï¼š10 å¤§è¡¨ï¼š300 where å°è¡¨.x 10 = å¤§è¡¨.y 300; --å¾ªç¯äº†å‡ æ¬¡ï¼Ÿ10 å¤§è¡¨.y 300=å°è¡¨.x 10 --å¾ªç¯äº†300æ¬¡ å°è¡¨:10 å¤§è¡¨:300 select ...where å°è¡¨.x10=å¤§è¡¨.x300 ; for(int i=0;i&lt;å°è¡¨.length10;i++) { for(int j=0;j&lt;å¤§è¡¨.length300;j++) { ... } } select ...where å¤§è¡¨.x300=å°è¡¨.x10 ; for(int i=0;i&lt;å¤§è¡¨.length300;i++) { for(int j=0;j&lt;å°è¡¨.length10;j++) { ... } } --ä»¥ä¸Š2ä¸ªFORå¾ªç¯ï¼Œæœ€ç»ˆéƒ½ä¼šå¾ªç¯3000æ¬¡ï¼›ä½†æ˜¯ å¯¹äºåŒå±‚å¾ªç¯æ¥è¯´ï¼šä¸€èˆ¬å»ºè®® å°†æ•°æ®å°çš„å¾ªç¯ æ”¾å¤–å±‚ï¼›æ•°æ®å¤§çš„å¾ªç¯æ”¾å†…å­˜ã€‚ --å½“ç¼–å†™ ..on t.cid=c.cid æ—¶ï¼Œå°†æ•°æ®é‡å°çš„è¡¨ æ”¾å·¦è¾¹ï¼ˆå‡è®¾æ­¤æ—¶tè¡¨æ•°æ®é‡å°ï¼‰ alter table teacher2 add index index_teacher2_cid(cid) ; alter table course2 add index index_course2_cname(cname); Using join buffer:extraä¸­çš„ä¸€ä¸ªé€‰é¡¹ï¼Œä½œç”¨ï¼šMysqlå¼•æ“ä½¿ç”¨äº† è¿æ¥ç¼“å­˜ã€‚ ï¼ˆ3ï¼‰ä¸‰å¼ è¡¨ä¼˜åŒ– â€‹ a.å°è¡¨é©±åŠ¨å¤§è¡¨ b.ç´¢å¼•å»ºç«‹åœ¨ç»å¸¸æŸ¥è¯¢çš„å­—æ®µä¸Š ç¤ºä¾‹ï¼š create table test03 ( a1 int(4) not null, a2 int(4) not null, a3 int(4) not null, a4 int(4) not null ); alter table test03 add index idx_a1_a2_a3_4(a1,a2,a3,a4) ; 12345678910explain select a1,a2,a3,a4 from test03 where a1=1 and a2=2 and a3=3 and a4 =4 ; --æ¨èå†™æ³•ï¼Œå› ä¸º ç´¢å¼•çš„ä½¿ç”¨é¡ºåºï¼ˆwhereåé¢çš„é¡ºåºï¼‰ å’Œ å¤åˆç´¢å¼•çš„é¡ºåºä¸€è‡´explain select a1,a2,a3,a4 from test03 where a4=1 and a3=2 and a2=3 and a1 =4 ; --è™½ç„¶ç¼–å†™çš„é¡ºåº å’Œç´¢å¼•é¡ºåºä¸ä¸€è‡´ï¼Œä½†æ˜¯ sqlåœ¨çœŸæ­£æ‰§è¡Œå‰ ç»è¿‡äº†SQLä¼˜åŒ–å™¨çš„è°ƒæ•´ï¼Œç»“æœä¸ä¸Šæ¡SQLæ˜¯ä¸€è‡´çš„ã€‚--ä»¥ä¸Š 2ä¸ªSQLï¼Œä½¿ç”¨äº† å…¨éƒ¨çš„å¤åˆç´¢å¼•explain select a1,a2,a3,a4 from test03 where a1=1 and a2=2 and a4=4 order by a3; --ä»¥ä¸ŠSQLç”¨åˆ°äº†a1 a2ä¸¤ä¸ªç´¢å¼•ï¼Œè¯¥ä¸¤ä¸ªå­—æ®µ ä¸éœ€è¦å›è¡¨æŸ¥è¯¢using index ;è€Œa4å› ä¸ºè·¨åˆ—ä½¿ç”¨ï¼Œé€ æˆäº†è¯¥ç´¢å¼•å¤±æ•ˆï¼Œéœ€è¦å›è¡¨æŸ¥è¯¢ å› æ­¤æ˜¯using whereï¼›ä»¥ä¸Šå¯ä»¥é€šè¿‡ key_lenè¿›è¡ŒéªŒè¯explain select a1,a2,a3,a4 from test03 where a1=1 and a4=4 order by a3; --ä»¥ä¸ŠSQLå‡ºç°äº† using filesort(æ–‡ä»¶å†…æ’åºï¼Œâ€œå¤šäº†ä¸€æ¬¡é¢å¤–çš„æŸ¥æ‰¾/æ’åºâ€) ï¼šä¸è¦è·¨åˆ—ä½¿ç”¨( whereå’Œorder by æ‹¼èµ·æ¥ï¼Œä¸è¦è·¨åˆ—ä½¿ç”¨) 1explain select a1,a2,a3,a4 from test03 where a1=1 and a4=4 order by a2 , a3; --ä¸ä¼šusing filesort 123--æ€»ç»“ï¼ši.å¦‚æœ (a,b,c,d)å¤åˆç´¢å¼• å’Œä½¿ç”¨çš„é¡ºåºå…¨éƒ¨ä¸€è‡´(ä¸”ä¸è·¨åˆ—ä½¿ç”¨)ï¼Œåˆ™å¤åˆç´¢å¼•å…¨éƒ¨ä½¿ç”¨ã€‚å¦‚æœéƒ¨åˆ†ä¸€è‡´(ä¸”ä¸è·¨åˆ—ä½¿ç”¨)ï¼Œåˆ™ä½¿ç”¨éƒ¨åˆ†ç´¢å¼•ã€‚select a,c where a = and b= and d= ii.whereå’Œorder by æ‹¼èµ·æ¥ï¼Œä¸è¦è·¨åˆ—ä½¿ç”¨ 1using temporary:éœ€è¦é¢å¤–å†å¤šä½¿ç”¨ä¸€å¼ è¡¨. ä¸€èˆ¬å‡ºç°åœ¨group byè¯­å¥ä¸­ï¼›å·²ç»æœ‰è¡¨äº†ï¼Œä½†ä¸é€‚ç”¨ï¼Œå¿…é¡»å†æ¥ä¸€å¼ è¡¨ã€‚ è§£æè¿‡ç¨‹ï¼š from .. on.. join ..where ..group by ....having ...select dinstinct ..order by limit ... a. explain select * from test03 where a2=2 and a4=4 group by a2,a4 ;--æ²¡æœ‰using temporary b. explain select * from test03 where a2=2 and a4=4 group by a3 ; é¿å…ç´¢å¼•å¤±æ•ˆçš„ä¸€äº›åŸåˆ™ 12345678910111213141516171819202122232425ï¼ˆ1ï¼‰å¤åˆç´¢å¼• a.å¤åˆç´¢å¼•ï¼Œä¸è¦è·¨åˆ—æˆ–æ— åºä½¿ç”¨ï¼ˆæœ€ä½³å·¦å‰ç¼€ï¼‰ (a,b,c) b.å¤åˆç´¢å¼•ï¼Œå°½é‡ä½¿ç”¨å…¨ç´¢å¼•åŒ¹é… (a,b,c) ï¼ˆ2ï¼‰ä¸è¦åœ¨ç´¢å¼•ä¸Šè¿›è¡Œä»»ä½•æ“ä½œï¼ˆè®¡ç®—ã€å‡½æ•°ã€ç±»å‹è½¬æ¢ï¼‰ï¼Œå¦åˆ™ç´¢å¼•å¤±æ•ˆ select ..where A.x = .. ; --å‡è®¾A.xæ˜¯ç´¢å¼• ä¸è¦ï¼šselect ..where A.x*3 = .. ; explain select * from book where authorid = 1 and typeid = 2 ;--ç”¨åˆ°äº†at2ä¸ªç´¢å¼• explain select * from book where authorid = 1 and typeid*2 = 2 ;--ç”¨åˆ°äº†a1ä¸ªç´¢å¼• explain select * from book where authorid*2 = 1 and typeid*2 = 2 ;----ç”¨åˆ°äº†0ä¸ªç´¢å¼• explain select * from book where authorid*2 = 1 and typeid = 2 ;----ç”¨åˆ°äº†0ä¸ªç´¢å¼•,åŸå› ï¼šå¯¹äºå¤åˆç´¢å¼•ï¼Œå¦‚æœå·¦è¾¹å¤±æ•ˆï¼Œå³ä¾§å…¨éƒ¨å¤±æ•ˆã€‚(a,b,c)ï¼Œä¾‹å¦‚å¦‚æœ bå¤±æ•ˆï¼Œåˆ™b cåŒæ—¶å¤±æ•ˆã€‚ drop index idx_atb on book ; alter table book add index idx_authroid (authorid) ; alter table book add index idx_typeid (typeid) ; explain select * from book where authorid*2 = 1 and typeid = 2 ;ï¼ˆ3ï¼‰å¤åˆç´¢å¼•ä¸èƒ½ä½¿ç”¨ä¸ç­‰äºï¼ˆ!= &lt;&gt;ï¼‰æˆ–is null (is not null)ï¼Œå¦åˆ™è‡ªèº«ä»¥åŠå³ä¾§æ‰€æœ‰å…¨éƒ¨å¤±æ•ˆã€‚ å¤åˆç´¢å¼•ä¸­å¦‚æœæœ‰&gt;ï¼Œåˆ™è‡ªèº«å’Œå³ä¾§ç´¢å¼•å…¨éƒ¨å¤±æ•ˆã€‚explain select * from book where authorid = 1 and typeid =2 ;-- SQLä¼˜åŒ–ï¼Œæ˜¯ä¸€ç§æ¦‚ç‡å±‚é¢çš„ä¼˜åŒ–ã€‚è‡³äºæ˜¯å¦å®é™…ä½¿ç”¨äº†æˆ‘ä»¬çš„ä¼˜åŒ–ï¼Œéœ€è¦é€šè¿‡explainè¿›è¡Œæ¨æµ‹ã€‚explain select * from book where authorid != 1 and typeid =2 ;explain select * from book where authorid != 1 and typeid !=2 ; 1234567891011121314151617181920212223242526ä½“éªŒæ¦‚ç‡æƒ…å†µ(&lt; &gt; =)ï¼šåŸå› æ˜¯æœåŠ¡å±‚ä¸­æœ‰SQLä¼˜åŒ–å™¨ï¼Œå¯èƒ½ä¼šå½±å“æˆ‘ä»¬çš„ä¼˜åŒ–ã€‚drop index idx_typeid on book;drop index idx_authroid on book;alter table book add index idx_book_at (authorid,typeid);explain select * from book where authorid = 1 and typeid =2 ;--å¤åˆç´¢å¼•atå…¨éƒ¨ä½¿ç”¨explain select * from book where authorid &gt; 1 and typeid =2 ; --å¤åˆç´¢å¼•ä¸­å¦‚æœæœ‰&gt;ï¼Œåˆ™è‡ªèº«å’Œå³ä¾§ç´¢å¼•å…¨éƒ¨å¤±æ•ˆã€‚explain select * from book where authorid = 1 and typeid &gt;2 ;--å¤åˆç´¢å¼•atå…¨éƒ¨ä½¿ç”¨----æ˜æ˜¾çš„æ¦‚ç‡é—®é¢˜---explain select * from book where authorid &lt; 1 and typeid =2 ;--å¤åˆç´¢å¼•atåªç”¨åˆ°äº†1ä¸ªç´¢å¼•explain select * from book where authorid &lt; 4 and typeid =2 ;--å¤åˆç´¢å¼•å…¨éƒ¨å¤±æ•ˆ--æˆ‘ä»¬å­¦ä¹ ç´¢å¼•ä¼˜åŒ– ï¼Œæ˜¯ä¸€ä¸ªå¤§éƒ¨åˆ†æƒ…å†µé€‚ç”¨çš„ç»“è®ºï¼Œä½†ç”±äºSQLä¼˜åŒ–å™¨ç­‰åŸå›  è¯¥ç»“è®ºä¸æ˜¯100%æ­£ç¡®ã€‚--ä¸€èˆ¬è€Œè¨€ï¼Œ èŒƒå›´æŸ¥è¯¢ï¼ˆ&gt; &lt; inï¼‰ï¼Œä¹‹åçš„ç´¢å¼•å¤±æ•ˆã€‚ï¼ˆ4ï¼‰è¡¥æ•‘ã€‚å°½é‡ä½¿ç”¨ç´¢å¼•è¦†ç›–ï¼ˆusing indexï¼‰ ï¼ˆa,b,cï¼‰select a,b,c from xx..where a= .. and b =.. ;(5) likeå°½é‡ä»¥â€œå¸¸é‡â€å¼€å¤´ï¼Œä¸è¦ä»¥'%'å¼€å¤´ï¼Œå¦åˆ™ç´¢å¼•å¤±æ•ˆselect * from xx where name like '%x%' ; --nameç´¢å¼•å¤±æ•ˆexplain select * from teacher where tname like '%x%'; --tnameç´¢å¼•å¤±æ•ˆexplain select * from teacher where tname like 'x%'; explain select tname from teacher where tname like '%x%'; --å¦‚æœå¿…é¡»ä½¿ç”¨like '%x%'è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•è¦†ç›– æŒ½æ•‘ä¸€éƒ¨åˆ†ã€‚ 123456ï¼ˆ6ï¼‰å°½é‡ä¸è¦ä½¿ç”¨ç±»å‹è½¬æ¢ï¼ˆæ˜¾ç¤ºã€éšå¼ï¼‰ï¼Œå¦åˆ™ç´¢å¼•å¤±æ•ˆexplain select * from teacher where tname = 'abc' ;explain select * from teacher where tname = 123 ;//ç¨‹åºåº•å±‚å°† 123 -&gt; '123'ï¼Œå³è¿›è¡Œäº†ç±»å‹è½¬æ¢ï¼Œå› æ­¤ç´¢å¼•å¤±æ•ˆï¼ˆ7ï¼‰å°½é‡ä¸è¦ä½¿ç”¨orï¼Œå¦åˆ™ç´¢å¼•å¤±æ•ˆexplain select * from teacher where tname ='' or tcid &gt;1 ; --å°†orå·¦ä¾§çš„tname å¤±æ•ˆã€‚ å¸¸è§ä¼˜åŒ–æ–¹æ³•åŠæ…¢æŸ¥è¯¢SQLæ’æŸ¥ existå’Œin select ã€‚ã€‚from table where exist/in(å­æŸ¥è¯¢)ï¼› å¦‚æœä¸»æŸ¥è¯¢çš„æ•°æ®é›†å¤§ï¼Œåˆ™ä½¿ç”¨Inæ•ˆç‡æ›´é«˜ å¦‚æœå­æŸ¥è¯¢çš„æ•°æ®é›†å¤§ï¼Œåˆ™ä½¿ç”¨existæ•ˆç‡æ›´é«˜ existè¯­æ³•ï¼šå°†ä¸»æŸ¥è¯¢çš„ç»“æœï¼Œæ”¾åˆ°å­æŸ¥è¯¢ç»“æœä¸­è¿›è¡Œæ¡ä»¶æ ¡éªŒï¼ˆçœ‹å­æŸ¥è¯¢æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰æ•°æ®ï¼Œåˆ™æ ¡éªŒæˆåŠŸï¼Œä¿ç•™æ•°æ®ï¼‰ order by using filesort æœ‰ä¸¤ç§ç®—æ³•ï¼šåŒè·¯æ’åºã€å•è·¯æ’åº ï¼ˆæ ¹æ®IOçš„æ¬¡æ•°ï¼‰ MySQL4.1ä¹‹å‰ é»˜è®¤ä½¿ç”¨ åŒè·¯æ’åºï¼›åŒè·¯ï¼šæ‰«æ2æ¬¡ç£ç›˜ï¼ˆ1ï¼šä»ç£ç›˜è¯»å–æ’åºå­—æ®µ ,å¯¹æ’åºå­—æ®µè¿›è¡Œæ’åºï¼ˆåœ¨bufferä¸­è¿›è¡Œçš„æ’åºï¼‰ 2ï¼šæ‰«æå…¶ä»–å­—æ®µ ï¼‰ --IOè¾ƒæ¶ˆè€—æ€§èƒ½ MySQL4.1ä¹‹å é»˜è®¤ä½¿ç”¨ å•è·¯æ’åº ï¼š åªè¯»å–ä¸€æ¬¡ï¼ˆå…¨éƒ¨å­—æ®µï¼‰ï¼Œåœ¨bufferä¸­è¿›è¡Œæ’åºã€‚ä½†ç§å•è·¯æ’åº ä¼šæœ‰ä¸€å®šçš„éšæ‚£ ï¼ˆä¸ä¸€å®šçœŸçš„æ˜¯â€œå•è·¯|1æ¬¡IOâ€ï¼Œæœ‰å¯èƒ½å¤šæ¬¡IOï¼‰ã€‚åŸå› ï¼šå¦‚æœæ•°æ®é‡ç‰¹åˆ«å¤§ï¼Œåˆ™æ— æ³• å°†æ‰€æœ‰å­—æ®µçš„æ•°æ® ä¸€æ¬¡æ€§è¯»å–å®Œæ¯•ï¼Œå› æ­¤ ä¼šè¿›è¡Œâ€œåˆ†ç‰‡è¯»å–ã€å¤šæ¬¡è¯»å–â€ã€‚ æ³¨æ„ï¼šå•è·¯æ’åº æ¯”åŒè·¯æ’åº ä¼šå ç”¨æ›´å¤šçš„bufferã€‚ å•è·¯æ’åºåœ¨ä½¿ç”¨æ—¶ï¼Œå¦‚æœæ•°æ®å¤§ï¼Œå¯ä»¥è€ƒè™‘è°ƒå¤§bufferçš„å®¹é‡å¤§å°ï¼š set max_length_for_sort_data = 1024 å•ä½byte å¦‚æœmax_length_for_sort_dataå€¼å¤ªä½ï¼Œåˆ™mysqlä¼šè‡ªåŠ¨ä» å•è·¯-&gt;åŒè·¯ ï¼ˆå¤ªä½ï¼šéœ€è¦æ’åºçš„åˆ—çš„æ€»å¤§å°è¶…è¿‡äº†max_length_for_sort_dataå®šä¹‰çš„å­—èŠ‚æ•°ï¼‰ æé«˜order byæŸ¥è¯¢çš„ç­–ç•¥ï¼š a.é€‰æ‹©ä½¿ç”¨å•è·¯ã€åŒè·¯ ï¼›è°ƒæ•´bufferçš„å®¹é‡å¤§å°ï¼› b.é¿å…select * ... ï¼ˆ*ä¼šå¤šèŠ±ä¸€äº›æ—¶é—´ï¼Œä¸”æ— æ³•ç´¢å¼•è¦†ç›–ï¼‰ c.å¤åˆç´¢å¼• ä¸è¦è·¨åˆ—ä½¿ç”¨ ï¼Œé¿å…using filesort d.ä¿è¯å…¨éƒ¨çš„æ’åºå­—æ®µ æ’åºçš„ä¸€è‡´æ€§ï¼ˆéƒ½æ˜¯å‡åº æˆ– é™åºï¼‰ æ…¢æŸ¥è¯¢é˜€å€¼å’Œmysqldumpslowå·¥å…· :MySQLæä¾›çš„ä¸€ç§æ—¥å¿—è®°å½•ï¼Œç”¨äºè®°å½•MySQLç§å“åº”æ—¶é—´è¶…è¿‡é˜€å€¼çš„SQLè¯­å¥ ï¼ˆlong_query_timeï¼Œé»˜è®¤10ç§’ï¼‰ æ…¢æŸ¥è¯¢æ—¥å¿—é»˜è®¤æ˜¯å…³é—­çš„ï¼›å»ºè®®ï¼šå¼€å‘è°ƒä¼˜æ˜¯ æ‰“å¼€ï¼Œè€Œ æœ€ç»ˆéƒ¨ç½²æ—¶å…³é—­ã€‚ æ£€æŸ¥æ˜¯å¦å¼€å¯äº† æ…¢æŸ¥è¯¢æ—¥å¿— ï¼š show variables like '%slow_query_log%' ; ä¸´æ—¶å¼€å¯ï¼š set global slow_query_log = 1 ; --åœ¨å†…å­˜ç§å¼€å¯ exit service mysql restart æ°¸ä¹…å¼€å¯ï¼š /etc/my.cnf ä¸­è¿½åŠ é…ç½®ï¼š vi /etc/my.cnf [mysqld] slow_query_log=1 slow_query_log_file=/var/lib/mysql/localhost-slow.log â€‹ â€‹ æ…¢æŸ¥è¯¢é˜€å€¼ï¼š â€‹ show variables like '%long_query_time%' ; â€‹ â€‹ ä¸´æ—¶è®¾ç½®é˜€å€¼ï¼š â€‹ set global long_query_time = 5 ; --è®¾ç½®å®Œæ¯•åï¼Œé‡æ–°ç™»é™†åèµ·æ•ˆ ï¼ˆä¸éœ€è¦é‡å¯æœåŠ¡ï¼‰ â€‹ â€‹ æ°¸ä¹…è®¾ç½®é˜€å€¼ï¼š â€‹ â€‹ /etc/my.cnf ä¸­è¿½åŠ é…ç½®ï¼š â€‹ vi /etc/my.cnf â€‹ [mysqld] â€‹ long_query_time=3 select sleep(4); select sleep(5); select sleep(3); select sleep(3); --æŸ¥è¯¢è¶…è¿‡é˜€å€¼çš„SQLæ•°é‡ï¼š show global status like '%slow_queries%' ; (1)æ…¢æŸ¥è¯¢çš„sqlè¢«è®°å½•åœ¨äº†æ—¥å¿—ä¸­ï¼Œå› æ­¤å¯ä»¥é€šè¿‡æ—¥å¿— æŸ¥çœ‹å…·ä½“çš„æ…¢SQLã€‚ cat /var/lib/mysql/localhost-slow.log (2)é€šè¿‡mysqldumpslowå·¥å…·æŸ¥çœ‹æ…¢SQL,å¯ä»¥é€šè¿‡ä¸€äº›è¿‡æ»¤æ¡ä»¶ å¿«é€ŸæŸ¥æ‰¾å‡ºéœ€è¦å®šä½çš„æ…¢SQL mysqldumpslow --help sï¼šæ’åºæ–¹å¼ r:é€†åº l:é”å®šæ—¶é—´ g:æ­£åˆ™åŒ¹é…æ¨¡å¼ --è·å–è¿”å›è®°å½•æœ€å¤šçš„3ä¸ªSQL mysqldumpslow -s r -t 3 /var/lib/mysql/localhost-slow.log --è·å–è®¿é—®æ¬¡æ•°æœ€å¤šçš„3ä¸ªSQL mysqldumpslow -s c -t 3 /var/lib/mysql/localhost-slow.log --æŒ‰ç…§æ—¶é—´æ’åºï¼Œå‰10æ¡åŒ…å«left joinæŸ¥è¯¢è¯­å¥çš„SQL mysqldumpslow -s t -t 10 -g &quot;left join&quot; /var/lib/mysql/localhost-slow.log è¯­æ³•ï¼š mysqldumpslow å„ç§å‚æ•° æ…¢æŸ¥è¯¢æ—¥å¿—çš„æ–‡ä»¶ æ¨¡æ‹Ÿå¹¶é€šè¿‡profilesåˆ†ææµ·é‡æ•°æ® a.æ¨¡æ‹Ÿæµ·é‡æ•°æ® a.æ¨¡æ‹Ÿæµ·é‡æ•°æ® å­˜å‚¨è¿‡ç¨‹ï¼ˆæ— returnï¼‰/å­˜å‚¨å‡½æ•°ï¼ˆæœ‰returnï¼‰ create database testdata ; use testdata 1234567891011121314151617create table dept(dno int(5) primary key default 0,dname varchar(20) not null default '',loc varchar(30) default '')engine=innodb default charset=utf8;create table emp(eid int(5) primary key,ename varchar(20) not null default '',job varchar(20) not null default '',deptno int(5) not null default 0)engine=innodb default charset=utf8; é€šè¿‡å­˜å‚¨å‡½æ•° æ’å…¥æµ·é‡æ•°æ®ï¼š åˆ›å»ºå­˜å‚¨å‡½æ•°ï¼š randstring(6) -&gt;aXiayx ç”¨äºæ¨¡æ‹Ÿå‘˜å·¥åç§° 1234567891011121314delimiter $ #å£°æ˜åˆ†å·ä¸æ˜¯ç»“æŸç¬¦create function randstring(n int) returns varchar(255) begin declare all_str varchar(100) default 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ' ; declare return_str varchar(255) default '' ; declare i int default 0 ; while i&lt;n do set return_str = concat( return_str, substring(all_str, FLOOR(1+rand()*52) ,1) ); set i=i+1 ; end while ; return return_str; end $ --å¦‚æœæŠ¥é”™ï¼šYou have an error in your SQL syntaxï¼Œè¯´æ˜SQLè¯­å¥è¯­æ³•æœ‰é”™ï¼Œéœ€è¦ä¿®æ”¹SQLè¯­å¥ï¼› å¦‚æœæŠ¥é”™This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration and binary logging is enabled (you might want to use the less safe log_bin_trust_function_creators variable) æ˜¯å› ä¸º å­˜å‚¨è¿‡ç¨‹/å­˜å‚¨å‡½æ•°åœ¨åˆ›å»ºæ—¶ ä¸ä¹‹å‰çš„ å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å†²çªäº† è§£å†³å†²çªï¼š ä¸´æ—¶è§£å†³( å¼€å¯log_bin_trust_function_creators ) show variables like '%log_bin_trust_function_creators%'; set global log_bin_trust_function_creators = 1; æ°¸ä¹…è§£å†³ï¼š /etc/my.cnf [mysqld] log_bin_trust_function_creators = 1 12345678--äº§ç”Ÿéšæœºæ•´æ•°create function ran_num() returns int(5)begin declare i int default 0; set i =floor( rand()*100 ) ; return i ;end $ 1234567891011121314--é€šè¿‡å­˜å‚¨è¿‡ç¨‹æ’å…¥æµ·é‡æ•°æ®ï¼šempè¡¨ä¸­ ï¼Œ 10000, 100000create procedure insert_emp( in eid_start int(10),in data_times int(10))begin declare i int default 0; set autocommit = 0 ; repeat insert into emp values(eid_start + i, randstring(5) ,'other' ,ran_num()) ; set i=i+1 ; until i=data_times end repeat ; commit ;end $ 12345678910111213--é€šè¿‡å­˜å‚¨è¿‡ç¨‹æ’å…¥æµ·é‡æ•°æ®ï¼šdeptè¡¨ä¸­ create procedure insert_dept(in dno_start int(10) ,in data_times int(10)) begin declare i int default 0; set autocommit = 0 ; repeat insert into dept values(dno_start+i ,randstring(6),randstring(8)) ; set i=i+1 ; until i=data_times end repeat ; commit ; end$ 1234--æ’å…¥æ•°æ® delimiter ; call insert_emp(1000,800000) ; call insert_dept(10,30) ; â€‹ b.åˆ†ææµ·é‡æ•°æ®: â€‹ ï¼ˆ1ï¼‰profiles â€‹ show profiles ; --é»˜è®¤å…³é—­ â€‹ show variables like '%profiling%'; â€‹ set profiling = on ; â€‹ show profiles ï¼šä¼šè®°å½•æ‰€æœ‰profilingæ‰“å¼€ä¹‹åçš„ å…¨éƒ¨SQLæŸ¥è¯¢è¯­å¥æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ç¼ºç‚¹ï¼šä¸å¤Ÿç²¾ç¡®ï¼Œåªèƒ½çœ‹åˆ° æ€»å…±æ¶ˆè´¹çš„æ—¶é—´ï¼Œä¸èƒ½çœ‹åˆ°å„ä¸ªç¡¬ä»¶æ¶ˆè´¹çš„æ—¶é—´ï¼ˆcpu io ï¼‰ â€‹ â€‹ (2)ç²¾ç¡®åˆ†æ:sqlè¯Šæ–­ â€‹ show profile all for query ä¸Šä¸€æ­¥æŸ¥è¯¢çš„çš„Query_Id â€‹ show profile cpu,block io for query ä¸Šä¸€æ­¥æŸ¥è¯¢çš„çš„Query_Id â€‹ â€‹ (3)å…¨å±€æŸ¥è¯¢æ—¥å¿— ï¼šè®°å½•å¼€å¯ä¹‹åçš„ å…¨éƒ¨SQLè¯­å¥ã€‚ ï¼ˆè¿™æ¬¡å…¨å±€çš„è®°å½•æ“ä½œ ä»…ä»…åœ¨è°ƒä¼˜ã€å¼€å‘è¿‡ç¨‹ä¸­æ‰“å¼€å³å¯ï¼Œåœ¨æœ€ç»ˆçš„éƒ¨ç½²å®æ–½æ—¶ ä¸€å®šå…³é—­ï¼‰ â€‹ show variables like '%general_log%'; â€‹ 12345678--æ‰§è¡Œçš„æ‰€æœ‰SQLè®°å½•åœ¨è¡¨ä¸­set global general_log = 1 ;--å¼€å¯å…¨å±€æ—¥å¿—set global log_output='table' ; --è®¾ç½® å°†å…¨éƒ¨çš„SQL è®°å½•åœ¨è¡¨ä¸­--æ‰§è¡Œçš„æ‰€æœ‰SQLè®°å½•åœ¨æ–‡ä»¶ä¸­set global log_output='file' ;set global general_log = on ;set global general_log_file='/tmp/general.log' ; 12å¼€å¯åï¼Œä¼šè®°å½•æ‰€æœ‰SQL ï¼š ä¼šè¢«è®°å½• mysql.general_logè¡¨ä¸­ã€‚ select * from mysql.general_log ; é”æœºåˆ¶è¯¦è§£ é”æœºåˆ¶ ï¼šè§£å†³å› èµ„æºå…±äº« è€Œé€ æˆçš„å¹¶å‘é—®é¢˜ã€‚ ç¤ºä¾‹ï¼šä¹°æœ€åä¸€ä»¶è¡£æœX A: X ä¹° ï¼š XåŠ é” -&gt;è¯•è¡£æœ...ä¸‹å•..ä»˜æ¬¾..æ‰“åŒ… -&gt;Xè§£é” B: X ä¹°ï¼šå‘ç°Xå·²è¢«åŠ é”ï¼Œç­‰å¾…Xè§£é”ï¼Œ Xå·²å”®ç©º åˆ†ç±»ï¼š æ“ä½œç±»å‹ï¼š a.è¯»é”ï¼ˆå…±äº«é”ï¼‰ï¼š å¯¹åŒä¸€ä¸ªæ•°æ®ï¼ˆè¡£æœï¼‰ï¼Œå¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œï¼Œäº’ä¸å¹²æ‰°ã€‚ b.å†™é”ï¼ˆäº’æ–¥é”ï¼‰ï¼š å¦‚æœå½“å‰å†™æ“ä½œæ²¡æœ‰å®Œæ¯•ï¼ˆä¹°è¡£æœçš„ä¸€ç³»åˆ—æ“ä½œï¼‰ï¼Œåˆ™æ— æ³•è¿›è¡Œå…¶ä»–çš„è¯»æ“ä½œã€å†™æ“ä½œ æ“ä½œèŒƒå›´ï¼š a.è¡¨é” ï¼šä¸€æ¬¡æ€§å¯¹ä¸€å¼ è¡¨æ•´ä½“åŠ é”ã€‚å¦‚MyISAMå­˜å‚¨å¼•æ“ä½¿ç”¨è¡¨é”ï¼Œå¼€é”€å°ã€åŠ é”å¿«ï¼›æ— æ­»é”ï¼›ä½†é”çš„èŒƒå›´å¤§ï¼Œå®¹æ˜“å‘ç”Ÿé”å†²çªã€å¹¶å‘åº¦ä½ã€‚ b.è¡Œé” ï¼šä¸€æ¬¡æ€§å¯¹ä¸€æ¡æ•°æ®åŠ é”ã€‚å¦‚InnoDBå­˜å‚¨å¼•æ“ä½¿ç”¨è¡Œé”ï¼Œå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›å®¹æ˜“å‡ºç°æ­»é”ï¼›é”çš„èŒƒå›´è¾ƒå°ï¼Œä¸æ˜“å‘ç”Ÿé”å†²çªï¼Œå¹¶å‘åº¦é«˜ï¼ˆå¾ˆå°æ¦‚ç‡ å‘ç”Ÿé«˜å¹¶å‘é—®é¢˜ï¼šè„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤åº¦ã€ä¸¢å¤±æ›´æ–°ç­‰é—®é¢˜ï¼‰ã€‚ c.é¡µé” ç¤ºä¾‹ï¼š ï¼ˆ1ï¼‰è¡¨é” ï¼š --è‡ªå¢æ“ä½œ MYSQL/SQLSERVER æ”¯æŒï¼›oracleéœ€è¦å€ŸåŠ©äºåºåˆ—æ¥å®ç°è‡ªå¢ create table tablelock ( id int primary key auto_increment , name varchar(20) )engine myisam; insert into tablelock(name) values('a1'); insert into tablelock(name) values('a2'); insert into tablelock(name) values('a3'); insert into tablelock(name) values('a4'); insert into tablelock(name) values('a5'); commit; 1234567891011121314151617181920212223å¢åŠ é”ï¼šlocak table è¡¨1 read/write ,è¡¨2 read/write ,...æŸ¥çœ‹åŠ é”çš„è¡¨ï¼šshow open tables ;ä¼šè¯ï¼šsession :æ¯ä¸€ä¸ªè®¿é—®æ•°æ®çš„doså‘½ä»¤è¡Œã€æ•°æ®åº“å®¢æˆ·ç«¯å·¥å…· éƒ½æ˜¯ä¸€ä¸ªä¼šè¯===åŠ è¯»é”ï¼š ä¼šè¯0ï¼š lock table tablelock read ; select * from tablelock; --è¯»ï¼ˆæŸ¥ï¼‰ï¼Œå¯ä»¥ delete from tablelock where id =1 ; --å†™ï¼ˆå¢åˆ æ”¹ï¼‰ï¼Œä¸å¯ä»¥ select * from emp ; --è¯»ï¼Œä¸å¯ä»¥ delete from emp where eid = 1; --å†™ï¼Œä¸å¯ä»¥ ç»“è®º1ï¼š --å¦‚æœæŸä¸€ä¸ªä¼šè¯ å¯¹Aè¡¨åŠ äº†readé”ï¼Œåˆ™ è¯¥ä¼šè¯ å¯ä»¥å¯¹Aè¡¨è¿›è¡Œè¯»æ“ä½œã€ä¸èƒ½è¿›è¡Œå†™æ“ä½œï¼› ä¸” è¯¥ä¼šè¯ä¸èƒ½å¯¹å…¶ä»–è¡¨è¿›è¡Œè¯»ã€å†™æ“ä½œã€‚ --å³å¦‚æœç»™Aè¡¨åŠ äº†è¯»é”ï¼Œåˆ™å½“å‰ä¼šè¯åªèƒ½å¯¹Aè¡¨è¿›è¡Œè¯»æ“ä½œã€‚ ä¼šè¯1ï¼ˆå…¶ä»–ä¼šè¯ï¼‰ï¼š select * from tablelock; --è¯»ï¼ˆæŸ¥ï¼‰ï¼Œå¯ä»¥ delete from tablelock where id =1 ; --å†™ï¼Œä¼šâ€œç­‰å¾…â€ä¼šè¯0å°†é”é‡Šæ”¾ ä¼šè¯1ï¼ˆå…¶ä»–ä¼šè¯ï¼‰ï¼š select * from emp ; --è¯»ï¼ˆæŸ¥ï¼‰ï¼Œå¯ä»¥ delete from emp where eno = 1; --å†™ï¼Œå¯ä»¥ ç»“è®º2ï¼š --æ€»ç»“ï¼š ä¼šè¯0ç»™Aè¡¨åŠ äº†é”ï¼›å…¶ä»–ä¼šè¯çš„æ“ä½œï¼ša.å¯ä»¥å¯¹å…¶ä»–è¡¨ï¼ˆAè¡¨ä»¥å¤–çš„è¡¨ï¼‰è¿›è¡Œè¯»ã€å†™æ“ä½œ b.å¯¹Aè¡¨ï¼šè¯»-å¯ä»¥ï¼› å†™-éœ€è¦ç­‰å¾…é‡Šæ”¾é”ã€‚ é‡Šæ”¾é”: unlock tables ; å†™é”ç¤ºä¾‹ä¸MyISAMæ¨¡å¼ç‰¹å¾ ===åŠ å†™é”ï¼š ä¼šè¯0ï¼š lock table tablelock write ; å½“å‰ä¼šè¯ï¼ˆä¼šè¯0ï¼‰ å¯ä»¥å¯¹åŠ äº†å†™é”çš„è¡¨ è¿›è¡Œä»»ä½•æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ï¼›ä½†æ˜¯ä¸èƒ½ æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰å…¶ä»–è¡¨ å…¶ä»–ä¼šè¯ï¼š å¯¹ä¼šè¯0ä¸­åŠ å†™é”çš„è¡¨ å¯ä»¥è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„å‰ææ˜¯ï¼šç­‰å¾…ä¼šè¯0é‡Šæ”¾å†™é” MySQLè¡¨çº§é”çš„é”æ¨¡å¼ MyISAMåœ¨æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼ˆSELECTï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„æ‰€æœ‰è¡¨åŠ è¯»é”ï¼Œ åœ¨æ‰§è¡Œæ›´æ–°æ“ä½œï¼ˆDMLï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ å†™é”ã€‚ æ‰€ä»¥å¯¹MyISAMè¡¨è¿›è¡Œæ“ä½œï¼Œä¼šæœ‰ä»¥ä¸‹æƒ…å†µï¼š aã€å¯¹MyISAMè¡¨çš„è¯»æ“ä½œï¼ˆåŠ è¯»é”ï¼‰ï¼Œä¸ä¼šé˜»å¡å…¶ä»–è¿›ç¨‹ï¼ˆä¼šè¯ï¼‰å¯¹åŒä¸€è¡¨çš„è¯»è¯·æ±‚ï¼Œ ä½†ä¼šé˜»å¡å¯¹åŒä¸€è¡¨çš„å†™è¯·æ±‚ã€‚åªæœ‰å½“è¯»é”é‡Šæ”¾åï¼Œæ‰ä¼šæ‰§è¡Œå…¶å®ƒè¿›ç¨‹çš„å†™æ“ä½œã€‚ bã€å¯¹MyISAMè¡¨çš„å†™æ“ä½œï¼ˆåŠ å†™é”ï¼‰ï¼Œä¼šé˜»å¡å…¶ä»–è¿›ç¨‹ï¼ˆä¼šè¯ï¼‰å¯¹åŒä¸€è¡¨çš„è¯»å’Œå†™æ“ä½œï¼Œ åªæœ‰å½“å†™é”é‡Šæ”¾åï¼Œæ‰ä¼šæ‰§è¡Œå…¶å®ƒè¿›ç¨‹çš„è¯»å†™æ“ä½œã€‚ è¡¨é”æƒ…å†µåˆ†æåŠè¡Œé”è§£æ åˆ†æè¡¨é”å®šï¼š æŸ¥çœ‹å“ªäº›è¡¨åŠ äº†é”ï¼š show open tables ; 1ä»£è¡¨è¢«åŠ äº†é” åˆ†æè¡¨é”å®šçš„ä¸¥é‡ç¨‹åº¦ï¼š show status like 'table%' ; Table_locks_immediate :ç«‹åˆ»èƒ½è·å–åˆ°çš„é”æ•° Table_locks_waitedï¼šéœ€è¦ç­‰å¾…çš„è¡¨é”æ•°(å¦‚æœè¯¥å€¼è¶Šå¤§ï¼Œè¯´æ˜å­˜åœ¨è¶Šå¤§çš„é”ç«äº‰) ä¸€èˆ¬å»ºè®®ï¼š Table_locks_immediate/Table_locks_waited &gt; 5000ï¼Œ å»ºè®®é‡‡ç”¨InnoDBå¼•æ“ï¼Œå¦åˆ™MyISAMå¼•æ“ â€‹ ï¼ˆ2ï¼‰è¡Œè¡¨ï¼ˆInnoDBï¼‰ create table linelock( id int(5) primary key auto_increment, name varchar(20) )engine=innodb ; insert into linelock(name) values('1') ; insert into linelock(name) values('2') ; insert into linelock(name) values('3') ; insert into linelock(name) values('4') ; insert into linelock(name) values('5') ; --mysqlé»˜è®¤è‡ªåŠ¨commit; oracleé»˜è®¤ä¸ä¼šè‡ªåŠ¨commit ; ä¸ºäº†ç ”ç©¶è¡Œé”ï¼Œæš‚æ—¶å°†è‡ªåŠ¨commitå…³é—­; set autocommit =0 ; ä»¥åéœ€è¦é€šè¿‡commit ä¼šè¯0ï¼š å†™æ“ä½œ insert into linelock values( 'a6') ; ä¼šè¯1ï¼š å†™æ“ä½œ åŒæ ·çš„æ•°æ® update linelock set name='ax' where id = 6; å¯¹è¡Œé”æƒ…å†µï¼š 1.å¦‚æœä¼šè¯xå¯¹æŸæ¡æ•°æ®aè¿›è¡Œ DMLæ“ä½œï¼ˆç ”ç©¶æ—¶ï¼šå…³é—­äº†è‡ªåŠ¨commitçš„æƒ…å†µä¸‹ï¼‰ï¼Œåˆ™å…¶ä»–ä¼šè¯å¿…é¡»ç­‰å¾…ä¼šè¯xç»“æŸäº‹åŠ¡(commit/rollback)å æ‰èƒ½å¯¹æ•°æ®aè¿›è¡Œæ“ä½œã€‚ 2.è¡¨é” æ˜¯é€šè¿‡unlock tablesï¼Œä¹Ÿå¯ä»¥é€šè¿‡äº‹åŠ¡è§£é” ; è¡Œé” æ˜¯é€šè¿‡äº‹åŠ¡è§£é”ã€‚ â€‹ è¡Œé”ï¼Œæ“ä½œä¸åŒæ•°æ®ï¼š ä¼šè¯0ï¼š å†™æ“ä½œ insert into linelock values(8,'a8') ; ä¼šè¯1ï¼š å†™æ“ä½œï¼Œ ä¸åŒçš„æ•°æ® update linelock set name='ax' where id = 5; è¡Œé”ï¼Œä¸€æ¬¡é”ä¸€è¡Œæ•°æ®ï¼›å› æ­¤ å¦‚æœæ“ä½œçš„æ˜¯ä¸åŒæ•°æ®ï¼Œåˆ™ä¸å¹²æ‰°ã€‚ è¡Œé”çš„æ³¨æ„äº‹é¡¹åŠä½¿ç”¨æƒ…å†µåˆ†æ â€‹ è¡Œé”çš„æ³¨æ„äº‹é¡¹ï¼š â€‹ a.å¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œåˆ™è¡Œé”ä¼šè½¬ä¸ºè¡¨é” â€‹ show index from linelock ; â€‹ alter table linelock add index idx_linelock_name(name); â€‹ ä¼šè¯0ï¼š å†™æ“ä½œ â€‹ update linelock set name = 'ai' where name = '3' ; â€‹ â€‹ ä¼šè¯1ï¼š å†™æ“ä½œï¼Œ ä¸åŒçš„æ•°æ® â€‹ update linelock set name = 'aiX' where name = '4' ; â€‹ ä¼šè¯0ï¼š å†™æ“ä½œ â€‹ update linelock set name = 'ai' where name = 3 ; â€‹ â€‹ ä¼šè¯1ï¼š å†™æ“ä½œï¼Œ ä¸åŒçš„æ•°æ® â€‹ update linelock set name = 'aiX' where name = 4 ; â€‹ â€‹ --å¯ä»¥å‘ç°ï¼Œæ•°æ®è¢«é˜»å¡äº†ï¼ˆåŠ é”ï¼‰ â€‹ -- åŸå› ï¼šå¦‚æœç´¢å¼•ç±» å‘ç”Ÿäº†ç±»å‹è½¬æ¢ï¼Œåˆ™ç´¢å¼•å¤±æ•ˆã€‚ å› æ­¤ æ­¤æ¬¡æ“ä½œï¼Œä¼šä»è¡Œé” è½¬ä¸ºè¡¨é”ã€‚ â€‹ â€‹ b.è¡Œé”çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼šé—´éš™é”ï¼šå€¼åœ¨èŒƒå›´å†…ï¼Œä½†å´ä¸å­˜åœ¨ â€‹ --æ­¤æ—¶linelockè¡¨ä¸­ æ²¡æœ‰id=7çš„æ•°æ® â€‹ update linelock set name ='x' where id &gt;1 and id&lt;9 ; --å³åœ¨æ­¤whereèŒƒå›´ä¸­ï¼Œæ²¡æœ‰id=7çš„æ•°æ®ï¼Œåˆ™id=7çš„æ•°æ®æˆä¸ºé—´éš™ã€‚ â€‹ é—´éš™ï¼šMysqlä¼šè‡ªåŠ¨ç»™ é—´éš™ åŠ ç´¢ -&gt;é—´éš™é”ã€‚å³ æœ¬é¢˜ ä¼šè‡ªåŠ¨ç»™id=7çš„æ•°æ®åŠ  é—´éš™é”ï¼ˆè¡Œé”ï¼‰ã€‚ â€‹ è¡Œé”ï¼šå¦‚æœæœ‰whereï¼Œåˆ™å®é™…åŠ ç´¢çš„èŒƒå›´ å°±æ˜¯whereåé¢çš„èŒƒå›´ï¼ˆä¸æ˜¯å®é™…çš„å€¼ï¼‰ æŸ¥è¯¢è¡Œé” â€‹ å¦‚ä½•ä»…ä»…æ˜¯æŸ¥è¯¢æ•°æ®ï¼Œèƒ½å¦åŠ é”ï¼Ÿ å¯ä»¥ for update â€‹ ç ”ç©¶å­¦ä¹ æ—¶ï¼Œå°†è‡ªåŠ¨æäº¤å…³é—­ï¼š â€‹ set autocommit =0 ; â€‹ start transaction ; â€‹ begin ; â€‹ select * from linelock where id =2 for update ; â€‹ â€‹ é€šè¿‡for updateå¯¹queryè¯­å¥è¿›è¡ŒåŠ é”ã€‚ â€‹ â€‹ è¡Œé”ï¼š â€‹ InnoDBé»˜è®¤é‡‡ç”¨è¡Œé”ï¼› â€‹ ç¼ºç‚¹ï¼š æ¯”è¡¨é”æ€§èƒ½æŸè€—å¤§ã€‚ â€‹ ä¼˜ç‚¹ï¼šå¹¶å‘èƒ½åŠ›å¼ºï¼Œæ•ˆç‡é«˜ã€‚ â€‹ å› æ­¤å»ºè®®ï¼Œé«˜å¹¶å‘ç”¨InnoDBï¼Œå¦åˆ™ç”¨MyISAMã€‚ â€‹ â€‹ è¡Œé”åˆ†æï¼š â€‹ show status like '%innodb_row_lock%' ; â€‹ Innodb_row_lock_current_waits :å½“å‰æ­£åœ¨ç­‰å¾…é”çš„æ•°é‡ â€‹ Innodb_row_lock_timeï¼šç­‰å¾…æ€»æ—¶é•¿ã€‚ä»ç³»ç»Ÿå¯åˆ°ç°åœ¨ ä¸€å…±ç­‰å¾…çš„æ—¶é—´ â€‹ Innodb_row_lock_time_avg ï¼šå¹³å‡ç­‰å¾…æ—¶é•¿ã€‚ä»ç³»ç»Ÿå¯åˆ°ç°åœ¨å¹³å‡ç­‰å¾…çš„æ—¶é—´ â€‹ Innodb_row_lock_time_max ï¼šæœ€å¤§ç­‰å¾…æ—¶é•¿ã€‚ä»ç³»ç»Ÿå¯åˆ°ç°åœ¨æœ€å¤§ä¸€æ¬¡ç­‰å¾…çš„æ—¶é—´ â€‹ Innodb_row_lock_waits ï¼š ç­‰å¾…æ¬¡æ•°ã€‚ä»ç³»ç»Ÿå¯åˆ°ç°åœ¨ä¸€å…±ç­‰å¾…çš„æ¬¡æ•° ä¸»ä»å¤åˆ¶ â€‹ windows:mysql ä¸» â€‹ linux:mysqlä» å®‰è£…windowsç‰ˆmysql: å¦‚æœä¹‹å‰è®¡ç®—æœºä¸­å®‰è£…è¿‡Mysqlï¼Œè¦é‡æ–°å†å®‰è£… åˆ™éœ€è¦ï¼šå…ˆå¸è½½ å†å®‰è£… å…ˆå¸è½½ï¼š é€šè¿‡ç”µè„‘è‡ªå¸¦å¸è½½å·¥å…·å¸è½½Mysql (ç”µè„‘ç®¡å®¶ä¹Ÿå¯ä»¥) åˆ é™¤ä¸€ä¸ªmysqlç¼“å­˜æ–‡ä»¶C:\\ProgramData\\MySQL åˆ é™¤æ³¨å†Œè¡¨regeditä¸­æ‰€æœ‰mysqlç›¸å…³é…ç½® --é‡å¯è®¡ç®—æœº å®‰è£…MYSQLï¼š å®‰è£…æ—¶ï¼Œå¦‚æœå‡ºç°æœªå“åº”ï¼š åˆ™é‡æ–°æ‰“å¼€D:\\MySQL\\MySQL Server 5.5\\bin\\MySQLInstanceConfig.exe å›¾å½¢åŒ–å®¢æˆ·ç«¯ï¼š SQLyog, Navicat å¦‚æœè¦è¿œç¨‹è¿æ¥æ•°æ®åº“ï¼Œåˆ™éœ€è¦æˆæƒè¿œç¨‹è®¿é—®ã€‚ æˆæƒè¿œç¨‹è®¿é—® :(A-&gt;B,åˆ™å†Bè®¡ç®—æœºçš„Mysqlä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤) GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'root' WITH GRANT OPTION; FLUSH PRIVILEGES; å¦‚æœä»ç„¶æŠ¥é”™ï¼šå¯èƒ½æ˜¯é˜²ç«å¢™æ²¡å…³é—­ ï¼š åœ¨Bå…³é—­é˜²ç«å¢™ service iptables stop å®ç°ä¸»ä»åŒæ­¥ï¼ˆä¸»ä»å¤åˆ¶ï¼‰ï¼šå›¾ 1.masterå°†æ”¹å˜çš„æ•° è®°å½•åœ¨æœ¬åœ°çš„ äºŒè¿›åˆ¶æ—¥å¿—ä¸­ï¼ˆbinary logï¼‰ ï¼›è¯¥è¿‡ç¨‹ ç§°ä¹‹ä¸ºï¼šäºŒè¿›åˆ¶æ—¥å¿—ä»¶äº‹ 2.slaveå°†masterçš„binary logæ‹·è´åˆ°è‡ªå·±çš„ relay logï¼ˆä¸­ç»§æ—¥å¿—æ–‡ä»¶ï¼‰ä¸­ 3.ä¸­ç»§æ—¥å¿—äº‹ä»¶ï¼Œå°†æ•°æ®è¯»å–åˆ°è‡ªå·±çš„æ•°æ®åº“ä¹‹ä¸­ MYSQLä¸»ä»å¤åˆ¶ æ˜¯å¼‚æ­¥çš„ï¼Œä¸²è¡ŒåŒ–çš„ï¼Œ æœ‰å»¶è¿Ÿ master:slave = 1:n é…ç½®ï¼š windows(mysql: my.ini) linux(mysql: my.cnf) é…ç½®å‰ï¼Œä¸ºäº†æ— è¯¯ï¼Œå…ˆå°†æƒé™(è¿œç¨‹è®¿é—®)ã€é˜²ç«å¢™ç­‰å¤„ç†ï¼š å…³é—­windows/linuxé˜²ç«å¢™ï¼š windowsï¼šå³é”®â€œç½‘ç»œâ€ ,linux: service iptables stop Mysqlå…è®¸è¿œç¨‹è¿æ¥(windowos/linux)ï¼š GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'root' WITH GRANT OPTION; FLUSH PRIVILEGES; ä¸»æœºï¼ˆä»¥ä¸‹ä»£ç å’Œæ“ä½œ å…¨éƒ¨åœ¨ä¸»æœºwindowsä¸­æ“ä½œï¼‰ï¼š my.ini [mysqld] #id server-id=1 #äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ï¼ˆæ³¨æ„æ˜¯/ ä¸æ˜¯\\ï¼‰ log-bin=&quot;D:/MySQL/MySQL Server 5.5/data/mysql-bin&quot; #é”™è¯¯è®°å½•æ–‡ä»¶ log-error=&quot;D:/MySQL/MySQL Server 5.5/data/mysql-error&quot; #ä¸»ä»åŒæ­¥æ—¶ å¿½ç•¥çš„æ•°æ®åº“ binlog-ignore-db=mysql #(å¯é€‰)æŒ‡å®šä¸»ä»åŒæ­¥æ—¶ï¼ŒåŒæ­¥å“ªäº›æ•°æ®åº“ binlog-do-db=test windowsä¸­çš„æ•°æ®åº“ æˆæƒå“ªå°è®¡ç®—æœºä¸­çš„æ•°æ®åº“ æ˜¯è‡ªå·±çš„ä»æ•°æ®åº“ï¼š GRANT REPLICATION slave,reload,super ON . TO 'root'@'192.168.2.%' IDENTIFIED BY 'root'; flush privileges ; æŸ¥çœ‹ä¸»æ•°æ®åº“çš„çŠ¶æ€ï¼ˆæ¯æ¬¡åœ¨å·¦ä¸»ä»åŒæ­¥å‰ï¼Œéœ€è¦è§‚å¯Ÿ ä¸»æœºçŠ¶æ€çš„æœ€æ–°å€¼ï¼‰ show master status; ï¼ˆmysql-bin.000001ã€ 107ï¼‰ ä»æœºï¼ˆä»¥ä¸‹ä»£ç å’Œæ“ä½œ å…¨éƒ¨åœ¨ä»æœºlinuxä¸­æ“ä½œï¼‰ï¼š my.cnf [mysqld] server-id=2 log-bin=mysql-bin replicate-do-db=test linuxä¸­çš„æ•°æ® æˆæƒå“ªå°è®¡ç®—æœºä¸­çš„æ•°æ§ æ˜¯è‡ªå·±çš„ä¸»è®¡ç®—æœº CHANGE MASTER TO MASTER_HOST = '192.168.2.2', MASTER_USER = 'root', MASTER_PASSWORD = 'root', MASTER_PORT = 3306, master_log_file='mysql-bin.000001', master_log_pos=107; å¦‚æœæŠ¥é”™ï¼šThis operation cannot be performed with a running slave; run STOP SLAVE first è§£å†³ï¼šSTOP SLAVE ;å†æ¬¡æ‰§è¡Œä¸Šæ¡æˆæƒè¯­å¥ å¼€å¯ä¸»ä»åŒæ­¥ï¼š ä»æœºlinux: start slave ; æ£€éªŒ show slave status \\G ä¸»è¦è§‚å¯Ÿï¼š Slave_IO_Runningå’Œ Slave_SQL_Runningï¼Œç¡®ä¿äºŒè€…éƒ½æ˜¯yesï¼›å¦‚æœä¸éƒ½æ˜¯yesï¼Œåˆ™çœ‹ä¸‹æ–¹çš„ Last_IO_Errorã€‚ æœ¬æ¬¡ é€šè¿‡ Last_IO_Errorå‘ç°é”™è¯¯çš„åŸå› æ˜¯ ä¸»ä»ä½¿ç”¨äº†ç›¸åŒçš„server-idï¼Œ æ£€æŸ¥:åœ¨ä¸»ä»ä¸­åˆ†åˆ«æŸ¥çœ‹serverid: show variables like 'server_id' ; å¯ä»¥å‘ç°ï¼Œåœ¨Linuxä¸­çš„my.cnfä¸­è®¾ç½®äº†server-id=2ï¼Œä½†å®é™…æ‰§è¡Œæ—¶ ç¡®å®server-id=1ï¼ŒåŸå› ï¼šå¯èƒ½æ˜¯ linuxç‰ˆMysqlçš„ä¸€ä¸ªbugï¼Œä¹Ÿå¯èƒ½æ˜¯ windowså’ŒLinuxç‰ˆæœ¬ä¸ä¸€è‡´é€ æˆçš„å…¼å®¹æ€§é—®é¢˜ã€‚ è§£å†³æ”¹bugï¼š set global server_id =2 ; stop slave ; set global server_id =2 ; start slave ; show slave status \\G æ¼”ç¤ºï¼š ä¸»windows =&gt;ä» windows: å°†è¡¨ï¼Œæ’å…¥æ•°æ® è§‚å¯Ÿä»æ•°æ®åº“ä¸­è¯¥è¡¨çš„æ•°æ® æ•°æ®åº“+åç«¯ spring bootï¼ˆä¼ä¸šçº§æ¡†æ¶,ç›®å‰ä½¿ç”¨è¾ƒå¤šï¼‰ å‘½ä»¤é›†åˆ mysql -u root -p ç™»å½• show engines; æ˜¾ç¤ºæ”¯æŒå¼•æ“ show variables like â€˜%storage_engine%â€™; æŸ¥çœ‹å½“å‰ä½¿ç”¨å¼•æ“ 12345678-- æŒ‡å®šæ•°æ®åº“å¼•æ“create table tb(â€‹ id int(4) auto_increment,â€‹ name varchar(5),â€‹ dept varchar(5),â€‹ primary key(id))ENGINE=MyISAM AUTO_INCREMENT=1DEFAULT CHARSET=utf-8 å¸¸ç”¨è¯­å¥ æ•°æ®åº“ 1234567891011121314151617181920212223#1.æŸ¥çœ‹å·²æœ‰åº“ show databases;#2.åˆ›å»ºåº“(æŒ‡å®šå­—ç¬¦é›†) create database åº“å character set utf8 ï¼›æˆ– charset=utf8; create database åº“å default charset utf8 collate utf8_general_ci;#æ¡ˆä¾‹ï¼šåˆ›å»ºstuæ•°æ®åº“ï¼Œç¼–ç ä¸ºutf8 create database stu character set utf8; create database stu charset=utf8;#3.æŸ¥çœ‹åˆ›å»ºåº“çš„è¯­å¥(å­—ç¬¦é›†) show create database åº“å;#æ¡ˆä¾‹ï¼šæŸ¥çœ‹stuåˆ›å»ºæ–¹æ³• show create database stu;#4.æŸ¥çœ‹å½“å‰æ‰€åœ¨åº“ select database();#5.åˆ‡æ¢åº“ use åº“å;#æ¡ˆä¾‹ï¼šä½¿ç”¨stuæ•°æ®åº“ use stu;#6.åˆ é™¤åº“ drop database åº“å;#æ¡ˆä¾‹ï¼šåˆ é™¤testæ•°æ®åº“ drop database test; #7.åº“åçš„å‘½åè§„åˆ™##æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿,ä½†ä¸èƒ½ä½¿ç”¨çº¯æ•°å­—##åº“ååŒºåˆ†å­—æ¯å¤§å°å†™##ä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦å’Œmysqlå…³é”®å­— è¡¨ 12345678910111213141516#åˆ›å»ºCREATE TABLE IF NOT EXISTS `è¡¨å`( `å­—æ®µå` INT UNSIGNED AUTO_INCREMENT, `å­—æ®µå` VARCHAR(100) NOT NULL, `å­—æ®µå` VARCHAR(40) NOT NULL, `å­—æ®µå` DATE, PRIMARY KEY ( `ä¸»é”®å­—æ®µå` ))ENGINE=InnoDB DEFAULT CHARSET=utf8;#å¯¹åˆ›å»ºåçš„è¡¨æ·»åŠ åˆ—alter table è¡¨å add column æ–°å¢åˆ—å ç±»å‹ not null DEFAULT é»˜è®¤å€¼ after å‰ä¸€ä¸ªåˆ—å#å¯¹åˆ›å»ºè¡¨åæ·»åŠ ä¸»å¤–é”®alter table è¡¨å add constraint primary key è¡¨åï¼ˆä¸»é”®å­—æ®µåï¼‰foreign key (å¤–å»ºå) references å¤–å»ºå­—æ®µæ‰€åœ¨è¡¨å (å¤–å»ºå­—æ®µå) on delete cascade; #on delete cascade çº§è”åˆ é™¤ æ•°æ® 1234#å¢#åˆ #æ”¹#æŸ¥ è¿æ¥ 1234567#å†…è¿æ¥ inner join on äº¤é›†#å¤–è¿æ¥##å·¦è¿æ¥ left join on / left outer join on å·¦è¡¨+å³è¡¨ç¬¦åˆæ¡ä»¶æ•°æ®ï¼Œè®°å½•ä¸è¶³çš„åœ°æ–¹ä¸ºnull##å³è¿æ¥ right join on / right outer join on å³è¡¨+å·¦è¡¨ç¬¦åˆæ¡ä»¶æ•°æ®ï¼Œè®°å½•ä¸è¶³çš„åœ°æ–¹ä¸ºnull#å…¨è¿æ¥ union /union all ç´¢å¼• 123456#åˆ›å»ºç´¢å¼•create ç´¢å¼•ç±»å‹ ç´¢å¼•å on è¡¨å(å­—æ®µå);alter table è¡¨å add ç´¢å¼•ç±»å‹ ç´¢å¼•å(å­—æ®µå);#ä½¿ç”¨å¼ºåˆ¶ç´¢å¼•select * from è¡¨å FORCE INDEX (ç´¢å¼•å) where æ¡ä»¶; è§†å›¾ 1234567#åˆ›å»ºè§†å›¾create view è§†å›¾åç§° as selectè¯­å¥;#--æŸ¥çœ‹è§†å›¾ç»“æ„ï¼šdesc user_view; show create view user_view;#--æŸ¥çœ‹è§†å›¾å†…å®¹ï¼šselect * from user_view; æ¸¸æ ‡ 12345678910111213141516171819#å®šä¹‰DECLARE å…‰æ ‡åç§° CURSOR FOR æŸ¥è¯¢è¯­æ³•declare cursor_name cursor for select_statement#æ‰“å¼€OPEN å…‰æ ‡åç§°open cursor_name#å–æ¸¸æ ‡ä¸­çš„æ•°æ®FETCH å…‰æ ‡åç§° INFO var_name [ï¼Œvar_name ].....fetch cursor_name info var_name#å…³é—­æ¸¸æ ‡CLOSE curso_name;close å…‰æ ‡åç§°#é‡Šæ”¾æ¸¸æ ‡DEALLOCATE å…‰æ ‡åç§°deallocate cursor_name; è§¦å‘å™¨ 1234567891011121314#åˆ›å»º##åªæœ‰ä¸€ä¸ªæ‰§è¡Œè¯­å¥CREATE TRIGGER è§¦å‘å™¨å BEFORE|AFTER è§¦å‘äº‹ä»¶ ON è¡¨å FOR EACH ROW æ‰§è¡Œè¯­å¥;##å¤šä¸ªä¸ªæ‰§è¡Œè¯­å¥CREATE TRIGGER è§¦å‘å™¨å BEFORE|AFTER è§¦å‘äº‹ä»¶ON è¡¨å FOR EACH ROWBEGIN æ‰§è¡Œè¯­å¥åˆ—è¡¨END;#ç¤ºä¾‹create TRIGGER audit_log after INSERT on employees_test for each row begin INSERT INTO audit VALUES (NEW.ID, NEW.NAME);end å…¶ä»– 1234#æŸ¥çœ‹è¡¨å­—æ®µä¿¡æ¯desc è¡¨å#æŸ¥çœ‹åˆ›å»ºè¡¨sqlï¼ˆè¡¨æ‰€æœ‰ä¿¡æ¯ï¼‰show create table è¡¨å; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384#è¾“å‡ºæ ¼å¼date_format(date,&quot;%Y-%m&quot;) #æ’å…¥å­˜åœ¨å¿½ç•¥insert ignoreå­˜åœ¨å¿½ç•¥#å»é™¤é‡å¤distinctå­—æ®µå»é‡#åˆ†ç»„group by ã€‚ã€‚having##group by åœ¨where æœ€åä¸€ä¸ªé™åˆ¶æ¡ä»¶åé¢ï¼Œä¸èƒ½åœ¨é™åˆ¶æ¡ä»¶ä¸­é—´ï¼ŒHAVINGæ˜¯åœ¨åˆ†ç»„åæ‰¾åˆ°ç‰¹å®šçš„åˆ†ç»„ã€‚select user_id from order_info where date &gt; '2025-10-15' and product_name in ('C++','Java','Python') and status='completed' group by user_id HAVING count(user_id)&gt;1 order by user_id # in exists##inå…ˆå†…å†å¤–not in##EXISTSå…ˆå¤–å†å†…SELECT å­—æ®µ from è¡¨å where not EXISTS (select emp_no from dept_emp where employees.emp_no = dept_emp.emp_no)#è¿æ¥,concat(last_name,'\\'',first_name)SELECT dept_no,GROUP_CONCAT(emp_no SEPARATOR ',') as employees from dept_emp group by dept_no#è¯­æ³•: group_concat([distinct] å­—æ®µ [order by æ’åºå­—æ®µ asc/desc] separator 'åˆ†éš”ç¬¦')#å‡½æ•°é»˜è®¤çš„åˆ†éš”ç¬¦æ˜¯ &quot;,&quot;ï¼Œé»˜è®¤å¯ä»¥çœç•¥#æ›¿æ¢replaceupdate titles_test set emp_no=replace(emp_no,'10001','10005') where id=5#æ›´æ¢è¡¨åalter table titles_test rename to titles_2017round(avg(score),3)#æ­£åˆ™åŒ¹é…ï¼Œæ›¿æ¢ï¼Œè®¡ç®—é•¿åº¦select id,length( regexp_replace(STRING, '[A-Z0-9]', '')) from strings#æˆªå–select å­—æ®µ from è¡¨å order by right/left(å­—æ®µ,2)substring(str,index)substring_index(str,delim,count)subdate(date,day)subtime(expr1,expr2)#åˆ†é¡µselect * from employees LIMIT 5 offset 5select * from employees LIMIT 5,5#çª—å£å‡½æ•°# æ’åºå‡½æ•°#mysqlâ€”æ’åºå‡½æ•°rank() over()ã€dense_rank() over()ã€row_num() over()#æ¡ä»¶ç›¸åŒæ’åç›¸åŒï¼Œ é—´æ–­ä¸è¿ç»­ rank() over() è·³è¿‡é‡å¤ï¼Œæ¯”å¦‚ 113446#æ¡ä»¶ç›¸åŒæ’åç›¸åŒï¼Œ é—´æ–­è¿ç»­ dense_rank() over() ä¸è·³è¿‡é‡å¤ï¼Œæ¯”å¦‚ 112334#æ¡ä»¶ç›¸åŒæ’åä¸ç›¸åŒï¼Œä¸é—´æ–­è¿ç»­ row_num() over() ä¾æ¬¡ç›¸åŠ ï¼Œæ¯”å¦‚ 123456select id,number,dense_rank() over(order by number desc) as 'rank' from passing_number #ä»¥gradeæ’åºï¼ŒnumberæŒ‰é¡ºåºä»¥åŠgradeåˆ†ç»„ç´¯åŠ #grade number#A 2#D 1#C 2#B 2select grade,sum(number) over(order by grade) t_rank from class_grade#æ—¶é—´##å½“å‰æ—¶é—´current_date/curdate() now()current_timestamp, current_timestamp()#æ ¼å¼è½¬æ¢ å­—ç¬¦ä¸²è½¬æ—¶é—´str_to_date('08/09/2008', '%m/%d/%Y'); -- 2008-08-09str_to_date('08/09/08' , '%m/%d/%y'); -- 2008-08-09str_to_date('08.09.2008', '%m.%d.%Y'); -- 2008-08-09str_to_date('08:09:30', '%h:%i:%s'); -- 08:09:30str_to_date('08.09.2008 08:09:30', '%m.%d.%Y %h:%i:%s'); -- 2008-08-09 08:09:30#æ—¶é—´å¢å‡#æ¡ä»¶åˆ†æ”¯(case when æ¡ä»¶ then è¯­å¥ when æ¡ä»¶ then è¯­å¥ else è¯­å¥ end) as bonusselect e.emp_no,e.first_name,e.last_name,eb.btype,s.salary,(case when eb.btype = 1 then s.salary*0.1 when eb.btype= 2 then s.salary*0.2 else s.salary*0.3 end) as bonus from employees e INNER join emp_bonus eb on e.emp_no=eb.emp_no INNER join salaries s on e.emp_no=s.emp_no where s.to_date='9999-01-01'; çª—å£å‡½æ•° 1.çª—å£å‡½æ•°è¯­æ³• 12&lt;çª—å£å‡½æ•°&gt; over (partition by &lt;ç”¨äºåˆ†ç»„çš„åˆ—å&gt; order by &lt;ç”¨äºæ’åºçš„åˆ—å&gt;) &lt;çª—å£å‡½æ•°&gt;çš„ä½ç½®ï¼Œå¯ä»¥æ”¾ä»¥ä¸‹ä¸¤ç§å‡½æ•°ï¼š 1ï¼‰ ä¸“ç”¨çª—å£å‡½æ•°ï¼Œæ¯”å¦‚ åºå·å‡½æ•° rank, dense_rank, row_numberã€ åˆ†å¸ƒå‡½æ•°ï¼šPERCENT_RANK()ã€CUME_DIST()ã€PERCENT_RANK() å‰åå‡½æ•°ï¼šLAG(expr,n)ã€LEAD(expr,n) å‰åå‡½æ•°ï¼šLAG(expr,n)ã€LEAD(expr,n) å…¶å®ƒå‡½æ•°ï¼šNTH_VALUE(expr, n)ã€NTILE(n)ã€NTH_VALUE(expr,n) 2ï¼‰ èšåˆå‡½æ•°ï¼Œå¦‚sum. avg, count, max, minç­‰ 2.çª—å£å‡½æ•°æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š 1ï¼‰åŒæ—¶å…·æœ‰åˆ†ç»„ï¼ˆpartition byï¼‰å’Œæ’åºï¼ˆorder byï¼‰çš„åŠŸèƒ½ 2ï¼‰ä¸å‡å°‘åŸè¡¨çš„è¡Œæ•°ï¼Œæ‰€ä»¥ç»å¸¸ç”¨æ¥åœ¨æ¯ç»„å†…æ’å 3.æ³¨æ„äº‹é¡¹ çª—å£å‡½æ•°åŸåˆ™ä¸Šåªèƒ½å†™åœ¨selectå­å¥ä¸­ 4.çª—å£å‡½æ•°ä½¿ç”¨åœºæ™¯ 1ï¼‰ä¸šåŠ¡éœ€æ±‚â€œåœ¨æ¯ç»„å†…æ’åâ€ mysqlæˆªå–å­—ç¬¦ä¸²å‡½æ•° 1ã€left(str,length) ä»å·¦è¾¹æˆªå–length 2ã€right(str,length)ä»å³è¾¹æˆªå–length 3ã€substring(str,index)å½“index&gt;0ä»å·¦è¾¹å¼€å§‹æˆªå–ç›´åˆ°ç»“æŸ å½“index&lt;0ä»å³è¾¹å¼€å§‹æˆªå–ç›´åˆ°ç»“æŸ å½“index=0è¿”å›ç©º 4ã€substring(str,index,len) æˆªå–str,ä»indexå¼€å§‹ï¼Œæˆªå–lené•¿åº¦ 5ã€substring_index(str,delim,count)ï¼Œstræ˜¯è¦æˆªå–çš„å­—ç¬¦ä¸²ï¼Œdelimæ˜¯æˆªå–çš„å­—æ®µ countæ˜¯ä»å“ªé‡Œå¼€å§‹æˆªå–(ä¸º0åˆ™æ˜¯å·¦è¾¹ç¬¬0ä¸ªå¼€å§‹ï¼Œ1ä½å·¦è¾¹å¼€å§‹ç¬¬ä¸€ä¸ªé€‰å–å·¦è¾¹çš„ï¼Œ-1ä»å³è¾¹ç¬¬ä¸€ä¸ªå¼€å§‹é€‰å–å³è¾¹çš„ 6ã€subdate(date,day)æˆªå–æ—¶é—´ï¼Œæ—¶é—´å‡å»åé¢çš„day 7ã€subtime(expr1,expr2) æ—¶åˆ†ç§’expr1-expr2 8ã€mysqlç´¢å¼•ä»1å¼€å§‹ å…¨æ–‡ç´¢å¼•ï¼š æ˜¯ç›®å‰æœç´¢å¼•æ“ä½¿ç”¨çš„ä¸€ç§å…³é”®æŠ€æœ¯ã€‚ å¯ä»¥é€šè¿‡ALTER TABLE table_name ADD FULLTEXT (column);åˆ›å»ºå…¨æ–‡ç´¢å¼• æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨ä¿¡æ¯ 123456SELECT *FROM information_schema.`TABLES`WHERE TABLE_SCHEMA = 'hz_hbzy'; Postgres æŸ¥è¯¢å­—æ®µå¤‡æ³¨ 12select a.attnum,a.attname,concat_ws('',t.typname,SUBSTRING(format_type(a.atttypid,a.atttypmod) from '\\(.*\\)')) as type,d.description from pg_class c,pg_attribute a,pg_type t,pg_description dwhere c.relname='com_capture' and a.attnum&gt;0 and a.attrelid=c.oid and a.atttypid=t.oid and d.objoid=a.attrelid and d.objsubid=a.attnum; å–geomæ•°æ® 12select st_astext(geom) from ttt # testå½¢å¼SELECT st_asgeojson(geom) FROM &quot;ygjcgd&quot; # geojsonå½¢å¼ å­˜geom 12ç‚¹INSERT into ttt values ('1',ST_GeomFromText('POINT(119.104393005 29.3091735840001)',4490))é¢INSERT into ttt values ('2',ST_GeomFromText('POLYGON((120.489420304 30.2855081450001,120.48927819 30.2855092200001,120.489034534 30.2855205130001,120.488415416 30.2855540510001,120.488238647 30.285563627,120.487775051 30.2856122420001,120.487543209 30.2856365540001,120.48696129 30.28571928,120.486939727 30.285722842,120.486661766 30.2857687420001,120.48676176 30.2859599880001,120.486786439 30.2860551310001,120.486803289 30.286632664,120.487353662 30.2866268860001,120.487351682 30.2864715210001,120.487351632 30.286467605,120.487350721 30.2863964210001,120.487346937 30.2860998030001,120.487342737 30.285770433,120.487400427 30.2857633680001,120.487405079 30.285760184,120.48740623 30.285961001,120.487409165 30.2864727900001,120.487409564 30.286542108,120.487409728 30.2865708910001,120.487410051 30.2866269530001,120.487415064 30.2866269360001,120.487781689 30.2866291820001,120.488148313 30.286631426,120.488229104 30.286631782,120.488646675 30.2866336280001,120.488672652 30.2866335310001,120.489108909 30.286635501,120.489545164 30.286637469,120.489554908 30.2866377670001,120.489587466 30.2866073650001,120.489631665 30.286574779,120.489633218 30.2865468840001,120.489635952 30.286497766,120.489630193 30.2864750590001,120.489620367 30.286436291,120.489576415 30.2862629480001,120.489538252 30.286111927,120.489518579 30.286034075,120.489490667 30.2859208350001,120.489445946 30.285699532,120.489442796 30.285683949,120.489435137 30.2856060400001,120.489420304 30.2855081450001))',4490)) æ·»åŠ geomæ‰©å±• 12345CREATE EXTENSION postgis;CREATE EXTENSION fuzzystrmatch;CREATE EXTENSION postgis_tiger_geocoder;CREATE EXTENSION address_standardizer;CREATE EXTENSION postgis_topology; PostgREST æœåŠ¡å‘å¸ƒ ä¸Šå¥½ä¾‹é¢˜ æ—¶é—´æ ¼å¼ï¼Œæˆªå–åŒ¹é…ï¼Œåˆ†ç»„ï¼Œæ’åº 1select job,date_format(date,&quot;%Y-%m&quot;) as mon,sum(num) as cnt from resume_info where left(date,4)= '2025' group by job,mon order by mon desc,cnt desc å•è¾“å…¥ï¼Œå¤šå­—æ®µæŸ¥è¯¢ 123&lt;if test=&quot;text!=null and text!=''&quot;&gt; and CONCAT(t.city,t.bh,t.cun,t.jsztmc,t.xmxmmc) like concat ('%',#{text},'%')&lt;/if&gt; æœ‰æ²¡æœ‰è¿›è¡Œè¿‡åˆ†åº“åˆ†è¡¨æ“ä½œï¼Ÿåˆ†åº“ä¹‹åå¦‚ä½•ä¿æŒäº‹åŠ¡ä¸€è‡´ï¼Ÿ Javaå­—æ®µæ˜ å°„ å…¨å­—æ®µè¯¦è¡¨ æ•°å€¼ å‚è€ƒ ç±»å‹ å¤§å° èŒƒå›´ï¼ˆæœ‰ç¬¦å·ï¼‰ èŒƒå›´ï¼ˆæ— ç¬¦å·UNSIGNEDï¼‰ ç”¨é€” TINYINT 1 Bytes (-128ï¼Œ127) (0ï¼Œ255) å°æ•´æ•°å€¼ SMALLINT 2 Bytes (-32 768ï¼Œ32 767) (0ï¼Œ65 535) å¤§æ•´æ•°å€¼ MEDIUMINT 3 Bytes (-8 388 608ï¼Œ8 388 607) (0ï¼Œ16 777 215) å¤§æ•´æ•°å€¼ INTæˆ–INTEGER 4 Bytes (-2 147 483 648ï¼Œ2 147 483 647) (0ï¼Œ4 294 967 295) å¤§æ•´æ•°å€¼ BIGINT 8 Bytes (-9,223,372,036,854,775,808ï¼Œ9 223 372 036 854 775 807) (0ï¼Œ18 446 744 073 709 551 615) æå¤§æ•´æ•°å€¼ FLOAT 4 Bytes (-3.402 823 466 E+38ï¼Œ-1.175 494 351 E-38)ï¼Œ0ï¼Œ(1.175 494 351 E-38ï¼Œ3.402 823 466 351 E+38) 0ï¼Œ(1.175 494 351 E-38ï¼Œ3.402 823 466 E+38) å•ç²¾åº¦ æµ®ç‚¹æ•°å€¼ DOUBLE 8 Bytes (-1.797 693 134 862 315 7 E+308ï¼Œ-2.225 073 858 507 201 4 E-308)ï¼Œ0ï¼Œ(2.225 073 858 507 201 4 E-308ï¼Œ1.797 693 134 862 315 7 E+308) 0ï¼Œ(2.225 073 858 507 201 4 E-308ï¼Œ1.797 693 134 862 315 7 E+308) åŒç²¾åº¦ æµ®ç‚¹æ•°å€¼ DECIMAL å¯¹DECIMAL(M,D) ï¼Œå¦‚æœM&gt;Dï¼Œä¸ºM+2å¦åˆ™ä¸ºD+2 ä¾èµ–äºMå’ŒDçš„å€¼ ä¾èµ–äºMå’ŒDçš„å€¼ å°æ•°å€¼ æ—¶é—´ ç±»å‹ å¤§å° ( bytes) èŒƒå›´ æ ¼å¼ ç”¨é€” DATE 3 1000-01-01/9999-12-31 YYYY-MM-DD æ—¥æœŸå€¼ TIME 3 '-838:59:59'/'838:59:59' HH:MM:SS æ—¶é—´å€¼æˆ–æŒç»­æ—¶é—´ YEAR 1 1901/2155 YYYY å¹´ä»½å€¼ DATETIME 8 1000-01-01 00:00:00/9999-12-31 23:59:59 YYYY-MM-DD HH:MM:SS æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼ TIMESTAMP 4 1970-01-01 00:00:00/2038ç»“æŸæ—¶é—´æ˜¯ç¬¬ 2147483647 ç§’ï¼ŒåŒ—äº¬æ—¶é—´ 2038-1-19 11:14:07ï¼Œæ ¼æ—å°¼æ²»æ—¶é—´ 2038å¹´1æœˆ19æ—¥ å‡Œæ™¨ 03:14:07 YYYYMMDD HHMMSS æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œæ—¶é—´æˆ³ å­—ç¬¦ä¸² ç±»å‹ å¤§å° ç”¨é€” CHAR 0-255 bytes å®šé•¿å­—ç¬¦ä¸² VARCHAR 0-65535 bytes å˜é•¿å­—ç¬¦ä¸² TINYBLOB 0-255 bytes ä¸è¶…è¿‡ 255 ä¸ªå­—ç¬¦çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸² TINYTEXT 0-255 bytes çŸ­æ–‡æœ¬å­—ç¬¦ä¸² BLOB 0-65 535 bytes äºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ® TEXT 0-65 535 bytes é•¿æ–‡æœ¬æ•°æ® MEDIUMBLOB 0-16 777 215 bytes äºŒè¿›åˆ¶å½¢å¼çš„ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ® MEDIUMTEXT 0-16 777 215 bytes ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ® LONGBLOB 0-4 294 967 295 bytes äºŒè¿›åˆ¶å½¢å¼çš„æå¤§æ–‡æœ¬æ•°æ® LONGTEXT 0-4 294 967 295 bytes æå¤§æ–‡æœ¬æ•°æ® 1bit ä½ 1å­—èŠ‚=8bit 1k=1024å­—èŠ‚ 1å…†=1024k 1G=1023M 1T=1024G å¸¸ç”¨Javaæ˜ å°„ Mysql Java åŒ… å­—æ®µå å¤‡æ³¨ datetime Date æ•°æ®åº“è®¾è®¡ åç§° **è¡¨æ˜¯å¦ï¼š**is_xxx ç±»å‹ï¼šä»»ä½•å­—æ®µéè´Ÿæ•°å¿…é¡»æ˜¯ unsigned tinyint (1æ˜¯ 0å¦) POJOä¸­éœ€è¦ä»is_xxx å»æ‰iså‰ç¼€æ˜ å°„åˆ° xxx **è¡¨åã€å­—æ®µåï¼š**å…¨å°å†™ã€windowsä¸åŒºåˆ†å¤§å°å†™ï¼ŒlinuxåŒºåˆ†ã€‘ã€éæ•°å­—å¼€å¤´ã€ä¸¤ä¸ªä¸‹åˆ’çº¿ä¸­ä¸èƒ½åªæ˜¯æ•°å­—ã€è¡¨åä¸ä½¿ç”¨å¤æ•°ã€‚ä¸ä½¿ç”¨ä¿ç•™å­—ã€‚è¡¨åç§°å»ºè®®ï¼šä¸šåŠ¡åç§°_è¡¨çš„ä½œç”¨ã€‚ **ç´¢å¼•åï¼š**ä¸»é”®ç´¢å¼•ï¼špk_xxxã€å”¯ä¸€ç´¢å¼•åï¼šuk_xxxã€æ™®é€šç´¢å¼•ï¼šidx_xxx **å°æ•°ï¼š**decimal ï¼ˆè¶…è¿‡å…¶èŒƒå›´å»ºè®®æ‹†æˆæ•´æ•°å’Œå°æ•°åˆ†å¼€å­˜å‚¨ï¼‰ï¼Œç¦ç”¨floatã€double ã€ç²¾åº¦é—®é¢˜ã€‘ **å­—ç¬¦ä¸²ï¼š**æ•°æ®é•¿åº¦å‡ ä¹ç›¸ç­‰ç”¨charå®šé•¿ï¼Œvacharä¸ºå¯å˜é•¿å­—ç¬¦ä¸²ï¼Œé•¿åº¦è¶…è¿‡5000 æ—¶ ä½¿ç”¨textç±»å‹ç‹¬ç«‹è¡¨å­˜å‚¨ **è¡¨å•å¿…å¤‡ä¸‰å­—æ®µï¼š**idï¼ˆbigint unsignedï¼‰æ— ç¬¦å·å³æ­£å€¼èŒƒå›´æ›´å¤§ã€gmt_create / gmt_modified(datetime,å‰è€…ç°åœ¨æ—¶è¡¨ç¤ºä¸»åŠ¨å¼åˆ›å»ºï¼Œåè€…è¿‡å»åˆ†è¯è¡¨ç¤ºè¢«åŠ¨å¼æ›´æ–°) **åº“åï¼š**å»ºè®®åŒåº”ç”¨å **å¤‡æ³¨ï¼š**ä¿®æ”¹å­—æ®µå«ä¹‰ä¸çŠ¶æ€æ·»åŠ æ—¶åŠæ—¶æ›´æ–°å¤‡æ³¨ã€‚ **å…¶ä»–ï¼š**å­—æ®µé€‚å½“é•¿åº¦å†—ä½™ï¼Œå•æ ‡æ•°æ®è¶…è¿‡500ä¸‡è¡Œæˆ–å®¹é‡è¶…è¿‡2GBæ‰å»ºè®®åˆ†åº“åˆ†è¡¨ã€‚ä¸‰å¹´çš„æ—¶é—´ä¼°è®¡ã€‚ ç´¢å¼• å…·æœ‰å”¯ä¸€ç‰¹æ€§çš„å­—æ®µï¼Œå³ä½¿æ˜¯ç»„åˆå­—æ®µï¼Œä¹Ÿå¿…é¡»å»ºæˆå”¯ä¸€ç´¢å¼• è¶…è¿‡ä¸‰ä¸ªè¡¨ç¦æ­¢joinã€‚éœ€è¦joinçš„å­—æ®µï¼Œæ•°æ®ç±»å‹ä¿æŒç»å¯¹ä¸€è‡´ï¼›å¤šè¡¨å…³è”æŸ¥è¯¢æ—¶ï¼Œä¿è¯è¢«å…³è”çš„å­—æ®µéœ€è¦æœ‰ç´¢å¼•ã€‚ åœ¨varcharå­—æ®µä¸Šå»ºç«‹ç´¢å¼•æ—¶ï¼Œå¿…é¡»æŒ‡å®šç´¢å¼•é•¿åº¦ï¼Œæ²¡å¿…è¦å¯¹å…¨å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œæ ¹æ®å®é™…æ–‡æœ¬åŒºåˆ†åº¦å†³å®šç´¢å¼•é•¿åº¦ é¡µé¢æœç´¢ä¸¥ç¦å·¦æ¨¡ç³Šæˆ–è€…å…¨æ¨¡ç³Šï¼Œå¦‚æœéœ€è¦è¯·èµ°æœç´¢å¼•æ“æ¥è§£å†³ã€‚ å¦‚æœæœ‰order byçš„åœºæ™¯ï¼Œè¯·æ³¨æ„åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§ã€‚order by æœ€åçš„å­—æ®µæ˜¯ç»„åˆç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”æ”¾åœ¨ç´¢å¼•ç»„åˆé¡ºåºçš„æœ€åï¼Œé¿å…å‡ºç°file_sortçš„æƒ…å†µï¼Œå½±å“æŸ¥è¯¢æ€§èƒ½ã€‚ åˆ©ç”¨è¦†ç›–ç´¢å¼•æ¥è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œé¿å…å›è¡¨ã€‚ åˆ©ç”¨å»¶è¿Ÿå…³è”æˆ–è€…å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯ã€‚ SQLæ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡ï¼šè‡³å°‘è¦è¾¾åˆ° range çº§åˆ«ï¼Œè¦æ±‚æ˜¯refçº§åˆ«ï¼Œå¦‚æœå¯ä»¥æ˜¯constsæœ€å¥½ã€‚ å»ºç»„åˆç´¢å¼•çš„æ—¶å€™ï¼ŒåŒºåˆ†åº¦æœ€é«˜çš„åœ¨æœ€å·¦è¾¹ã€‚ é˜²æ­¢å› å­—æ®µç±»å‹ä¸åŒé€ æˆçš„éšå¼è½¬æ¢ï¼Œå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚ è¯­å¥ ä¸è¦ä½¿ç”¨count(åˆ—å)æˆ–count(å¸¸é‡)æ¥æ›¿ä»£count()ï¼Œcount()æ˜¯SQL92å®šä¹‰çš„æ ‡å‡†ç»Ÿè®¡è¡Œæ•°çš„è¯­æ³•ï¼Œè·Ÿæ•°æ®åº“æ— å…³ï¼Œè·ŸNULLå’ŒéNULLæ— å…³ã€‚ è¯´æ˜ï¼šcount(*)ä¼šç»Ÿè®¡å€¼ä¸ºNULLçš„è¡Œï¼Œè€Œcount(åˆ—å)ä¸ä¼šç»Ÿè®¡æ­¤åˆ—ä¸ºNULLå€¼çš„è¡Œã€‚ ã€‘count(distinct col) è®¡ç®—è¯¥åˆ—é™¤NULLä¹‹å¤–çš„ä¸é‡å¤è¡Œæ•°ï¼Œæ³¨æ„ count(distinct col1, col2) å¦‚æœå…¶ä¸­ä¸€åˆ—å…¨ä¸ºNULLï¼Œé‚£ä¹ˆå³ä½¿å¦ä¸€åˆ—æœ‰ä¸åŒçš„å€¼ï¼Œä¹Ÿè¿”å›ä¸º0ã€‚ å½“æŸä¸€åˆ—çš„å€¼å…¨æ˜¯NULLæ—¶ï¼Œcount(col)çš„è¿”å›ç»“æœä¸º0ï¼Œä½†sum(col)çš„è¿”å›ç»“æœä¸ºNULLï¼Œå› æ­¤ä½¿ç”¨sum()æ—¶éœ€æ³¨æ„NPEé—®é¢˜ã€‚ æ­£ä¾‹ï¼šå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼æ¥é¿å…sumçš„NPEé—®é¢˜ï¼šSELECT IFNULL(SUM(column), 0) FROM table; ä½¿ç”¨ISNULL()æ¥åˆ¤æ–­æ˜¯å¦ä¸ºNULLå€¼ã€‚ è¯´æ˜ï¼šNULLä¸ä»»ä½•å€¼çš„ç›´æ¥æ¯”è¾ƒéƒ½ä¸ºNULLã€‚ 1ï¼‰ NULL&lt;&gt;NULLçš„è¿”å›ç»“æœæ˜¯NULLï¼Œè€Œä¸æ˜¯falseã€‚ 2ï¼‰ NULL=NULLçš„è¿”å›ç»“æœæ˜¯NULLï¼Œè€Œä¸æ˜¯trueã€‚ 3ï¼‰ NULL&lt;&gt;1çš„è¿”å›ç»“æœæ˜¯NULLï¼Œè€Œä¸æ˜¯trueã€‚ ä»£ç ä¸­å†™åˆ†é¡µæŸ¥è¯¢é€»è¾‘æ—¶ï¼Œè‹¥countä¸º0åº”ç›´æ¥è¿”å›ï¼Œé¿å…æ‰§è¡Œåé¢çš„åˆ†é¡µè¯­å¥ã€‚ ä¸å¾—ä½¿ç”¨å¤–é”®ä¸çº§è”ï¼Œä¸€åˆ‡å¤–é”®æ¦‚å¿µå¿…é¡»åœ¨åº”ç”¨å±‚è§£å†³ã€‚ ç¦æ­¢ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œå­˜å‚¨è¿‡ç¨‹éš¾ä»¥è°ƒè¯•å’Œæ‰©å±•ï¼Œæ›´æ²¡æœ‰ç§»æ¤æ€§ã€‚ æ•°æ®è®¢æ­£ï¼ˆç‰¹åˆ«æ˜¯åˆ é™¤æˆ–ä¿®æ”¹è®°å½•æ“ä½œï¼‰æ—¶ï¼Œè¦å…ˆselectï¼Œé¿å…å‡ºç°è¯¯åˆ é™¤ï¼Œç¡®è®¤æ— è¯¯æ‰èƒ½æ‰§è¡Œæ›´æ–°è¯­å¥ã€‚ å¯¹äºæ•°æ®åº“ä¸­è¡¨è®°å½•çš„æŸ¥è¯¢å’Œå˜æ›´ï¼Œåªè¦æ¶‰åŠå¤šä¸ªè¡¨ï¼Œéƒ½éœ€è¦åœ¨åˆ—åå‰åŠ è¡¨çš„åˆ«åï¼ˆæˆ–è¡¨åï¼‰è¿›è¡Œé™å®šï¼Œå¦åˆ™åŒåå­—æ®µå­˜åœ¨å¤šè¡¨ä¸­ä¼šæŠ¥é”™ã€‚åˆ«åå‰åŠ asä½¿åˆ«åæ›´å®¹æ˜“è¯†åˆ«ã€‚ næ“ä½œèƒ½é¿å…åˆ™é¿å…ï¼Œè‹¥å®åœ¨é¿å…ä¸äº†ï¼Œéœ€è¦ä»”ç»†è¯„ä¼°inåè¾¹çš„é›†åˆå…ƒç´ æ•°é‡ï¼Œæ§åˆ¶åœ¨1000ä¸ªä¹‹å†…ã€‚ ORMæ˜ å°„ ä¸€å¾‹ä¸è¦ä½¿ç”¨ * ä½œä¸ºæŸ¥è¯¢çš„å­—æ®µåˆ—è¡¨ï¼Œéœ€è¦å“ªäº›å­—æ®µå¿…é¡»æ˜ç¡®å†™æ˜ã€‚å› ä¸ºä¼š 1ï¼‰å¢åŠ æŸ¥è¯¢åˆ†æå™¨è§£ææˆæœ¬ã€‚2ï¼‰å¢å‡å­—æ®µå®¹æ˜“ä¸resultMapé…ç½®ä¸ä¸€è‡´ã€‚3ï¼‰æ— ç”¨å­—æ®µå¢åŠ ç½‘ç»œæ¶ˆè€—ï¼Œå°¤å…¶æ˜¯textç±»å‹çš„å­—æ®µã€‚ POJOç±»çš„å¸ƒå°”å±æ€§ä¸èƒ½åŠ isï¼Œè€Œæ•°æ®åº“å­—æ®µå¿…é¡»åŠ is_ï¼Œè¦æ±‚åœ¨resultMapä¸­è¿›è¡Œå­—æ®µä¸å±æ€§ä¹‹é—´çš„æ˜ å°„ã€‚ ä¸è¦ç”¨resultClasså½“è¿”å›å‚æ•°ï¼Œå³ä½¿æ‰€æœ‰ç±»å±æ€§åä¸æ•°æ®åº“å­—æ®µä¸€ä¸€å¯¹åº”ï¼Œä¹Ÿéœ€è¦å®šä¹‰ï¼›åè¿‡æ¥ï¼Œæ¯ä¸€ä¸ªè¡¨ä¹Ÿå¿…ç„¶æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”ã€‚é…ç½®æ˜ å°„å…³ç³»ï¼Œä½¿å­—æ®µä¸DOç±»è§£è€¦ï¼Œæ–¹ä¾¿ç»´æŠ¤ã€‚ sql.xmlé…ç½®å‚æ•°ä½¿ç”¨ï¼š#{}ï¼Œ#param# ä¸è¦ä½¿ç”¨${} æ­¤ç§æ–¹å¼å®¹æ˜“å‡ºç°SQLæ³¨å…¥ iBATISè‡ªå¸¦çš„queryForList(String statementName,int start,int size)ä¸æ¨èä½¿ç”¨ã€‚ ä¸å…è®¸ç›´æ¥æ‹¿HashMapä¸Hashtableä½œä¸ºæŸ¥è¯¢ç»“æœé›†çš„è¾“å‡ºã€‚ æ›´æ–°æ•°æ®è¡¨è®°å½•æ—¶ï¼Œå¿…é¡»åŒæ—¶æ›´æ–°è®°å½•å¯¹åº”çš„gmt_modifiedå­—æ®µå€¼ä¸ºå½“å‰æ—¶é—´ã€‚ æ‰§è¡ŒSQLæ—¶ï¼Œä¸è¦æ›´æ–°æ— æ”¹åŠ¨çš„å­—æ®µï¼Œä¸€æ˜¯æ˜“å‡ºé”™ï¼›äºŒæ˜¯æ•ˆç‡ä½ï¼›ä¸‰æ˜¯å¢åŠ binlogå­˜å‚¨ @Transactionaläº‹åŠ¡ä¸è¦æ»¥ç”¨ã€‚äº‹åŠ¡ä¼šå½±å“æ•°æ®åº“çš„QPSï¼Œå¦å¤–ä½¿ç”¨äº‹åŠ¡çš„åœ°æ–¹éœ€è¦è€ƒè™‘å„æ–¹é¢çš„å›æ»šæ–¹æ¡ˆï¼ŒåŒ…æ‹¬ç¼“å­˜å›æ»šã€æœç´¢å¼•æ“å›æ»šã€æ¶ˆæ¯è¡¥å¿ã€ç»Ÿè®¡ä¿®æ­£ç­‰ã€‚ ä¸­çš„compareValueæ˜¯ä¸å±æ€§å€¼å¯¹æ¯”çš„å¸¸é‡ï¼Œä¸€èˆ¬æ˜¯æ•°å­—ï¼Œè¡¨ç¤ºç›¸ç­‰æ—¶å¸¦ä¸Šæ­¤æ¡ä»¶ï¼›è¡¨ç¤ºä¸ä¸ºç©ºä¸”ä¸ä¸ºnullæ—¶æ‰§è¡Œï¼›è¡¨ç¤ºä¸ä¸ºnullå€¼æ—¶æ‰§è¡Œã€‚ é˜¿é‡Œè§„èŒƒæ‘˜è¦ æ•°æ®åº“å­—æ®µè®¾è®¡åŠå¯¹åº”å…³ç³» æ•°æ®åº“ä¸‰åŸåˆ™ æ•°æ®åº“è®¾è®¡å·¥å…· å¦‚ä½•è®¾è®¡æ•°æ®åº“ åº”ç”¨ åˆ†åº“åˆ†è¡¨","link":"/2021/02/24/Draft/2021/MYSQL%E4%BC%98%E5%8C%96/"},{"title":"é­‘é­…å…ˆç”Ÿ | Redis","text":"ç®€ä»‹ Redisï¼ˆRemote Dictionary Serverï¼‰è¿œç¨‹å­—å…¸æœåŠ¡ å…è´¹å¼€æºçš„ï¼ŒCè¯­è¨€ç¼–å†™ï¼Œæä¾›å¤šç§è¯­è¨€ä½¿ç”¨ï¼Œæ”¯æŒç½‘ç»œï¼Œå¯æŒä¹…åŒ–ï¼Œéµå®ˆ BSD åè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ key-value æ•°æ®åº“ã€‚ Redis ä¸å…¶ä»– key - value ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚ Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚ ç»¼åˆé—®é¢˜ Rediså¤šçº¿ç¨‹è¿˜æ˜¯å•çº¿ç¨‹ï¼Ÿä¸ºä»€ä¹ˆè¿™æ ·ï¼Ÿ â€‹ å•çº¿ç¨‹ï¼ŒRedis 6.0ç‰ˆæœ¬ä¹‹åå¼€å§‹å¼•å…¥äº†å¤šçº¿ç¨‹å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œå°†è¯»å–ç½‘ç»œæ•°æ®åˆ°è¾“å…¥ç¼“å†²åŒºã€åè®®è§£æå’Œå°†æ‰§è¡Œç»“æœå†™å…¥è¾“å‡ºç¼“å†²åŒºçš„è¿‡ç¨‹å˜ä¸ºäº†å¤šçº¿ç¨‹ï¼Œæ‰§è¡Œå‘½ä»¤ä»ç„¶æ˜¯å•çº¿ç¨‹ã€‚ â€‹ ä¸ºä»€ä¹ˆä¸ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿå› ä¸ºRedisæ•°æ®åœ¨å†…å­˜ä¸­ï¼Œå¤šçº¿ç¨‹ä¼šå¢åŠ ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ä»£ä»·ï¼Œæ²¡æœ‰æ‰æ˜¯æ•ˆç‡æœ€é«˜çš„ã€‚å•çº¿ç¨‹æ²¡æœ‰æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸éœ€è¦ç«äº‰é”å’ŒCASæ“ä½œã€‚ æ•°æ®ç±»å‹ï¼Ÿ å¸¸ç”¨çš„äº”ç§æ•°æ®ç±»å‹ï¼š Stringï¼šå¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²ã€æ•´æ•°ã€æµ®ç‚¹æ•°ï¼Œå…è®¸è®¾ç½®è¿‡æœŸæ—¶é—´è‡ªåŠ¨åˆ é™¤ã€‚ Hashï¼šåŒ…å«é”®å€¼å¯¹çš„æ— åºæ•£åˆ—è¡¨ã€‚é€šè¿‡ â€œæ•°ç»„ + é“¾è¡¨â€ çš„é“¾åœ°å€æ³•æ¥è§£å†³éƒ¨åˆ†å“ˆå¸Œå†²çªï¼Œvalue åªèƒ½æ˜¯å­—ç¬¦ä¸²ã€‚ Listï¼šåŒå‘é“¾è¡¨ï¼Œå¯ä»¥å……å½“é˜Ÿåˆ—å’Œæ ˆçš„è§’è‰²ã€‚ Setï¼šç›¸å½“äºJava ä¸­çš„ HashSet ï¼Œå†…éƒ¨çš„é”®å€¼å¯¹æ˜¯æ— åºã€å”¯ä¸€çš„ã€‚key å°±æ˜¯å…ƒç´ çš„å€¼ï¼Œvalue ä¸º nullã€‚ Zsetï¼šç›¸å½“äº Java ä¸­çš„ SortedSet å’Œ HashMap çš„ç»“åˆä½“ï¼Œå†…éƒ¨çš„é”®å€¼å¯¹æ˜¯æœ‰åºã€å”¯ä¸€çš„ã€‚å¯ä»¥ä¸ºæ¯ä¸ªå…ƒç´ èµ‹äºˆä¸€ä¸ª score å€¼ï¼Œç”¨æ¥ä»£è¡¨æ’åºçš„æƒé‡ã€‚ ä¸å¸¸ç”¨çš„4ç§æ•°æ®ç±»å‹ï¼š BitMapï¼šå³ä½å›¾ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ byte æ•°ç»„ï¼Œç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œåªæœ‰ 0 å’Œ 1 ä¸¤ä¸ªæ•°å­—ã€‚å®é™…ä¸Šæ¥è¯´æ˜¯å½’å±äº String ç±»å‹ä¸‹é¢ã€‚ Hyperloglogsï¼šç”¨æ¥åšåŸºæ•°ç»Ÿè®¡çš„ç®—æ³•ã€‚ Geospatialï¼šå°†ç”¨æˆ·ç»™å®šçš„åœ°ç†ä½ç½®ä¿¡æ¯å‚¨å­˜èµ·æ¥ï¼Œ å¹¶å¯¹è¿™äº›ä¿¡æ¯è¿›è¡Œæ“ä½œã€‚ Pub/Subï¼šæ”¯æŒå¤šæ’­çš„å¯æŒä¹…åŒ–çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨äºå®ç°å‘å¸ƒè®¢é˜…åŠŸèƒ½ã€‚ Redisç¼“å­˜å¼‚å¸¸æ–¹æ¡ˆ ç¼“å­˜è¡€å´©ï¼Ÿ ç¼“å­˜è¡€å´©æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼Ÿ ç¼“å­˜é¢„çƒ­ï¼Ÿ ç¼“å­˜ç©¿é€ï¼Ÿ ç¼“å­˜å‡»ç©¿ï¼Ÿ ç¼“å­˜é™çº§ï¼Ÿ Redisäº‹åŠ¡ï¼Ÿ Redisäº‹åŠ¡æ˜¯å¦æœ‰åŸå­æ€§ï¼Œç›¸å…³å‘½ä»¤ï¼Ÿ Redis æŒä¹…åŒ–æœºåˆ¶ ï¼ŸAOF å’Œ RDB æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ Redis æ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ Redisé›†ç¾¤æ¶æ„ï¼Œä¸»ä»å¤åˆ¶ï¼Ÿ springmvcçš„æ§åˆ¶å™¨æ˜¯å•ä¾‹çš„å—?æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ å­¦ä¹ å·¥å…· å‘½ä»¤æŸ¥è¯¢ ç‹‚ç¥è§†é¢‘ Redis æœ€å…¨é¢è¯•é¢˜åŠç­”æ¡ˆ_å²æœˆå®‰ç„¶-CSDNåšå®¢_redisé¢˜åº“ æ•°æ®ç±»å‹æ¦‚è§ˆ æ•°æ®ç±»å‹ String Hash List Set ZSet Geospatial Hyperloglog Bitmap [Stream 5.0](#Redis Stream) ç‰¹ç‚¹ å­—ç¬¦ä¸²ï¼Œæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼ŒäºŒè¿›åˆ¶å®‰å…¨ å“ˆå¸Œï¼ŒåŒ…å«é”®ï¼ˆstring ï¼‰å€¼å¯¹çš„æ— åºæ•£åˆ—è¡¨ï¼Œé€‚åˆå­˜å‚¨å¯¹è±¡ åˆ—è¡¨ï¼Œé“¾è¡¨ä¸Šçš„èŠ‚ç‚¹å­—ç¬¦ä¸²å…ƒç´ ï¼Œæ’å…¥æœ‰åº é›†åˆï¼Œä¸åŒæ— åºå­—ç¬¦ä¸²å…ƒç´ ,å“ˆå¸Œè¡¨ æœ‰åºé›†åˆï¼Œä¸åŒå­—ç¬¦ä¸²ï¼Œè¿˜æœ‰å¸¦doubleç±»å‹çš„å¯é‡å¤åˆ†æ•°çš„æœ‰åºé›†åˆ åœ°ç†ä½ç½® åŸºæ•°ç»Ÿè®¡ä¸å å†…å­˜è®°å½•ç½‘ç«™UV Bitmap ä½å›¾ï¼Œæ•°æ®ç»“æ„ï¼äºŒè¿›åˆ¶ä½è®°å½•ï¼Œ0 å’Œ 1 ä¸¤ä¸ªçŠ¶æ€ å¼¥è¡¥å‘å¸ƒè®¢é˜…æ— æ³•æŒä¹…åŒ–çš„ç¼ºç‚¹ å®¹é‡ 512MB 232 -1 é”®å€¼å¯¹ï¼ˆ40å¤šäº¿ï¼‰ 232 -1 232 -1 232 -1 å¢ set hset/hmset lpushï¼Œrpush sadd zadd geoadd pfadd setbit å– get hget ï¼ˆå–å•ä¸ªï¼‰/hmget (å–å¤šä¸ª) lrangeå–åŒºé—´å€¼lpopå·¦å–rpop å³å– smembers å–æ‰€æœ‰ zscoreå•å– zrange èŒƒå›´å– zrevrange å‡åºå–zrangebyscore æ‰€æœ‰é™åºå–zrevrangebyscore æ‰€æœ‰å‡åºå– geoposgeodistï¼ˆä¸¤ç‚¹è·ç¦»ï¼‰georadiusï¼ˆç‚¹é™„è¿‘ç‚¹ï¼Œå¯æ•°é‡é™åˆ¶ï¼‰ getbit åˆ  del hdel Lpopã€Rpopã€lrem srem zrem å–æ—§æ”¹æ–° getset è‡ªå¢ incr ï¼ˆå¯æŒ‡å®š HINCRBYå¢åŠ æŒ‡å®šæ­¥é•¿ è‡ªå‡ decr ï¼ˆå¯æŒ‡å®š è¿½åŠ  append é•¿åº¦ strlen hlen llen zcard pfcountï¼ˆä¸é‡å¤æ•°é‡ï¼‰ bitcount(è®¡ç®—çŠ¶æ€æ•°é‡) æ‰¹é‡åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ mset hmset è¿”å›æ‰€æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç»™å®š key çš„å€¼ mget hmget è·å–å¯¹è±¡ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹ hgetall ï¼ˆå–æ‰€æœ‰ï¼‰ åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ hexists sismember è·å–å­—æ®µå hkeys è·å–å­—æ®µå€¼ hvals é›†åˆè¿ç®— sunion å¹¶é›†ï¼Œsinter äº¤é›†ï¼Œsdiff äº¤å·® pfmerge(åˆå¹¶) åº”ç”¨åœºæ™¯ ä¸MongoDBå¯¹æ¯” MongoDB Redis Nosqlç”±æ¥ å•æœºmysql mysql+ç¼“å­˜+å‚ç›´æ‹†åˆ† ä¸»ä»è¯»å†™åˆ†ç¦» åˆ†è¡¨åˆ†åº“+æ°´å¹³æ‹†åˆ†+mysqlé›†ç¾¤ ç°åœ¨ç”¨æˆ·ç¤¾äº¤ç½‘ç»œæ•°æ®æˆå€å¢é•¿ï¼Œsqléš¾ä»¥æ”¯æ’‘ NoSQLï¼ˆNot Only SQLï¼‰éå…³ç³»å‹æ•°æ®åº“ï¼Œä¸éœ€è¦å›ºå®šæ¨¡å¼ï¼Œæ— éœ€å¤šäºæ“ä½œå°±å¯ä»¥æ¨ªå‘æ“ä½œ ç®€ä»‹ Redisï¼ˆRemote Dictionary Serverï¼‰è¿œç¨‹å­—å…¸æœåŠ¡ å…è´¹å¼€æºï¼ŒCè¯­è¨€ç¼–å†™ï¼Œæä¾›å¤šç§è¯­è¨€ä½¿ç”¨ï¼Œæ”¯æŒç½‘ç»œï¼Œå¯æŒä¹…åŒ–ï¼Œéµå®ˆ BSD åè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ key-value æ•°æ®åº“ã€‚ ç±»å‹å¤šæ ·ï¼Œä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚ Redis ä¼˜åŠ¿ æ€§èƒ½æé«˜ â€“ Redisèƒ½è¯»çš„é€Ÿåº¦æ˜¯110000æ¬¡/s,å†™çš„é€Ÿåº¦æ˜¯81000æ¬¡/s ã€‚ æ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ æ•°æ®ç±»å‹å¤šæ · â€“ Redisæ”¯æŒäºŒè¿›åˆ¶çš„ Strings, Lists, Hashes, Sets åŠ Ordered Sets æ•°æ®ç±»å‹æ“ä½œã€‚ åŸå­ â€“ Redisçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œæ„æ€å°±æ˜¯è¦ä¹ˆæˆåŠŸæ‰§è¡Œè¦ä¹ˆå¤±è´¥å®Œå…¨ä¸æ‰§è¡Œã€‚å•ä¸ªæ“ä½œæ˜¯åŸå­æ€§çš„ã€‚å¤šä¸ªæ“ä½œä¹Ÿæ”¯æŒäº‹åŠ¡ï¼Œå³åŸå­æ€§ï¼Œé€šè¿‡MULTIå’ŒEXECæŒ‡ä»¤åŒ…èµ·æ¥ã€‚ ä¸°å¯Œçš„ç‰¹æ€§ â€“ Redisè¿˜æ”¯æŒ publish/subscribe, é€šçŸ¥, key è¿‡æœŸç­‰ç­‰ç‰¹æ€§ã€‚ æ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚ Redisä¸å…¶ä»–key-valueå­˜å‚¨æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ Redisæœ‰ç€æ›´ä¸ºå¤æ‚çš„æ•°æ®ç»“æ„å¹¶ä¸”æä¾›å¯¹ä»–ä»¬çš„åŸå­æ€§æ“ä½œï¼Œè¿™æ˜¯ä¸€ä¸ªä¸åŒäºå…¶ä»–æ•°æ®åº“çš„è¿›åŒ–è·¯å¾„ã€‚Redisçš„æ•°æ®ç±»å‹éƒ½æ˜¯åŸºäºåŸºæœ¬æ•°æ®ç»“æ„çš„åŒæ—¶å¯¹ç¨‹åºå‘˜é€æ˜ï¼Œæ— éœ€è¿›è¡Œé¢å¤–çš„æŠ½è±¡ã€‚Redisè¿è¡Œåœ¨å†…å­˜ä¸­ä½†æ˜¯å¯ä»¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œæ‰€ä»¥åœ¨å¯¹ä¸åŒæ•°æ®é›†è¿›è¡Œé«˜é€Ÿè¯»å†™æ—¶éœ€è¦æƒè¡¡å†…å­˜ï¼Œå› ä¸ºæ•°æ®é‡ä¸èƒ½å¤§äºç¡¬ä»¶å†…å­˜ã€‚åœ¨å†…å­˜æ•°æ®åº“æ–¹é¢çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œç›¸æ¯”åœ¨ç£ç›˜ä¸Šç›¸åŒçš„å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œåœ¨å†…å­˜ä¸­æ“ä½œèµ·æ¥éå¸¸ç®€å•ï¼Œè¿™æ ·Rediså¯ä»¥åšå¾ˆå¤šå†…éƒ¨å¤æ‚æ€§å¾ˆå¼ºçš„äº‹æƒ…ã€‚åŒæ—¶ï¼Œåœ¨ç£ç›˜æ ¼å¼æ–¹é¢ä»–ä»¬æ˜¯ç´§å‡‘çš„ä»¥è¿½åŠ çš„æ–¹å¼äº§ç”Ÿçš„ï¼Œå› ä¸ºä»–ä»¬å¹¶ä¸éœ€è¦è¿›è¡Œéšæœºè®¿é—®ã€‚ redisçš„åº”ç”¨åœºæ™¯ â€‹ 1ã€ä¼šè¯é«˜é€Ÿç¼“å­˜ï¼ˆæœ€å¸¸ç”¨ï¼‰ â€‹ 2ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¯”å¦‚æ”¯ä»˜ â€‹ 3ã€æ´»åŠ¨æ’è¡Œæ¦œæˆ–è®¡æ•° â€‹ 4ã€å‘å¸ƒã€è®¢é˜…æ¶ˆæ¯ï¼ˆæ¶ˆæ¯é€šçŸ¥ï¼‰ â€‹ 5ã€å•†å“åˆ—è¡¨ã€è¯„è®ºåˆ—è¡¨ã€è®¡æ—¶å™¨ã€è®¡æ•°å™¨ â€‹ 6ã€åœ°å›¾ä¿¡æ¯åˆ†æ â€‹ 7ã€å†…å­˜å­˜å‚¨ã€æŒä¹…åŒ–ï¼ˆrdbï¼Œaofï¼‰ 3V+3é«˜ å¤§æ•°æ®æ—¶ä»£3Vï¼ˆæè¿°é—®é¢˜ï¼‰ æµ·é‡Volume å¤šæ ·Variety å®æ—¶Velocity äº’è”ç½‘éœ€æ±‚3é«˜ï¼ˆå¯¹ç¨‹åºè¦æ±‚ï¼‰ é«˜å¹¶å‘ é«˜å¯æ‰© é«˜æ€§èƒ½ ç»å…¸åº”ç”¨ é˜¿é‡Œå·´å·´ æ•°æ®åº“å››å¤§åˆ†ç±» KVé”®å€¼å¯¹ æ–‡æ¡£å‹æ•°æ®åº“ åˆ—å­˜å‚¨æ•°æ®åº“ å›¾å…³ç³»æ•°æ®åº“ï¼ˆå›¾ç»“æ„ï¼‰ CAP Cï¼šConsistencyï¼ˆå¼ºä¸€è‡´æ€§ï¼‰ Aï¼šAvailabilityï¼ˆå¯ç”¨æ€§ï¼‰ Pï¼šPartition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ ä¸‰è¿›äºŒï¼ˆCå¿…å®ç°ï¼‰ CA å•ç‚¹é›†ç¾¤ï¼Œæ»¡è¶³ä¸€è‡´æ€§ CP AP BASE åŸºæœ¬å¯ç”¨ï¼ˆBasically Availableï¼‰ è½¯çŠ¶æ€ï¼ˆSoft stateï¼‰ æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventually consistentï¼‰ åˆ†å¸ƒå¼ä¸é›†ç¾¤ ACIDå…³ç³»å‹æ•°æ®åº“ Redis å®‰è£… windows ä¼ä¸šé‡Œé¢å‡ ä¹ä¸ç”¨windowså¼€å‘Redis https://github.com/tporadowski/redis/releases redis-server.exe redis.windows.conf å¦å¯ä¸€ä¸ª cmd çª—å£ï¼ŒåŸæ¥çš„ä¸è¦å…³é—­ï¼Œä¸ç„¶å°±æ— æ³•è®¿é—®æœåŠ¡ç«¯äº†ï¼ˆå¯ç›´æ¥è®¾ç½®ä¸ºæœåŠ¡è‡ªå¯åŠ¨å¦‚ä¸‹ï¼‰ è®¾ç½®redisç¯å¢ƒå˜é‡ä¹‹ååœ¨è§£å‹æ–‡ä»¶å¤¹ä¸­æ‰§è¡Œå‘½ä»¤ redis-server.exe --service-install redis.windows.conf --loglevel verbose ä¿®æ”¹æœåŠ¡ä¸ºè‡ªåŠ¨å¯åŠ¨ redis-cli.exe -h 127.0.0.1 -p 6379 set myKey abc get myKey Linux â€‹ ä¸‹è½½ == è§£å‹ï¼ˆoptï¼‰ == åŸºæœ¬ç¯å¢ƒå®‰è£…ã€yum install gcc-c++ã€‘== make == make install == redisé»˜è®¤å®‰è£…è·¯å¾„/usr/local/bin == æ‹·è´redisçš„confæ–‡ä»¶ä½¿ç”¨æ‹·è´é…ç½®æ–‡ä»¶å¯åŠ¨ == daemonizeæ”¹ä¸ºyesæ”¹ä¸ºåå°å¯åŠ¨ == å¯åŠ¨æœåŠ¡redis-server redisconfig/redis.conf == å®¢æˆ·ç«¯è¿æ¥ redis-cli -p 6379 == ping æµ‹è¯•è¿æ¥ === æŸ¥çœ‹redisè¿›ç¨‹æ˜¯å¦å¼€å¯ ps -ef|grep redis == shutdownå…³é—­æœåŠ¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187####æ–°å»ºæ–‡ä»¶å¤¹[root@iZpwlt9baenyc8Z ~]# mkdir /usr/local/redis[root@iZpwlt9baenyc8Z ~]# cd /usr/local/redis[root@iZpwlt9baenyc8Z redis]# ls####ä¸‹è½½æºç [root@iZpwlt9baenyc8Z redis]# wget http://download.redis.io/releases/redis-6.0.5.tar.gz--2022-02-10 14:00:45-- http://download.redis.io/releases/redis-6.0.5.tar.gzredis-6.0.5.tar.gz 100%[==================================================================================&gt;] 2.11M 42.0KB/s in 57s ã€‚ã€‚ã€‚####è§£å‹ç¼©[root@iZpwlt9baenyc8Z redis]# tar -zxvf redis-6.0.5.tar.gz####å®‰è£…[root@iZpwlt9baenyc8Z redis]# lsredis-6.0.5 redis-6.0.5.tar.gz[root@iZpwlt9baenyc8Z redis]# cd redis-6.0.5[root@iZpwlt9baenyc8Z redis-6.0.5]# ls00-RELEASENOTES CONTRIBUTING deps Makefile README.md runtest runtest-moduleapi sentinel.conf tests utilsBUGS COPYING INSTALL MANIFESTO redis.conf runtest-cluster runtest-sentinel src TLS.md[root@iZpwlt9baenyc8Z redis-6.0.5]# makecd src &amp;&amp; make allmake[1]: Entering directory '/usr/local/redis/redis-6.0.5/src' ã€‚ã€‚ã€‚Hint: It's a good idea to run 'make test' ;)make[1]: Leaving directory '/usr/local/redis/redis-6.0.5/src'[root@iZpwlt9baenyc8Z redis-6.0.5]# ls00-RELEASENOTES CONTRIBUTING deps Makefile README.md runtest runtest-moduleapi sentinel.conf tests utilsBUGS COPYING INSTALL MANIFESTO redis.conf runtest-cluster runtest-sentinel src TLS.md[root@iZpwlt9baenyc8Z redis-6.0.5]# cd src####è¿å‡ºå¯æ‰§è¡Œç¨‹åºï¼Œä¸æºç åˆ†ç¦»[root@iZpwlt9baenyc8Z src]# make install PREFIX=/opt/redis6 CC Makefile.depHint: It's a good idea to run 'make test' ;)####åˆ›å»ºredisé…ç½®æ–‡ä»¶ç›®å½•å¹¶å¤åˆ¶é…ç½®æ–‡ä»¶[root@iZpwlt9baenyc8Z src]# mkdir /etc/redis[root@iZpwlt9baenyc8Z src]# cd ..[root@iZpwlt9baenyc8Z redis-6.0.5]# cd ..[root@iZpwlt9baenyc8Z redis]# lsredis-6.0.5 redis-6.0.5.tar.gz[root@iZpwlt9baenyc8Z redis]# cd ..[root@iZpwlt9baenyc8Z local]# lsaegis bin etc games include lib lib64 libexec redis sbin share src[root@iZpwlt9baenyc8Z local]# cd etc[root@iZpwlt9baenyc8Z etc]# ls[root@iZpwlt9baenyc8Z etc]# cd /etc[root@iZpwlt9baenyc8Z etc]# cd redis[root@iZpwlt9baenyc8Z redis]# ls[root@iZpwlt9baenyc8Z redis]# cp /usr/local/redis/redis-6.0.5/redis.conf /etc/redis/6379.conf[root@iZpwlt9baenyc8Z redis]# cd ..[root@iZpwlt9baenyc8Z etc]# cd ..[root@iZpwlt9baenyc8Z /]# lsbin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var[root@iZpwlt9baenyc8Z ~]# cd /etc/redis/[root@iZpwlt9baenyc8Z redis]# ls6379.conf[root@iZpwlt9baenyc8Z redis]# cd /opt/redis6[root@iZpwlt9baenyc8Z redis6]# lsbin###åˆ›å»ºredisæœåŠ¡ï¼Œå¤åˆ¶redisç¤ºä¾‹æœåŠ¡å¹¶ä¿®æ”¹[root@iZpwlt9baenyc8Z bin]# cp /usr/local/redis/redis-6.0.5/utils/systemd-redis_server.service /lib/systemd/system/redis_6379.service[root@iZpwlt9baenyc8Z bin]# cd /lib/systemd/system/[root@iZpwlt9baenyc8Z system]# vim /lib/systemd/system/redis_6379.service########################### example systemd service unit file for redis-server## In order to use this as a template for providing a redis service in your# environment, _at the very least_ make sure to adapt the redis configuration# file you intend to use as needed (make sure to set &quot;supervised systemd&quot;), and# to set sane TimeoutStartSec and TimeoutStopSec property values in the unit's# &quot;[Service]&quot; section to fit your needs.## Some properties, such as User= and Group=, are highly desirable for virtually# all deployments of redis, but cannot be provided in a manner that fits all# expectable environments. Some of these properties have been commented out in# this example service unit file, but you are highly encouraged to set them to# fit your needs.## Please refer to systemd.unit(5), systemd.service(5), and systemd.exec(5) for# more information.[Unit]Description=Redis_6379After=network.target#Documentation=https://redis.io/documentation#Before=your_application.service another_example_application.service#AssertPathExists=/var/lib/redis[Service]Type=forkingPIDFile=/var/run/redis_6379.pidExecStart=/opt/redis6/bin/redis-server /etc/redis/6379.confExecReload=/bin/kill -s HUP $MAINPIDExecStop=/bin/kill -s QUIT $MAINPIDPrivateTmp=true## Alternatively, have redis-server load a configuration file:#ExecStart=/usr/local/bin/redis-server /path/to/your/redis.conf#LimitNOFILE=10032#NoNewPrivileges=yes#OOMScoreAdjust=-900#PrivateTmp=yes#TimeoutStartSec=infinity#TimeoutStopSec=infinity#UMask=0077#User=redis#Group=redis#WorkingDirectory=/var/lib/redis[Install]WantedBy=multi-user.target:wq!#######[root@iZpwlt9baenyc8Z system]# cd /###ä½¿ç”¨systemctl å¼€å¯å…³é—­æœåŠ¡#å¦‚æœæŠ¥é”™ï¼šJob for redis-server.service failed because a timeout was exceeded.[root@iZpwlt9baenyc8Z ~]# systemctl status redis_6379â— redis_6379.service - Redis_6379 â””â”€151178 /opt/redis6/bin/redis-server 127.0.0.1:6379Feb 10 14:28:06 iZpwlt9baenyc8Z redis-server[151178]: `-.__.-'ã€‚ã€‚ã€‚Feb 10 14:28:06 iZpwlt9baenyc8Z redis-server[151178]: 151178:M 10 Feb 2022 14:28:06.493 * Ready to accept connectionslines 1-19/19 (END)[root@iZpwlt9baenyc8Z /]# cd /opt/redis6[root@iZpwlt9baenyc8Z redis6]# lsbin[root@iZpwlt9baenyc8Z redis6]# cd bin[root@iZpwlt9baenyc8Z bin]# lsredis-benchmark redis-check-aof redis-check-rdb redis-cli redis-sentinel redis-server###cd /opt/redis6/bin è·³è½¬åˆ°å‘½ä»¤ç›®å½•åä½¿ç”¨redis-serverå¼€å¯æœåŠ¡##å…¨å±€ä½¿ç”¨rediså‘½ä»¤è§£å†³æ–¹æ³•#ä¿®æ”¹profileæ–‡ä»¶ï¼š #vi /etc/profile #åœ¨æœ€åè¡Œæ·»åŠ : #export PATH=$PATH:/opt/redis6/bin#æ³¨æ„ï¼š/opt/software/redis/src è¡¨ç¤ºçš„æ˜¯redis-cli å‘½ä»¤å­˜åœ¨çš„ç›®å½•è·¯å¾„#é‡æ–°åŠ è½½/etc/profile #source /etc/profile [root@iZpwlt9baenyc8Z bin]# redis-server151212:C 10 Feb 2022 14:38:14.346 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo151212:C 10 Feb 2022 14:38:14.346 # Redis version=6.0.5, bits=64, commit=00000000, modified=0, pid=151212, just started151212:C 10 Feb 2022 14:38:14.346 # Warning: no config file specified, using the default config. In order to specify a config file use ./redis-server /path/to/redis.conf _._ _.-``__ ''-._ _.-`` `. `_. ''-._ Redis 6.0.5 (00000000/0) 64 bit .-`` .-```. ```\\/ _.,_ ''-._ ( ' , .-` | `, ) Running in standalone mode |`-._`-...-` __...-.``-._|'` _.-'| Port: 6379 | `-._ `._ / _.-' | PID: 151212 `-._ `-._ `-./ _.-' _.-' |`-._`-._ `-.__.-' _.-'_.-'| | `-._`-._ _.-'_.-' | http://redis.io `-._ `-._`-.__.-'_.-' _.-' |`-._`-._ `-.__.-' _.-'_.-'| | `-._`-._ _.-'_.-' | `-._ `-._`-.__.-'_.-' _.-' `-._ `-.__.-' _.-' `-._ _.-' `-.__.-' 151212:M 10 Feb 2022 14:38:14.347 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.151212:M 10 Feb 2022 14:38:14.347 # Server initialized151212:M 10 Feb 2022 14:38:14.347 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.151212:M 10 Feb 2022 14:38:14.347 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.151212:M 10 Feb 2022 14:38:14.348 * Ready to accept connections[root@iZpwlt9baenyc8Z ~]# cd /opt/redis6/bin#ä½¿ç”¨ ./redis-cli æ‰“å¼€ç»ˆç«¯[root@iZpwlt9baenyc8Z bin]# ./redis-cli ###æ£€æµ‹æœåŠ¡æ˜¯å¦å¯åŠ¨127.0.0.1:6379&gt; pingPONG redis-benchmarkæ€§èƒ½æµ‹è¯• å¯é€‰å‚æ•°ï¼š æµ‹è¯•ï¼š100ä¸ªå¹¶å‘è¿æ¥ 100000è¯·æ±‚ ./redis-benchmark -h localhost -p 6379 -c 100 -n 100000 åŸºç¡€çŸ¥è¯† redisé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ç¬¬0ä¸ª å¯ä»¥ä½¿ç”¨ select è¿›è¡Œåˆ‡æ¢æ•°æ®åº“ï¼select 3 DBSIZE # æŸ¥çœ‹DBå¤§å°ï¼ keys * # æŸ¥çœ‹æ•°æ®åº“æ‰€æœ‰çš„key æ¸…é™¤å½“å‰æ•°æ®åº“ flushdb æ¸…é™¤å…¨éƒ¨æ•°æ®åº“çš„å†…å®¹ FLUSHALL Redis ä¸ºä»€ä¹ˆå•çº¿ç¨‹è¿˜è¿™ä¹ˆå¿«ï¼Ÿ 1ã€è¯¯åŒº1ï¼šé«˜æ€§èƒ½çš„æœåŠ¡å™¨ä¸€å®šæ˜¯å¤šçº¿ç¨‹çš„ï¼Ÿ 2ã€è¯¯åŒº2ï¼šå¤šçº¿ç¨‹ï¼ˆCPUä¸Šä¸‹æ–‡ä¼šåˆ‡æ¢ï¼ï¼‰ä¸€å®šæ¯”å•çº¿ç¨‹æ•ˆç‡é«˜ï¼ å…ˆå»CPU&gt;å†…å­˜&gt;ç¡¬ç›˜çš„é€Ÿåº¦è¦æœ‰æ‰€äº†è§£ï¼ æ ¸å¿ƒï¼šredis æ˜¯å°†æ‰€æœ‰çš„æ•°æ®å…¨éƒ¨æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥è¯´ä½¿ç”¨å•çº¿ç¨‹å»æ“ä½œæ•ˆç‡å°±æ˜¯æœ€é«˜çš„ï¼Œå¤šçº¿ç¨‹ ï¼ˆCPUä¸Šä¸‹æ–‡ä¼šåˆ‡æ¢ï¼šè€—æ—¶çš„æ“ä½œï¼ï¼ï¼ï¼‰ï¼Œå¯¹äºå†…å­˜ç³»ç»Ÿæ¥è¯´ï¼Œå¦‚æœæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢æ•ˆç‡å°±æ˜¯æœ€é«˜ çš„ï¼å¤šæ¬¡è¯»å†™éƒ½æ˜¯åœ¨ä¸€ä¸ªCPUä¸Šçš„ï¼Œåœ¨å†…å­˜æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå°±æ˜¯æœ€ä½³çš„æ–¹æ¡ˆï¼ IOå¤šè·¯å¤ç”¨ï¼ˆEpollï¼‰åŸç† ç®€å•æè¿°ï¼š â€‹ æ‰§è¡Œ epoll_create å‡½æ•°ä¼šåœ¨å†…æ ¸çš„é«˜é€Ÿç¼“å­˜åŒºä¸­å»ºç«‹ä¸€é¢—çº¢é»‘æ ‘ä»¥åŠå°±ç»ªé“¾è¡¨(è¯¥é“¾è¡¨å­˜å‚¨å·²ç»å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦)ã€‚æ¥ç€åº”ç”¨ç¨‹åºæ‰§è¡Œ epoll_ctl å‡½æ•°æ·»åŠ æ–‡ä»¶æè¿°ç¬¦ä¼šåœ¨çº¢é»‘æ ‘ä¸Šå¢åŠ ç›¸åº”çš„ç»“ç‚¹ã€‚ â€‹ æ‰§è¡Œ epoll_ctl çš„ add æ“ä½œæ—¶ï¼Œä¸ä»…å°†æ–‡ä»¶æè¿°ç¬¦æ”¾åˆ°çº¢é»‘æ ‘ä¸Šï¼Œè€Œä¸”ä¹Ÿæ³¨å†Œäº† callBack å‡½æ•°ã€‚å†…æ ¸åœ¨æ£€æµ‹åˆ°æŸæ–‡ä»¶æè¿°ç¬¦å¯è¯»/å¯å†™æ—¶ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°å°†æ–‡ä»¶æè¿°ç¬¦æ”¾åœ¨å°±ç»ªé“¾è¡¨ä¸­ã€‚ â€‹ æ‰§è¡Œ epoll_wait å‡½æ•°åªç”¨è§‚å¯Ÿå°±ç»ªé“¾è¡¨ä¸­æœ‰æ— æ•°æ®å³å¯ï¼Œæœ€åå°†é“¾è¡¨çš„æ•°æ®åŠå°±ç»ªçš„æ•°é‡è¿”å›ç»™åº”ç”¨ç¨‹åºï¼Œåº”ç”¨ç¨‹åºåªéœ€è¦éå†ä¾æ¬¡å¤„ç†å³å¯ã€‚è¿™é‡Œè¿”å›çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯é€šè¿‡å†…å­˜æ˜ å°„å‡½æ•° mmap è®©å†…æ ¸å’Œç”¨æˆ·ç©ºé—´å…±äº«åŒä¸€å—å†…å­˜å®ç°ä¼ é€’çš„ï¼Œå‡å°‘äº†ä¸å¿…è¦çš„æ‹·è´ã€‚ â€‹ mmapï¼šå°†ç”¨æˆ·ç©ºé—´çš„ä¸€æ®µå†…å­˜åŒºåŸŸæ˜ å°„åˆ°å†…æ ¸ç©ºé—´ï¼Œæ˜ å°„æˆåŠŸåï¼Œç”¨æˆ·å¯¹è¿™æ®µå†…å­˜åŒºåŸŸçš„ä¿®æ”¹å¯ä»¥ç›´æ¥åæ˜ åˆ°å†…æ ¸ç©ºé—´ã€‚åŒæ ·ï¼Œå†…æ ¸ç©ºé—´å¯¹è¿™æ®µåŒºåŸŸçš„ä¿®æ”¹ä¹Ÿç›´æ¥åæ˜ ç”¨æˆ·ç©ºé—´ã€‚é‚£ä¹ˆå¯¹äºå†…æ ¸ç©ºé—´ã€ç”¨æˆ·ç©ºé—´ä¸¤è€…ä¹‹é—´éœ€è¦å¤§é‡æ•°æ®ä¼ è¾“ç­‰æ“ä½œçš„è¯æ•ˆç‡æ˜¯éå¸¸é«˜çš„ã€‚ å…·ä½“åŸç†å¯ä»¥æŸ¥çœ‹ä¸‹é¢è¿™ç¯‡åšå®¢ï¼š https://blog.csdn.net/armlinuxww/article/details/92803381 Redis é…ç½® Redis çš„é…ç½®æ–‡ä»¶ä½äº Redis å®‰è£…ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸º redis.conf(Windows åä¸º redis.windows.conf)ã€‚ ä½ å¯ä»¥é€šè¿‡ CONFIG å‘½ä»¤æŸ¥çœ‹æˆ–è®¾ç½®é…ç½®é¡¹ã€‚ CONFIG GET CONFIG_SETTING_NAME CONFIG GET loglevel CONFIG GET * ç¼–è¾‘é…ç½® å¯ä»¥é€šè¿‡ä¿®æ”¹ redis.conf æ–‡ä»¶æˆ–ä½¿ç”¨ CONFIG set å‘½ä»¤æ¥ä¿®æ”¹é…ç½®ã€‚ CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE CONFIG SET loglevel &quot;notice&quot; å‚æ•°è¯´æ˜ redis.conf é…ç½®é¡¹è¯´æ˜å¦‚ä¸‹ï¼š https://www.runoob.com/redis/redis-conf.html Redis æ•°æ®ç±»å‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950è®¾ç½®å¯†ç ï¼šconfig set requirepass 123456æˆæƒå¯†ç ï¼šauth 123456127.0.0.1:6379&gt; keys * # æŸ¥çœ‹æ‰€æœ‰çš„key(empty list or set)127.0.0.1:6379&gt; set name xiaobai # set keyOK127.0.0.1:6379&gt; keys *1) &quot;name&quot;127.0.0.1:6379&gt; set age 1OK127.0.0.1:6379&gt; keys *1) &quot;age&quot;2) &quot;name&quot;127.0.0.1:6379&gt; EXISTS name # åˆ¤æ–­å½“å‰çš„keyæ˜¯å¦å­˜åœ¨(integer) 1127.0.0.1:6379&gt; EXISTS name1(integer) 0127.0.0.1:6379&gt; move name 1 # ç§»é™¤å½“å‰çš„key(integer) 1127.0.0.1:6379&gt; keys *1) &quot;age&quot;127.0.0.1:6379&gt; set name qinjiangOK127.0.0.1:6379&gt; keys *1) &quot;age&quot;2) &quot;name&quot;127.0.0.1:6379&gt; clear127.0.0.1:6379&gt; keys *1) &quot;age&quot;2) &quot;name&quot;127.0.0.1:6379&gt; get name&quot;qinjiang&quot;127.0.0.1:6379&gt; EXPIRE name 10 # è®¾ç½®keyçš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½æ˜¯ç§’(integer) 1127.0.0.1:6379&gt; ttl name # æŸ¥çœ‹å½“å‰keyçš„å‰©ä½™æ—¶é—´(integer) 4127.0.0.1:6379&gt; ttl name(integer) 3127.0.0.1:6379&gt; ttl name(integer) 2127.0.0.1:6379&gt; ttl name(integer) 1127.0.0.1:6379&gt; ttl name(integer) -2127.0.0.1:6379&gt; get name(nil)127.0.0.1:6379&gt; type name # æŸ¥çœ‹å½“å‰keyçš„ä¸€ä¸ªç±»å‹ï¼string127.0.0.1:6379&gt; type agestring Stringï¼ˆå­—ç¬¦ä¸²ï¼‰ string æ˜¯ redis æœ€åŸºæœ¬çš„ç±»å‹ï¼Œä½ å¯ä»¥ç†è§£æˆä¸ Memcached ä¸€æ¨¡ä¸€æ ·çš„ç±»å‹ï¼Œä¸€ä¸ª key å¯¹åº”ä¸€ä¸ª valueã€‚ string ç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ã€‚æ„æ€æ˜¯ redis çš„ string å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ã€‚æ¯”å¦‚jpgå›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ã€‚ string ç±»å‹æ˜¯ Redis æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œstring ç±»å‹çš„å€¼æœ€å¤§èƒ½å­˜å‚¨ 512MBã€‚ SET runoob &quot;èœé¸Ÿæ•™ç¨‹&quot; GET runoob 123456keys æ­£åˆ™ï¼šè·å–ç¬¦åˆæ­£åˆ™çš„é”®çš„å€¼existï¼šæ˜¯å¦å­˜åœ¨typeï¼šå€¼ç±»å‹delï¼šåˆ é™¤expireï¼šè®¾ç½®è¿‡æœŸæ—¶é—´ttlï¼šæŸ¥çœ‹æœ‰æ•ˆæ—¶é—´ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131##########################################################################127.0.0.1:6379&gt; set key1 v1 # è®¾ç½®å€¼OK127.0.0.1:6379&gt; get key1 # è·å¾—å€¼&quot;v1&quot;127.0.0.1:6379&gt; keys * # è·å¾—æ‰€æœ‰çš„key1) &quot;key1&quot;127.0.0.1:6379&gt; EXISTS key1 # åˆ¤æ–­æŸä¸€ä¸ªkeyæ˜¯å¦å­˜åœ¨(integer) 1127.0.0.1:6379&gt; APPEND key1 &quot;hello&quot; # è¿½åŠ å­—ç¬¦ä¸²ï¼Œå¦‚æœå½“å‰keyä¸å­˜åœ¨ï¼Œå°±ç›¸å½“äºset key(integer) 7127.0.0.1:6379&gt; get key1&quot;v1hello&quot;127.0.0.1:6379&gt; STRLEN key1 # è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼(integer) 7127.0.0.1:6379&gt; APPEND key1 &quot;,xiaobai&quot;(integer) 17127.0.0.1:6379&gt; STRLEN key1(integer) 17127.0.0.1:6379&gt; get key1&quot;v1hello,xiaobai&quot;########################################################################### i++# æ­¥é•¿ i+=127.0.0.1:6379&gt; set views 0 # åˆå§‹æµè§ˆé‡ä¸º0OK127.0.0.1:6379&gt; get views&quot;0&quot;127.0.0.1:6379&gt; incr views # è‡ªå¢1 æµè§ˆé‡å˜ä¸º1(integer) 1127.0.0.1:6379&gt; incr views(integer) 2127.0.0.1:6379&gt; get views&quot;2&quot;127.0.0.1:6379&gt; decr views # è‡ªå‡1 æµè§ˆé‡-1(integer) 1127.0.0.1:6379&gt; decr views(integer) 0127.0.0.1:6379&gt; decr views(integer) -1127.0.0.1:6379&gt; get views&quot;-1&quot;127.0.0.1:6379&gt; INCRBY views 10 # å¯ä»¥è®¾ç½®æ­¥é•¿ï¼ŒæŒ‡å®šå¢é‡ï¼(integer) 9127.0.0.1:6379&gt; INCRBY views 10(integer) 19127.0.0.1:6379&gt; DECRBY views 5(integer) 14########################################################################### å­—ç¬¦ä¸²èŒƒå›´ range127.0.0.1:6379&gt; set key1 &quot;hello,xiaobai&quot; # è®¾ç½® key1 çš„å€¼OK127.0.0.1:6379&gt; get key1&quot;hello,xiaobai&quot;127.0.0.1:6379&gt; GETRANGE key1 0 3 # æˆªå–å­—ç¬¦ä¸² [0,3]&quot;hell&quot;127.0.0.1:6379&gt; GETRANGE key1 0 -1 # è·å–å…¨éƒ¨çš„å­—ç¬¦ä¸² å’Œ get keyæ˜¯ä¸€æ ·çš„&quot;hello,xiaobai&quot;# æ›¿æ¢ï¼127.0.0.1:6379&gt; set key2 abcdefgOK127.0.0.1:6379&gt; get key2&quot;abcdefg&quot;127.0.0.1:6379&gt; SETRANGE key2 1 xx # æ›¿æ¢æŒ‡å®šä½ç½®å¼€å§‹çš„å­—ç¬¦ä¸²ï¼(integer) 7127.0.0.1:6379&gt; get key2&quot;axxdefg&quot;########################################################################### setex (set with expire) # è®¾ç½®è¿‡æœŸæ—¶é—´# setnx (set if not exist) # ä¸å­˜åœ¨åœ¨è®¾ç½® ï¼ˆåœ¨åˆ†å¸ƒå¼é”ä¸­ä¼šå¸¸å¸¸ä½¿ç”¨ï¼ï¼‰127.0.0.1:6379&gt; setex key3 30 &quot;hello&quot; # è®¾ç½®key3 çš„å€¼ä¸º hello,30ç§’åè¿‡æœŸOK127.0.0.1:6379&gt; ttl key3(integer) 26127.0.0.1:6379&gt; get key3&quot;hello&quot;127.0.0.1:6379&gt; setnx mykey &quot;redis&quot; # å¦‚æœmykey ä¸å­˜åœ¨ï¼Œåˆ›å»ºmykey(integer) 1127.0.0.1:6379&gt; keys *1) &quot;key2&quot;2) &quot;mykey&quot;3) &quot;key1&quot;127.0.0.1:6379&gt; ttl key3(integer) -2127.0.0.1:6379&gt; setnx mykey &quot;MongoDB&quot; # å¦‚æœmykeyå­˜åœ¨ï¼Œåˆ›å»ºå¤±è´¥ï¼(integer) 0127.0.0.1:6379&gt; get mykey&quot;redis&quot;##########################################################################msetmget127.0.0.1:6379&gt; mset k1 v1 k2 v2 k3 v3 # åŒæ—¶è®¾ç½®å¤šä¸ªå€¼OK127.0.0.1:6379&gt; keys *1) &quot;k1&quot;2) &quot;k2&quot;3) &quot;k3&quot;127.0.0.1:6379&gt; mget k1 k2 k3 # åŒæ—¶è·å–å¤šä¸ªå€¼1) &quot;v1&quot;2) &quot;v2&quot;3) &quot;v3&quot;127.0.0.1:6379&gt; msetnx k1 v1 k4 v4 # msetnx æ˜¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼Œè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥ï¼(integer) 0127.0.0.1:6379&gt; get k4(nil)# å¯¹è±¡set user:1 {name:zhangsan,age:3} # è®¾ç½®ä¸€ä¸ªuser:1 å¯¹è±¡ å€¼ä¸º jsonå­—ç¬¦æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡ï¼# è¿™é‡Œçš„keyæ˜¯ä¸€ä¸ªå·§å¦™çš„è®¾è®¡ï¼š user:{id}:{filed} , å¦‚æ­¤è®¾è®¡åœ¨Redisä¸­æ˜¯å®Œå…¨OKäº†ï¼127.0.0.1:6379&gt; mset user:1:name zhangsan user:1:age 2OK127.0.0.1:6379&gt; mget user:1:name user:1:age1) &quot;zhangsan&quot;2) &quot;2&quot;##########################################################################getset # å…ˆgetç„¶ååœ¨set127.0.0.1:6379&gt; getset db redis # å¦‚æœä¸å­˜åœ¨å€¼ï¼Œåˆ™è¿”å› nil(nil)127.0.0.1:6379&gt; get db&quot;redis127.0.0.1:6379&gt; getset db mongodb # å¦‚æœå­˜åœ¨å€¼ï¼Œè·å–åŸæ¥çš„å€¼ï¼Œå¹¶è®¾ç½®æ–°çš„å€¼&quot;redis&quot;127.0.0.1:6379&gt; get db&quot;mongodb&quot; æ•°æ®ç»“æ„æ˜¯ç›¸åŒçš„ï¼ Stringç±»ä¼¼çš„ä½¿ç”¨åœºæ™¯ï¼švalueé™¤äº†æ˜¯æˆ‘ä»¬çš„å­—ç¬¦ä¸²è¿˜å¯ä»¥æ˜¯æˆ‘ä»¬çš„æ•°å­—ï¼ è®¡æ•°å™¨ ç»Ÿè®¡å¤šå•ä½çš„æ•°é‡ ç²‰ä¸æ•° å¯¹è±¡ç¼“å­˜å­˜å‚¨ï¼ Hashï¼ˆå“ˆå¸Œï¼‰ Redis hash æ˜¯ä¸€ä¸ªé”®å€¼(key=&gt;value)å¯¹é›†åˆã€‚ Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚ - DEL runoob ç”¨äºåˆ é™¤å‰é¢æµ‹è¯•ç”¨è¿‡çš„ keyï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼š(error) WRONGTYPE Operation against a key holding the wrong kind of value - HMSET è®¾ç½®äº†ä¸¤ä¸ª field=&gt;value å¯¹, HGET è·å–å¯¹åº” field å¯¹åº”çš„ valueã€‚ æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 232 -1 é”®å€¼å¯¹ï¼ˆ40å¤šäº¿ï¼‰ã€‚ HMSET runoob field1 &quot;Hello&quot; field2 &quot;World&quot; HGET runoob field1 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748Mapé›†åˆï¼Œkey-map! æ—¶å€™è¿™ä¸ªå€¼æ˜¯ä¸€ä¸ªmapé›†åˆï¼ æœ¬è´¨å’ŒStringç±»å‹æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œè¿˜æ˜¯ä¸€ä¸ªç®€å•çš„key-vlaueï¼set myhash field xiaobai5) &quot;d&quot;##########################################################################127.0.0.1:6379&gt; hset myhash field1 xiaobai # setä¸€ä¸ªå…·ä½“ key-vlaue(integer) 1127.0.0.1:6379&gt; hget myhash field1 # è·å–ä¸€ä¸ªå­—æ®µå€¼&quot;xiaobai&quot;127.0.0.1:6379&gt; hmset myhash field1 hello field2 world # setå¤šä¸ª key-vlaueOK127.0.0.1:6379&gt; hmget myhash field1 field2 # è·å–å¤šä¸ªå­—æ®µå€¼1) &quot;hello&quot;2) &quot;world&quot;127.0.0.1:6379&gt; hgetall myhash # è·å–å…¨éƒ¨çš„æ•°æ®ï¼Œ1) &quot;field1&quot;2) &quot;hello&quot;3) &quot;field2&quot;4) &quot;world&quot;127.0.0.1:6379&gt; hdel myhash field1 # åˆ é™¤hashæŒ‡å®škeyå­—æ®µï¼å¯¹åº”çš„valueå€¼ä¹Ÿå°±æ¶ˆå¤±äº†ï¼(integer) 1127.0.0.1:6379&gt; hgetall myhash1) &quot;field2&quot;2) &quot;world&quot;##########################################################################hlen127.0.0.1:6379&gt; hmset myhash field1 hello field2 worldOK127.0.0.1:6379&gt; HGETALL myhash1) &quot;field2&quot;2) &quot;world&quot;3) &quot;field1&quot;4) &quot;hello&quot;127.0.0.1:6379&gt; hlen myhash # è·å–hashè¡¨çš„å­—æ®µæ•°é‡ï¼(integer) 2##########################################################################127.0.0.1:6379&gt; HEXISTS myhash field1 # åˆ¤æ–­hashä¸­æŒ‡å®šå­—æ®µæ˜¯å¦å­˜åœ¨ï¼(integer) 1127.0.0.1:6379&gt; HEXISTS myhash field3(integer) 0########################################################################### åªè·å¾—æ‰€æœ‰field# åªè·å¾—æ‰€æœ‰value127.0.0.1:6379&gt; hkeys myhash # åªè·å¾—æ‰€æœ‰field1) &quot;field2&quot;2) &quot;field1&quot;hashå˜æ›´çš„æ•°æ® user name age,å°¤å…¶æ˜¯æ˜¯ç”¨æˆ·ä¿¡æ¯ä¹‹ç±»çš„ï¼Œç»å¸¸å˜åŠ¨çš„ä¿¡æ¯ï¼ hash æ›´é€‚åˆäºå¯¹è±¡çš„å­˜å‚¨ï¼ŒStringæ›´åŠ é€‚åˆå­—ç¬¦ä¸²å­˜å‚¨ï¼ Listï¼ˆåˆ—è¡¨ï¼‰ Redis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰ã€‚ åˆ—è¡¨æœ€å¤šå¯å­˜å‚¨232 -1å…ƒç´  (4294967295, æ¯ä¸ªåˆ—è¡¨å¯å­˜å‚¨40å¤šäº¿)ã€‚ lpush runoob redis lpush runoob mongodb lrange runoob 0 10 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œåˆ—è¡¨127.0.0.1:6379&gt; msetnx k1 v1 k4 v4 # msetnx æ˜¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼Œè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥ï¼(integer) 0127.0.0.1:6379&gt; get k4(nil)# å¯¹è±¡set user:1 {name:zhangsan,age:3} # è®¾ç½®ä¸€ä¸ªuser:1 å¯¹è±¡ å€¼ä¸º jsonå­—ç¬¦æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡ï¼# è¿™é‡Œçš„keyæ˜¯ä¸€ä¸ªå·§å¦™çš„è®¾è®¡ï¼š user:{id}:{filed} , å¦‚æ­¤è®¾è®¡åœ¨Redisä¸­æ˜¯å®Œå…¨OKäº†ï¼127.0.0.1:6379&gt; mset user:1:name zhangsan user:1:age 2OK127.0.0.1:6379&gt; mget user:1:name user:1:age1) &quot;zhangsan&quot;2) &quot;2&quot;##########################################################################getset # å…ˆgetç„¶ååœ¨set127.0.0.1:6379&gt; getset db redis # å¦‚æœä¸å­˜åœ¨å€¼ï¼Œåˆ™è¿”å› nil(nil)127.0.0.1:6379&gt; get db&quot;redis127.0.0.1:6379&gt; getset db mongodb # å¦‚æœå­˜åœ¨å€¼ï¼Œè·å–åŸæ¥çš„å€¼ï¼Œå¹¶è®¾ç½®æ–°çš„å€¼&quot;redis&quot;127.0.0.1:6379&gt; get db&quot;mongodb&quot;åœ¨redisé‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠlistç©æˆ ï¼Œæ ˆã€é˜Ÿåˆ—ã€é˜»å¡é˜Ÿåˆ—ï¼æ‰€æœ‰çš„listå‘½ä»¤éƒ½æ˜¯ç”¨lå¼€å¤´çš„ï¼ŒRedisä¸åŒºåˆ†å¤§å°å‘½ä»¤##########################################################################127.0.0.1:6379&gt; LPUSH list one # å°†ä¸€ä¸ªå€¼æˆ–è€…å¤šä¸ªå€¼ï¼Œæ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨ ï¼ˆå·¦ï¼‰(integer) 1127.0.0.1:6379&gt; LPUSH list two(integer) 2127.0.0.1:6379&gt; LPUSH list three(integer) 3127.0.0.1:6379&gt; LRANGE list 0 -1 # è·å–listä¸­å€¼ï¼1) &quot;three&quot;2) &quot;two&quot;3) &quot;one&quot;127.0.0.1:6379&gt; LRANGE list 0 1 # é€šè¿‡åŒºé—´è·å–å…·ä½“çš„å€¼ï¼1) &quot;three&quot;2) &quot;two&quot;127.0.0.1:6379&gt; Rpush list righr # å°†ä¸€ä¸ªå€¼æˆ–è€…å¤šä¸ªå€¼ï¼Œæ’å…¥åˆ°åˆ—è¡¨ä½éƒ¨ ï¼ˆå³ï¼‰(integer) 4127.0.0.1:6379&gt; LRANGE list 0 -11) &quot;three&quot;2) &quot;two&quot;3) &quot;one&quot;4) &quot;righr&quot;##########################################################################LPOPRPOP127.0.0.1:6379&gt; LRANGE list 0 -11) &quot;three&quot;2) &quot;two&quot;3) &quot;one&quot;4) &quot;righr&quot;127.0.0.1:6379&gt; Lpop list # ç§»é™¤listçš„ç¬¬ä¸€ä¸ªå…ƒç´ &quot;three&quot;127.0.0.1:6379&gt; Rpop list # ç§»é™¤listçš„æœ€åä¸€ä¸ªå…ƒç´ &quot;righr&quot;127.0.0.1:6379&gt; LRANGE list 0 -11) &quot;two&quot;2) &quot;one&quot;##########################################################################Lindex127.0.0.1:6379&gt; LRANGE list 0 -11) &quot;two&quot;2) &quot;one&quot;127.0.0.1:6379&gt; lindex list 1 # é€šè¿‡ä¸‹æ ‡è·å¾— list ä¸­çš„æŸä¸€ä¸ªå€¼ï¼&quot;one&quot;127.0.0.1:6379&gt; lindex list 0&quot;two&quot;##########################################################################Llen127.0.0.1:6379&gt; Lpush list one(integer) 1127.0.0.1:6379&gt; Lpush list two(integer) 2127.0.0.1:6379&gt; Lpush list three(integer) 3127.0.0.1:6379&gt; Llen list # è¿”å›åˆ—è¡¨çš„é•¿åº¦(integer) 3##########################################################################ç§»é™¤æŒ‡å®šçš„å€¼ï¼å–å…³ uidLrem127.0.0.1:6379&gt; LRANGE list 0 -11) &quot;three&quot;2) &quot;three&quot;3) &quot;two&quot;4) &quot;one&quot;127.0.0.1:6379&gt; lrem list 1 one # ç§»é™¤listé›†åˆä¸­æŒ‡å®šä¸ªæ•°çš„valueï¼Œç²¾ç¡®åŒ¹é…(integer) 1127.0.0.1:6379&gt; LRANGE list 0 -11) &quot;three&quot;2) &quot;three&quot;3) &quot;two&quot;127.0.0.1:6379&gt; lrem list 1 three(integer) 1127.0.0.1:6379&gt; LRANGE list 0 -11) &quot;three&quot;2) &quot;two&quot;127.0.0.1:6379&gt; Lpush list three(integer) 3127.0.0.1:6379&gt; lrem list 2 three(integer) 2127.0.0.1:6379&gt; LRANGE list 0 -11) &quot;two&quot;##########################################################################trim ä¿®å‰ªã€‚ï¼› list æˆªæ–­!127.0.0.1:6379&gt; keys *(empty list or set)127.0.0.1:6379&gt; Rpush mylist &quot;hello&quot;(integer) 1127.0.0.1:6379&gt; Rpush mylist &quot;hello1&quot;(integer) 2127.0.0.1:6379&gt; Rpush mylist &quot;hello2&quot;(integer) 3127.0.0.1:6379&gt; Rpush mylist &quot;hello3&quot;(integer) 4127.0.0.1:6379&gt; ltrim mylist 1 2 # é€šè¿‡ä¸‹æ ‡æˆªå–æŒ‡å®šçš„é•¿åº¦ï¼Œè¿™ä¸ªlistå·²ç»è¢«æ”¹å˜äº†ï¼Œæˆªæ–­äº†åªå‰©ä¸‹æˆªå–çš„å…ƒç´ ï¼OK127.0.0.1:6379&gt; LRANGE mylist 0 -11) &quot;hello1&quot;2) &quot;hello2&quot;##########################################################################rpoplpush # ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå°†ä»–ç§»åŠ¨åˆ°æ–°çš„åˆ—è¡¨ä¸­ï¼127.0.0.1:6379&gt; rpush mylist &quot;hello&quot;(integer) 1127.0.0.1:6379&gt; rpush mylist &quot;hello1&quot;(integer) 2127.0.0.1:6379&gt; rpush mylist &quot;hello2&quot;(integer) 3127.0.0.1:6379&gt; rpoplpush mylist myotherlist # ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå°†ä»–ç§»åŠ¨åˆ°æ–°çš„åˆ—è¡¨ä¸­ï¼&quot;hello2&quot;127.0.0.1:6379&gt; lrange mylist 0 -1 # æŸ¥çœ‹åŸæ¥çš„åˆ—è¡¨1) &quot;hello&quot;2) &quot;hello1&quot;127.0.0.1:6379&gt; lrange myotherlist 0 -1 # æŸ¥çœ‹ç›®æ ‡åˆ—è¡¨ä¸­ï¼Œç¡®å®å­˜åœ¨æ”¹å€¼ï¼1) &quot;hello2&quot;###########################################################################lset å°†åˆ—è¡¨ä¸­æŒ‡å®šä¸‹æ ‡çš„å€¼æ›¿æ¢ä¸ºå¦å¤–ä¸€ä¸ªå€¼ï¼Œæ›´æ–°æ“ä½œ127.0.0.1:6379&gt; EXISTS list # åˆ¤æ–­è¿™ä¸ªåˆ—è¡¨æ˜¯å¦å­˜åœ¨(integer) 0127.0.0.1:6379&gt; lset list 0 item # å¦‚æœä¸å­˜åœ¨åˆ—è¡¨æˆ‘ä»¬å»æ›´æ–°å°±ä¼šæŠ¥é”™(error) ERR no such key127.0.0.1:6379&gt; lpush list value1(integer) 1127.0.0.1:6379&gt; LRANGE list 0 01) &quot;value1&quot;127.0.0.1:6379&gt; lset list 0 item # å¦‚æœå­˜åœ¨ï¼Œæ›´æ–°å½“å‰ä¸‹æ ‡çš„å€¼OK127.0.0.1:6379&gt; LRANGE list 0 01) &quot;item&quot;127.0.0.1:6379&gt; lset list 1 other # å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¼šæŠ¥é”™ï¼(error) ERR index out of range##########################################################################linsert # å°†æŸä¸ªå…·ä½“çš„valueæ’å…¥åˆ°åˆ—æŠŠä½ ä¸­æŸä¸ªå…ƒç´ çš„å‰é¢æˆ–è€…åé¢ï¼127.0.0.1:6379&gt; Rpush mylist &quot;hello&quot;(integer) 1127.0.0.1:6379&gt; Rpush mylist &quot;world&quot;(integer) 2127.0.0.1:6379&gt; LINSERT mylist before &quot;world&quot; &quot;other&quot;(integer) 3127.0.0.1:6379&gt; LRANGE mylist 0 -11) &quot;hello&quot;2) &quot;other&quot;3) &quot;world&quot;127.0.0.1:6379&gt; LINSERT mylist after world new(integer) 4127.0.0.1:6379&gt; LRANGE mylist 0 -11) &quot;hello&quot;2) &quot;other&quot;3) &quot;world&quot;4) &quot;new&quot;#å°ç»“#ä»–å®é™…ä¸Šæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œbefore Node after ï¼Œ leftï¼Œright éƒ½å¯ä»¥æ’å…¥å€¼#å¦‚æœkey ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°çš„é“¾è¡¨#å¦‚æœkeyå­˜åœ¨ï¼Œæ–°å¢å†…å®¹ Setï¼ˆé›†åˆï¼‰ Redis çš„ Set æ˜¯ string ç±»å‹çš„æ— åºé›†åˆã€‚ é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚ sadd å‘½ä»¤ æ·»åŠ ä¸€ä¸ª string å…ƒç´ åˆ° key å¯¹åº”çš„ set é›†åˆä¸­ï¼ŒæˆåŠŸè¿”å› 1ï¼Œå¦‚æœå…ƒç´ å·²ç»åœ¨é›†åˆä¸­è¿”å› 0ã€‚ sadd key member é›†åˆä¸­æœ€å¤§çš„æˆå‘˜æ•°ä¸º 232 - 1(4294967295, æ¯ä¸ªé›†åˆå¯å­˜å‚¨40å¤šäº¿ä¸ªæˆå‘˜)ã€‚ sadd runoob redis smembers runoob 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100setä¸­çš„å€¼æ˜¯ä¸èƒ½é‡è¯»çš„ï¼##########################################################################127.0.0.1:6379&gt; sadd myset &quot;hello&quot; # seté›†åˆä¸­æ·»åŠ åŒ€é€Ÿ(integer) 1127.0.0.1:6379&gt; sadd myset &quot;xiaobai&quot;(integer) 1127.0.0.1:6379&gt; sadd myset &quot;lovexiaobai&quot;(integer) 1127.0.0.1:6379&gt; SMEMBERS myset # æŸ¥çœ‹æŒ‡å®šsetçš„æ‰€æœ‰å€¼1) &quot;hello&quot;2) &quot;lovexiaobai&quot;3) &quot;xiaobai&quot;127.0.0.1:6379&gt; SISMEMBER myset hello # åˆ¤æ–­æŸä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯åœ¨seté›†åˆä¸­ï¼(integer) 1127.0.0.1:6379&gt; SISMEMBER myset world(integer) 0##########################################################################127.0.0.1:6379&gt; scard myset # è·å–seté›†åˆä¸­çš„å†…å®¹å…ƒç´ ä¸ªæ•°ï¼(integer) 4##########################################################################rem127.0.0.1:6379&gt; srem myset hello # ç§»é™¤seté›†åˆä¸­çš„æŒ‡å®šå…ƒç´ (integer) 1127.0.0.1:6379&gt; scard myset(integer) 3127.0.0.1:6379&gt; SMEMBERS myset1) &quot;lovexiaobai2&quot;2) &quot;lovexiaobai&quot;3) &quot;xiaobai&quot;##########################################################################set æ— åºä¸é‡å¤é›†åˆã€‚æŠ½éšæœºï¼127.0.0.1:6379&gt; SMEMBERS myset1) &quot;lovexiaobai2&quot;2) &quot;lovexiaobai&quot;3) &quot;xiaobai&quot;127.0.0.1:6379&gt; SRANDMEMBER myset # éšæœºæŠ½é€‰å‡ºä¸€ä¸ªå…ƒç´ &quot;xiaobai&quot;127.0.0.1:6379&gt; SRANDMEMBER myset&quot;xiaobai&quot;127.0.0.1:6379&gt; SRANDMEMBER myset&quot;xiaobai&quot;127.0.0.1:6379&gt; SRANDMEMBER myset&quot;xiaobai&quot;127.0.0.1:6379&gt; SRANDMEMBER myset 2 # éšæœºæŠ½é€‰å‡ºæŒ‡å®šä¸ªæ•°çš„å…ƒç´ 1) &quot;lovexiaobai&quot;2) &quot;lovexiaobai2&quot;127.0.0.1:6379&gt; SRANDMEMBER myset 21) &quot;lovexiaobai&quot;2) &quot;lovexiaobai2&quot;127.0.0.1:6379&gt; SRANDMEMBER myset # éšæœºæŠ½é€‰å‡ºä¸€ä¸ªå…ƒç´ &quot;lovexiaobai2&quot;##########################################################################åˆ é™¤å®šçš„keyï¼Œéšæœºåˆ é™¤keyï¼127.0.0.1:6379&gt; SMEMBERS myset1) &quot;lovexiaobai2&quot;2) &quot;lovexiaobai&quot;3) &quot;xiaobai&quot;127.0.0.1:6379&gt; spop myset # éšæœºåˆ é™¤ä¸€äº›seté›†åˆä¸­çš„å…ƒç´ ï¼&quot;lovexiaobai2&quot;127.0.0.1:6379&gt; spop myset&quot;lovexiaobai&quot;127.0.0.1:6379&gt; SMEMBERS myset1) &quot;xiaobai&quot;##########################################################################å°†ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªseté›†åˆï¼127.0.0.1:6379&gt; sadd myset &quot;hello&quot;(integer) 1127.0.0.1:6379&gt; sadd myset &quot;world&quot;(integer) 1127.0.0.1:6379&gt; sadd myset &quot;xiaobai&quot;(integer) 1127.0.0.1:6379&gt; sadd myset2 &quot;set2&quot;(integer) 1127.0.0.1:6379&gt; smove myset myset2 &quot;xiaobai&quot; # å°†ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªseté›†åˆï¼(integer) 1127.0.0.1:6379&gt; SMEMBERS myset1) &quot;world&quot;2) &quot;hello&quot;127.0.0.1:6379&gt; SMEMBERS myset21) &quot;xiaobai&quot;2) &quot;set2&quot;##########################################################################æ•°å­—é›†åˆç±»ï¼š- å·®é›† SDIFF- äº¤é›†- å¹¶é›†127.0.0.1:6379&gt; SDIFF key1 key2 # å·®é›†1) &quot;b&quot;2) &quot;a&quot;127.0.0.1:6379&gt; SINTER key1 key2 # äº¤é›† å…±åŒå¥½å‹å°±å¯ä»¥è¿™æ ·å®ç°1) &quot;c&quot;127.0.0.1:6379&gt; SUNION key1 key2 # å¹¶é›†1) &quot;b&quot;2) &quot;c&quot;3) &quot;e&quot;4) &quot;a&quot;å¾®åšï¼ŒAç”¨æˆ·å°†æ‰€æœ‰å…³æ³¨çš„äººæ”¾åœ¨ä¸€ä¸ªseté›†åˆä¸­ï¼å°†å®ƒçš„ç²‰ä¸ä¹Ÿæ”¾åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼å…±åŒå…³æ³¨ï¼Œå…±åŒçˆ±å¥½ï¼ŒäºŒåº¦å¥½å‹ï¼Œæ¨èå¥½å‹ï¼ï¼ˆå…­åº¦åˆ†å‰²ç†è®ºï¼‰ ZSet(æœ‰åºé›†åˆ) Redis zset (sorted setï¼šæœ‰åºé›†åˆ)å’Œ set ä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚ zsetçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†**åˆ†æ•°(score)**å´å¯ä»¥é‡å¤ã€‚ zadd å‘½ä»¤ æ·»åŠ å…ƒç´ åˆ°é›†åˆï¼Œå…ƒç´ åœ¨é›†åˆä¸­å­˜åœ¨åˆ™æ›´æ–°å¯¹åº”score zadd key score member zadd runoob 0 redis ZRANGEBYSCORE runoob 0 1000 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879åœ¨setçš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€ä¸ªå€¼ï¼Œset k1 v1 zset k1 score1 v1127.0.0.1:6379&gt; hvals myhash # åªè·å¾—æ‰€æœ‰value1) &quot;world&quot;2) &quot;hello&quot;##########################################################################incr decr127.0.0.1:6379&gt; hset myhash field3 5 #æŒ‡å®šå¢é‡ï¼(integer) 1127.0.0.1:6379&gt; HINCRBY myhash field3 1(integer) 6127.0.0.1:6379&gt; HINCRBY myhash field3 -1(integer) 5127.0.0.1:6379&gt; hsetnx myhash field4 hello # å¦‚æœä¸å­˜åœ¨åˆ™å¯ä»¥è®¾ç½®(integer) 1127.0.0.1:6379&gt; hsetnx myhash field4 world # å¦‚æœå­˜åœ¨åˆ™ä¸èƒ½è®¾ç½®(integer) 0127.0.0.1:6379&gt; zadd myset 1 one # æ·»åŠ ä¸€ä¸ªå€¼(integer) 1127.0.0.1:6379&gt; zadd myset 2 two 3 three # æ·»åŠ å¤šä¸ªå€¼(integer) 2127.0.0.1:6379&gt; ZRANGE myset 0 -11) &quot;one&quot;2) &quot;two&quot;3) &quot;three&quot;##########################################################################æ’åºå¦‚ä½•å®ç°127.0.0.1:6379&gt; zadd salary 2500 xiaohong # æ·»åŠ ä¸‰ä¸ªç”¨æˆ·(integer) 1127.0.0.1:6379&gt; zadd salary 5000 zhangsan(integer) 1127.0.0.1:6379&gt; zadd salary 500 xiaobai(integer) 1# ZRANGEBYSCORE key min max127.0.0.1:6379&gt; ZRANGEBYSCORE salary -inf +inf # æ˜¾ç¤ºå…¨éƒ¨çš„ç”¨æˆ· ä»å°åˆ°å¤§ï¼1) &quot;xiaobai&quot;2) &quot;xiaohong&quot;3) &quot;zhangsan&quot;127.0.0.1:6379&gt; ZREVRANGE salary 0 -1 # ä»å¤§åˆ°è¿›è¡Œæ’åºï¼1) &quot;zhangsan&quot;2) &quot;xiaobai&quot;127.0.0.1:6379&gt; ZRANGEBYSCORE salary -inf +inf withscores # æ˜¾ç¤ºå…¨éƒ¨çš„ç”¨æˆ·å¹¶ä¸”é™„å¸¦æˆç»©1) &quot;xiaobai&quot;2) &quot;500&quot;3) &quot;xiaohong&quot;4) &quot;2500&quot;5) &quot;zhangsan&quot;6) &quot;5000&quot;127.0.0.1:6379&gt; ZRANGEBYSCORE salary -inf 2500 withscores # æ˜¾ç¤ºå·¥èµ„å°äº2500å‘˜å·¥çš„å‡åºæ’åºï¼1) &quot;xiaobai&quot;2) &quot;500&quot;3) &quot;xiaohong&quot;4) &quot;2500&quot;########################################################################### ç§»é™¤remä¸­çš„å…ƒç´ 127.0.0.1:6379&gt; zrange salary 0 -11) &quot;xiaobai&quot;2) &quot;xiaohong&quot;3) &quot;zhangsan&quot;127.0.0.1:6379&gt; zrem salary xiaohong # ç§»é™¤æœ‰åºé›†åˆä¸­çš„æŒ‡å®šå…ƒç´ (integer) 1127.0.0.1:6379&gt; zrange salary 0 -11) &quot;xiaobai&quot;2) &quot;zhangsan&quot;127.0.0.1:6379&gt; zcard salary # è·å–æœ‰åºé›†åˆä¸­çš„ä¸ªæ•°(integer) 2##########################################################################127.0.0.1:6379&gt; zadd myset 1 hello(integer) 1127.0.0.1:6379&gt; zadd myset 2 world 3 xiaobai(integer) 2127.0.0.1:6379&gt; zcount myset 1 3 # è·å–æŒ‡å®šåŒºé—´çš„æˆå‘˜æ•°é‡ï¼(integer) 3127.0.0.1:6379&gt; zcount myset 1 2(integer) 2æ¡ˆä¾‹æ€è·¯ï¼šset æ’åº å­˜å‚¨ç­çº§æˆç»©è¡¨ï¼Œå·¥èµ„è¡¨æ’åºï¼æ™®é€šæ¶ˆæ¯ï¼Œ1ï¼Œ é‡è¦æ¶ˆæ¯ 2ï¼Œå¸¦æƒé‡è¿›è¡Œåˆ¤æ–­ï¼æ’è¡Œæ¦œåº”ç”¨å®ç°ï¼Œå–Top N æµ‹è¯•ï¼ Geospatial ï¼ˆåœ°ç†ä½ç½®ï¼‰ æœ‹å‹çš„å®šä½ï¼Œé™„è¿‘çš„äººï¼Œæ‰“è½¦è·ç¦»è®¡ç®—ï¼Ÿ Redis çš„ Geo åœ¨Redis3.2 ç‰ˆæœ¬å°±æ¨å‡ºäº†ï¼ è¿™ä¸ªåŠŸèƒ½å¯ä»¥æ¨ç®—åœ°ç†ä½ç½®çš„ä¿¡æ¯ï¼Œä¸¤åœ°ä¹‹é—´çš„è·ç¦»ï¼Œæ–¹åœ†å‡ é‡Œçš„äººï¼ å¯ä»¥æŸ¥è¯¢ä¸€äº›æµ‹è¯•æ•°æ®ï¼šhttp://www.jsons.cn/lngcodeinfo/0706D99C19A781A3/ åªæœ‰ å…­ä¸ªå‘½ä»¤ï¼š å®˜æ–¹æ–‡æ¡£ï¼šhttps://www.redis.net.cn/order/3685.html getadd getpos è·å¾—å½“å‰å®šä½ï¼šä¸€å®šæ˜¯ä¸€ä¸ªåæ ‡å€¼ï¼ GEODIST Geohashå­—ç¬¦ä¸²å±æ€§ è¯¥å‘½ä»¤å°†è¿”å›11ä¸ªå­—ç¬¦çš„Geohashå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æ²¡æœ‰ç²¾åº¦Geohashï¼ŒæŸå¤±ç›¸æ¯”ï¼Œä½¿ç”¨å†…éƒ¨52ä½è¡¨ç¤ºã€‚è¿”å›çš„geohasheså…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š ä»–ä»¬å¯ä»¥ç¼©çŸ­ä»å³è¾¹çš„å­—ç¬¦ã€‚å®ƒå°†å¤±å»ç²¾åº¦ï¼Œä½†ä»å°†æŒ‡å‘åŒä¸€åœ°åŒºã€‚ å®ƒå¯ä»¥åœ¨ geohash.org ç½‘ç«™ä½¿ç”¨ï¼Œç½‘å€ http://geohash.org/&lt;geohash-string&gt;ã€‚æŸ¥è¯¢ä¾‹å­ï¼šhttp://geohash.org/sqdtr74hyu0. ä¸ç±»ä¼¼çš„å‰ç¼€å­—ç¬¦ä¸²æ˜¯é™„è¿‘ï¼Œä½†ç›¸åçš„æ˜¯ä¸æ­£ç¡®çš„ï¼Œè¿™æ˜¯å¯èƒ½çš„ï¼Œç”¨ä¸åŒçš„å‰ç¼€å­—ç¬¦ä¸²é™„è¿‘ã€‚ 123456GEOHASH è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ª geohash GEOPOS è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªåæ ‡æ•°ç»„ï¼Œä¸å­˜åœ¨ä¸ºç©ºGEODIST è¿”å›æ‰€æŸ¥ä¸¤ä¸ªç‚¹çš„è·ç¦»ï¼Œå¯æŒ‡å®šå•ä½GEORADIUS æ ¹æ®æ‰€ç»™ç‚¹ï¼ˆéå­˜åœ¨æ•°æ®ï¼‰ä»¥åŠè¦æ±‚èŒƒå›´å’Œè¿”å›æ•°æ®ï¼Œè¿”å›å¯¹åº”èŒƒå›´å†…ç›¸å…³ç‚¹ä¿¡æ¯GEOADD æ·»åŠ ä¸€ä¸ªè¿‡å¤šä¸ªç‚¹ä¿¡æ¯ï¼ˆç»çº¬åº¦å’Œï¼Œåç§°ï¼‰GEORADIUSBYMEMBER æ ¹æ®å·²æœ‰ç‚¹ä»¥åŠæ‰€ç»™èŒƒå›´æŸ¥è¯¢èŒƒå›´å†…æ‰€æœ‰ä½ç½®å…ƒç´  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879# getadd æ·»åŠ åœ°ç†ä½ç½®# è§„åˆ™ï¼šä¸¤çº§æ— æ³•ç›´æ¥æ·»åŠ ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä¸‹è½½åŸå¸‚æ•°æ®ï¼Œç›´æ¥é€šè¿‡javaç¨‹åºä¸€æ¬¡æ€§å¯¼å…¥ï¼# æœ‰æ•ˆçš„ç»åº¦ä»-180åº¦åˆ°180åº¦ã€‚# æœ‰æ•ˆçš„çº¬åº¦ä»-85.05112878åº¦åˆ°85.05112878åº¦ã€‚# å½“åæ ‡ä½ç½®è¶…å‡ºä¸Šè¿°æŒ‡å®šèŒƒå›´æ—¶ï¼Œè¯¥å‘½ä»¤å°†ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚# 127.0.0.1:6379&gt; geoadd china:city 39.90 116.40 beijing(error) ERR invalid longitude,latitude pair 39.900000,116.400000# å‚æ•° key å€¼ï¼ˆï¼‰127.0.0.1:6379&gt; geoadd china:city 116.40 39.90 beijing(integer) 1127.0.0.1:6379&gt; geoadd china:city 121.47 31.23 shanghai(integer) 1127.0.0.1:6379&gt; geoadd china:city 106.50 29.53 chongqi 114.05 22.52 shengzhen(integer) 2127.0.0.1:6379&gt; geoadd china:city 120.16 30.24 hangzhou 108.96 34.26 xian(integer) 2127.0.0.1:6379&gt; GEOPOS china:city beijing # è·å–æŒ‡å®šçš„åŸå¸‚çš„ç»åº¦å’Œçº¬åº¦ï¼1) 1) &quot;116.39999896287918091&quot;2) &quot;39.90000009167092543&quot;127.0.0.1:6379&gt; GEOPOS china:city beijing chongqi1) 1) &quot;116.39999896287918091&quot;2) &quot;39.90000009167092543&quot;2) 1) &quot;106.49999767541885376&quot;2) &quot;29.52999957900659211&quot;#ä¸¤äººä¹‹é—´çš„è·ç¦»ï¼#å•ä½ï¼š#m è¡¨ç¤ºå•ä½ä¸ºç±³ã€‚#km è¡¨ç¤ºå•ä½ä¸ºåƒç±³ã€‚#mi è¡¨ç¤ºå•ä½ä¸ºè‹±é‡Œã€‚#ft è¡¨ç¤ºå•ä½ä¸ºè‹±å°ºã€‚#georadius ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œ æ‰¾å‡ºæŸä¸€åŠå¾„å†…çš„å…ƒç´ #æˆ‘é™„è¿‘çš„äººï¼Ÿ ï¼ˆè·å¾—æ‰€æœ‰é™„è¿‘çš„äººçš„åœ°å€ï¼Œå®šä½ï¼ï¼‰é€šè¿‡åŠå¾„æ¥æŸ¥è¯¢ï¼#è·å¾—æŒ‡å®šæ•°é‡çš„äººï¼Œ200#æ‰€æœ‰æ•°æ®åº”è¯¥éƒ½å½•å…¥ï¼šchina:city ï¼Œæ‰ä¼šè®©ç»“æœæ›´åŠ è¯·æ±‚ï¼127.0.0.1:6379&gt; GEODIST china:city beijing shanghai km # æŸ¥çœ‹ä¸Šæµ·åˆ°åŒ—äº¬çš„ç›´çº¿è·ç¦»&quot;1067.3788&quot;127.0.0.1:6379&gt; GEODIST china:city beijing chongqi km # æŸ¥çœ‹é‡åº†åˆ°åŒ—äº¬çš„ç›´çº¿è·ç¦»&quot;1464.0708&quot;127.0.0.1:6379&gt; GEORADIUS china:city 110 30 1000 km # ä»¥110ï¼Œ30 è¿™ä¸ªç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œå¯»#æ‰¾æ–¹åœ†1000kmå†…çš„åŸå¸‚1) &quot;chongqi&quot;2) &quot;xian&quot;3) &quot;shengzhen&quot;4) &quot;hangzhou&quot;127.0.0.1:6379&gt; GEORADIUS china:city 110 30 500 km1) &quot;chongqi&quot;2) &quot;xian&quot;127.0.0.1:6379&gt; GEORADIUS china:city 110 30 500 km withdist # æ˜¾ç¤ºåˆ°ä¸­é—´è·ç¦»çš„ä½ç½®1) 1) &quot;chongqi&quot;2) &quot;341.9374&quot;2) 1) &quot;xian&quot;2) &quot;483.8340&quot;127.0.0.1:6379&gt; GEORADIUS china:city 110 30 500 km withcoord # æ˜¾ç¤ºä»–äººçš„å®šä½ä¿¡æ¯1) 1) &quot;chongqi&quot;2) 1) &quot;106.49999767541885376&quot;2) &quot;29.52999957900659211&quot;2) 1) &quot;xian&quot;2) 1) &quot;108.96000176668167114&quot;2) &quot;34.25999964418929977&quot;127.0.0.1:6379&gt; GEORADIUS china:city 110 30 500 km withdist withcoord count 1 ##ç­›é€‰å‡ºæŒ‡å®šçš„ç»“æœï¼1) 1) &quot;chongqi&quot;2) &quot;341.9374&quot;3) 1) &quot;106.49999767541885376&quot;2) &quot;29.52999957900659211&quot;127.0.0.1:6379&gt; GEORADIUS china:city 110 30 500 km withdist withcoord count 21) 1) &quot;chongqi&quot;2) &quot;341.9374&quot;3) 1) &quot;106.49999767541885376&quot;2) &quot;29.52999957900659211&quot;2) 1) &quot;xian&quot;2) &quot;483.8340&quot;3) 1) &quot;108.96000176668167114&quot;2) &quot;34.25999964418929977&quot;#GEORADIUSBYMEMBER#GEOHASH å‘½ä»¤ - è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„ Geohash è¡¨ç¤º#è¯¥å‘½ä»¤å°†è¿”å›11ä¸ªå­—ç¬¦çš„Geohashå­—ç¬¦ä¸²!#GEO åº•å±‚çš„å®ç°åŸç†å…¶å®å°±æ˜¯ Zsetï¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Zsetå‘½ä»¤æ¥æ“ä½œgeoï¼ Hyperloglogï¼ˆåŸºæ•°ç»Ÿè®¡ï¼‰ ä»€ä¹ˆæ˜¯åŸºæ•°ï¼Ÿ A B åŸºæ•°ï¼ˆä¸é‡å¤çš„å…ƒç´ ï¼‰ = 5ï¼Œå¯ä»¥æ¥å—è¯¯å·®ï¼ ç®€ä»‹ Redis 2.8.9 ç‰ˆæœ¬å°±æ›´æ–°äº† Hyperloglog æ•°æ®ç»“æ„ï¼ Redis Hyperloglog åŸºæ•°ç»Ÿè®¡çš„ç®—æ³•ï¼ ä¼˜ç‚¹ï¼šå ç”¨çš„å†…å­˜æ˜¯å›ºå®šï¼Œ2^64 ä¸åŒçš„å…ƒç´ çš„æŠ€æœ¯ï¼Œåªéœ€è¦åºŸ 12KBå†…å­˜ï¼å¦‚æœè¦ä»å†…å­˜è§’åº¦æ¥æ¯”è¾ƒçš„è¯ Hyperloglog é¦–é€‰ï¼ ç½‘é¡µçš„ UV ï¼ˆä¸€ä¸ªäººè®¿é—®ä¸€ä¸ªç½‘ç«™å¤šæ¬¡ï¼Œä½†æ˜¯è¿˜æ˜¯ç®—ä½œä¸€ä¸ªäººï¼ï¼‰ ä¼ ç»Ÿçš„æ–¹å¼ï¼Œ set ä¿å­˜ç”¨æˆ·çš„idï¼Œç„¶åå°±å¯ä»¥ç»Ÿè®¡ set ä¸­çš„å…ƒç´ æ•°é‡ä½œä¸ºæ ‡å‡†åˆ¤æ–­ ! è¿™ä¸ªæ–¹å¼å¦‚æœä¿å­˜å¤§é‡çš„ç”¨æˆ·idï¼Œå°±ä¼šæ¯”è¾ƒéº»çƒ¦ï¼æˆ‘ä»¬çš„ç›®çš„æ˜¯ä¸ºäº†è®¡æ•°ï¼Œè€Œä¸æ˜¯ä¿å­˜ç”¨æˆ·idï¼› 0.81% é”™è¯¯ç‡ï¼ ç»Ÿè®¡UVä»»åŠ¡ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡çš„ï¼ æµ‹è¯•ä½¿ç”¨ 1234567891011121314127.0.0.1:6379&gt; PFadd mykey a b c d e f g h i j # åˆ›å»ºç¬¬ä¸€ç»„å…ƒç´  mykey(integer) 1127.0.0.1:6379&gt; PFCOUNT mykey # ç»Ÿè®¡ mykey å…ƒç´ çš„åŸºæ•°æ•°é‡(integer) 10127.0.0.1:6379&gt; PFadd mykey2 i j z x c v b n m # åˆ›å»ºç¬¬äºŒç»„å…ƒç´  mykey2(integer) 1127.0.0.1:6379&gt; PFCOUNT mykey2(integer) 9127.0.0.1:6379&gt; PFMERGE mykey3 mykey mykey2 # åˆå¹¶ä¸¤ç»„ mykey mykey2 =&gt; mykey3 å¹¶é›†OK127.0.0.1:6379&gt; PFCOUNT mykey3 # çœ‹å¹¶é›†çš„æ•°é‡ï¼(integer) 15å¦‚æœå…è®¸å®¹é”™ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥ä½¿ç”¨ Hyperloglog ï¼å¦‚æœä¸å…è®¸å®¹é”™ï¼Œå°±ä½¿ç”¨ set æˆ–è€…è‡ªå·±çš„æ•°æ®ç±»å‹å³å¯ï¼ Bitmapï¼ˆä½å›¾ï¼‰ ä½å­˜å‚¨ ç»Ÿè®¡ç”¨æˆ·ä¿¡æ¯ï¼Œæ´»è·ƒï¼Œä¸æ´»è·ƒï¼ ç™»å½• ã€ æœªç™»å½•ï¼ æ‰“å¡ï¼Œ365æ‰“å¡ï¼ ä¸¤ä¸ªçŠ¶æ€çš„ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ Bitmapsï¼ Bitmap ä½å›¾ï¼Œæ•°æ®ç»“æ„ï¼ éƒ½æ˜¯æ“ä½œäºŒè¿›åˆ¶ä½æ¥è¿›è¡Œè®°å½•ï¼Œå°±åªæœ‰0 å’Œ 1 ä¸¤ä¸ªçŠ¶æ€ï¼ 365 å¤© = 365 bit 1å­—èŠ‚ = 8bit 46 ä¸ªå­—èŠ‚å·¦å³ï¼ 123456789101112#å­˜setbit key offset value#å–getbit key#andï¼Œorï¼Œxor, notæ“ä½œbitop operationã€and, or, xor, notã€‘ destkey key [key]#ç»Ÿè®¡1ä¸ªæ•°bitcount key [start end] #è¿”å›ç¬¬ä¸€ä¸ª0æˆ–1çš„ä½ç½®bitpos key bit [start end]#å¯¹äºŒè¿›åˆ¶ä½å®½æ“ä½œbitfield Redis å‘½ä»¤ Redis å‘½ä»¤ è¯­æ³• Redis å®¢æˆ·ç«¯çš„åŸºæœ¬è¯­æ³•ä¸ºï¼š $ redis-cli ä»¥ä¸‹å®ä¾‹è®²è§£äº†å¦‚ä½•å¯åŠ¨ redis å®¢æˆ·ç«¯ï¼š å¯åŠ¨ redis æœåŠ¡å™¨ï¼Œæ‰“å¼€ç»ˆç«¯å¹¶è¾“å…¥å‘½ä»¤ redis-cliï¼Œè¯¥å‘½ä»¤ä¼šè¿æ¥æœ¬åœ°çš„ redis æœåŠ¡ã€‚ $ redis-cli redis 127.0.0.1:6379&gt; redis 127.0.0.1:6379&gt; PING PONG åœ¨ä»¥ä¸Šå®ä¾‹ä¸­æˆ‘ä»¬è¿æ¥åˆ°æœ¬åœ°çš„ redis æœåŠ¡å¹¶æ‰§è¡Œ PING å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ç”¨äºæ£€æµ‹ redis æœåŠ¡æ˜¯å¦å¯åŠ¨ã€‚ åœ¨è¿œç¨‹æœåŠ¡ä¸Šæ‰§è¡Œå‘½ä»¤ $ redis-cli -h host -p port -a password Redis keys å‘½ä»¤å¤§å…¨ https://redis.io/commands Redis Psubscribe å‘½ä»¤_è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚ Redis HyperLogLog Redis åœ¨ 2.8.9 ç‰ˆæœ¬æ·»åŠ äº† HyperLogLog ç»“æ„ã€‚ Redis HyperLogLog æ˜¯ç”¨æ¥åšåŸºæ•°ç»Ÿè®¡çš„ç®—æ³•ï¼ŒHyperLogLog çš„ä¼˜ç‚¹æ˜¯ï¼Œåœ¨è¾“å…¥å…ƒç´ çš„æ•°é‡æˆ–è€…ä½“ç§¯éå¸¸éå¸¸å¤§æ—¶ï¼Œè®¡ç®—åŸºæ•°æ‰€éœ€çš„ç©ºé—´æ€»æ˜¯å›ºå®š çš„ã€å¹¶ä¸”æ˜¯å¾ˆå°çš„ã€‚ åœ¨ Redis é‡Œé¢ï¼Œæ¯ä¸ª HyperLogLog é”®åªéœ€è¦èŠ±è´¹ 12 KB å†…å­˜ï¼Œå°±å¯ä»¥è®¡ç®—æ¥è¿‘ 2^64 ä¸ªä¸åŒå…ƒç´ çš„åŸº æ•°ã€‚è¿™å’Œè®¡ç®—åŸºæ•°æ—¶ï¼Œå…ƒç´ è¶Šå¤šè€—è´¹å†…å­˜å°±è¶Šå¤šçš„é›†åˆå½¢æˆé²œæ˜å¯¹æ¯”ã€‚ ä½†æ˜¯ï¼Œå› ä¸º HyperLogLog åªä¼šæ ¹æ®è¾“å…¥å…ƒç´ æ¥è®¡ç®—åŸºæ•°ï¼Œè€Œä¸ä¼šå‚¨å­˜è¾“å…¥å…ƒç´ æœ¬èº«ï¼Œæ‰€ä»¥ HyperLogLog ä¸èƒ½åƒé›†åˆé‚£æ ·ï¼Œè¿”å›è¾“å…¥çš„å„ä¸ªå…ƒç´ ã€‚ ä»€ä¹ˆæ˜¯åŸºæ•°? æ¯”å¦‚æ•°æ®é›† {1, 3, 5, 7, 5, 7, 8}ï¼Œ é‚£ä¹ˆè¿™ä¸ªæ•°æ®é›†çš„åŸºæ•°é›†ä¸º {1, 3, 5 ,7, 8}, åŸºæ•°(ä¸é‡å¤å…ƒç´ )ä¸º5ã€‚ åŸºæ•°ä¼°è®¡å°±æ˜¯åœ¨è¯¯å·®å¯æ¥å—çš„èŒƒå›´å†…ï¼Œå¿«é€Ÿè®¡ç®—åŸºæ•°ã€‚ PFADD runoobkey &quot;redis&quot; PFCOUNT runoobkey Redis å‘å¸ƒè®¢é˜… 123456Unsubscribe å–æ¶ˆè®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªSubscribe è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªPubsub æŸ¥çœ‹è®¢é˜…ä¸å‘å¸ƒçŠ¶æ€Punsubscribe é€€è®¢æ‰€æœ‰ç»™å®šçš„é¢‘é“Publish å‘é€ç›¸å…³ä¿¡æ¯åˆ°æ‰€ç»™çš„é¢‘é“Psubscribe è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ª å¯ç”¨åŒ¹é…ç¬¦ * Redis å‘å¸ƒè®¢é˜… (pub/sub) æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼šå‘é€è€… (pub) å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€… (sub) æ¥æ”¶æ¶ˆæ¯ã€‚ Redis å®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä»»æ„æ•°é‡çš„é¢‘é“ã€‚ è®¢é˜…/å‘å¸ƒæ¶ˆæ¯å›¾ï¼š ç¬¬ä¸€ä¸ªï¼šæ¶ˆæ¯å‘é€è€…ï¼Œ ç¬¬äºŒä¸ªï¼šé¢‘é“ ç¬¬ä¸‰ä¸ªï¼šæ¶ˆæ¯è®¢é˜…è€…ï¼ ä¸‹å›¾å±•ç¤ºäº†é¢‘é“ channel1 ï¼Œ ä»¥åŠè®¢é˜…è¿™ä¸ªé¢‘é“çš„ä¸‰ä¸ªå®¢æˆ·ç«¯ â€”â€” client2 ã€ client5 å’Œ client1 ä¹‹é—´çš„ å…³ç³»ï¼š å½“æœ‰æ–°æ¶ˆæ¯é€šè¿‡ PUBLISH å‘½ä»¤å‘é€ç»™é¢‘é“ channel1 æ—¶ï¼Œ è¿™ä¸ªæ¶ˆæ¯å°±ä¼šè¢«å‘é€ç»™è®¢é˜…å®ƒçš„ä¸‰ä¸ªå®¢æˆ· ç«¯ï¼š å‘½ä»¤ è¿™äº›å‘½ä»¤è¢«å¹¿æ³›ç”¨äºæ„å»ºå³æ—¶é€šä¿¡åº”ç”¨ï¼Œæ¯”å¦‚ç½‘ç»œèŠå¤©å®¤(chatroom)å’Œå®æ—¶å¹¿æ’­ã€å®æ—¶æé†’ç­‰ æµ‹è¯• 123456789101112131415161718192021è®¢é˜…ç«¯ï¼š127.0.0.1:6379&gt; SUBSCRIBE xiaobaishuo # è®¢é˜…ä¸€ä¸ªé¢‘é“ xiaobaishuoReading messages... (press Ctrl-C to quit)1) &quot;subscribe&quot;2) &quot;xiaobaishuo&quot;3) (integer) 1# ç­‰å¾…è¯»å–æ¨é€çš„ä¿¡æ¯1) &quot;message&quot; # æ¶ˆæ¯2) &quot;xiaobaishuo&quot; # é‚£ä¸ªé¢‘é“çš„æ¶ˆæ¯3) &quot;hello,xiaobai&quot; # æ¶ˆæ¯çš„å…·ä½“å†…å®¹1) &quot;message&quot;2) &quot;xiaobaishuo&quot;3) &quot;hello,redis&quot;å‘é€ç«¯ï¼š127.0.0.1:6379&gt; PUBLISH xiaobaishuo &quot;hello,xiaobai&quot; # å‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯åˆ°é¢‘é“ï¼(integer) 1127.0.0.1:6379&gt; PUBLISH xiaobaishuo &quot;hello,redis&quot; # å‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯åˆ°é¢‘é“ï¼(integer) 1127.0.0.1:6379&gt; åŸç† Redisæ˜¯ä½¿ç”¨Cå®ç°çš„ï¼Œé€šè¿‡åˆ†æ Redis æºç é‡Œçš„ pubsub.c æ–‡ä»¶ï¼Œäº†è§£å‘å¸ƒå’Œè®¢é˜…æœºåˆ¶çš„åº•å±‚å®ç°ï¼Œå€Ÿæ­¤åŠ æ·±å¯¹ Redis çš„ç†è§£ã€‚ Redis é€šè¿‡ PUBLISH ã€SUBSCRIBE å’Œ PSUBSCRIBE ç­‰å‘½ä»¤å®ç°å‘å¸ƒå’Œè®¢é˜…åŠŸèƒ½ã€‚ å¾®ä¿¡ï¼š é€šè¿‡ SUBSCRIBE å‘½ä»¤è®¢é˜…æŸé¢‘é“åï¼Œredis-server é‡Œç»´æŠ¤äº†ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸çš„é”®å°±æ˜¯ä¸€ä¸ªä¸ª é¢‘é“ï¼ï¼Œ è€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ª channel çš„å®¢æˆ·ç«¯ã€‚SUBSCRIBE å‘½ä»¤çš„å…³é”®ï¼Œ å°±æ˜¯å°†å®¢æˆ·ç«¯æ·»åŠ åˆ°ç»™å®š channel çš„è®¢é˜…é“¾è¡¨ä¸­ã€‚ é€šè¿‡ PUBLISH å‘½ä»¤å‘è®¢é˜…è€…å‘é€æ¶ˆæ¯ï¼Œredis-server ä¼šä½¿ç”¨ç»™å®šçš„é¢‘é“ä½œä¸ºé”®ï¼Œåœ¨å®ƒæ‰€ç»´æŠ¤çš„ channel å­—å…¸ä¸­æŸ¥æ‰¾è®°å½•äº†è®¢é˜…è¿™ä¸ªé¢‘é“çš„æ‰€æœ‰å®¢æˆ·ç«¯çš„é“¾è¡¨ï¼Œéå†è¿™ä¸ªé“¾è¡¨ï¼Œå°†æ¶ˆæ¯å‘å¸ƒç»™æ‰€æœ‰è®¢é˜…è€…ã€‚Pub/Sub ä»å­—é¢ä¸Šç†è§£å°±æ˜¯å‘å¸ƒï¼ˆPublishï¼‰ä¸è®¢é˜…ï¼ˆSubscribeï¼‰ï¼Œåœ¨Redisä¸­ï¼Œä½ å¯ä»¥è®¾å®šå¯¹æŸä¸€ä¸ª keyå€¼è¿›è¡Œæ¶ˆæ¯å‘å¸ƒåŠæ¶ˆæ¯è®¢é˜…ï¼Œå½“ä¸€ä¸ªkeyå€¼ä¸Šè¿›è¡Œäº†æ¶ˆæ¯å‘å¸ƒåï¼Œæ‰€æœ‰è®¢é˜…å®ƒçš„å®¢æˆ·ç«¯éƒ½ä¼šæ”¶åˆ°ç›¸åº” çš„æ¶ˆæ¯ã€‚è¿™ä¸€åŠŸèƒ½æœ€æ˜æ˜¾çš„ç”¨æ³•å°±æ˜¯ç”¨ä½œå®æ—¶æ¶ˆæ¯ç³»ç»Ÿï¼Œæ¯”å¦‚æ™®é€šçš„å³æ—¶èŠå¤©ï¼Œç¾¤èŠç­‰åŠŸèƒ½ã€‚ ä½¿ç”¨åœºæ™¯ï¼š 1ã€å®æ—¶æ¶ˆæ¯ç³»ç»Ÿï¼ 2ã€äº‹å®èŠå¤©ï¼ï¼ˆé¢‘é“å½“åšèŠå¤©å®¤ï¼Œå°†ä¿¡æ¯å›æ˜¾ç»™æ‰€æœ‰äººå³å¯ï¼ï¼‰ 3ã€è®¢é˜…ï¼Œå…³æ³¨ç³»ç»Ÿéƒ½æ˜¯å¯ä»¥çš„ï¼ ç¨å¾®å¤æ‚çš„åœºæ™¯æˆ‘ä»¬å°±ä¼šä½¿ç”¨ æ¶ˆæ¯ä¸­é—´ä»¶ MQ ï¼ˆï¼‰ SUBSCRIBE runoobChat PUBLISH runoobChat &quot;Redis PUBLISH test&quot; é‡æ–°å¼€å¯ä¸ª redis å®¢æˆ·ç«¯åœ¨åŒä¸€ä¸ªé¢‘é“ runoobChat å‘å¸ƒä¸¤æ¬¡æ¶ˆæ¯ï¼Œè®¢é˜…è€…å°±èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯ã€‚ Redis äº‹åŠ¡(ä¸å›æ»šï¼Œæ‰¹é‡æ‰§è¡Œä½œç”¨) Redis äº‹åŠ¡å¯ä»¥ä¸€æ¬¡æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œ å¹¶ä¸”å¸¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªé‡è¦çš„ä¿è¯ï¼š æ‰¹é‡æ“ä½œåœ¨å‘é€ EXEC å‘½ä»¤å‰è¢«æ”¾å…¥é˜Ÿåˆ—ç¼“å­˜ã€‚ æ”¶åˆ° EXEC å‘½ä»¤åè¿›å…¥äº‹åŠ¡æ‰§è¡Œï¼Œäº‹åŠ¡ä¸­ä»»æ„å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå…¶ä½™çš„å‘½ä»¤ä¾ç„¶è¢«æ‰§è¡Œ,ä»£ç é”™è¯¯ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½ä¸ä¼šæ‰§è¡Œã€‚ åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ï¼Œå…¶ä»–å®¢æˆ·ç«¯æäº¤çš„å‘½ä»¤è¯·æ±‚ä¸ä¼šæ’å…¥åˆ°äº‹åŠ¡æ‰§è¡Œå‘½ä»¤åºåˆ—ä¸­ã€‚ DISCARDæ”¾å¼ƒäº‹ç‰©ï¼Œæ‰€æœ‰ä¸æ‰§è¡Œä¸€ä¸ªäº‹åŠ¡ä»å¼€å§‹åˆ°æ‰§è¡Œä¼šç»å†ä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µï¼š å¼€å§‹äº‹åŠ¡ã€‚ å‘½ä»¤å…¥é˜Ÿã€‚ æ‰§è¡Œäº‹åŠ¡ã€‚ MULTI å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ å°†å¤šä¸ªå‘½ä»¤å…¥é˜Ÿåˆ°äº‹åŠ¡ä¸­ SET book-name &quot;Mastering C++ in 21 days&quot; GET book-name SADD tag &quot;C++&quot; &quot;Programming&quot; &quot;Mastering Series&quot; SMEMBERS tag EXEC/DISCARD å•ä¸ª Redis å‘½ä»¤çš„æ‰§è¡Œæ˜¯åŸå­æ€§çš„ï¼Œä½† Redis æ²¡æœ‰åœ¨äº‹åŠ¡ä¸Šå¢åŠ ä»»ä½•ç»´æŒåŸå­æ€§çš„æœºåˆ¶ï¼Œæ‰€ä»¥ Redis äº‹åŠ¡çš„æ‰§è¡Œå¹¶ä¸æ˜¯åŸå­æ€§çš„ã€‚ äº‹åŠ¡å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ‰“åŒ…çš„æ‰¹é‡æ‰§è¡Œè„šæœ¬ï¼Œä½†æ‰¹é‡æŒ‡ä»¤å¹¶éåŸå­åŒ–çš„æ“ä½œï¼Œä¸­é—´æŸæ¡æŒ‡ä»¤çš„å¤±è´¥ä¸ä¼šå¯¼è‡´å‰é¢å·²åšæŒ‡ä»¤çš„å›æ»šï¼Œä¹Ÿä¸ä¼šé€ æˆåç»­çš„æŒ‡ä»¤ä¸åšã€‚ æ‚²è§‚é”ï¼š å¾ˆæ‚²è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¼šå‡ºé—®é¢˜ï¼Œæ— è®ºåšä»€ä¹ˆéƒ½ä¼šåŠ é”ï¼ ä¹è§‚é”ï¼š å¾ˆä¹è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¸ä¼šå‡ºé—®é¢˜ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼ æ›´æ–°æ•°æ®çš„æ—¶å€™å»åˆ¤æ–­ä¸€ä¸‹ï¼Œåœ¨æ­¤æœŸé—´æ˜¯å¦æœ‰äººä¿®æ”¹è¿‡è¿™ä¸ªæ•°æ®ï¼Œ è·å–version æ›´æ–°çš„æ—¶å€™æ¯”è¾ƒ version Redisæµ‹ç›‘è§†æµ‹è¯• æ­£å¸¸æ‰§è¡ŒæˆåŠŸï¼ æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ , ä½¿ç”¨watch å¯ä»¥å½“åšredisçš„ä¹è§‚é”æ“ä½œï¼ 123456789101112131415127.0.0.1:6379&gt; set money 100OK127.0.0.1:6379&gt; set out 0OK127.0.0.1:6379&gt; watch money # ç›‘è§† money å¯¹è±¡OK127.0.0.1:6379&gt; multi # äº‹åŠ¡æ­£å¸¸ç»“æŸï¼Œæ•°æ®æœŸé—´æ²¡æœ‰å‘ç”Ÿå˜åŠ¨ï¼Œè¿™ä¸ªæ—¶å€™å°±æ­£å¸¸æ‰§è¡ŒæˆåŠŸï¼OK127.0.0.1:6379&gt; DECRBY money 20QUEUED127.0.0.1:6379&gt; INCRBY out 20QUEUED127.0.0.1:6379&gt; exec1) (integer) 802) (integer) 20 æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ , ä½¿ç”¨watch å¯ä»¥å½“åšredisçš„ä¹è§‚é”æ“ä½œï¼ 1234567891011127.0.0.1:6379&gt; watch money # ç›‘è§† moneyOK127.0.0.1:6379&gt; multiOK127.0.0.1:6379&gt; DECRBY money 10QUEUED127.0.0.1:6379&gt; INCRBY out 10QUEUED127.0.0.1:6379&gt; exec # æ‰§è¡Œä¹‹å‰ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹ï¼Œä¿®æ”¹äº†æˆ‘ä»¬çš„å€¼ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±ä¼šå¯¼è‡´äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼(nil) Redis è„šæœ¬ Redis è„šæœ¬ä½¿ç”¨ Lua è§£é‡Šå™¨æ¥æ‰§è¡Œè„šæœ¬ã€‚ Redis 2.6 ç‰ˆæœ¬é€šè¿‡å†…åµŒæ”¯æŒ Lua ç¯å¢ƒã€‚æ‰§è¡Œè„šæœ¬çš„å¸¸ç”¨å‘½ä»¤ä¸º EVALã€‚ EVAL script numkeys key [key ...] arg [arg ...] EVAL &quot;return {KEYS[1],KEYS[2],ARGV[1],ARGV[2]}&quot; 2 key1 key2 first second Redis è¿æ¥ Redis è¿æ¥å‘½ä»¤ä¸»è¦æ˜¯ç”¨äºè¿æ¥ redis æœåŠ¡ã€‚ å®¢æˆ·ç«¯å¦‚ä½•é€šè¿‡å¯†ç éªŒè¯è¿æ¥åˆ° redis æœåŠ¡ï¼Œå¹¶æ£€æµ‹æœåŠ¡æ˜¯å¦åœ¨è¿è¡Œï¼š AUTH &quot;password&quot; PING éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡® 1 AUTH password æ‰“å°å­—ç¬¦ä¸² 2 ECHO message æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ 3 PING å…³é—­å½“å‰è¿æ¥ 4 QUIT åˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“ 5 SELECT index RedisæœåŠ¡å™¨ RedisæœåŠ¡å™¨å‘½ä»¤ä¸»è¦æ˜¯ç”¨äºç®¡ç†redisæœåŠ¡ Redis GEO Redis GEO ä¸»è¦ç”¨äºå­˜å‚¨åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œå¹¶å¯¹å­˜å‚¨çš„ä¿¡æ¯è¿›è¡Œæ“ä½œï¼Œè¯¥åŠŸèƒ½åœ¨ Redis 3.2 ç‰ˆæœ¬æ–°å¢ã€‚ Redis GEO æ“ä½œæ–¹æ³•æœ‰ï¼š geoaddï¼šæ·»åŠ åœ°ç†ä½ç½®çš„åæ ‡ã€‚ geoposï¼šè·å–åœ°ç†ä½ç½®çš„åæ ‡ã€‚ geodistï¼šè®¡ç®—ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„è·ç¦»ã€‚ georadiusï¼šæ ¹æ®ç”¨æˆ·ç»™å®šçš„ç»çº¬åº¦åæ ‡æ¥è·å–æŒ‡å®šèŒƒå›´å†…çš„åœ°ç†ä½ç½®é›†åˆã€‚ georadiusbymemberï¼šæ ¹æ®å‚¨å­˜åœ¨ä½ç½®é›†åˆé‡Œé¢çš„æŸä¸ªåœ°ç‚¹è·å–æŒ‡å®šèŒƒå›´å†…çš„åœ°ç†ä½ç½®é›†åˆã€‚ geohashï¼šè¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å¯¹è±¡çš„ geohash å€¼ã€‚ geoadd geoadd ç”¨äºå­˜å‚¨æŒ‡å®šçš„åœ°ç†ç©ºé—´ä½ç½®ï¼Œå¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªç»åº¦(longitude)ã€çº¬åº¦(latitude)ã€ä½ç½®åç§°(member)æ·»åŠ åˆ°æŒ‡å®šçš„ key ä¸­ã€‚ geoadd è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š GEOADD key longitude latitude member [longitude latitude member ...] - GEOADD Sicily 13.361389 38.115556 &quot;Palermo&quot; 15.087269 37.502669 &quot;Catania&quot; - GEODIST Sicily Palermo Catania - geodist ç”¨äºè¿”å›ä¸¤ä¸ªç»™å®šä½ç½®ä¹‹é—´çš„è·ç¦»ã€‚ geodist è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š GEODIST key member1 member2 [m|km|ft|mi] member1 member2 ä¸ºä¸¤ä¸ªåœ°ç†ä½ç½®ã€‚ æœ€åä¸€ä¸ªè·ç¦»å•ä½å‚æ•°è¯´æ˜ï¼š m ï¼šç±³ï¼Œé»˜è®¤å•ä½ã€‚ km ï¼šåƒç±³ã€‚ mi ï¼šè‹±é‡Œã€‚ ft ï¼šè‹±å°ºã€‚ - GEORADIUS Sicily 15 37 100 km - georadius ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œ è¿”å›é”®åŒ…å«çš„ä½ç½®å…ƒç´ å½“ä¸­ï¼Œ ä¸ä¸­å¿ƒçš„è·ç¦»ä¸è¶…è¿‡ç»™å®šæœ€å¤§è·ç¦»çš„æ‰€æœ‰ä½ç½®å…ƒç´ ã€‚ georadiusbymember å’Œ GEORADIUS å‘½ä»¤ä¸€æ ·ï¼Œ éƒ½å¯ä»¥æ‰¾å‡ºä½äºæŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ï¼Œ ä½†æ˜¯ georadiusbymember çš„ä¸­å¿ƒç‚¹æ˜¯ç”±ç»™å®šçš„ä½ç½®å…ƒç´ å†³å®šçš„ï¼Œ è€Œä¸æ˜¯ä½¿ç”¨ç»åº¦å’Œçº¬åº¦æ¥å†³å®šä¸­å¿ƒç‚¹ã€‚ georadius ä¸ georadiusbymember è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š GEORADIUS key longitude latitude radius m|km|ft|mi [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count] [ASC|DESC] [STORE key] [STOREDIST key] GEORADIUSBYMEMBER key member radius m|km|ft|mi [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count] [ASC|DESC] [STORE key] [STOREDIST key] å‚æ•°è¯´æ˜ï¼š m ï¼šç±³ï¼Œé»˜è®¤å•ä½ã€‚ km ï¼šåƒç±³ã€‚ mi ï¼šè‹±é‡Œã€‚ ft ï¼šè‹±å°ºã€‚ WITHDIST: åœ¨è¿”å›ä½ç½®å…ƒç´ çš„åŒæ—¶ï¼Œ å°†ä½ç½®å…ƒç´ ä¸ä¸­å¿ƒä¹‹é—´çš„è·ç¦»ä¹Ÿä¸€å¹¶è¿”å›ã€‚ WITHCOORD: å°†ä½ç½®å…ƒç´ çš„ç»åº¦å’Œç»´åº¦ä¹Ÿä¸€å¹¶è¿”å›ã€‚ WITHHASH: ä»¥ 52 ä½æœ‰ç¬¦å·æ•´æ•°çš„å½¢å¼ï¼Œ è¿”å›ä½ç½®å…ƒç´ ç»è¿‡åŸå§‹ geohash ç¼–ç çš„æœ‰åºé›†åˆåˆ†å€¼ã€‚ è¿™ä¸ªé€‰é¡¹ä¸»è¦ç”¨äºåº•å±‚åº”ç”¨æˆ–è€…è°ƒè¯•ï¼Œ å®é™…ä¸­çš„ä½œç”¨å¹¶ä¸å¤§ã€‚ COUNT é™å®šè¿”å›çš„è®°å½•æ•°ã€‚ ASC: æŸ¥æ‰¾ç»“æœæ ¹æ®è·ç¦»ä»è¿‘åˆ°è¿œæ’åºã€‚ DESC: æŸ¥æ‰¾ç»“æœæ ¹æ®ä»è¿œåˆ°è¿‘æ’åºã€‚ - GEOPOS Sicily Palermo Catania NonExisting - geopos ç”¨äºä»ç»™å®šçš„ key é‡Œè¿”å›æ‰€æœ‰æŒ‡å®šåç§°(member)çš„ä½ç½®ï¼ˆç»åº¦å’Œçº¬åº¦ï¼‰ï¼Œä¸å­˜åœ¨çš„è¿”å› nilã€‚ geopos è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š GEOPOS key member [member ...] - GEOHASH Sicily Palermo Catania - geohash Redis GEO ä½¿ç”¨ geohash æ¥ä¿å­˜åœ°ç†ä½ç½®çš„åæ ‡ã€‚ geohash ç”¨äºè·å–ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„ geohash å€¼ã€‚ geohash è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š GEOHASH key member [member ...] Redis Stream Redis Stream æ˜¯ Redis 5.0 ç‰ˆæœ¬æ–°å¢åŠ çš„æ•°æ®ç»“æ„ã€‚ Redis Stream ä¸»è¦ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼ŒMessage Queueï¼‰ï¼ŒRedis æœ¬èº«æ˜¯æœ‰ä¸€ä¸ª Redis å‘å¸ƒè®¢é˜… (pub/sub) æ¥å®ç°æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½ï¼Œä½†å®ƒæœ‰ä¸ªç¼ºç‚¹å°±æ˜¯æ¶ˆæ¯æ— æ³•æŒä¹…åŒ–ï¼Œå¦‚æœå‡ºç°ç½‘ç»œæ–­å¼€ã€Redis å®•æœºç­‰ï¼Œæ¶ˆæ¯å°±ä¼šè¢«ä¸¢å¼ƒã€‚ ç®€å•æ¥è¯´å‘å¸ƒè®¢é˜… (pub/sub) å¯ä»¥åˆ†å‘æ¶ˆæ¯ï¼Œä½†æ— æ³•è®°å½•å†å²æ¶ˆæ¯ã€‚ è€Œ Redis Stream æä¾›äº†æ¶ˆæ¯çš„æŒä¹…åŒ–å’Œä¸»å¤‡å¤åˆ¶åŠŸèƒ½ï¼Œå¯ä»¥è®©ä»»ä½•å®¢æˆ·ç«¯è®¿é—®ä»»ä½•æ—¶åˆ»çš„æ•°æ®ï¼Œå¹¶ä¸”èƒ½è®°ä½æ¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„è®¿é—®ä½ç½®ï¼Œè¿˜èƒ½ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚ Redis Stream çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼Œå®ƒæœ‰ä¸€ä¸ªæ¶ˆæ¯é“¾è¡¨ï¼Œå°†æ‰€æœ‰åŠ å…¥çš„æ¶ˆæ¯éƒ½ä¸²èµ·æ¥ï¼Œæ¯ä¸ªæ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ ID å’Œå¯¹åº”çš„å†…å®¹ï¼š æ¯ä¸ª Stream éƒ½æœ‰å”¯ä¸€çš„åç§°ï¼Œå®ƒå°±æ˜¯ Redis çš„ keyï¼Œåœ¨æˆ‘ä»¬é¦–æ¬¡ä½¿ç”¨ xadd æŒ‡ä»¤è¿½åŠ æ¶ˆæ¯æ—¶è‡ªåŠ¨åˆ›å»ºã€‚ ä¸Šå›¾è§£æï¼š Consumer Group ï¼šæ¶ˆè´¹ç»„ï¼Œä½¿ç”¨ XGROUP CREATE å‘½ä»¤åˆ›å»ºï¼Œä¸€ä¸ªæ¶ˆè´¹ç»„æœ‰å¤šä¸ªæ¶ˆè´¹è€…(Consumer)ã€‚ last_delivered_id ï¼šæ¸¸æ ‡ï¼Œæ¯ä¸ªæ¶ˆè´¹ç»„ä¼šæœ‰ä¸ªæ¸¸æ ‡ last_delivered_idï¼Œä»»æ„ä¸€ä¸ªæ¶ˆè´¹è€…è¯»å–äº†æ¶ˆæ¯éƒ½ä¼šä½¿æ¸¸æ ‡ last_delivered_id å¾€å‰ç§»åŠ¨ã€‚ pending_ids ï¼šæ¶ˆè´¹è€…(Consumer)çš„çŠ¶æ€å˜é‡ï¼Œä½œç”¨æ˜¯ç»´æŠ¤æ¶ˆè´¹è€…çš„æœªç¡®è®¤çš„ idã€‚ pending_ids è®°å½•äº†å½“å‰å·²ç»è¢«å®¢æˆ·ç«¯è¯»å–çš„æ¶ˆæ¯ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰ ack (Acknowledge characterï¼šç¡®è®¤å­—ç¬¦ï¼‰ã€‚ æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³å‘½ä»¤ï¼š XADD - æ·»åŠ æ¶ˆæ¯åˆ°æœ«å°¾ XTRIM - å¯¹æµè¿›è¡Œä¿®å‰ªï¼Œé™åˆ¶é•¿åº¦ XDEL - åˆ é™¤æ¶ˆæ¯ XLEN - è·å–æµåŒ…å«çš„å…ƒç´ æ•°é‡ï¼Œå³æ¶ˆæ¯é•¿åº¦ XRANGE - è·å–æ¶ˆæ¯åˆ—è¡¨ï¼Œä¼šè‡ªåŠ¨è¿‡æ»¤å·²ç»åˆ é™¤çš„æ¶ˆæ¯ XREVRANGE - åå‘è·å–æ¶ˆæ¯åˆ—è¡¨ï¼ŒID ä»å¤§åˆ°å° XREAD - ä»¥é˜»å¡æˆ–éé˜»å¡æ–¹å¼è·å–æ¶ˆæ¯åˆ—è¡¨ æ¶ˆè´¹è€…ç»„ç›¸å…³å‘½ä»¤ï¼š XGROUP CREATE - åˆ›å»ºæ¶ˆè´¹è€…ç»„ XREADGROUP GROUP - è¯»å–æ¶ˆè´¹è€…ç»„ä¸­çš„æ¶ˆæ¯ XACK - å°†æ¶ˆæ¯æ ‡è®°ä¸º&quot;å·²å¤„ç†&quot; XGROUP SETID - ä¸ºæ¶ˆè´¹è€…ç»„è®¾ç½®æ–°çš„æœ€åé€’é€æ¶ˆæ¯ID XGROUP DELCONSUMER - åˆ é™¤æ¶ˆè´¹è€… XGROUP DESTROY - åˆ é™¤æ¶ˆè´¹è€…ç»„ XPENDING - æ˜¾ç¤ºå¾…å¤„ç†æ¶ˆæ¯çš„ç›¸å…³ä¿¡æ¯ XCLAIM - è½¬ç§»æ¶ˆæ¯çš„å½’å±æƒ XINFO - æŸ¥çœ‹æµå’Œæ¶ˆè´¹è€…ç»„çš„ç›¸å…³ä¿¡æ¯ï¼› XINFO GROUPS - æ‰“å°æ¶ˆè´¹è€…ç»„çš„ä¿¡æ¯ï¼› XINFO STREAM - æ‰“å°æµä¿¡æ¯ XADD ä½¿ç”¨ XADD å‘é˜Ÿåˆ—æ·»åŠ æ¶ˆæ¯ï¼Œå¦‚æœæŒ‡å®šçš„é˜Ÿåˆ—ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼ŒXADD è¯­æ³•æ ¼å¼ï¼š XADD key ID field value [field value ...] key ï¼šé˜Ÿåˆ—åç§°ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆ›å»º ID ï¼šæ¶ˆæ¯ idï¼Œæˆ‘ä»¬ä½¿ç”¨ * è¡¨ç¤ºç”± redis ç”Ÿæˆï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼Œä½†æ˜¯è¦è‡ªå·±ä¿è¯é€’å¢æ€§ã€‚ field value ï¼š è®°å½•ã€‚ - XADD mystream * name Sara surname OConnor - XADD mystream * field1 value1 field2 value2 field3 value3 - XLEN mystream - XRANGE mystream - + XTRIM ä½¿ç”¨ XTRIM å¯¹æµè¿›è¡Œä¿®å‰ªï¼Œé™åˆ¶é•¿åº¦ï¼Œ è¯­æ³•æ ¼å¼ï¼š XTRIM key MAXLEN [~] count key ï¼šé˜Ÿåˆ—åç§° MAXLEN ï¼šé•¿åº¦ count ï¼šæ•°é‡ - XADD mystream * field1 A field2 B field3 C field4 D - XTRIM mystream MAXLEN 2 - XRANGE mystream - + XDEL ä½¿ç”¨ XDEL åˆ é™¤æ¶ˆæ¯ï¼Œè¯­æ³•æ ¼å¼ï¼š XDEL key ID [ID ...] keyï¼šé˜Ÿåˆ—åç§° ID ï¼šæ¶ˆæ¯ ID ä½¿ç”¨ XDEL åˆ é™¤æ¶ˆæ¯ï¼Œè¯­æ³•æ ¼å¼ï¼š XLEN ä½¿ç”¨ XLEN è·å–æµåŒ…å«çš„å…ƒç´ æ•°é‡ï¼Œå³æ¶ˆæ¯é•¿åº¦ï¼Œè¯­æ³•æ ¼å¼ï¼š XLEN key keyï¼šé˜Ÿåˆ—åç§° - XADD mystream * item 1 - XLEN mystream XRANGE ä½¿ç”¨ XRANGE è·å–æ¶ˆæ¯åˆ—è¡¨ï¼Œä¼šè‡ªåŠ¨è¿‡æ»¤å·²ç»åˆ é™¤çš„æ¶ˆæ¯ ï¼Œè¯­æ³•æ ¼å¼ï¼š XRANGE key start end [COUNT count] key ï¼šé˜Ÿåˆ—å start ï¼šå¼€å§‹å€¼ï¼Œ - è¡¨ç¤ºæœ€å°å€¼ end ï¼šç»“æŸå€¼ï¼Œ + è¡¨ç¤ºæœ€å¤§å€¼ count ï¼šæ•°é‡ - XADD writers * name Ngozi surname Adichie - XLEN writers - XRANGE writers - + COUNT 2 XREVRANGE ä½¿ç”¨ XREVRANGE è·å–æ¶ˆæ¯åˆ—è¡¨ï¼Œä¼šè‡ªåŠ¨è¿‡æ»¤å·²ç»åˆ é™¤çš„æ¶ˆæ¯ ï¼Œè¯­æ³•æ ¼å¼ï¼š XREVRANGE key end start [COUNT count] key ï¼šé˜Ÿåˆ—å end ï¼šç»“æŸå€¼ï¼Œ + è¡¨ç¤ºæœ€å¤§å€¼ start ï¼šå¼€å§‹å€¼ï¼Œ - è¡¨ç¤ºæœ€å°å€¼ count ï¼šæ•°é‡ - XADD writers * name Virginia surname Woolf - XLEN writers - XREVRANGE writers + - COUNT 1 XREAD ä½¿ç”¨ XREAD ä»¥é˜»å¡æˆ–éé˜»å¡æ–¹å¼è·å–æ¶ˆæ¯åˆ—è¡¨ ï¼Œè¯­æ³•æ ¼å¼ï¼š XREAD [COUNT count] [BLOCK milliseconds] STREAMS key [key ...] id [id ...] count ï¼šæ•°é‡ milliseconds ï¼šå¯é€‰ï¼Œé˜»å¡æ¯«ç§’æ•°ï¼Œæ²¡æœ‰è®¾ç½®å°±æ˜¯éé˜»å¡æ¨¡å¼ key ï¼šé˜Ÿåˆ—å id ï¼šæ¶ˆæ¯ ID - # ä» Stream å¤´éƒ¨è¯»å–ä¸¤æ¡æ¶ˆæ¯ XREAD COUNT 2 STREAMS mystream writers 0-0 0-0 XGROUP CREATE ä½¿ç”¨ XGROUP CREATE åˆ›å»ºæ¶ˆè´¹è€…ç»„ï¼Œè¯­æ³•æ ¼å¼ï¼š XGROUP [CREATE key groupname id-or-$] [SETID key groupname id-or-$] [DESTROY key groupname] [DELCONSUMER key groupname consumername] key ï¼šé˜Ÿåˆ—åç§°ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆ›å»º groupname ï¼šç»„åã€‚ $ ï¼š è¡¨ç¤ºä»å°¾éƒ¨å¼€å§‹æ¶ˆè´¹ï¼Œåªæ¥å—æ–°æ¶ˆæ¯ï¼Œå½“å‰ Stream æ¶ˆæ¯ä¼šå…¨éƒ¨å¿½ç•¥ã€‚ ä»å¤´å¼€å§‹æ¶ˆè´¹: XGROUP CREATE mystream consumer-group-name 0-0 ä»å°¾éƒ¨å¼€å§‹æ¶ˆè´¹: XGROUP CREATE mystream consumer-group-name $ XREADGROUP GROUP ä½¿ç”¨ XREADGROUP GROUP è¯»å–æ¶ˆè´¹ç»„ä¸­çš„æ¶ˆæ¯ï¼Œè¯­æ³•æ ¼å¼ï¼š XREADGROUP GROUP group consumer [COUNT count] [BLOCK milliseconds] [NOACK] STREAMS key [key ...] ID [ID ...] group ï¼šæ¶ˆè´¹ç»„å consumer ï¼šæ¶ˆè´¹è€…åã€‚ count ï¼š è¯»å–æ•°é‡ã€‚ milliseconds ï¼š é˜»å¡æ¯«ç§’æ•°ã€‚ key ï¼š é˜Ÿåˆ—åã€‚ ID ï¼š æ¶ˆæ¯ IDã€‚ XREADGROUP GROUP consumer-group-name consumer-name COUNT 1 STREAMS mystream &gt; Redis é«˜çº§æ•™ç¨‹ Redisä¸»ä»å¤åˆ¶ æ¦‚å¿µ ä¸»ä»å¤åˆ¶ï¼Œæ˜¯æŒ‡å°†ä¸€å°RedisæœåŠ¡å™¨çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„RedisæœåŠ¡å™¨ã€‚å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹ (master/leader)ï¼Œåè€…ç§°ä¸ºä»èŠ‚ç‚¹(slave/follower)ï¼›æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ã€‚ Masterä»¥å†™ä¸ºä¸»ï¼ŒSlave ä»¥è¯»ä¸ºä¸»ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼› ä¸”ä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªä»èŠ‚ç‚¹(æˆ–æ²¡æœ‰ä»èŠ‚ç‚¹)ï¼Œä½†ä¸€ä¸ªä»èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚ ä¸»ä»å¤åˆ¶çš„ä½œç”¨ï¼š 1ã€æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚ 2ã€æ•…éšœæ¢å¤ï¼šå½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤ï¼›å®é™…ä¸Šæ˜¯ä¸€ç§æœåŠ¡ çš„å†—ä½™ã€‚ 3ã€è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥ç”±ä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡ï¼Œç”±ä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡ ï¼ˆå³å†™Redisæ•°æ®æ—¶åº”ç”¨è¿æ¥ä¸»èŠ‚ç‚¹ï¼Œè¯»Redisæ•°æ®æ—¶åº”ç”¨è¿æ¥ä»èŠ‚ç‚¹ï¼‰ï¼Œåˆ†æ‹…æœåŠ¡å™¨è´Ÿè½½ï¼›å°¤å…¶æ˜¯åœ¨å†™ å°‘è¯»å¤šçš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è¯»è´Ÿè½½ï¼Œå¯ä»¥å¤§å¤§æé«˜RedisæœåŠ¡å™¨çš„å¹¶å‘é‡ã€‚ 4ã€é«˜å¯ç”¨ï¼ˆé›†ç¾¤ï¼‰åŸºçŸ³ï¼šé™¤äº†ä¸Šè¿°ä½œç”¨ä»¥å¤–ï¼Œä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ï¼Œå› æ­¤è¯´ä¸»ä»å¤åˆ¶æ˜¯Redisé«˜å¯ç”¨çš„åŸºç¡€ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œè¦å°†Redisè¿ç”¨äºå·¥ç¨‹é¡¹ç›®ä¸­ï¼Œåªä½¿ç”¨ä¸€å°Redisæ˜¯ä¸‡ä¸‡ä¸èƒ½çš„ï¼ˆå®•æœºï¼‰ï¼ŒåŸå› å¦‚ä¸‹ï¼š 1ã€ä»ç»“æ„ä¸Šï¼Œå•ä¸ªRedisæœåŠ¡å™¨ä¼šå‘ç”Ÿå•ç‚¹æ•…éšœï¼Œå¹¶ä¸”ä¸€å°æœåŠ¡å™¨éœ€è¦å¤„ç†æ‰€æœ‰çš„è¯·æ±‚è´Ÿè½½ï¼Œå‹åŠ›è¾ƒå¤§ï¼› 2ã€ä»å®¹é‡ä¸Šï¼Œå•ä¸ªRedisæœåŠ¡å™¨å†…å­˜å®¹é‡æœ‰é™ï¼Œå°±ç®—ä¸€å°RedisæœåŠ¡å™¨å†…å­˜å®¹é‡ä¸º256Gï¼Œä¹Ÿä¸èƒ½å°†æ‰€æœ‰ å†…å­˜ç”¨ä½œRediså­˜å‚¨å†…å­˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå•å°Redisæœ€å¤§ä½¿ç”¨å†…å­˜ä¸åº”è¯¥è¶…è¿‡20Gã€‚ ç”µå•†ç½‘ç«™ä¸Šçš„å•†å“ï¼Œä¸€èˆ¬éƒ½æ˜¯ä¸€æ¬¡ä¸Šä¼ ï¼Œæ— æ•°æ¬¡æµè§ˆçš„ï¼Œè¯´ä¸“ä¸šç‚¹ä¹Ÿå°±æ˜¯&quot;å¤šè¯»å°‘å†™&quot;ã€‚ å¯¹äºè¿™ç§åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿å¦‚ä¸‹è¿™ç§æ¶æ„ï¼š ä¸»ä»å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»ï¼ 80% çš„æƒ…å†µä¸‹éƒ½æ˜¯åœ¨è¿›è¡Œè¯»æ“ä½œï¼å‡ç¼“æœåŠ¡å™¨çš„å‹åŠ›ï¼æ¶æ„ä¸­ç»å¸¸ä½¿ç”¨ï¼ ä¸€ä¸»äºŒä»ï¼ åªè¦åœ¨å…¬å¸ä¸­ï¼Œä¸»ä»å¤åˆ¶å°±æ˜¯å¿…é¡»è¦ä½¿ç”¨çš„ï¼Œå› ä¸ºåœ¨çœŸå®çš„é¡¹ç›®ä¸­ä¸å¯èƒ½å•æœºä½¿ç”¨Redisï¼ ç¯å¢ƒé…ç½® åªé…ç½®ä»åº“ï¼Œä¸ç”¨é…ç½®ä¸»åº“ï¼ 123456789101112127.0.0.1:6379&gt; info replication # æŸ¥çœ‹å½“å‰åº“çš„ä¿¡æ¯# Replicationrole:master # è§’è‰² masterconnected_slaves:0 # æ²¡æœ‰ä»æœºmaster_replid:b63c90e6c501143759cb0e7f450bd1eb0c70882amaster_replid2:0000000000000000000000000000000000000000master_repl_offset:0second_repl_offset:-1repl_backlog_active:0repl_backlog_size:1048576repl_backlog_first_byte_offset:0repl_backlog_histlen:0 å¤åˆ¶3ä¸ªé…ç½®æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„ä¿¡æ¯ 1ã€ç«¯å£ 2ã€pid åå­— 3ã€logæ–‡ä»¶åå­— 4ã€dump.rdb åå­— ä¿®æ”¹å®Œæ¯•ä¹‹åï¼Œå¯åŠ¨æˆ‘ä»¬çš„3ä¸ªredisæœåŠ¡å™¨ï¼Œå¯ä»¥é€šè¿‡è¿›ç¨‹ä¿¡æ¯æŸ¥çœ‹ï¼ ä¸€ä¸»äºŒä» SLAVEOF 127.0.0.1 6379 # SLAVEOF host 6379 æ‰¾è°å½“è‡ªå·±çš„è€å¤§ï¼ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼› æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹åªç”¨é…ç½®ä»æœºå°±å¥½äº†ï¼è®¤è€å¤§ï¼ ä¸€ä¸» ï¼ˆ79ï¼‰äºŒä»ï¼ˆ80ï¼Œ81ï¼‰127.0.0.1:6379&gt; info replication # æŸ¥çœ‹å½“å‰åº“çš„ä¿¡æ¯# Replicationrole:master # è§’è‰² masterconnected_slaves:0 # æ²¡æœ‰ä»æœºmaster_replid:b63c90e6c501143759cb0e7f450bd1eb0c70882amaster_replid2:0000000000000000000000000000000000000000master_repl_offset:0second_repl_offset:-1repl_backlog_active:0repl_backlog_size:1048576repl_backlog_first_byte_offset:0repl_backlog_histlen:0127.0.0.1:6380&gt; SLAVEOF 127.0.0.1 6379 # SLAVEOF host 6379 æ‰¾è°å½“è‡ªå·±çš„è€å¤§ï¼OK127.0.0.1:6380&gt; info replication# Replicationrole:slave # å½“å‰è§’è‰²æ˜¯ä»æœºmaster_host:127.0.0.1 # å¯ä»¥çš„çœ‹åˆ°ä¸»æœºçš„ä¿¡æ¯master_port:6379master_link_status:upmaster_last_io_seconds_ago:3master_sync_in_progress:0slave_repl_offset:14slave_priority:100slave_read_only:1connected_slaves:0master_replid:a81be8dd257636b2d3e7a9f595e69d73ff03774emaster_replid2:0000000000000000000000000000000000000000master_repl_offset:14second_repl_offset:-1repl_backlog_active:1repl_backlog_size:1048576repl_backlog_first_byte_offset:1repl_backlog_histlen:14# åœ¨ä¸»æœºä¸­æŸ¥çœ‹ï¼127.0.0.1:6379&gt; info replication# Replicationrole:masterconnected_slaves:1 # å¤šäº†ä»æœºçš„é…ç½®slave0:ip=127.0.0.1,port=6380,state=online,offset=42,lag=1 # å¤šäº†ä»æœºçš„é…ç½®master_replid:a81be8dd257636b2d3e7a9f595e69d73ff03774emaster_replid2:0000000000000000000000000000000000000000master_repl_offset:42second_repl_offset:-1repl_backlog_active:1repl_backlog_size:1048576repl_backlog_first_byte_offset:1repl_backlog_histlen:42å¦‚æœä¸¤ä¸ªéƒ½é…ç½®å®Œäº†ï¼Œå°±æ˜¯æœ‰ä¸¤ä¸ªä»æœºçš„çœŸå®çš„ä»ä¸»é…ç½®åº”è¯¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œè¿™æ ·çš„è¯æ˜¯æ°¸ä¹…çš„ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯å‘½ä»¤ï¼Œæš‚æ—¶çš„ï¼ ç»†èŠ‚ ä¸»æœºå¯ä»¥å†™ï¼Œä»æœºä¸èƒ½å†™åªèƒ½è¯»ï¼ä¸»æœºä¸­çš„æ‰€æœ‰ä¿¡æ¯å’Œæ•°æ®ï¼Œéƒ½ä¼šè‡ªåŠ¨è¢«ä»æœºä¿å­˜ï¼ æµ‹è¯•ï¼šä¸»æœºæ–­å¼€è¿æ¥ï¼Œä»æœºä¾æ—§è¿æ¥åˆ°ä¸»æœºçš„ï¼Œä½†æ˜¯æ²¡æœ‰å†™æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä¸»æœºå¦‚æœå›æ¥äº†ï¼Œä»æœºä¾æ—§å¯ä»¥ç›´æ¥è·å–åˆ°ä¸»æœºå†™çš„ä¿¡æ¯ï¼ å¦‚æœæ˜¯ä½¿ç”¨å‘½ä»¤è¡Œï¼Œæ¥é…ç½®çš„ä¸»ä»ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœé‡å¯äº†ï¼Œå°±ä¼šå˜å›ä¸»æœºï¼åªè¦å˜ä¸ºä»æœºï¼Œç«‹é©¬å°±ä¼šä»ä¸»æœºä¸­è·å–å€¼ï¼ å¤åˆ¶åŸç† Slave å¯åŠ¨æˆåŠŸè¿æ¥åˆ° master åä¼šå‘é€ä¸€ä¸ªsyncåŒæ­¥å‘½ä»¤ Master æ¥åˆ°å‘½ä»¤ï¼Œå¯åŠ¨åå°çš„å­˜ç›˜è¿›ç¨‹ï¼ŒåŒæ—¶æ”¶é›†æ‰€æœ‰æ¥æ”¶åˆ°çš„ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤ï¼Œåœ¨åå°è¿›ç¨‹æ‰§è¡Œ å®Œæ¯•ä¹‹åï¼Œmasterå°†ä¼ é€æ•´ä¸ªæ•°æ®æ–‡ä»¶åˆ°slaveï¼Œå¹¶å®Œæˆä¸€æ¬¡å®Œå…¨åŒæ­¥ã€‚ å…¨é‡å¤åˆ¶ï¼šè€ŒslaveæœåŠ¡åœ¨æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ å¢é‡å¤åˆ¶ï¼šMaster ç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¾æ¬¡ä¼ ç»™slaveï¼Œå®ŒæˆåŒæ­¥ ä½†æ˜¯åªè¦æ˜¯é‡æ–°è¿æ¥masterï¼Œä¸€æ¬¡å®Œå…¨åŒæ­¥ï¼ˆå…¨é‡å¤åˆ¶ï¼‰å°†è¢«è‡ªåŠ¨æ‰§è¡Œï¼ æˆ‘ä»¬çš„æ•°æ®ä¸€å®šå¯ä»¥åœ¨ä»æœºä¸­ çœ‹åˆ°ï¼ å±‚å±‚é“¾è·¯ ä¸Šä¸€ä¸ªMé“¾æ¥ä¸‹ä¸€ä¸ª Sï¼è¿™æ—¶å€™ä¹Ÿå¯ä»¥å®Œæˆæˆ‘ä»¬çš„ä¸»ä»å¤åˆ¶ï¼å¦‚æœæ²¡æœ‰è€å¤§äº†ï¼Œè¿™ä¸ªæ—¶å€™èƒ½ä¸èƒ½é€‰æ‹©ä¸€ä¸ªè€å¤§å‡ºæ¥å‘¢ï¼Ÿ æ‰‹åŠ¨ï¼è°‹æœç¯¡ä½ å¦‚æœä¸»æœºæ–­å¼€äº†è¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ SLAVEOF no one è®©è‡ªå·±å˜æˆä¸»æœºï¼å…¶ä»–çš„èŠ‚ç‚¹å°±å¯ä»¥æ‰‹åŠ¨è¿ æ¥åˆ°æœ€æ–°çš„è¿™ä¸ªä¸»èŠ‚ç‚¹ï¼ˆæ‰‹åŠ¨ï¼‰ï¼å¦‚æœè¿™ä¸ªæ—¶å€™è€å¤§ä¿®å¤äº†ï¼Œé‚£å°±é‡æ–°è¿æ¥ï¼ å“¨å…µæ¨¡å¼ æ¦‚è¿° ï¼ˆè‡ªåŠ¨é€‰ä¸¾è€å¤§çš„æ¨¡å¼ï¼‰ ä¸»ä»åˆ‡æ¢æŠ€æœ¯çš„æ–¹æ³•æ˜¯ï¼šå½“ä¸»æœåŠ¡å™¨å®•æœºåï¼Œéœ€è¦æ‰‹åŠ¨æŠŠä¸€å°ä»æœåŠ¡å™¨åˆ‡æ¢ä¸ºä¸»æœåŠ¡å™¨ï¼Œè¿™å°±éœ€è¦äººå·¥å¹²é¢„ï¼Œè´¹äº‹è´¹åŠ›ï¼Œè¿˜ä¼šé€ æˆä¸€æ®µæ—¶é—´å†…æœåŠ¡ä¸å¯ç”¨ã€‚è¿™ä¸æ˜¯ä¸€ç§æ¨èçš„æ–¹å¼ï¼Œæ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼˜å…ˆè€ƒè™‘ å“¨å…µæ¨¡å¼ã€‚Redisä»2.8å¼€å§‹æ­£å¼æä¾›äº†Sentinelï¼ˆå“¨å…µï¼‰ æ¶æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ è°‹æœç¯¡ä½çš„è‡ªåŠ¨ç‰ˆï¼Œèƒ½å¤Ÿåå°ç›‘æ§ä¸»æœºæ˜¯å¦æ•…éšœï¼Œå¦‚æœæ•…éšœäº†æ ¹æ®æŠ•ç¥¨æ•°è‡ªåŠ¨å°†ä»åº“è½¬æ¢ä¸ºä¸»åº“ã€‚ å“¨å…µæ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¨¡å¼ï¼Œé¦–å…ˆRedisæä¾›äº†å“¨å…µçš„å‘½ä»¤ï¼Œå“¨å…µæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œä½œä¸ºè¿›ç¨‹ï¼Œå®ƒä¼šç‹¬ ç«‹è¿è¡Œã€‚å…¶åŸç†æ˜¯å“¨å…µé€šè¿‡å‘é€å‘½ä»¤ï¼Œç­‰å¾…RedisæœåŠ¡å™¨å“åº”ï¼Œä»è€Œç›‘æ§è¿è¡Œçš„å¤šä¸ªRediså®ä¾‹ã€‚ è¿™é‡Œçš„å“¨å…µæœ‰ä¸¤ä¸ªä½œç”¨ é€šè¿‡å‘é€å‘½ä»¤ï¼Œè®©RedisæœåŠ¡å™¨è¿”å›ç›‘æ§å…¶è¿è¡ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨ã€‚ å½“å“¨å…µç›‘æµ‹åˆ°masterå®•æœºï¼Œä¼šè‡ªåŠ¨å°†slaveåˆ‡æ¢æˆmasterï¼Œç„¶åé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼é€šçŸ¥å…¶ä»–çš„ä»æœ åŠ¡å™¨ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè®©å®ƒä»¬åˆ‡æ¢ä¸»æœºã€‚ ç„¶è€Œä¸€ä¸ªå“¨å…µè¿›ç¨‹å¯¹RedisæœåŠ¡å™¨è¿›è¡Œç›‘æ§ï¼Œå¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªå“¨å…µè¿›è¡Œç›‘æ§ã€‚ å„ä¸ªå“¨å…µä¹‹é—´è¿˜ä¼šè¿›è¡Œç›‘æ§ï¼Œè¿™æ ·å°±å½¢æˆäº†å¤šå“¨å…µæ¨¡å¼ã€‚ å‡è®¾ä¸»æœåŠ¡å™¨å®•æœºï¼Œå“¨å…µ1å…ˆæ£€æµ‹åˆ°è¿™ä¸ªç»“æœï¼Œç³»ç»Ÿå¹¶ä¸ä¼šé©¬ä¸Šè¿›è¡Œfailoverè¿‡ç¨‹ï¼Œä»…ä»…æ˜¯å“¨å…µ1ä¸»è§‚çš„è®¤ ä¸ºä¸»æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œè¿™ä¸ªç°è±¡æˆä¸ºä¸»è§‚ä¸‹çº¿ã€‚å½“åé¢çš„å“¨å…µä¹Ÿæ£€æµ‹åˆ°ä¸»æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œå¹¶ä¸”æ•°é‡è¾¾åˆ°ä¸€ å®šå€¼æ—¶ï¼Œé‚£ä¹ˆå“¨å…µä¹‹é—´å°±ä¼šè¿›è¡Œä¸€æ¬¡æŠ•ç¥¨ï¼ŒæŠ•ç¥¨çš„ç»“æœç”±ä¸€ä¸ªå“¨å…µå‘èµ·ï¼Œè¿›è¡Œfailover[æ•…éšœè½¬ç§»]æ“ä½œã€‚ åˆ‡æ¢æˆåŠŸåï¼Œå°±ä¼šé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè®©å„ä¸ªå“¨å…µæŠŠè‡ªå·±ç›‘æ§çš„ä»æœåŠ¡å™¨å®ç°åˆ‡æ¢ä¸»æœºï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º å®¢è§‚ä¸‹çº¿ã€‚ æµ‹è¯• æˆ‘ä»¬ç›®å‰çš„çŠ¶æ€æ˜¯ ä¸€ä¸»äºŒä»ï¼ 1ã€é…ç½®å“¨å…µé…ç½®æ–‡ä»¶ sentinel.conf 12# sentinel monitor è¢«ç›‘æ§çš„åç§° host port 1sentinel monitor myredis 127.0.0.1 6379 1 åé¢çš„è¿™ä¸ªæ•°å­—1ï¼Œä»£è¡¨ä¸»æœºæŒ‚äº†ï¼ŒslaveæŠ•ç¥¨çœ‹è®©è°æ¥æ›¿æˆä¸ºä¸»æœºï¼Œç¥¨æ•°æœ€å¤šçš„ï¼Œå°±ä¼šæˆä¸ºä¸»æœºï¼ 2ã€å¯åŠ¨å“¨å…µï¼ 123456789101112131415161718192021222324252627282930313233[root@xiaobai bin]# redis-sentinel kconfig/sentinel.conf26607:X 31 Mar 2020 21:13:10.027 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo26607:X 31 Mar 2020 21:13:10.027 # Redis version=5.0.8, bits=64,commit=00000000, modified=0, pid=26607, just started26607:X 31 Mar 2020 21:13:10.027 # Configuration loaded_.__.-``__ ''-.__.-`` `. `_. ''-._ Redis 5.0.8 (00000000/0) 64 bit.-`` .-```. ```\\/ _.,_ ''-._( ' , .-` | `, ) Running in sentinel mode|`-._`-...-` __...-.``-._|'` _.-'| Port: 26379| `-._ `._ / _.-' | PID: 26607`-._ `-._ `-./ _.-' _.-'|`-._`-._ `-.__.-' _.-'_.-'|| `-._`-._ _.-'_.-' | http://redis.io`-._ `-._`-.__.-'_.-' _.-'|`-._`-._ `-.__.-' _.-'_.-'|| `-._`-._ _.-'_.-' |`-._ `-._`-.__.-'_.-' _.-'`-._ `-.__.-' _.-'`-._ _.-'`-.__.-'26607:X 31 Mar 2020 21:13:10.029 # WARNING: The TCP backlog setting of 511cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower valueof 128.26607:X 31 Mar 2020 21:13:10.031 # Sentinel ID is4c780da7e22d2aebe3bc20c333746f202ce7299626607:X 31 Mar 2020 21:13:10.031 # +monitor master myredis 127.0.0.1 6379 quorum126607:X 31 Mar 2020 21:13:10.031 * +slave slave 127.0.0.1:6380 127.0.0.1 6380 @myredis 127.0.0.1 637926607:X 31 Mar 2020 21:13:10.033 * +slave slave 127.0.0.1:6381 127.0.0.1 6381 @myredis 127.0.0.1 6379 å¦‚æœMaster èŠ‚ç‚¹æ–­å¼€äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šä»ä»æœºä¸­éšæœºé€‰æ‹©ä¸€ä¸ªæœåŠ¡å™¨ï¼ ï¼ˆè¿™é‡Œé¢æœ‰ä¸€ä¸ªæŠ•ç¥¨ç®—æ³•ï¼ï¼‰ å“¨å…µæ¨¡å¼ ä¼˜ç‚¹ï¼š 1ã€å“¨å…µé›†ç¾¤ï¼ŒåŸºäºä¸»ä»å¤åˆ¶æ¨¡å¼ï¼Œæ‰€æœ‰çš„ä¸»ä»é…ç½®ä¼˜ç‚¹ï¼Œå®ƒå…¨æœ‰ 2ã€ ä¸»ä»å¯ä»¥åˆ‡æ¢ï¼Œæ•…éšœå¯ä»¥è½¬ç§»ï¼Œç³»ç»Ÿçš„å¯ç”¨æ€§å°±ä¼šæ›´å¥½ 3ã€å“¨å…µæ¨¡å¼å°±æ˜¯ä¸»ä»æ¨¡å¼çš„å‡çº§ï¼Œæ‰‹åŠ¨åˆ°è‡ªåŠ¨ï¼Œæ›´åŠ å¥å£®ï¼ ç¼ºç‚¹ï¼š 1ã€Redis ä¸å¥½å•Šåœ¨çº¿æ‰©å®¹çš„ï¼Œé›†ç¾¤å®¹é‡ä¸€æ—¦åˆ°è¾¾ä¸Šé™ï¼Œåœ¨çº¿æ‰©å®¹å°±ååˆ†éº»çƒ¦ï¼ 2ã€å®ç°å“¨å…µæ¨¡å¼çš„é…ç½®å…¶å®æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œé‡Œé¢æœ‰å¾ˆå¤šé€‰æ‹©ï¼ å“¨å…µæ¨¡å¼çš„å…¨éƒ¨é…ç½®ï¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465# Example sentinel.conf# å“¨å…µsentinelå®ä¾‹è¿è¡Œçš„ç«¯å£ é»˜è®¤26379port 26379# å“¨å…µsentinelçš„å·¥ä½œç›®å½•dir /tmp# å“¨å…µsentinelç›‘æ§çš„redisä¸»èŠ‚ç‚¹çš„ ip port# master-name å¯ä»¥è‡ªå·±å‘½åçš„ä¸»èŠ‚ç‚¹åå­— åªèƒ½ç”±å­—æ¯A-zã€æ•°å­—0-9 ã€è¿™ä¸‰ä¸ªå­—ç¬¦&quot;.-_&quot;ç»„æˆã€‚# quorum é…ç½®å¤šå°‘ä¸ªsentinelå“¨å…µç»Ÿä¸€è®¤ä¸ºmasterä¸»èŠ‚ç‚¹å¤±è” é‚£ä¹ˆè¿™æ—¶å®¢è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹å¤±è”äº†# sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;sentinel monitor mymaster 127.0.0.1 6379 2# å½“åœ¨Rediså®ä¾‹ä¸­å¼€å¯äº†requirepass foobared æˆæƒå¯†ç  è¿™æ ·æ‰€æœ‰è¿æ¥Rediså®ä¾‹çš„å®¢æˆ·ç«¯éƒ½è¦æä¾›å¯†ç # è®¾ç½®å“¨å…µsentinel è¿æ¥ä¸»ä»çš„å¯†ç  æ³¨æ„å¿…é¡»ä¸ºä¸»ä»è®¾ç½®ä¸€æ ·çš„éªŒè¯å¯†ç # sentinel auth-pass &lt;master-name&gt; &lt;password&gt;sentinel auth-pass mymaster MySUPER--secret-0123passw0rd# æŒ‡å®šå¤šå°‘æ¯«ç§’ä¹‹å ä¸»èŠ‚ç‚¹æ²¡æœ‰åº”ç­”å“¨å…µsentinel æ­¤æ—¶ å“¨å…µä¸»è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸‹çº¿ é»˜è®¤30ç§’# sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;sentinel down-after-milliseconds mymaster 30000# è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†åœ¨å‘ç”Ÿfailoverä¸»å¤‡åˆ‡æ¢æ—¶æœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªslaveåŒæ—¶å¯¹æ–°çš„masterè¿›è¡Œ åŒæ­¥ï¼Œè¿™ä¸ªæ•°å­—è¶Šå°ï¼Œå®Œæˆfailoveræ‰€éœ€çš„æ—¶é—´å°±è¶Šé•¿ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ•°å­—è¶Šå¤§ï¼Œå°±æ„å‘³ç€è¶Š å¤šçš„slaveå› ä¸ºreplicationè€Œä¸å¯ç”¨ã€‚å¯ä»¥é€šè¿‡å°†è¿™ä¸ªå€¼è®¾ä¸º 1 æ¥ä¿è¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªslave å¤„äºä¸èƒ½å¤„ç†å‘½ä»¤è¯·æ±‚çš„çŠ¶æ€ã€‚# sentinel parallel-syncs &lt;master-name&gt; &lt;numslaves&gt;sentinel parallel-syncs mymaster 1# æ•…éšœè½¬ç§»çš„è¶…æ—¶æ—¶é—´ failover-timeout å¯ä»¥ç”¨åœ¨ä»¥ä¸‹è¿™äº›æ–¹é¢ï¼š#1. åŒä¸€ä¸ªsentinelå¯¹åŒä¸€ä¸ªmasterä¸¤æ¬¡failoverä¹‹é—´çš„é—´éš”æ—¶é—´ã€‚#2. å½“ä¸€ä¸ªslaveä»ä¸€ä¸ªé”™è¯¯çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®å¼€å§‹è®¡ç®—æ—¶é—´ã€‚ç›´åˆ°slaveè¢«çº æ­£ä¸ºå‘æ­£ç¡®çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®æ—¶ã€‚#3.å½“æƒ³è¦å–æ¶ˆä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„failoveræ‰€éœ€è¦çš„æ—¶é—´ã€‚#4.å½“è¿›è¡Œfailoveræ—¶ï¼Œé…ç½®æ‰€æœ‰slavesæŒ‡å‘æ–°çš„masteræ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚ä¸è¿‡ï¼Œå³ä½¿è¿‡äº†è¿™ä¸ªè¶…æ—¶ï¼Œslavesä¾ç„¶ä¼šè¢«æ­£ç¡®é…ç½®ä¸ºæŒ‡å‘masterï¼Œä½†æ˜¯å°±ä¸æŒ‰parallel-syncsæ‰€é…ç½®çš„è§„åˆ™æ¥äº†# é»˜è®¤ä¸‰åˆ†é’Ÿ# sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;sentinel failover-timeout mymaster 180000# SCRIPTS EXECUTION#é…ç½®å½“æŸä¸€äº‹ä»¶å‘ç”Ÿæ—¶æ‰€éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬æ¥é€šçŸ¥ç®¡ç†å‘˜ï¼Œä¾‹å¦‚å½“ç³»ç»Ÿè¿è¡Œä¸æ­£å¸¸æ—¶å‘é‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜ã€‚#å¯¹äºè„šæœ¬çš„è¿è¡Œç»“æœæœ‰ä»¥ä¸‹è§„åˆ™ï¼š#è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›1ï¼Œé‚£ä¹ˆè¯¥è„šæœ¬ç¨åå°†ä¼šè¢«å†æ¬¡æ‰§è¡Œï¼Œé‡å¤æ¬¡æ•°ç›®å‰é»˜è®¤ä¸º10#è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›2ï¼Œæˆ–è€…æ¯”2æ›´é«˜çš„ä¸€ä¸ªè¿”å›å€¼ï¼Œè„šæœ¬å°†ä¸ä¼šé‡å¤æ‰§è¡Œã€‚#å¦‚æœè„šæœ¬åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç”±äºæ”¶åˆ°ç³»ç»Ÿä¸­æ–­ä¿¡å·è¢«ç»ˆæ­¢äº†ï¼Œåˆ™åŒè¿”å›å€¼ä¸º1æ—¶çš„è¡Œä¸ºç›¸åŒã€‚#ä¸€ä¸ªè„šæœ¬çš„æœ€å¤§æ‰§è¡Œæ—¶é—´ä¸º60sï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œè„šæœ¬å°†ä¼šè¢«ä¸€ä¸ªSIGKILLä¿¡å·ç»ˆæ­¢ï¼Œä¹‹åé‡æ–°æ‰§è¡Œã€‚#é€šçŸ¥å‹è„šæœ¬:å½“sentinelæœ‰ä»»ä½•è­¦å‘Šçº§åˆ«çš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆæ¯”å¦‚è¯´rediså®ä¾‹çš„ä¸»è§‚å¤±æ•ˆå’Œå®¢è§‚å¤±æ•ˆç­‰ç­‰ï¼‰ï¼Œå°†ä¼šå»è°ƒç”¨è¿™ä¸ªè„šæœ¬ï¼Œè¿™æ—¶è¿™ä¸ªè„šæœ¬åº”è¯¥é€šè¿‡é‚®ä»¶ï¼ŒSMSç­‰æ–¹å¼å»é€šçŸ¥ç³»ç»Ÿç®¡ç†å‘˜å…³äºç³»ç»Ÿä¸æ­£å¸¸è¿è¡Œçš„ä¿¡æ¯ã€‚è°ƒç”¨è¯¥è„šæœ¬æ—¶ï¼Œå°†ä¼ ç»™è„šæœ¬ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯äº‹ä»¶çš„ç±»å‹ï¼Œä¸€ä¸ªæ˜¯äº‹ä»¶çš„æè¿°ã€‚å¦‚æœsentinel.confé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†è¿™ä¸ªè„šæœ¬è·¯å¾„ï¼Œé‚£ä¹ˆå¿…é¡»ä¿è¯è¿™ä¸ªè„šæœ¬å­˜åœ¨äºè¿™ä¸ªè·¯å¾„ï¼Œå¹¶ä¸”æ˜¯å¯æ‰§è¡Œçš„ï¼Œå¦åˆ™sentinelæ— æ³•æ­£å¸¸å¯åŠ¨æˆåŠŸã€‚#é€šçŸ¥è„šæœ¬# shellç¼–ç¨‹# sentinel notification-script &lt;master-name&gt; &lt;script-path&gt;sentinel notification-script mymaster /var/redis/notify.sh# å®¢æˆ·ç«¯é‡æ–°é…ç½®ä¸»èŠ‚ç‚¹å‚æ•°è„šæœ¬# å½“ä¸€ä¸ªmasterç”±äºfailoverè€Œå‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿™ä¸ªè„šæœ¬å°†ä¼šè¢«è°ƒç”¨ï¼Œé€šçŸ¥ç›¸å…³çš„å®¢æˆ·ç«¯å…³äºmasteråœ°å€å·²ç»å‘ç”Ÿæ”¹å˜çš„ä¿¡æ¯ã€‚# ä»¥ä¸‹å‚æ•°å°†ä¼šåœ¨è°ƒç”¨è„šæœ¬æ—¶ä¼ ç»™è„šæœ¬:# &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;# ç›®å‰&lt;state&gt;æ€»æ˜¯â€œfailoverâ€,# &lt;role&gt;æ˜¯â€œleaderâ€æˆ–è€…â€œobserverâ€ä¸­çš„ä¸€ä¸ªã€‚# å‚æ•° from-ip, from-port, to-ip, to-portæ˜¯ç”¨æ¥å’Œæ—§çš„masterå’Œæ–°çš„master(å³æ—§çš„slave)é€šä¿¡çš„# è¿™ä¸ªè„šæœ¬åº”è¯¥æ˜¯é€šç”¨çš„ï¼Œèƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä¸æ˜¯é’ˆå¯¹æ€§çš„ã€‚# sentinel client-reconfig-script &lt;master-name&gt; &lt;script-path&gt;sentinel client-reconfig-script mymaster /var/redis/reconfig.sh # ä¸€èˆ¬éƒ½æ˜¯ç”±è¿ç»´æ¥é…ç½®ï¼ Redisç¼“å­˜ç©¿é€å’Œé›ªå´© æœåŠ¡çš„é«˜å¯ç”¨é—®é¢˜ï¼ åœ¨è¿™é‡Œæˆ‘ä»¬ä¸ä¼šè¯¦ç»†çš„åŒºåˆ†æè§£å†³æ–¹æ¡ˆçš„åº•å±‚ï¼ Redisç¼“å­˜çš„ä½¿ç”¨ï¼Œæå¤§çš„æå‡äº†åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œæ•ˆç‡ï¼Œç‰¹åˆ«æ˜¯æ•°æ®æŸ¥è¯¢æ–¹é¢ã€‚ä½†åŒæ—¶ï¼Œå®ƒä¹Ÿå¸¦æ¥äº†ä¸€ äº›é—®é¢˜ã€‚å…¶ä¸­ï¼Œæœ€è¦å®³çš„é—®é¢˜ï¼Œå°±æ˜¯æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä»ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼Œè¿™ä¸ªé—®é¢˜æ— è§£ã€‚å¦‚æœå¯¹æ•°æ® çš„ä¸€è‡´æ€§è¦æ±‚å¾ˆé«˜ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä½¿ç”¨ç¼“å­˜ã€‚ å¦å¤–çš„ä¸€äº›å…¸å‹é—®é¢˜å°±æ˜¯ï¼Œç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©å’Œç¼“å­˜å‡»ç©¿ã€‚ç›®å‰ï¼Œä¸šç•Œä¹Ÿéƒ½æœ‰æ¯”è¾ƒæµè¡Œçš„è§£å†³æ–¹æ¡ˆã€‚ ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰ æ¦‚å¿µ **ã€æŸ¥ä¸åˆ°çš„æ•°æ®å»æŸ¥æ•°æ®åº“ã€‘**ç¼“å­˜ç©¿é€çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œç”¨æˆ·æƒ³è¦æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œå‘ç°rediså†…å­˜æ•°æ®åº“æ²¡æœ‰ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œäºæ˜¯å‘æŒä¹…å±‚æ•°æ®åº“æŸ¥è¯¢ã€‚å‘ç°ä¹Ÿæ²¡æœ‰ï¼Œäºæ˜¯æœ¬æ¬¡æŸ¥è¯¢å¤±è´¥ã€‚å½“ç”¨æˆ·å¾ˆå¤šçš„æ—¶å€™ï¼Œç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­ï¼ˆç§’æ€ï¼‰ï¼Œäºæ˜¯éƒ½å»è¯·æ±‚äº†æŒä¹…å±‚æ•°æ®åº“ã€‚è¿™ä¼šç»™æŒä¹…å±‚æ•°æ®åº“é€ æˆå¾ˆå¤§çš„å‹åŠ›ï¼Œè¿™æ—¶å€™å°±ç›¸å½“äºå‡ºç°äº†ç¼“å­˜ç©¿é€ã€‚ è§£å†³æ–¹æ¡ˆ å¸ƒéš†è¿‡æ»¤å™¨ å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯¹æ‰€æœ‰å¯èƒ½æŸ¥è¯¢çš„å‚æ•°ä»¥hashå½¢å¼å­˜å‚¨ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ ¡éªŒï¼Œä¸ç¬¦åˆåˆ™ä¸¢å¼ƒï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ï¼› ç¼“å­˜ç©ºå¯¹è±¡ å½“å­˜å‚¨å±‚ä¸å‘½ä¸­åï¼Œå³ä½¿è¿”å›çš„ç©ºå¯¹è±¡ä¹Ÿå°†å…¶ç¼“å­˜èµ·æ¥ï¼ŒåŒæ—¶ä¼šè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä¹‹åå†è®¿é—®è¿™ä¸ªæ•° æ®å°†ä¼šä»ç¼“å­˜ä¸­è·å–ï¼Œä¿æŠ¤äº†åç«¯æ•°æ®æºï¼› ä½†æ˜¯è¿™ç§æ–¹æ³•ä¼šå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š 1ã€å¦‚æœç©ºå€¼èƒ½å¤Ÿè¢«ç¼“å­˜èµ·æ¥ï¼Œè¿™å°±æ„å‘³ç€ç¼“å­˜éœ€è¦æ›´å¤šçš„ç©ºé—´å­˜å‚¨æ›´å¤šçš„é”®ï¼Œå› ä¸ºè¿™å½“ä¸­å¯èƒ½ä¼šæœ‰å¾ˆå¤š çš„ç©ºå€¼çš„é”®ï¼› 2ã€å³ä½¿å¯¹ç©ºå€¼è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œè¿˜æ˜¯ä¼šå­˜åœ¨ç¼“å­˜å±‚å’Œå­˜å‚¨å±‚çš„æ•°æ®ä¼šæœ‰ä¸€æ®µæ—¶é—´çª—å£çš„ä¸ä¸€è‡´ï¼Œè¿™å¯¹äºéœ€è¦ä¿æŒä¸€è‡´æ€§çš„ä¸šåŠ¡ä¼šæœ‰å½±å“ã€‚ è§£å†³ï¼š æŸ¥è¯¢å‰å…ˆåšè§„åˆ™æ ¡éªŒï¼Œä¸åˆæ³•çš„æ•°æ®ç›´æ¥æ‹¦æˆªè¿”å› æŸ¥è¯¢æ•°æ®åº“æ²¡æœ‰æ•°æ®ä¹Ÿå†™ä¸€ä¸ª NULL å€¼åˆ°ç¼“å­˜é‡Œé¢å¹¶è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´(ä¸è¦è¶…è¿‡1åˆ†é’Ÿï¼Œé¿å…æ­£å¸¸æƒ…å†µä¸‹ä¹Ÿä¸èƒ½ä½¿ç”¨)ï¼Œä¸‹ä¸€æ¬¡æŸ¥è¯¢åœ¨ç¼“å­˜å¤±æ•ˆå‰å°±èƒ½å‘½ä¸­ç¼“å­˜ç›´æ¥è¿”å› ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œåˆ©ç”¨é«˜æ•ˆçš„æ•°æ®ç»“æ„å’Œç®—æ³•å¿«é€Ÿåˆ¤æ–­å‡ºè¿™ä¸ª Key æ˜¯å¦åœ¨æ•°æ®åº“ä¸­å­˜åœ¨ï¼ˆéœ€è¦æå‰å°†æ•°æ®åº“æ‰€æœ‰æ•°æ®æ”¾å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨çš„é›†åˆä¸Šï¼Œä¸”å¸ƒéš†è¿‡æ»¤å™¨æœ€å¤§ç¼ºç‚¹å°±æ˜¯æ— æ³•åˆ é™¤æ•°æ®ã€‚æ›¿æ¢æ–¹æ¡ˆï¼šå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ï¼‰ ç¼“å­˜å‡»ç©¿ æ¦‚è¿° **ã€è¿‡é¢‘ç¹è®¿é—®çƒ­ç‚¹æ•°æ®ã€‘**è¿™é‡Œéœ€è¦æ³¨æ„å’Œç¼“å­˜å‡»ç©¿çš„åŒºåˆ«ï¼Œç¼“å­˜å‡»ç©¿ï¼Œæ˜¯æŒ‡ä¸€ä¸ªkeyéå¸¸çƒ­ç‚¹ï¼Œåœ¨ä¸åœçš„æ‰›ç€å¤§å¹¶å‘ï¼Œå¤§å¹¶å‘é›†ä¸­ å¯¹è¿™ä¸€ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼Œå½“è¿™ä¸ªkeyåœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒæŒç»­çš„å¤§å¹¶å‘å°±ç©¿ç ´ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒåœ¨ä¸€ ä¸ªå±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ã€‚ å½“æŸä¸ªkeyåœ¨è¿‡æœŸçš„ç¬é—´ï¼Œæœ‰å¤§é‡çš„è¯·æ±‚å¹¶å‘è®¿é—®ï¼Œè¿™ç±»æ•°æ®ä¸€èˆ¬æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œç”±äºç¼“å­˜è¿‡æœŸï¼Œä¼šåŒæ—¶è®¿ é—®æ•°æ®åº“æ¥æŸ¥è¯¢æœ€æ–°æ•°æ®ï¼Œå¹¶ä¸”å›å†™ç¼“å­˜ï¼Œä¼šå¯¼ä½¿æ•°æ®åº“ç¬é—´å‹åŠ›è¿‡å¤§ã€‚ è§£å†³æ–¹æ¡ˆ è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ ä»ç¼“å­˜å±‚é¢æ¥çœ‹ï¼Œæ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°çƒ­ç‚¹ key è¿‡æœŸåäº§ç”Ÿçš„é—®é¢˜ã€‚ åŠ äº’æ–¥é” åˆ†å¸ƒå¼é”ï¼šä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œä¿è¯å¯¹äºæ¯ä¸ªkeyåŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢åç«¯æœåŠ¡ï¼Œå…¶ä»–çº¿ç¨‹æ²¡æœ‰è·å¾—åˆ†å¸ƒå¼é”çš„æƒé™ï¼Œå› æ­¤åªéœ€è¦ç­‰å¾…å³å¯ã€‚è¿™ç§æ–¹å¼å°†é«˜å¹¶å‘çš„å‹åŠ›è½¬ç§»åˆ°äº†åˆ†å¸ƒå¼é”ï¼Œå› æ­¤å¯¹åˆ†å¸ƒå¼é”çš„è€ƒéªŒå¾ˆå¤§ã€‚ è§£å†³ï¼š çƒ­ç‚¹æ•°æ®å¯ä»¥è®¾ç½®æ°¸ä¸è¿‡æœŸ å¢åŠ åˆ†å¸ƒå¼é”ï¼Œç­‰å¾…æŠ¢åˆ°é”çš„è¯·æ±‚æ„å»ºå®Œç¼“å­˜åå†é‡Šæ”¾é”ã€‚å…¶ä»–æœªæŠ¢åˆ°é”çš„è¯·æ±‚è¿›è¡Œé˜»å¡ç­‰å¾…ï¼Œè¢«å”¤é†’åé‡æ–°è¯·æ±‚ç¼“å­˜è·å–æ•°æ® ç¼“å­˜é›ªå´© æ¦‚å¿µ **ã€å¤§é‡å¤±æ•ˆã€‘**ç¼“å­˜é›ªå´©ï¼Œæ˜¯æŒ‡åœ¨æŸä¸€ä¸ªæ—¶é—´æ®µï¼Œç¼“å­˜é›†ä¸­è¿‡æœŸå¤±æ•ˆã€‚Redis å®•æœºï¼ äº§ç”Ÿé›ªå´©çš„åŸå› ä¹‹ä¸€ï¼Œæ¯”å¦‚åœ¨å†™æœ¬æ–‡çš„æ—¶å€™ï¼Œé©¬ä¸Šå°±è¦åˆ°åŒåäºŒé›¶ç‚¹ï¼Œå¾ˆå¿«å°±ä¼šè¿æ¥ä¸€æ³¢æŠ¢è´­ï¼Œè¿™æ³¢å•†å“æ—¶é—´æ¯”è¾ƒé›†ä¸­çš„æ”¾å…¥äº†ç¼“å­˜ï¼Œå‡è®¾ç¼“å­˜ä¸€ä¸ªå°æ—¶ã€‚é‚£ä¹ˆåˆ°äº†å‡Œæ™¨ä¸€ç‚¹é’Ÿçš„æ—¶å€™ï¼Œè¿™æ‰¹å•†å“çš„ç¼“å­˜å°±éƒ½è¿‡æœŸäº†ã€‚è€Œå¯¹è¿™æ‰¹å•†å“çš„è®¿é—®æŸ¥è¯¢ï¼Œéƒ½è½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œå¯¹äºæ•°æ®åº“è€Œè¨€ï¼Œå°±ä¼šäº§ç”Ÿå‘¨æœŸæ€§çš„å‹åŠ›æ³¢å³°ã€‚äºæ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šè¾¾åˆ°å­˜å‚¨å±‚ï¼Œå­˜å‚¨å±‚çš„è°ƒç”¨é‡ä¼šæš´å¢ï¼Œé€ æˆå­˜å‚¨å±‚ä¹Ÿä¼šæŒ‚æ‰çš„æƒ…å†µã€‚ å…¶å®é›†ä¸­è¿‡æœŸï¼Œå€’ä¸æ˜¯éå¸¸è‡´å‘½ï¼Œæ¯”è¾ƒè‡´å‘½çš„ç¼“å­˜é›ªå´©ï¼Œæ˜¯ç¼“å­˜æœåŠ¡å™¨æŸä¸ªèŠ‚ç‚¹å®•æœºæˆ–æ–­ç½‘ã€‚å› ä¸ºè‡ªç„¶ å½¢æˆçš„ç¼“å­˜é›ªå´©ï¼Œä¸€å®šæ˜¯åœ¨æŸä¸ªæ—¶é—´æ®µé›†ä¸­åˆ›å»ºç¼“å­˜ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæ•°æ®åº“ä¹Ÿæ˜¯å¯ä»¥é¡¶ä½å‹åŠ›çš„ã€‚æ— éå°± æ˜¯å¯¹æ•°æ®åº“äº§ç”Ÿå‘¨æœŸæ€§çš„å‹åŠ›è€Œå·²ã€‚è€Œç¼“å­˜æœåŠ¡èŠ‚ç‚¹çš„å®•æœºï¼Œå¯¹æ•°æ®åº“æœåŠ¡å™¨é€ æˆçš„å‹åŠ›æ˜¯ä¸å¯é¢„çŸ¥ çš„ï¼Œå¾ˆæœ‰å¯èƒ½ç¬é—´å°±æŠŠæ•°æ®åº“å‹å®ã€‚ è§£å†³æ–¹æ¡ˆ redisé«˜å¯ç”¨ è¿™ä¸ªæ€æƒ³çš„å«ä¹‰æ˜¯ï¼Œæ—¢ç„¶redisæœ‰å¯èƒ½æŒ‚æ‰ï¼Œé‚£æˆ‘å¤šå¢è®¾å‡ å°redisï¼Œè¿™æ ·ä¸€å°æŒ‚æ‰ä¹‹åå…¶ä»–çš„è¿˜å¯ä»¥ç»§ç»­ å·¥ä½œï¼Œå…¶å®å°±æ˜¯æ­å»ºçš„é›†ç¾¤ã€‚ï¼ˆå¼‚åœ°å¤šæ´»ï¼ï¼‰ é™æµé™çº§ï¼ˆåœ¨SpringCloudè®²è§£è¿‡ï¼ï¼‰ è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„æ€æƒ³æ˜¯ï¼Œåœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹ æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚ æ•°æ®é¢„çƒ­ æ•°æ®åŠ çƒ­çš„å«ä¹‰å°±æ˜¯åœ¨æ­£å¼éƒ¨ç½²ä¹‹å‰ï¼Œæˆ‘å…ˆæŠŠå¯èƒ½çš„æ•°æ®å…ˆé¢„å…ˆè®¿é—®ä¸€éï¼Œè¿™æ ·éƒ¨åˆ†å¯èƒ½å¤§é‡è®¿é—®çš„æ•° æ®å°±ä¼šåŠ è½½åˆ°ç¼“å­˜ä¸­ã€‚åœ¨å³å°†å‘ç”Ÿå¤§å¹¶å‘è®¿é—®å‰æ‰‹åŠ¨è§¦å‘åŠ è½½ç¼“å­˜ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®© ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´ç‚¹å°½é‡å‡åŒ€ã€‚ è§£å†³ï¼š è®¾ç½®éšæœºè¿‡æœŸæ—¶é—´ï¼Œé¿å…åŒä¸€æ—¶é—´å¤§é¢ç§¯å¤±æ•ˆ å¦‚æœæ˜¯é›†ç¾¤éƒ¨ç½²ï¼Œå°†çƒ­ç‚¹æ•°æ®å‡åŒ€åˆ†å¸ƒåœ¨ä¸åŒçš„ Redis åº“ä¸Šé¿å…å…¨éƒ¨å¤±æ•ˆ è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸï¼Œæœ‰æ›´æ–°ç¼“å­˜ å¯¹æºæœåŠ¡è®¿é—®è¿›è¡Œé™æµã€èµ„æºéš”ç¦»ï¼ˆç†”æ–­ï¼‰ã€é™çº§ç­‰ å¦‚æœæ˜¯æ—¶ç‚¹æ•°æ®ï¼Œå¯ä»¥è¿›è¡Œé¢„åŠ è½½ã€‚ç­‰æ—¶ç‚¹è¾¾åˆ°åï¼Œè¿›è¡Œåˆ‡æ¢ RedisæŒä¹…åŒ– é¢è¯•å’Œå·¥ä½œï¼ŒæŒä¹…åŒ–éƒ½æ˜¯é‡ç‚¹ï¼ Redis æ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¦‚æœä¸å°†å†…å­˜ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¿å­˜åˆ°ç£ç›˜ï¼Œé‚£ä¹ˆä¸€æ—¦æœåŠ¡å™¨è¿›ç¨‹é€€å‡ºï¼ŒæœåŠ¡å™¨ä¸­ çš„æ•°æ®åº“çŠ¶æ€ä¹Ÿä¼šæ¶ˆå¤±ã€‚æ‰€ä»¥ Redis æä¾›äº†æŒä¹…åŒ–åŠŸèƒ½ï¼ RDB**ï¼ˆRedis DataBaseï¼‰** ä»€ä¹ˆæ˜¯RDB ï¼šåœ¨ä¸»ä»å¤åˆ¶ä¸­ï¼Œrdbå°±æ˜¯å¤‡ç”¨äº†ï¼ä»æœºä¸Šé¢ï¼ åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ï¼Œä¹Ÿå°±æ˜¯è¡Œè¯è®²çš„Snapshotå¿«ç…§ï¼Œå®ƒæ¢å¤æ—¶æ˜¯å°†å¿«ç…§æ–‡ä»¶ç›´æ¥è¯»åˆ°å†…å­˜é‡Œã€‚ Redisä¼šå•ç‹¬åˆ›å»ºï¼ˆforkï¼‰ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…æŒä¹…åŒ–è¿‡ç¨‹ éƒ½ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹æ˜¯ä¸è¿›è¡Œä»»ä½•IOæ“ä½œçš„ã€‚ è¿™å°±ç¡®ä¿äº†æé«˜çš„æ€§èƒ½ã€‚å¦‚æœéœ€è¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®çš„æ¢å¤ï¼Œä¸”å¯¹äºæ•°æ®æ¢å¤çš„å®Œæ•´æ€§ä¸æ˜¯éå¸¸æ•æ„Ÿï¼Œé‚£ RDBæ–¹å¼è¦æ¯”AOFæ–¹å¼æ›´åŠ çš„é«˜æ•ˆã€‚RDBçš„ç¼ºç‚¹æ˜¯æœ€åä¸€æ¬¡æŒä¹…åŒ–åçš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€‚æˆ‘ä»¬é»˜è®¤çš„å°±æ˜¯ RDBï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹è¿™ä¸ªé…ç½®ï¼ æœ‰æ—¶å€™åœ¨ç”Ÿäº§ç¯å¢ƒæˆ‘ä»¬ä¼šå°†è¿™ä¸ªæ–‡ä»¶è¿›è¡Œå¤‡ä»½ï¼ rdbä¿å­˜çš„æ–‡ä»¶æ˜¯dump.rdb éƒ½æ˜¯åœ¨æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ä¸­å¿«ç…§ä¸­è¿›è¡Œé…ç½®çš„ï¼ è§¦å‘æœºåˆ¶ 1ã€saveçš„è§„åˆ™æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨è§¦å‘rdbè§„åˆ™ 2ã€æ‰§è¡Œ flushall å‘½ä»¤ï¼Œä¹Ÿä¼šè§¦å‘æˆ‘ä»¬çš„rdbè§„åˆ™ï¼ 3ã€é€€å‡ºredisï¼Œä¹Ÿä¼šäº§ç”Ÿ rdb æ–‡ä»¶ï¼ å¤‡ä»½å°±è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª dump.rdb å¦‚ä½•æ¢å¤rdbæ–‡ä»¶ 1ã€åªéœ€è¦å°†rdbæ–‡ä»¶æ”¾åœ¨æˆ‘ä»¬rediså¯åŠ¨ç›®å½•å°±å¯ä»¥ï¼Œrediså¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨æ£€æŸ¥dump.rdb æ¢å¤å…¶ä¸­ çš„æ•°æ®ï¼ 2ã€æŸ¥çœ‹éœ€è¦å­˜åœ¨çš„ä½ç½® å‡ ä¹å°±ä»–è‡ªå·±é»˜è®¤çš„é…ç½®å°±å¤Ÿç”¨äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯éœ€è¦å»å­¦ä¹ ï¼ RDBä¼˜ç‚¹ï¼š 1ã€é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤ï¼ 2ã€å¯¹æ•°æ®çš„å®Œæ•´æ€§è¦ä¸é«˜ï¼ RDBç¼ºç‚¹ï¼š 1ã€éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”è¿›ç¨‹æ“ä½œï¼å¦‚æœredisæ„å¤–å®•æœºäº†ï¼Œè¿™ä¸ªæœ€åä¸€æ¬¡ä¿®æ”¹æ•°æ®å°±æ²¡æœ‰çš„äº†ï¼ 2ã€forkè¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šå ç”¨ä¸€å®šçš„å†…å®¹ç©ºé—´ï¼ï¼ AOF**ï¼ˆAppend Only Fileï¼‰** å°†æˆ‘ä»¬çš„æ‰€æœ‰å‘½ä»¤éƒ½è®°å½•ä¸‹æ¥ï¼Œhistoryï¼Œæ¢å¤çš„æ—¶å€™å°±æŠŠè¿™ä¸ªæ–‡ä»¶å…¨éƒ¨åœ¨æ‰§è¡Œä¸€éï¼ æ˜¯ä»€ä¹ˆ 127.0.0.1:6379&gt; config get dir 1) &quot;dir&quot; 2) &quot;/usr/local/bin&quot; # å¦‚æœåœ¨è¿™ä¸ªç›®å½•ä¸‹å­˜åœ¨ dump.rdb æ–‡ä»¶ï¼Œå¯åŠ¨å°±ä¼šè‡ªåŠ¨æ¢å¤å…¶ä¸­çš„æ•°æ® ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™æ“ä½œï¼Œå°†Redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼Œrediså¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ï¼Œæ¢è¨€ä¹‹ï¼Œredisé‡å¯çš„è¯å°±æ ¹æ®æ—¥å¿—æ–‡ä»¶ çš„å†…å®¹å°†å†™æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä»¥å®Œæˆæ•°æ®çš„æ¢å¤å·¥ä½œ Aofä¿å­˜çš„æ˜¯ appendonly.aof æ–‡ä»¶ é»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è¿›è¡Œé…ç½®ï¼æˆ‘ä»¬åªéœ€è¦å°† appendonly æ”¹ä¸ºyeså°±å¼€å¯äº† aofï¼ å†é‡å¯redis å°±å¯ä»¥ç”Ÿæ•ˆäº†ï¼ å¦‚æœè¿™ä¸ª aof æ–‡ä»¶æœ‰é”™ä½ï¼Œè¿™æ—¶å€™ redis æ˜¯å¯åŠ¨ä¸èµ·æ¥çš„å—ï¼Œæˆ‘ä»¬éœ€è¦ä¿®å¤è¿™ä¸ªaofæ–‡ä»¶ redis ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå·¥å…· redis-check-aof --fix aof é»˜è®¤å°±æ˜¯æ–‡ä»¶çš„æ— é™è¿½åŠ ï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼ å¦‚æœ aof æ–‡ä»¶å¤§äº 64mï¼Œå¤ªå¤§äº†ï¼ forkä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥å°†æˆ‘ä»¬çš„æ–‡ä»¶è¿›è¡Œé‡å†™ï¼ ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼ 123456appendonly no # é»˜è®¤æ˜¯ä¸å¼€å¯aofæ¨¡å¼çš„ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨rdbæ–¹å¼æŒä¹…åŒ–çš„ï¼Œåœ¨å¤§éƒ¨åˆ†æ‰€æœ‰çš„æƒ…å†µä¸‹ï¼Œrdbå®Œå…¨å¤Ÿç”¨ï¼appendfilename &quot;appendonly.aof&quot; # æŒä¹…åŒ–çš„æ–‡ä»¶çš„åå­—# appendfsync always # æ¯æ¬¡ä¿®æ”¹éƒ½ä¼š syncã€‚æ¶ˆè€—æ€§èƒ½appendfsync everysec # æ¯ç§’æ‰§è¡Œä¸€æ¬¡ syncï¼Œå¯èƒ½ä¼šä¸¢å¤±è¿™1sçš„æ•°æ®ï¼# appendfsync no # ä¸æ‰§è¡Œ syncï¼Œè¿™ä¸ªæ—¶å€™æ“ä½œç³»ç»Ÿè‡ªå·±åŒæ­¥æ•°æ®ï¼Œé€Ÿåº¦æœ€å¿«ï¼# rewrite é‡å†™ï¼Œ AOFä¼˜ç‚¹ï¼š 1ã€æ¯ä¸€æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ï¼Œæ–‡ä»¶çš„å®Œæ•´ä¼šæ›´åŠ å¥½ï¼ 2ã€æ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œå¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’çš„æ•°æ® 3ã€ä»ä¸åŒæ­¥ï¼Œæ•ˆç‡æœ€é«˜çš„ï¼ AOFç¼ºç‚¹ï¼š 1ã€ç›¸å¯¹äºæ•°æ®æ–‡ä»¶æ¥è¯´ï¼Œaofè¿œè¿œå¤§äº rdbï¼Œä¿®å¤çš„é€Ÿåº¦ä¹Ÿæ¯” rdbæ…¢ï¼ 2ã€Aof è¿è¡Œæ•ˆç‡ä¹Ÿè¦æ¯” rdb æ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬redisé»˜è®¤çš„é…ç½®å°±æ˜¯rdbæŒä¹…åŒ–ï¼ æ‰©å±•ï¼š 1ã€RDB æŒä¹…åŒ–æ–¹å¼èƒ½å¤Ÿåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å¯¹ä½ çš„æ•°æ®è¿›è¡Œå¿«ç…§å­˜å‚¨ 2ã€AOF æŒä¹…åŒ–æ–¹å¼è®°å½•æ¯æ¬¡å¯¹æœåŠ¡å™¨å†™çš„æ“ä½œï¼Œå½“æœåŠ¡å™¨é‡å¯çš„æ—¶å€™ä¼šé‡æ–°æ‰§è¡Œè¿™äº›å‘½ä»¤æ¥æ¢å¤åŸå§‹ çš„æ•°æ®ï¼ŒAOFå‘½ä»¤ä»¥Redis åè®®è¿½åŠ ä¿å­˜æ¯æ¬¡å†™çš„æ“ä½œåˆ°æ–‡ä»¶æœ«å°¾ï¼ŒRedisè¿˜èƒ½å¯¹AOFæ–‡ä»¶è¿›è¡Œåå°é‡å†™ï¼Œä½¿å¾—AOFæ–‡ä»¶çš„ä½“ç§¯ä¸è‡³äºè¿‡å¤§ã€‚ 3ã€åªåšç¼“å­˜ï¼Œå¦‚æœä½ åªå¸Œæœ›ä½ çš„æ•°æ®åœ¨æœåŠ¡å™¨è¿è¡Œçš„æ—¶å€™å­˜åœ¨ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä»»ä½•æŒä¹…åŒ– 4ã€åŒæ—¶å¼€å¯ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“redisé‡å¯çš„æ—¶å€™ä¼šä¼˜å…ˆè½½å…¥AOFæ–‡ä»¶æ¥æ¢å¤åŸå§‹çš„æ•°æ®ï¼Œå› ä¸ºåœ¨é€šå¸¸æƒ…å†µä¸‹AOF æ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†è¦æ¯”RDBæ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†è¦å®Œæ•´ã€‚ RDB çš„æ•°æ®ä¸å®æ—¶ï¼ŒåŒæ—¶ä½¿ç”¨ä¸¤è€…æ—¶æœåŠ¡å™¨é‡å¯ä¹Ÿåªä¼šæ‰¾AOFæ–‡ä»¶ï¼Œé‚£è¦ä¸è¦åªä½¿ç”¨AOFå‘¢ï¼Ÿä½œè€… å»ºè®®ä¸è¦ï¼Œå› ä¸ºRDBæ›´é€‚åˆç”¨äºå¤‡ä»½æ•°æ®åº“ï¼ˆAOFåœ¨ä¸æ–­å˜åŒ–ä¸å¥½å¤‡ä»½ï¼‰ï¼Œå¿«é€Ÿé‡å¯ï¼Œè€Œä¸”ä¸ä¼šæœ‰ AOFå¯èƒ½æ½œåœ¨çš„Bugï¼Œç•™ç€ä½œä¸ºä¸€ä¸ªä¸‡ä¸€çš„æ‰‹æ®µã€‚ 5ã€æ€§èƒ½å»ºè®® å› ä¸ºRDBæ–‡ä»¶åªç”¨ä½œåå¤‡ç”¨é€”ï¼Œå»ºè®®åªåœ¨Slaveä¸ŠæŒä¹…åŒ–RDBæ–‡ä»¶ï¼Œè€Œä¸”åªè¦15åˆ†é’Ÿå¤‡ä»½ä¸€æ¬¡å°±å¤Ÿ äº†ï¼Œåªä¿ç•™ save 900 1 è¿™æ¡è§„åˆ™ã€‚ å¦‚æœEnable AOF ï¼Œå¥½å¤„æ˜¯åœ¨æœ€æ¶åŠ£æƒ…å†µä¸‹ä¹Ÿåªä¼šä¸¢å¤±ä¸è¶…è¿‡ä¸¤ç§’æ•°æ®ï¼Œå¯åŠ¨è„šæœ¬è¾ƒç®€å•åªloadè‡ª å·±çš„AOFæ–‡ä»¶å°±å¯ä»¥äº†ï¼Œä»£ä»·ä¸€æ˜¯å¸¦æ¥äº†æŒç»­çš„IOï¼ŒäºŒæ˜¯AOF rewrite çš„æœ€åå°† rewrite è¿‡ç¨‹ä¸­äº§ ç”Ÿçš„æ–°æ•°æ®å†™åˆ°æ–°æ–‡ä»¶é€ æˆçš„é˜»å¡å‡ ä¹æ˜¯ä¸å¯é¿å…çš„ã€‚åªè¦ç¡¬ç›˜è®¸å¯ï¼Œåº”è¯¥å°½é‡å‡å°‘AOF rewrite çš„é¢‘ç‡ï¼ŒAOFé‡å†™çš„åŸºç¡€å¤§å°é»˜è®¤å€¼64Må¤ªå°äº†ï¼Œå¯ä»¥è®¾åˆ°5Gä»¥ä¸Šï¼Œé»˜è®¤è¶…è¿‡åŸå¤§å°100%å¤§å°é‡ å†™å¯ä»¥æ”¹åˆ°é€‚å½“çš„æ•°å€¼ã€‚ å¦‚æœä¸Enable AOF ï¼Œä»…é  Master-Slave Repllcation å®ç°é«˜å¯ç”¨æ€§ä¹Ÿå¯ä»¥ï¼Œèƒ½çœæ‰ä¸€å¤§ç¬”IOï¼Œä¹Ÿå‡å°‘äº†rewriteæ—¶å¸¦æ¥çš„ç³»ç»Ÿæ³¢åŠ¨ã€‚ä»£ä»·æ˜¯å¦‚æœMaster/Slave åŒæ—¶å€’æ‰ï¼Œä¼šä¸¢å¤±åå‡ åˆ†é’Ÿçš„æ•°æ®ï¼Œ å¯åŠ¨è„šæœ¬ä¹Ÿè¦æ¯”è¾ƒä¸¤ä¸ª Master/Slave ä¸­çš„ RDBæ–‡ä»¶ï¼Œè½½å…¥è¾ƒæ–°çš„é‚£ä¸ªï¼Œå¾®åšå°±æ˜¯è¿™ç§æ¶æ„ã€‚ å‘½ä»¤ 1234567891011121314151617181920æµ‹è¯•è®¢é˜…ç«¯ï¼š127.0.0.1:6379&gt; SUBSCRIBE xiaobaishuo # è®¢é˜…ä¸€ä¸ªé¢‘é“ xiaobaishuoReading messages... (press Ctrl-C to quit)1) &quot;subscribe&quot;2) &quot;xiaobaishuo&quot;3) (integer) 1# ç­‰å¾…è¯»å–æ¨é€çš„ä¿¡æ¯1) &quot;message&quot; # æ¶ˆæ¯2) &quot;xiaobaishuo&quot; # é‚£ä¸ªé¢‘é“çš„æ¶ˆæ¯3) &quot;hello,xiaobai&quot; # æ¶ˆæ¯çš„å…·ä½“å†…å®¹1) &quot;message&quot;2) &quot;xiaobaishuo&quot;3) &quot;hello,redis&quot;å‘é€ç«¯ï¼š127.0.0.1:6379&gt; PUBLISH xiaobaishuo &quot;hello,xiaobai&quot; # å‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯åˆ°é¢‘é“ï¼(integer) 1127.0.0.1:6379&gt; PUBLISH xiaobaishuo &quot;hello,redis&quot; # å‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯åˆ°é¢‘é“ï¼(integer) 1127.0.0.1:6379&gt; åŸç† Redisæ˜¯ä½¿ç”¨Cå®ç°çš„ï¼Œé€šè¿‡åˆ†æ Redis æºç é‡Œçš„ pubsub.c æ–‡ä»¶ï¼Œäº†è§£å‘å¸ƒå’Œè®¢é˜…æœºåˆ¶çš„åº•å±‚å®ç°ï¼Œå€Ÿæ­¤åŠ æ·±å¯¹ Redis çš„ç†è§£ã€‚ Redis é€šè¿‡ PUBLISH ã€SUBSCRIBE å’Œ PSUBSCRIBE ç­‰å‘½ä»¤å®ç°å‘å¸ƒå’Œè®¢é˜…åŠŸèƒ½ã€‚ å¾®ä¿¡ï¼š é€šè¿‡ SUBSCRIBE å‘½ä»¤è®¢é˜…æŸé¢‘é“åï¼Œredis-server é‡Œç»´æŠ¤äº†ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸çš„é”®å°±æ˜¯ä¸€ä¸ªä¸ª é¢‘é“ï¼ï¼Œ è€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ª channel çš„å®¢æˆ·ç«¯ã€‚SUBSCRIBE å‘½ä»¤çš„å…³é”®ï¼Œ å°±æ˜¯å°†å®¢æˆ·ç«¯æ·»åŠ åˆ°ç»™å®š channel çš„è®¢é˜…é“¾è¡¨ä¸­ã€‚ Pub/Sub ä»å­—é¢ä¸Šç†è§£å°±æ˜¯å‘å¸ƒï¼ˆPublishï¼‰ä¸è®¢é˜…ï¼ˆSubscribeï¼‰ï¼Œåœ¨Redisä¸­ï¼Œä½ å¯ä»¥è®¾å®šå¯¹æŸä¸€ä¸ª keyå€¼è¿›è¡Œæ¶ˆæ¯å‘å¸ƒåŠæ¶ˆæ¯è®¢é˜…ï¼Œå½“ä¸€ä¸ªkeyå€¼ä¸Šè¿›è¡Œäº†æ¶ˆæ¯å‘å¸ƒåï¼Œæ‰€æœ‰è®¢é˜…å®ƒçš„å®¢æˆ·ç«¯éƒ½ä¼šæ”¶åˆ°ç›¸åº” çš„æ¶ˆæ¯ã€‚è¿™ä¸€åŠŸèƒ½æœ€æ˜æ˜¾çš„ç”¨æ³•å°±æ˜¯ç”¨ä½œå®æ—¶æ¶ˆæ¯ç³»ç»Ÿï¼Œæ¯”å¦‚æ™®é€šçš„å³æ—¶èŠå¤©ï¼Œç¾¤èŠç­‰åŠŸèƒ½ã€‚ ä½¿ç”¨åœºæ™¯ï¼š 1ã€å®æ—¶æ¶ˆæ¯ç³»ç»Ÿï¼ 2ã€äº‹å®èŠå¤©ï¼ï¼ˆé¢‘é“å½“åšèŠå¤©å®¤ï¼Œå°†ä¿¡æ¯å›æ˜¾ç»™æ‰€æœ‰äººå³å¯ï¼ï¼‰ 3ã€è®¢é˜…ï¼Œå…³æ³¨ç³»ç»Ÿéƒ½æ˜¯å¯ä»¥çš„ï¼ ç¨å¾®å¤æ‚çš„åœºæ™¯æˆ‘ä»¬å°±ä¼šä½¿ç”¨ æ¶ˆæ¯ä¸­é—´ä»¶ MQ ï¼ˆï¼‰ Redis æ•°æ®æ·˜æ±°ç­–ç•¥ redis æä¾› 6ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š voltile-lruï¼švoltileï¼ˆæŒ¥å‘æ€§çš„ï¼‰ä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±° volatile-ttlï¼š(Time to Live)ä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±° volatile-randomï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±° allkeys-lruï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±° allkeys-randomï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±° no-envictionï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ® å¸¸ç”¨çš„æ·˜æ±°ç®—æ³•ï¼š 1.FIFOï¼šFirst In First Outï¼Œå…ˆè¿›å…ˆå‡ºã€‚åˆ¤æ–­è¢«å­˜å‚¨çš„æ—¶é—´ï¼Œç¦»ç›®å‰æœ€è¿œçš„æ•°æ®ä¼˜å…ˆè¢«æ·˜æ±°ã€‚ 2.LRUï¼šLeast Recently Usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨ã€‚åˆ¤æ–­æœ€è¿‘è¢«ä½¿ç”¨çš„æ—¶é—´ï¼Œç›®å‰æœ€è¿œçš„æ•°æ®ä¼˜å…ˆè¢«æ·˜æ±°ã€‚ 3.LFUï¼šLeast Frequently Usedï¼Œæœ€ä¸ç»å¸¸ä½¿ç”¨ã€‚åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œæ•°æ®è¢«ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„ï¼Œä¼˜å…ˆè¢«æ·˜æ±°ã€‚ Redis è¿‡æœŸè®¾ç½® EXPIRE key PERSIST key Redis æ•°æ®å¤‡ä»½ä¸æ¢å¤ SAVE è¯¥å‘½ä»¤å°†åœ¨ redis å®‰è£…ç›®å½•ä¸­åˆ›å»ºdump.rdbæ–‡ä»¶ã€‚ å¦‚æœéœ€è¦æ¢å¤æ•°æ®ï¼Œåªéœ€å°†å¤‡ä»½æ–‡ä»¶ (dump.rdb) ç§»åŠ¨åˆ° redis å®‰è£…ç›®å½•å¹¶å¯åŠ¨æœåŠ¡å³å¯ã€‚è·å– redis ç›®å½•å¯ä»¥ä½¿ç”¨ CONFIG å‘½ä»¤ CONFIG GET dir ä»¥ä¸Šå‘½ä»¤ CONFIG GET dir è¾“å‡ºçš„ redis å®‰è£…ç›®å½•ä¸º /usr/local/redis/binã€‚ Bgsave åˆ›å»º redis å¤‡ä»½æ–‡ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ BGSAVEï¼Œè¯¥å‘½ä»¤åœ¨åå°æ‰§è¡Œã€‚ å®ä¾‹ 127.0.0.1:6379&gt; BGSAVE Background saving started Redis å®‰å…¨ é€šè¿‡ redis çš„é…ç½®æ–‡ä»¶è®¾ç½®å¯†ç å‚æ•°ï¼Œè¿™æ ·å®¢æˆ·ç«¯è¿æ¥åˆ° redis æœåŠ¡å°±éœ€è¦å¯†ç éªŒè¯ï¼Œè¿™æ ·å¯ä»¥è®©ä½ çš„ redis æœåŠ¡æ›´å®‰å…¨ã€‚ æŸ¥çœ‹æ˜¯å¦è®¾ç½®äº†å¯†ç éªŒè¯ï¼š CONFIG get requirepassé»˜è®¤æƒ…å†µä¸‹ requirepass å‚æ•°æ˜¯ç©ºçš„ï¼Œè¿™å°±æ„å‘³ç€ä½ æ— éœ€é€šè¿‡å¯†ç éªŒè¯å°±å¯ä»¥è¿æ¥åˆ° redis æœåŠ¡ã€‚ CONFIG set requirepass &quot;runoob&quot; AUTH &quot;runoob&quot; SET mykey &quot;Test value&quot; GET mykey Redis æ€§èƒ½æµ‹è¯• Redis æ€§èƒ½æµ‹è¯•æ˜¯é€šè¿‡åŒæ—¶æ‰§è¡Œå¤šä¸ªå‘½ä»¤å®ç°çš„ã€‚ redis-benchmark [option] [option value] æ³¨æ„ï¼šè¯¥å‘½ä»¤æ˜¯åœ¨ redis çš„ç›®å½•ä¸‹æ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯ redis å®¢æˆ·ç«¯çš„å†…éƒ¨æŒ‡ä»¤ ä»¥ä¸‹å®ä¾‹åŒæ—¶æ‰§è¡Œ 10000 ä¸ªè¯·æ±‚æ¥æ£€æµ‹æ€§èƒ½ï¼š redis-benchmark -n 10000 -q - redis æ€§èƒ½æµ‹è¯•å·¥å…·å¯é€‰å‚æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š åºå· é€‰é¡¹ æè¿° é»˜è®¤å€¼ 1 -h æŒ‡å®šæœåŠ¡å™¨ä¸»æœºå 127.0.0.1 2 -p æŒ‡å®šæœåŠ¡å™¨ç«¯å£ 6379 3 -s æŒ‡å®šæœåŠ¡å™¨ socket 4 -c æŒ‡å®šå¹¶å‘è¿æ¥æ•° 50 5 -n æŒ‡å®šè¯·æ±‚æ•° 10000 6 -d ä»¥å­—èŠ‚çš„å½¢å¼æŒ‡å®š SET/GET å€¼çš„æ•°æ®å¤§å° 2 7 -k 1=keep alive 0=reconnect 1 8 -r SET/GET/INCR ä½¿ç”¨éšæœº key, SADD ä½¿ç”¨éšæœºå€¼ 9 -P é€šè¿‡ç®¡é“ä¼ è¾“ è¯·æ±‚ 1 10 -q å¼ºåˆ¶é€€å‡º redisã€‚ä»…æ˜¾ç¤º query/sec å€¼ 11 --csv ä»¥ CSV æ ¼å¼è¾“å‡º 12 -l ç”Ÿæˆå¾ªç¯ï¼Œæ°¸ä¹…æ‰§è¡Œæµ‹è¯• 13 -t ä»…è¿è¡Œä»¥é€—å·åˆ†éš”çš„æµ‹è¯•å‘½ä»¤åˆ—è¡¨ã€‚ 14 -I Idle æ¨¡å¼ã€‚ä»…æ‰“å¼€ N ä¸ª idle è¿æ¥å¹¶ç­‰å¾…ã€‚ - redis-benchmark -h 127.0.0.1 -p 6379 -t set,lpush -n 10000 -q Redis å®¢æˆ·ç«¯è¿æ¥ Redis é€šè¿‡ç›‘å¬ä¸€ä¸ª TCP ç«¯å£æˆ–è€… Unix socket çš„æ–¹å¼æ¥æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå½“ä¸€ä¸ªè¿æ¥å»ºç«‹åï¼ŒRedis å†…éƒ¨ä¼šè¿›è¡Œä»¥ä¸‹ä¸€äº›æ“ä½œï¼š é¦–å…ˆï¼Œå®¢æˆ·ç«¯ socket ä¼šè¢«è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ï¼Œå› ä¸º Redis åœ¨ç½‘ç»œäº‹ä»¶å¤„ç†ä¸Šé‡‡ç”¨çš„æ˜¯éé˜»å¡å¤šè·¯å¤ç”¨æ¨¡å‹ã€‚ ç„¶åä¸ºè¿™ä¸ª socket è®¾ç½® TCP_NODELAY å±æ€§ï¼Œç¦ç”¨ Nagle ç®—æ³• ç„¶ååˆ›å»ºä¸€ä¸ªå¯è¯»çš„æ–‡ä»¶äº‹ä»¶ç”¨äºç›‘å¬è¿™ä¸ªå®¢æˆ·ç«¯ socket çš„æ•°æ®å‘é€ æœ€å¤§è¿æ¥æ•° åœ¨ Redis2.4 ä¸­ï¼Œæœ€å¤§è¿æ¥æ•°æ˜¯è¢«ç›´æ¥ç¡¬ç¼–ç åœ¨ä»£ç é‡Œé¢çš„ï¼Œè€Œåœ¨2.6ç‰ˆæœ¬ä¸­è¿™ä¸ªå€¼å˜æˆå¯é…ç½®çš„ã€‚ maxclients çš„é»˜è®¤å€¼æ˜¯ 10000ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ redis.conf ä¸­å¯¹è¿™ä¸ªå€¼è¿›è¡Œä¿®æ”¹ã€‚ config get maxclients redis-server --maxclients 100000 S.N. å‘½ä»¤ æè¿° 1 CLIENT LIST è¿”å›è¿æ¥åˆ° redis æœåŠ¡çš„å®¢æˆ·ç«¯åˆ—è¡¨ 2 CLIENT SETNAME è®¾ç½®å½“å‰è¿æ¥çš„åç§° 3 CLIENT GETNAME è·å–é€šè¿‡ CLIENT SETNAME å‘½ä»¤è®¾ç½®çš„æœåŠ¡åç§° 4 CLIENT PAUSE æŒ‚èµ·å®¢æˆ·ç«¯è¿æ¥ï¼ŒæŒ‡å®šæŒ‚èµ·çš„æ—¶é—´ä»¥æ¯«ç§’è®¡ 5 CLIENT KILL å…³é—­å®¢æˆ·ç«¯è¿æ¥ Redisç®¡é“æŠ€æœ¯ Redisæ˜¯ä¸€ç§åŸºäºå®¢æˆ·ç«¯-æœåŠ¡ç«¯æ¨¡å‹ä»¥åŠè¯·æ±‚/å“åº”åè®®çš„TCPæœåŠ¡ã€‚è¿™æ„å‘³ç€é€šå¸¸æƒ…å†µä¸‹ä¸€ä¸ªè¯·æ±‚ä¼šéµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚ï¼Œå¹¶ç›‘å¬å¥—æ¥å­—è¿”å›ï¼Œé€šå¸¸ä»¥ä¸€å¯¹æ¨¡å¼ï¼Œç­‰å¾…æœåŠ¡ç«¯å“åº”ã€‚ æœåŠ¡ç«¯å¤„ç†å‘½ä»¤ï¼Œå¯ä»¥ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ Redisç®¡é“æŠ€æœ¯å¯ä»¥åœ¨æœåŠ¡ç«¯æœªå“åº”æ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œå¹¶æœ€ç»ˆä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æœåŠ¡ç«¯çš„å“åº”ã€‚ æŸ¥çœ‹redisç®¡é“ï¼Œåªéœ€è¦å¯åŠ¨rediså®ä¾‹å¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š $ï¼ˆecho -enâ€œ PING \\ r \\ n SET runoobkey redis \\ r \\ nGET runoobkey \\ r \\ nINCRè®¿é—®è€…\\ r \\ nINCRè®¿é—®è€…\\ r \\ nINCRè®¿é—®è€…\\ r \\ nâ€ï¼›ç¡çœ 10ï¼‰| æ•°æ§æœ¬åœ°ä¸»æœº6379ï¼ˆecho - zh - cn â€œ PING \\ r \\ n SET redoobkey redis \\ r \\ nGET runoobkey \\ r \\ nINCRè®¿é—®è€…\\ r \\ nINCRè®¿é—®è€…\\ r \\ nINCRè®¿é—®è€…\\ r \\ nâ€ ï¼›ç¡çœ 10 ï¼‰| æ•°æ§æœ¬åœ°ä¸»æœº6379 ä»¥ä¸Šå®ä¾‹ä¸­æˆ‘ä»¬é€šè¿‡ä½¿ç”¨PINGå‘½ä»¤æŸ¥çœ‹redisæœåŠ¡æ˜¯å¦å¯ç”¨ï¼Œä¹‹åæˆ‘ä»¬è®¾ç½®äº†runoobkeyçš„å˜é‡redisï¼Œç„¶åæˆ‘ä»¬è·å–runoobkeyçš„å€¼å¹¶ä½¿å…¶è®¿å®¢è‡ªå¢3æ¬¡ã€‚ åœ¨è¿”å›çš„ç»“æœä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™äº›å‘½ä»¤ä¸€æ¬¡æ€§å‘redisæœåŠ¡æäº¤ï¼Œå¹¶æœ€ç»ˆä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æœåŠ¡ç«¯çš„å“åº” ç®¡é“æŠ€æœ¯çš„ä¼˜åŠ¿ ç®¡é“æŠ€æœ¯æœ€æ˜¾ç€çš„ä¼˜åŠ¿æ˜¯æé«˜äº†redisæœåŠ¡çš„æ€§èƒ½ã€‚ Redis åˆ†åŒº åˆ†åŒºæ˜¯åˆ†å‰²æ•°æ®åˆ°å¤šä¸ªRediså®ä¾‹çš„å¤„ç†è¿‡ç¨‹ï¼Œå› æ­¤æ¯ä¸ªå®ä¾‹åªä¿å­˜keyçš„ä¸€ä¸ªå­é›†ã€‚ åˆ†åŒºçš„ä¼˜åŠ¿ é€šè¿‡åˆ©ç”¨å¤šå°è®¡ç®—æœºå†…å­˜çš„å’Œå€¼ï¼Œå…è®¸æˆ‘ä»¬æ„é€ æ›´å¤§çš„æ•°æ®åº“ã€‚ é€šè¿‡å¤šæ ¸å’Œå¤šå°è®¡ç®—æœºï¼Œå…è®¸æˆ‘ä»¬æ‰©å±•è®¡ç®—èƒ½åŠ›ï¼›é€šè¿‡å¤šå°è®¡ç®—æœºå’Œç½‘ç»œé€‚é…å™¨ï¼Œå…è®¸æˆ‘ä»¬æ‰©å±•ç½‘ç»œå¸¦å®½ã€‚ åˆ†åŒºçš„ä¸è¶³ redisçš„ä¸€äº›ç‰¹æ€§åœ¨åˆ†åŒºæ–¹é¢è¡¨ç°çš„ä¸æ˜¯å¾ˆå¥½ï¼š æ¶‰åŠå¤šä¸ªkeyçš„æ“ä½œé€šå¸¸æ˜¯ä¸è¢«æ”¯æŒçš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå½“ä¸¤ä¸ªsetæ˜ å°„åˆ°ä¸åŒçš„rediså®ä¾‹ä¸Šæ—¶ï¼Œä½ å°±ä¸èƒ½å¯¹è¿™ä¸¤ä¸ªsetæ‰§è¡Œäº¤é›†æ“ä½œã€‚ æ¶‰åŠå¤šä¸ªkeyçš„redisäº‹åŠ¡ä¸èƒ½ä½¿ç”¨ã€‚ å½“ä½¿ç”¨åˆ†åŒºæ—¶ï¼Œæ•°æ®å¤„ç†è¾ƒä¸ºå¤æ‚ï¼Œæ¯”å¦‚ä½ éœ€è¦å¤„ç†å¤šä¸ªrdb/aofæ–‡ä»¶ï¼Œå¹¶ä¸”ä»å¤šä¸ªå®ä¾‹å’Œä¸»æœºå¤‡ä»½æŒä¹…åŒ–æ–‡ä»¶ã€‚ å¢åŠ æˆ–åˆ é™¤å®¹é‡ä¹Ÿæ¯”è¾ƒå¤æ‚ã€‚redisé›†ç¾¤å¤§å¤šæ•°æ”¯æŒåœ¨è¿è¡Œæ—¶å¢åŠ ã€åˆ é™¤èŠ‚ç‚¹çš„é€æ˜æ•°æ®å¹³è¡¡çš„èƒ½åŠ›ï¼Œä½†æ˜¯ç±»ä¼¼äºå®¢æˆ·ç«¯åˆ†åŒºã€ä»£ç†ç­‰å…¶ä»–ç³»ç»Ÿåˆ™ä¸æ”¯æŒè¿™é¡¹ç‰¹æ€§ã€‚ç„¶è€Œï¼Œä¸€ç§å«åšpreshardingçš„æŠ€æœ¯å¯¹æ­¤æ˜¯æœ‰å¸®åŠ©çš„ã€‚ åˆ†åŒºç±»å‹ Redis æœ‰ä¸¤ç§ç±»å‹åˆ†åŒºã€‚ å‡è®¾æœ‰4ä¸ªRediså®ä¾‹ R0ï¼ŒR1ï¼ŒR2ï¼ŒR3ï¼Œå’Œç±»ä¼¼user:1ï¼Œuser:2è¿™æ ·çš„è¡¨ç¤ºç”¨æˆ·çš„å¤šä¸ªkeyï¼Œå¯¹æ—¢å®šçš„keyæœ‰å¤šç§ä¸åŒæ–¹å¼æ¥é€‰æ‹©è¿™ä¸ªkeyå­˜æ”¾åœ¨å“ªä¸ªå®ä¾‹ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰ä¸åŒçš„ç³»ç»Ÿæ¥æ˜ å°„æŸä¸ªkeyåˆ°æŸä¸ªRedisæœåŠ¡ã€‚ èŒƒå›´åˆ†åŒº æœ€ç®€å•çš„åˆ†åŒºæ–¹å¼æ˜¯æŒ‰èŒƒå›´åˆ†åŒºï¼Œå°±æ˜¯æ˜ å°„ä¸€å®šèŒƒå›´çš„å¯¹è±¡åˆ°ç‰¹å®šçš„Rediså®ä¾‹ã€‚ æ¯”å¦‚ï¼ŒIDä»0åˆ°10000çš„ç”¨æˆ·ä¼šä¿å­˜åˆ°å®ä¾‹R0ï¼ŒIDä»10001åˆ° 20000çš„ç”¨æˆ·ä¼šä¿å­˜åˆ°R1ï¼Œä»¥æ­¤ç±»æ¨ã€‚ è¿™ç§æ–¹å¼æ˜¯å¯è¡Œçš„ï¼Œå¹¶ä¸”åœ¨å®é™…ä¸­ä½¿ç”¨ï¼Œä¸è¶³å°±æ˜¯è¦æœ‰ä¸€ä¸ªåŒºé—´èŒƒå›´åˆ°å®ä¾‹çš„æ˜ å°„è¡¨ã€‚è¿™ä¸ªè¡¨è¦è¢«ç®¡ç†ï¼ŒåŒæ—¶è¿˜éœ€è¦å„ ç§å¯¹è±¡çš„æ˜ å°„è¡¨ï¼Œé€šå¸¸å¯¹Redisæ¥è¯´å¹¶éæ˜¯å¥½çš„æ–¹æ³•ã€‚ å“ˆå¸Œåˆ†åŒº å¦å¤–ä¸€ç§åˆ†åŒºæ–¹æ³•æ˜¯hashåˆ†åŒºã€‚è¿™å¯¹ä»»ä½•keyéƒ½é€‚ç”¨ï¼Œä¹Ÿæ— éœ€æ˜¯object_name:è¿™ç§å½¢å¼ï¼Œåƒä¸‹é¢æè¿°çš„ä¸€æ ·ç®€å•ï¼š ç”¨ä¸€ä¸ªhashå‡½æ•°å°†keyè½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—ï¼Œæ¯”å¦‚ä½¿ç”¨crc32 hashå‡½æ•°ã€‚å¯¹key foobaræ‰§è¡Œcrc32(foobar)ä¼šè¾“å‡ºç±»ä¼¼93024922çš„æ•´æ•°ã€‚ å¯¹è¿™ä¸ªæ•´æ•°å–æ¨¡ï¼Œå°†å…¶è½¬åŒ–ä¸º0-3ä¹‹é—´çš„æ•°å­—ï¼Œå°±å¯ä»¥å°†è¿™ä¸ªæ•´æ•°æ˜ å°„åˆ°4ä¸ªRediså®ä¾‹ä¸­çš„ä¸€ä¸ªäº†ã€‚93024922 % 4 = 2ï¼Œå°±æ˜¯è¯´key foobaråº”è¯¥è¢«å­˜åˆ°R2å®ä¾‹ä¸­ã€‚æ³¨æ„ï¼šå–æ¨¡æ“ä½œæ˜¯å–é™¤çš„ä½™æ•°ï¼Œé€šå¸¸åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€ä¸­ç”¨%æ“ä½œç¬¦å®ç°ã€‚ Redis æ‰©å®¹ â€‹ å½“åšç¼“å­˜ä½¿ç”¨ï¼Œä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œå®ç°åŠ¨æ€æ‰©å®¹ç¼©å®¹ã€‚ å½“åšä¸€ä¸ª**æŒä¹…åŒ–å­˜å‚¨**ä½¿ç”¨ï¼Œå¿…é¡»ä½¿ç”¨**å›ºå®šçš„ keys-to-nodes æ˜ å°„å…³ç³»**ï¼ŒèŠ‚ç‚¹çš„æ•°é‡ä¸€æ—¦ç¡®å®šä¸èƒ½å˜åŒ–ã€‚å¦åˆ™çš„è¯(å³ Redis èŠ‚ç‚¹éœ€è¦åŠ¨æ€å˜åŒ–çš„æƒ…å†µï¼‰ï¼Œå¿…é¡»ä½¿ç”¨å¯ä»¥åœ¨è¿è¡Œæ—¶è¿›è¡Œæ•°æ®å†å¹³è¡¡çš„ä¸€å¥—ç³»ç»Ÿï¼Œè€Œå½“å‰åªæœ‰ Redis é›†ç¾¤å¯ä»¥åšåˆ°è¿™æ ·ã€‚ Java ä½¿ç”¨ Redis jedis å®‰è£… å¼€å§‹åœ¨ Java ä¸­ä½¿ç”¨ Redis å‰ï¼Œ æˆ‘ä»¬éœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº† redis æœåŠ¡åŠ Java redis é©±åŠ¨ï¼Œä¸”ä½ çš„æœºå™¨ä¸Šèƒ½æ­£å¸¸ä½¿ç”¨ Javaã€‚ Javaçš„å®‰è£…é…ç½®å¯ä»¥å‚è€ƒæˆ‘ä»¬çš„ Java å¼€å‘ç¯å¢ƒé…ç½® æ¥ä¸‹æ¥è®©æˆ‘ä»¬å®‰è£… Java redis é©±åŠ¨ï¼š é¦–å…ˆä½ éœ€è¦ä¸‹è½½é©±åŠ¨åŒ… ä¸‹è½½ jedis.jarï¼Œç¡®ä¿ä¸‹è½½æœ€æ–°é©±åŠ¨åŒ…ã€‚ åœ¨ä½ çš„ classpath ä¸­åŒ…å«è¯¥é©±åŠ¨åŒ…ã€‚ maven jedis è¿æ¥åˆ° redis æœåŠ¡ 12345678910111213- import redis.clients.jedis.Jedis;public class RedisJava { public static void main(String[] args) { //è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡ Jedis jedis = new Jedis(&quot;localhost&quot;); // å¦‚æœ Redis æœåŠ¡è®¾ç½®æ¥å¯†ç ï¼Œéœ€è¦ä¸‹é¢è¿™è¡Œï¼Œæ²¡æœ‰å°±ä¸éœ€è¦ // jedis.auth(&quot;123456&quot;); System.out.println(&quot;è¿æ¥æˆåŠŸ&quot;); //æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ System.out.println(&quot;æœåŠ¡æ­£åœ¨è¿è¡Œ: &quot;+jedis.ping()); }} Redis Java String(å­—ç¬¦ä¸²) å®ä¾‹ 12345678910111213- import redis.clients.jedis.Jedis;public class RedisStringJava { public static void main(String[] args) { //è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡ Jedis jedis = new Jedis(&quot;localhost&quot;); System.out.println(&quot;è¿æ¥æˆåŠŸ&quot;); //è®¾ç½® redis å­—ç¬¦ä¸²æ•°æ® jedis.set(&quot;runoobkey&quot;, &quot;www.runoob.com&quot;); // è·å–å­˜å‚¨çš„æ•°æ®å¹¶è¾“å‡º System.out.println(&quot;redis å­˜å‚¨çš„å­—ç¬¦ä¸²ä¸º: &quot;+ jedis.get(&quot;runoobkey&quot;)); }} Redis Java List(åˆ—è¡¨) å®ä¾‹ 12345678910111213141516171819- import java.util.List; import redis.clients.jedis.Jedis;public class RedisListJava { public static void main(String[] args) { //è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡ Jedis jedis = new Jedis(&quot;localhost&quot;); System.out.println(&quot;è¿æ¥æˆåŠŸ&quot;); //å­˜å‚¨æ•°æ®åˆ°åˆ—è¡¨ä¸­ jedis.lpush(&quot;site-list&quot;, &quot;Runoob&quot;); jedis.lpush(&quot;site-list&quot;, &quot;Google&quot;); jedis.lpush(&quot;site-list&quot;, &quot;Taobao&quot;); // è·å–å­˜å‚¨çš„æ•°æ®å¹¶è¾“å‡º List&lt;String&gt; list = jedis.lrange(&quot;site-list&quot;, 0 ,2); for(int i=0; i&lt;list.size(); i++) { System.out.println(&quot;åˆ—è¡¨é¡¹ä¸º: &quot;+list.get(i)); } }} Redis Java Keys å®ä¾‹ 1234567891011121314151617 - import java.util.Iterator; import java.util.Set; import redis.clients.jedis.Jedis;public class RedisKeyJava { public static void main(String[] args) { //è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡ Jedis jedis = new Jedis(&quot;localhost&quot;); System.out.println(&quot;è¿æ¥æˆåŠŸ&quot;); // è·å–æ•°æ®å¹¶è¾“å‡º Set&lt;String&gt; keys = jedis.keys(&quot;*&quot;); Iterator&lt;String&gt; it=keys.iterator() ; while(it.hasNext()){ String key = it.next(); System.out.println(key); }}} Jedisäº‹åŠ¡ 12345678910111213141516171819202122232425public static void main(String[] args) {Jedis jedis = new Jedis(&quot;127.0.0.1&quot;, 6379);jedis.flushDB();JSONObject jsonObject = new JSONObject();jsonObject.put(&quot;hello&quot;,&quot;world&quot;);jsonObject.put(&quot;name&quot;,&quot;xiaobai&quot;);// å¼€å¯äº‹åŠ¡Transaction multi = jedis.multi();String result = jsonObject.toJSONString();// jedis.watch(result)try {multi.set(&quot;user1&quot;,result);multi.set(&quot;user2&quot;,result);int i = 1/0 ; // ä»£ç æŠ›å‡ºå¼‚å¸¸äº‹åŠ¡ï¼Œæ‰§è¡Œå¤±è´¥ï¼multi.exec(); // æ‰§è¡Œäº‹åŠ¡ï¼} catch (Exception e) {multi.discard(); // æ”¾å¼ƒäº‹åŠ¡e.printStackTrace();} finally {System.out.println(jedis.get(&quot;user1&quot;));System.out.println(jedis.get(&quot;user2&quot;));jedis.close(); // å…³é—­è¿æ¥}} SpringBootæ•´åˆRedis SpringBoot æ“ä½œæ•°æ®ï¼šspring-data jpa jdbc mongodb redisï¼ SpringData ä¹Ÿæ˜¯å’Œ SpringBoot é½åçš„é¡¹ç›®ï¼ è¯´æ˜ï¼š åœ¨ SpringBoot2.x ä¹‹åï¼ŒåŸæ¥ä½¿ç”¨çš„jedis è¢«æ›¿æ¢ä¸ºäº† lettuce? jedis : é‡‡ç”¨çš„ç›´è¿ï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œçš„è¯ï¼Œæ˜¯ä¸å®‰å…¨çš„ï¼Œå¦‚æœæƒ³è¦é¿å…ä¸å®‰å…¨çš„ï¼Œä½¿ç”¨ jedis pool è¿æ¥æ± ï¼ æ›´åƒ BIO æ¨¡å¼ lettuce : é‡‡ç”¨nettyï¼Œå®ä¾‹å¯ä»¥å†å¤šä¸ªçº¿ç¨‹ä¸­è¿›è¡Œå…±äº«ï¼Œä¸å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µï¼å¯ä»¥å‡å°‘çº¿ç¨‹æ•°æ®äº†ï¼Œæ›´åƒ NIO æ¨¡å¼ æºç åˆ†æï¼š 12345678910111213141516171819202122@Bean@ConditionalOnMissingBean(name = &quot;redisTemplate&quot;) // æˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªredisTemplateæ¥æ›¿æ¢è¿™ä¸ªé»˜è®¤çš„ï¼public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactoryredisConnectionFactory)throws UnknownHostException {// é»˜è®¤çš„ RedisTemplate æ²¡æœ‰è¿‡å¤šçš„è®¾ç½®ï¼Œredis å¯¹è±¡éƒ½æ˜¯éœ€è¦åºåˆ—åŒ–ï¼// ä¸¤ä¸ªæ³›å‹éƒ½æ˜¯ Object, Object çš„ç±»å‹ï¼Œæˆ‘ä»¬åä½¿ç”¨éœ€è¦å¼ºåˆ¶è½¬æ¢ &lt;String, Object&gt;RedisTemplate&lt;Object, Object&gt; template = new RedisTemplate&lt;&gt;();template.setConnectionFactory(redisConnectionFactory);return template;}@Bean@ConditionalOnMissingBean // ç”±äº String æ˜¯redisä¸­æœ€å¸¸ä½¿ç”¨çš„ç±»å‹ï¼Œæ‰€ä»¥è¯´å•ç‹¬æå‡ºæ¥äº†ä¸€ä¸ªbeanï¼public StringRedisTemplate stringRedisTemplate(RedisConnectionFactoryredisConnectionFactory)throws UnknownHostException {StringRedisTemplate template = new StringRedisTemplate();template.setConnectionFactory(redisConnectionFactory);return template;} 1234567891011121314151617181920212223242526272829303132333435361ã€å¯¼å…¥ä¾èµ–&lt;!-- æ“ä½œredis --&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt;2ã€é…ç½®è¿æ¥# é…ç½®redisspring.redis.host=127.0.0.1spring.redis.port=63793ã€æµ‹è¯•ï¼@SpringBootTestclass Redis02SpringbootApplicationTests {@Autowiredprivate RedisTemplate redisTemplate;@Testvoid contextLoads() {// redisTemplate æ“ä½œä¸åŒçš„æ•°æ®ç±»å‹ï¼Œapiå’Œæˆ‘ä»¬çš„æŒ‡ä»¤æ˜¯ä¸€æ ·çš„// opsForValue æ“ä½œå­—ç¬¦ä¸² ç±»ä¼¼String// opsForList æ“ä½œList ç±»ä¼¼List// opsForSet// opsForHash// opsForZSet// opsForGeo// opsForHyperLogLog// é™¤äº†è¿›æœ¬çš„æ“ä½œï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•éƒ½å¯ä»¥ç›´æ¥é€šè¿‡redisTemplateæ“ä½œï¼Œæ¯”å¦‚äº‹åŠ¡ï¼Œå’ŒåŸºæœ¬çš„CRUD// è·å–redisçš„è¿æ¥å¯¹è±¡// RedisConnection connection =redisTemplate.getConnectionFactory().getConnection();// connection.flushDb();// connection.flushAll();redisTemplate.opsForValue().set(&quot;mykey&quot;,&quot;å…³æ³¨ç‹‚ç¥è¯´å…¬ä¼—å·&quot;);System.out.println(redisTemplate.opsForValue().get(&quot;mykey&quot;));}} åº”ç”¨åœºæ™¯ è®¡ç®—å™¨ã€é™é€Ÿå™¨ã€å¥½å‹å…³ç³» ç¼“å­˜â€”â€”æå‡çƒ­ç‚¹æ•°æ®çš„è®¿é—®é€Ÿåº¦ å…±äº«æ•°æ®â€”â€”æ•°æ®çš„å­˜å‚¨å’Œå…±äº«çš„é—®é¢˜ å…¨å±€ ID â€”â€” åˆ†å¸ƒå¼å…¨å±€ ID çš„ç”Ÿæˆæ–¹æ¡ˆï¼ˆåˆ†åº“åˆ†è¡¨ï¼‰ åˆ†å¸ƒå¼é”â€”â€”è¿›ç¨‹é—´å…±äº«æ•°æ®çš„åŸå­æ“ä½œä¿è¯ åœ¨çº¿ç”¨æˆ·ç»Ÿè®¡å’Œè®¡æ•° â€”â€” ä½¿ç”¨ä½å›¾è¿›è¡Œä½è¿ç®— é˜Ÿåˆ—ã€æ ˆâ€”â€”è·¨è¿›ç¨‹çš„é˜Ÿåˆ—/æ ˆ æ¶ˆæ¯é˜Ÿåˆ—â€”â€”å¼‚æ­¥è§£è€¦çš„æ¶ˆæ¯æœºåˆ¶ æœåŠ¡æ³¨å†Œä¸å‘ç° â€”â€” RPC é€šä¿¡æœºåˆ¶çš„æœåŠ¡åè°ƒä¸­å¿ƒï¼ˆDubbo æ”¯æŒ Redisï¼‰ å…±äº«ç”¨æˆ· Session â€”â€” ç”¨æˆ·Sessionçš„æ›´æ–°å’Œè·å–éƒ½å¯ä»¥å¿«é€Ÿå®Œæˆ æ’è¡Œæ¦œâ€”â€” é€šè¿‡åˆ†é…å…ƒç´  score å€¼è¿›è¡Œæ’åº ï¼ˆ1ï¼‰ã€ä¼šè¯ç¼“å­˜ï¼ˆSession Cacheï¼‰ æœ€å¸¸ç”¨çš„ä¸€ç§ä½¿ç”¨ Redis çš„æƒ…æ™¯æ˜¯ä¼šè¯ç¼“å­˜ï¼ˆsession cacheï¼‰ã€‚ç”¨ Redis ç¼“å­˜ä¼šè¯æ¯”å…¶ä»– å­˜å‚¨ï¼ˆå¦‚ Memcachedï¼‰çš„ä¼˜åŠ¿åœ¨äºï¼šRedis æä¾›æŒä¹…åŒ–ã€‚å½“ç»´æŠ¤ä¸€ä¸ªä¸æ˜¯ä¸¥æ ¼è¦æ±‚ä¸€è‡´æ€§ çš„ç¼“å­˜æ—¶ï¼Œå¦‚æœç”¨æˆ·çš„è´­ç‰©è½¦ä¿¡æ¯å…¨éƒ¨ä¸¢å¤±ï¼Œå¤§éƒ¨åˆ†äººéƒ½ä¼šä¸é«˜å…´çš„ï¼Œç°åœ¨ï¼Œä»–ä»¬è¿˜ä¼šè¿™æ · å—ï¼Ÿ å¹¸è¿çš„æ˜¯ï¼Œéšç€ Redis è¿™äº›å¹´çš„æ”¹è¿›ï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°æ€ä¹ˆæ°å½“çš„ä½¿ç”¨ Redis æ¥ç¼“å­˜ä¼šè¯çš„æ–‡ æ¡£ã€‚ç”šè‡³å¹¿ä¸ºäººçŸ¥çš„å•†ä¸šå¹³å° Magento ä¹Ÿæä¾› Redis çš„æ’ä»¶ã€‚ ï¼ˆ2ï¼‰ã€å…¨é¡µç¼“å­˜ï¼ˆFPCï¼‰ é™¤åŸºæœ¬çš„ä¼šè¯ token ä¹‹å¤–ï¼ŒRedis è¿˜æä¾›å¾ˆç®€ä¾¿çš„ FPC å¹³å°ã€‚å›åˆ°ä¸€è‡´æ€§é—®é¢˜ï¼Œå³ä½¿é‡å¯ äº† Redis å®ä¾‹ï¼Œå› ä¸ºæœ‰ç£ç›˜çš„æŒä¹…åŒ–ï¼Œç”¨æˆ·ä¹Ÿä¸ä¼šçœ‹åˆ°é¡µé¢åŠ è½½é€Ÿåº¦çš„ä¸‹é™ï¼Œè¿™æ˜¯ä¸€ä¸ªæ å¤§æ”¹è¿›ï¼Œç±»ä¼¼ PHP æœ¬åœ° FPCã€‚ å†æ¬¡ä»¥ Magento ä¸ºä¾‹ï¼ŒMagento æä¾›ä¸€ä¸ªæ’ä»¶æ¥ä½¿ç”¨ Redis ä½œä¸ºå…¨é¡µç¼“å­˜åç«¯ã€‚ æ­¤å¤–ï¼Œå¯¹ WordPress çš„ç”¨æˆ·æ¥è¯´ï¼ŒPantheon æœ‰ä¸€ä¸ªéå¸¸å¥½çš„æ’ä»¶ wp-Redisï¼Œè¿™ä¸ªæ’ä»¶ èƒ½å¸®åŠ©ä½ ä»¥æœ€å¿«é€Ÿåº¦åŠ è½½ä½ æ›¾æµè§ˆè¿‡çš„é¡µé¢ã€‚ ï¼ˆ3ï¼‰ã€é˜Ÿåˆ— Reids åœ¨å†…å­˜å­˜å‚¨å¼•æ“é¢†åŸŸçš„ä¸€å¤§ä¼˜ç‚¹æ˜¯æä¾› list å’Œ set æ“ä½œï¼Œè¿™ä½¿å¾— Redis èƒ½ä½œä¸ºä¸€ä¸ª å¾ˆå¥½çš„æ¶ˆæ¯é˜Ÿåˆ—å¹³å°æ¥ä½¿ç”¨ã€‚Redis ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨çš„æ“ä½œï¼Œå°±ç±»ä¼¼äºæœ¬åœ°ç¨‹åºè¯­è¨€ï¼ˆå¦‚ Pythonï¼‰å¯¹ list çš„ push/pop æ“ä½œã€‚ å¦‚æœä½ å¿«é€Ÿçš„åœ¨ Google ä¸­æœç´¢â€œRedis queuesâ€ï¼Œä½ é©¬ä¸Šå°±èƒ½æ‰¾åˆ°å¤§é‡çš„å¼€æºé¡¹ç›®ï¼Œè¿™äº› é¡¹ç›®çš„ç›®çš„å°±æ˜¯åˆ©ç”¨ Redis åˆ›å»ºéå¸¸å¥½çš„åç«¯å·¥å…·ï¼Œä»¥æ»¡è¶³å„ç§é˜Ÿåˆ—éœ€æ±‚ã€‚ä¾‹å¦‚ï¼ŒCelery æœ‰ä¸€ä¸ªåå°å°±æ˜¯ä½¿ç”¨ Redis ä½œä¸º brokerï¼Œä½ å¯ä»¥ä»è¿™é‡Œå»æŸ¥çœ‹ã€‚ ï¼ˆ4ï¼‰ã€æ’è¡Œæ¦œ/è®¡æ•°å™¨ Redisåœ¨å†…å­˜ä¸­å¯¹æ•°å­—è¿›è¡Œé€’å¢æˆ–é€’å‡çš„æ“ä½œå®ç°çš„éå¸¸å¥½ã€‚é›†åˆï¼ˆSetï¼‰å’Œæœ‰åºé›†åˆï¼ˆSorted Setï¼‰ä¹Ÿä½¿å¾—æˆ‘ä»¬åœ¨æ‰§è¡Œè¿™äº›æ“ä½œçš„æ—¶å€™å˜çš„éå¸¸ç®€å•ï¼ŒRedis åªæ˜¯æ­£å¥½æä¾›äº†è¿™ä¸¤ç§æ•°æ® ç»“æ„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ä»æ’åºé›†åˆä¸­è·å–åˆ°æ’åæœ€é å‰çš„ 10 ä¸ªç”¨æˆ·â€“æˆ‘ä»¬ç§°ä¹‹ä¸º â€œuser_scoresâ€ï¼Œæˆ‘ä»¬åªéœ€è¦åƒä¸‹é¢ä¸€æ ·æ‰§è¡Œå³å¯ï¼š å½“ç„¶ï¼Œè¿™æ˜¯å‡å®šä½ æ˜¯æ ¹æ®ä½ ç”¨æˆ·çš„åˆ†æ•°åšé€’å¢çš„æ’åºã€‚å¦‚æœä½ æƒ³è¿”å›ç”¨æˆ·åŠç”¨æˆ·çš„åˆ†æ•°ï¼Œä½  å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šç‰›ç‰›æ¶æ„å¸ˆï¼Œå›å¤ï¼šé¢è¯•é¢˜ï¼Œè·å–æœ€æ–°ç‰ˆé¢è¯•é¢˜ éœ€è¦è¿™æ ·æ‰§è¡Œï¼š ZRANGE user_scores 0 10 WITHSCORES Agora Games å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œç”¨ Ruby å®ç°çš„ï¼Œå®ƒçš„æ’è¡Œæ¦œå°±æ˜¯ä½¿ç”¨ Redis æ¥å­˜å‚¨ æ•°æ®çš„ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ã€‚ ï¼ˆ5ï¼‰ã€å‘å¸ƒ/è®¢é˜… æœ€åï¼ˆä½†è‚¯å®šä¸æ˜¯æœ€ä¸é‡è¦çš„ï¼‰æ˜¯ Redis çš„å‘å¸ƒ/è®¢é˜…åŠŸèƒ½ã€‚å‘å¸ƒ/è®¢é˜…çš„ä½¿ç”¨åœºæ™¯ç¡®å®é å¸¸å¤šã€‚æˆ‘å·²çœ‹è§äººä»¬åœ¨ç¤¾äº¤ç½‘ç»œè¿æ¥ä¸­ä½¿ç”¨ï¼Œè¿˜å¯ä½œä¸ºåŸºäºå‘å¸ƒ/è®¢é˜…çš„è„šæœ¬è§¦å‘å™¨ï¼Œç”šè‡³ ç”¨ Redis çš„å‘å¸ƒ/è®¢é˜…åŠŸèƒ½æ¥å»ºç«‹èŠå¤©ç³»ç»Ÿï¼ï¼ˆä¸ï¼Œè¿™æ˜¯çœŸçš„ï¼Œä½ å¯ä»¥å»æ ¸å®ï¼‰","link":"/2021/03/01/Draft/2021/Redis/"},{"title":"é­‘é­…å…ˆç”Ÿ | è®¾è®¡æ¨¡å¼","text":"å­¦ä¹ ç›®çš„ï¼šå¢åŠ ç³»ç»Ÿçš„å¥å£®æ€§ï¼Œæ˜“ä¿®æ”¹æ€§å’Œå¯æ‰©å±•æ€§ï¼Œé˜…è¯»æºç çš„é€šç”¨å·¥å…·ï¼Œé€šç”¨é—®é¢˜çš„å·¥å…·ç®±ï¼Œç¨‹åºå‘˜çš„é€šç”¨è¯­è¨€ å­¦ä¹ æ–¹æ³•:è§†é¢‘å¼•å…¥ï¼Œåšå®¢å¼¥è¡¥ï¼Œä¹¦ç±ç»†åŒ–ï¼Œä»£ç å®è·µ å­¦ä¹ èµ„æºï¼šå¤§è¯è®¾è®¡æ¨¡å¼ä¹¦ç±ï¼Œbiliè§†é¢‘ï¼Œåšå®¢1,åšå®¢2 å­¦ä¹ ç›®æ ‡ç¨‹åº¦ï¼šäº†è§£å³å¯ å®é™…è¿ç”¨ JDK SSM Springboot è®¾è®¡æ¨¡å¼åŸåˆ™ å¼€é—­åŸåˆ™ ï¼šå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ ç”±Bertrand Meyeræå‡ºçš„å¼€é—­åŸåˆ™ï¼ˆOpen Closed Principleï¼‰æ˜¯æŒ‡ï¼Œè½¯ä»¶åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œ è€Œå¯¹ä¿®æ”¹å…³é—­ã€‚è¿™é‡Œçš„æ„æ€æ˜¯åœ¨å¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œèƒ½ä¸æ”¹ä»£ç å°±å°½é‡ä¸è¦æ”¹ï¼Œ å¦‚æœåªå¢åŠ ä»£ç å°±å®Œæˆäº†æ–°åŠŸèƒ½ï¼Œé‚£æ˜¯æœ€å¥½çš„ã€‚ä¸€ä¸ªç±»ä»å¤´åˆ°å°¾éƒ½æ˜¯è‡ªå·±å†™çš„å¯ä»¥æ›´æ”¹ï¼Œåˆ«äººçš„è¦ç¬¦åˆå¼€é—­åŸåˆ™ ä¾èµ–å€’è½¬åŸåˆ™ ï¼šé’ˆå¯¹æ¥å£å’ŒæŠ½è±¡ç¼–ç¨‹ ä¸Šå±‚ï¼ˆè°ƒç”¨åˆ«çš„æ–¹æ³•çš„ï¼‰ä¸èƒ½ä¾èµ–äºä¸‹å±‚ï¼ˆæ–¹æ³•è¢«è°ƒç”¨çš„ï¼‰ï¼Œä»–ä»¬éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ åˆæˆå¤ç”¨åŸåˆ™ ï¼šå¤šç”¨ç»„åˆå°‘ç”¨ç»§æ‰¿ ç»§æ‰¿ï¼ˆå®çº¿ç©ºç®­å¤´ï¼‰ ä¾èµ– å…³è”ï¼ˆå®çº¿ç®­å¤´ï¼‰ï¼šç»„åˆï¼ˆå®å¿ƒè±å½¢åŠ ç®­å¤´ï¼‰ï¼ˆé¸Ÿå’Œç¿…è†€ï¼‰ï¼›èšåˆï¼ˆç©ºå¿ƒè±å½¢åŠ ç®­å¤´ï¼‰ï¼ˆé›å’Œé›ç¾¤ï¼‰ è¿ªç±³ç‰¹åŸåˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰ ï¼šå®ä½“ä¹‹é—´å°½é‡å°‘çš„ç›¸äº’ä½œç”¨ ä¸ªå¯¹è±¡åº”å¯¹å…¶å®ƒå¯¹è±¡å°½å¯èƒ½å°‘çš„äº†è§£ï¼Œå’Œæœ‹å‹ï¼ˆç±»ä¸­å­—æ®µï¼Œæ–¹æ³•å‚æ•°ï¼Œæ–¹æ³•è¿”å›å€¼ï¼Œæ–¹æ³•å®ä¾‹å‡ºæ¥çš„å¯¹è±¡ï¼‰é€šä¿¡ é‡Œå¼ä»£æ¢åŸåˆ™ ï¼šåŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹å­ç±»ä¹Ÿå¯ä»¥å‡ºç°ã€‚ é‡Œæ°æ›¿æ¢åŸåˆ™æ˜¯Barbara Liskovæå‡ºçš„ï¼Œè¿™æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è®¾è®¡åŸåˆ™ï¼Œ å³å¦‚æœæˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªçˆ¶ç±»çš„æ–¹æ³•å¯ä»¥æˆåŠŸï¼Œé‚£ä¹ˆæ›¿æ¢æˆå­ç±»è°ƒç”¨ä¹Ÿåº”è¯¥å®Œå…¨å¯ä»¥è¿è¡Œã€‚ é‡å†™æ—¶å­ç±»é™åˆ¶ç­‰çº§ä¸èƒ½æ›´é«˜ï¼Œé”™è¯¯ä¸èƒ½æŠ›å‡ºæ›´å¤š å•ä¸€èŒè´£åŸåˆ™ ï¼šæ¯ä¸ªæ–¹æ³•ï¼Œç±»ï¼Œæ¡†æ¶åªè´Ÿè´£ä¸€ä»¶äº‹ æ¥å£éš”ç¦»åŸåˆ™ ï¼šä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£æ¯”ä¸€ä¸ªæ€»æ¥å£å¥½ ---åˆ†--- å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Œå…³é”®æ˜¯å­¦ä¹ è®¾è®¡æ€æƒ³ï¼Œä¸èƒ½ç®€å•åœ°ç”Ÿæ¬ç¡¬å¥—ï¼Œ ä¹Ÿä¸èƒ½ä¸ºäº†ä½¿ç”¨è®¾è®¡æ¨¡å¼è€Œè¿‡åº¦è®¾è®¡ï¼Œè¦åˆç†å¹³è¡¡è®¾è®¡çš„å¤æ‚åº¦å’Œçµæ´»æ€§ï¼Œ å¹¶æ„è¯†åˆ°è®¾è®¡æ¨¡å¼ä¹Ÿå¹¶ä¸æ˜¯ä¸‡èƒ½çš„ã€‚ ç®—æ³•æ›´åƒæ˜¯èœè°±ï¼š æä¾›è¾¾æˆç›®æ ‡çš„æ˜ç¡®æ­¥éª¤ã€‚ è€Œæ¨¡å¼æ›´åƒæ˜¯è“å›¾ï¼š ä½ å¯ä»¥çœ‹åˆ°æœ€ç»ˆçš„ç»“æœå’Œæ¨¡å¼çš„åŠŸèƒ½ï¼Œ ä½†éœ€è¦è‡ªå·±ç¡®å®šå®ç°æ­¥éª¤ã€‚ æ„å›¾ éƒ¨åˆ†ç®€å•æè¿°é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚ åŠ¨æœº éƒ¨åˆ†å°†è¿›ä¸€æ­¥è§£é‡Šé—®é¢˜å¹¶è¯´æ˜æ¨¡å¼ä¼šå¦‚ä½•æä¾›è§£å†³æ–¹æ¡ˆã€‚ ç»“æ„ éƒ¨åˆ†å±•ç¤ºæ¨¡å¼çš„æ¯ä¸ªéƒ¨åˆ†å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚ åœ¨ä¸åŒè¯­è¨€ä¸­çš„å®ç° æä¾›æµè¡Œç¼–ç¨‹è¯­è¨€çš„ä»£ç ï¼Œ è®©è¯»è€…æ›´å¥½åœ°ç†è§£æ¨¡å¼èƒŒåçš„æ€æƒ³ã€‚ è®¾è®¡åŸåˆ™ ä¸€å¥è¯å½’çº³ ç›®çš„ å¼€é—­åŸåˆ™ å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ é™ä½ç»´æŠ¤å¸¦æ¥çš„æ–°é£é™© ä¾èµ–å€’ç½®åŸåˆ™ é«˜å±‚ä¸åº”è¯¥ä¾èµ–ä½å±‚ï¼Œè¦é¢å‘æ¥å£ç¼–ç¨‹ æ›´åˆ©äºä»£ç ç»“æ„çš„å‡çº§æ‰©å±• å•ä¸€èŒè´£åŸåˆ™ ä¸€ä¸ªç±»åªå¹²ä¸€ä»¶äº‹ï¼Œå®ç°ç±»è¦å•ä¸€ ä¾¿äºç†è§£ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§ æ¥å£éš”ç¦»åŸåˆ™ ä¸€ä¸ªæ¥å£åªå¹²ä¸€ä»¶äº‹ï¼Œæ¥å£è¦ç²¾ç®€å•ä¸€ åŠŸèƒ½è§£è€¦ï¼Œé«˜èšåˆã€ä½è€¦åˆ è¿ªç±³ç‰¹æ³•åˆ™ ä¸è¯¥çŸ¥é“çš„ä¸è¦çŸ¥é“ï¼Œä¸€ä¸ªç±»åº”è¯¥ä¿æŒå¯¹å…¶å®ƒå¯¹è±¡æœ€å°‘çš„äº†è§£ï¼Œé™ä½è€¦åˆåº¦ åªå’Œæœ‹å‹äº¤æµï¼Œä¸å’Œé™Œç”Ÿäººè¯´è¯ï¼Œå‡å°‘ä»£ç è‡ƒè‚¿ é‡Œæ°æ›¿æ¢åŸåˆ™ ä¸è¦ç ´åç»§æ‰¿ä½“ç³»ï¼Œå­ç±»é‡å†™æ–¹æ³•åŠŸèƒ½å‘ç”Ÿæ”¹å˜ï¼Œä¸åº”è¯¥å½±å“çˆ¶ç±»æ–¹æ³•çš„å«ä¹‰ é˜²æ­¢ç»§æ‰¿æ³›æ»¥ åˆæˆå¤ç”¨åŸåˆ™ å°½é‡ä½¿ç”¨ç»„åˆæˆ–è€…èšåˆå…³ç³»å®ç°ä»£ç å¤ç”¨ï¼Œå°‘ä½¿ç”¨ç»§æ‰¿ é™ä½ä»£ç è€¦åˆ å­¦ä¹ è¿›åº¦ è®¾è®¡åŸåˆ™ å¼€é—­åŸåˆ™ é‡Œæ°æ›¿æ¢åŸåˆ™ ä¾èµ–å€’ç½®åŸåˆ™ å•ä¸€èŒè´£åŸåˆ™ æ¥å£éš”ç¦»åŸåˆ™ è¿ªç±³ç‰¹æ³•åˆ™ åˆæˆå¤ç”¨åŸåˆ™ è¡Œä¸ºæ¨¡å¼ èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰ è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰ è°ƒåœè€…ï¼ˆä¸­ä»‹è€…ï¼‰æ¨¡å¼ï¼ˆMediatorï¼‰ å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰ è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰ çŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰ ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Methodï¼‰ è®¿é—®è€…æ¨¡å¼ï¼ˆVisitorï¼‰ è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreterï¼‰ ç»“æ„å‹æ¨¡å¼ é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰ æ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰ ç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰ è£…é¥°æ¨¡å¼ï¼ˆDecoratorï¼‰ å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰ äº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰ ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰ åˆ›å»ºå‹æ¨¡å¼ ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factoryï¼‰ å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Methodï¼‰ æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factoryï¼‰ åˆ›å»ºè€…ï¼ˆç”Ÿæˆå™¨ï¼‰æ¨¡å¼ï¼ˆBuilderï¼‰ åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰ å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰ è¿›é˜¶å­¦ä¹  æ€»å½’çº³å¤ä¹  è®¾è®¡æ¨¡å¼ç®€è¿° æ¨¡å¼ä¹‹é—´çš„å…³ç³» Refactoringguru.cn åˆ›å»ºå‹æ¨¡å¼ è¿™ç±»æ¨¡å¼æä¾›åˆ›å»ºå¯¹è±¡çš„æœºåˆ¶ï¼Œ èƒ½å¤Ÿæå‡å·²æœ‰ä»£ç çš„çµæ´»æ€§å’Œå¯å¤ç”¨æ€§ã€‚ å·¥å‚æ–¹æ³•Factory MethodæŠ½è±¡å·¥å‚Abstract Factoryç”Ÿæˆå™¨BuilderåŸå‹Prototypeå•ä¾‹Singleton ç»“æ„å‹æ¨¡å¼ è¿™ç±»æ¨¡å¼ä»‹ç»å¦‚ä½•å°†å¯¹è±¡å’Œç±»ç»„è£…æˆè¾ƒå¤§çš„ç»“æ„ï¼Œ å¹¶åŒæ—¶ä¿æŒç»“æ„çš„çµæ´»å’Œé«˜æ•ˆã€‚ é€‚é…å™¨Adapteræ¡¥æ¥Bridgeç»„åˆCompositeè£…é¥°Decoratorå¤–è§‚Facadeäº«å…ƒFlyweightä»£ç†Proxy è¡Œä¸ºæ¨¡å¼ è¿™ç±»æ¨¡å¼è´Ÿè´£å¯¹è±¡é—´çš„é«˜æ•ˆæ²Ÿé€šå’ŒèŒè´£å§”æ´¾ã€‚ è´£ä»»é“¾Chain of Responsibilityå‘½ä»¤Commandè¿­ä»£å™¨Iteratorä¸­ä»‹è€…Mediatorå¤‡å¿˜å½•Mementoè§‚å¯Ÿè€…ObserverçŠ¶æ€Stateç­–ç•¥Strategyæ¨¡æ¿æ–¹æ³•Template Methodè®¿é—®è€…Visitor åˆ›å»ºå‹æ¨¡å¼ åˆ›å»ºå‹æ¨¡å¼çš„ä¸»è¦å…³æ³¨ç‚¹æ˜¯â€œæ€æ ·åˆ›å»ºå¯¹è±¡ï¼Ÿâ€ï¼Œå®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯â€œå°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»â€ã€‚è¿™æ ·å¯ä»¥é™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œä½¿ç”¨è€…ä¸éœ€è¦å…³æ³¨å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç›¸å…³çš„å·¥å‚æ¥å®Œæˆã€‚å°±åƒæˆ‘ä»¬å»å•†åœºè´­ä¹°å•†å“æ—¶ï¼Œä¸éœ€è¦çŸ¥é“å•†å“æ˜¯æ€ä¹ˆç”Ÿäº§å‡ºæ¥ä¸€æ ·ï¼Œå› ä¸ºå®ƒä»¬ç”±ä¸“é—¨çš„å‚å•†ç”Ÿäº§ã€‚ å•ä¾‹ï¼ˆSingletonï¼‰æ¨¡å¼ï¼šæŸä¸ªç±»åªèƒ½ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œè¯¥ç±»æä¾›äº†ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ä¾›å¤–éƒ¨è·å–è¯¥å®ä¾‹ï¼Œå…¶æ‹“å±•æ˜¯æœ‰é™å¤šä¾‹æ¨¡å¼ã€‚ åŸå‹ï¼ˆPrototypeï¼‰æ¨¡å¼ï¼šå°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹ï¼Œé€šè¿‡å¯¹å…¶è¿›è¡Œå¤åˆ¶è€Œå…‹éš†å‡ºå¤šä¸ªå’ŒåŸå‹ç±»ä¼¼çš„æ–°å®ä¾‹ã€‚ å·¥å‚æ–¹æ³•ï¼ˆFactoryMethodï¼‰æ¨¡å¼ï¼šå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºäº§å“çš„æ¥å£ï¼Œç”±å­ç±»å†³å®šç”Ÿäº§ä»€ä¹ˆäº§å“ã€‚ æŠ½è±¡å·¥å‚ï¼ˆAbstractFactoryï¼‰æ¨¡å¼ï¼šæä¾›ä¸€ä¸ªåˆ›å»ºäº§å“æ—çš„æ¥å£ï¼Œå…¶æ¯ä¸ªå­ç±»å¯ä»¥ç”Ÿäº§ä¸€ç³»åˆ—ç›¸å…³çš„äº§å“ã€‚ å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼ï¼šå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡åˆ†è§£æˆå¤šä¸ªç›¸å¯¹ç®€å•çš„éƒ¨åˆ†ï¼Œç„¶åæ ¹æ®ä¸åŒéœ€è¦åˆ†åˆ«åˆ›å»ºå®ƒä»¬ï¼Œæœ€åæ„å»ºæˆè¯¥å¤æ‚å¯¹è±¡ã€‚ ç»“æ„å‹æ¨¡å¼ ç»“æ„å‹æ¨¡å¼æè¿°å¦‚ä½•å°†ç±»æˆ–å¯¹è±¡æŒ‰æŸç§å¸ƒå±€ç»„æˆæ›´å¤§çš„ç»“æ„ã€‚å®ƒåˆ†ä¸ºç±»ç»“æ„å‹æ¨¡å¼å’Œå¯¹è±¡ç»“æ„å‹æ¨¡å¼ï¼Œå‰è€…é‡‡ç”¨ç»§æ‰¿æœºåˆ¶æ¥ç»„ç»‡æ¥å£å’Œç±»ï¼Œåè€…é‡†ç”¨ç»„åˆæˆ–èšåˆæ¥ç»„åˆå¯¹è±¡ã€‚ç”±äºç»„åˆå…³ç³»æˆ–èšåˆå…³ç³»æ¯”ç»§æ‰¿å…³ç³»è€¦åˆåº¦ä½ï¼Œæ»¡è¶³â€œåˆæˆå¤ç”¨åŸåˆ™â€ï¼Œæ‰€ä»¥å¯¹è±¡ç»“æ„å‹æ¨¡å¼æ¯”ç±»ç»“æ„å‹æ¨¡å¼å…·æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚ ä»£ç†ï¼ˆProxyï¼‰æ¨¡å¼ï¼šä¸ºæŸå¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¯¥å¯¹è±¡çš„è®¿é—®ã€‚å³å®¢æˆ·ç«¯é€šè¿‡ä»£ç†é—´æ¥åœ°è®¿é—®è¯¥å¯¹è±¡ï¼Œä»è€Œé™åˆ¶ã€å¢å¼ºæˆ–ä¿®æ”¹è¯¥å¯¹è±¡çš„ä¸€äº›ç‰¹æ€§ã€‚ é€‚é…å™¨ï¼ˆAdapterï¼‰æ¨¡å¼ï¼šå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»èƒ½ä¸€èµ·å·¥ä½œã€‚ æ¡¥æ¥ï¼ˆBridgeï¼‰æ¨¡å¼ï¼šå°†æŠ½è±¡ä¸å®ç°åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚å®ƒæ˜¯ç”¨ç»„åˆå…³ç³»ä»£æ›¿ç»§æ‰¿å…³ç³»æ¥å®ç°çš„ï¼Œä»è€Œé™ä½äº†æŠ½è±¡å’Œå®ç°è¿™ä¸¤ä¸ªå¯å˜ç»´åº¦çš„è€¦åˆåº¦ã€‚ è£…é¥°ï¼ˆDecoratorï¼‰æ¨¡å¼ï¼šåŠ¨æ€åœ°ç»™å¯¹è±¡å¢åŠ ä¸€äº›èŒè´£ï¼Œå³å¢åŠ å…¶é¢å¤–çš„åŠŸèƒ½ã€‚ å¤–è§‚ï¼ˆFacadeï¼‰æ¨¡å¼ï¼šä¸ºå¤šä¸ªå¤æ‚çš„å­ç³»ç»Ÿæä¾›ä¸€ä¸ªä¸€è‡´çš„æ¥å£ï¼Œä½¿è¿™äº›å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“è¢«è®¿é—®ã€‚ äº«å…ƒï¼ˆFlyweightï¼‰æ¨¡å¼ï¼šè¿ç”¨å…±äº«æŠ€æœ¯æ¥æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨ã€‚ ç»„åˆï¼ˆCompositeï¼‰æ¨¡å¼ï¼šå°†å¯¹è±¡ç»„åˆæˆæ ‘çŠ¶å±‚æ¬¡ç»“æ„ï¼Œä½¿ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡å…·æœ‰ä¸€è‡´çš„è®¿é—®æ€§ã€‚ è¡Œä¸ºå‹æ¨¡å¼ è¡Œä¸ºå‹æ¨¡å¼ç”¨äºæè¿°ç¨‹åºåœ¨è¿è¡Œæ—¶å¤æ‚çš„æµç¨‹æ§åˆ¶ï¼Œå³æè¿°å¤šä¸ªç±»æˆ–å¯¹è±¡ä¹‹é—´æ€æ ·ç›¸äº’åä½œå…±åŒå®Œæˆå•ä¸ªå¯¹è±¡éƒ½æ— æ³•å•ç‹¬å®Œæˆçš„ä»»åŠ¡ï¼Œå®ƒæ¶‰åŠç®—æ³•ä¸å¯¹è±¡é—´èŒè´£çš„åˆ†é…ã€‚è¡Œä¸ºå‹æ¨¡å¼åˆ†ä¸ºç±»è¡Œä¸ºæ¨¡å¼å’Œå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼Œå‰è€…é‡‡ç”¨ç»§æ‰¿æœºåˆ¶æ¥åœ¨ç±»é—´åˆ†æ´¾è¡Œä¸ºï¼Œåè€…é‡‡ç”¨ç»„åˆæˆ–èšåˆåœ¨å¯¹è±¡é—´åˆ†é…è¡Œä¸ºã€‚ç”±äºç»„åˆå…³ç³»æˆ–èšåˆå…³ç³»æ¯”ç»§æ‰¿å…³ç³»è€¦åˆåº¦ä½ï¼Œæ»¡è¶³â€œåˆæˆå¤ç”¨åŸåˆ™â€ï¼Œæ‰€ä»¥å¯¹è±¡è¡Œä¸ºæ¨¡å¼æ¯”ç±»è¡Œä¸ºæ¨¡å¼å…·æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚ æ¨¡æ¿æ–¹æ³•ï¼ˆTemplate Methodï¼‰æ¨¡å¼ï¼šå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•éª¨æ¶ï¼Œå°†ç®—æ³•çš„ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»åœ¨å¯ä»¥ä¸æ”¹å˜è¯¥ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚ ç­–ç•¥ï¼ˆStrategyï¼‰æ¨¡å¼ï¼šå®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä¸”ç®—æ³•çš„æ”¹å˜ä¸ä¼šå½±å“ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚ å‘½ä»¤ï¼ˆCommandï¼‰æ¨¡å¼ï¼šå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å‘å‡ºè¯·æ±‚çš„è´£ä»»å’Œæ‰§è¡Œè¯·æ±‚çš„è´£ä»»åˆ†å‰²å¼€ã€‚ èŒè´£é“¾ï¼ˆChain of Responsibilityï¼‰æ¨¡å¼ï¼šæŠŠè¯·æ±‚ä»é“¾ä¸­çš„ä¸€ä¸ªå¯¹è±¡ä¼ åˆ°ä¸‹ä¸€ä¸ªå¯¹è±¡ï¼Œç›´åˆ°è¯·æ±‚è¢«å“åº”ä¸ºæ­¢ã€‚é€šè¿‡è¿™ç§æ–¹å¼å»é™¤å¯¹è±¡ä¹‹é—´çš„è€¦åˆã€‚ çŠ¶æ€ï¼ˆStateï¼‰æ¨¡å¼ï¼šå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºèƒ½åŠ›ã€‚ è§‚å¯Ÿè€…ï¼ˆObserverï¼‰æ¨¡å¼ï¼šå¤šä¸ªå¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šå…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒæŠŠè¿™ç§æ”¹å˜é€šçŸ¥ç»™å…¶ä»–å¤šä¸ªå¯¹è±¡ï¼Œä»è€Œå½±å“å…¶ä»–å¯¹è±¡çš„è¡Œä¸ºã€‚ ä¸­ä»‹è€…ï¼ˆMediatorï¼‰æ¨¡å¼ï¼šå®šä¹‰ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥ç®€åŒ–åŸæœ‰å¯¹è±¡ä¹‹é—´çš„äº¤äº’å…³ç³»ï¼Œé™ä½ç³»ç»Ÿä¸­å¯¹è±¡é—´çš„è€¦åˆåº¦ï¼Œä½¿åŸæœ‰å¯¹è±¡ä¹‹é—´ä¸å¿…ç›¸äº’äº†è§£ã€‚ è¿­ä»£å™¨ï¼ˆIteratorï¼‰æ¨¡å¼ï¼šæä¾›ä¸€ç§æ–¹æ³•æ¥é¡ºåºè®¿é—®èšåˆå¯¹è±¡ä¸­çš„ä¸€ç³»åˆ—æ•°æ®ï¼Œè€Œä¸æš´éœ²èšåˆå¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚ è®¿é—®è€…ï¼ˆVisitorï¼‰æ¨¡å¼ï¼šåœ¨ä¸æ”¹å˜é›†åˆå…ƒç´ çš„å‰æä¸‹ï¼Œä¸ºä¸€ä¸ªé›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ æä¾›å¤šç§è®¿é—®æ–¹å¼ï¼Œå³æ¯ä¸ªå…ƒç´ æœ‰å¤šä¸ªè®¿é—®è€…å¯¹è±¡è®¿é—®ã€‚ å¤‡å¿˜å½•ï¼ˆMementoï¼‰æ¨¡å¼ï¼šåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œè·å–å¹¶ä¿å­˜ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œä»¥ä¾¿ä»¥åæ¢å¤å®ƒã€‚ è§£é‡Šå™¨ï¼ˆInterpreterï¼‰æ¨¡å¼ï¼šæä¾›å¦‚ä½•å®šä¹‰è¯­è¨€çš„æ–‡æ³•ï¼Œä»¥åŠå¯¹è¯­è¨€å¥å­çš„è§£é‡Šæ–¹æ³•ï¼Œå³è§£é‡Šå™¨ã€‚ UML å·¥å…·ï¼šprocesson æ–¹æ³•å’Œå±æ€§çš„è®¿é—®æƒé™ - private # protected + public ~ package private å…³ç³» æ¦‚è§ˆ ç»§æ‰¿ | æ³›åŒ–ã€ç»§æ‰¿å¹¶ç‰¹æ®Šã€‘ 12ã€æ³›åŒ–å…³ç³»ã€‘ï¼šæ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œè¡¨ç¤ºä¸€èˆ¬ä¸ç‰¹æ®Šçš„å…³ç³»ï¼Œå®ƒæŒ‡å®šäº†å­ç±»å¦‚ä½•ç‰¹åŒ–çˆ¶ç±»çš„æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºã€‚ä¾‹å¦‚ï¼šè€è™æ˜¯åŠ¨ç‰©çš„ä¸€ç§ï¼Œå³æœ‰è€è™çš„ç‰¹æ€§ä¹Ÿæœ‰åŠ¨ç‰©çš„å…±æ€§ã€‚ã€ç®­å¤´æŒ‡å‘ã€‘ï¼šå¸¦ä¸‰è§’ç®­å¤´çš„å®çº¿ï¼Œç®­å¤´æŒ‡å‘çˆ¶ç±» å®ç°ã€æ¥å£å…¨å®ç°ã€‘ 123ã€å®ç°å…³ç³»ã€‘ï¼šæ˜¯ä¸€ç§ç±»ä¸æ¥å£çš„å…³ç³»ï¼Œè¡¨ç¤ºç±»æ˜¯æ¥å£æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºçš„å®ç°ã€ç®­å¤´æŒ‡å‘ã€‘ï¼šå¸¦ä¸‰è§’ç®­å¤´çš„è™šçº¿ï¼Œç®­å¤´æŒ‡å‘æ¥å£ å…³è”ã€æˆ‘çŸ¥ä½ äº›å±ã€‘ 1234ã€å…³è”å…³ç³»ã€‘ï¼šæ˜¯ä¸€ç§æ‹¥æœ‰çš„å…³ç³»,å®ƒä½¿ä¸€ä¸ªç±»çŸ¥é“å¦ä¸€ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•ï¼›å¦‚ï¼šè€å¸ˆä¸å­¦ç”Ÿï¼Œä¸ˆå¤«ä¸å¦»å­å…³è”å¯ä»¥æ˜¯åŒå‘çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å•å‘çš„ã€‚åŒå‘çš„å…³è”å¯ä»¥æœ‰ä¸¤ä¸ªç®­å¤´æˆ–è€…æ²¡æœ‰ç®­å¤´ï¼Œå•å‘çš„å…³è”æœ‰ä¸€ä¸ªç®­å¤´ã€‚ã€ä»£ç ä½“ç°ã€‘ï¼šæˆå‘˜å˜é‡ã€ç®­å¤´åŠæŒ‡å‘ã€‘ï¼šå¸¦æ™®é€šç®­å¤´çš„å®å¿ƒçº¿ï¼ŒæŒ‡å‘è¢«æ‹¥æœ‰è€… èšåˆã€ä¸€å›¢åˆ†å‡ ä¸ªã€‘ 1234ã€èšåˆå…³ç³»ã€‘ï¼šæ˜¯æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ï¼Œä¸”éƒ¨åˆ†å¯ä»¥ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨ã€‚å¦‚è½¦å’Œè½®èƒæ˜¯æ•´ä½“å’Œéƒ¨åˆ†çš„å…³ç³».èšåˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯å¼ºçš„å…³è”å…³ç³»ï¼›å…³è”å’Œèšåˆåœ¨è¯­æ³•ä¸Šæ— æ³•åŒºåˆ†ï¼Œå¿…é¡»è€ƒå¯Ÿå…·ä½“çš„é€»è¾‘å…³ç³»ã€‚ã€ä»£ç ä½“ç°ã€‘ï¼šæˆå‘˜å˜é‡ã€ç®­å¤´åŠæŒ‡å‘ã€‘ï¼šå¸¦ç©ºå¿ƒè±å½¢çš„å®å¿ƒçº¿ï¼Œè±å½¢æŒ‡å‘æ•´ä½“ ç»„åˆã€ä¸€ä¸ªåˆ‡å‡ ä¸ªã€‘ 123ã€ç»„åˆå…³ç³»ã€‘ï¼šæ˜¯æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ï¼Œä½†éƒ¨åˆ†ä¸èƒ½ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨ã€‚æ²¡æœ‰å…¬å¸å°±ä¸å­˜åœ¨éƒ¨é—¨ ç»„åˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯æ¯”èšåˆå…³ç³»è¿˜è¦å¼ºçš„å…³ç³»ï¼Œå®ƒè¦æ±‚æ™®é€šçš„èšåˆå…³ç³»ä¸­ä»£è¡¨æ•´ä½“çš„å¯¹è±¡è´Ÿè´£ä»£è¡¨éƒ¨åˆ†çš„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€ä»£ç ä½“ç°ã€‘ï¼šæˆå‘˜å˜é‡ã€ç®­å¤´åŠæŒ‡å‘ã€‘ï¼šå¸¦å®å¿ƒè±å½¢çš„å®çº¿ï¼Œè±å½¢æŒ‡å‘æ•´ä½“ ä¾èµ–ã€æˆ‘è¦ç”¨ä½ çš„ã€‘ 12345ã€ä¾èµ–å…³ç³»ã€‘ï¼šæ˜¯ä¸€ç§ä½¿ç”¨çš„å…³ç³»,æ‰€ä»¥è¦å°½é‡ä¸ä½¿ç”¨åŒå‘çš„äº’ç›¸ä¾èµ–ã€‚ã€ä»£ç è¡¨ç°ã€‘ï¼šå±€éƒ¨å˜é‡ã€æ–¹æ³•çš„å‚æ•°æˆ–è€…å¯¹é™æ€æ–¹æ³•çš„è°ƒç”¨ã€ç®­å¤´åŠæŒ‡å‘ã€‘ï¼šå¸¦ç®­å¤´çš„è™šçº¿ï¼ŒæŒ‡å‘è¢«ä½¿ç”¨è€… å„ç§å…³ç³»çš„å¼ºå¼±é¡ºåºï¼š æ³›åŒ–= å®ç°&gt; ç»„åˆ&gt; èšåˆ&gt; å…³è”&gt; ä¾èµ– è®¾è®¡æ¨¡å¼é‡ç‚¹è¯¦è§£ Mybatisï¼ˆ 1ã€Builderæ¨¡å¼5ã€ç»„åˆæ¨¡å¼9ã€è¿­ä»£å™¨æ¨¡å¼2ã€å·¥å‚æ¨¡å¼3ã€å•ä¾‹æ¨¡å¼4ã€ä»£ç†6ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼7ã€é€‚é…å™¨æ¨¡å¼8ã€è£…é¥°è€…æ¨¡å¼ï¼‰ Springï¼ˆ1.ç®€å•å·¥å‚2.å·¥å‚æ–¹æ³•3.å•ä¾‹æ¨¡å¼4.é€‚é…å™¨æ¨¡å¼5.è£…é¥°å™¨æ¨¡å¼6.ä»£ç†æ¨¡å¼7.è§‚å¯Ÿè€…æ¨¡å¼8.ç­–ç•¥æ¨¡å¼9.æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ï¼‰ åˆ›å»ºå‹æ¨¡å¼ ã€Šå•ä¾‹æ¨¡å¼Singletonã€‹ ç‰¹ç‚¹ï¼š å•ä¾‹ç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼› è¯¥å•ä¾‹å¯¹è±¡å¿…é¡»ç”±å•ä¾‹ç±»è‡ªè¡Œåˆ›å»ºï¼› å•ä¾‹ç±»å¯¹å¤–æä¾›ä¸€ä¸ªè®¿é—®è¯¥å•ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚ ä¼˜ç‚¹ï¼š å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯å†…å­˜é‡Œåªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å†…å­˜çš„å¼€é”€ã€‚ å¯ä»¥é¿å…å¯¹èµ„æºçš„å¤šé‡å ç”¨ã€‚ å•ä¾‹æ¨¡å¼è®¾ç½®å…¨å±€è®¿é—®ç‚¹ï¼Œå¯ä»¥ä¼˜åŒ–å’Œå…±äº«èµ„æºçš„è®¿é—®ã€‚ ç¼ºç‚¹ï¼š å•ä¾‹æ¨¡å¼ä¸€èˆ¬æ²¡æœ‰æ¥å£ï¼Œæ‰©å±•å›°éš¾ã€‚å¦‚æœè¦æ‰©å±•ï¼Œåˆ™é™¤äº†ä¿®æ”¹åŸæ¥çš„ä»£ç ï¼Œæ²¡æœ‰ç¬¬äºŒç§é€”å¾„ï¼Œè¿èƒŒå¼€é—­åŸåˆ™ã€‚ åœ¨å¹¶å‘æµ‹è¯•ä¸­ï¼Œå•ä¾‹æ¨¡å¼ä¸åˆ©äºä»£ç è°ƒè¯•ã€‚åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå•ä¾‹ä¸­çš„ä»£ç æ²¡æœ‰æ‰§è¡Œå®Œï¼Œä¹Ÿä¸èƒ½æ¨¡æ‹Ÿç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ å•ä¾‹æ¨¡å¼çš„åŠŸèƒ½ä»£ç é€šå¸¸å†™åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œå¦‚æœåŠŸèƒ½è®¾è®¡ä¸åˆç†ï¼Œåˆ™å¾ˆå®¹æ˜“è¿èƒŒå•ä¸€èŒè´£åŸåˆ™ã€‚ å•ä¾‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š éœ€è¦é¢‘ç¹åˆ›å»ºçš„ä¸€äº›ç±»ï¼Œä½¿ç”¨å•ä¾‹å¯ä»¥é™ä½ç³»ç»Ÿçš„å†…å­˜å‹åŠ›ï¼Œå‡å°‘ GCã€‚ æŸç±»åªè¦æ±‚ç”Ÿæˆä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚ä¸€ä¸ªç­ä¸­çš„ç­é•¿ã€æ¯ä¸ªäººçš„èº«ä»½è¯å·ç­‰ã€‚ æŸäº›ç±»åˆ›å»ºå®ä¾‹æ—¶å ç”¨èµ„æºè¾ƒå¤šï¼Œæˆ–å®ä¾‹åŒ–è€—æ—¶è¾ƒé•¿ï¼Œä¸”ç»å¸¸ä½¿ç”¨ã€‚ æŸç±»éœ€è¦é¢‘ç¹å®ä¾‹åŒ–ï¼Œè€Œåˆ›å»ºçš„å¯¹è±¡åˆé¢‘ç¹è¢«é”€æ¯çš„æ—¶å€™ï¼Œå¦‚å¤šçº¿ç¨‹çš„çº¿ç¨‹æ± ã€ç½‘ç»œè¿æ¥æ± ç­‰ã€‚ é¢‘ç¹è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶çš„å¯¹è±¡ã€‚ å¯¹äºä¸€äº›æ§åˆ¶ç¡¬ä»¶çº§åˆ«çš„æ“ä½œï¼Œæˆ–è€…ä»ç³»ç»Ÿä¸Šæ¥è®²åº”å½“æ˜¯å•ä¸€æ§åˆ¶é€»è¾‘çš„æ“ä½œï¼Œå¦‚æœæœ‰å¤šä¸ªå®ä¾‹ï¼Œåˆ™ç³»ç»Ÿä¼šå®Œå…¨ä¹±å¥—ã€‚ å½“å¯¹è±¡éœ€è¦è¢«å…±äº«çš„åœºåˆã€‚ç”±äºå•ä¾‹æ¨¡å¼åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå…±äº«è¯¥å¯¹è±¡å¯ä»¥èŠ‚çœå†…å­˜ï¼Œå¹¶åŠ å¿«å¯¹è±¡è®¿é—®é€Ÿåº¦ã€‚å¦‚ Web ä¸­çš„é…ç½®å¯¹è±¡ã€æ•°æ®åº“çš„è¿æ¥æ± ç­‰ã€‚ åˆ†ç±»JAVAå®ç°ï¼š æ‡’æ±‰å¼ï¼šç±»åŠ è½½æ—¶æ²¡æœ‰ç”Ÿæˆå•ä¾‹ï¼Œåªæœ‰å½“ç¬¬ä¸€æ¬¡è°ƒç”¨ getlnstance æ–¹æ³•æ—¶æ‰å»åˆ›å»ºè¿™ä¸ªå•ä¾‹ â€‹ å¦‚æœç¼–å†™çš„æ˜¯å¤šçº¿ç¨‹ç¨‹åºï¼Œåˆ™ä¸è¦åˆ é™¤ä¸Šä¾‹ä»£ç ä¸­çš„å…³é”®å­— volatile å’Œ synchronizedï¼Œå¦åˆ™å°†å­˜åœ¨çº¿ç¨‹éå®‰å…¨çš„é—®é¢˜ã€‚å¦‚æœä¸åˆ é™¤è¿™ä¸¤ä¸ªå…³é”®å­—å°±èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯æ¯æ¬¡è®¿é—®æ—¶éƒ½è¦åŒæ­¥ï¼Œä¼šå½±å“æ€§èƒ½ï¼Œä¸”æ¶ˆè€—æ›´å¤šçš„èµ„æºï¼Œè¿™æ˜¯æ‡’æ±‰å¼å•ä¾‹çš„ç¼ºç‚¹ã€‚ 123456789101112public class LazySingleton { private static volatile LazySingleton instance = null; //ä¿è¯ instance åœ¨æ‰€æœ‰çº¿ç¨‹ä¸­åŒæ­¥ private LazySingleton() { } //private é¿å…ç±»åœ¨å¤–éƒ¨è¢«å®ä¾‹åŒ– public static synchronized LazySingleton getInstance() { //getInstance æ–¹æ³•å‰åŠ åŒæ­¥ if (instance == null) { instance = new LazySingleton(); } return instance; }} é¥¿æ±‰å¼ï¼šç±»ä¸€æ—¦åŠ è½½å°±åˆ›å»ºä¸€ä¸ªå•ä¾‹ï¼Œä¿è¯åœ¨è°ƒç”¨ getInstance æ–¹æ³•ä¹‹å‰å•ä¾‹å·²ç»å­˜åœ¨äº†ã€‚ 12345678public class HungrySingleton { private static final HungrySingleton instance = new HungrySingleton(); private HungrySingleton() { } public static HungrySingleton getInstance() { return instance; }} â€‹ é¥¿æ±‰å¼å•ä¾‹åœ¨ç±»åˆ›å»ºçš„åŒæ—¶å°±å·²ç»åˆ›å»ºå¥½ä¸€ä¸ªé™æ€çš„å¯¹è±¡ä¾›ç³»ç»Ÿä½¿ç”¨ï¼Œä»¥åä¸å†æ”¹å˜ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥ç›´æ¥ç”¨äºå¤šçº¿ç¨‹è€Œä¸ä¼šå‡ºç°é—®é¢˜ã€‚ ã€ŠåŸå‹æ¨¡å¼Prototypeã€‹ ç‰¹ç‚¹ï¼š ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºçš„å®ä¾‹ä½œä¸ºåŸå‹ï¼Œé€šè¿‡å¤åˆ¶è¯¥åŸå‹å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªå’ŒåŸå‹ç›¸åŒæˆ–ç›¸ä¼¼çš„æ–°å¯¹è±¡ã€‚ åŸå‹å®ä¾‹æŒ‡å®šäº†è¦åˆ›å»ºçš„å¯¹è±¡çš„ç§ç±»ã€‚ç”¨è¿™ç§æ–¹å¼åˆ›å»ºå¯¹è±¡éå¸¸é«˜æ•ˆï¼Œæ ¹æœ¬æ— é¡»çŸ¥é“å¯¹è±¡åˆ›å»ºçš„ç»†èŠ‚ã€‚ ä¼˜ç‚¹ï¼š Javaè‡ªå¸¦çš„åŸå‹æ¨¡å¼åŸºäºå†…å­˜äºŒè¿›åˆ¶æµçš„å¤åˆ¶ï¼Œåœ¨æ€§èƒ½ä¸Šæ¯”ç›´æ¥ new ä¸€ä¸ªå¯¹è±¡æ›´åŠ ä¼˜è‰¯ã€‚ æ·±å…‹éš†æ–¹å¼ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œä½¿ç”¨åŸå‹æ¨¡å¼å°†å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œå¹¶å°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥ï¼Œç®€åŒ–åˆ›å»ºå¯¹è±¡è¿‡ç¨‹ï¼Œä»¥ä¾¿åœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨ï¼ˆä¾‹å¦‚æ¢å¤åˆ°å†å²æŸä¸€çŠ¶æ€ï¼‰ï¼Œå¯è¾…åŠ©å®ç°æ’¤é”€æ“ä½œã€‚ ç¼ºç‚¹ï¼š éœ€è¦ä¸ºæ¯ä¸€ä¸ªç±»éƒ½é…ç½®ä¸€ä¸ª clone æ–¹æ³• clone æ–¹æ³•ä½äºç±»çš„å†…éƒ¨ï¼Œå½“å¯¹å·²æœ‰ç±»è¿›è¡Œæ”¹é€ çš„æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹ä»£ç ï¼Œè¿èƒŒäº†å¼€é—­åŸåˆ™ã€‚ å½“å®ç°æ·±å…‹éš†æ—¶ï¼Œéœ€è¦ç¼–å†™è¾ƒä¸ºå¤æ‚çš„ä»£ç ï¼Œè€Œä¸”å½“å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤šé‡åµŒå¥—å¼•ç”¨æ—¶ï¼Œä¸ºäº†å®ç°æ·±å…‹éš†ï¼Œæ¯ä¸€å±‚å¯¹è±¡å¯¹åº”çš„ç±»éƒ½å¿…é¡»æ”¯æŒæ·±å…‹éš†ï¼Œå®ç°èµ·æ¥ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚å› æ­¤ï¼Œæ·±å…‹éš†ã€æµ…å…‹éš†éœ€è¦è¿ç”¨å¾—å½“ã€‚ è§’è‰²ï¼š æŠ½è±¡åŸå‹ç±»ï¼šè§„å®šäº†å…·ä½“åŸå‹å¯¹è±¡å¿…é¡»å®ç°çš„æ¥å£ã€‚ å…·ä½“åŸå‹ç±»ï¼šå®ç°æŠ½è±¡åŸå‹ç±»çš„ clone() æ–¹æ³•ï¼Œå®ƒæ˜¯å¯è¢«å¤åˆ¶çš„å¯¹è±¡ã€‚ è®¿é—®ç±»ï¼šä½¿ç”¨å…·ä½“åŸå‹ç±»ä¸­çš„ clone() æ–¹æ³•æ¥å¤åˆ¶æ–°çš„å¯¹è±¡ã€‚ æµ…å…‹éš†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡çš„å±æ€§å’ŒåŸæ¥å¯¹è±¡å®Œå…¨ç›¸åŒï¼Œå¯¹äºéåŸºæœ¬ç±»å‹å±æ€§ï¼Œä»æŒ‡å‘åŸæœ‰å±æ€§æ‰€æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚ æ·±å…‹éš†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå±æ€§ä¸­å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ä¹Ÿä¼šè¢«å…‹éš†ï¼Œä¸å†æŒ‡å‘åŸæœ‰å¯¹è±¡åœ°å€ã€‚ åŸå‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å¯¹è±¡ä¹‹é—´ç›¸åŒæˆ–ç›¸ä¼¼ï¼Œå³åªæ˜¯ä¸ªåˆ«çš„å‡ ä¸ªå±æ€§ä¸åŒçš„æ—¶å€™ã€‚ åˆ›å»ºå¯¹è±¡æˆæœ¬è¾ƒå¤§ï¼Œä¾‹å¦‚åˆå§‹åŒ–æ—¶é—´é•¿ï¼Œå ç”¨CPUå¤ªå¤šï¼Œæˆ–è€…å ç”¨ç½‘ç»œèµ„æºå¤ªå¤šç­‰ï¼Œéœ€è¦ä¼˜åŒ–èµ„æºã€‚ åˆ›å»ºä¸€ä¸ªå¯¹è±¡éœ€è¦ç¹ççš„æ•°æ®å‡†å¤‡æˆ–è®¿é—®æƒé™ç­‰ï¼Œéœ€è¦æé«˜æ€§èƒ½æˆ–è€…æé«˜å®‰å…¨æ€§ã€‚ ç³»ç»Ÿä¸­å¤§é‡ä½¿ç”¨è¯¥ç±»å¯¹è±¡ï¼Œä¸”å„ä¸ªè°ƒç”¨è€…éƒ½éœ€è¦ç»™å®ƒçš„å±æ€§é‡æ–°èµ‹å€¼ã€‚ JAVAå®ç°ï¼š æµ…å…‹éš†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡çš„å±æ€§å’ŒåŸæ¥å¯¹è±¡å®Œå…¨ç›¸åŒï¼Œå¯¹äºéåŸºæœ¬ç±»å‹å±æ€§ï¼Œä»æŒ‡å‘åŸæœ‰å±æ€§æ‰€æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚ æ·±å…‹éš†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå±æ€§ä¸­å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ä¹Ÿä¼šè¢«å…‹éš†ï¼Œä¸å†æŒ‡å‘åŸæœ‰å¯¹è±¡åœ°å€ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364import java.util.*;interface Shape extends Cloneable { public Object clone(); //æ‹·è´ public void countArea(); //è®¡ç®—é¢ç§¯}class Circle implements Shape { public Object clone() { Circle w = null; try { w = (Circle) super.clone(); } catch (CloneNotSupportedException e) { System.out.println(&quot;æ‹·è´åœ†å¤±è´¥!&quot;); } return w; } public void countArea() { int r = 0; System.out.print(&quot;è¿™æ˜¯ä¸€ä¸ªåœ†ï¼Œè¯·è¾“å…¥åœ†çš„åŠå¾„ï¼š&quot;); Scanner input = new Scanner(System.in); r = input.nextInt(); System.out.println(&quot;è¯¥åœ†çš„é¢ç§¯=&quot; + 3.1415 * r * r + &quot;\\n&quot;); }}class Square implements Shape { public Object clone() { Square b = null; try { b = (Square) super.clone(); } catch (CloneNotSupportedException e) { System.out.println(&quot;æ‹·è´æ­£æ–¹å½¢å¤±è´¥!&quot;); } return b; } public void countArea() { int a = 0; System.out.print(&quot;è¿™æ˜¯ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œè¯·è¾“å…¥å®ƒçš„è¾¹é•¿ï¼š&quot;); Scanner input = new Scanner(System.in); a = input.nextInt(); System.out.println(&quot;è¯¥æ­£æ–¹å½¢çš„é¢ç§¯=&quot; + a * a + &quot;\\n&quot;); }}class ProtoTypeManager { private HashMap&lt;String, Shape&gt; ht = new HashMap&lt;String, Shape&gt;(); public ProtoTypeManager() { ht.put(&quot;Circle&quot;, new Circle()); ht.put(&quot;Square&quot;, new Square()); } public void addshape(String key, Shape obj) { ht.put(key, obj); } public Shape getShape(String key) { Shape temp = ht.get(key); return (Shape) temp.clone(); }}public class ProtoTypeShape { public static void main(String[] args) { ProtoTypeManager pm = new ProtoTypeManager(); Shape obj1 = (Circle) pm.getShape(&quot;Circle&quot;); obj1.countArea(); Shape obj2 = (Shape) pm.getShape(&quot;Square&quot;); obj2.countArea(); }} ã€Šç®€å•å·¥å‚æ¨¡å¼Simple Factory Patternã€‹ ç‰¹ç‚¹ï¼š å®šä¹‰ä¸€ä¸ªåˆ›å»ºäº§å“å¯¹è±¡çš„å·¥å‚æ¥å£ï¼Œå°†äº§å“å¯¹è±¡çš„å®é™…åˆ›å»ºå·¥ä½œæ¨è¿Ÿåˆ°å…·ä½“å­å·¥å‚ç±»å½“ä¸­ã€‚è¿™æ»¡è¶³åˆ›å»ºå‹æ¨¡å¼ä¸­æ‰€è¦æ±‚çš„â€œåˆ›å»ºä¸ä½¿ç”¨ç›¸åˆ†ç¦»â€çš„ç‰¹ç‚¹ éœ€è¦ç”Ÿæˆå¤æ‚å¯¹è±¡çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥å°è¯•è€ƒè™‘ä½¿ç”¨å·¥å‚æ¨¡å¼ã€‚å¤æ‚å¯¹è±¡æŒ‡çš„æ˜¯ç±»çš„æ„é€ å‡½æ•°å‚æ•°è¿‡å¤šç­‰å¯¹ç±»çš„æ„é€ æœ‰å½±å“çš„æƒ…å†µï¼Œå› ä¸ºç±»çš„æ„é€ è¿‡äºå¤æ‚ï¼Œå¦‚æœç›´æ¥åœ¨å…¶ä»–ä¸šåŠ¡ç±»å†…ä½¿ç”¨ï¼Œåˆ™ä¸¤è€…çš„è€¦åˆè¿‡é‡ï¼Œåç»­ä¸šåŠ¡æ›´æ”¹ï¼Œå°±éœ€è¦åœ¨ä»»ä½•å¼•ç”¨è¯¥ç±»çš„æºä»£ç å†…è¿›è¡Œæ›´æ”¹ï¼Œå…‰æ˜¯æŸ¥æ‰¾æ‰€æœ‰ä¾èµ–å°±å¾ˆæ¶ˆè€—æ—¶é—´äº†ï¼Œæ›´åˆ«è¯´è¦ä¸€ä¸ªä¸€ä¸ªä¿®æ”¹äº†ã€‚ ä¼˜ç‚¹ï¼š å·¥å‚ç±»åŒ…å«å¿…è¦çš„é€»è¾‘åˆ¤æ–­ï¼Œå¯ä»¥å†³å®šåœ¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºå“ªä¸€ä¸ªäº§å“çš„å®ä¾‹ã€‚å®¢æˆ·ç«¯å¯ä»¥å…é™¤ç›´æ¥åˆ›å»ºäº§å“å¯¹è±¡çš„èŒè´£ï¼Œå¾ˆæ–¹ä¾¿çš„åˆ›å»ºå‡ºç›¸åº”çš„äº§å“ã€‚å·¥å‚å’Œäº§å“çš„èŒè´£åŒºåˆ†æ˜ç¡®ã€‚ å®¢æˆ·ç«¯æ— éœ€çŸ¥é“æ‰€åˆ›å»ºå…·ä½“äº§å“çš„ç±»åï¼Œåªéœ€çŸ¥é“å‚æ•°å³å¯ã€‚ ä¹Ÿå¯ä»¥å¼•å…¥é…ç½®æ–‡ä»¶ï¼Œåœ¨ä¸ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹æ›´æ¢å’Œæ·»åŠ æ–°çš„å…·ä½“äº§å“ç±»ã€‚ ç¼ºç‚¹ï¼š ç®€å•å·¥å‚æ¨¡å¼çš„å·¥å‚ç±»å•ä¸€ï¼Œè´Ÿè´£æ‰€æœ‰äº§å“çš„åˆ›å»ºï¼ŒèŒè´£è¿‡é‡ï¼Œä¸€æ—¦å¼‚å¸¸ï¼Œæ•´ä¸ªç³»ç»Ÿå°†å—å½±å“ã€‚ä¸”å·¥å‚ç±»ä»£ç ä¼šéå¸¸è‡ƒè‚¿ï¼Œè¿èƒŒé«˜èšåˆåŸåˆ™ã€‚ ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼ä¼šå¢åŠ ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°ï¼ˆå¼•å…¥æ–°çš„å·¥å‚ç±»ï¼‰ï¼Œå¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦å’Œç†è§£éš¾åº¦ ç³»ç»Ÿæ‰©å±•å›°éš¾ï¼Œä¸€æ—¦å¢åŠ æ–°äº§å“ä¸å¾—ä¸ä¿®æ”¹å·¥å‚é€»è¾‘ï¼Œåœ¨äº§å“ç±»å‹è¾ƒå¤šæ—¶ï¼Œå¯èƒ½é€ æˆé€»è¾‘è¿‡äºå¤æ‚ ç®€å•å·¥å‚æ¨¡å¼ä½¿ç”¨äº† static å·¥å‚æ–¹æ³•ï¼Œé€ æˆå·¥å‚è§’è‰²æ— æ³•å½¢æˆåŸºäºç»§æ‰¿çš„ç­‰çº§ç»“æ„ã€‚ è§’è‰²ï¼š ç®€å•å·¥å‚ï¼ˆSimpleFactoryï¼‰ï¼šæ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„æ ¸å¿ƒï¼Œè´Ÿè´£å®ç°åˆ›å»ºæ‰€æœ‰å®ä¾‹çš„å†…éƒ¨é€»è¾‘ã€‚å·¥å‚ç±»çš„åˆ›å»ºäº§å“ç±»çš„æ–¹æ³•å¯ä»¥è¢«å¤–ç•Œç›´æ¥è°ƒç”¨ï¼Œåˆ›å»ºæ‰€éœ€çš„äº§å“å¯¹è±¡ã€‚ æŠ½è±¡äº§å“ï¼ˆProductï¼‰ï¼šæ˜¯ç®€å•å·¥å‚åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡çš„çˆ¶ç±»ï¼Œè´Ÿè´£æè¿°æ‰€æœ‰å®ä¾‹å…±æœ‰çš„å…¬å…±æ¥å£ã€‚ å…·ä½“äº§å“ï¼ˆConcreteProductï¼‰ï¼šæ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„åˆ›å»ºç›®æ ‡ã€‚ ç®€å•å·¥å‚æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š ç”Ÿæˆå¤æ‚å¯¹è±¡ JAVAå®ç° 123456789101112131415161718192021222324252627282930313233343536public class Client { public static void main(String[] args) { } //æŠ½è±¡äº§å“ public interface Product { void show(); } //å…·ä½“äº§å“ï¼šProductA static class ConcreteProduct1 implements Product { public void show() { System.out.println(&quot;å…·ä½“äº§å“1æ˜¾ç¤º...&quot;); } } //å…·ä½“äº§å“ï¼šProductB static class ConcreteProduct2 implements Product { public void show() { System.out.println(&quot;å…·ä½“äº§å“2æ˜¾ç¤º...&quot;); } } final class Const { static final int PRODUCT_A = 0; static final int PRODUCT_B = 1; static final int PRODUCT_C = 2; } static class SimpleFactory { public static Product makeProduct(int kind) { switch (kind) { case Const.PRODUCT_A: return new ConcreteProduct1(); case Const.PRODUCT_B: return new ConcreteProduct2(); } return null; } }} ã€Šå·¥å‚æ¨¡å¼Factory Patternã€‹ ç‰¹ç‚¹ï¼š å¯ä»¥ä½¿ç³»ç»Ÿåœ¨ä¸ä¿®æ”¹åŸæ¥ä»£ç çš„æƒ…å†µä¸‹å¼•è¿›æ–°çš„äº§å“ï¼Œå³æ»¡è¶³å¼€é—­åŸåˆ™ã€‚ ä¼˜ç‚¹ï¼š ç”¨æˆ·åªéœ€è¦çŸ¥é“å…·ä½“å·¥å‚çš„åç§°å°±å¯å¾—åˆ°æ‰€è¦çš„äº§å“ï¼Œæ— é¡»çŸ¥é“äº§å“çš„å…·ä½“åˆ›å»ºè¿‡ç¨‹ã€‚ çµæ´»æ€§å¢å¼ºï¼Œå¯¹äºæ–°äº§å“çš„åˆ›å»ºï¼Œåªéœ€å¤šå†™ä¸€ä¸ªç›¸åº”çš„å·¥å‚ç±»ã€‚ å…¸å‹çš„è§£è€¦æ¡†æ¶ã€‚é«˜å±‚æ¨¡å—åªéœ€è¦çŸ¥é“äº§å“çš„æŠ½è±¡ç±»ï¼Œæ— é¡»å…³å¿ƒå…¶ä»–å®ç°ç±»ï¼Œæ»¡è¶³è¿ªç±³ç‰¹æ³•åˆ™ã€ä¾èµ–å€’ç½®åŸåˆ™å’Œé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚ ç¼ºç‚¹ï¼š ç±»çš„ä¸ªæ•°å®¹æ˜“è¿‡å¤šï¼Œå¢åŠ å¤æ‚åº¦ å¢åŠ äº†ç³»ç»Ÿçš„æŠ½è±¡æ€§å’Œç†è§£éš¾åº¦ æŠ½è±¡äº§å“åªèƒ½ç”Ÿäº§ä¸€ç§äº§å“ï¼Œæ­¤å¼Šç«¯å¯ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼è§£å†³ã€‚ è§’è‰²ï¼š æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰ï¼šæä¾›äº†åˆ›å»ºäº§å“çš„æ¥å£ï¼Œè°ƒç”¨è€…é€šè¿‡å®ƒè®¿é—®å…·ä½“å·¥å‚çš„å·¥å‚æ–¹æ³• newProduct() æ¥åˆ›å»ºäº§å“ã€‚ å…·ä½“å·¥å‚ï¼ˆConcreteFactoryï¼‰ï¼šä¸»è¦æ˜¯å®ç°æŠ½è±¡å·¥å‚ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œå®Œæˆå…·ä½“äº§å“çš„åˆ›å»ºã€‚ æŠ½è±¡äº§å“ï¼ˆProductï¼‰ï¼šå®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚ å…·ä½“äº§å“ï¼ˆConcreteProductï¼‰ï¼šå®ç°äº†æŠ½è±¡äº§å“è§’è‰²æ‰€å®šä¹‰çš„æ¥å£ï¼Œç”±å…·ä½“å·¥å‚æ¥åˆ›å»ºï¼Œå®ƒåŒå…·ä½“å·¥å‚ä¹‹é—´ä¸€ä¸€å¯¹åº”ã€‚ å·¥å‚æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å®¢æˆ·åªçŸ¥é“åˆ›å»ºäº§å“çš„å·¥å‚åï¼Œè€Œä¸çŸ¥é“å…·ä½“çš„äº§å“åã€‚å¦‚ TCL ç”µè§†å·¥å‚ã€æµ·ä¿¡ç”µè§†å·¥å‚ç­‰ã€‚ åˆ›å»ºå¯¹è±¡çš„ä»»åŠ¡ç”±å¤šä¸ªå…·ä½“å­å·¥å‚ä¸­çš„æŸä¸€ä¸ªå®Œæˆï¼Œè€ŒæŠ½è±¡å·¥å‚åªæä¾›åˆ›å»ºäº§å“çš„æ¥å£ã€‚ å®¢æˆ·ä¸å…³å¿ƒåˆ›å»ºäº§å“çš„ç»†èŠ‚ï¼Œåªå…³å¿ƒäº§å“çš„å“ç‰Œ JAVAå®ç° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849package FactoryMethod;public class AbstractFactoryTest { public static void main(String[] args) { try { Product a; AbstractFactory af; af = (AbstractFactory) ReadXML1.getObject(); a = af.newProduct(); a.show(); } catch (Exception e) { System.out.println(e.getMessage()); } }}//æŠ½è±¡äº§å“ï¼šæä¾›äº†äº§å“çš„æ¥å£interface Product { public void show();}//å…·ä½“äº§å“1ï¼šå®ç°æŠ½è±¡äº§å“ä¸­çš„æŠ½è±¡æ–¹æ³•class ConcreteProduct1 implements Product { public void show() { System.out.println(&quot;å…·ä½“äº§å“1æ˜¾ç¤º...&quot;); }}//å…·ä½“äº§å“2ï¼šå®ç°æŠ½è±¡äº§å“ä¸­çš„æŠ½è±¡æ–¹æ³•class ConcreteProduct2 implements Product { public void show() { System.out.println(&quot;å…·ä½“äº§å“2æ˜¾ç¤º...&quot;); }}//æŠ½è±¡å·¥å‚ï¼šæä¾›äº†å‚å“çš„ç”Ÿæˆæ–¹æ³•interface AbstractFactory { public Product newProduct();}//å…·ä½“å·¥å‚1ï¼šå®ç°äº†å‚å“çš„ç”Ÿæˆæ–¹æ³•class ConcreteFactory1 implements AbstractFactory { public Product newProduct() { System.out.println(&quot;å…·ä½“å·¥å‚1ç”Ÿæˆ--&gt;å…·ä½“äº§å“1...&quot;); return new ConcreteProduct1(); }}//å…·ä½“å·¥å‚2ï¼šå®ç°äº†å‚å“çš„ç”Ÿæˆæ–¹æ³•class ConcreteFactory2 implements AbstractFactory { public Product newProduct() { System.out.println(&quot;å…·ä½“å·¥å‚2ç”Ÿæˆ--&gt;å…·ä½“äº§å“2...&quot;); return new ConcreteProduct2(); }} 12345678910111213141516171819202122232425262728package FactoryMethod;import javax.xml.parsers.*;import org.w3c.dom.*;import java.io.*;class ReadXML1 { //è¯¥æ–¹æ³•ç”¨äºä»XMLé…ç½®æ–‡ä»¶ä¸­æå–å…·ä½“ç±»ç±»åï¼Œå¹¶è¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ public static Object getObject() { try { //åˆ›å»ºæ–‡æ¡£å¯¹è±¡ DocumentBuilderFactory dFactory = DocumentBuilderFactory.newInstance(); DocumentBuilder builder = dFactory.newDocumentBuilder(); Document doc; doc = builder.parse(new File(&quot;src/FactoryMethod/config1.xml&quot;)); //è·å–åŒ…å«ç±»åçš„æ–‡æœ¬èŠ‚ç‚¹ NodeList nl = doc.getElementsByTagName(&quot;className&quot;); Node classNode = nl.item(0).getFirstChild(); String cName = &quot;FactoryMethod.&quot; + classNode.getNodeValue(); //System.out.println(&quot;æ–°ç±»åï¼š&quot;+cName); //é€šè¿‡ç±»åç”Ÿæˆå®ä¾‹å¯¹è±¡å¹¶å°†å…¶è¿”å› Class&lt;?&gt; c = Class.forName(cName); Object obj = c.newInstance(); return obj; } catch (Exception e) { e.printStackTrace(); return null; } }} ã€ŠæŠ½è±¡å·¥å‚æ¨¡å¼Abstract Factory Patternã€‹ ç‰¹ç‚¹ï¼š ä¸€ç§ä¸ºè®¿é—®ç±»æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œä¸”è®¿é—®ç±»æ— é¡»æŒ‡å®šæ‰€è¦äº§å“çš„å…·ä½“ç±»å°±èƒ½å¾—åˆ°åŒæ—çš„ä¸åŒç­‰çº§çš„äº§å“çš„æ¨¡å¼ç»“æ„ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å‡çº§ç‰ˆæœ¬ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åªç”Ÿäº§ä¸€ä¸ªç­‰çº§çš„äº§å“ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼å¯ç”Ÿäº§å¤šä¸ªç­‰çº§çš„äº§å“ã€‚ ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸€èˆ¬è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ã€‚ ç³»ç»Ÿä¸­æœ‰å¤šä¸ªäº§å“æ—ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚åˆ›å»ºåŒä¸€æ—ä½†å±äºä¸åŒç­‰çº§ç»“æ„çš„äº§å“ã€‚ ç³»ç»Ÿä¸€æ¬¡åªå¯èƒ½æ¶ˆè´¹å…¶ä¸­æŸä¸€æ—äº§å“ï¼Œå³åŒæ—çš„äº§å“ä¸€èµ·ä½¿ç”¨ã€‚ ä¼˜ç‚¹ï¼š ç”¨æˆ·åªéœ€è¦çŸ¥é“å…·ä½“å·¥å‚çš„åç§°å°±å¯å¾—åˆ°æ‰€è¦çš„äº§å“ï¼Œæ— é¡»çŸ¥é“äº§å“çš„å…·ä½“åˆ›å»ºè¿‡ç¨‹ã€‚ çµæ´»æ€§å¢å¼ºï¼Œå¯¹äºæ–°äº§å“çš„åˆ›å»ºï¼Œåªéœ€å¤šå†™ä¸€ä¸ªç›¸åº”çš„å·¥å‚ç±»ã€‚ å…¸å‹çš„è§£è€¦æ¡†æ¶ã€‚é«˜å±‚æ¨¡å—åªéœ€è¦çŸ¥é“äº§å“çš„æŠ½è±¡ç±»ï¼Œæ— é¡»å…³å¿ƒå…¶ä»–å®ç°ç±»ï¼Œæ»¡è¶³è¿ªç±³ç‰¹æ³•åˆ™ã€ä¾èµ–å€’ç½®åŸåˆ™å’Œé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚ å¯ä»¥åœ¨ç±»çš„å†…éƒ¨å¯¹äº§å“æ—ä¸­ç›¸å…³è”çš„å¤šç­‰çº§äº§å“å…±åŒç®¡ç†ï¼Œè€Œä¸å¿…ä¸“é—¨å¼•å…¥å¤šä¸ªæ–°çš„ç±»æ¥è¿›è¡Œç®¡ç†ã€‚ å½“éœ€è¦äº§å“æ—æ—¶ï¼ŒæŠ½è±¡å·¥å‚å¯ä»¥ä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆåªä½¿ç”¨åŒä¸€ä¸ªäº§å“çš„äº§å“ç»„ã€‚ æŠ½è±¡å·¥å‚å¢å¼ºäº†ç¨‹åºçš„å¯æ‰©å±•æ€§ï¼Œå½“å¢åŠ ä¸€ä¸ªæ–°çš„äº§å“æ—æ—¶ï¼Œä¸éœ€è¦ä¿®æ”¹åŸä»£ç ï¼Œæ»¡è¶³å¼€é—­åŸåˆ™ã€‚ ç¼ºç‚¹ï¼š ç±»çš„ä¸ªæ•°å®¹æ˜“è¿‡å¤šï¼Œå¢åŠ å¤æ‚åº¦ å¢åŠ äº†ç³»ç»Ÿçš„æŠ½è±¡æ€§å’Œç†è§£éš¾åº¦ æŠ½è±¡äº§å“åªèƒ½ç”Ÿäº§ä¸€ç§äº§å“ï¼Œæ­¤å¼Šç«¯å¯ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼è§£å†³ã€‚ å½“äº§å“æ—ä¸­éœ€è¦å¢åŠ ä¸€ä¸ªæ–°çš„äº§å“æ—¶ï¼Œæ‰€æœ‰çš„å·¥å‚ç±»éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚å¢åŠ äº†ç³»ç»Ÿçš„æŠ½è±¡æ€§å’Œç†è§£éš¾åº¦ã€‚ è§’è‰²ï¼š æŠ½è±¡å·¥å‚ä¸­æ–¹æ³•ä¸ªæ•°ä¸åŒï¼ŒæŠ½è±¡äº§å“çš„ä¸ªæ•°ä¹Ÿä¸åŒ æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰ï¼šæä¾›äº†åˆ›å»ºäº§å“çš„æ¥å£ï¼Œå®ƒåŒ…å«å¤šä¸ªåˆ›å»ºäº§å“çš„æ–¹æ³• newProduct()ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªä¸åŒç­‰çº§çš„äº§å“ã€‚ å…·ä½“å·¥å‚ï¼ˆConcrete Factoryï¼‰ï¼šä¸»è¦æ˜¯å®ç°æŠ½è±¡å·¥å‚ä¸­çš„å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå®Œæˆå…·ä½“äº§å“çš„åˆ›å»ºã€‚ æŠ½è±¡äº§å“ï¼ˆProductï¼‰ï¼šå®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼æœ‰å¤šä¸ªæŠ½è±¡äº§å“ã€‚ å…·ä½“äº§å“ï¼ˆConcreteProductï¼‰ï¼šå®ç°äº†æŠ½è±¡äº§å“è§’è‰²æ‰€å®šä¹‰çš„æ¥å£ï¼Œç”±å…·ä½“å·¥å‚æ¥åˆ›å»ºï¼Œå®ƒåŒå…·ä½“å·¥å‚ä¹‹é—´æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š æŠ½è±¡å·¥å‚æ¨¡å¼æœ€æ—©çš„åº”ç”¨æ˜¯ç”¨äºåˆ›å»ºå±äºä¸åŒæ“ä½œç³»ç»Ÿçš„è§†çª—æ„ä»¶ã€‚å¦‚ Java çš„ AWT ä¸­çš„ Button å’Œ Text ç­‰æ„ä»¶åœ¨ Windows å’Œ UNIX ä¸­çš„æœ¬åœ°å®ç°æ˜¯ä¸åŒçš„ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼é€šå¸¸é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š å½“éœ€è¦åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸€ç³»åˆ—ç›¸äº’å…³è”æˆ–ç›¸äº’ä¾èµ–çš„äº§å“æ—æ—¶ï¼Œå¦‚ç”µå™¨å·¥å‚ä¸­çš„ç”µè§†æœºã€æ´—è¡£æœºã€ç©ºè°ƒç­‰ã€‚ ç³»ç»Ÿä¸­æœ‰å¤šä¸ªäº§å“æ—ï¼Œä½†æ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„æŸä¸€æ—äº§å“ã€‚å¦‚æœ‰äººåªå–œæ¬¢ç©¿æŸä¸€ä¸ªå“ç‰Œçš„è¡£æœå’Œé‹ã€‚ ç³»ç»Ÿä¸­æä¾›äº†äº§å“çš„ç±»åº“ï¼Œä¸”æ‰€æœ‰äº§å“çš„æ¥å£ç›¸åŒï¼Œå®¢æˆ·ç«¯ä¸ä¾èµ–äº§å“å®ä¾‹çš„åˆ›å»ºç»†èŠ‚å’Œå†…éƒ¨ç»“æ„ã€‚ JAVAå®ç° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849package FactoryMethod;public class AbstractFactoryTest { public static void main(String[] args) { try { Product a; AbstractFactory af; af = (AbstractFactory) ReadXML1.getObject(); a = af.newProduct(); a.show(); } catch (Exception e) { System.out.println(e.getMessage()); } }}//æŠ½è±¡äº§å“ï¼šæä¾›äº†äº§å“çš„æ¥å£interface Product { public void show();}//å…·ä½“äº§å“1ï¼šå®ç°æŠ½è±¡äº§å“ä¸­çš„æŠ½è±¡æ–¹æ³•class ConcreteProduct1 implements Product { public void show() { System.out.println(&quot;å…·ä½“äº§å“1æ˜¾ç¤º...&quot;); }}//å…·ä½“äº§å“2ï¼šå®ç°æŠ½è±¡äº§å“ä¸­çš„æŠ½è±¡æ–¹æ³•class ConcreteProduct2 implements Product { public void show() { System.out.println(&quot;å…·ä½“äº§å“2æ˜¾ç¤º...&quot;); }}//æŠ½è±¡å·¥å‚ï¼šæä¾›äº†å‚å“çš„ç”Ÿæˆæ–¹æ³•interface AbstractFactory { public Product newProduct();}//å…·ä½“å·¥å‚1ï¼šå®ç°äº†å‚å“çš„ç”Ÿæˆæ–¹æ³•class ConcreteFactory1 implements AbstractFactory { public Product newProduct() { System.out.println(&quot;å…·ä½“å·¥å‚1ç”Ÿæˆ--&gt;å…·ä½“äº§å“1...&quot;); return new ConcreteProduct1(); }}//å…·ä½“å·¥å‚2ï¼šå®ç°äº†å‚å“çš„ç”Ÿæˆæ–¹æ³•class ConcreteFactory2 implements AbstractFactory { public Product newProduct() { System.out.println(&quot;å…·ä½“å·¥å‚2ç”Ÿæˆ--&gt;å…·ä½“äº§å“2...&quot;); return new ConcreteProduct2(); }} 12345678910111213141516171819202122232425262728package FactoryMethod;import javax.xml.parsers.*;import org.w3c.dom.*;import java.io.*;class ReadXML1 { //è¯¥æ–¹æ³•ç”¨äºä»XMLé…ç½®æ–‡ä»¶ä¸­æå–å…·ä½“ç±»ç±»åï¼Œå¹¶è¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ public static Object getObject() { try { //åˆ›å»ºæ–‡æ¡£å¯¹è±¡ DocumentBuilderFactory dFactory = DocumentBuilderFactory.newInstance(); DocumentBuilder builder = dFactory.newDocumentBuilder(); Document doc; doc = builder.parse(new File(&quot;src/FactoryMethod/config1.xml&quot;)); //è·å–åŒ…å«ç±»åçš„æ–‡æœ¬èŠ‚ç‚¹ NodeList nl = doc.getElementsByTagName(&quot;className&quot;); Node classNode = nl.item(0).getFirstChild(); String cName = &quot;FactoryMethod.&quot; + classNode.getNodeValue(); //System.out.println(&quot;æ–°ç±»åï¼š&quot;+cName); //é€šè¿‡ç±»åç”Ÿæˆå®ä¾‹å¯¹è±¡å¹¶å°†å…¶è¿”å› Class&lt;?&gt; c = Class.forName(cName); Object obj = c.newInstance(); return obj; } catch (Exception e) { e.printStackTrace(); return null; } }} ã€Šå»ºé€ è€…æ¨¡å¼ Buliderã€‹ ç‰¹ç‚¹ï¼š å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„é€ ä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤º å®ƒæ˜¯å°†ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡åˆ†è§£ä¸ºå¤šä¸ªç®€å•çš„å¯¹è±¡ï¼Œç„¶åä¸€æ­¥ä¸€æ­¥æ„å»ºè€Œæˆã€‚å®ƒå°†å˜ä¸ä¸å˜ç›¸åˆ†ç¦»ï¼Œå³äº§å“çš„ç»„æˆéƒ¨åˆ†æ˜¯ä¸å˜çš„ï¼Œä½†æ¯ä¸€éƒ¨åˆ†æ˜¯å¯ä»¥çµæ´»é€‰æ‹©çš„ã€‚ ä¼˜ç‚¹ï¼š å°è£…æ€§å¥½ï¼Œæ„å»ºå’Œè¡¨ç¤ºåˆ†ç¦»ã€‚ æ‰©å±•æ€§å¥½ï¼Œå„ä¸ªå…·ä½“çš„å»ºé€ è€…ç›¸äº’ç‹¬ç«‹ï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„è§£è€¦ã€‚ å®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå»ºé€ è€…å¯ä»¥å¯¹åˆ›å»ºè¿‡ç¨‹é€æ­¥ç»†åŒ–ï¼Œè€Œä¸å¯¹å…¶å®ƒæ¨¡å—äº§ç”Ÿä»»ä½•å½±å“ï¼Œä¾¿äºæ§åˆ¶ç»†èŠ‚é£é™©ã€‚ ç¼ºç‚¹ï¼š äº§å“çš„ç»„æˆéƒ¨åˆ†å¿…é¡»ç›¸åŒï¼Œè¿™é™åˆ¶äº†å…¶ä½¿ç”¨èŒƒå›´ã€‚ å¦‚æœäº§å“çš„å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œå¦‚æœäº§å“å†…éƒ¨å‘ç”Ÿå˜åŒ–ï¼Œåˆ™å»ºé€ è€…ä¹Ÿè¦åŒæ­¥ä¿®æ”¹ï¼ŒåæœŸç»´æŠ¤æˆæœ¬è¾ƒå¤§ã€‚ è§’è‰²ï¼š äº§å“è§’è‰²ï¼ˆProductï¼‰ï¼šå®ƒæ˜¯åŒ…å«å¤šä¸ªç»„æˆéƒ¨ä»¶çš„å¤æ‚å¯¹è±¡ï¼Œç”±å…·ä½“å»ºé€ è€…æ¥åˆ›å»ºå…¶å„ä¸ªé›¶éƒ¨ä»¶ã€‚ æŠ½è±¡å»ºé€ è€…ï¼ˆBuilderï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ªåŒ…å«åˆ›å»ºäº§å“å„ä¸ªå­éƒ¨ä»¶çš„æŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œé€šå¸¸è¿˜åŒ…å«ä¸€ä¸ªè¿”å›å¤æ‚äº§å“çš„æ–¹æ³• getResult()ã€‚ å…·ä½“å»ºé€ è€…(Concrete Builderï¼‰ï¼šå®ç° Builder æ¥å£ï¼Œå®Œæˆå¤æ‚äº§å“çš„å„ä¸ªéƒ¨ä»¶çš„å…·ä½“åˆ›å»ºæ–¹æ³•ã€‚ æŒ‡æŒ¥è€…ï¼ˆDirectorï¼‰ï¼šå®ƒè°ƒç”¨å»ºé€ è€…å¯¹è±¡ä¸­çš„éƒ¨ä»¶æ„é€ ä¸è£…é…æ–¹æ³•å®Œæˆå¤æ‚å¯¹è±¡çš„åˆ›å»ºï¼Œåœ¨æŒ‡æŒ¥è€…ä¸­ä¸æ¶‰åŠå…·ä½“äº§å“çš„ä¿¡æ¯ã€‚ å»ºé€ è€…æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š ç›¸åŒçš„æ–¹æ³•ï¼Œä¸åŒçš„æ‰§è¡Œé¡ºåºï¼Œäº§ç”Ÿä¸åŒçš„ç»“æœã€‚ å¤šä¸ªéƒ¨ä»¶æˆ–é›¶ä»¶ï¼Œéƒ½å¯ä»¥è£…é…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œä½†æ˜¯äº§ç”Ÿçš„ç»“æœåˆä¸ç›¸åŒã€‚ äº§å“ç±»éå¸¸å¤æ‚ï¼Œæˆ–è€…äº§å“ç±»ä¸­ä¸åŒçš„è°ƒç”¨é¡ºåºäº§ç”Ÿä¸åŒçš„ä½œç”¨ã€‚ åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡ç‰¹åˆ«å¤æ‚ï¼Œå‚æ•°å¤šï¼Œè€Œä¸”å¾ˆå¤šå‚æ•°éƒ½å…·æœ‰é»˜è®¤å€¼ã€‚ JAVAå®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package pers.lxl.mylearnproject.programbase.designpatterns.creationalpattern.bulider;/**äº§å“è§’è‰²ï¼ˆProductï¼‰ï¼šå®ƒæ˜¯åŒ…å«å¤šä¸ªç»„æˆéƒ¨ä»¶çš„å¤æ‚å¯¹è±¡ï¼Œç”±å…·ä½“å»ºé€ è€…æ¥åˆ›å»ºå…¶å„ä¸ªé›¶éƒ¨ä»¶ã€‚*/class Product { private String partA; private String partB; private String partC; public void setPartA(String partA) { this.partA = partA; } public void setPartB(String partB) { this.partB = partB; } public void setPartC(String partC) { this.partC = partC; } public void show() { System.out.println(partA+' '+partB+' '+partC); }}/**æŠ½è±¡å»ºé€ è€…ï¼ˆBuilderï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ªåŒ…å«åˆ›å»ºäº§å“å„ä¸ªå­éƒ¨ä»¶çš„æŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œé€šå¸¸è¿˜åŒ…å«ä¸€ä¸ªè¿”å›å¤æ‚äº§å“çš„æ–¹æ³• getResult()ã€‚*/abstract class Builder { //åˆ›å»ºäº§å“å¯¹è±¡ protected Product product = new Product(); public abstract void buildPartA(); public abstract void buildPartB(); public abstract void buildPartC(); //è¿”å›äº§å“å¯¹è±¡ public Product getResult() { return product; }}/**å…·ä½“å»ºé€ è€…(Concrete Builderï¼‰ï¼šå®ç° Builder æ¥å£ï¼Œå®Œæˆå¤æ‚äº§å“çš„å„ä¸ªéƒ¨ä»¶çš„å…·ä½“åˆ›å»ºæ–¹æ³•ã€‚*/class ConcreteBuilder1 extends Builder { @Override public void buildPartA() { product.setPartA(&quot;å»ºé€  PartA&quot;); } @Override public void buildPartB() { product.setPartB(&quot;å»ºé€  PartB&quot;); } @Override public void buildPartC() { product.setPartC(&quot;å»ºé€  PartC&quot;); }}/**æŒ‡æŒ¥è€…ï¼ˆDirectorï¼‰ï¼šå®ƒè°ƒç”¨å»ºé€ è€…å¯¹è±¡ä¸­çš„éƒ¨ä»¶æ„é€ ä¸è£…é…æ–¹æ³•å®Œæˆå¤æ‚å¯¹è±¡çš„åˆ›å»ºï¼Œåœ¨æŒ‡æŒ¥è€…ä¸­ä¸æ¶‰åŠå…·ä½“äº§å“çš„ä¿¡æ¯ã€‚*/class Director { private Builder builder; public Director(Builder builder) { this.builder = builder; } //äº§å“æ„å»ºä¸ç»„è£…æ–¹æ³• public Product construct() { builder.buildPartA(); builder.buildPartB(); builder.buildPartC(); return builder.getResult(); }}public class ConcreteBuilder { public static void main(String[] args) { Builder builder = new ConcreteBuilder1(); Director director = new Director(builder); Product product = director.construct(); product.show(); }} ç»“æ„å‹æ¨¡å¼ ã€Šä»£ç†æ¨¡å¼ Proxy ã€‹ ç‰¹ç‚¹ï¼š ä¸­ä»‹ ç”±äºæŸäº›åŸå› éœ€è¦ç»™æŸå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ä»¥æ§åˆ¶å¯¹è¯¥å¯¹è±¡çš„è®¿é—®ã€‚è¿™æ—¶ï¼Œè®¿é—®å¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨ç›®æ ‡å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡ä½œä¸ºè®¿é—®å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´çš„ä¸­ä»‹ã€‚ ä¼˜ç‚¹ï¼š ä»£ç†æ¨¡å¼åœ¨å®¢æˆ·ç«¯ä¸ç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸€ä¸ªä¸­ä»‹ä½œç”¨å’Œä¿æŠ¤ç›®æ ‡å¯¹è±¡çš„ä½œç”¨ï¼› ä»£ç†å¯¹è±¡å¯ä»¥æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ï¼› ä»£ç†æ¨¡å¼èƒ½å°†å®¢æˆ·ç«¯ä¸ç›®æ ‡å¯¹è±¡åˆ†ç¦»ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œå¢åŠ äº†ç¨‹åºçš„å¯æ‰©å±•æ€§ ç¼ºç‚¹ï¼š(åŠ¨æ€ä»£ç†æ–¹å¼è§£å†³) ä»£ç†æ¨¡å¼ä¼šé€ æˆç³»ç»Ÿè®¾è®¡ä¸­ç±»çš„æ•°é‡å¢åŠ  åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´å¢åŠ ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä¼šé€ æˆè¯·æ±‚å¤„ç†é€Ÿåº¦å˜æ…¢ï¼› å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼› è§’è‰²ï¼š æŠ½è±¡ä¸»é¢˜ï¼ˆSubjectï¼‰ç±»ï¼šé€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»å£°æ˜çœŸå®ä¸»é¢˜å’Œä»£ç†å¯¹è±¡å®ç°çš„ä¸šåŠ¡æ–¹æ³•ã€‚ çœŸå®ä¸»é¢˜ï¼ˆReal Subjectï¼‰ç±»ï¼šå®ç°äº†æŠ½è±¡ä¸»é¢˜ä¸­çš„å…·ä½“ä¸šåŠ¡ï¼Œæ˜¯ä»£ç†å¯¹è±¡æ‰€ä»£è¡¨çš„çœŸå®å¯¹è±¡ï¼Œæ˜¯æœ€ç»ˆè¦å¼•ç”¨çš„å¯¹è±¡ã€‚ ä»£ç†ï¼ˆProxyï¼‰ç±»ï¼šæä¾›äº†ä¸çœŸå®ä¸»é¢˜ç›¸åŒçš„æ¥å£ï¼Œå…¶å†…éƒ¨å«æœ‰å¯¹çœŸå®ä¸»é¢˜çš„å¼•ç”¨ï¼Œå®ƒå¯ä»¥è®¿é—®ã€æ§åˆ¶æˆ–æ‰©å±•çœŸå®ä¸»é¢˜çš„åŠŸèƒ½ã€‚ æ ¹æ®ä»£ç†çš„åˆ›å»ºæ—¶æœŸï¼Œä»£ç†æ¨¡å¼åˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ã€‚ é™æ€ï¼šç”±ç¨‹åºå‘˜åˆ›å»ºä»£ç†ç±»æˆ–ç‰¹å®šå·¥å…·è‡ªåŠ¨ç”Ÿæˆæºä»£ç å†å¯¹å…¶ç¼–è¯‘ï¼Œåœ¨ç¨‹åºè¿è¡Œå‰ä»£ç†ç±»çš„ .class æ–‡ä»¶å°±å·²ç»å­˜åœ¨äº†ã€‚ åŠ¨æ€ï¼šåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œè¿ç”¨åå°„æœºåˆ¶åŠ¨æ€åˆ›å»ºè€Œæˆ ä»£ç†æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š è¿œç¨‹ä»£ç†ï¼Œè¿™ç§æ–¹å¼é€šå¸¸æ˜¯ä¸ºäº†éšè—ç›®æ ‡å¯¹è±¡å­˜åœ¨äºä¸åŒåœ°å€ç©ºé—´çš„äº‹å®ï¼Œæ–¹ä¾¿å®¢æˆ·ç«¯è®¿é—®ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ç”³è¯·æŸäº›ç½‘ç›˜ç©ºé—´æ—¶ï¼Œä¼šåœ¨ç”¨æˆ·çš„æ–‡ä»¶ç³»ç»Ÿä¸­å»ºç«‹ä¸€ä¸ªè™šæ‹Ÿçš„ç¡¬ç›˜ï¼Œç”¨æˆ·è®¿é—®è™šæ‹Ÿç¡¬ç›˜æ—¶å®é™…è®¿é—®çš„æ˜¯ç½‘ç›˜ç©ºé—´ã€‚ è™šæ‹Ÿä»£ç†ï¼Œè¿™ç§æ–¹å¼é€šå¸¸ç”¨äºè¦åˆ›å»ºçš„ç›®æ ‡å¯¹è±¡å¼€é”€å¾ˆå¤§æ—¶ã€‚ä¾‹å¦‚ï¼Œä¸‹è½½ä¸€å¹…å¾ˆå¤§çš„å›¾åƒéœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œå› æŸç§è®¡ç®—æ¯”è¾ƒå¤æ‚è€ŒçŸ­æ—¶é—´æ— æ³•å®Œæˆï¼Œè¿™æ—¶å¯ä»¥å…ˆç”¨å°æ¯”ä¾‹çš„è™šæ‹Ÿä»£ç†æ›¿æ¢çœŸå®çš„å¯¹è±¡ï¼Œæ¶ˆé™¤ç”¨æˆ·å¯¹æœåŠ¡å™¨æ…¢çš„æ„Ÿè§‰ã€‚ å®‰å…¨ä»£ç†ï¼Œè¿™ç§æ–¹å¼é€šå¸¸ç”¨äºæ§åˆ¶ä¸åŒç§ç±»å®¢æˆ·å¯¹çœŸå®å¯¹è±¡çš„è®¿é—®æƒé™ã€‚ æ™ºèƒ½æŒ‡å¼•ï¼Œä¸»è¦ç”¨äºè°ƒç”¨ç›®æ ‡å¯¹è±¡æ—¶ï¼Œä»£ç†é™„åŠ ä¸€äº›é¢å¤–çš„å¤„ç†åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¢åŠ è®¡ç®—çœŸå®å¯¹è±¡çš„å¼•ç”¨æ¬¡æ•°çš„åŠŸèƒ½ï¼Œè¿™æ ·å½“è¯¥å¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨æ—¶ï¼Œå°±å¯ä»¥è‡ªåŠ¨é‡Šæ”¾å®ƒã€‚ å»¶è¿ŸåŠ è½½ï¼ŒæŒ‡ä¸ºäº†æé«˜ç³»ç»Ÿçš„æ€§èƒ½ï¼Œå»¶è¿Ÿå¯¹ç›®æ ‡çš„åŠ è½½ã€‚ä¾‹å¦‚ï¼ŒHibernate ä¸­å°±å­˜åœ¨å±æ€§çš„å»¶è¿ŸåŠ è½½å’Œå…³è”è¡¨çš„å»¶æ—¶åŠ è½½ã€‚ JAVAå®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435package proxy;public class ProxyTest { public static void main(String[] args) { Proxy proxy = new Proxy(); proxy.Request(); }}//æŠ½è±¡ä¸»é¢˜interface Subject { void Request();}//çœŸå®ä¸»é¢˜class RealSubject implements Subject { public void Request() { System.out.println(&quot;è®¿é—®çœŸå®ä¸»é¢˜æ–¹æ³•...&quot;); }}//ä»£ç†class Proxy implements Subject { private RealSubject realSubject; public void Request() { if (realSubject == null) { realSubject = new RealSubject(); } preRequest(); realSubject.Request(); postRequest(); } public void preRequest() { System.out.println(&quot;è®¿é—®çœŸå®ä¸»é¢˜ä¹‹å‰çš„é¢„å¤„ç†ã€‚&quot;); } public void postRequest() { System.out.println(&quot;è®¿é—®çœŸå®ä¸»é¢˜ä¹‹åçš„åç»­å¤„ç†ã€‚&quot;); }} ã€Šé€‚é…å™¨æ¨¡å¼ Adapter ã€‹ ç‰¹ç‚¹ï¼š å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»èƒ½ä¸€èµ·å·¥ä½œã€‚ é€‚é…å™¨æ¨¡å¼åˆ†ä¸ºç±»ç»“æ„å‹æ¨¡å¼å’Œå¯¹è±¡ç»“æ„å‹æ¨¡å¼ä¸¤ç§ï¼Œå‰è€…ç±»ä¹‹é—´çš„è€¦åˆåº¦æ¯”åè€…é«˜ï¼Œä¸”è¦æ±‚ç¨‹åºå‘˜äº†è§£ç°æœ‰ç»„ä»¶åº“ä¸­çš„ç›¸å…³ç»„ä»¶çš„å†…éƒ¨ç»“æ„ï¼Œæ‰€ä»¥åº”ç”¨ç›¸å¯¹è¾ƒå°‘äº›ã€‚ ä¼˜ç‚¹ï¼š å®¢æˆ·ç«¯é€šè¿‡é€‚é…å™¨å¯ä»¥é€æ˜åœ°è°ƒç”¨ç›®æ ‡æ¥å£ã€‚ å¤ç”¨äº†ç°å­˜çš„ç±»ï¼Œç¨‹åºå‘˜ä¸éœ€è¦ä¿®æ”¹åŸæœ‰ä»£ç è€Œé‡ç”¨ç°æœ‰çš„é€‚é…è€…ç±»ã€‚ å°†ç›®æ ‡ç±»å’Œé€‚é…è€…ç±»è§£è€¦ï¼Œè§£å†³äº†ç›®æ ‡ç±»å’Œé€‚é…è€…ç±»æ¥å£ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ åœ¨å¾ˆå¤šä¸šåŠ¡åœºæ™¯ä¸­ç¬¦åˆå¼€é—­åŸåˆ™ã€‚ ç¼ºç‚¹ï¼š é€‚é…å™¨ç¼–å†™è¿‡ç¨‹éœ€è¦ç»“åˆä¸šåŠ¡åœºæ™¯å…¨é¢è€ƒè™‘ï¼Œå¯èƒ½ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚ å¢åŠ ä»£ç é˜…è¯»éš¾åº¦ï¼Œé™ä½ä»£ç å¯è¯»æ€§ï¼Œè¿‡å¤šä½¿ç”¨é€‚é…å™¨ä¼šä½¿ç³»ç»Ÿä»£ç å˜å¾—å‡Œä¹±ã€‚ è§’è‰²ï¼š ç›®æ ‡ï¼ˆTargetï¼‰æ¥å£ï¼šå½“å‰ç³»ç»Ÿä¸šåŠ¡æ‰€æœŸå¾…çš„æ¥å£ï¼Œå®ƒå¯ä»¥æ˜¯æŠ½è±¡ç±»æˆ–æ¥å£ã€‚ é€‚é…è€…ï¼ˆAdapteeï¼‰ç±»ï¼šå®ƒæ˜¯è¢«è®¿é—®å’Œé€‚é…çš„ç°å­˜ç»„ä»¶åº“ä¸­çš„ç»„ä»¶æ¥å£ã€‚ é€‚é…å™¨ï¼ˆAdapterï¼‰ç±»ï¼šå®ƒæ˜¯ä¸€ä¸ªè½¬æ¢å™¨ï¼Œé€šè¿‡ç»§æ‰¿æˆ–å¼•ç”¨é€‚é…è€…çš„å¯¹è±¡ï¼ŒæŠŠé€‚é…è€…æ¥å£è½¬æ¢æˆç›®æ ‡æ¥å£ï¼Œè®©å®¢æˆ·æŒ‰ç›®æ ‡æ¥å£çš„æ ¼å¼è®¿é—®é€‚é…è€…ã€‚ é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š ä»¥å‰å¼€å‘çš„ç³»ç»Ÿå­˜åœ¨æ»¡è¶³æ–°ç³»ç»ŸåŠŸèƒ½éœ€æ±‚çš„ç±»ï¼Œä½†å…¶æ¥å£åŒæ–°ç³»ç»Ÿçš„æ¥å£ä¸ä¸€è‡´ã€‚ ä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„ç»„ä»¶ï¼Œä½†ç»„ä»¶æ¥å£å®šä¹‰å’Œè‡ªå·±è¦æ±‚çš„æ¥å£å®šä¹‰ä¸åŒã€‚ JAVAå®ç°ï¼š å¯¹è±¡é€‚é…å™¨ 1234567891011121314151617181920212223242526package pers.lxl.mylearnproject.programbase.designpatterns.structuralpattern.adapter;//å¯¹è±¡é€‚é…å™¨ç±»class ObjectAdapter implements Target{ private Adaptee adaptee; public ObjectAdapter(Adaptee adaptee) { this.adaptee=adaptee; } @Override public void request() { adaptee.specificRequest(); }}//å®¢æˆ·ç«¯ä»£ç public class objectAdapterPattern{ public static void main(String[] args) { System.out.println(&quot;å¯¹è±¡é€‚é…å™¨æ¨¡å¼æµ‹è¯•ï¼š&quot;); Adaptee adaptee = new Adaptee(); Target target = new ObjectAdapter(adaptee); target.request(); }} ç±»é€‚é…å™¨ 1234567891011121314151617181920212223242526272829303132333435package pers.lxl.mylearnproject.programbase.designpatterns.structuralpattern.adapter;//ç›®æ ‡æ¥å£interface Target{ public void request();}//é€‚é…è€…æ¥å£class Adaptee{ public void specificRequest() { System.out.println(&quot;é€‚é…è€…ä¸­çš„ä¸šåŠ¡ä»£ç è¢«è°ƒç”¨ï¼&quot;); }}//ç±»é€‚é…å™¨ç±» extends Adaptee implements Targetclass ClassAdapter extends Adaptee implements Target{ @Override public void request() { specificRequest(); }}//å®¢æˆ·ç«¯ä»£ç public class ClassAdapterPattern{ public static void main(String[] args) { System.out.println(&quot;ç±»é€‚é…å™¨æ¨¡å¼æµ‹è¯•ï¼š&quot;); Target target = new ClassAdapter(); target.request(); }} é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰å¯æ‰©å±•ä¸ºåŒå‘é€‚é…å™¨æ¨¡å¼ï¼ŒåŒå‘é€‚é…å™¨ç±»æ—¢å¯ä»¥æŠŠé€‚é…è€…æ¥å£è½¬æ¢æˆç›®æ ‡æ¥å£ï¼Œä¹Ÿå¯ä»¥æŠŠç›®æ ‡æ¥å£è½¬æ¢æˆé€‚é…è€…æ¥å£ï¼Œå…¶ç»“æ„å›¾å¦‚å›¾æ‰€ç¤ºã€‚ ã€Šæ¡¥æ¥æ¨¡å¼ Bridgeã€‹ ç‰¹ç‚¹ï¼š å°†æŠ½è±¡ä¸å®ç°åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚å®ƒæ˜¯ç”¨ç»„åˆå…³ç³»ä»£æ›¿ç»§æ‰¿å…³ç³»æ¥å®ç°ï¼Œä»è€Œé™ä½äº†æŠ½è±¡å’Œå®ç°è¿™ä¸¤ä¸ªå¯å˜ç»´åº¦çš„è€¦åˆåº¦ã€‚ ä¼˜ç‚¹ï¼š æŠ½è±¡ä¸å®ç°åˆ†ç¦»ï¼Œæ‰©å±•èƒ½åŠ›å¼º ç¬¦åˆå¼€é—­åŸåˆ™ ç¬¦åˆåˆæˆå¤ç”¨åŸåˆ™ å…¶å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜ ç¼ºç‚¹ï¼š ç”±äºèšåˆå…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡åŒ–è¿›è¡Œè®¾è®¡ä¸ç¼–ç¨‹ï¼Œèƒ½æ­£ç¡®åœ°è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œè¿™å¢åŠ äº†ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦ã€‚ è§’è‰²ï¼š æŠ½è±¡åŒ–ï¼ˆAbstractionï¼‰è§’è‰²ï¼šå®šä¹‰æŠ½è±¡ç±»ï¼Œå¹¶åŒ…å«ä¸€ä¸ªå¯¹å®ç°åŒ–å¯¹è±¡çš„å¼•ç”¨ã€‚ æ‰©å±•æŠ½è±¡åŒ–ï¼ˆRefined Abstractionï¼‰è§’è‰²ï¼šæ˜¯æŠ½è±¡åŒ–è§’è‰²çš„å­ç±»ï¼Œå®ç°çˆ¶ç±»ä¸­çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå¹¶é€šè¿‡ç»„åˆå…³ç³»è°ƒç”¨å®ç°åŒ–è§’è‰²ä¸­çš„ä¸šåŠ¡æ–¹æ³•ã€‚ å®ç°åŒ–ï¼ˆImplementorï¼‰è§’è‰²ï¼šå®šä¹‰å®ç°åŒ–è§’è‰²çš„æ¥å£ï¼Œä¾›æ‰©å±•æŠ½è±¡åŒ–è§’è‰²è°ƒç”¨ã€‚ å…·ä½“å®ç°åŒ–ï¼ˆConcrete Implementorï¼‰è§’è‰²ï¼šç»™å‡ºå®ç°åŒ–è§’è‰²æ¥å£çš„å…·ä½“å®ç°ã€‚ æ¡¥æ¥æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å½“ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªç»´åº¦éƒ½éœ€è¦è¿›è¡Œæ‰©å±•æ—¶ã€‚ å½“ä¸€ä¸ªç³»ç»Ÿä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿æˆ–å› ä¸ºå¤šå±‚æ¬¡ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ æ—¶ã€‚ å½“ä¸€ä¸ªç³»ç»Ÿéœ€è¦åœ¨æ„ä»¶çš„æŠ½è±¡åŒ–è§’è‰²å’Œå…·ä½“åŒ–è§’è‰²ä¹‹é—´å¢åŠ æ›´å¤šçš„çµæ´»æ€§æ—¶ã€‚ JAVAå®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536package bridge;public class BridgeTest { public static void main(String[] args) { Implementor imple = new ConcreteImplementorA(); Abstraction abs = new RefinedAbstraction(imple); abs.Operation(); }}//å®ç°åŒ–è§’è‰²interface Implementor { public void OperationImpl();}//å…·ä½“å®ç°åŒ–è§’è‰²class ConcreteImplementorA implements Implementor { public void OperationImpl() { System.out.println(&quot;å…·ä½“å®ç°åŒ–(Concrete Implementor)è§’è‰²è¢«è®¿é—®&quot;); }}//æŠ½è±¡åŒ–è§’è‰²abstract class Abstraction { protected Implementor imple; protected Abstraction(Implementor imple) { this.imple = imple; } public abstract void Operation();}//æ‰©å±•æŠ½è±¡åŒ–è§’è‰²class RefinedAbstraction extends Abstraction { protected RefinedAbstraction(Implementor imple) { super(imple); } public void Operation() { System.out.println(&quot;æ‰©å±•æŠ½è±¡åŒ–(Refined Abstraction)è§’è‰²è¢«è®¿é—®&quot;); imple.OperationImpl(); }} ã€Šè£…é¥°å™¨æ¨¡å¼ Decorator Patternã€‹ ç‰¹ç‚¹ï¼š ä¸æ”¹å˜ç°æœ‰å¯¹è±¡ç»“æ„çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°ç»™è¯¥å¯¹è±¡å¢åŠ ä¸€äº›èŒè´£ï¼ˆå³å¢åŠ å…¶é¢å¤–åŠŸèƒ½ï¼‰çš„æ¨¡å¼ï¼Œå®ƒå±äºå¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚ ç»“æ„ä¿®é¥° ä¼˜ç‚¹ï¼š è£…é¥°å™¨æ˜¯ç»§æ‰¿çš„æœ‰åŠ›è¡¥å……ï¼Œæ¯”ç»§æ‰¿çµæ´»ï¼Œåœ¨ä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ‰©å±•åŠŸèƒ½ï¼Œå³æ’å³ç”¨ é€šè¿‡ä½¿ç”¨ä¸ç”¨è£…é¥°ç±»åŠè¿™äº›è£…é¥°ç±»çš„æ’åˆ—ç»„åˆï¼Œå¯ä»¥å®ç°ä¸åŒæ•ˆæœ è£…é¥°å™¨æ¨¡å¼å®Œå…¨éµå®ˆå¼€é—­åŸåˆ™ ç¼ºç‚¹ï¼š è£…é¥°å™¨æ¨¡å¼ä¼šå¢åŠ è®¸å¤šå­ç±»ï¼Œè¿‡åº¦ä½¿ç”¨ä¼šå¢åŠ ç¨‹åºå¾—å¤æ‚æ€§ è§’è‰²ï¼š æŠ½è±¡æ„ä»¶ï¼ˆComponentï¼‰è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªæŠ½è±¡æ¥å£ä»¥è§„èŒƒå‡†å¤‡æ¥æ”¶é™„åŠ è´£ä»»çš„å¯¹è±¡ã€‚ å…·ä½“æ„ä»¶ï¼ˆConcreteComponentï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡æ„ä»¶ï¼Œé€šè¿‡è£…é¥°è§’è‰²ä¸ºå…¶æ·»åŠ ä¸€äº›èŒè´£ã€‚ æŠ½è±¡è£…é¥°ï¼ˆDecoratorï¼‰è§’è‰²ï¼šç»§æ‰¿æŠ½è±¡æ„ä»¶ï¼Œå¹¶åŒ…å«å…·ä½“æ„ä»¶çš„å®ä¾‹ï¼Œå¯ä»¥é€šè¿‡å…¶å­ç±»æ‰©å±•å…·ä½“æ„ä»¶çš„åŠŸèƒ½ã€‚ å…·ä½“è£…é¥°ï¼ˆConcreteDecoratorï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡è£…é¥°çš„ç›¸å…³æ–¹æ³•ï¼Œå¹¶ç»™å…·ä½“æ„ä»¶å¯¹è±¡æ·»åŠ é™„åŠ çš„è´£ä»»ã€‚ è£…é¥°è€…æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å½“éœ€è¦ç»™ä¸€ä¸ªç°æœ‰ç±»æ·»åŠ é™„åŠ èŒè´£ï¼Œè€Œåˆä¸èƒ½é‡‡ç”¨ç”Ÿæˆå­ç±»çš„æ–¹æ³•è¿›è¡Œæ‰©å……æ—¶ã€‚ä¾‹å¦‚ï¼Œè¯¥ç±»è¢«éšè—æˆ–è€…è¯¥ç±»æ˜¯ç»ˆæç±»æˆ–è€…é‡‡ç”¨ç»§æ‰¿æ–¹å¼ä¼šäº§ç”Ÿå¤§é‡çš„å­ç±»ã€‚ å½“éœ€è¦é€šè¿‡å¯¹ç°æœ‰çš„ä¸€ç»„åŸºæœ¬åŠŸèƒ½è¿›è¡Œæ’åˆ—ç»„åˆè€Œäº§ç”Ÿéå¸¸å¤šçš„åŠŸèƒ½æ—¶ï¼Œé‡‡ç”¨ç»§æ‰¿å…³ç³»å¾ˆéš¾å®ç°ï¼Œè€Œé‡‡ç”¨è£…é¥°å™¨æ¨¡å¼å´å¾ˆå¥½å®ç°ã€‚ å½“å¯¹è±¡çš„åŠŸèƒ½è¦æ±‚å¯ä»¥åŠ¨æ€åœ°æ·»åŠ ï¼Œä¹Ÿå¯ä»¥å†åŠ¨æ€åœ°æ’¤é”€æ—¶ã€‚ JAVAå®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package decorator;public class DecoratorPattern { public static void main(String[] args) { Component p = new ConcreteComponent(); p.operation(); System.out.println(&quot;---------------------------------&quot;); Component d = new ConcreteDecorator(p); d.operation(); }}//æŠ½è±¡æ„ä»¶è§’è‰²interface Component { public void operation();}//å…·ä½“æ„ä»¶è§’è‰²class ConcreteComponent implements Component { public ConcreteComponent() { System.out.println(&quot;åˆ›å»ºå…·ä½“æ„ä»¶è§’è‰²&quot;); } public void operation() { System.out.println(&quot;è°ƒç”¨å…·ä½“æ„ä»¶è§’è‰²çš„æ–¹æ³•operation()&quot;); }}//æŠ½è±¡è£…é¥°è§’è‰²class Decorator implements Component { private Component component; public Decorator(Component component) { this.component = component; } public void operation() { component.operation(); }}//å…·ä½“è£…é¥°è§’è‰²class ConcreteDecorator extends Decorator { public ConcreteDecorator(Component component) { super(component); } public void operation() { super.operation(); addedFunction(); } public void addedFunction() { System.out.println(&quot;ä¸ºå…·ä½“æ„ä»¶è§’è‰²å¢åŠ é¢å¤–çš„åŠŸèƒ½addedFunction()&quot;); }} ã€Šå¤–è§‚æ¨¡å¼ Facade Patternã€‹ ç‰¹ç‚¹ï¼š é—¨é¢æ¨¡å¼ï¼Œæ˜¯ä¸€ç§é€šè¿‡ä¸ºå¤šä¸ªå¤æ‚çš„å­ç³»ç»Ÿæä¾›ä¸€ä¸ªä¸€è‡´çš„æ¥å£ï¼Œè€Œä½¿è¿™äº›å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“è¢«è®¿é—®çš„æ¨¡å¼ã€‚è¯¥æ¨¡å¼å¯¹å¤–æœ‰ä¸€ä¸ªç»Ÿä¸€æ¥å£ï¼Œå¤–éƒ¨åº”ç”¨ç¨‹åºä¸ç”¨å…³å¿ƒå†…éƒ¨å­ç³»ç»Ÿçš„å…·ä½“ç»†èŠ‚ï¼Œè¿™æ ·ä¼šå¤§å¤§é™ä½åº”ç”¨ç¨‹åºçš„å¤æ‚åº¦ï¼Œæé«˜äº†ç¨‹åºçš„å¯ç»´æŠ¤æ€§ã€‚ ç»“æ„ä¿®é¥° ä¼˜ç‚¹ï¼š é™ä½äº†å­ç³»ç»Ÿä¸å®¢æˆ·ç«¯ä¹‹é—´çš„è€¦åˆåº¦ï¼Œä½¿å¾—å­ç³»ç»Ÿçš„å˜åŒ–ä¸ä¼šå½±å“è°ƒç”¨å®ƒçš„å®¢æˆ·ç±»ã€‚ å¯¹å®¢æˆ·å±è”½äº†å­ç³»ç»Ÿç»„ä»¶ï¼Œå‡å°‘äº†å®¢æˆ·å¤„ç†çš„å¯¹è±¡æ•°ç›®ï¼Œå¹¶ä½¿å¾—å­ç³»ç»Ÿä½¿ç”¨èµ·æ¥æ›´åŠ å®¹æ˜“ã€‚ é™ä½äº†å¤§å‹è½¯ä»¶ç³»ç»Ÿä¸­çš„ç¼–è¯‘ä¾èµ–æ€§ï¼Œç®€åŒ–äº†ç³»ç»Ÿåœ¨ä¸åŒå¹³å°ä¹‹é—´çš„ç§»æ¤è¿‡ç¨‹ï¼Œå› ä¸ºç¼–è¯‘ä¸€ä¸ªå­ç³»ç»Ÿä¸ä¼šå½±å“å…¶ä»–çš„å­ç³»ç»Ÿï¼Œä¹Ÿä¸ä¼šå½±å“å¤–è§‚å¯¹è±¡ã€‚ ç¼ºç‚¹ï¼š ä¸èƒ½å¾ˆå¥½åœ°é™åˆ¶å®¢æˆ·ä½¿ç”¨å­ç³»ç»Ÿç±»ï¼Œå¾ˆå®¹æ˜“å¸¦æ¥æœªçŸ¥é£é™©ã€‚ å¢åŠ æ–°çš„å­ç³»ç»Ÿå¯èƒ½éœ€è¦ä¿®æ”¹å¤–è§‚ç±»æˆ–å®¢æˆ·ç«¯çš„æºä»£ç ï¼Œè¿èƒŒäº†â€œå¼€é—­åŸåˆ™â€ è§’è‰²ï¼š å¤–è§‚ï¼ˆFacadeï¼‰è§’è‰²ï¼šä¸ºå¤šä¸ªå­ç³»ç»Ÿå¯¹å¤–æä¾›ä¸€ä¸ªå…±åŒçš„æ¥å£ã€‚ å­ç³»ç»Ÿï¼ˆSub Systemï¼‰è§’è‰²ï¼šå®ç°ç³»ç»Ÿçš„éƒ¨åˆ†åŠŸèƒ½ï¼Œå®¢æˆ·å¯ä»¥é€šè¿‡å¤–è§‚è§’è‰²è®¿é—®å®ƒã€‚ å®¢æˆ·ï¼ˆClientï¼‰è§’è‰²ï¼šé€šè¿‡ä¸€ä¸ªå¤–è§‚è§’è‰²è®¿é—®å„ä¸ªå­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚ å¤–è§‚ æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å¯¹åˆ†å±‚ç»“æ„ç³»ç»Ÿæ„å»ºæ—¶ï¼Œä½¿ç”¨å¤–è§‚æ¨¡å¼å®šä¹‰å­ç³»ç»Ÿä¸­æ¯å±‚çš„å…¥å£ç‚¹å¯ä»¥ç®€åŒ–å­ç³»ç»Ÿä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ å½“ä¸€ä¸ªå¤æ‚ç³»ç»Ÿçš„å­ç³»ç»Ÿå¾ˆå¤šæ—¶ï¼Œå¤–è§‚æ¨¡å¼å¯ä»¥ä¸ºç³»ç»Ÿè®¾è®¡ä¸€ä¸ªç®€å•çš„æ¥å£ä¾›å¤–ç•Œè®¿é—®ã€‚ å½“å®¢æˆ·ç«¯ä¸å¤šä¸ªå­ç³»ç»Ÿä¹‹é—´å­˜åœ¨å¾ˆå¤§çš„è”ç³»æ—¶ï¼Œå¼•å…¥å¤–è§‚æ¨¡å¼å¯å°†å®ƒä»¬åˆ†ç¦»ï¼Œä»è€Œæé«˜å­ç³»ç»Ÿçš„ç‹¬ç«‹æ€§å’Œå¯ç§»æ¤æ€§ã€‚ JAVAå®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435public class FacadePattern { public static void main(String[] args) { Facade f = new Facade(); f.method(); }}//å¤–è§‚è§’è‰²class Facade { private SubSystem01 obj1 = new SubSystem01(); private SubSystem02 obj2 = new SubSystem02(); private SubSystem03 obj3 = new SubSystem03(); public void method() { obj1.method1(); obj2.method2(); obj3.method3(); }}//å­ç³»ç»Ÿè§’è‰²class SubSystem01 { public void method1() { System.out.println(&quot;å­ç³»ç»Ÿ01çš„method1()è¢«è°ƒç”¨ï¼&quot;); }}//å­ç³»ç»Ÿè§’è‰²class SubSystem02 { public void method2() { System.out.println(&quot;å­ç³»ç»Ÿ02çš„method2()è¢«è°ƒç”¨ï¼&quot;); }}//å­ç³»ç»Ÿè§’è‰²class SubSystem03 { public void method3() { System.out.println(&quot;å­ç³»ç»Ÿ03çš„method3()è¢«è°ƒç”¨ï¼&quot;); }} ã€Šäº«å…ƒæ¨¡å¼ Flyweight Patternã€‹ ç‰¹ç‚¹ï¼š è¿ç”¨å…±äº«æŠ€æœ¯æ¥æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨ã€‚å®ƒé€šè¿‡å…±äº«å·²ç»å­˜åœ¨çš„å¯¹è±¡æ¥å¤§å¹…åº¦å‡å°‘éœ€è¦åˆ›å»ºçš„å¯¹è±¡æ•°é‡ã€é¿å…å¤§é‡ç›¸ä¼¼ç±»çš„å¼€é”€ï¼Œä»è€Œæé«˜ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡ã€‚ ä¼˜ç‚¹ï¼š ç›¸åŒå¯¹è±¡åªè¦ä¿å­˜ä¸€ä»½ï¼Œè¿™é™ä½äº†ç³»ç»Ÿä¸­å¯¹è±¡çš„æ•°é‡ï¼Œä»è€Œé™ä½äº†ç³»ç»Ÿä¸­ç»†ç²’åº¦å¯¹è±¡ç»™å†…å­˜å¸¦æ¥çš„å‹åŠ›ã€‚ ç¼ºç‚¹ï¼š ä¸ºäº†ä½¿å¯¹è±¡å¯ä»¥å…±äº«ï¼Œéœ€è¦å°†ä¸€äº›ä¸èƒ½å…±äº«çš„çŠ¶æ€å¤–éƒ¨åŒ–ï¼Œè¿™å°†å¢åŠ ç¨‹åºçš„å¤æ‚æ€§ã€‚ è¯»å–äº«å…ƒæ¨¡å¼çš„å¤–éƒ¨çŠ¶æ€ä¼šä½¿å¾—è¿è¡Œæ—¶é—´ç¨å¾®å˜é•¿ã€‚ è§’è‰²ï¼š â€‹ äº«å…ƒæ¨¡å¼çš„å®šä¹‰æå‡ºäº†ä¸¤ä¸ªè¦æ±‚ï¼Œç»†ç²’åº¦å’Œå…±äº«å¯¹è±¡ã€‚å› ä¸ºè¦æ±‚ç»†ç²’åº¦ï¼Œæ‰€ä»¥ä¸å¯é¿å…åœ°ä¼šä½¿å¯¹è±¡æ•°é‡å¤šä¸”æ€§è´¨ç›¸è¿‘ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å°†è¿™äº›å¯¹è±¡çš„ä¿¡æ¯åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šå†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ã€‚ â€‹ å†…éƒ¨çŠ¶æ€æŒ‡å¯¹è±¡å…±äº«å‡ºæ¥çš„ä¿¡æ¯ï¼Œå­˜å‚¨åœ¨äº«å…ƒä¿¡æ¯å†…éƒ¨ï¼Œå¹¶ä¸”ä¸å›éšç¯å¢ƒçš„æ”¹å˜è€Œæ”¹å˜ï¼› â€‹ å¤–éƒ¨çŠ¶æ€æŒ‡å¯¹è±¡å¾—ä»¥ä¾èµ–çš„ä¸€ä¸ªæ ‡è®°ï¼Œéšç¯å¢ƒçš„æ”¹å˜è€Œæ”¹å˜ï¼Œä¸å¯å…±äº«ã€‚ æ¯”å¦‚ï¼Œè¿æ¥æ± ä¸­çš„è¿æ¥å¯¹è±¡ï¼Œä¿å­˜åœ¨è¿æ¥å¯¹è±¡ä¸­çš„ç”¨æˆ·åã€å¯†ç ã€è¿æ¥URLç­‰ä¿¡æ¯ï¼Œåœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™å°±è®¾ç½®å¥½äº†ï¼Œä¸ä¼šéšç¯å¢ƒçš„æ”¹å˜è€Œæ”¹å˜ï¼Œè¿™äº›ä¸ºå†…éƒ¨çŠ¶æ€ã€‚è€Œå½“æ¯ä¸ªè¿æ¥è¦è¢«å›æ”¶åˆ©ç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒæ ‡è®°ä¸ºå¯ç”¨çŠ¶æ€ï¼Œè¿™äº›ä¸ºå¤–éƒ¨çŠ¶æ€ã€‚äº«å…ƒæ¨¡å¼çš„æœ¬è´¨æ˜¯ç¼“å­˜å…±äº«å¯¹è±¡ï¼Œé™ä½å†…å­˜æ¶ˆè€—ã€‚ æŠ½è±¡äº«å…ƒè§’è‰²ï¼ˆFlyweightï¼‰ï¼šæ˜¯æ‰€æœ‰çš„å…·ä½“äº«å…ƒç±»çš„åŸºç±»ï¼Œä¸ºå…·ä½“äº«å…ƒè§„èŒƒéœ€è¦å®ç°çš„å…¬å…±æ¥å£ï¼Œéäº«å…ƒçš„å¤–éƒ¨çŠ¶æ€ä»¥å‚æ•°çš„å½¢å¼é€šè¿‡æ–¹æ³•ä¼ å…¥ã€‚ å…·ä½“äº«å…ƒï¼ˆConcrete Flyweightï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡äº«å…ƒè§’è‰²ä¸­æ‰€è§„å®šçš„æ¥å£ã€‚ éäº«å…ƒï¼ˆUnsharable Flyweight)è§’è‰²ï¼šæ˜¯ä¸å¯ä»¥å…±äº«çš„å¤–éƒ¨çŠ¶æ€ï¼Œå®ƒä»¥å‚æ•°çš„å½¢å¼æ³¨å…¥å…·ä½“äº«å…ƒçš„ç›¸å…³æ–¹æ³•ä¸­ã€‚ äº«å…ƒå·¥å‚ï¼ˆFlyweight Factoryï¼‰è§’è‰²ï¼šè´Ÿè´£åˆ›å»ºå’Œç®¡ç†äº«å…ƒè§’è‰²ã€‚å½“å®¢æˆ·å¯¹è±¡è¯·æ±‚ä¸€ä¸ªäº«å…ƒå¯¹è±¡æ—¶ï¼Œäº«å…ƒå·¥å‚æ£€æŸ»ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨ç¬¦åˆè¦æ±‚çš„äº«å…ƒå¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨åˆ™æä¾›ç»™å®¢æˆ·ï¼›å¦‚æœä¸å­˜åœ¨çš„è¯ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº«å…ƒå¯¹è±¡ã€‚ äº«å…ƒæ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š ç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡ç›¸åŒæˆ–ç›¸ä¼¼çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡è€—è´¹å¤§é‡çš„å†…å­˜èµ„æºã€‚ å¤§éƒ¨åˆ†çš„å¯¹è±¡å¯ä»¥æŒ‰ç…§å†…éƒ¨çŠ¶æ€è¿›è¡Œåˆ†ç»„ï¼Œä¸”å¯å°†ä¸åŒéƒ¨åˆ†å¤–éƒ¨åŒ–ï¼Œè¿™æ ·æ¯ä¸€ä¸ªç»„åªéœ€ä¿å­˜ä¸€ä¸ªå†…éƒ¨çŠ¶æ€ã€‚ ç”±äºäº«å…ƒæ¨¡å¼éœ€è¦é¢å¤–ç»´æŠ¤ä¸€ä¸ªä¿å­˜äº«å…ƒçš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥åº”å½“åœ¨æœ‰è¶³å¤Ÿå¤šçš„äº«å…ƒå®ä¾‹æ—¶æ‰å€¼å¾—ä½¿ç”¨äº«å…ƒæ¨¡å¼ã€‚ JAVAå®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class FlyweightPattern { public static void main(String[] args) { FlyweightFactory factory = new FlyweightFactory(); Flyweight f01 = factory.getFlyweight(&quot;a&quot;); Flyweight f02 = factory.getFlyweight(&quot;a&quot;); Flyweight f03 = factory.getFlyweight(&quot;a&quot;); Flyweight f11 = factory.getFlyweight(&quot;b&quot;); Flyweight f12 = factory.getFlyweight(&quot;b&quot;); f01.operation(new UnsharedConcreteFlyweight(&quot;ç¬¬1æ¬¡è°ƒç”¨aã€‚&quot;)); f02.operation(new UnsharedConcreteFlyweight(&quot;ç¬¬2æ¬¡è°ƒç”¨aã€‚&quot;)); f03.operation(new UnsharedConcreteFlyweight(&quot;ç¬¬3æ¬¡è°ƒç”¨aã€‚&quot;)); f11.operation(new UnsharedConcreteFlyweight(&quot;ç¬¬1æ¬¡è°ƒç”¨bã€‚&quot;)); f12.operation(new UnsharedConcreteFlyweight(&quot;ç¬¬2æ¬¡è°ƒç”¨bã€‚&quot;)); }}//éäº«å…ƒè§’è‰²class UnsharedConcreteFlyweight { private String info; UnsharedConcreteFlyweight(String info) { this.info = info; } public String getInfo() { return info; } public void setInfo(String info) { this.info = info; }}//æŠ½è±¡äº«å…ƒè§’è‰²interface Flyweight { public void operation(UnsharedConcreteFlyweight state);}//å…·ä½“äº«å…ƒè§’è‰²class ConcreteFlyweight implements Flyweight { private String key; ConcreteFlyweight(String key) { this.key = key; System.out.println(&quot;å…·ä½“äº«å…ƒ&quot; + key + &quot;è¢«åˆ›å»ºï¼&quot;); } public void operation(UnsharedConcreteFlyweight outState) { System.out.print(&quot;å…·ä½“äº«å…ƒ&quot; + key + &quot;è¢«è°ƒç”¨ï¼Œ&quot;); System.out.println(&quot;éäº«å…ƒä¿¡æ¯æ˜¯:&quot; + outState.getInfo()); }}//äº«å…ƒå·¥å‚è§’è‰²class FlyweightFactory { private HashMap&lt;String, Flyweight&gt; flyweights = new HashMap&lt;String, Flyweight&gt;(); public Flyweight getFlyweight(String key) { Flyweight flyweight = (Flyweight) flyweights.get(key); if (flyweight != null) { System.out.println(&quot;å…·ä½“äº«å…ƒ&quot; + key + &quot;å·²ç»å­˜åœ¨ï¼Œè¢«æˆåŠŸè·å–ï¼&quot;); } else { flyweight = new ConcreteFlyweight(key); flyweights.put(key, flyweight); } return flyweight; }} 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106import javax.swing.*;import java.awt.*;import java.awt.event.MouseAdapter;import java.awt.event.MouseEvent;import java.util.ArrayList;public class WzqGame { public static void main(String[] args) { new Chessboard(); }}//æ£‹ç›˜class Chessboard extends MouseAdapter { WeiqiFactory wf; JFrame f; Graphics g; JRadioButton wz; JRadioButton bz; private final int x = 50; private final int y = 50; private final int w = 40; //å°æ–¹æ ¼å®½åº¦å’Œé«˜åº¦ private final int rw = 400; //æ£‹ç›˜å®½åº¦å’Œé«˜åº¦ Chessboard() { wf = new WeiqiFactory(); f = new JFrame(&quot;äº«å…ƒæ¨¡å¼åœ¨äº”å­æ£‹æ¸¸æˆä¸­çš„åº”ç”¨&quot;); f.setBounds(100, 100, 500, 550); f.setVisible(true); f.setResizable(false); f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); JPanel SouthJP = new JPanel(); f.add(&quot;South&quot;, SouthJP); wz = new JRadioButton(&quot;ç™½å­&quot;); bz = new JRadioButton(&quot;é»‘å­&quot;, true); ButtonGroup group = new ButtonGroup(); group.add(wz); group.add(bz); SouthJP.add(wz); SouthJP.add(bz); JPanel CenterJP = new JPanel(); CenterJP.setLayout(null); CenterJP.setSize(500, 500); CenterJP.addMouseListener(this); f.add(&quot;Center&quot;, CenterJP); try { Thread.sleep(500); } catch (InterruptedException e) { e.printStackTrace(); } g = CenterJP.getGraphics(); g.setColor(Color.BLUE); g.drawRect(x, y, rw, rw); for (int i = 1; i &lt; 10; i++) { //ç»˜åˆ¶ç¬¬iæ¡ç«–ç›´çº¿ g.drawLine(x + (i * w), y, x + (i * w), y + rw); //ç»˜åˆ¶ç¬¬iæ¡æ°´å¹³çº¿ g.drawLine(x, y + (i * w), x + rw, y + (i * w)); } } public void mouseClicked(MouseEvent e) { Point pt = new Point(e.getX() - 15, e.getY() - 15); if (wz.isSelected()) { ChessPieces c1 = wf.getChessPieces(&quot;w&quot;); c1.DownPieces(g, pt); } else if (bz.isSelected()) { ChessPieces c2 = wf.getChessPieces(&quot;b&quot;); c2.DownPieces(g, pt); } }}//æŠ½è±¡äº«å…ƒè§’è‰²ï¼šæ£‹å­interface ChessPieces { public void DownPieces(Graphics g, Point pt); //ä¸‹å­}//å…·ä½“äº«å…ƒè§’è‰²ï¼šç™½å­class WhitePieces implements ChessPieces { public void DownPieces(Graphics g, Point pt) { g.setColor(Color.WHITE); g.fillOval(pt.x, pt.y, 30, 30); }}//å…·ä½“äº«å…ƒè§’è‰²ï¼šé»‘å­class BlackPieces implements ChessPieces { public void DownPieces(Graphics g, Point pt) { g.setColor(Color.BLACK); g.fillOval(pt.x, pt.y, 30, 30); }}//äº«å…ƒå·¥å‚è§’è‰²class WeiqiFactory { private ArrayList&lt;ChessPieces&gt; qz; public WeiqiFactory() { qz = new ArrayList&lt;ChessPieces&gt;(); ChessPieces w = new WhitePieces(); qz.add(w); ChessPieces b = new BlackPieces(); qz.add(b); } public ChessPieces getChessPieces(String type) { if (type.equalsIgnoreCase(&quot;w&quot;)) { return (ChessPieces) qz.get(0); } else if (type.equalsIgnoreCase(&quot;b&quot;)) { return (ChessPieces) qz.get(1); } else { return null; } }} ã€Šç»„åˆæ¨¡å¼ Composite Patternã€‹ ç‰¹ç‚¹ï¼š å°†å¯¹è±¡ç»„åˆæˆæ ‘çŠ¶çš„å±‚æ¬¡ç»“æ„çš„æ¨¡å¼ï¼Œç”¨æ¥è¡¨ç¤ºâ€œæ•´ä½“-éƒ¨åˆ†â€çš„å…³ç³»ï¼Œä½¿ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡å…·æœ‰ä¸€è‡´çš„è®¿é—®æ€§ éƒ¨åˆ†-æ•´ä½“ ä¼˜ç‚¹ï¼š ç»„åˆæ¨¡å¼ä½¿å¾—å®¢æˆ·ç«¯ä»£ç å¯ä»¥ä¸€è‡´åœ°å¤„ç†å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡ï¼Œæ— é¡»å…³å¿ƒè‡ªå·±å¤„ç†çš„æ˜¯å•ä¸ªå¯¹è±¡ï¼Œè¿˜æ˜¯ç»„åˆå¯¹è±¡ï¼Œè¿™ç®€åŒ–äº†å®¢æˆ·ç«¯ä»£ç ï¼› æ›´å®¹æ˜“åœ¨ç»„åˆä½“å†…åŠ å…¥æ–°çš„å¯¹è±¡ï¼Œå®¢æˆ·ç«¯ä¸ä¼šå› ä¸ºåŠ å…¥äº†æ–°çš„å¯¹è±¡è€Œæ›´æ”¹æºä»£ç ï¼Œæ»¡è¶³â€œå¼€é—­åŸåˆ™â€ï¼› ç¼ºç‚¹ï¼š è®¾è®¡è¾ƒå¤æ‚ï¼Œå®¢æˆ·ç«¯éœ€è¦èŠ±æ›´å¤šæ—¶é—´ç†æ¸…ç±»ä¹‹é—´çš„å±‚æ¬¡å…³ç³»ï¼› ä¸å®¹æ˜“é™åˆ¶å®¹å™¨ä¸­çš„æ„ä»¶ï¼› ä¸å®¹æ˜“ç”¨ç»§æ‰¿çš„æ–¹æ³•æ¥å¢åŠ æ„ä»¶çš„æ–°åŠŸèƒ½ï¼› è§’è‰²ï¼š åˆ†ç±»ï¼š é€æ˜æ–¹å¼ å®‰å…¨æ–¹å¼ æŠ½è±¡æ„ä»¶ï¼ˆComponentï¼‰è§’è‰²ï¼šå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºæ ‘å¶æ„ä»¶å’Œæ ‘ææ„ä»¶å£°æ˜å…¬å…±æ¥å£ï¼Œå¹¶å®ç°å®ƒä»¬çš„é»˜è®¤è¡Œä¸ºã€‚åœ¨é€æ˜å¼çš„ç»„åˆæ¨¡å¼ä¸­æŠ½è±¡æ„ä»¶è¿˜å£°æ˜è®¿é—®å’Œç®¡ç†å­ç±»çš„æ¥å£ï¼›åœ¨å®‰å…¨å¼çš„ç»„åˆæ¨¡å¼ä¸­ä¸å£°æ˜è®¿é—®å’Œç®¡ç†å­ç±»çš„æ¥å£ï¼Œç®¡ç†å·¥ä½œç”±æ ‘ææ„ä»¶å®Œæˆã€‚ï¼ˆæ€»çš„æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œå®šä¹‰ä¸€äº›é€šç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚æ–°å¢ã€åˆ é™¤ï¼‰ æ ‘å¶æ„ä»¶ï¼ˆLeafï¼‰è§’è‰²ï¼šæ˜¯ç»„åˆä¸­çš„å¶èŠ‚ç‚¹å¯¹è±¡ï¼Œå®ƒæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œç”¨äºç»§æ‰¿æˆ–å®ç°æŠ½è±¡æ„ä»¶ã€‚ æ ‘ææ„ä»¶ï¼ˆCompositeï¼‰è§’è‰² / ä¸­é—´æ„ä»¶ï¼šæ˜¯ç»„åˆä¸­çš„åˆ†æ”¯èŠ‚ç‚¹å¯¹è±¡ï¼Œå®ƒæœ‰å­èŠ‚ç‚¹ï¼Œç”¨äºç»§æ‰¿å’Œå®ç°æŠ½è±¡æ„ä»¶ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å­˜å‚¨å’Œç®¡ç†å­éƒ¨ä»¶ï¼Œé€šå¸¸åŒ…å« Add()ã€Remove()ã€GetChild() ç­‰æ–¹æ³•ã€‚ ç»„åˆæ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š åœ¨éœ€è¦è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡æ•´ä½“ä¸éƒ¨åˆ†çš„å±‚æ¬¡ç»“æ„çš„åœºåˆã€‚ è¦æ±‚å¯¹ç”¨æˆ·éšè—ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„ä¸åŒï¼Œç”¨æˆ·å¯ä»¥ç”¨ç»Ÿä¸€çš„æ¥å£ä½¿ç”¨ç»„åˆç»“æ„ä¸­çš„æ‰€æœ‰å¯¹è±¡çš„åœºåˆã€‚ JAVAå®ç°ï¼š å®‰å…¨ç»„åˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import java.util.ArrayList;public class Safe { public static void main(String[] args) { Composite c0 = new Composite(); Composite c1 = new Composite(); Component leaf1 = new Leaf(&quot;1&quot;); Component leaf2 = new Leaf(&quot;2&quot;); Component leaf3 = new Leaf(&quot;3&quot;); c0.add(leaf1); c0.add(c1); c1.add(leaf2); c1.add(leaf3); c0.operation(); }}//æŠ½è±¡æ„ä»¶interface Component {// public void add(Component c);// public void remove(Component c);// public Component getChild(int i); public void operation();}//æ ‘å¶æ„ä»¶class Leaf implements Component { private String name; public Leaf(String name) { this.name = name; } public void add(Component c) { } public void remove(Component c) { } public Component getChild(int i) { return null; } @Override public void operation() { System.out.println(&quot;æ ‘å¶&quot; + name + &quot;ï¼šè¢«è®¿é—®ï¼&quot;); }}//æ ‘ææ„ä»¶class Composite implements Component { private ArrayList&lt;Component&gt; children = new ArrayList&lt;Component&gt;(); public void add(Component c) { children.add(c); } public void remove(Component c) { children.remove(c); } public Component getChild(int i) { return children.get(i); } @Override public void operation() { for (Object obj : children) { ((Component) obj).operation(); } }} é€æ˜ç»„åˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566import java.util.ArrayList;public class transparent { public static void main(String[] args) { Component c0 = new Composite(); Component c1 = new Composite(); Component leaf1 = new Leaf(&quot;1&quot;); Component leaf2 = new Leaf(&quot;2&quot;); Component leaf3 = new Leaf(&quot;3&quot;); c0.add(leaf1); c0.add(c1); c1.add(leaf2); c1.add(leaf3); c0.operation(); }}//æŠ½è±¡æ„ä»¶interface Component { public void add(Component c); public void remove(Component c); public Component getChild(int i); public void operation();}//æ ‘å¶æ„ä»¶class Leaf implements Component { private String name; public Leaf(String name) { this.name = name; } @Override public void add(Component c) { } @Override public void remove(Component c) { } @Override public Component getChild(int i) { return null; } @Override public void operation() { System.out.println(&quot;æ ‘å¶&quot; + name + &quot;ï¼šè¢«è®¿é—®ï¼&quot;); }}//æ ‘ææ„ä»¶class Composite implements Component { private ArrayList&lt;Component&gt; children = new ArrayList&lt;Component&gt;(); @Override public void add(Component c) { children.add(c); } @Override public void remove(Component c) { children.remove(c); } @Override public Component getChild(int i) { return children.get(i); } @Override public void operation() { for (Object obj : children) { ((Component) obj).operation(); } }} è¡Œä¸ºå‹æ¨¡å¼ ã€Š**æ¨¡æ¿æ–¹æ³•æ¨¡å¼ **Template method patternã€‹ ç‰¹ç‚¹ï¼š å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•éª¨æ¶ï¼Œè€Œå°†ç®—æ³•çš„ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜è¯¥ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚ ä¼˜ç‚¹ï¼š å®ƒå°è£…äº†ä¸å˜éƒ¨åˆ†ï¼Œæ‰©å±•å¯å˜éƒ¨åˆ†ã€‚å®ƒæŠŠè®¤ä¸ºæ˜¯ä¸å˜éƒ¨åˆ†çš„ç®—æ³•å°è£…åˆ°çˆ¶ç±»ä¸­å®ç°ï¼Œè€ŒæŠŠå¯å˜éƒ¨åˆ†ç®—æ³•ç”±å­ç±»ç»§æ‰¿å®ç°ï¼Œä¾¿äºå­ç±»ç»§ç»­æ‰©å±•ã€‚ å®ƒåœ¨çˆ¶ç±»ä¸­æå–äº†å…¬å…±çš„éƒ¨åˆ†ä»£ç ï¼Œä¾¿äºä»£ç å¤ç”¨ã€‚ éƒ¨åˆ†æ–¹æ³•æ˜¯ç”±å­ç±»å®ç°çš„ï¼Œå› æ­¤å­ç±»å¯ä»¥é€šè¿‡æ‰©å±•æ–¹å¼å¢åŠ ç›¸åº”çš„åŠŸèƒ½ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚ ç¼ºç‚¹ï¼š å¯¹æ¯ä¸ªä¸åŒçš„å®ç°éƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªå­ç±»ï¼Œè¿™ä¼šå¯¼è‡´ç±»çš„ä¸ªæ•°å¢åŠ ï¼Œç³»ç»Ÿæ›´åŠ åºå¤§ï¼Œè®¾è®¡ä¹Ÿæ›´åŠ æŠ½è±¡ï¼Œé—´æ¥åœ°å¢åŠ äº†ç³»ç»Ÿå®ç°çš„å¤æ‚åº¦ã€‚ çˆ¶ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ç”±å­ç±»å®ç°ï¼Œå­ç±»æ‰§è¡Œçš„ç»“æœä¼šå½±å“çˆ¶ç±»çš„ç»“æœï¼Œè¿™å¯¼è‡´ä¸€ç§åå‘çš„æ§åˆ¶ç»“æ„ï¼Œå®ƒæé«˜äº†ä»£ç é˜…è¯»çš„éš¾åº¦ã€‚ ç”±äºç»§æ‰¿å…³ç³»è‡ªèº«çš„ç¼ºç‚¹ï¼Œå¦‚æœçˆ¶ç±»æ·»åŠ æ–°çš„æŠ½è±¡æ–¹æ³•ï¼Œåˆ™æ‰€æœ‰å­ç±»éƒ½è¦æ”¹ä¸€éã€‚ è§’è‰²ï¼š 1ï¼‰æŠ½è±¡ç±»/æŠ½è±¡æ¨¡æ¿ï¼ˆAbstract Classï¼‰ æŠ½è±¡æ¨¡æ¿ç±»ï¼Œè´Ÿè´£ç»™å‡ºä¸€ä¸ªç®—æ³•çš„è½®å»“å’Œéª¨æ¶ã€‚å®ƒç”±ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•å’Œè‹¥å¹²ä¸ªåŸºæœ¬æ–¹æ³•æ„æˆã€‚è¿™äº›æ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹ã€‚ â‘  æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰äº†ç®—æ³•çš„éª¨æ¶ï¼ŒæŒ‰æŸç§é¡ºåºè°ƒç”¨å…¶åŒ…å«çš„åŸºæœ¬æ–¹æ³•ã€‚ â‘¡ åŸºæœ¬æ–¹æ³•ï¼šæ˜¯æ•´ä¸ªç®—æ³•ä¸­çš„ä¸€ä¸ªæ­¥éª¤ï¼ŒåŒ…å«ä»¥ä¸‹å‡ ç§ç±»å‹ã€‚ æŠ½è±¡æ–¹æ³•ï¼šåœ¨æŠ½è±¡ç±»ä¸­å£°æ˜ï¼Œç”±å…·ä½“å­ç±»å®ç°ã€‚ å…·ä½“æ–¹æ³•ï¼šåœ¨æŠ½è±¡ç±»ä¸­å·²ç»å®ç°ï¼Œåœ¨å…·ä½“å­ç±»ä¸­å¯ä»¥ç»§æ‰¿æˆ–é‡å†™å®ƒã€‚ é’©å­æ–¹æ³•ï¼šåœ¨æŠ½è±¡ç±»ä¸­å·²ç»å®ç°ï¼ŒåŒ…æ‹¬ç”¨äºåˆ¤æ–­çš„é€»è¾‘æ–¹æ³•å’Œéœ€è¦å­ç±»é‡å†™çš„ç©ºæ–¹æ³•ä¸¤ç§ã€‚ 2ï¼‰å…·ä½“å­ç±»/å…·ä½“å®ç°ï¼ˆConcrete Classï¼‰ å…·ä½“å®ç°ç±»ï¼Œå®ç°æŠ½è±¡ç±»ä¸­æ‰€å®šä¹‰çš„æŠ½è±¡æ–¹æ³•å’Œé’©å­æ–¹æ³•ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªé¡¶çº§é€»è¾‘çš„ä¸€ä¸ªç»„æˆæ­¥éª¤ã€‚ æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š ç®—æ³•çš„æ•´ä½“æ­¥éª¤å¾ˆå›ºå®šï¼Œä½†å…¶ä¸­ä¸ªåˆ«éƒ¨åˆ†æ˜“å˜æ—¶ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå°†å®¹æ˜“å˜çš„éƒ¨åˆ†æŠ½è±¡å‡ºæ¥ï¼Œä¾›å­ç±»å®ç°ã€‚ å½“å¤šä¸ªå­ç±»å­˜åœ¨å…¬å…±çš„è¡Œä¸ºæ—¶ï¼Œå¯ä»¥å°†å…¶æå–å‡ºæ¥å¹¶é›†ä¸­åˆ°ä¸€ä¸ªå…¬å…±çˆ¶ç±»ä¸­ä»¥é¿å…ä»£ç é‡å¤ã€‚é¦–å…ˆï¼Œè¦è¯†åˆ«ç°æœ‰ä»£ç ä¸­çš„ä¸åŒä¹‹å¤„ï¼Œå¹¶ä¸”å°†ä¸åŒä¹‹å¤„åˆ†ç¦»ä¸ºæ–°çš„æ“ä½œã€‚æœ€åï¼Œç”¨ä¸€ä¸ªè°ƒç”¨è¿™äº›æ–°çš„æ“ä½œçš„æ¨¡æ¿æ–¹æ³•æ¥æ›¿æ¢è¿™äº›ä¸åŒçš„ä»£ç ã€‚ å½“éœ€è¦æ§åˆ¶å­ç±»çš„æ‰©å±•æ—¶ï¼Œæ¨¡æ¿æ–¹æ³•åªåœ¨ç‰¹å®šç‚¹è°ƒç”¨é’©å­æ“ä½œï¼Œè¿™æ ·å°±åªå…è®¸åœ¨è¿™äº›ç‚¹è¿›è¡Œæ‰©å±•ã€‚ JAVAå®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334public class TemplateMethodPattern { public static void main(String[] args) { AbstractClass tm = new ConcreteClass(); tm.TemplateMethod(); }}//æŠ½è±¡ç±»abstract class AbstractClass { //æ¨¡æ¿æ–¹æ³• public void TemplateMethod() { SpecificMethod(); abstractMethod1(); abstractMethod2(); } //å…·ä½“æ–¹æ³• public void SpecificMethod() { System.out.println(&quot;æŠ½è±¡ç±»ä¸­çš„å…·ä½“æ–¹æ³•è¢«è°ƒç”¨...&quot;); } //æŠ½è±¡æ–¹æ³•1 public abstract void abstractMethod1(); //æŠ½è±¡æ–¹æ³•2 public abstract void abstractMethod2();}//å…·ä½“å­ç±»class ConcreteClass extends AbstractClass { @Override public void abstractMethod1() { System.out.println(&quot;æŠ½è±¡æ–¹æ³•1çš„å®ç°è¢«è°ƒç”¨...&quot;); } @Override public void abstractMethod2() { System.out.println(&quot;æŠ½è±¡æ–¹æ³•2çš„å®ç°è¢«è°ƒç”¨...&quot;); }} ã€Š**ç­–ç•¥æ¨¡å¼ **Strategy Patternã€‹ ç‰¹ç‚¹ï¼š è¯¥æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä¸”ç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚ç­–ç•¥æ¨¡å¼å±äºå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼Œå®ƒé€šè¿‡å¯¹ç®—æ³•è¿›è¡Œå°è£…ï¼ŒæŠŠä½¿ç”¨ç®—æ³•çš„è´£ä»»å’Œç®—æ³•çš„å®ç°åˆ†å‰²å¼€æ¥ï¼Œå¹¶å§”æ´¾ç»™ä¸åŒçš„å¯¹è±¡å¯¹è¿™äº›ç®—æ³•è¿›è¡Œç®¡ç†ã€‚ ä¼˜ç‚¹ï¼š å¤šé‡æ¡ä»¶è¯­å¥ä¸æ˜“ç»´æŠ¤ï¼Œè€Œä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶è¯­å¥ï¼Œå¦‚ if...else è¯­å¥ã€switch...case è¯­å¥ã€‚ ç­–ç•¥æ¨¡å¼æä¾›äº†ä¸€ç³»åˆ—çš„å¯ä¾›é‡ç”¨çš„ç®—æ³•æ—ï¼Œæ°å½“ä½¿ç”¨ç»§æ‰¿å¯ä»¥æŠŠç®—æ³•æ—çš„å…¬å…±ä»£ç è½¬ç§»åˆ°çˆ¶ç±»é‡Œé¢ï¼Œä»è€Œé¿å…é‡å¤çš„ä»£ç ã€‚ ç­–ç•¥æ¨¡å¼å¯ä»¥æä¾›ç›¸åŒè¡Œä¸ºçš„ä¸åŒå®ç°ï¼Œå®¢æˆ·å¯ä»¥æ ¹æ®ä¸åŒæ—¶é—´æˆ–ç©ºé—´è¦æ±‚é€‰æ‹©ä¸åŒçš„ã€‚ ç­–ç•¥æ¨¡å¼æä¾›äº†å¯¹å¼€é—­åŸåˆ™çš„å®Œç¾æ”¯æŒï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹åŸä»£ç çš„æƒ…å†µä¸‹ï¼Œçµæ´»å¢åŠ æ–°ç®—æ³•ã€‚ ç­–ç•¥æ¨¡å¼æŠŠç®—æ³•çš„ä½¿ç”¨æ”¾åˆ°ç¯å¢ƒç±»ä¸­ï¼Œè€Œç®—æ³•çš„å®ç°ç§»åˆ°å…·ä½“ç­–ç•¥ç±»ä¸­ï¼Œå®ç°äº†äºŒè€…çš„åˆ†ç¦»ã€‚ ç¼ºç‚¹ï¼š å®¢æˆ·ç«¯å¿…é¡»ç†è§£æ‰€æœ‰ç­–ç•¥ç®—æ³•çš„åŒºåˆ«ï¼Œä»¥ä¾¿é€‚æ—¶é€‰æ‹©æ°å½“çš„ç®—æ³•ç±»ã€‚ ç­–ç•¥æ¨¡å¼é€ æˆå¾ˆå¤šçš„ç­–ç•¥ç±»ï¼Œå¢åŠ ç»´æŠ¤éš¾åº¦ã€‚ è§’è‰²ï¼š æŠ½è±¡ç­–ç•¥ï¼ˆStrategyï¼‰ç±»ï¼šå®šä¹‰äº†ä¸€ä¸ªå…¬å…±æ¥å£ï¼Œå„ç§ä¸åŒçš„ç®—æ³•ä»¥ä¸åŒçš„æ–¹å¼å®ç°è¿™ä¸ªæ¥å£ï¼Œç¯å¢ƒè§’è‰²ä½¿ç”¨è¿™ä¸ªæ¥å£è°ƒç”¨ä¸åŒçš„ç®—æ³•ï¼Œä¸€èˆ¬ä½¿ç”¨æ¥å£æˆ–æŠ½è±¡ç±»å®ç°ã€‚ å…·ä½“ç­–ç•¥ï¼ˆConcrete Strategyï¼‰ç±»ï¼šå®ç°äº†æŠ½è±¡ç­–ç•¥å®šä¹‰çš„æ¥å£ï¼Œæä¾›å…·ä½“çš„ç®—æ³•å®ç°ã€‚ ç¯å¢ƒï¼ˆContextï¼‰ç±»ï¼šæŒæœ‰ä¸€ä¸ªç­–ç•¥ç±»çš„å¼•ç”¨ï¼Œæœ€ç»ˆç»™å®¢æˆ·ç«¯è°ƒç”¨ã€‚ ç­–ç•¥æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§æ—¶ï¼Œå¯å°†æ¯ä¸ªç®—æ³•å°è£…åˆ°ç­–ç•¥ç±»ä¸­ã€‚ ä¸€ä¸ªç±»å®šä¹‰äº†å¤šç§è¡Œä¸ºï¼Œå¹¶ä¸”è¿™äº›è¡Œä¸ºåœ¨è¿™ä¸ªç±»çš„æ“ä½œä¸­ä»¥å¤šä¸ªæ¡ä»¶è¯­å¥çš„å½¢å¼å‡ºç°ï¼Œå¯å°†æ¯ä¸ªæ¡ä»¶åˆ†æ”¯ç§»å…¥å®ƒä»¬å„è‡ªçš„ç­–ç•¥ç±»ä¸­ä»¥ä»£æ›¿è¿™äº›æ¡ä»¶è¯­å¥ã€‚ ç³»ç»Ÿä¸­å„ç®—æ³•å½¼æ­¤å®Œå…¨ç‹¬ç«‹ï¼Œä¸”è¦æ±‚å¯¹å®¢æˆ·éšè—å…·ä½“ç®—æ³•çš„å®ç°ç»†èŠ‚æ—¶ã€‚ ç³»ç»Ÿè¦æ±‚ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ä¸åº”è¯¥çŸ¥é“å…¶æ“ä½œçš„æ•°æ®æ—¶ï¼Œå¯ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥éšè—ä¸ç®—æ³•ç›¸å…³çš„æ•°æ®ç»“æ„ã€‚ å¤šä¸ªç±»åªåŒºåˆ«åœ¨è¡¨ç°è¡Œä¸ºä¸åŒï¼Œå¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©å…·ä½“è¦æ‰§è¡Œçš„è¡Œä¸ºã€‚ JAVAå®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041public class StrategyPattern { public static void main(String[] args) { Context c = new Context(); Strategy s = new ConcreteStrategyA(); c.setStrategy(s); c.strategyMethod(); System.out.println(&quot;-----------------&quot;); s = new ConcreteStrategyB(); c.setStrategy(s); c.strategyMethod(); }}//æŠ½è±¡ç­–ç•¥ç±»interface Strategy { public void strategyMethod(); //ç­–ç•¥æ–¹æ³•}//å…·ä½“ç­–ç•¥ç±»Aclass ConcreteStrategyA implements Strategy { public void strategyMethod() { System.out.println(&quot;å…·ä½“ç­–ç•¥Açš„ç­–ç•¥æ–¹æ³•è¢«è®¿é—®ï¼&quot;); }}//å…·ä½“ç­–ç•¥ç±»Bclass ConcreteStrategyB implements Strategy { public void strategyMethod() { System.out.println(&quot;å…·ä½“ç­–ç•¥Bçš„ç­–ç•¥æ–¹æ³•è¢«è®¿é—®ï¼&quot;); }}//ç¯å¢ƒç±»class Context { private Strategy strategy; public Strategy getStrategy() { return strategy; } public void setStrategy(Strategy strategy) { this.strategy = strategy; } public void strategyMethod() { strategy.strategyMethod(); }} ã€Š**å‘½ä»¤æ¨¡å¼ **Command Patternã€‹ ç‰¹ç‚¹ï¼š å°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å‘å‡ºè¯·æ±‚çš„è´£ä»»å’Œæ‰§è¡Œè¯·æ±‚çš„è´£ä»»åˆ†å‰²å¼€ã€‚è¿™æ ·ä¸¤è€…ä¹‹é—´é€šè¿‡å‘½ä»¤å¯¹è±¡è¿›è¡Œæ²Ÿé€šï¼Œè¿™æ ·æ–¹ä¾¿å°†å‘½ä»¤å¯¹è±¡è¿›è¡Œå‚¨å­˜ã€ä¼ é€’ã€è°ƒç”¨ã€å¢åŠ ä¸ç®¡ç†ã€‚ ä¼˜ç‚¹ï¼š é€šè¿‡å¼•å…¥ä¸­é—´ä»¶ï¼ˆæŠ½è±¡æ¥å£ï¼‰é™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚ æ‰©å±•æ€§è‰¯å¥½ï¼Œå¢åŠ æˆ–åˆ é™¤å‘½ä»¤éå¸¸æ–¹ä¾¿ã€‚é‡‡ç”¨å‘½ä»¤æ¨¡å¼å¢åŠ ä¸åˆ é™¤å‘½ä»¤ä¸ä¼šå½±å“å…¶ä»–ç±»ï¼Œä¸”æ»¡è¶³â€œå¼€é—­åŸåˆ™â€ã€‚ å¯ä»¥å®ç°å®å‘½ä»¤ã€‚å‘½ä»¤æ¨¡å¼å¯ä»¥ä¸ç»„åˆæ¨¡å¼ç»“åˆï¼Œå°†å¤šä¸ªå‘½ä»¤è£…é…æˆä¸€ä¸ªç»„åˆå‘½ä»¤ï¼Œå³å®å‘½ä»¤ã€‚ æ–¹ä¾¿å®ç° Undo å’Œ Redo æ“ä½œã€‚å‘½ä»¤æ¨¡å¼å¯ä»¥ä¸åé¢ä»‹ç»çš„å¤‡å¿˜å½•æ¨¡å¼ç»“åˆï¼Œå®ç°å‘½ä»¤çš„æ’¤é”€ä¸æ¢å¤ã€‚ å¯ä»¥åœ¨ç°æœ‰å‘½ä»¤çš„åŸºç¡€ä¸Šï¼Œå¢åŠ é¢å¤–åŠŸèƒ½ã€‚æ¯”å¦‚æ—¥å¿—è®°å½•ï¼Œç»“åˆè£…é¥°å™¨æ¨¡å¼ä¼šæ›´åŠ çµæ´»ã€‚ ç¼ºç‚¹ï¼š å¯èƒ½äº§ç”Ÿå¤§é‡å…·ä½“çš„å‘½ä»¤ç±»ã€‚å› ä¸ºæ¯ä¸€ä¸ªå…·ä½“æ“ä½œéƒ½éœ€è¦è®¾è®¡ä¸€ä¸ªå…·ä½“å‘½ä»¤ç±»ï¼Œè¿™ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚ å‘½ä»¤æ¨¡å¼çš„ç»“æœå…¶å®å°±æ˜¯æ¥æ”¶æ–¹çš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ä¸ºäº†ä»¥å‘½ä»¤çš„å½¢å¼è¿›è¡Œæ¶æ„ã€è§£è€¦è¯·æ±‚ä¸å®ç°ï¼Œå¼•å…¥äº†é¢å¤–ç±»å‹ç»“æ„ï¼ˆå¼•å…¥äº†è¯·æ±‚æ–¹ä¸æŠ½è±¡å‘½ä»¤æ¥å£ï¼‰ï¼Œå¢åŠ äº†ç†è§£ä¸Šçš„å›°éš¾ã€‚ä¸è¿‡è¿™ä¹Ÿæ˜¯è®¾è®¡æ¨¡å¼çš„é€šç—…ï¼ŒæŠ½è±¡å¿…ç„¶ä¼šé¢å¤–å¢åŠ ç±»çš„æ•°é‡ï¼Œä»£ç æŠ½ç¦»è‚¯å®šæ¯”ä»£ç èšåˆæ›´åŠ éš¾ç†è§£ è§’è‰²ï¼š æŠ½è±¡å‘½ä»¤ç±»ï¼ˆCommandï¼‰è§’è‰²ï¼šå£°æ˜æ‰§è¡Œå‘½ä»¤çš„æ¥å£ï¼Œæ‹¥æœ‰æ‰§è¡Œå‘½ä»¤çš„æŠ½è±¡æ–¹æ³• execute()ã€‚ å…·ä½“å‘½ä»¤ç±»ï¼ˆConcrete Commandï¼‰è§’è‰²ï¼šæ˜¯æŠ½è±¡å‘½ä»¤ç±»çš„å…·ä½“å®ç°ç±»ï¼Œå®ƒæ‹¥æœ‰æ¥æ”¶è€…å¯¹è±¡ï¼Œå¹¶é€šè¿‡è°ƒç”¨æ¥æ”¶è€…çš„åŠŸèƒ½æ¥å®Œæˆå‘½ä»¤è¦æ‰§è¡Œçš„æ“ä½œã€‚ å®ç°è€…/æ¥æ”¶è€…ï¼ˆReceiverï¼‰è§’è‰²ï¼šæ‰§è¡Œå‘½ä»¤åŠŸèƒ½çš„ç›¸å…³æ“ä½œï¼Œæ˜¯å…·ä½“å‘½ä»¤å¯¹è±¡ä¸šåŠ¡çš„çœŸæ­£å®ç°è€…ã€‚ è°ƒç”¨è€…/è¯·æ±‚è€…ï¼ˆInvokerï¼‰è§’è‰²ï¼šæ˜¯è¯·æ±‚çš„å‘é€è€…ï¼Œå®ƒé€šå¸¸æ‹¥æœ‰å¾ˆå¤šçš„å‘½ä»¤å¯¹è±¡ï¼Œå¹¶é€šè¿‡è®¿é—®å‘½ä»¤å¯¹è±¡æ¥æ‰§è¡Œç›¸å…³è¯·æ±‚ï¼Œå®ƒä¸ç›´æ¥è®¿é—®æ¥æ”¶è€…ã€‚ å‘½ä»¤æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š è¯·æ±‚è°ƒç”¨è€…éœ€è¦ä¸è¯·æ±‚æ¥æ”¶è€…è§£è€¦æ—¶ï¼Œå‘½ä»¤æ¨¡å¼å¯ä»¥ä½¿è°ƒç”¨è€…å’Œæ¥æ”¶è€…ä¸ç›´æ¥äº¤äº’ã€‚ ç³»ç»Ÿéšæœºè¯·æ±‚å‘½ä»¤æˆ–ç»å¸¸å¢åŠ ã€åˆ é™¤å‘½ä»¤æ—¶ï¼Œå‘½ä»¤æ¨¡å¼å¯ä»¥æ–¹ä¾¿åœ°å®ç°è¿™äº›åŠŸèƒ½ã€‚ å½“ç³»ç»Ÿéœ€è¦æ‰§è¡Œä¸€ç»„æ“ä½œæ—¶ï¼Œå‘½ä»¤æ¨¡å¼å¯ä»¥å®šä¹‰å®å‘½ä»¤æ¥å®ç°è¯¥åŠŸèƒ½ã€‚ å½“ç³»ç»Ÿéœ€è¦æ”¯æŒå‘½ä»¤çš„æ’¤é”€ï¼ˆUndoï¼‰æ“ä½œå’Œæ¢å¤ï¼ˆRedoï¼‰æ“ä½œæ—¶ï¼Œå¯ä»¥å°†å‘½ä»¤å¯¹è±¡å­˜å‚¨èµ·æ¥ï¼Œé‡‡ç”¨å¤‡å¿˜å½•æ¨¡å¼æ¥å®ç°ã€‚ JAVAå®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041public class StrategyPattern { public static void main(String[] args) { Context c = new Context(); Strategy s = new ConcreteStrategyA(); c.setStrategy(s); c.strategyMethod(); System.out.println(&quot;-----------------&quot;); s = new ConcreteStrategyB(); c.setStrategy(s); c.strategyMethod(); }}//æŠ½è±¡ç­–ç•¥ç±»interface Strategy { public void strategyMethod(); //ç­–ç•¥æ–¹æ³•}//å…·ä½“ç­–ç•¥ç±»Aclass ConcreteStrategyA implements Strategy { public void strategyMethod() { System.out.println(&quot;å…·ä½“ç­–ç•¥Açš„ç­–ç•¥æ–¹æ³•è¢«è®¿é—®ï¼&quot;); }}//å…·ä½“ç­–ç•¥ç±»Bclass ConcreteStrategyB implements Strategy { public void strategyMethod() { System.out.println(&quot;å…·ä½“ç­–ç•¥Bçš„ç­–ç•¥æ–¹æ³•è¢«è®¿é—®ï¼&quot;); }}//ç¯å¢ƒç±»class Context { private Strategy strategy; public Strategy getStrategy() { return strategy; } public void setStrategy(Strategy strategy) { this.strategy = strategy; } public void strategyMethod() { strategy.strategyMethod(); }} ã€Š**è´£ä»»/èŒè´£ é“¾æ¨¡å¼ **Chain of Responsibility patternã€‹ ç‰¹ç‚¹ï¼š ä¸ºäº†é¿å…è¯·æ±‚å‘é€è€…ä¸å¤šä¸ªè¯·æ±‚å¤„ç†è€…è€¦åˆåœ¨ä¸€èµ·ï¼Œäºæ˜¯å°†æ‰€æœ‰è¯·æ±‚çš„å¤„ç†è€…é€šè¿‡å‰ä¸€å¯¹è±¡è®°ä½å…¶ä¸‹ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è€Œè¿æˆä¸€æ¡é“¾ï¼›å½“æœ‰è¯·æ±‚å‘ç”Ÿæ—¶ï¼Œå¯å°†è¯·æ±‚æ²¿ç€è¿™æ¡é“¾ä¼ é€’ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚ ä¼˜ç‚¹ï¼š é™ä½äº†å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ã€‚è¯¥æ¨¡å¼ä½¿å¾—ä¸€ä¸ªå¯¹è±¡æ— é¡»çŸ¥é“åˆ°åº•æ˜¯å“ªä¸€ä¸ªå¯¹è±¡å¤„ç†å…¶è¯·æ±‚ä»¥åŠé“¾çš„ç»“æ„ï¼Œå‘é€è€…å’Œæ¥æ”¶è€…ä¹Ÿæ— é¡»æ‹¥æœ‰å¯¹æ–¹çš„æ˜ç¡®ä¿¡æ¯ã€‚ å¢å¼ºäº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚å¯ä»¥æ ¹æ®éœ€è¦å¢åŠ æ–°çš„è¯·æ±‚å¤„ç†ç±»ï¼Œæ»¡è¶³å¼€é—­åŸåˆ™ã€‚ å¢å¼ºäº†ç»™å¯¹è±¡æŒ‡æ´¾èŒè´£çš„çµæ´»æ€§ã€‚å½“å·¥ä½œæµç¨‹å‘ç”Ÿå˜åŒ–ï¼Œå¯ä»¥åŠ¨æ€åœ°æ”¹å˜é“¾å†…çš„æˆå‘˜æˆ–è€…è°ƒåŠ¨å®ƒä»¬çš„æ¬¡åºï¼Œä¹Ÿå¯åŠ¨æ€åœ°æ–°å¢æˆ–è€…åˆ é™¤è´£ä»»ã€‚ è´£ä»»é“¾ç®€åŒ–äº†å¯¹è±¡ä¹‹é—´çš„è¿æ¥ã€‚æ¯ä¸ªå¯¹è±¡åªéœ€ä¿æŒä¸€ä¸ªæŒ‡å‘å…¶åç»§è€…çš„å¼•ç”¨ï¼Œä¸éœ€ä¿æŒå…¶ä»–æ‰€æœ‰å¤„ç†è€…çš„å¼•ç”¨ï¼Œè¿™é¿å…äº†ä½¿ç”¨ä¼—å¤šçš„ if æˆ–è€… ifÂ·Â·Â·else è¯­å¥ã€‚ è´£ä»»åˆ†æ‹…ã€‚æ¯ä¸ªç±»åªéœ€è¦å¤„ç†è‡ªå·±è¯¥å¤„ç†çš„å·¥ä½œï¼Œä¸è¯¥å¤„ç†çš„ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¯¹è±¡å®Œæˆï¼Œæ˜ç¡®å„ç±»çš„è´£ä»»èŒƒå›´ï¼Œç¬¦åˆç±»çš„å•ä¸€èŒè´£åŸåˆ™ã€‚ ç¼ºç‚¹ï¼š ä¸èƒ½ä¿è¯æ¯ä¸ªè¯·æ±‚ä¸€å®šè¢«å¤„ç†ã€‚ç”±äºä¸€ä¸ªè¯·æ±‚æ²¡æœ‰æ˜ç¡®çš„æ¥æ”¶è€…ï¼Œæ‰€ä»¥ä¸èƒ½ä¿è¯å®ƒä¸€å®šä¼šè¢«å¤„ç†ï¼Œè¯¥è¯·æ±‚å¯èƒ½ä¸€ç›´ä¼ åˆ°é“¾çš„æœ«ç«¯éƒ½å¾—ä¸åˆ°å¤„ç†ã€‚ å¯¹æ¯”è¾ƒé•¿çš„èŒè´£é“¾ï¼Œè¯·æ±‚çš„å¤„ç†å¯èƒ½æ¶‰åŠå¤šä¸ªå¤„ç†å¯¹è±¡ï¼Œç³»ç»Ÿæ€§èƒ½å°†å—åˆ°ä¸€å®šå½±å“ã€‚ èŒè´£é“¾å»ºç«‹çš„åˆç†æ€§è¦é å®¢æˆ·ç«¯æ¥ä¿è¯ï¼Œå¢åŠ äº†å®¢æˆ·ç«¯çš„å¤æ‚æ€§ï¼Œå¯èƒ½ä¼šç”±äºèŒè´£é“¾çš„é”™è¯¯è®¾ç½®è€Œå¯¼è‡´ç³»ç»Ÿå‡ºé”™ï¼Œå¦‚å¯èƒ½ä¼šé€ æˆå¾ªç¯è°ƒç”¨ã€‚ è§’è‰²ï¼š æŠ½è±¡å¤„ç†è€…ï¼ˆHandlerï¼‰è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ¥å£ï¼ŒåŒ…å«æŠ½è±¡å¤„ç†æ–¹æ³•å’Œä¸€ä¸ªåç»§è¿æ¥ã€‚ å…·ä½“å¤„ç†è€…ï¼ˆConcrete Handlerï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡å¤„ç†è€…çš„å¤„ç†æ–¹æ³•ï¼Œåˆ¤æ–­èƒ½å¦å¤„ç†æœ¬æ¬¡è¯·æ±‚ï¼Œå¦‚æœå¯ä»¥å¤„ç†è¯·æ±‚åˆ™å¤„ç†ï¼Œå¦åˆ™å°†è¯¥è¯·æ±‚è½¬ç»™å®ƒçš„åç»§è€…ã€‚ å®¢æˆ·ç±»ï¼ˆClientï¼‰è§’è‰²ï¼šåˆ›å»ºå¤„ç†é“¾ï¼Œå¹¶å‘é“¾å¤´çš„å…·ä½“å¤„ç†è€…å¯¹è±¡æäº¤è¯·æ±‚ï¼Œå®ƒä¸å…³å¿ƒå¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’è¿‡ç¨‹ã€‚ è´£ä»»/èŒè´£ é“¾æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å¤šä¸ªå¯¹è±¡å¯ä»¥å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œä½†å…·ä½“ç”±å“ªä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚åœ¨è¿è¡Œæ—¶è‡ªåŠ¨ç¡®å®šã€‚ å¯åŠ¨æ€æŒ‡å®šä¸€ç»„å¯¹è±¡å¤„ç†è¯·æ±‚ï¼Œæˆ–æ·»åŠ æ–°çš„å¤„ç†è€…ã€‚ éœ€è¦åœ¨ä¸æ˜ç¡®æŒ‡å®šè¯·æ±‚å¤„ç†è€…çš„æƒ…å†µä¸‹ï¼Œå‘å¤šä¸ªå¤„ç†è€…ä¸­çš„ä¸€ä¸ªæäº¤è¯·æ±‚ã€‚ JAVAå®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253public class ChainOfResponsibilityPattern { public static void main(String[] args) { //ç»„è£…è´£ä»»é“¾ Handler handler1 = new ConcreteHandler1(); Handler handler2 = new ConcreteHandler2(); handler1.setNext(handler2); //æäº¤è¯·æ±‚ handler1.handleRequest(&quot;two&quot;); }}//æŠ½è±¡å¤„ç†è€…è§’è‰²abstract class Handler { private Handler next; public void setNext(Handler next) { this.next = next; } public Handler getNext() { return next; } //å¤„ç†è¯·æ±‚çš„æ–¹æ³• public abstract void handleRequest(String request);}//å…·ä½“å¤„ç†è€…è§’è‰²1class ConcreteHandler1 extends Handler { @Override public void handleRequest(String request) { if (request.equals(&quot;one&quot;)) { System.out.println(&quot;å…·ä½“å¤„ç†è€…1è´Ÿè´£å¤„ç†è¯¥è¯·æ±‚ï¼&quot;); } else { if (getNext() != null) { getNext().handleRequest(request); } else { System.out.println(&quot;æ²¡æœ‰äººå¤„ç†è¯¥è¯·æ±‚ï¼&quot;); } } }}//å…·ä½“å¤„ç†è€…è§’è‰²2class ConcreteHandler2 extends Handler { @Override public void handleRequest(String request) { if (request.equals(&quot;two&quot;)) { System.out.println(&quot;å…·ä½“å¤„ç†è€…2è´Ÿè´£å¤„ç†è¯¥è¯·æ±‚ï¼&quot;); } else { if (getNext() != null) { getNext().handleRequest(request); } else { System.out.println(&quot;æ²¡æœ‰äººå¤„ç†è¯¥è¯·æ±‚ï¼&quot;); } } }} ã€Š**çŠ¶æ€æ¨¡å¼ **State patternã€‹ ç‰¹ç‚¹ï¼š å¯¹æœ‰çŠ¶æ€çš„å¯¹è±¡ï¼ŒæŠŠå¤æ‚çš„â€œåˆ¤æ–­é€»è¾‘â€æå–åˆ°ä¸åŒçš„çŠ¶æ€å¯¹è±¡ä¸­ï¼Œå…è®¸çŠ¶æ€å¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºã€‚ ä¼˜ç‚¹ï¼š ç»“æ„æ¸…æ™°ï¼ŒçŠ¶æ€æ¨¡å¼å°†ä¸ç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºå±€éƒ¨åŒ–åˆ°ä¸€ä¸ªçŠ¶æ€ä¸­ï¼Œå¹¶ä¸”å°†ä¸åŒçŠ¶æ€çš„è¡Œä¸ºåˆ†å‰²å¼€æ¥ï¼Œæ»¡è¶³â€œå•ä¸€èŒè´£åŸåˆ™â€ã€‚ å°†çŠ¶æ€è½¬æ¢æ˜¾ç¤ºåŒ–ï¼Œå‡å°‘å¯¹è±¡é—´çš„ç›¸äº’ä¾èµ–ã€‚å°†ä¸åŒçš„çŠ¶æ€å¼•å…¥ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä¼šä½¿å¾—çŠ¶æ€è½¬æ¢å˜å¾—æ›´åŠ æ˜ç¡®ï¼Œä¸”å‡å°‘å¯¹è±¡é—´çš„ç›¸äº’ä¾èµ–ã€‚ çŠ¶æ€ç±»èŒè´£æ˜ç¡®ï¼Œæœ‰åˆ©äºç¨‹åºçš„æ‰©å±•ã€‚é€šè¿‡å®šä¹‰æ–°çš„å­ç±»å¾ˆå®¹æ˜“åœ°å¢åŠ æ–°çš„çŠ¶æ€å’Œè½¬æ¢ã€‚ ç¼ºç‚¹ï¼š çŠ¶æ€æ¨¡å¼çš„ä½¿ç”¨å¿…ç„¶ä¼šå¢åŠ ç³»ç»Ÿçš„ç±»ä¸å¯¹è±¡çš„ä¸ªæ•°ã€‚ çŠ¶æ€æ¨¡å¼çš„ç»“æ„ä¸å®ç°éƒ½è¾ƒä¸ºå¤æ‚ï¼Œå¦‚æœä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´ç¨‹åºç»“æ„å’Œä»£ç çš„æ··ä¹±ã€‚ çŠ¶æ€æ¨¡å¼å¯¹å¼€é—­åŸåˆ™çš„æ”¯æŒå¹¶ä¸å¤ªå¥½ï¼Œå¯¹äºå¯ä»¥åˆ‡æ¢çŠ¶æ€çš„çŠ¶æ€æ¨¡å¼ï¼Œå¢åŠ æ–°çš„çŠ¶æ€ç±»éœ€è¦ä¿®æ”¹é‚£äº›è´Ÿè´£çŠ¶æ€è½¬æ¢çš„æºç ï¼Œå¦åˆ™æ— æ³•åˆ‡æ¢åˆ°æ–°å¢çŠ¶æ€ï¼Œè€Œä¸”ä¿®æ”¹æŸä¸ªçŠ¶æ€ç±»çš„è¡Œä¸ºä¹Ÿéœ€è¦ä¿®æ”¹å¯¹åº”ç±»çš„æºç ã€‚ è§’è‰²ï¼š ç¯å¢ƒç±»ï¼ˆContextï¼‰è§’è‰²ï¼šä¹Ÿç§°ä¸ºä¸Šä¸‹æ–‡ï¼Œå®ƒå®šä¹‰äº†å®¢æˆ·ç«¯éœ€è¦çš„æ¥å£ï¼Œå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå½“å‰çŠ¶æ€ï¼Œå¹¶è´Ÿè´£å…·ä½“çŠ¶æ€çš„åˆ‡æ¢ã€‚ æŠ½è±¡çŠ¶æ€ï¼ˆStateï¼‰è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç”¨ä»¥å°è£…ç¯å¢ƒå¯¹è±¡ä¸­çš„ç‰¹å®šçŠ¶æ€æ‰€å¯¹åº”çš„è¡Œä¸ºï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¡Œä¸ºã€‚ å…·ä½“çŠ¶æ€ï¼ˆConcrete Stateï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡çŠ¶æ€æ‰€å¯¹åº”çš„è¡Œä¸ºï¼Œå¹¶ä¸”åœ¨éœ€è¦çš„æƒ…å†µä¸‹è¿›è¡ŒçŠ¶æ€åˆ‡æ¢ã€‚ çŠ¶æ€æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸”å®ƒå¿…é¡»åœ¨è¿è¡Œæ—¶æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸ºæ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨çŠ¶æ€æ¨¡å¼ã€‚ ä¸€ä¸ªæ“ä½œä¸­å«æœ‰åºå¤§çš„åˆ†æ”¯ç»“æ„ï¼Œå¹¶ä¸”è¿™äº›åˆ†æ”¯å†³å®šäºå¯¹è±¡çš„çŠ¶æ€æ—¶ã€‚ JAVAå®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class StatePatternClient { public static void main(String[] args) { Context context = new Context(); //åˆ›å»ºç¯å¢ƒ context.Handle(); //å¤„ç†è¯·æ±‚ context.Handle(); context.Handle(); context.Handle(); }}//ç¯å¢ƒç±»class Context { private State state; //å®šä¹‰ç¯å¢ƒç±»çš„åˆå§‹çŠ¶æ€ public Context() { this.state = new ConcreteStateA(); } //è®¾ç½®æ–°çŠ¶æ€ public void setState(State state) { this.state = state; } //è¯»å–çŠ¶æ€ public State getState() { return (state); } //å¯¹è¯·æ±‚åšå¤„ç† public void Handle() { state.Handle(this); }}//æŠ½è±¡çŠ¶æ€ç±»abstract class State { public abstract void Handle(Context context);}//å…·ä½“çŠ¶æ€Aç±»class ConcreteStateA extends State { @Override public void Handle(Context context) { System.out.println(&quot;å½“å‰çŠ¶æ€æ˜¯ A.&quot;); context.setState(new ConcreteStateB()); }}//å…·ä½“çŠ¶æ€Bç±»class ConcreteStateB extends State { @Override public void Handle(Context context) { System.out.println(&quot;å½“å‰çŠ¶æ€æ˜¯ B.&quot;); context.setState(new ConcreteStateA()); }} ã€Šè§‚å¯Ÿè€…æ¨¡å¼ Observer patternã€‹ ç‰¹ç‚¹ï¼š æŒ‡å¤šä¸ªå¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚è¿™ç§æ¨¡å¼æœ‰æ—¶åˆç§°ä½œå‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€æ¨¡å‹-è§†å›¾æ¨¡å¼ã€‚ ä¼˜ç‚¹ï¼š é™ä½äº†ç›®æ ‡ä¸è§‚å¯Ÿè€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œä¸¤è€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆå…³ç³»ã€‚ç¬¦åˆä¾èµ–å€’ç½®åŸåˆ™ã€‚ ç›®æ ‡ä¸è§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹äº†ä¸€å¥—è§¦å‘æœºåˆ¶ã€‚ ç¼ºç‚¹ï¼š ç›®æ ‡ä¸è§‚å¯Ÿè€…ä¹‹é—´çš„ä¾èµ–å…³ç³»å¹¶æ²¡æœ‰å®Œå…¨è§£é™¤ï¼Œè€Œä¸”æœ‰å¯èƒ½å‡ºç°å¾ªç¯å¼•ç”¨ã€‚ å½“è§‚å¯Ÿè€…å¯¹è±¡å¾ˆå¤šæ—¶ï¼Œé€šçŸ¥çš„å‘å¸ƒä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ï¼Œå½±å“ç¨‹åºçš„æ•ˆç‡ã€‚ è§’è‰²ï¼š æŠ½è±¡ä¸»é¢˜ï¼ˆSubjectï¼‰è§’è‰²ï¼šä¹Ÿå«æŠ½è±¡ç›®æ ‡ç±»ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç”¨äºä¿å­˜è§‚å¯Ÿè€…å¯¹è±¡çš„èšé›†ç±»å’Œå¢åŠ ã€åˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡çš„æ–¹æ³•ï¼Œä»¥åŠé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…çš„æŠ½è±¡æ–¹æ³•ã€‚ å…·ä½“ä¸»é¢˜ï¼ˆConcrete Subjectï¼‰è§’è‰²ï¼šä¹Ÿå«å…·ä½“ç›®æ ‡ç±»ï¼Œå®ƒå®ç°æŠ½è±¡ç›®æ ‡ä¸­çš„é€šçŸ¥æ–¹æ³•ï¼Œå½“å…·ä½“ä¸»é¢˜çš„å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé€šçŸ¥æ‰€æœ‰æ³¨å†Œè¿‡çš„è§‚å¯Ÿè€…å¯¹è±¡ã€‚ æŠ½è±¡è§‚å¯Ÿè€…ï¼ˆObserverï¼‰è§’è‰²ï¼šå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»æˆ–æ¥å£ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªæ›´æ–°è‡ªå·±çš„æŠ½è±¡æ–¹æ³•ï¼Œå½“æ¥åˆ°å…·ä½“ä¸»é¢˜çš„æ›´æ”¹é€šçŸ¥æ—¶è¢«è°ƒç”¨ã€‚ å…·ä½“è§‚å¯Ÿè€…ï¼ˆConcrete Observerï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡è§‚å¯Ÿè€…ä¸­å®šä¹‰çš„æŠ½è±¡æ–¹æ³•ï¼Œä»¥ä¾¿åœ¨å¾—åˆ°ç›®æ ‡çš„æ›´æ”¹é€šçŸ¥æ—¶æ›´æ–°è‡ªèº«çš„çŠ¶æ€ã€‚ è§‚å¯Ÿè€…æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šå…³ç³»ï¼Œä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ä¼šå½±å“å…¶ä»–å¯¹è±¡ã€‚ å½“ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€æ–¹é¢æ—¶ï¼Œå¯å°†è¿™äºŒè€…å°è£…åœ¨ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä»¥ä½¿å®ƒä»¬å¯ä»¥å„è‡ªç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨ã€‚ å®ç°ç±»ä¼¼å¹¿æ’­æœºåˆ¶çš„åŠŸèƒ½ï¼Œä¸éœ€è¦çŸ¥é“å…·ä½“æ”¶å¬è€…ï¼Œåªéœ€åˆ†å‘å¹¿æ’­ï¼Œç³»ç»Ÿä¸­æ„Ÿå…´è¶£çš„å¯¹è±¡ä¼šè‡ªåŠ¨æ¥æ”¶è¯¥å¹¿æ’­ã€‚ å¤šå±‚çº§åµŒå¥—ä½¿ç”¨ï¼Œå½¢æˆä¸€ç§é“¾å¼è§¦å‘æœºåˆ¶ï¼Œä½¿å¾—äº‹ä»¶å…·å¤‡è·¨åŸŸï¼ˆè·¨è¶Šä¸¤ç§è§‚å¯Ÿè€…ç±»å‹ï¼‰é€šçŸ¥ã€‚ JAVAå®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class StatePatternClient { public static void main(String[] args) { Context context = new Context(); //åˆ›å»ºç¯å¢ƒ context.Handle(); //å¤„ç†è¯·æ±‚ context.Handle(); context.Handle(); context.Handle(); }}//ç¯å¢ƒç±»class Context { private State state; //å®šä¹‰ç¯å¢ƒç±»çš„åˆå§‹çŠ¶æ€ public Context() { this.state = new ConcreteStateA(); } //è®¾ç½®æ–°çŠ¶æ€ public void setState(State state) { this.state = state; } //è¯»å–çŠ¶æ€ public State getState() { return (state); } //å¯¹è¯·æ±‚åšå¤„ç† public void Handle() { state.Handle(this); }}//æŠ½è±¡çŠ¶æ€ç±»abstract class State { public abstract void Handle(Context context);}//å…·ä½“çŠ¶æ€Aç±»class ConcreteStateA extends State { @Override public void Handle(Context context) { System.out.println(&quot;å½“å‰çŠ¶æ€æ˜¯ A.&quot;); context.setState(new ConcreteStateB()); }}//å…·ä½“çŠ¶æ€Bç±»class ConcreteStateB extends State { @Override public void Handle(Context context) { System.out.println(&quot;å½“å‰çŠ¶æ€æ˜¯ B.&quot;); context.setState(new ConcreteStateA()); }} ã€Šä¸­ä»‹è€…æ¨¡å¼ Mediator Patternã€‹ ç‰¹ç‚¹ï¼š å®šä¹‰ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œä½¿åŸæœ‰å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ¾æ•£ï¼Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚ä¸­ä»‹è€…æ¨¡å¼åˆå«è°ƒåœæ¨¡å¼ï¼Œå®ƒæ˜¯è¿ªç±³ç‰¹æ³•åˆ™çš„å…¸å‹åº”ç”¨ã€‚ ä¼˜ç‚¹ï¼š ç±»ä¹‹é—´å„å¸å…¶èŒï¼Œç¬¦åˆè¿ªç±³ç‰¹æ³•åˆ™ã€‚ é™ä½äº†å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ€§ï¼Œä½¿å¾—å¯¹è±¡æ˜“äºç‹¬ç«‹åœ°è¢«å¤ç”¨ã€‚ å°†å¯¹è±¡é—´çš„ä¸€å¯¹å¤šå…³è”è½¬å˜ä¸ºä¸€å¯¹ä¸€çš„å…³è”ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œä½¿å¾—ç³»ç»Ÿæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚ ç¼ºç‚¹ï¼š ä¸­ä»‹è€…æ¨¡å¼å°†åŸæœ¬å¤šä¸ªå¯¹è±¡ç›´æ¥çš„ç›¸äº’ä¾èµ–å˜æˆäº†ä¸­ä»‹è€…å’Œå¤šä¸ªåŒäº‹ç±»çš„ä¾èµ–å…³ç³»ã€‚å½“åŒäº‹ç±»è¶Šå¤šæ—¶ï¼Œä¸­ä»‹è€…å°±ä¼šè¶Šè‡ƒè‚¿ï¼Œå˜å¾—å¤æ‚ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ è§’è‰²ï¼š æŠ½è±¡ä¸­ä»‹è€…ï¼ˆMediatorï¼‰è§’è‰²ï¼šå®ƒæ˜¯ä¸­ä»‹è€…çš„æ¥å£ï¼Œæä¾›äº†åŒäº‹å¯¹è±¡æ³¨å†Œä¸è½¬å‘åŒäº‹å¯¹è±¡ä¿¡æ¯çš„æŠ½è±¡æ–¹æ³•ã€‚ å…·ä½“ä¸­ä»‹è€…ï¼ˆConcrete Mediatorï¼‰è§’è‰²ï¼šå®ç°ä¸­ä»‹è€…æ¥å£ï¼Œå®šä¹‰ä¸€ä¸ª List æ¥ç®¡ç†åŒäº‹å¯¹è±¡ï¼Œåè°ƒå„ä¸ªåŒäº‹è§’è‰²ä¹‹é—´çš„äº¤äº’å…³ç³»ï¼Œå› æ­¤å®ƒä¾èµ–äºåŒäº‹è§’è‰²ã€‚ æŠ½è±¡åŒäº‹ç±»ï¼ˆColleagueï¼‰è§’è‰²ï¼šå®šä¹‰åŒäº‹ç±»çš„æ¥å£ï¼Œä¿å­˜ä¸­ä»‹è€…å¯¹è±¡ï¼Œæä¾›åŒäº‹å¯¹è±¡äº¤äº’çš„æŠ½è±¡æ–¹æ³•ï¼Œå®ç°æ‰€æœ‰ç›¸äº’å½±å“çš„åŒäº‹ç±»çš„å…¬å…±åŠŸèƒ½ã€‚ å…·ä½“åŒäº‹ç±»ï¼ˆConcrete Colleagueï¼‰è§’è‰²ï¼šæ˜¯æŠ½è±¡åŒäº‹ç±»çš„å®ç°è€…ï¼Œå½“éœ€è¦ä¸å…¶ä»–åŒäº‹å¯¹è±¡äº¤äº’æ—¶ï¼Œç”±ä¸­ä»‹è€…å¯¹è±¡è´Ÿè´£åç»­çš„äº¤äº’ã€‚ ä¸­ä»‹è€…æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å½“å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤æ‚çš„ç½‘çŠ¶ç»“æ„å…³ç³»è€Œå¯¼è‡´ä¾èµ–å…³ç³»æ··ä¹±ä¸”éš¾ä»¥å¤ç”¨æ—¶ã€‚ å½“æƒ³åˆ›å»ºä¸€ä¸ªè¿è¡Œäºå¤šä¸ªç±»ä¹‹é—´çš„å¯¹è±¡ï¼Œåˆä¸æƒ³ç”Ÿæˆæ–°çš„å­ç±»æ—¶ JAVAå®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465import java.util.*;public class MediatorPattern { public static void main(String[] args) { Mediator md = new ConcreteMediator(); Colleague c1, c2; c1 = new ConcreteColleague1(); c2 = new ConcreteColleague2(); md.register(c1); md.register(c2); c1.send(); System.out.println(&quot;-------------&quot;); c2.send(); }}//æŠ½è±¡ä¸­ä»‹è€…abstract class Mediator { public abstract void register(Colleague colleague); public abstract void relay(Colleague cl); //è½¬å‘}//å…·ä½“ä¸­ä»‹è€…class ConcreteMediator extends Mediator { private List&lt;Colleague&gt; colleagues = new ArrayList&lt;Colleague&gt;(); public void register(Colleague colleague) { if (!colleagues.contains(colleague)) { colleagues.add(colleague); colleague.setMedium(this); } } public void relay(Colleague cl) { for (Colleague ob : colleagues) { if (!ob.equals(cl)) { ((Colleague) ob).receive(); } } }}//æŠ½è±¡åŒäº‹ç±»abstract class Colleague { protected Mediator mediator; public void setMedium(Mediator mediator) { this.mediator = mediator; } public abstract void receive(); public abstract void send();}//å…·ä½“åŒäº‹ç±»class ConcreteColleague1 extends Colleague { public void receive() { System.out.println(&quot;å…·ä½“åŒäº‹ç±»1æ”¶åˆ°è¯·æ±‚ã€‚&quot;); } public void send() { System.out.println(&quot;å…·ä½“åŒäº‹ç±»1å‘å‡ºè¯·æ±‚ã€‚&quot;); mediator.relay(this); //è¯·ä¸­ä»‹è€…è½¬å‘ }}//å…·ä½“åŒäº‹ç±»class ConcreteColleague2 extends Colleague { public void receive() { System.out.println(&quot;å…·ä½“åŒäº‹ç±»2æ”¶åˆ°è¯·æ±‚ã€‚&quot;); } public void send() { System.out.println(&quot;å…·ä½“åŒäº‹ç±»2å‘å‡ºè¯·æ±‚ã€‚&quot;); mediator.relay(this); //è¯·ä¸­ä»‹è€…è½¬å‘ }} ã€Šè¿­ä»£å™¨æ¨¡å¼ Iterator Patternã€‹ ç‰¹ç‚¹ï¼š æä¾›ä¸€ä¸ªå¯¹è±¡æ¥é¡ºåºè®¿é—®èšåˆå¯¹è±¡ä¸­çš„ä¸€ç³»åˆ—æ•°æ®ï¼Œè€Œä¸æš´éœ²èšåˆå¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚ ä¼˜ç‚¹ï¼š è®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡çš„å†…å®¹è€Œæ— é¡»æš´éœ²å®ƒçš„å†…éƒ¨è¡¨ç¤ºã€‚ éå†ä»»åŠ¡äº¤ç”±è¿­ä»£å™¨å®Œæˆï¼Œè¿™ç®€åŒ–äº†èšåˆç±»ã€‚ å®ƒæ”¯æŒä»¥ä¸åŒæ–¹å¼éå†ä¸€ä¸ªèšåˆï¼Œç”šè‡³å¯ä»¥è‡ªå®šä¹‰è¿­ä»£å™¨çš„å­ç±»ä»¥æ”¯æŒæ–°çš„éå†ã€‚ å¢åŠ æ–°çš„èšåˆç±»å’Œè¿­ä»£å™¨ç±»éƒ½å¾ˆæ–¹ä¾¿ï¼Œæ— é¡»ä¿®æ”¹åŸæœ‰ä»£ç ã€‚ å°è£…æ€§è‰¯å¥½ï¼Œä¸ºéå†ä¸åŒçš„èšåˆç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚ ç¼ºç‚¹ï¼š å¢åŠ äº†ç±»çš„ä¸ªæ•°ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚ è§’è‰²ï¼š æŠ½è±¡èšåˆï¼ˆAggregateï¼‰è§’è‰²ï¼šå®šä¹‰å­˜å‚¨ã€æ·»åŠ ã€åˆ é™¤èšåˆå¯¹è±¡ä»¥åŠåˆ›å»ºè¿­ä»£å™¨å¯¹è±¡çš„æ¥å£ã€‚ å…·ä½“èšåˆï¼ˆConcreteAggregateï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡èšåˆç±»ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“è¿­ä»£å™¨çš„å®ä¾‹ã€‚ æŠ½è±¡è¿­ä»£å™¨ï¼ˆIteratorï¼‰è§’è‰²ï¼šå®šä¹‰è®¿é—®å’Œéå†èšåˆå…ƒç´ çš„æ¥å£ï¼Œé€šå¸¸åŒ…å« hasNext()ã€first()ã€next() ç­‰æ–¹æ³•ã€‚ å…·ä½“è¿­ä»£å™¨ï¼ˆConcretelteratorï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡è¿­ä»£å™¨æ¥å£ä¸­æ‰€å®šä¹‰çš„æ–¹æ³•ï¼Œå®Œæˆå¯¹èšåˆå¯¹è±¡çš„éå†ï¼Œè®°å½•éå†çš„å½“å‰ä½ç½®ã€‚ ä¸­ä»‹è€…æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å½“éœ€è¦ä¸ºèšåˆå¯¹è±¡æä¾›å¤šç§éå†æ–¹å¼æ—¶ã€‚ å½“éœ€è¦ä¸ºéå†ä¸åŒçš„èšåˆç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æ—¶ã€‚ å½“è®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡çš„å†…å®¹è€Œæ— é¡»æš´éœ²å…¶å†…éƒ¨ç»†èŠ‚çš„è¡¨ç¤ºæ—¶ã€‚ JAVAå®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677import java.util.*;public class IteratorPattern { public static void main(String[] args) { Aggregate ag = new ConcreteAggregate(); ag.add(&quot;ä¸­å±±å¤§å­¦&quot;); ag.add(&quot;åå—ç†å·¥&quot;); ag.add(&quot;éŸ¶å…³å­¦é™¢&quot;); System.out.print(&quot;èšåˆçš„å†…å®¹æœ‰ï¼š&quot;); Iterator it = ag.getIterator(); while (it.hasNext()) { Object ob = it.next(); System.out.print(ob.toString() + &quot;\\t&quot;); } Object ob = it.first(); System.out.println(&quot;\\nFirstï¼š&quot; + ob.toString()); }}//æŠ½è±¡èšåˆ å®šä¹‰å­˜å‚¨ã€æ·»åŠ ã€åˆ é™¤èšåˆå¯¹è±¡ä»¥åŠåˆ›å»ºè¿­ä»£å™¨å¯¹è±¡çš„æ¥å£ã€‚interface Aggregate { public void add(Object obj); public void remove(Object obj); public Iterator getIterator();}//å…·ä½“èšåˆ å®ç°æŠ½è±¡èšåˆç±»ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“è¿­ä»£å™¨çš„å®ä¾‹ã€‚class ConcreteAggregate implements Aggregate { private List&lt;Object&gt; list = new ArrayList&lt;Object&gt;(); @Override public void add(Object obj) { list.add(obj); } @Override public void remove(Object obj) { list.remove(obj); } @Override public Iterator getIterator() { return (new ConcreteIterator(list)); }}//æŠ½è±¡è¿­ä»£å™¨interface Iterator { Object first(); Object next(); boolean hasNext();}//å…·ä½“è¿­ä»£å™¨class ConcreteIterator implements Iterator { private List&lt;Object&gt; list = null; private int index = -1; public ConcreteIterator(List&lt;Object&gt; list) { this.list = list; } @Override public boolean hasNext() { if (index &lt; list.size() - 1) { return true; } else { return false; } } @Override public Object first() { index = 0; Object obj = list.get(index); ; return obj; } @Override public Object next() { Object obj = null; if (this.hasNext()) { obj = list.get(++index); } return obj; }} ã€Šè®¿é—®è€…æ¨¡å¼ Visitor Patternã€‹ ç‰¹ç‚¹ï¼š å°†ä½œç”¨äºæŸç§æ•°æ®ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œåˆ†ç¦»å‡ºæ¥å°è£…æˆç‹¬ç«‹çš„ç±»ï¼Œä½¿å…¶åœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„çš„å‰æä¸‹å¯ä»¥æ·»åŠ ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°çš„æ“ä½œï¼Œä¸ºæ•°æ®ç»“æ„ä¸­çš„æ¯ä¸ªå…ƒç´ æä¾›å¤šç§è®¿é—®æ–¹å¼ã€‚å®ƒå°†å¯¹æ•°æ®çš„æ“ä½œä¸æ•°æ®ç»“æ„è¿›è¡Œåˆ†ç¦»ï¼Œæ˜¯è¡Œä¸ºç±»æ¨¡å¼ä¸­æœ€å¤æ‚çš„ä¸€ç§æ¨¡å¼ã€‚ ä¼˜ç‚¹ï¼š æ‰©å±•æ€§å¥½ã€‚èƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹å¯¹è±¡ç»“æ„ä¸­çš„å…ƒç´ çš„æƒ…å†µä¸‹ï¼Œä¸ºå¯¹è±¡ç»“æ„ä¸­çš„å…ƒç´ æ·»åŠ æ–°çš„åŠŸèƒ½ã€‚ å¤ç”¨æ€§å¥½ã€‚å¯ä»¥é€šè¿‡è®¿é—®è€…æ¥å®šä¹‰æ•´ä¸ªå¯¹è±¡ç»“æ„é€šç”¨çš„åŠŸèƒ½ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¤ç”¨ç¨‹åº¦ã€‚ çµæ´»æ€§å¥½ã€‚è®¿é—®è€…æ¨¡å¼å°†æ•°æ®ç»“æ„ä¸ä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œè§£è€¦ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ç›¸å¯¹è‡ªç”±åœ°æ¼”åŒ–è€Œä¸å½±å“ç³»ç»Ÿçš„æ•°æ®ç»“æ„ã€‚ ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚è®¿é—®è€…æ¨¡å¼æŠŠç›¸å…³çš„è¡Œä¸ºå°è£…åœ¨ä¸€èµ·ï¼Œæ„æˆä¸€ä¸ªè®¿é—®è€…ï¼Œä½¿æ¯ä¸€ä¸ªè®¿é—®è€…çš„åŠŸèƒ½éƒ½æ¯”è¾ƒå•ä¸€ã€‚ ç¼ºç‚¹ï¼š å¢åŠ æ–°çš„å…ƒç´ ç±»å¾ˆå›°éš¾ã€‚åœ¨è®¿é—®è€…æ¨¡å¼ä¸­ï¼Œæ¯å¢åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ ç±»ï¼Œéƒ½è¦åœ¨æ¯ä¸€ä¸ªå…·ä½“è®¿é—®è€…ç±»ä¸­å¢åŠ ç›¸åº”çš„å…·ä½“æ“ä½œï¼Œè¿™è¿èƒŒäº†â€œå¼€é—­åŸåˆ™â€ã€‚ ç ´åå°è£…ã€‚è®¿é—®è€…æ¨¡å¼ä¸­å…·ä½“å…ƒç´ å¯¹è®¿é—®è€…å…¬å¸ƒç»†èŠ‚ï¼Œè¿™ç ´åäº†å¯¹è±¡çš„å°è£…æ€§ã€‚ è¿åäº†ä¾èµ–å€’ç½®åŸåˆ™ã€‚è®¿é—®è€…æ¨¡å¼ä¾èµ–äº†å…·ä½“ç±»ï¼Œè€Œæ²¡æœ‰ä¾èµ–æŠ½è±¡ç±»ã€‚ è§’è‰²ï¼š æŠ½è±¡è®¿é—®è€…ï¼ˆVisitorï¼‰è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªè®¿é—®å…·ä½“å…ƒç´ çš„æ¥å£ï¼Œä¸ºæ¯ä¸ªå…·ä½“å…ƒç´ ç±»å¯¹åº”ä¸€ä¸ªè®¿é—®æ“ä½œ visit() ï¼Œè¯¥æ“ä½œä¸­çš„å‚æ•°ç±»å‹æ ‡è¯†äº†è¢«è®¿é—®çš„å…·ä½“å…ƒç´ ã€‚ å…·ä½“è®¿é—®è€…ï¼ˆConcreteVisitorï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡è®¿é—®è€…è§’è‰²ä¸­å£°æ˜çš„å„ä¸ªè®¿é—®æ“ä½œï¼Œç¡®å®šè®¿é—®è€…è®¿é—®ä¸€ä¸ªå…ƒç´ æ—¶è¯¥åšä»€ä¹ˆã€‚ æŠ½è±¡å…ƒç´ ï¼ˆElementï¼‰è§’è‰²ï¼šå£°æ˜ä¸€ä¸ªåŒ…å«æ¥å—æ“ä½œ accept() çš„æ¥å£ï¼Œè¢«æ¥å—çš„è®¿é—®è€…å¯¹è±¡ä½œä¸º accept() æ–¹æ³•çš„å‚æ•°ã€‚ å…·ä½“å…ƒç´ ï¼ˆConcreteElementï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡å…ƒç´ è§’è‰²æä¾›çš„ accept() æ“ä½œï¼Œå…¶æ–¹æ³•ä½“é€šå¸¸éƒ½æ˜¯ visitor.visit(this) ï¼Œå¦å¤–å…·ä½“å…ƒç´ ä¸­å¯èƒ½è¿˜åŒ…å«æœ¬èº«ä¸šåŠ¡é€»è¾‘çš„ç›¸å…³æ“ä½œã€‚ å¯¹è±¡ç»“æ„ï¼ˆObject Structureï¼‰è§’è‰²ï¼šæ˜¯ä¸€ä¸ªåŒ…å«å…ƒç´ è§’è‰²çš„å®¹å™¨ï¼Œæä¾›è®©è®¿é—®è€…å¯¹è±¡éå†å®¹å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ çš„æ–¹æ³•ï¼Œé€šå¸¸ç”± Listã€Setã€Map ç­‰èšåˆç±»å®ç°ã€‚ è®¿é—®è€…æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å¯¹è±¡ç»“æ„ç›¸å¯¹ç¨³å®šï¼Œä½†å…¶æ“ä½œç®—æ³•ç»å¸¸å˜åŒ–çš„ç¨‹åºã€‚ å¯¹è±¡ç»“æ„ä¸­çš„å¯¹è±¡éœ€è¦æä¾›å¤šç§ä¸åŒä¸”ä¸ç›¸å…³çš„æ“ä½œï¼Œè€Œä¸”è¦é¿å…è®©è¿™äº›æ“ä½œçš„å˜åŒ–å½±å“å¯¹è±¡çš„ç»“æ„ã€‚ å¯¹è±¡ç»“æ„åŒ…å«å¾ˆå¤šç±»å‹çš„å¯¹è±¡ï¼Œå¸Œæœ›å¯¹è¿™äº›å¯¹è±¡å®æ–½ä¸€äº›ä¾èµ–äºå…¶å…·ä½“ç±»å‹çš„æ“ä½œã€‚ JAVAå®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374import java.util.*;public class VisitorPattern { public static void main(String[] args) { ObjectStructure os = new ObjectStructure(); os.add(new ConcreteElementA()); os.add(new ConcreteElementB()); Visitor visitor = new ConcreteVisitorA(); os.accept(visitor); System.out.println(&quot;------------------------&quot;); visitor = new ConcreteVisitorB(); os.accept(visitor); }}//æŠ½è±¡è®¿é—®è€…interface Visitor { void visit(ConcreteElementA element); void visit(ConcreteElementB element);}//å…·ä½“è®¿é—®è€…Aç±»class ConcreteVisitorA implements Visitor { public void visit(ConcreteElementA element) { System.out.println(&quot;å…·ä½“è®¿é—®è€…Aè®¿é—®--&gt;&quot; + element.operationA()); } public void visit(ConcreteElementB element) { System.out.println(&quot;å…·ä½“è®¿é—®è€…Aè®¿é—®--&gt;&quot; + element.operationB()); }}//å…·ä½“è®¿é—®è€…Bç±»class ConcreteVisitorB implements Visitor { public void visit(ConcreteElementA element) { System.out.println(&quot;å…·ä½“è®¿é—®è€…Bè®¿é—®--&gt;&quot; + element.operationA()); } public void visit(ConcreteElementB element) { System.out.println(&quot;å…·ä½“è®¿é—®è€…Bè®¿é—®--&gt;&quot; + element.operationB()); }}//æŠ½è±¡å…ƒç´ ç±»interface Element { void accept(Visitor visitor);}//å…·ä½“å…ƒç´ Aç±»class ConcreteElementA implements Element { public void accept(Visitor visitor) { visitor.visit(this); } public String operationA() { return &quot;å…·ä½“å…ƒç´ Açš„æ“ä½œã€‚&quot;; }}//å…·ä½“å…ƒç´ Bç±»class ConcreteElementB implements Element { public void accept(Visitor visitor) { visitor.visit(this); } public String operationB() { return &quot;å…·ä½“å…ƒç´ Bçš„æ“ä½œã€‚&quot;; }}//å¯¹è±¡ç»“æ„è§’è‰²class ObjectStructure { private List&lt;Element&gt; list = new ArrayList&lt;Element&gt;(); public void accept(Visitor visitor) { Iterator&lt;Element&gt; i = list.iterator(); while (i.hasNext()) { ((Element) i.next()).accept(visitor); } } public void add(Element element) { list.add(element); } public void remove(Element element) { list.remove(element); }} ã€Šå¤‡å¿˜å½•/å¿«ç…§ æ¨¡å¼ Memento Patternã€‹ ç‰¹ç‚¹ï¼š åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œä»¥ä¾¿ä»¥åå½“éœ€è¦æ—¶èƒ½å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚è¯¥æ¨¡å¼åˆå«å¿«ç…§æ¨¡å¼ã€‚ ä¼˜ç‚¹ï¼š æä¾›äº†ä¸€ç§å¯ä»¥æ¢å¤çŠ¶æ€çš„æœºåˆ¶ã€‚å½“ç”¨æˆ·éœ€è¦æ—¶èƒ½å¤Ÿæ¯”è¾ƒæ–¹ä¾¿åœ°å°†æ•°æ®æ¢å¤åˆ°æŸä¸ªå†å²çš„çŠ¶æ€ã€‚ å®ç°äº†å†…éƒ¨çŠ¶æ€çš„å°è£…ã€‚é™¤äº†åˆ›å»ºå®ƒçš„å‘èµ·äººä¹‹å¤–ï¼Œå…¶ä»–å¯¹è±¡éƒ½ä¸èƒ½å¤Ÿè®¿é—®è¿™äº›çŠ¶æ€ä¿¡æ¯ã€‚ ç®€åŒ–äº†å‘èµ·äººç±»ã€‚å‘èµ·äººä¸éœ€è¦ç®¡ç†å’Œä¿å­˜å…¶å†…éƒ¨çŠ¶æ€çš„å„ä¸ªå¤‡ä»½ï¼Œæ‰€æœ‰çŠ¶æ€ä¿¡æ¯éƒ½ä¿å­˜åœ¨å¤‡å¿˜å½•ä¸­ï¼Œå¹¶ç”±ç®¡ç†è€…è¿›è¡Œç®¡ç†ï¼Œè¿™ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚ ç¼ºç‚¹ï¼š èµ„æºæ¶ˆè€—å¤§ã€‚å¦‚æœè¦ä¿å­˜çš„å†…éƒ¨çŠ¶æ€ä¿¡æ¯è¿‡å¤šæˆ–è€…ç‰¹åˆ«é¢‘ç¹ï¼Œå°†ä¼šå ç”¨æ¯”è¾ƒå¤§çš„å†…å­˜èµ„æºã€‚ è§’è‰²ï¼š å‘èµ·äººï¼ˆOriginatorï¼‰è§’è‰²ï¼šè®°å½•å½“å‰æ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€ä¿¡æ¯ï¼Œæä¾›åˆ›å»ºå¤‡å¿˜å½•å’Œæ¢å¤å¤‡å¿˜å½•æ•°æ®çš„åŠŸèƒ½ï¼Œå®ç°å…¶ä»–ä¸šåŠ¡åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è®¿é—®å¤‡å¿˜å½•é‡Œçš„æ‰€æœ‰ä¿¡æ¯ã€‚ å¤‡å¿˜å½•ï¼ˆMementoï¼‰è§’è‰²ï¼šè´Ÿè´£å­˜å‚¨å‘èµ·äººçš„å†…éƒ¨çŠ¶æ€ï¼Œåœ¨éœ€è¦çš„æ—¶å€™æä¾›è¿™äº›å†…éƒ¨çŠ¶æ€ç»™å‘èµ·äººã€‚ ç®¡ç†è€…ï¼ˆCaretakerï¼‰è§’è‰²ï¼šå¯¹å¤‡å¿˜å½•è¿›è¡Œç®¡ç†ï¼Œæä¾›ä¿å­˜ä¸è·å–å¤‡å¿˜å½•çš„åŠŸèƒ½ï¼Œä½†å…¶ä¸èƒ½å¯¹å¤‡å¿˜å½•çš„å†…å®¹è¿›è¡Œè®¿é—®ä¸ä¿®æ”¹ã€‚ å¤‡å¿˜å½•/å¿«ç…§ æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š JAVAå®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152public class MementoPattern { public static void main(String[] args) { Originator or = new Originator(); Caretaker cr = new Caretaker(); or.setState(&quot;S0&quot;); System.out.println(&quot;åˆå§‹çŠ¶æ€:&quot; + or.getState()); cr.setMemento(or.createMemento()); //ä¿å­˜çŠ¶æ€ or.setState(&quot;S1&quot;); System.out.println(&quot;æ–°çš„çŠ¶æ€:&quot; + or.getState()); or.restoreMemento(cr.getMemento()); //æ¢å¤çŠ¶æ€ System.out.println(&quot;æ¢å¤çŠ¶æ€:&quot; + or.getState()); }}//å¤‡å¿˜å½•class Memento { private String state; public Memento(String state) { this.state = state; } public void setState(String state) { this.state = state; } public String getState() { return state; }}//å‘èµ·äººclass Originator { private String state; public void setState(String state) { this.state = state; } public String getState() { return state; } public Memento createMemento() { return new Memento(state); } public void restoreMemento(Memento m) { this.setState(m.getState()); }}//ç®¡ç†è€…class Caretaker { private Memento memento; public void setMemento(Memento m) { memento = m; } public Memento getMemento() { return memento; }} ã€Šè§£é‡Šå™¨æ¨¡å¼ Interpreter Patternã€‹ ç‰¹ç‚¹ï¼š ç»™åˆ†æå¯¹è±¡å®šä¹‰ä¸€ä¸ªè¯­è¨€ï¼Œå¹¶å®šä¹‰è¯¥è¯­è¨€çš„æ–‡æ³•è¡¨ç¤ºï¼Œå†è®¾è®¡ä¸€ä¸ªè§£æå™¨æ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨ç¼–è¯‘è¯­è¨€çš„æ–¹å¼æ¥åˆ†æåº”ç”¨ä¸­çš„å®ä¾‹ã€‚è¿™ç§æ¨¡å¼å®ç°äº†æ–‡æ³•è¡¨è¾¾å¼å¤„ç†çš„æ¥å£ï¼Œè¯¥æ¥å£è§£é‡Šä¸€ä¸ªç‰¹å®šçš„ä¸Šä¸‹æ–‡ã€‚ ä¼˜ç‚¹ï¼š æ‰©å±•æ€§å¥½ã€‚ç”±äºåœ¨è§£é‡Šå™¨æ¨¡å¼ä¸­ä½¿ç”¨ç±»æ¥è¡¨ç¤ºè¯­è¨€çš„æ–‡æ³•è§„åˆ™ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ç»§æ‰¿ç­‰æœºåˆ¶æ¥æ”¹å˜æˆ–æ‰©å±•æ–‡æ³•ã€‚ å®¹æ˜“å®ç°ã€‚åœ¨è¯­æ³•æ ‘ä¸­çš„æ¯ä¸ªè¡¨è¾¾å¼èŠ‚ç‚¹ç±»éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œæ‰€ä»¥å®ç°å…¶æ–‡æ³•è¾ƒä¸ºå®¹æ˜“ã€‚ ç¼ºç‚¹ï¼š æ‰§è¡Œæ•ˆç‡è¾ƒä½ã€‚è§£é‡Šå™¨æ¨¡å¼ä¸­é€šå¸¸ä½¿ç”¨å¤§é‡çš„å¾ªç¯å’Œé€’å½’è°ƒç”¨ï¼Œå½“è¦è§£é‡Šçš„å¥å­è¾ƒå¤æ‚æ—¶ï¼Œå…¶è¿è¡Œé€Ÿåº¦å¾ˆæ…¢ï¼Œä¸”ä»£ç çš„è°ƒè¯•è¿‡ç¨‹ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚ ä¼šå¼•èµ·ç±»è†¨èƒ€ã€‚è§£é‡Šå™¨æ¨¡å¼ä¸­çš„æ¯æ¡è§„åˆ™è‡³å°‘éœ€è¦å®šä¹‰ä¸€ä¸ªç±»ï¼Œå½“åŒ…å«çš„æ–‡æ³•è§„åˆ™å¾ˆå¤šæ—¶ï¼Œç±»çš„ä¸ªæ•°å°†æ€¥å‰§å¢åŠ ï¼Œå¯¼è‡´ç³»ç»Ÿéš¾ä»¥ç®¡ç†ä¸ç»´æŠ¤ã€‚ å¯åº”ç”¨çš„åœºæ™¯æ¯”è¾ƒå°‘ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œéœ€è¦å®šä¹‰è¯­è¨€æ–‡æ³•çš„åº”ç”¨å®ä¾‹éå¸¸å°‘ï¼Œæ‰€ä»¥è¿™ç§æ¨¡å¼å¾ˆå°‘è¢«ä½¿ç”¨åˆ°ã€‚ è§’è‰²ï¼š æ–‡æ³•ï¼ˆä¸»è°“å®¾ï¼‰ã€å¥å­ã€è¯­æ³•æ ‘ æŠ½è±¡è¡¨è¾¾å¼ï¼ˆAbstract Expressionï¼‰è§’è‰²ï¼šå®šä¹‰è§£é‡Šå™¨çš„æ¥å£ï¼Œçº¦å®šè§£é‡Šå™¨çš„è§£é‡Šæ“ä½œï¼Œä¸»è¦åŒ…å«è§£é‡Šæ–¹æ³• interpret()ã€‚ ç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼ˆTerminal Expressionï¼‰è§’è‰²ï¼šæ˜¯æŠ½è±¡è¡¨è¾¾å¼çš„å­ç±»ï¼Œç”¨æ¥å®ç°æ–‡æ³•ä¸­ä¸ç»ˆç»“ç¬¦ç›¸å…³çš„æ“ä½œï¼Œæ–‡æ³•ä¸­çš„æ¯ä¸€ä¸ªç»ˆç»“ç¬¦éƒ½æœ‰ä¸€ä¸ªå…·ä½“ç»ˆç»“è¡¨è¾¾å¼ä¸ä¹‹ç›¸å¯¹åº”ã€‚ éç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼ˆNonterminal Expressionï¼‰è§’è‰²ï¼šä¹Ÿæ˜¯æŠ½è±¡è¡¨è¾¾å¼çš„å­ç±»ï¼Œç”¨æ¥å®ç°æ–‡æ³•ä¸­ä¸éç»ˆç»“ç¬¦ç›¸å…³çš„æ“ä½œï¼Œæ–‡æ³•ä¸­çš„æ¯æ¡è§„åˆ™éƒ½å¯¹åº”äºä¸€ä¸ªéç»ˆç»“ç¬¦è¡¨è¾¾å¼ã€‚ ç¯å¢ƒï¼ˆContextï¼‰è§’è‰²ï¼šé€šå¸¸åŒ…å«å„ä¸ªè§£é‡Šå™¨éœ€è¦çš„æ•°æ®æˆ–æ˜¯å…¬å…±çš„åŠŸèƒ½ï¼Œä¸€èˆ¬ç”¨æ¥ä¼ é€’è¢«æ‰€æœ‰è§£é‡Šå™¨å…±äº«çš„æ•°æ®ï¼Œåé¢çš„è§£é‡Šå™¨å¯ä»¥ä»è¿™é‡Œè·å–è¿™äº›å€¼ã€‚ å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼šä¸»è¦ä»»åŠ¡æ˜¯å°†éœ€è¦åˆ†æçš„å¥å­æˆ–è¡¨è¾¾å¼è½¬æ¢æˆä½¿ç”¨è§£é‡Šå™¨å¯¹è±¡æè¿°çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œç„¶åè°ƒç”¨è§£é‡Šå™¨çš„è§£é‡Šæ–¹æ³•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒè§’è‰²é—´æ¥è®¿é—®è§£é‡Šå™¨çš„è§£é‡Šæ–¹æ³•ã€‚ è§£é‡Šå™¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š å½“è¯­è¨€çš„æ–‡æ³•è¾ƒä¸ºç®€å•ï¼Œä¸”æ‰§è¡Œæ•ˆç‡ä¸æ˜¯å…³é”®é—®é¢˜æ—¶ã€‚ å½“é—®é¢˜é‡å¤å‡ºç°ï¼Œä¸”å¯ä»¥ç”¨ä¸€ç§ç®€å•çš„è¯­è¨€æ¥è¿›è¡Œè¡¨è¾¾æ—¶ã€‚ å½“ä¸€ä¸ªè¯­è¨€éœ€è¦è§£é‡Šæ‰§è¡Œï¼Œå¹¶ä¸”è¯­è¨€ä¸­çš„å¥å­å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘çš„æ—¶å€™ï¼Œå¦‚ XML æ–‡æ¡£è§£é‡Šã€‚ JAVAå®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667import java.util.*;/*æ–‡æ³•è§„åˆ™ &lt;expression&gt; ::= &lt;city&gt;çš„&lt;person&gt; &lt;city&gt; ::= éŸ¶å…³|å¹¿å· &lt;person&gt; ::= è€äºº|å¦‡å¥³|å„¿ç«¥*/public class InterpreterPatternDemo { public static void main(String[] args) { Context bus = new Context(); bus.freeRide(&quot;éŸ¶å…³çš„è€äºº&quot;); bus.freeRide(&quot;éŸ¶å…³çš„å¹´è½»äºº&quot;); bus.freeRide(&quot;å¹¿å·çš„å¦‡å¥³&quot;); bus.freeRide(&quot;å¹¿å·çš„å„¿ç«¥&quot;); bus.freeRide(&quot;å±±ä¸œçš„å„¿ç«¥&quot;); }}//æŠ½è±¡è¡¨è¾¾å¼ç±»interface Expression { public boolean interpret(String info);}//ç»ˆç»“ç¬¦è¡¨è¾¾å¼ç±»class TerminalExpression implements Expression { private Set&lt;String&gt; set = new HashSet&lt;String&gt;(); public TerminalExpression(String[] data) { for (int i = 0; i &lt; data.length; i++) set.add(data[i]); } @Override public boolean interpret(String info) { if (set.contains(info)) { return true; } return false; }}//éç»ˆç»“ç¬¦è¡¨è¾¾å¼ç±»class AndExpression implements Expression { private Expression city = null; private Expression person = null; public AndExpression(Expression city, Expression person) { this.city = city; this.person = person; } @Override public boolean interpret(String info) { String s[] = info.split(&quot;çš„&quot;); return city.interpret(s[0]) &amp;&amp; person.interpret(s[1]); }}//ç¯å¢ƒç±»class Context { private String[] citys = {&quot;éŸ¶å…³&quot;, &quot;å¹¿å·&quot;}; private String[] persons = {&quot;è€äºº&quot;, &quot;å¦‡å¥³&quot;, &quot;å„¿ç«¥&quot;}; private Expression cityPerson; public Context() { Expression city = new TerminalExpression(citys); Expression person = new TerminalExpression(persons); cityPerson = new AndExpression(city, person); } public void freeRide(String info) { boolean ok = cityPerson.interpret(info); if (ok) { System.out.println(&quot;æ‚¨æ˜¯&quot; + info + &quot;ï¼Œæ‚¨æœ¬æ¬¡ä¹˜è½¦å…è´¹ï¼&quot;); } else { System.out.println(info + &quot;ï¼Œæ‚¨ä¸æ˜¯å…è´¹äººå‘˜ï¼Œæœ¬æ¬¡ä¹˜è½¦æ‰£è´¹2å…ƒï¼&quot;); } }} å…¨æ¨¡å¼æ€»ç»“ ä¸€å¥è¯å…¨æ¨¡å¼æ€»ç»“ åˆ†ç±» è®¾è®¡æ¨¡å¼ ç®€è¿° ä¸€å¥è¯å½’çº³ ç›®çš„ ç”Ÿæ´»æ¡ˆä¾‹ åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ ï¼ˆç®€å•æ¥è¯´å°±æ˜¯ç”¨æ¥åˆ›å»ºå¯¹è±¡çš„ï¼‰ [å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰](#ã€Šå·¥å‚æ¨¡å¼Factory Patternã€‹) ä¸åŒæ¡ä»¶ä¸‹åˆ›å»ºä¸åŒå®ä¾‹ äº§å“æ ‡å‡†åŒ–ï¼Œç”Ÿäº§æ›´é«˜æ•ˆ å°è£…åˆ›å»ºç»†èŠ‚ å®ä½“å·¥å‚ å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰ ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ ä¸–ä¸Šåªæœ‰ä¸€ä¸ªæˆ‘ ä¿è¯ç‹¬ä¸€æ— äºŒ CEO åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰ é€šè¿‡æ‹·è´åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ æ‹”ä¸€æ ¹çŒ´æ¯›ï¼Œå¹å‡ºåƒä¸‡ä¸ª é«˜æ•ˆåˆ›å»ºå¯¹è±¡ å…‹éš† å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰ ç”¨æ¥åˆ›å»ºå¤æ‚çš„å¤åˆå¯¹è±¡ é«˜é…ä¸­é…å’Œä½é…ï¼Œæƒ³é€‰å“ªé…å°±å“ªé… å¼€æ”¾ä¸ªæ€§é…ç½®æ­¥éª¤ é€‰é… ç»“æ„å‹è®¾è®¡æ¨¡å¼ ï¼ˆå…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆï¼‰ [ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰](#ã€Šä»£ç†æ¨¡å¼ Proxy ã€‹) ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—® æ²¡æœ‰èµ„æºæ²¡æ—¶é—´ï¼Œå¾—æ‰¾åˆ«äººæ¥å¸®å¿™ å¢å¼ºèŒè´£ åª’å©† [å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰](#ã€Šå¤–è§‚æ¨¡å¼ Facade Patternã€‹) å¯¹å¤–æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ç”¨æ¥è®¿é—®å­ç³»ç»Ÿ æ‰“å¼€ä¸€æ‰‡é—¨ï¼Œé€šå‘å…¨ä¸–ç•Œ ç»Ÿä¸€è®¿é—®å…¥å£ å‰å° [è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰](#ã€Šè£…é¥°å™¨æ¨¡å¼ Decorator Patternã€‹) ä¸ºå¯¹è±¡æ·»åŠ æ–°åŠŸèƒ½ ä»–å¤§èˆ…ä»–äºŒèˆ…éƒ½æ˜¯ä»–èˆ… çµæ´»æ‰©å±•ã€åŒå®—åŒæº ç…é¥¼ [äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰](#ã€Šäº«å…ƒæ¨¡å¼ Flyweight Patternã€‹) ä½¿ç”¨å¯¹è±¡æ± æ¥å‡å°‘é‡å¤å¯¹è±¡çš„åˆ›å»º ä¼˜åŒ–èµ„æºé…ç½®ï¼Œå‡å°‘é‡å¤æµªè´¹ å…±äº«èµ„æºæ±  å…¨å›½ç¤¾ä¿è”ç½‘ [ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰](#ã€Šç»„åˆæ¨¡å¼ Composite Patternã€‹) å°†æ•´ä½“ä¸å±€éƒ¨ï¼ˆæ ‘å½¢ç»“æ„ï¼‰è¿›è¡Œé€’å½’ç»„åˆï¼Œè®©å®¢æˆ·ç«¯èƒ½å¤Ÿä»¥ä¸€ç§çš„æ–¹å¼å¯¹å…¶è¿›è¡Œå¤„ç† äººåœ¨ä¸€èµ·å«å›¢ä¼™ï¼Œå¿ƒåœ¨ä¸€èµ·å«å›¢é˜Ÿ ç»Ÿä¸€æ•´ä½“å’Œä¸ªä½“ ç»„ç»‡æ¶æ„æ ‘ [é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰](#ã€Šé€‚é…å™¨æ¨¡å¼ Adapter ã€‹) å°†åŸæ¥ä¸å…¼å®¹çš„ä¸¤ä¸ªç±»èåˆåœ¨ä¸€èµ· ä¸‡èƒ½å……ç”µå™¨ å…¼å®¹è½¬æ¢ ç”µæºé€‚é… [æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰](#ã€Šæ¡¥æ¥æ¨¡å¼ Bridgeã€‹) å°†ä¸¤ä¸ªèƒ½å¤Ÿç‹¬ç«‹å˜åŒ–çš„éƒ¨åˆ†åˆ†ç¦»å¼€æ¥ çº¦å®šä¼˜äºé…ç½® ä¸å…è®¸ç”¨ç»§æ‰¿ æ¡¥ è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ ï¼ˆå…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ï¼‰ æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰ å®šä¹‰ä¸€å¥—æµç¨‹æ¨¡æ¿ï¼Œæ ¹æ®éœ€è¦å®ç°æ¨¡æ¿ä¸­çš„æ“ä½œ æµç¨‹å…¨éƒ¨æ ‡å‡†åŒ–ï¼Œéœ€è¦å¾®è°ƒè¯·è¦†ç›– é€»è¾‘å¤ç”¨ æŠŠå¤§è±¡è£…è¿›å†°ç®± ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰ å°è£…ä¸åŒçš„ç®—æ³•ï¼Œç®—æ³•ä¹‹é—´èƒ½äº’ç›¸æ›¿æ¢ æ¡æ¡å¤§é“é€šç½—é©¬ï¼Œå…·ä½“å“ªæ¡ä½ æ¥å®š æŠŠé€‰æ‹©æƒäº¤ç»™ç”¨æˆ· é€‰æ‹©æ”¯ä»˜æ–¹å¼ è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰ æ‹¦æˆªçš„ç±»éƒ½å®ç°ç»Ÿä¸€æ¥å£ï¼Œæ¯ä¸ªæ¥æ”¶è€…éƒ½åŒ…å«å¯¹ä¸‹ä¸€ä¸ªæ¥æ”¶è€…çš„å¼•ç”¨ã€‚å°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶ä¸”æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚ å„äººè‡ªæ‰«é—¨å‰é›ªï¼Œè«ç®¡ä»–ä»¬ç“¦ä¸Šéœœ è§£è€¦å¤„ç†é€»è¾‘ è¸¢çš®çƒ è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰ æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´  æµæ°´çº¿ä¸Šåä¸€å¤©ï¼Œæ¯ä¸ªåŒ…è£¹æ‰«ä¸€é ç»Ÿä¸€å¯¹é›†åˆçš„è®¿é—®æ–¹å¼ é€ä¸ªæ£€ç¥¨è¿›ç«™ å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰ å°†è¯·æ±‚å°è£…æˆå‘½ä»¤ï¼Œå¹¶è®°å½•ä¸‹æ¥ï¼Œèƒ½å¤Ÿæ’¤é”€ä¸é‡åš è¿ç­¹å¸·å¹„ä¹‹ä¸­ï¼Œå†³èƒœåƒé‡Œä¹‹å¤– è§£è€¦è¯·æ±‚å’Œå¤„ç† é¥æ§å™¨ çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰ æ ¹æ®ä¸åŒçš„çŠ¶æ€åšå‡ºä¸åŒçš„è¡Œä¸º çŠ¶æ€é©±åŠ¨è¡Œä¸ºï¼Œè¡Œä¸ºå†³å®šçŠ¶æ€ ç»‘å®šçŠ¶æ€å’Œè¡Œä¸º è®¢å•çŠ¶æ€è·Ÿè¸ª å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰ ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œåœ¨éœ€è¦æ—¶è¿›è¡Œæ¢å¤ å¤±è¶³ä¸æˆåƒå¤æ¨ï¼Œæƒ³é‡æ¥æ—¶å°±é‡æ¥ å¤‡ä»½ã€åæ‚”æœºåˆ¶ è‰ç¨¿ç®± ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰ å°†å¯¹è±¡ä¹‹é—´çš„é€šä¿¡å…³è”å…³ç³»å°è£…åˆ°ä¸€ä¸ªä¸­ä»‹ç±»ä¸­å•ç‹¬å¤„ç†ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ è”ç³»æ–¹å¼æˆ‘ç»™ä½ ï¼Œæ€ä¹ˆæå®šæˆ‘ä¸ç®¡ ç»Ÿä¸€ç®¡ç†ç½‘çŠ¶èµ„æº æœ‹å‹åœˆ è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰ ç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„è¯­æ³•è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¿™ä¸ªè§£é‡Šå™¨ä½¿ç”¨è¯¥æ ‡è¯†æ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ æˆ‘æƒ³è¯´â€æ–¹è¨€â€œï¼Œä¸€åˆ‡è§£é‡Šæƒéƒ½å½’æˆ‘ å®ç°ç‰¹å®šè¯­æ³•è§£æ æ‘©æ–¯å¯†ç  è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰ çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶é€šçŸ¥è§‚å¯Ÿè€…ï¼Œä¸€å¯¹å¤šçš„å…³ç³» åˆ°ç‚¹å°±é€šçŸ¥æˆ‘ è§£è€¦è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€… é—¹é’Ÿ è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰ ç¨³å®šæ•°æ®ç»“æ„ï¼Œå®šä¹‰æ–°çš„æ“ä½œè¡Œä¸º æ¨ªçœ‹æˆå²­ä¾§æˆå³°ï¼Œè¿œè¿‘é«˜ä½å„ä¸åŒ è§£è€¦æ•°æ®ç»“æ„å’Œæ•°æ®æ“ä½œ KPIè€ƒæ ¸ å§”æ´¾æ¨¡å¼ï¼ˆDelegate Patternï¼‰ å…è®¸å¯¹è±¡ç»„åˆå®ç°ä¸ç»§æ‰¿ç›¸åŒçš„ä»£ç é‡ç”¨ï¼Œè´Ÿè´£ä»»åŠ¡çš„è°ƒç”¨å’Œåˆ†é… è¿™ä¸ªéœ€æ±‚å¾ˆç®€å•ï¼Œæ€ä¹ˆå®ç°æˆ‘ä¸ç®¡ åªå¯¹ç»“æœè´Ÿè´£ æˆæƒå§”æ‰˜ä¹¦ èµ„æ–™æ¥æº ç¼–ç¨‹å¸® Refactoringguru.cn","link":"/2021/03/01/Draft/2021/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"title":"GIS","text":"MAPBOX MAPBOXæµç¨‹ å‡†å¤‡ï¼šç†Ÿæ‚‰linux å®‰è£…ã€ç½‘ç»œã€æ–‡ä»¶ç­‰åŸºæœ¬æ“ä½œï¼ŒJSã€HTMLç­‰ç†Ÿæ‚‰ï¼ŒMapboxç†Ÿæ‚‰ï¼ŒSQLç†Ÿæ‚‰ï¼Œï¼Œï¼Œ æ³¨æ„å‚æ•°ï¼šåŒä¸€å¥—åæ ‡ã€ç»çº¬åº¦ç­‰ Ubuntuç¯å¢ƒå‡†å¤‡===ã€‹å…¶ä»–æ ¼å¼æ•°æ®===ã€‹shpæ•°æ®===ã€‹Windowså¯¼å…¥postgresqlæ•°æ®åº“===ã€‹é€šè¿‡ogr2ogrè½¬æ¢ä¸ºgeojson===ã€‹é€šè¿‡tippecanoeåˆ‡ç‰‡ï¼ˆå‚æ•°è‡ªæ§ï¼‰ã€‹~~æ•°æ®æ‰“åŒ…ï¼ˆä¼ è¾“æ›´å¿«ï¼‰~~windowså…±äº«æ–‡ä»¶å¤¹=ã€‹å‡†å¤‡mapbox2000 js cssæ–‡ä»¶====ã€‹mapboxå‰ç«¯ä»£ç å¯¼å…¥æ•°æ®å¹¶æ˜¾ç¤º====ã€‹å‡†å¤‡å›¾æ ‡æ•°æ®===ã€‹filteråˆ†ç±»å›¾æ ‡æ˜¾ç¤º=====ã€‹åˆ†å±‚æ•°æ®æ˜¾ç¤º====ã€‹ç»†èŠ‚ä¼˜åŒ–ï¼ˆé¢œè‰²ï¼Œå…‰ï¼Œå­—ä½“å¤§å°ï¼Œå›¾ç‰‡å¤§å°ï¼‰ã€‹åŠ å…¥ç‚¹å‡»æ˜¾ç¤ºä½ç½®ã€‹å…¶ä»–ç‚¹å‡»åŠŸèƒ½====ã€‹wftsåº•å›¾åˆ‡æ¢==ã€‹æ§ä»¶åŠ è½½===ã€‹wfsï¼Œwmsæ•°æ®åŠ è½½ï¼ˆä¸åŒæ•°æ®æºï¼‰==ã€‹å…¶ä»–æ¨¡å‹åŠ å…¥ è¯¦ç»†æ­¥éª¤ ç¯å¢ƒå‡†å¤‡ Ubuntuè™šæ‹Ÿæœºï¼š ç½‘ç»œç¯å¢ƒï¼Œæ•°æ®å…±äº«ï¼ŒPostgresqlï¼ŒTippecanoeï¼ŒPROJ.4ã€GEOSå’ŒGDALï¼ˆogr2ogrï¼‰ï¼Œgccã€g++ã€make windowsï¼š Postgresql,VMware,Ubuntué•œåƒï¼ˆå®˜æ–¹æŒ‡å®šï¼‰ï¼ŒNavicatï¼ˆæ–¹ä¾¿æŸ¥çœ‹æ•°æ®å’Œå»ºç«‹ç©ºé—´æ•°æ®åº“ï¼‰ï¼ŒVSCode è¯¦ç»†æ­¥éª¤ï¼š å®‰è£…Postgresqlæ•°æ®åº“ï¼Œç¯å¢ƒé…ç½®ï¼Œå¯¼å…¥shp Windowså®‰è£…Postgresql ä¸‹è½½ ç¯å¢ƒå˜é‡æ·»åŠ  è®¾ç½®å¤–ç½‘è®¿é—®ï¼ˆpg_hba.confï¼‰ 1234567891011# TYPE DATABASE USER ADDRESS METHOD# IPv4 local connections:host all all 127.0.0.1/32 md5host all all 0.0.0.0/0 md5# IPv6 local connections:host all all ::1/128 md5# Allow replication connections from localhost, by a user with the# replication privilege.#host replication postgres 127.0.0.1/32 md5#host replication postgres ::1/128 md5 å»ºç«‹ç©ºé—´æ•°æ®åº“,ç›®æ ‡æ•°æ®åº“æ‰§è¡Œä»¥ä¸‹è¯­å¥ 1234create extension postgis;create extension postgis_topology;create extension fuzzystrmatch;create extension postgis_tiger_geocoder; åœ¨SHPæ–‡ä»¶å¤¹æ–°å»ºtxtæ–‡ä»¶ï¼Œç²˜è´´ä»¥ä¸‹ä»£ç ï¼Œå¯¼å…¥æ•°æ®åˆ°æ•°æ®åº“ï¼Œç›¸å…³å‚æ•°å¦‚ä¸‹ï¼Œæ”¹æˆbatåç¼€ï¼ŒåŒå‡»è¿è¡Œåè¾“å…¥å¯†ç ï¼Œæ˜¾ç¤ºç±»ä¼¼ insert 1æˆåŠŸ 123shp2pgsql -s 4544 -c -W â€œGBKâ€ DJQ5120812018.shp public.DJQ5120812018 | psql -d shp2pgsqldemo -U postgres -Wç¤ºä¾‹ ï¼šshp2pgsql -s 4544 -c -W &quot;UTF-8&quot; ADDRESS.shp public.rrrrr| psql -h 192.168.22.128 -d postgres -U postgres -W ç¼–ç æ ¼å¼ SHPæ•°æ® publicä¸‹çš„rrrrrè¡¨ å¯¼å…¥æ•°æ®åº“åœ°å€ æ•°æ®åº“å ç”¨æˆ·å ä¹Ÿå¯åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼Œå…ˆè½¬æ¢ä¸ºsqlè¯­å¥ï¼Œå†å¯¼å…¥,æ­¥éª¤åŒä¸Š 12shp2pgsql -s 4544 -c -W â€œGBKâ€ DJQ5120812018.shp&gt;DJQ5120812018.sqlpsql -d shp2pgsqldemo -U postgres -f DJQ5120812018.sql -W å¯èƒ½å‡ºç°çš„é—®é¢˜ è§£å†³åŠæ³• ä¹±ç  æ›´æ”¹ç¼–ç  å¯¼å…¥ä¸­æ–­ï¼Œæ•°æ®åº“æ— æ•°æ® æ•°æ®è¿‡å¤§ å‚æ•° å«ä¹‰ -s ç©ºé—´å‚è€ƒæ ‡è¯†ç¬¦ï¼ˆSRIDï¼‰ -d é‡æ–°å»ºç«‹è¡¨ï¼Œå¹¶æ’å…¥æ•°æ® -a åœ¨åŒä¸€ä¸ªè¡¨ä¸­å¢åŠ æ•°æ® -c å»ºç«‹æ–°è¡¨ï¼Œå¹¶æ’å…¥æ•°æ®(ç¼ºçœ) -p åªåˆ›å»ºè¡¨ -g æŒ‡å®šè¦åˆ›å»ºçš„è¡¨çš„ç©ºé—´å­—æ®µåç§°(åœ¨è¿½åŠ æ•°æ®æ—¶æœ‰ç”¨) -D ä½¿ç”¨dumpæ–¹å¼ï¼Œæ¯”ç¼ºçœç”Ÿæˆsqlçš„é€Ÿåº¦å¿« -G ä½¿ç”¨ç±»å‹geography -k ä¿æŒæ ‡è¯†ç¬¦ï¼ˆåˆ—åï¼Œæ¨¡å¼ï¼Œå±æ€§ï¼‰å¤§å°å†™ã€‚ -i å°†æ‰€æœ‰æ•´å‹éƒ½è½¬ä¸ºæ ‡å‡†çš„32-bitæ•´æ•° -I åœ¨å‡ ä½•åˆ—ä¸Šå»ºç«‹GISTç´¢å¼• -S ç”Ÿæˆç®€å•å‡ ä½•ï¼Œè€ŒéMULTIå‡ ä½• -t æŒ‡å®šå‡ ä½•çš„ç»´åº¦ -w æŒ‡å®šè¾“å‡ºæ ¼å¼ä¸ºWKT -W è¾“å…¥çš„dbfæ–‡ä»¶ç¼–ç æ–¹å¼ -N æŒ‡å®šå‡ ä½•ä¸ºç©ºæ—¶çš„æ“ä½œ -n åªå¯¼å…¥dbfæ–‡ä»¶ -T æŒ‡å®šè¡¨çš„è¡¨ç©ºé—´ -X æŒ‡å®šç´¢å¼•çš„è¡¨ç©ºé—´ -? å¸®åŠ© é€šè¿‡ogr2ogrè½¬æ¢ä¸ºgeojson 12ogr2ogr -f &quot;GeoJSON&quot; ./asstln.json PG:&quot;host=localhost dbname=postgres user=postgres password=111111&quot; -sql &quot;select * from asstln&quot; ç›®æ ‡æ–‡ä»¶å å¯¼å‡ºæ•°æ®åº“è¿æ¥ä¿¡æ¯ å¯¼å‡ºè¡¨å é€šè¿‡tippecanoeåˆ‡ç‰‡ï¼ˆå‚æ•°è‡ªæ§ï¼‰ å•æ•°æ®æº 12tippecanoe -e tracenln -pC -Z0 -z20 -f tracenln.json ç›®æ ‡æ–‡ä»¶å¤¹ åˆ‡ç‰‡ç­‰çº§ç©ºå€¼ æºæ–‡ä»¶å å•å±‚å¤šæ•°æ®æºåˆå¹¶ 123#whereç¡®å®šçº§åˆ«ogr2ogr -f &quot;GeoJSON&quot; ./veg_py.json PG:&quot;host=126.10.9.16 dbname=postgres user=postgres password=724111&quot; -sql &quot;select * from veg_py fscale=10&quot; tippecanoe -e tracenln -pC -Z0 -z20 -f tracenln1.json tracenln2.json tracenln3.json å‚æ•°æŸ¥çœ‹ æ•°æ®æ‰“åŒ… å¤åˆ¶åˆ°ç¼–ç¨‹ç«¯ï¼ˆä¼ è¾“æ›´å¿«ï¼‰ windowsæ–‡ä»¶å…±äº«æ–‡ä»¶å¤¹ï¼Œæˆ–Tomcatï¼Œæˆ–åœ¨çº¿æœåŠ¡å™¨ä»¥ä¾¿æ•°æ®è°ƒç”¨ï¼Œæ³¨æ„è§£å†³è§¦è·¨åŸŸèµ„æºè®¿é—® å‡†å¤‡mapbox2000 js cssæ–‡ä»¶ windows å®‰è£… git Node.JS å®‰è£…è¯´æ˜ Yarnå®‰è£…ã€é…ç½®ã€é•œåƒæºä¿®æ”¹ 12npm install --global yarnyarn --version Node.jså®‰è£…æœ¬åœ°æ’ä»¶æ„å»ºå·¥å…·node-gyp GitHub Mapboxæºç åœ°å€ï¼šhttps://github.com/mapbox/mapbox-gl-js 2000åæ ‡æºç ï¼Œ é¡¹ç›®ç¼–è¯‘ yarn install å®‰è£…headless-glï¼Œå¹¶å°†node_modules/headless-gl/deps/windows/dll/x64/*.dll å¤åˆ¶åˆ°c:\\windows\\system32 npm install gl yarn run start-debug yarn run build-dev å‡†å¤‡å¥½jså’Œcssæ–‡ä»¶ mapbox å‰ç«¯ä»£ç å¯¼å…¥åœ°å›¾æ•°æ®å¹¶æ˜¾ç¤º 3Dæ¨¡å‹ é’ˆå¯¹å¯¹åº”çš„å»ºç­‘æ•°æ®ï¼Œè¿›è¡Œå»ºç­‘ç‰©3Dæ˜¾ç¤º 123456789101112131415161718paint: { // 'fill-color': 'red', // 'fill-opacity': 1, 'fill-extrusion-color': '#f5f4ee', // use an 'interpolate' expression to add a smooth transition effect to the // buildings as the user zooms in 'fill-extrusion-height': [ &quot;interpolate&quot;, [&quot;linear&quot;], [&quot;zoom&quot;], 15, 0, 15.05, [&quot;get&quot;, &quot;height&quot;] ], 'fill-extrusion-base': [ &quot;interpolate&quot;, [&quot;linear&quot;], [&quot;zoom&quot;], 15, 0, 15.05, [&quot;get&quot;, &quot;min_height&quot;] ], 'fill-extrusion-opacity': 0.85 }, vscode æ’ä»¶æœåŠ¡å™¨ æ’ä»¶å®‰è£… Live Server å‡†å¤‡å›¾æ ‡æ•°æ®ï¼ŒPBFå­—ä½“æ•°æ® https://github.com/mapbox/spritezero ä»é›¶ç”Ÿæˆå›¾æ ‡èµ„æºå·¥å…·ï¼Œå¯ç½‘ä¸Šä¸‹è½½ ç”Ÿæˆå¦‚å›¾å½¢å¼æ–‡ä»¶ï¼Œ filter åˆ†ç±»å›¾æ ‡æ˜¾ç¤º 123456789101112131415'filter': [ 'any', [ '==', 'fcode', '4206002500'//2 ] ,[ '==', 'fcode', '4305010500'//2 ] ], åˆ†å±‚æ•°æ®æ˜¾ç¤º 1&quot;layers&quot;: []//ä¸­è¶Šé å‰çš„åœ¨åº•å±‚ ç»†èŠ‚ä¼˜åŒ–ï¼ˆé¢œè‰²ï¼Œå…‰ï¼Œå­—ä½“å¤§å°ï¼Œå›¾ç‰‡å¤§å°ï¼‰ æ§ä»¶åŠ è½½ SupermapæŸ¥çœ‹ åŠ å…¥ç‚¹å‡»æ˜¾ç¤ºç›¸å…³ä¿¡æ¯ 123456789101112131415//å¼¹å‡ºæ¡†â€‹ map.on('click', function (e) {â€‹ var features = map.queryRenderedFeatures(e.point, {â€‹ layers: ['13'] // replace this with the id of the layerâ€‹ });â€‹ if (!features.length) {â€‹ return;â€‹ }â€‹ var feature = features[0];â€‹ var popup = new mapboxgl.Popup({ offset: [0, -15] })â€‹ .setLngLat(feature.geometry.coordinates)â€‹ .setHTML('&lt;h3&gt;' + feature.properties.shortname + '&lt;/h3&gt;&lt;p&gt;' + feature.properties.name + '&lt;/p&gt;')â€‹ .addTo(map);â€‹ }); wfts åº•å›¾åˆ‡æ¢ wfsï¼Œwms æ•°æ®åŠ è½½ï¼ˆä¸åŒæ•°æ®æºï¼‰ å®šä½ æ•°æ®æŸ¥è¯¢ æ•°æ®å¯è§†åŒ– SupermapæŸ¥çœ‹ ä¼˜åŒ– çª—å£æ ·å¼ä¼˜åŒ–ï¼Œå¼¹å‡ºæ¡†æ ·å¼ä¼˜åŒ–ï¼Œå­—ä½“ç­‰è°ƒèŠ‚ ä¸€äº›å°æŠ€å·§ å¾…æ›´æ–° Mapboxæºç ç¼–è¯‘ ç¯å¢ƒå‡†å¤‡ GITç¯å¢ƒæ­å»ºï¼š è¯¦ç»†ç‚¹å‡»ï¼šï¼ˆä¸€ï¼‰windows å®‰è£… git Node.JSç¯å¢ƒæ­å»ºï¼š è¯¦ç»†ç‚¹å‡»ï¼šï¼ˆä¸€ï¼‰Node.JS å®‰è£…è¯´æ˜ Yarnç¯å¢ƒæ­å»ºï¼š è¯¦ç»†ç‚¹å‡»ï¼šï¼ˆä¸€ï¼‰Yarnå®‰è£…ã€é…ç½®ã€é•œåƒæºä¿®æ”¹ 12npm install --global yarnyarn --version Npm and node-gypä¾èµ–å®‰è£… è¯¦ç»†ç‚¹å‡»ï¼šï¼ˆäºŒï¼‰Node.jså®‰è£…æœ¬åœ°æ’ä»¶æ„å»ºå·¥å…·node-gyp å…¶ä»–åœ°å€ï¼š GitHub Mapboxæºç åœ°å€ï¼šhttps://github.com/mapbox/mapbox-gl-js é¡¹ç›®ç¼–è¯‘ yarn install å®‰è£…headless-glï¼Œå¹¶å°†node_modules/headless-gl/deps/windows/dll/x64/*.dll å¤åˆ¶åˆ°c:\\windows\\system32 npm install gl yarn run start-debug yarn run build-dev debug/index.htmlä¸­ä»£ç æœ€ä¸Šæ–¹å¢åŠ token mapboxgl.accessToken='pk.eyJ1IjoibGltbiIsImEiOiJja2t1bG1na2IxZGU0MnZvNmlzY3FhZXM4In0.oQx4VguycOR4TK80Pyusmw'; var map = window.map = new mapboxgl.Map({ MAPBOXä¸“ä¸šæœ¯è¯­ çŸ¢é‡ç“¦ç‰‡ï¼š æ …æ ¼ç“¦ç‰‡ï¼š MAPBOXå­¦ä¹  ä¸­æ–‡æ–‡æ¡£ï¼šhttp://www.mapbox.cn/mapbox-gl-js/api/ Styles (8) ä¸ºåœ°å›¾æ·»åŠ ç”Ÿæˆçš„å›¾æ ‡ ä¸ºåœ°å›¾æ·»åŠ åŠ¨ç”»å›¾æ ‡ ä¸ºåœ°å›¾ç”ŸæˆåŠæ·»åŠ ç¼ºå¤±çš„å›¾æ ‡ ä¸ºåœ°å›¾æ·»åŠ å›¾æ ‡ ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼å±•ç¤ºåœ°å›¾ æ˜¾ç¤ºå«æ˜Ÿåœ°å›¾ æ”¹å˜ä¸€ä¸ªåœ°å›¾çš„æ ·å¼ æ˜¾ç¤ºä¸€ä¸ªåœ°å›¾ Layers (30) ç”¨3Då½¢å¼å‘ˆç°å»ºç­‘ç‰© æ‹‰ä¼¸å¤šè¾¹å½¢ä»¥ç»˜åˆ¶3Då®¤å†…åœ°å›¾ æ·»åŠ 3Dæ¨¡å‹ è°ƒæ•´å›¾å±‚ä¸é€æ˜åº¦ ä¸ºçº¿æ·»åŠ åŠ¨ç”»æ•ˆæœ ä¸ºä¸€ç³»åˆ—å›¾åƒæ·»åŠ åŠ¨ç”»æ•ˆæœ ä¸ºç‚¹æ·»åŠ åŠ¨ç”»æ•ˆæœ æŒ‰ç…§ç¼©æ”¾çº§åˆ«æ”¹å˜å»ºç­‘é¢œè‰² æ›´æ”¹æ ‡æ³¨çš„å¤§å°å†™ æ˜¾ç¤ºå…·æœ‰è‡ªå®šä¹‰å±æ€§çš„HTMLèšç±» åˆ›å»ºæ ·å¼èšç±» ä½¿ç”¨æŒ‰é’®æ›´æ”¹å›¾å±‚é¢œè‰² æ·»åŠ è‡ªå®šä¹‰æ ·å¼å›¾å±‚ ç»™çº¿æ·»åŠ æ•°æ®é©±åŠ¨å±æ€§çš„æ ·å¼ã€‚ ç»™åœ†æ·»åŠ æ•°æ®é©±åŠ¨å±æ€§çš„æ ·å¼ æ˜¾ç¤ºå¤šç§æ–‡æœ¬æ ¼å¼å¹¶è®¾ç½®å…¶æ ·å¼ ä¸ºå¤šè¾¹å½¢æ·»åŠ å›¾æ¡ˆ åœ¨æ ‡ç­¾ä¸‹æ·»åŠ æ–°å›¾å±‚ æ·»åŠ  GeoJSON çº¿ ç»˜åˆ¶ GeoJSON ç‚¹ æ·»åŠ  GeoJSON å¤šè¾¹å½¢ åˆ›å»ºçƒ­åŠ›å›¾å›¾å±‚ æ·»åŠ æ™•æš„ ä½¿ç”¨è¡¨è¾¾å¼åˆ›å»ºæ¸å˜è‰²çº¿æ¡ è®¾ç½®æµ·æ´‹æ·±åº¦æ•°æ®æ ·å¼ æ˜¾ç¤ºå’Œéšè—å›¾å±‚ æ”¹å˜è¡Œæ”¿è¾¹ç•Œä¸–ç•Œè§‚ æ ¹æ®ç¼©æ”¾çº§åˆ«æ›´æ–°ç­‰å€¼çº¿å›¾å±‚ å˜é‡æ ‡ç­¾ä½ç½® å¯è§†åŒ–äººå£å¯†åº¦ Sources (9) å°†æœ¬åœ°JSONæ•°æ®ä¸çŸ¢é‡åˆ‡ç‰‡å›¾å½¢è¿æ¥ æ·»åŠ å½±åƒ æ·»åŠ å®æ—¶æ•°æ® æ›´æ–°å®æ—¶è¦ç´  æ·»åŠ æ …æ ¼åˆ‡ç‰‡æ•°æ®æº æ·»åŠ ä¸€ä¸ªç¬¬ä¸‰æ–¹çŸ¢é‡åˆ‡ç‰‡æ¥æº æ·»åŠ ä¸€ä¸ªçŸ¢é‡å›¾ç‰‡æ•°æ®æº æ·»åŠ ä¸€ä¸ªè§†é¢‘ æ·»åŠ ä¸€ä¸ª WMS æº User interaction (17) åŸºäºå‘¨è¾¹å£°éŸ³ç»™3Då»ºç­‘æ·»åŠ åŠ¨ç”»æ•ˆæœ ç¦ç”¨åœ°å›¾æ—‹è½¬ åˆ›å»ºå¯æ‹–åŠ¨çš„ç‚¹ åˆ›å»ºå¯æ‹–åŠ¨çš„æ ‡è®°ï¼ˆMarkerï¼‰ é€šè¿‡æ–‡æœ¬è¾“å…¥ç­›é€‰ç¬¦å· åœ¨ map view ä¸­ç­›é€‰è¦ç´  é€šè¿‡åˆ‡æ¢åˆ—è¡¨ç­›é€‰ç¬¦å· åˆ›å»ºæ‚¬åœæ•ˆæœ æ˜¾ç¤ºéäº¤äº’å¼åœ°å›¾ æ›´æ”¹åœ°å›¾çš„è¯­è¨€ é«˜äº®åŒ…å«ç›¸ä¼¼æ•°æ®çš„éƒ¨åˆ† ä»ç‚¹å‡»ç‚¹å‘¨å›´é€‰æ‹©ç‰¹å¾ é™åˆ¶åœ°å›¾å¹³ç§»åœ¨æŸä¸€åŒºåŸŸ è·å–é¼ æ ‡ä¸‹ç‚¹çš„ç‰¹å¾ åˆ‡æ¢äº¤äº’ åˆ›å»ºæ—¶é—´æ»‘åŠ¨æ¡ é«˜äº®ä¸€ä¸ªé€‰æ‹©æ¡†èŒƒå›´å†…çš„ç‰¹å¾ Camera (11) ä½¿åœ°å›¾ç›¸æœºç¯ç»•ä¸€ç‚¹è¿åŠ¨ ä¸ºè·¯çº¿ä¸­çš„ç‚¹æ·»åŠ åŠ¨ç”»æ•ˆæœ å°†åœ°å›¾å±…ä¸­äºè¢«å•å‡»çš„ç¬¦å·ä¸Š ç¼“æ…¢é£è‡³æŸä¸ªä½ç½® å°†åœ°å›¾ç¼©æ”¾è‡³è¾¹ç•Œæ¡†å†… é£è‡³æŸä¸€ä½ç½® ä½¿ç”¨æ¸¸æˆå¼æ§ä»¶æµè§ˆåœ°å›¾ è·³è‡³ä¸€ç³»åˆ—åœ°ç‚¹ ä»¥å¹»ç¯ç‰‡å½¢å¼æ’­æ”¾åœ°å›¾ä½ç½®ã€‚ æ ¹æ®æ»šåŠ¨ä½ç½®é£åˆ°æŸå¤„ è®¾ç½® pitch å’Œ bearing Controls and overlays (16) ä¸ºæ ‡è®°(marker)æ·»åŠ åŠ¨ç”»æ•ˆæœ æ”¹å˜æ³¨é‡Šçš„é»˜è®¤ä½ç½® ä½¿ç”¨ Markers æ·»åŠ è‡ªå®šä¹‰å›¾æ ‡ ç¦ç”¨æ»šè½®ç¼©æ”¾ å…¨å±æŸ¥çœ‹åœ°å›¾ å®šä½ç”¨æˆ· åœ¨ä¸åŒåœ°å›¾ä¹‹é—´æ»‘åŠ¨ æ˜¾ç¤ºé©¾é©¶æ–¹å‘ æ˜¾ç¤ºå·²ç»˜åˆ¶çš„å¤šè¾¹å½¢åŒºåŸŸ æ·»åŠ åœ°ç†ç¼–ç å™¨ åˆ©ç”¨åœ°ç‚¹åç§°æ·»åŠ æ ‡è®° ç‚¹å‡»æ—¶æ˜¾ç¤ºå¤šè¾¹å½¢ä¿¡æ¯ æ‚¬æµ®æ—¶æ˜¾ç¤ºå¼¹å‡ºçª— ç‚¹å‡»æ—¶æ˜¾ç¤ºä¸€ä¸ªå¼¹å‡ºçª— æ˜¾ç¤ºä¸€ä¸ªå¼¹å‡ºçª— å°†å¼¹å‡ºçª—å£é™„åŠ åˆ° marker å®ä¾‹ Geocoder (8) ä»å…¶ä»–æ•°æ®æºä¸­è¡¥å……è¿›ä¸€æ­¥çš„åœ°ç†ç¼–ç æŸ¥è¯¢ç»“æœ æ¥æ”¶è¾“å…¥åæ ‡è‡³åœ°ç†ç¼–ç å™¨ ä½¿ç”¨åœ°ç†ç¼–ç å™¨æ—¶é‡‡ç”¨è‡ªå®šä¹‰æ¸²æŸ“åŠŸèƒ½ å°†åœ°ç†ç¼–ç çš„ç»“æœé™åˆ¶åœ¨æŒ‡å®šåœ°åŒºèŒƒå›´å†… åœ¨ä½¿ç”¨åœ°ç†ç¼–ç å™¨çš„è¿‡ç¨‹ä¸­ç»“åˆä½¿ç”¨è‡ªå®šä¹‰ç›¸æœºåŠ¨ç”» åœ¨åœ°å›¾ä¸Šæ·»åŠ ä½ç½®æœç´¢æ¡† å°†åœ°ç†ç¼–ç å™¨è¿›è¡ŒæŒ‡å®šè¯­è¨€çš„æœ¬åœ°åŒ– åœ¨Geocoderäº§ç”Ÿç»“æœåè®¾ç½®ä¸€ä¸ªç‚¹ Browser support (1) æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ Internationalization support (2) ä½¿ç”¨æœ¬åœ°ç”Ÿæˆçš„è¡¨æ„æ–‡å­— ä¸ºä»å³è‡³å·¦ä¹¦å†™çš„è„šæœ¬æä¾›æ”¯æŒ SUPERMAP ä¸€ä¸ªmapboxåä¸½å¤–è¡£ä¸è£…å¤‡ Cusium 3Dã€2.5Dã€2Dåœ°å›¾å±•ç¤º æºç è§£æå‡†å¤‡ å®˜ç½‘ ä¸­æ–‡æ–‡æ¡£ æ³¨å†Œ æºç ï¼šä¸‹è½½ ç¯å¢ƒï¼šnodeã€npm ä½¿ç”¨ï¼šVUE è¿è¡Œï¼šæ–¹æ³•ä¸€ï¼š è§£å‹ æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥å½“å‰ç›®å½• å®‰è£…ä¾èµ–ï¼Œè¾“å…¥:cnpm install,ç­‰å¾…å®‰è£…å®Œæˆï¼Œç„¶åè¾“å…¥: node server.js 1234$ cd ./Cesium-1.40$ cnpm install ... Installed 37 packages Linked 569 latest versions$ npm start æˆ–è€… node server.js(æ–°ç‰ˆæœ¬æ˜¯ node server.cjs)Cesium development server running locally. Connect to http://localhost:8080/å¤åˆ¶ æ–¹æ³•äºŒï¼š 123è¿™é‡Œå¦‚æœä½¿ç”¨ expresså‘å¸ƒé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ http-server$ npm install http-server -g$ http-server -c-1 (å¦‚æœåªè¾“å…¥http-serverï¼Œæ›´æ–°ä»£ç åï¼Œé¡µé¢ä¸ä¼šåŒæ­¥æ›´æ–°) æ–¹æ³•ä¸‰ï¼šVSCode æ’ä»¶è¿è¡Œ è·å–Token ä½¿ç”¨ 12Cesium.Ion.defaultAccessToken = 'token';var viewer = new Cesium.Viewer(&quot;cesiumContainer&quot;, {}) ä¸»é¡µè¯´æ˜ Cesium ion Cesium ion is your hub for discovering 3D content and tiling your own data for streaming. CesiumJS and ion work together to enable you to build world class 3D mapping applications. Sign up for a free account to get your access token required for using ion's Bing Maps global imagery and Cesium World Terrain assets. Local links Documentation The complete API documentation and reference. Hello World The simplest possible Cesium application. Cesium Viewer A sample Cesium reference application which allows you to browse the globe and select from a variety of imagery and terrain layers as well as load CZML, GeoJSON, and other formats supported by Cesium. Sandcastle Cesium's live code editor and example gallery. Browse examples highlighting features of the Cesium API and edit and run them all in your web browser. Cesium applications created in Sandcastle can be saved and downloaded. Run tests Run Cesium's full suite of unit tests External links Cesium Learn about the Cesium team and the Cesium ion platform Cesium Blog Follow project news, developer tips, and posts about Cesium's innovative technology Tutorials Step-by-step guides for learning to use CesiumJS Community Forum Questions and feedback welcome from all skill levels GitHub The official CesiumJS GitHub repository User Stories Demos and information about projects using CesiumJS WebGL Report Provides technical information about WebGL capabilities supported by your browser ç•Œé¢ä»‹ç» è‡ªé¡¹ç›®ç¼–å†™ ç¯å¢ƒï¼šVUE2 ï¼Œcesium 1.89 C:\\Users\\Administrator&gt;node -v v14.16.0 C:\\Users\\Administrator&gt;npm -v 6.14.11 é¡¹ç›®åˆ›å»º 1vue init webpack gislearn å®‰è£…cesium 1.89 1npm i cesium ä¿®æ”¹webpack.prod.conf.js ä¿®æ”¹ --Cesium--æ ‡è®°å¤„ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163'use strict'const path = require('path')const utils = require('./utils')const webpack = require('webpack')const config = require('../config')const merge = require('webpack-merge')const baseWebpackConfig = require('./webpack.base.conf')const CopyWebpackPlugin = require('copy-webpack-plugin')const HtmlWebpackPlugin = require('html-webpack-plugin')const ExtractTextPlugin = require('extract-text-webpack-plugin')const OptimizeCSSPlugin = require('optimize-css-assets-webpack-plugin')const UglifyJsPlugin = require('uglifyjs-webpack-plugin')// å®šä¹‰è·¯å¾„--Cesium--const cesiumSource = 'node_modules/cesium/Source'const cesiumWorkers = '../Build/Cesium/Workers'const env = process.env.NODE_ENV === 'testing' ? require('../config/test.env') : require('../config/prod.env')const webpackConfig = merge(baseWebpackConfig, { module: { rules: utils.styleLoaders({ sourceMap: config.build.productionSourceMap, extract: true, usePostCSS: true }) }, devtool: config.build.productionSourceMap ? config.build.devtool : false, output: { path: config.build.assetsRoot, filename: utils.assetsPath('js/[name].[chunkhash].js'), chunkFilename: utils.assetsPath('js/[id].[chunkhash].js') }, plugins: [ // æ·»åŠ å¦‚ä¸‹æ’ä»¶--Cesium-- new CopyWebpackPlugin([{ from: path.join(cesiumSource, cesiumWorkers), to: 'Workers' }]), new CopyWebpackPlugin([{ from: path.join(cesiumSource, 'Assets'), to: 'Assets' }]), new CopyWebpackPlugin([{ from: path.join(cesiumSource, 'Widgets'), to: 'Widgets' }]), new CopyWebpackPlugin([{ from: path.join(cesiumSource, 'ThirdParty/Workers'), to: 'ThirdParty/Workers' }]), new webpack.DefinePlugin({ // æ³¨æ„è¿™é‡Œå’Œdevçš„é…ç½®ä¸åŒ // å®šä¹‰Cesiumä»å“ªé‡ŒåŠ è½½èµ„æºï¼Œå¦‚æœä½¿ç”¨é»˜è®¤çš„''ï¼Œå´å˜æˆäº†ç»å¯¹è·¯å¾„äº†ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨'./'ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„ CESIUM_BASE_URL: JSON.stringify('./') }), // http://vuejs.github.io/vue-loader/en/workflow/production.html new webpack.DefinePlugin({ 'process.env': env }), new UglifyJsPlugin({ uglifyOptions: { compress: { warnings: false } }, sourceMap: config.build.productionSourceMap, parallel: true }), // extract css into its own file new ExtractTextPlugin({ filename: utils.assetsPath('css/[name].[contenthash].css'), // Setting the following option to `false` will not extract CSS from codesplit chunks. // Their CSS will instead be inserted dynamically with style-loader when the codesplit chunk has been loaded by webpack. // It's currently set to `true` because we are seeing that sourcemaps are included in the codesplit bundle as well when it's `false`, // increasing file size: https://github.com/vuejs-templates/webpack/issues/1110 allChunks: true, }), // Compress extracted CSS. We are using this plugin so that possible // duplicated CSS from different components can be deduped. new OptimizeCSSPlugin({ cssProcessorOptions: config.build.productionSourceMap ? { safe: true, map: { inline: false } } : { safe: true } }), // generate dist index.html with correct asset hash for caching. // you can customize output by editing /index.html // see https://github.com/ampedandwired/html-webpack-plugin new HtmlWebpackPlugin({ filename: process.env.NODE_ENV === 'testing' ? 'index.html' : config.build.index, template: 'index.html', inject: true, minify: { removeComments: true, collapseWhitespace: true, removeAttributeQuotes: true // more options: // https://github.com/kangax/html-minifier#options-quick-reference }, // necessary to consistently work with multiple chunks via CommonsChunkPlugin chunksSortMode: 'dependency' }), // keep module.id stable when vendor modules does not change new webpack.HashedModuleIdsPlugin(), // enable scope hoisting new webpack.optimize.ModuleConcatenationPlugin(), // split vendor js into its own file new webpack.optimize.CommonsChunkPlugin({ name: 'vendor', minChunks(module) { // any required modules inside node_modules are extracted to vendor return ( module.resource &amp;&amp; /\\.js$/.test(module.resource) &amp;&amp; module.resource.indexOf( path.join(__dirname, '../node_modules') ) === 0 ) } }), // extract webpack runtime and module manifest to its own file in order to // prevent vendor hash from being updated whenever app bundle is updated new webpack.optimize.CommonsChunkPlugin({ name: 'manifest', minChunks: Infinity }), // This instance extracts shared chunks from code splitted chunks and bundles them // in a separate chunk, similar to the vendor chunk // see: https://webpack.js.org/plugins/commons-chunk-plugin/#extra-async-commons-chunk new webpack.optimize.CommonsChunkPlugin({ name: 'app', async: 'vendor-async', children: true, minChunks: 3 }), // copy custom static assets new CopyWebpackPlugin([ { from: path.resolve(__dirname, '../static'), to: config.build.assetsSubDirectory, ignore: ['.*'] } ]) ]})if (config.build.productionGzip) { const CompressionWebpackPlugin = require('compression-webpack-plugin') webpackConfig.plugins.push( new CompressionWebpackPlugin({ asset: '[path].gz[query]', algorithm: 'gzip', test: new RegExp( '\\\\.(' + config.build.productionGzipExtensions.join('|') + ')$' ), threshold: 10240, minRatio: 0.8 }) )}if (config.build.bundleAnalyzerReport) { const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin webpackConfig.plugins.push(new BundleAnalyzerPlugin())}module.exports = webpackConfig webpack.dev.conf.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110'use strict'const utils = require('./utils')const webpack = require('webpack')const config = require('../config')const merge = require('webpack-merge')const path = require('path')const baseWebpackConfig = require('./webpack.base.conf')const CopyWebpackPlugin = require('copy-webpack-plugin')const HtmlWebpackPlugin = require('html-webpack-plugin')const FriendlyErrorsPlugin = require('friendly-errors-webpack-plugin')const portfinder = require('portfinder')const HOST = process.env.HOSTconst PORT = process.env.PORT &amp;&amp; Number(process.env.PORT)// å®šä¹‰è·¯å¾„ï¼š--Cesium--const cesiumSource = 'node_modules/cesium/Source'const cesiumWorkers = '../Build/Cesium/Workers'const devWebpackConfig = merge(baseWebpackConfig, { module: { rules: utils.styleLoaders({ sourceMap: config.dev.cssSourceMap, usePostCSS: true }) }, // cheap-module-eval-source-map is faster for development devtool: config.dev.devtool, // these devServer options should be customized in /config/index.js devServer: { clientLogLevel: 'warning', historyApiFallback: { rewrites: [ { from: /.*/, to: path.posix.join(config.dev.assetsPublicPath, 'index.html') }, ], }, hot: true, contentBase: false, // since we use CopyWebpackPlugin. compress: true, host: HOST || config.dev.host, port: PORT || config.dev.port, open: config.dev.autoOpenBrowser, overlay: config.dev.errorOverlay ? { warnings: false, errors: true } : false, publicPath: config.dev.assetsPublicPath, proxy: config.dev.proxyTable, quiet: true, // necessary for FriendlyErrorsPlugin watchOptions: { poll: config.dev.poll, } }, plugins: [ // æ·»åŠ å¦‚ä¸‹æ’ä»¶--Cesium-- new CopyWebpackPlugin([{ from: path.join(cesiumSource, cesiumWorkers), to: 'Workers' }]), new CopyWebpackPlugin([{ from: path.join(cesiumSource, 'Assets'), to: 'Assets' }]), new CopyWebpackPlugin([{ from: path.join(cesiumSource, 'Widgets'), to: 'Widgets' }]), new CopyWebpackPlugin([{ from: path.join(cesiumSource, 'ThirdParty/Workers'), to: 'ThirdParty/Workers' }]), new webpack.DefinePlugin({ // Define relative base path in cesium for loading assets CESIUM_BASE_URL: JSON.stringify('') }), new webpack.DefinePlugin({ 'process.env': require('../config/dev.env') }), new webpack.HotModuleReplacementPlugin(), new webpack.NamedModulesPlugin(), // HMR shows correct file names in console on update. new webpack.NoEmitOnErrorsPlugin(), // https://github.com/ampedandwired/html-webpack-plugin new HtmlWebpackPlugin({ filename: 'index.html', template: 'index.html', inject: true }), // copy custom static assets new CopyWebpackPlugin([ { from: path.resolve(__dirname, '../static'), to: config.dev.assetsSubDirectory, ignore: ['.*'] } ]) ]})module.exports = new Promise((resolve, reject) =&gt; { portfinder.basePort = process.env.PORT || config.dev.port portfinder.getPort((err, port) =&gt; { if (err) { reject(err) } else { // publish the new Port, necessary for e2e tests process.env.PORT = port // add port to devServer config devWebpackConfig.devServer.port = port // Add FriendlyErrorsPlugin devWebpackConfig.plugins.push(new FriendlyErrorsPlugin({ compilationSuccessInfo: { messages: [`Your application is running here: http://${devWebpackConfig.devServer.host}:${port}`], }, onErrors: config.dev.notifyOnErrors ? utils.createNotifierCallback() : undefined })) resolve(devWebpackConfig) } })}) webpack.base.conf.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130'use strict'const path = require('path')const utils = require('./utils')const config = require('../config')const vueLoaderConfig = require('./vue-loader.conf')//å®šä¹‰ Cesium æºç è·¯å¾„ --Cesium--const cesiumSource = '../node_modules/cesium/Source'const cesiumWorkers = path.join(cesiumSource, 'Workers');function resolve(dir) { return path.join(__dirname, '..', dir)}const createLintingRule = () =&gt; ({ test: /\\.(js|vue)$/, loader: 'eslint-loader', enforce: 'pre', include: [resolve('src'), resolve('test')], options: { formatter: require('eslint-friendly-formatter'), emitWarning: !config.dev.showEslintErrorsInOverlay }})module.exports = { context: path.resolve(__dirname, '../'), entry: { app: './src/main.js' }, // output: { // path: config.build.assetsRoot, // filename: '[name].js', // publicPath: process.env.NODE_ENV === 'production' // ? config.build.assetsPublicPath // : config.dev.assetsPublicPath // }, // è®©webpackæ­£ç¡®å¤„ç†å¤šè¡Œå­—ç¬¦ä¸²ï¼Œåœ¨outputä¸­æ·»åŠ sourcePrefix:' '--Cesium-- output: { path: config.build.assetsRoot, filename: '[name].js', publicPath: process.env.NODE_ENV === 'production' ? config.build.assetsPublicPath : config.dev.assetsPublicPath, sourcePrefix: ' ' //è®©webpackæ­£ç¡®å¤„ç†å¤šè¡Œå­—ç¬¦ä¸² }, // resolve: { // extensions: ['.js', '.vue', '.json'], // alias: { // 'vue$': 'vue/dist/vue.esm.js', // '@': resolve('src'), // } // }, // éœ€è¦åœ¨resolveä¸­è®¾ç½®cesiumåˆ«åï¼Œè¿™æ ·åœ¨å¼•å…¥çš„æ—¶å€™å°±å¯ä»¥æ ¹æ®åˆ«åæ‰¾åˆ°Cesiumçš„åŒ…ã€‚--Cesium-- // ï¼ˆæ³¨ï¼šä¹Ÿå¯ä»¥ä¸è®¾ç½®åˆ«åï¼Œå¯¼åŒ…æ˜¯ç›´æ¥å¯¼å…¥'cesium/Source/Cesium.js'å°±è¡Œã€‚å…¶å®è®¾ç½®åˆ«åçš„ç›®çš„å°±æ˜¯è®©â€œåˆ«åâ€æŒ‡å‘/ node_modules / cesium / Sourceç›®å½•ï¼‰ resolve: { extensions: ['.js', '.vue', '.json'], alias: { 'vue$': 'vue/dist/vue.esm.js', '@': resolve('src'), cesium: path.resolve(__dirname, cesiumSource) //è®¾ç½®cesiumåˆ«å } }, module: { // è§£å†³æŠ¥é”™ 1.87ç‰ˆæœ¬æ— æ•ˆï¼Œåªèƒ½æš‚æ—¶é€€ç‰ˆæœ¬--Cesium-- // npm install @open-wc/webpack-import-meta-loader --save-dev // error in ./node_modules/cesium/Source/ThirdParty/zip.js // Module parse failed: Unexpected token(6400:57) // You may need an appropriate loader to handle this file type. rules: [ { test: /\\.js$/, use: { loader: '@open-wc/webpack-import-meta-loader', }, }, // åˆ›å»ºå·¥ç¨‹å¸ˆä¼šé€‰æ‹© ESLint ä»£ç æ ¡éªŒ // Use ESLint to lint your code? Yes // ...(config.dev.useEslint ? [createLintingRule()] : []), { test: /\\.vue$/, loader: 'vue-loader', options: vueLoaderConfig }, { test: /\\.js$/, loader: 'babel-loader', include: [resolve('src'), resolve('test'), resolve('node_modules/webpack-dev-server/client')] }, { test: /\\.(png|jpe?g|gif|svg)(\\?.*)?$/, loader: 'url-loader', options: { limit: 10000, name: utils.assetsPath('img/[name].[hash:7].[ext]') } }, { test: /\\.(mp4|webm|ogg|mp3|wav|flac|aac)(\\?.*)?$/, loader: 'url-loader', options: { limit: 10000, name: utils.assetsPath('media/[name].[hash:7].[ext]') } }, { test: /\\.(woff2?|eot|ttf|otf)(\\?.*)?$/, loader: 'url-loader', options: { limit: 10000, name: utils.assetsPath('fonts/[name].[hash:7].[ext]') } } ], unknownContextCritical: false,//é˜»æ­¢ä¾èµ–è­¦å‘Š--Cesium-- }, node: { // prevent webpack from injecting useless setImmediate polyfill because Vue // source contains it (although only uses it if it's native). setImmediate: false, // prevent webpack from injecting mocks to Node native modules // that does not make sense for the client dgram: 'empty', fs: 'empty', net: 'empty', tls: 'empty', child_process: 'empty' }} åˆ›å»ºåœ°å›¾ç»„ä»¶ src\\view\\earth.vue 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135&lt;template&gt; &lt;div class=&quot;container&quot;&gt; &lt;div id=&quot;cesiumContainer&quot;&gt;&lt;/div&gt; &lt;div id=&quot;credit&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt; &lt;script&gt;// è¿™é‡Œä¸èƒ½ä½¿ç”¨ import Cesium from 'cesium/Cesium' å¯¼å…¥æ¨¡å—ï¼Œå› ä¸ºCesium 1.63 ç‰ˆæœ¬ä»¥åä½¿ç”¨çš„æ˜¯ES6ã€‚åº”è¯¥ä½¿ç”¨ä¸€ä¸‹æ–¹å¼// import { Viewer } from &quot;cesium/Cesium&quot;;import * as Cesium from &quot;cesium/Cesium&quot;; //æ­£ç¡®import &quot;cesium/Widgets/widgets.css&quot;;export default { name: &quot;earth&quot;, data() { return {}; }, mounted() { // let viewer = new Viewer(&quot;cesiumContainer&quot;); // 1. Geocoder : æŸ¥æ‰¾ä½ç½®å·¥å…·ï¼ŒæŸ¥æ‰¾åˆ°ä¹‹åä¼šå°†é•œå¤´å¯¹å‡†æ‰¾åˆ°çš„åœ°å€ï¼Œé»˜è®¤ä½¿ç”¨bingåœ°å›¾ // 2. Home Button :è§†è§’è¿”å›åˆå§‹ä½ç½®. // 3. Scene Mode Picker : é€‰æ‹©è§†è§’çš„æ¨¡å¼ï¼Œæœ‰ä¸‰ç§ï¼š3Dï¼Œ2Dï¼Œå“¥ä¼¦å¸ƒè§†å›¾(CV) // 4. Base Layer Picker : å›¾å±‚é€‰æ‹©å™¨ï¼Œé€‰æ‹©è¦æ˜¾ç¤ºçš„åœ°å›¾æœåŠ¡å’Œåœ°å½¢æœåŠ¡. // 5. Navigation Help Button :å¯¼èˆªå¸®åŠ©æŒ‰é’®ï¼Œæ˜¾ç¤ºé»˜è®¤çš„åœ°å›¾æ§åˆ¶å¸®åŠ©. // 6. Animation : åŠ¨ç”»å™¨ä»¶ï¼Œæ§åˆ¶è§†å›¾åŠ¨ç”»çš„æ’­æ”¾é€Ÿåº¦. // 7. Timeline :æ—¶é—´çº¿,æŒ‡ç¤ºå½“å‰æ—¶é—´ï¼Œå¹¶å…è®¸ç”¨æˆ·è·³åˆ°ç‰¹å®šçš„æ—¶é—´. // 8. Credits Display :ç‰ˆæƒæ˜¾ç¤ºï¼Œæ˜¾ç¤ºæ•°æ®å½’å±ï¼Œå¿…é€‰ // 9. Fullscreen Button :å…¨å±æŒ‰é’®. Cesium.Ion.defaultAccessToken =&quot;è‡ªå·±çš„token&quot;; var viewer = new Cesium.Viewer(&quot;cesiumContainer&quot;, { // geocoder: false, // homeButton: false, // sceneModePicker: false, // baseLayerPicker: false, // navigationHelpButton: false, // animation: false, creditContainer: &quot;credit&quot;, // timeline: false, // fullscreenButton: false, // vrButton: false, // skyBox : new Cesium.SkyBox({ // sources : { // positiveX : 'stars/TychoSkymapII.t3_08192x04096_80_px.jpg', // negativeX : 'stars/TychoSkymapII.t3_08192x04096_80_mx.jpg', // positiveY : 'stars/TychoSkymapII.t3_08192x04096_80_py.jpg', // negativeY : 'stars/TychoSkymapII.t3_08192x04096_80_my.jpg', // positiveZ : 'stars/TychoSkymapII.t3_08192x04096_80_pz.jpg', // negativeZ : 'stars/TychoSkymapII.t3_08192x04096_80_mz.jpg' // } // }) }); // æ˜¾ç¤ºå¸§é€Ÿ(FPS) viewer.scene.debugShowFramesPerSecond = true; // ç»˜åˆ¶å½¢çŠ¶ // æ–¹å¼ä¸€ï¼š var redBox = viewer.entities.add({ name: &quot;Red box with black outline&quot;, position: Cesium.Cartesian3.fromDegrees(-107.0, 40.0, 300000.0), box: { dimensions: new Cesium.Cartesian3(400000.0, 300000.0, 500000.0), material: Cesium.Color.BLUE.withAlpha(0.5), outline: true, outlineColor: Cesium.Color.BLACK, }, }); viewer.zoomTo(viewer.entities); // æ–¹å¼äºŒï¼š var czml = [ { id: &quot;document&quot;, name: &quot;box&quot;, version: &quot;1.0&quot;, }, { id: &quot;shape2&quot;, name: &quot;Red box with black outline&quot;, position: { cartographicDegrees: [-107.0, 50.0, 300000.0], }, box: { dimensions: { cartesian: [400000.0, 300000.0, 500000.0], }, material: { solidColor: { color: { rgba: [255, 0, 0, 128], }, }, }, outline: true, outlineColor: { rgba: [0, 0, 0, 255], }, }, }, ]; // é‡å¤åˆ›å»ºViewerä¼šæ·»åŠ å¤šä¸ªçª—å£ // var viewer = new Cesium.Viewer(&quot;cesiumContainer&quot;); var dataSourcePromise = Cesium.CzmlDataSource.load(czml); viewer.dataSources.add(dataSourcePromise); viewer.zoomTo(dataSourcePromise); },};&lt;/script&gt; &lt;style scoped&gt;.container { width: 100%; height: 100%;}#cesiumContainer { width: 100%; height: 100%;}/* ä¸å æ®ç©ºé—´ï¼Œæ— æ³•ç‚¹å‡»ï¼Œå³ä¸Šè§’æŒ‰é’®ç»„ï¼Œå·¦ä¸‹è§’åŠ¨ç”»æ§ä»¶ ï¼Œæ—¶é—´çº¿ï¼Œlogoä¿¡æ¯*//* .cesium-viewer-toolbar,.cesium-viewer-animationContainer,.cesium-viewer-timelineContainer,.cesium-viewer-bottom { display: none;} *//* å…¨å±æŒ‰é’® *//* .cesium-viewer-fullscreenContainer { position: absolute; top: -999em;} *//* æ³¨ï¼šå…¨å±æŒ‰é’®ä¸èƒ½é€šè¿‡display:noneçš„æ–¹å¼æ¥è¾¾åˆ°éšè—çš„ç›®çš„ï¼Œè¿™æ˜¯å› ä¸ºç”Ÿæˆçš„æŒ‰é’®æ§ä»¶çš„è¡Œå†…æ ·å¼è®¾ç½®äº†displayå±æ€§ï¼Œä¼šè¦†ç›–å¼•å…¥çš„csså±æ€§&lt;div class=&quot;cesium-viewer-fullscreenContainer&quot; style=&quot;display: block;&quot;&gt;...&lt;/div&gt; */&lt;/style&gt; æ·»åŠ è·¯ç”± src\\router\\index.js 12345678910111213141516171819202122import Vue from 'vue'import Router from 'vue-router'import HelloWorld from '@/components/HelloWorld'import earth from '@/view/earth'Vue.use(Router)export default new Router({ routes: [ { path: '/', name: 'HelloWorld', component: HelloWorld }, { path: '/earth', name: 'earth', component: earth } ]}) è¿è¡ŒæŠ¥é”™1 error in ./node_modules/cesium/Source/ThirdParty/zip.js è§£å†³ 1npm i @open-wc/webpack-import-meta-loader -S vue.config.js æˆ– webpack.base.conf.jsé…ç½® 123456789101112131415module.exports = { configureWebpack: { module: { rules: [ { test: /\\.js$/, use: { loader: '@open-wc/webpack-import-meta-loader', }, }, ], }, },} è¿è¡ŒæŠ¥é”™2 error in (webpack)/hot/dev-server.js Module build failed: TypeError: Cannot read property 'length' of undefined at Object.module.exports (F:\\demo\\cesiumtest-master\\node_modules@open-wc\\webpack-import-meta-loader\\webpack-import-meta-loader.js:20:63) è§£å†³ ç‚¹å‡»æŠ¥é”™è·³è½¬åˆ°å¯¹åº”æ–‡ä»¶è¡Œï¼Œå°†å…¶æ³¨é‡Šå³å¯ 1234567module.exports = function (source) { const path = require('path'); const relativePath = this.context.substring( // this.context.indexOf(this.rootContext) + this.rootContext.length + 1, this.resource.lastIndexOf(path.sep) + 1, ); è¿è¡Œ npm run dev http://localhost:8081/#/earth npm run build æ‰“åŒ…æˆåŠŸ éƒ¨ç½²dist http://xx.xx.xx.11:8084/#/earth æˆåŠŸ åŠŸèƒ½å¼€å‘ æ§ä»¶æ˜¾ç¤ºæ§åˆ¶ Geocoder : æŸ¥æ‰¾ä½ç½®å·¥å…·ï¼ŒæŸ¥æ‰¾åˆ°ä¹‹åä¼šå°†é•œå¤´å¯¹å‡†æ‰¾åˆ°çš„åœ°å€ï¼Œé»˜è®¤ä½¿ç”¨bingåœ°å›¾ Home Button :è§†è§’è¿”å›åˆå§‹ä½ç½®. Scene Mode Picker : é€‰æ‹©è§†è§’çš„æ¨¡å¼ï¼Œæœ‰ä¸‰ç§ï¼š3Dï¼Œ2Dï¼Œå“¥ä¼¦å¸ƒè§†å›¾(CV) Base Layer Picker : å›¾å±‚é€‰æ‹©å™¨ï¼Œé€‰æ‹©è¦æ˜¾ç¤ºçš„åœ°å›¾æœåŠ¡å’Œåœ°å½¢æœåŠ¡. Navigation Help Button :å¯¼èˆªå¸®åŠ©æŒ‰é’®ï¼Œæ˜¾ç¤ºé»˜è®¤çš„åœ°å›¾æ§åˆ¶å¸®åŠ©. Animation : åŠ¨ç”»å™¨ä»¶ï¼Œæ§åˆ¶è§†å›¾åŠ¨ç”»çš„æ’­æ”¾é€Ÿåº¦. Timeline :æ—¶é—´çº¿,æŒ‡ç¤ºå½“å‰æ—¶é—´ï¼Œå¹¶å…è®¸ç”¨æˆ·è·³åˆ°ç‰¹å®šçš„æ—¶é—´. Credits Display :ç‰ˆæƒæ˜¾ç¤ºï¼Œæ˜¾ç¤ºæ•°æ®å½’å±ï¼Œå¿…é€‰ Fullscreen Button :å…¨å±æŒ‰é’®. jsæ–¹å¼ å®˜æ–¹æ–‡æ¡£ 123456789101112131415161718192021222324var viewer = new Viewer(&quot;cesiumContainer&quot;, { geocoder: false, homeButton: false, sceneModePicker: false, baseLayerPicker: false, navigationHelpButton: false, animation: false, // creditContainer: &quot;credit&quot;, timeline: false, fullscreenButton: false, vrButton: false, // skyBox : new Cesium.SkyBox({ // sources : { // positiveX : 'stars/TychoSkymapII.t3_08192x04096_80_px.jpg', // negativeX : 'stars/TychoSkymapII.t3_08192x04096_80_mx.jpg', // positiveY : 'stars/TychoSkymapII.t3_08192x04096_80_py.jpg', // negativeY : 'stars/TychoSkymapII.t3_08192x04096_80_my.jpg', // positiveZ : 'stars/TychoSkymapII.t3_08192x04096_80_pz.jpg', // negativeZ : 'stars/TychoSkymapII.t3_08192x04096_80_mz.jpg' // } // })});// æ˜¾ç¤ºå¸§é€Ÿ(FPS)viewer.scene.debugShowFramesPerSecond = true; cssæ–¹å¼ 12345678910/* ä¸å æ®ç©ºé—´ï¼Œæ— æ³•ç‚¹å‡» */.cesium-viewer-toolbar, /* å³ä¸Šè§’æŒ‰é’®ç»„ */.cesium-viewer-animationContainer, /* å·¦ä¸‹è§’åŠ¨ç”»æ§ä»¶ */.cesium-viewer-timelineContainer, /* æ—¶é—´çº¿ */.cesium-viewer-bottom /* logoä¿¡æ¯ */{ display: none;}.cesium-viewer-fullscreenContainer /* å…¨å±æŒ‰é’® */{ position: absolute; top: -999em; } åˆ›å»ºå½¢çŠ¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152// ç»˜åˆ¶å½¢çŠ¶ æ­£æ–¹ä½“ // æ–¹å¼ä¸€ï¼šEntity//å…¶ä»–å½¢çŠ¶ï¼šhttp://cesium.xin/cesium/Documentation/Entity.html?classFilter=entity var redBox = viewer.entities.add({ name: &quot;Red box with black outline&quot;, position: Cesium.Cartesian3.fromDegrees(-107.0, 40.0, 300000.0), box: { dimensions: new Cesium.Cartesian3(400000.0, 300000.0, 500000.0), material: Cesium.Color.BLUE.withAlpha(0.5), outline: true, outlineColor: Cesium.Color.BLACK, }, }); viewer.zoomTo(viewer.entities); // æ–¹å¼äºŒï¼šCZML(å¯åˆ›å»ºå‡ ä½•å½¢çŠ¶ä¹Ÿå¯åˆ›å»ºåŠ¨ç”») var czml = [ { id: &quot;document&quot;, name: &quot;box&quot;, version: &quot;1.0&quot;, }, { id: &quot;shape2&quot;, name: &quot;Red box with black outline&quot;, position: { cartographicDegrees: [-107.0, 50.0, 300000.0], }, box: { dimensions: { cartesian: [400000.0, 300000.0, 500000.0], }, material: { solidColor: { color: { rgba: [255, 0, 0, 128], }, }, }, outline: true, outlineColor: { rgba: [0, 0, 0, 255], }, }, }, ]; // é‡å¤åˆ›å»ºViewerä¼šæ·»åŠ å¤šä¸ªçª—å£ // var viewer = new Cesium.Viewer(&quot;cesiumContainer&quot;); var dataSourcePromise = Cesium.CzmlDataSource.load(czml); viewer.dataSources.add(dataSourcePromise); viewer.zoomTo(dataSourcePromise); æ·»åŠ ä¸åŒç±»å‹æ•°æ® æ¦‚è§ˆ Web Map Service (WMS) - ä¸€ç§OGCæ ‡å‡†ï¼Œä»åˆ†å¸ƒå¼åœ°ç†æ•°æ®åº“ä¸­é€šè¿‡åœ°å›¾çš„åœ°ç†èŒƒå›´æ¥è¯·æ±‚åˆ‡ç‰‡ã€‚ Cesiumä½¿ç”¨ WebMapServiceImageryProviderå»æ”¯æŒè¿™ç§ã€‚ Tile Map Service (TMS) - ä¸€ç§è®¿é—®åœ°å›¾åˆ‡ç‰‡çš„RESTæ¥å£ã€‚ å¯ä»¥ç”¨CesiumLabï¼Œ MapTiler æˆ–è€… GDAL2Tiles . Cesiumä¸­ä½¿ç”¨TileMapServiceImageryProvider. OpenGIS Web Map Tile Service (WMTS) - ä¸€ç§OGCæ ‡å‡†ï¼Œä¸»è¦æ˜¯ä¸ºé¢„æ¸²æŸ“çš„åœ°å›¾åˆ‡ç‰‡å½¢å¼. Cesiumä¸­ä½¿ç”¨ WebMapTileServiceImageryProvider. OpenStreetMap - è®¿é—® OpenStreetMap åˆ‡ç‰‡ æˆ–è€… ä»»æ„ Slippy map tiles.æœ‰å¾ˆå¤šæ–¹æ³• å‘å¸ƒè¿™ç§æœåŠ¡ .Cesiumä¸­ä½¿ç”¨createOpenStreetMapImageryProvider. Bing åœ°å›¾ - ä½¿ç”¨Bing åœ°å›¾ REST æœåŠ¡è®¿é—®åˆ‡ç‰‡. åœ¨è¿™é‡Œ https://www.bingmapsportal.com/åˆ›å»ºBingåœ°å›¾çš„key. Cesiumä¸­ä½¿ç”¨ BingMapsImageryProvider. Esri ArcGIS MapServer - ä½¿ç”¨ ArcGIS Server REST API è®¿é—®å­˜å‚¨åœ¨ArcGIS Serverä¸Šçš„åˆ‡ç‰‡ã€‚Cesiumä¸­ä½¿ç”¨ArcGisMapServerImageryProvider. Google Earth Enterprise - è®¿é—®Google Earth ä¼ä¸šç‰ˆæœåŠ¡å™¨å‘å¸ƒçš„å½±åƒåˆ‡ç‰‡ã€‚Cesiumä¸­ GoogleEarthImageryProvider. Mapbox - ä½¿ç”¨ Mapbox APIè®¿é—®åˆ‡ç‰‡. åœ¨è¿™é‡Œæ–°å»ºç”¨æˆ·ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ª access token. Cesiumä¸­ä½¿ç”¨ MapboxImageryProvider. æ™®é€šå›¾ç‰‡æ–‡ä»¶ - ä½¿ç”¨ä¸€å¼ æ™®é€šå›¾ç‰‡åˆ›å»ºå½±åƒå›¾å±‚. Cesiumä¸­ä½¿ç”¨ SingleTileImageryProvider. è‡ªå®šä¹‰åˆ‡ç‰‡æœºåˆ¶ - ä½¿ç”¨UrlTemplateImageryProvider, å¯ä»¥é€šè¿‡ URL æ¨¡æ¿è¿æ¥å„ç§å½±åƒèµ„æº ã€‚æ¯”å¦‚TMSæœåŠ¡çš„URLæ¨¡æ¿æ˜¯ï¼š //cesiumjs.org/tilesets/imagery/naturalearthii/{z}/{x}/{reverseY}.jpg. åˆ‡ç‰‡åæ ‡ - ç”¨æ¥æ˜¾ç¤ºå…¨çƒæ˜¯å¦‚ä½•è¢«åˆ‡ç‰‡çš„ï¼Œæ”¯æŒå¤šç§åˆ‡ç‰‡è§„åˆ™ï¼Œç”»å‡ºæ¯ä¸ªåˆ‡ç‰‡çš„åœ°ç†è¾¹ç•Œï¼Œå¹¶ä¸”ç”¨æ–‡å­—æ ‡æ³¨æ¯ä¸ªåˆ‡ç‰‡çš„levelï¼Œxï¼Œyåæ ‡ã€‚ ç™¾åº¦åœ°å›¾ - ç”¨æ¥åŠ è½½ç™¾åº¦é»˜è®¤åœ°å›¾æˆ–è€…è‡ªå®šä¹‰æ ·å¼åœ°å›¾ï¼Œè¯·è”ç³»æˆ‘ä»¬ã€‚ è·¨åŸŸé—®é¢˜è§£å†³ 12345678910111213141516171819module.exports = { dev: { // Paths assetsSubDirectory: 'static', assetsPublicPath: '/', //æ¥å£åœ°å€åŸæœ¬æ˜¯/satellite/z={z}&amp;x={x}&amp;y={y} ä½†æ˜¯ä¸ºäº†åŒ¹é…ä»£ç†åœ°å€ è°ƒç”¨æ—¶éœ€åœ¨å‰é¢åŠ ä¸€ä¸ª /satellite, å› æ­¤æ¥å£åœ°å€éœ€è¦å†™æˆè¿™æ ·çš„å³å¯ç”Ÿæ•ˆ /satellite/satellite/z={z}&amp;x={x}&amp;y={y} proxyTable: { '/ArcGIS': {//ä»£ç†çš„ç›®çš„ï¼šåªè¦æ˜¯/satelliteå¼€å¤´çš„è·¯å¾„éƒ½å¾€localhost:3000è¿›è¡Œè½¬å‘ target: 'https://sampleserver1.arcgisonline.com', //åç«¯æ¥å£åœ°å€ è®¾ç½®ä»£ç†æœåŠ¡å™¨åœ°å€ è½¬å‘åœ°å€ ws: true,//WebSocketåè®® changeOrigin: true, //è¡¨ç¤ºæ˜¯å¦æ”¹å˜åŸåŸŸåï¼›è¿™ä¸ªä¸€å®šè¦é€‰æ‹©ä¸ºtrue; æ˜¯å¦å…è®¸è·¨åŸŸ[ å¦‚æœæ¥å£è·¨åŸŸ åˆ™è¦é…ç½®è¿™ä¸ªå‚æ•°] secure: false, // å¦‚æœæ˜¯httpsæ¥å£ éœ€è¦é…ç½®è¿™ä¸ªå‚æ•° pathRewrite: {// æŠŠç¨‹åºä¸­çš„åœ°å€è½¬æ¢æˆâ€œçœŸå®åœ°å€â€+â€˜/satelliteâ€™åé¢çš„éƒ¨åˆ†å¦‚â€˜/satellite/satellite/z={z}&amp;x={x}&amp;y={y}'ï¼Œè¢«è½¬æ¢æˆ'http://localhost:3000/satellite/z={z}&amp;x={x}&amp;y={y}' '^/ArcGIS': ''//ä¿®æ”¹pathRewriteåœ°å€ å°†å‰ç¼€'^satellite'è½¬ä¸º'/satellite' } }, }, åŠ è½½ä¸åŒç±»å‹æ•°æ® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051// åŠ è½½ä¸åŒç±»å‹æ•°æ® ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡è¦†ç›–============================================== // æ•°æ®ç±»å‹1ï¼š -----------------------------------Web Map Service (WMS) ------------------------------------- // var provider = new Cesium.WebMapServiceImageryProvider({ // // url: &quot;https://sampleserver1.arcgisonline.com/ArcGIS/services/Specialty/ESRI_StatesCitiesRivers_USA/MapServer/WMSServer&quot;, // url: &quot;ArcGIS/ArcGIS/services/Specialty/ESRI_StatesCitiesRivers_USA/MapServer/WMSServer&quot;, // layers: &quot;0&quot;, // // proxy: new Cesium.DefaultProxy(&quot;/proxy/&quot;), // }); // viewer.imageryLayers.addImageryProvider(provider); // æ•°æ®ç±»å‹2ï¼š-----------------------------------OpenGIS Web Map Tile Service (WMTS)----------------------------------- // var shadedRelief2 = new Cesium.WebMapTileServiceImageryProvider({ // url: &quot;http://basemap.nationalmap.gov/arcgis/rest/services/USGSShadedReliefOnly/MapServer/WMTS/tile/1.0.0/USGSShadedReliefOnly/{Style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg&quot;, // layer: &quot;USGSShadedReliefOnly&quot;, // style: &quot;default&quot;, // format: &quot;image/jpeg&quot;, // tileMatrixSetID: &quot;default028mm&quot;, // maximumLevel: 19, // credit: new Cesium.Credit(&quot;U. S. Geological Survey&quot;), // }); // viewer.imageryLayers.addImageryProvider(shadedRelief2); // url:&quot;http://61.175.211.102/arcgis/rest/services/wzmap/map/MapServer/WMTS?service=WMTS&amp;request=GetTile&amp;layer=wzmap&amp;style=default&amp;tilematriX={TileMatrix}&amp;tilerow={TileRow}&amp;tilecoL={TileCol}&quot; // æ•°æ®ç±»å‹3ï¼š -----------------------------------Tile Map Service (TMS)----------------------------------- // var tms = new Cesium.TileMapServiceImageryProvider({ // url: &quot;../images/cesium_maptiler/Cesium_Logo_Color&quot;, // fileExtension: &quot;png&quot;, // maximumLevel: 4, // rectangle: new Cesium.Rectangle( // Cesium.Math.toRadians(-120.0), // Cesium.Math.toRadians(20.0), // Cesium.Math.toRadians(-60.0), // Cesium.Math.toRadians(40.0) // ), // }); // viewer.imageryLayers.addImageryProvider(tms); // æ•°æ®ç±»å‹4ï¼š -----------------------------------ArcGis----------------------------------- // var esri = new Cesium.ArcGisMapServerImageryProvider({ // url: &quot;https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer&quot;, // }); // viewer.imageryLayers.addImageryProvider(esri); // æ•°æ®ç±»å‹5ï¼š-----------------------------------Mapbox----------------------------------- var mapbox = new Cesium.MapboxImageryProvider({ mapId: &quot;mapbox.mapbox-streets-v8&quot;, accessToken: &quot;pk.eyJ1IjoibGltbiIsImEiOiJja2t1bG1na2IxZGU0MnZvNmlzY3FhZXM4In0.oQx4VguycOR4TK80Pyusmw&quot;, }); viewer.imageryLayers.addImageryProvider(mapbox); Leaflet an open-source JavaScript library for mobile-friendly interactive maps Leaflet æ˜¯ä¸€ä¸ªä¸ºå»ºè®¾ç§»åŠ¨è®¾å¤‡å‹å¥½çš„äº’åŠ¨åœ°å›¾ï¼Œè€Œå¼€å‘çš„ç°ä»£çš„ã€å¼€æºçš„ JavaScript åº“ã€‚è™½ç„¶ä»£ç ä»…æœ‰ 38 KBï¼Œä½†å®ƒå…·æœ‰å¼€å‘äººå‘˜å¼€å‘åœ¨çº¿åœ°å›¾çš„å¤§éƒ¨åˆ†åŠŸèƒ½ã€‚Leafletè®¾è®¡åšæŒç®€ä¾¿ã€é«˜æ€§èƒ½å’Œå¯ç”¨æ€§å¥½çš„æ€æƒ³ï¼Œåœ¨æ‰€æœ‰ä¸»è¦æ¡Œé¢å’Œç§»åŠ¨å¹³å°èƒ½é«˜æ•ˆè¿ä½œï¼Œåœ¨ç°ä»£æµè§ˆå™¨ä¸Šä¼šåˆ©ç”¨HTML5å’ŒCSS3çš„ä¼˜åŠ¿ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒæ—§çš„æµè§ˆå™¨è®¿é—®ã€‚æ”¯æŒæ’ä»¶æ‰©å±•ï¼Œæœ‰ä¸€ä¸ªå‹å¥½ã€æ˜“äºä½¿ç”¨çš„APIæ–‡æ¡£å’Œä¸€ä¸ªç®€å•çš„ã€å¯è¯»çš„æºä»£ç ã€‚è¯¦ç»†è§å®˜æ–¹ç½‘ç«™https://leafletjs.com/ 3.3.1åœ°å›¾ 3.3.1.1çŸ¢é‡ç”µå­åœ°å›¾ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;æ·»åŠ ç”µå­åœ°å›¾&lt;/title&gt; &lt;!--æ·»åŠ leafletæ ·å¼--&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.css&quot; /&gt; &lt;!--æ·»åŠ leafletjsåŒ…--&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.js&quot;&gt;&lt;/script&gt; &lt;!--æ·»åŠ åæ ‡åº“--&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4-compressed.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4leaflet.js&quot;&gt;&lt;/script&gt; &lt;style&gt; html { height: 100% } body { height: 100%; margin: 0; padding: 0; } .map { height: 100% } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;mapid&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var res = [ 0.00549933137239034, // Level 0 0.00274966568619517, // Level 1 0.00137483284309758, // Level 2 0.000687416421548792, // Level 3 0.000343708210774396, // Level 4 0.000171854105387198, 8.5927052693599E-05, 4.29635263467995E-05, 2.14817631733998E-05, 1.07408815866999E-05, 5.37044079334994E-06, 2.68522039667497E-06, 1.34261019833748E-06 ]; var crs = new L.Proj.CRS('EPSG:4490', '+proj=longlat +ellps=GRS80 +no_defs', { resolutions: res, origin: [118.122911693886, 31.2869311022836], //åˆ‡å›¾åŸç‚¹ } ); var map = L.map('mapid', { crs: crs }); var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;; var attrib = &quot;&amp;copy æ­å·å¸‚è§„åˆ’èµ„æºå±€&quot;; var basemap = new L.TileLayer(url + &quot;/tile/{z}/{y}/{x}&quot;, { tileSize: 256, attribution: attrib }); map.addLayer(basemap); map.setView([30.25168, 120.16179], 4); //è®¾ç½®æ¯”ä¾‹å°ºå’Œä¸­å¿ƒç‚¹çº§åˆ« &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.3.1.2å½±åƒç”µå­åœ°å›¾ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;æ·»åŠ å½±åƒåœ°å›¾&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4-compressed.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4leaflet.js&quot;&gt;&lt;/script&gt; &lt;style&gt; html { height: 100% } body { height: 100%; margin: 0; padding: 0; } .map { height: 100% } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;mapid&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var res = [ 0.00549933137239034, // Level 0 0.00274966568619517, // Level 1 0.00137483284309758, // Level 2 0.000687416421548792, // Level 3 0.000343708210774396, // Level 4 0.000171854105387198, 8.5927052693599E-05, 4.29635263467995E-05, 2.14817631733998E-05, 1.07408815866999E-05, 5.37044079334994E-06, 2.68522039667497E-06, 1.34261019833748E-06 ]; var crs = new L.Proj.CRS('EPSG:4490', '+proj=longlat +ellps=GRS80 +no_defs', { resolutions: res, origin: [118.122911693886, 31.2869311022836], } ); var map = L.map('mapid', { crs: crs }); var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyraster/Mapserver&quot;; var attrib = &quot;&amp;copy æ­å·å¸‚è§„åˆ’èµ„æºå±€&quot;; var basemap = new L.TileLayer(url + &quot;/tile/{z}/{y}/{x}&quot;, { tileSize: 256, attribution: attrib }); map.addLayer(basemap); map.setView([30, 120], 4); //è®¾ç½®æ¯”ä¾‹å°ºå’Œä¸­å¿ƒç‚¹çº§åˆ« &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.3.1.3æ‰‹åŠ¨åŠ è½½/ç§»é™¤åœ°å›¾ 3.3.2å›¾å±‚ 3.3.2.1å¼¹å‡ºä¿¡æ¯æ¡† ç‚¹å‡»åœ°å›¾å¼¹å‡ºä¿¡æ¯ï¼Œç¤ºä¾‹ä»£ç bindPopup 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;æ·»åŠ ç”µå­åœ°å›¾&lt;/title&gt; &lt;!--æ·»åŠ leafletæ ·å¼--&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.css&quot; /&gt; &lt;!--æ·»åŠ leafletjsåŒ…--&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.js&quot;&gt;&lt;/script&gt; &lt;!--æ·»åŠ åæ ‡åº“--&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4-compressed.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4leaflet.js&quot;&gt;&lt;/script&gt; &lt;style&gt; html { height: 100% } body { height: 100%; margin: 0; padding: 0; } .map { height: 100% } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;mapid&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var res = [ 0.00549933137239034, // Level 0 0.00274966568619517, // Level 1 0.00137483284309758, // Level 2 0.000687416421548792, // Level 3 0.000343708210774396, // Level 4 0.000171854105387198, 8.5927052693599E-05, 4.29635263467995E-05, 2.14817631733998E-05, 1.07408815866999E-05, 5.37044079334994E-06, 2.68522039667497E-06, 1.34261019833748E-06 ]; var crs = new L.Proj.CRS('EPSG:4490', '+proj=longlat +ellps=GRS80 +no_defs', { resolutions: res, origin: [118.122911693886, 31.2869311022836], //åˆ‡å›¾åŸç‚¹ } ); var map = L.map('mapid', { crs: crs }); var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;; var attrib = &quot;&amp;copy æ­å·å¸‚è§„åˆ’èµ„æºå±€&quot;; var basemap = new L.TileLayer(url + &quot;/tile/{z}/{y}/{x}&quot;, { tileSize: 256, attribution: attrib }); map.addLayer(basemap); map.setView([30.25168, 120.16179], 4); //è®¾ç½®æ¯”ä¾‹å°ºå’Œä¸­å¿ƒç‚¹çº§åˆ« L.marker([30.25168, 120.16179]).addTo(map).bindPopup(&quot;&lt;b&gt;Hello world!&lt;/b&gt;&lt;br /&gt;I am a popup.&quot;).openPopup(); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.3.2.2çŸ¢é‡å›¾å±‚ï¼ˆwmsï¼‰ åŠ è½½WMSåœ°å›¾æœåŠ¡ï¼Œæ”¯æŒfilterç­›é€‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;è°ƒç”¨WMS&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/Plugins/leaflet.wms.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4-compressed.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4leaflet.js&quot;&gt;&lt;/script&gt; &lt;style&gt; html { height: 100% } body { height: 100%; margin: 0; padding: 0; } .map { height: 100% } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;mapid&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var res = [ 0.00549933137239034, // Level 0 0.00274966568619517, // Level 1 0.00137483284309758, // Level 2 0.000687416421548792, // Level 3 0.000343708210774396, // Level 4 0.000171854105387198, 8.5927052693599E-05, 4.29635263467995E-05, 2.14817631733998E-05, 1.07408815866999E-05, 5.37044079334994E-06, 2.68522039667497E-06, 1.34261019833748E-06 ]; var crs = new L.Proj.CRS('EPSG:4490', '+proj=longlat +ellps=GRS80 +no_defs', { resolutions: res, origin: [118.122911693886, 31.2869311022836], } ); var map = L.map('mapid', { crs: crs }); var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;; var attrib = &quot;&amp;copy æ­å·å¸‚è§„åˆ’èµ„æºå±€&quot;; var basemap = new L.TileLayer(url + &quot;/tile/{z}/{y}/{x}&quot;, { tileSize: 256, attribution: attrib }); map.addLayer(basemap); map.setView([30, 120], 4); //è®¾ç½®æ¯”ä¾‹å°ºå’Œä¸­å¿ƒç‚¹çº§åˆ« // L.WMS.source var wmsurl = L.WMS.overlay(&quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_csbj0619/MapServer/wms&quot;, { &quot;transparent&quot;: true, &quot;srs&quot;: &quot;EPSG:4490&quot;, &quot;layers&quot;: &quot;lsyt_dmdz_csbj0619&quot;, &quot;format&quot;: &quot;image/png&quot;, &quot;CQL_FILTER&quot;: &quot;quxian='ä½™æ­åŒº'&quot; }); map.addLayer(wmsurl); map.on('click', function (e) { alert(&quot;You clicked the map at &quot; + e.latlng); }); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.3.2.3çŸ¢é‡å›¾å±‚ï¼ˆwfsï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;åŠ è½½WFSç”µå­åœ°å›¾&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/Plugins/leaflet-wfs.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4-compressed.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;style&gt; html { height: 100%; } body { height: 100%; margin: 0; padding: 0; } .map { height: 100%; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;mapid&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var res = [ 0.00549933137239034, // Level 0 0.00274966568619517, // Level 1 0.00137483284309758, // Level 2 0.000687416421548792, // Level 3 0.000343708210774396, // Level 4 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var crs = new L.Proj.CRS( &quot;EPSG:4490&quot;, &quot;+proj=longlat +ellps=GRS80 +no_defs&quot;, { resolutions: res, origin: [118.122911693886, 31.2869311022836], } ); var map = L.map(&quot;mapid&quot;, { crs: crs, }); var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;; var attrib = &quot;&amp;copy æ­å·å¸‚è§„åˆ’èµ„æºå±€&quot;; var basemap = new L.TileLayer(url + &quot;/tile/{z}/{y}/{x}&quot;, { tileSize: 256, attribution: attrib, }); map.addLayer(basemap); map.setView([30, 120], 4); //è®¾ç½®æ¯”ä¾‹å°ºå’Œä¸­å¿ƒç‚¹çº§åˆ« map.on(&quot;click&quot;, function (e) { alert(&quot;You clicked the map at &quot; + e.latlng); }); var myStyle = { color: &quot;#ff0000&quot;, weight: 2, opacity: 1, fillOpacity: 0.01, }; var mblayer; $.ajax({ url: &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;, success: function (data) { var geojson = JSON.parse(data); mblayer = L.geoJSON(geojson, { style: myStyle, }).addTo(map); }, }); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.3.3æŸ¥è¯¢ 3.3.3.1ç‚¹æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;ç‚¹æŸ¥è¯¢&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/Plugins/leaflet-wfs.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4-compressed.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;style&gt; html { height: 100%; } body { height: 100%; margin: 0; padding: 0; } .map { height: 100%; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;mapid&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var res = [ 0.00549933137239034, // Level 0 0.00274966568619517, // Level 1 0.00137483284309758, // Level 2 0.000687416421548792, // Level 3 0.000343708210774396, // Level 4 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var crs = new L.Proj.CRS( &quot;EPSG:4490&quot;, &quot;+proj=longlat +ellps=GRS80 +no_defs&quot;, { resolutions: res, origin: [118.122911693886, 31.2869311022836], } ); var map = L.map(&quot;mapid&quot;, { crs: crs, /*fullscreenControl: { pseudoFullscreen: false },*/ }); var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;; var attrib = &quot;&amp;copy æ­å·å¸‚è§„åˆ’èµ„æºå±€&quot;; var basemap = new L.TileLayer(url + &quot;/tile/{z}/{y}/{x}&quot;, { tileSize: 256, attribution: attrib, }); map.addLayer(basemap); map.setView([30, 120], 4); //è®¾ç½®æ¯”ä¾‹å°ºå’Œä¸­å¿ƒç‚¹çº§åˆ« map.on(&quot;click&quot;, function (e) { // alert(&quot;You clicked the map at &quot; + e.latlng); var point = e.latlng.lng + &quot;,&quot; + e.latlng.lat + &quot;,&quot; + e.latlng.lng + &quot;,&quot; + e.latlng.lat;// &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=BBOX(geom,&quot; + point + &quot;)&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); alert(&quot;You clicked the map at &quot; + text.features[1].properties['quxian']); } }); }); var myStyle = { color: &quot;#ff0000&quot;, weight: 2, opacity: 1, fillOpacity: 0.01, }; var mblayer; $.ajax({ url: &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;, success: function (data) { var geojson = JSON.parse(data); mblayer = L.geoJSON(geojson, { style: myStyle, }).addTo(map); }, }); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.3.3.2é¢æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;é¢æŸ¥è¯¢&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/Plugins/leaflet-draw/leaflet.draw.css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/Plugins/leaflet-wfs.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4-compressed.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/Plugins/leaflet-draw/leaflet.draw.js&quot;&gt;&lt;/script&gt; &lt;style&gt; html { height: 100%; } body { height: 100%; margin: 0; padding: 0; } .map { height: 100%; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;mapid&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var res = [ 0.00549933137239034, // Level 0 0.00274966568619517, // Level 1 0.00137483284309758, // Level 2 0.000687416421548792, // Level 3 0.000343708210774396, // Level 4 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var crs = new L.Proj.CRS( &quot;EPSG:4490&quot;, &quot;+proj=longlat +ellps=GRS80 +no_defs&quot;, { resolutions: res, origin: [118.122911693886, 31.2869311022836], } ); var map = L.map(&quot;mapid&quot;, { crs: crs, /*fullscreenControl: { pseudoFullscreen: false },*/ }); var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;; var attrib = &quot;&amp;copy æ­å·å¸‚è§„åˆ’èµ„æºå±€&quot;; var basemap = new L.TileLayer(url + &quot;/tile/{z}/{y}/{x}&quot;, { tileSize: 256, attribution: attrib, }); map.addLayer(basemap); map.setView([30, 120], 4); //è®¾ç½®æ¯”ä¾‹å°ºå’Œä¸­å¿ƒç‚¹çº§åˆ« //var draw=new L.Control.Draw(map,drawControl.options.rectangle).enable(); var options = { position: &quot;topleft&quot;, draw: { polyline: false, polygon: false, circle: false, marker: false, circlemarker: false, rectangle: { shapeOptions: { clickable: true, }, }, }, }; var drawControl = new L.Control.Draw(options); map.addControl(drawControl); map.on(L.Draw.Event.CREATED, function (e) { var type = e.layerType; if (type == &quot;rectangle&quot;) { var bound = e.layer.getBounds(); var point = bound._southWest.lng + &quot;,&quot; + bound._southWest.lat + &quot;,&quot; + bound._northEast.lng + &quot;,&quot; + bound._northEast.lat; // &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=BBOX(geom,&quot; + point + &quot;)&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); alert( &quot;ä½ é€‰æ‹©çš„æ˜¯ &quot; + text.features[1].properties[&quot;quxian&quot;] ); }, }); } }); var myStyle = { color: &quot;#ff0000&quot;, weight: 2, opacity: 1, fillOpacity: 0.01, }; var mblayer; $.ajax({ url: &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;, success: function (data) { var geojson = JSON.parse(data); mblayer = L.geoJSON(geojson, { style: myStyle, }).addTo(map); }, }); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.3.3.3å±æ€§æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;ç‚¹æŸ¥è¯¢&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/Plugins/leaflet-wfs.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4-compressed.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;style&gt; html { height: 100%; } body { height: 100%; margin: 0; padding: 0; } .map { height: 100%; } .h1 { z-index: 1009; position: absolute; left: 100px; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;mapid&quot; class=&quot;map&quot;&gt; &lt;h1&gt;ç‚¹å‡»åœ°å›¾æ ¹æ®å±æ€§æŸ¥è¯¢&lt;/h1&gt; &lt;/div&gt; &lt;script&gt; var res = [ 0.00549933137239034, // Level 0 0.00274966568619517, // Level 1 0.00137483284309758, // Level 2 0.000687416421548792, // Level 3 0.000343708210774396, // Level 4 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var crs = new L.Proj.CRS( &quot;EPSG:4490&quot;, &quot;+proj=longlat +ellps=GRS80 +no_defs&quot;, { resolutions: res, origin: [118.122911693886, 31.2869311022836], } ); var map = L.map(&quot;mapid&quot;, { crs: crs, /*fullscreenControl: { pseudoFullscreen: false },*/ }); var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;; var attrib = &quot;&amp;copy æ­å·å¸‚è§„åˆ’èµ„æºå±€&quot;; var basemap = new L.TileLayer(url + &quot;/tile/{z}/{y}/{x}&quot;, { tileSize: 256, attribution: attrib, }); map.addLayer(basemap); map.setView([30, 120], 4); //è®¾ç½®æ¯”ä¾‹å°ºå’Œä¸­å¿ƒç‚¹çº§åˆ« map.on(&quot;click&quot;, function (e) { var point = e.latlng.lng + &quot;,&quot; + e.latlng.lat + &quot;,&quot; + e.latlng.lng + &quot;,&quot; + e.latlng.lat; // &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=&quot;; qurl += &quot; quxian='ä¸ŠåŸåŒº'&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); alert(&quot;æ ¹æ®å±æ€§é€‰æ‹©çš„æ˜¯ &quot; + text.features[0].properties[&quot;quxian&quot;]); }, }); }); var myStyle = { color: &quot;#ff0000&quot;, weight: 2, opacity: 1, fillOpacity: 0.01, }; var mblayer; $.ajax({ url: &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;, success: function (data) { var geojson = JSON.parse(data); mblayer = L.geoJSON(geojson, { style: myStyle, }).addTo(map); }, }); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.3.3.4ç»„åˆæŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;é¢æŸ¥è¯¢&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/Plugins/leaflet-draw/leaflet.draw.css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/Plugins/leaflet-wfs.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4-compressed.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/pro/proj4leaflet.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/leaflet/V1.3/leaflet/Plugins/leaflet-draw/leaflet.draw.js&quot;&gt;&lt;/script&gt; &lt;style&gt; html { height: 100%; } body { height: 100%; margin: 0; padding: 0; } .map { height: 100%; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;mapid&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var res = [ 0.00549933137239034, // Level 0 0.00274966568619517, // Level 1 0.00137483284309758, // Level 2 0.000687416421548792, // Level 3 0.000343708210774396, // Level 4 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var crs = new L.Proj.CRS( &quot;EPSG:4490&quot;, &quot;+proj=longlat +ellps=GRS80 +no_defs&quot;, { resolutions: res, origin: [118.122911693886, 31.2869311022836], } ); var map = L.map(&quot;mapid&quot;, { crs: crs, /*fullscreenControl: { pseudoFullscreen: false },*/ }); var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;; var attrib = &quot;&amp;copy æ­å·å¸‚è§„åˆ’èµ„æºå±€&quot;; var basemap = new L.TileLayer(url + &quot;/tile/{z}/{y}/{x}&quot;, { tileSize: 256, attribution: attrib, }); map.addLayer(basemap); map.setView([30, 120], 4); //è®¾ç½®æ¯”ä¾‹å°ºå’Œä¸­å¿ƒç‚¹çº§åˆ« //var draw=new L.Control.Draw(map,drawControl.options.rectangle).enable(); var options = { position: &quot;topleft&quot;, draw: { polyline: false, polygon: false, circle: false, marker: false, circlemarker: false, rectangle: { shapeOptions: { clickable: true, }, }, }, }; var drawControl = new L.Control.Draw(options); map.addControl(drawControl); map.on(L.Draw.Event.CREATED, function (e) { var type = e.layerType; if (type == &quot;rectangle&quot;) { var bound = e.layer.getBounds(); var point = bound._southWest.lng + &quot;,&quot; + bound._southWest.lat + &quot;,&quot; + bound._northEast.lng + &quot;,&quot; + bound._northEast.lat; // &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=BBOX(geom,&quot; + point + &quot;)&quot;; qurl += &quot; and quxian='ä¸ŠåŸåŒº'&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); if (!text.features.length) { alert(&quot;ä½ é€‰æ‹©çš„æ˜¯éä¸ŠåŸåŒºï¼Œæ— æŸ¥è¯¢ç»“æœï¼&quot;); } else { alert(&quot;ä½ é€‰æ‹©çš„æ˜¯ &quot; + text.features[0].properties[&quot;quxian&quot;]); } }, }); } }); var myStyle = { color: &quot;#ff0000&quot;, weight: 2, opacity: 1, fillOpacity: 0.01, }; var mblayer; $.ajax({ url: &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;, success: function (data) { var geojson = JSON.parse(data); mblayer = L.geoJSON(geojson, { style: myStyle, }).addTo(map); }, }); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ArcGIS ArcGIS API for JavaScriptå°±æ˜¯ESRIå…¬å¸ç”¨JavaSciptè¯­è¨€ç¼–å†™çš„ä¸€å¥—ç¨‹åºæ¥å£ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡è°ƒç”¨APIè·å–ArcGIS serverã€geoserverç­‰æä¾›çš„æœåŠ¡ï¼Œä¾‹å¦‚æµè§ˆã€ç¼–è¾‘ã€æ¸²æŸ“åœ°å›¾ï¼Œä»¥åŠä¸€äº›å¸¸ç”¨çš„ç©ºé—´åˆ†æåŠŸèƒ½ã€‚APIä¸­åŒ…å«äº†ArcGIS API for JavaScriptä¸­æ¯ä¸ªç±»çš„è¯¦ç»†æè¿°ã€‚ä½¿ç”¨APIæŸ¥æ‰¾æ¯ä¸ªç±»çš„æ„é€ å‡½æ•°é€‰é¡¹ä»¥åŠå±æ€§ã€æ–¹æ³•å’Œäº‹ä»¶ã€‚ è¯¦æƒ…è§å®˜æ–¹ç½‘ç«™https://developers.arcgis.com/javascript/3/jsapi/ 3.1.1åœ°å›¾ 3.1.1.1çŸ¢é‡ç”µå­åœ°å›¾ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1,user-scalable=no&quot; /&gt; &lt;title&gt;Map with Vertor&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/dijit/themes/claro/claro.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/esri/css/esri.css&quot; /&gt; &lt;style&gt; html, body, \\#map { â€‹ height: 100%; â€‹ width: 100%; â€‹ margin: 0; â€‹ padding: 0; } .esriControlsBR .logo-med { â€‹ display: none; } &lt;/style&gt; &lt;script src=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/init.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var map; require([ &quot;esri/map&quot;, &quot;esri/layers/WMSLayer&quot;, &quot;esri/layers/WMSLayerInfo&quot;, &quot;esri/layers/ArcGISTiledMapServiceLayer&quot;, &quot;esri/geometry/Extent&quot;, &quot;dojo/_base/array&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/parser&quot;, &quot;dijit/layout/BorderContainer&quot;, &quot;dijit/layout/ContentPane&quot;, &quot;dojo/domReady!&quot;, ], function ( Map, WMSLayer, WMSLayerInfo, ArcGISTiledMapServiceLayer, Extent, array, dom, domConst, parser ) { parser.parse(); map = new Map(&quot;map&quot;, { center: new esri.geometry.Point( 120.1594, 30.2571, new esri.SpatialReference({ wkid: 4490 }) ), zoom: 3, }); var layer = new ArcGISTiledMapServiceLayer( &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;, { id: &quot;vector&quot;, } ); map.addLayer(layer); }); &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;claro&quot;&gt; &lt;div â€‹ id=&quot;map&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'center'&quot; â€‹ style=&quot;overflow: hidden;&quot; \\&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 3.1.1.2å½±åƒç”µå­åœ°å›¾ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1,user-scalable=no&quot; /&gt; &lt;title&gt;Map with Raster&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/dijit/themes/claro/claro.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/esri/css/esri.css&quot; /&gt; &lt;style&gt; html, body, \\#map { â€‹ height: 100%; â€‹ width: 100%; â€‹ margin: 0; â€‹ padding: 0; } .esriControlsBR .logo-med { â€‹ display: none; } &lt;/style&gt; &lt;script src=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/init.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var map; require([ &quot;esri/map&quot;, &quot;esri/layers/WMSLayer&quot;, &quot;esri/layers/WMSLayerInfo&quot;, &quot;esri/layers/ArcGISTiledMapServiceLayer&quot;, &quot;esri/geometry/Extent&quot;, &quot;dojo/_base/array&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/parser&quot;, &quot;dijit/layout/BorderContainer&quot;, &quot;dijit/layout/ContentPane&quot;, &quot;dojo/domReady!&quot;, ], function ( Map, WMSLayer, WMSLayerInfo, ArcGISTiledMapServiceLayer, Extent, array, dom, domConst, parser ) { parser.parse(); map = new Map(&quot;map&quot;, { center: new esri.geometry.Point( 120.1594, 30.2571, new esri.SpatialReference({ wkid: 4490 }) ), zoom: 3, }); var layer = new ArcGISTiledMapServiceLayer( &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyraster/Mapserver&quot;, { id: &quot;raster&quot;, } ); map.addLayer(layer); }); &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;claro&quot;&gt; &lt;div â€‹ id=&quot;map&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'center'&quot; â€‹ style=&quot;overflow: hidden;&quot; \\&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 3.1.1.3æ‰‹åŠ¨åŠ è½½/ç§»é™¤åœ°å›¾ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1,user-scalable=no&quot; /&gt; &lt;title&gt;Map with Control&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/dijit/themes/claro/claro.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/esri/css/esri.css&quot; /&gt; &lt;style&gt; html, body, \\#map { â€‹ height: 100%; â€‹ width: 100%; â€‹ margin: 0; â€‹ padding: 0; } .esriControlsBR .logo-med { â€‹ display: none; } .details span { â€‹ cursor: pointer; } &lt;/style&gt; &lt;script src=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/init.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var map; require([ &quot;esri/map&quot;, &quot;esri/layers/WMSLayer&quot;, &quot;esri/layers/WMSLayerInfo&quot;, &quot;esri/layers/ArcGISTiledMapServiceLayer&quot;, &quot;esri/geometry/Extent&quot;, &quot;dojo/_base/array&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/parser&quot;, &quot;dijit/layout/BorderContainer&quot;, &quot;dijit/layout/ContentPane&quot;, &quot;dojo/domReady!&quot;, ], function ( Map, WMSLayer, WMSLayerInfo, ArcGISTiledMapServiceLayer, Extent, array, dom, domConst, parser ) { parser.parse(); map = new Map(&quot;map&quot;, { center: new esri.geometry.Point( 120.1594, 30.2571, new esri.SpatialReference({ wkid: 4490 }) ), zoom: 3, }); var vector = new ArcGISTiledMapServiceLayer( &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;, { id: &quot;vector&quot;, } ); // map.addLayer(vector); var raster = new ArcGISTiledMapServiceLayer( &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyraster/Mapserver&quot;, { id: &quot;raster&quot;, } ); // map.addLayer(raster); $(&quot;#details span&quot;).click(function () { var name = $(this).attr(&quot;name&quot;); switch (name) { case &quot;vector&quot;: if (!map.getLayer(&quot;vector&quot;)) map.addLayer(vector); break; case &quot;raster&quot;: if (!map.getLayer(&quot;raster&quot;)) map.addLayer(raster); break; case &quot;rvector&quot;: if (map.getLayer(&quot;vector&quot;)) map.removeLayer(vector); break; case &quot;rraster&quot;: if (map.getLayer(&quot;raster&quot;)) map.removeLayer(raster); break; } }); }); &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;claro&quot;&gt; &lt;div id=&quot;content&quot; data-dojo-type=&quot;dijit.layout.BorderContainer&quot; data-dojo-props=&quot;design:'headline', gutters:true&quot; style=&quot;width: 100%; height: 100%; margin: 0;&quot; \\&gt; &lt;div â€‹ id=&quot;details&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'left', splitter:true&quot; â€‹ style=&quot;overflow: auto; width: 200px;&quot; \\&gt; â€‹ &lt;span name=&quot;vector&quot;&gt;æ·»åŠ çŸ¢é‡å›¾å±‚&lt;/span&gt; â€‹ &lt;span name=&quot;raster&quot;&gt;æ·»åŠ å½±åƒå›¾å±‚&lt;/span&gt; â€‹ &lt;span name=&quot;rvector&quot;&gt;ç§»é™¤çŸ¢é‡å›¾å±‚&lt;/span&gt; â€‹ &lt;span name=&quot;rraster&quot;&gt;ç§»é™¤å½±åƒå›¾å±‚&lt;/span&gt; &lt;/div&gt; &lt;div â€‹ id=&quot;map&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'center'&quot; â€‹ style=&quot;overflow: hidden;&quot; \\&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 3.1.2å›¾å±‚ 3.1.2.1å¼¹å‡ºä¿¡æ¯æ¡† 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1,user-scalable=no&quot; /&gt; &lt;title&gt;Map with infoWindow&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/dijit/themes/claro/claro.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/esri/css/esri.css&quot; /&gt; &lt;style&gt; html, body, \\#map { â€‹ height: 100%; â€‹ width: 100%; â€‹ margin: 0; â€‹ padding: 0; } .esriControlsBR .logo-med { â€‹ display: none; } &lt;/style&gt; &lt;script src=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/init.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var map; require([ &quot;esri/map&quot;, &quot;esri/layers/WFSLayer&quot;, &quot;esri/layers/WMSLayerInfo&quot;, &quot;esri/layers/ArcGISTiledMapServiceLayer&quot;, &quot;esri/geometry/Extent&quot;, &quot;dojo/_base/array&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/parser&quot;, &quot;dijit/layout/BorderContainer&quot;, &quot;dijit/layout/ContentPane&quot;, &quot;dojo/domReady!&quot;, ], function ( Map, WFSLayer, WMSLayerInfo, ArcGISTiledMapServiceLayer, Extent, array, dom, domConst, parser ) { parser.parse(); map = new Map(&quot;map&quot;, { center: new esri.geometry.Point( 120.1594, 30.2571, new esri.SpatialReference({ wkid: 4490 }) ), zoom: 3, }); var layer = new ArcGISTiledMapServiceLayer( &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;, { id: &quot;vector&quot;, } ); map.addLayer(layer); map.on('click', function (e) { map.infoWindow.setTitle(&quot;è¯¦ç»†ä¿¡æ¯&quot;); map.infoWindow.setContent(&quot;å½“å‰åæ ‡ï¼š&quot; + e.mapPoint.x + &quot;,&quot; + e.mapPoint.y); map.infoWindow.show(e.mapPoint); }) }); &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;claro&quot;&gt; &lt;div â€‹ id=&quot;map&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'center'&quot; â€‹ style=&quot;overflow: hidden;&quot; \\&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 3.1.2.2çŸ¢é‡å›¾å±‚ï¼ˆwmsï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1,user-scalable=no&quot; /&gt; &lt;title&gt;Map with wmslayer&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/dijit/themes/claro/claro.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/esri/css/esri.css&quot; /&gt; &lt;style&gt; html, body, \\#map { â€‹ height: 100%; â€‹ width: 100%; â€‹ margin: 0; â€‹ padding: 0; } .esriControlsBR .logo-med { â€‹ display: none; } &lt;/style&gt; &lt;script src=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/init.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var map; require([ &quot;esri/map&quot;, &quot;esri/layers/WMSLayer&quot;, &quot;esri/layers/WMSLayerInfo&quot;, &quot;esri/layers/ArcGISTiledMapServiceLayer&quot;, &quot;esri/geometry/Extent&quot;, &quot;dojo/_base/array&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/parser&quot;, &quot;dijit/layout/BorderContainer&quot;, &quot;dijit/layout/ContentPane&quot;, &quot;dojo/domReady!&quot;, ], function ( Map, WMSLayer, WMSLayerInfo, ArcGISTiledMapServiceLayer, Extent, array, dom, domConst, parser ) { parser.parse(); map = new Map(&quot;map&quot;, { center: new esri.geometry.Point( 120.1594, 30.2571, new esri.SpatialReference({ wkid: 4490 }) ), zoom: 3, }); var layer = new ArcGISTiledMapServiceLayer( &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;, { id: &quot;vector&quot;, } ); map.addLayer(layer); map.on(&quot;load&quot;, function () { var extent = map.extent; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wms&quot;; var resourceInfo = { extent: extent, layerInfos: [], version: &quot;1.1.1&quot;, visibleLayers: [&quot;1&quot;], }; var wmslayer = new esri.layers.WMSLayer(url, { resourceInfo: resourceInfo, }); wmslayer.setImageFormat(&quot;png&quot;); wmslayer.setVisibleLayers(&quot;gpserver&quot;); map.addLayer(wmslayer); }); }); &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;claro&quot;&gt; &lt;div â€‹ id=&quot;map&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'center'&quot; â€‹ style=&quot;overflow: hidden;&quot; \\&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 3.1.2.3çŸ¢é‡å›¾å±‚ï¼ˆwfsï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1,user-scalable=no&quot; /&gt; &lt;title&gt;Map with wfslayer&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/dijit/themes/claro/claro.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/esri/css/esri.css&quot; /&gt; &lt;style&gt; html, body, \\#map { â€‹ height: 100%; â€‹ width: 100%; â€‹ margin: 0; â€‹ padding: 0; } .esriControlsBR .logo-med { â€‹ display: none; } &lt;/style&gt; &lt;script src=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/init.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var map, symbol; require([ &quot;esri/map&quot;, &quot;esri/layers/WFSLayer&quot;, &quot;esri/layers/WMSLayerInfo&quot;, &quot;esri/layers/ArcGISTiledMapServiceLayer&quot;, &quot;esri/symbols/SimpleLineSymbol&quot;, &quot;esri/symbols/SimpleFillSymbol&quot;, &quot;esri/graphic&quot;, &quot;esri/geometry/Extent&quot;, &quot;esri/geometry/Polygon&quot;, &quot;dojo/_base/array&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/parser&quot;, &quot;dijit/layout/BorderContainer&quot;, &quot;dijit/layout/ContentPane&quot;, &quot;dojo/domReady!&quot;, ], function ( Map, WFSLayer, WMSLayerInfo, ArcGISTiledMapServiceLayer, SimpleLineSymbol, SimpleFillSymbol, Graphic, Extent, Polygon, array, dom, domConst, parser ) { parser.parse(); map = new Map(&quot;map&quot;, { center: new esri.geometry.Point( 120.1594, 30.2571, new esri.SpatialReference({ wkid: 4490 }) ), zoom: 3, }); var layer = new ArcGISTiledMapServiceLayer( &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver&quot;, { id: &quot;vector&quot;, } ); map.addLayer(layer); map.on(&quot;load&quot;, function () { var extent = map.extent; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;; $.ajax({ url: url, success: function (data) { console.log(data); var text = JSON.parse(data); for (var i = 0; i &lt; text.features.length; i++) { symbol = new SimpleFillSymbol(); if (text.features[i].geometry.type == &quot;Polygon&quot;) { var polygonjson = { &quot;rings&quot;: text.features[i].geometry.coordinates[0], &quot;spatialReference&quot;: { &quot;wkid&quot;: 4490 } } var poly = new Polygon(polygonjson) var graphic = new Graphic(poly, symbol); //var gra = new Graphic(text.features[i].geometry, symbol); map.graphics.add(graphic); } else if (text.features[i].geometry.type == &quot;MultiPolygon&quot;) { var len = text.features[i].geometry.coordinates.length; for (var k = 0; k &lt; len; k++) { var polygonjson = { &quot;rings&quot;: text.features[i].geometry.coordinates[k], &quot;spatialReference&quot;: { &quot;wkid&quot;: 4490 } } var poly = new Polygon(polygonjson) var graphic = new Graphic(poly, symbol); map.graphics.add(graphic); } } else { alert(); } } } }); }); }); &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;claro&quot;&gt; &lt;div â€‹ id=&quot;map&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'center'&quot; â€‹ style=&quot;overflow: hidden;&quot; \\&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 3.1.3æŸ¥è¯¢ 3.1.3.1ç‚¹æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1,user-scalable=no&quot; /&gt; &lt;title&gt;Query By Point&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/dijit/themes/claro/claro.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/esri/css/esri.css&quot; /&gt; &lt;style&gt; html, body, \\#map { â€‹ height: 100%; â€‹ width: 100%; â€‹ margin: 0; â€‹ padding: 0; } &lt;/style&gt; &lt;script src=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/init.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var map; require([ &quot;esri/map&quot;, &quot;esri/layers/WMSLayer&quot;, &quot;esri/layers/WMSLayerInfo&quot;, &quot;esri/layers/ArcGISTiledMapServiceLayer&quot;, &quot;esri/geometry/Extent&quot;, &quot;dojo/_base/array&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/parser&quot;, &quot;dijit/layout/BorderContainer&quot;, &quot;dijit/layout/ContentPane&quot;, &quot;dojo/domReady!&quot;, ], function ( Map, WMSLayer, WMSLayerInfo, ArcGISTiledMapServiceLayer, Extent, array, dom, domConst, parser ) { parser.parse(); map = new Map(&quot;map&quot;, { // basemap: &quot;streets&quot;, // center: [120.1594, 30.2571], center: new esri.geometry.Point( 120.1594, 30.2571, new esri.SpatialReference({ wkid: 4490 }) ), zoom: 3, }); var layer2 = new ArcGISTiledMapServiceLayer( &quot;http://21.15.116.31/e8b4611714092ac7bc35cb5e8d476e4824f85f3a/Tile/ArcGISREST/hzsyvector.gis&quot;, { // id: layerInfo.LayerName, id: &quot;åº•å›¾&quot;, } ); map.addLayer(layer2); map.on(&quot;load&quot;, function () { var extent = map.extent; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wms&quot;; var resourceInfo = { extent: extent, layerInfos: [], version: &quot;1.1.1&quot;, visibleLayers: [&quot;1&quot;], }; var wmslayer = new esri.layers.WMSLayer(url, { resourceInfo: resourceInfo, }); wmslayer.setImageFormat(&quot;png&quot;); wmslayer.setVisibleLayers(&quot;gpserver&quot;); map.addLayer(wmslayer); }); map.on(&quot;click&quot;, function (e) { console.log(&quot;è·å–åˆ°çš„ç‚¹&quot; + e); var point = e.mapPoint.x + &quot;,&quot; + e.mapPoint.y + &quot;,&quot; + e.mapPoint.x + &quot;,&quot; + e.mapPoint.y;// &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=BBOX(geom,&quot; + point + &quot;)&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); $('#details').html(text.features[1].properties['quxian']); } }); }); }); &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;claro&quot;&gt; &lt;div id=&quot;content&quot; data-dojo-type=&quot;dijit.layout.BorderContainer&quot; data-dojo-props=&quot;design:'headline', gutters:true&quot; style=&quot;width: 100%; height: 100%; margin: 0;&quot; \\&gt; &lt;div â€‹ id=&quot;details&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'left', splitter:true&quot; â€‹ style=&quot;overflow: auto; width: 200px;&quot; \\&gt;&lt;/div&gt; &lt;div â€‹ id=&quot;map&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'center'&quot; â€‹ style=&quot;overflow: hidden;&quot; \\&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 3.1.3.2é¢æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1,user-scalable=no&quot; /&gt; &lt;title&gt;Query By Rectangle&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/dijit/themes/claro/claro.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/esri/css/esri.css&quot; /&gt; &lt;style&gt; html, body, \\#map { â€‹ height: 100%; â€‹ width: 100%; â€‹ margin: 0; â€‹ padding: 0; } &lt;/style&gt; &lt;script src=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/init.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var map, toolbar; require([ &quot;esri/map&quot;, &quot;esri/layers/WMSLayer&quot;, &quot;esri/layers/WMSLayerInfo&quot;, &quot;esri/toolbars/draw&quot;, &quot;esri/symbols/SimpleLineSymbol&quot;, &quot;esri/symbols/SimpleFillSymbol&quot;, &quot;esri/graphic&quot;, &quot;esri/layers/ArcGISTiledMapServiceLayer&quot;, &quot;esri/geometry/Extent&quot;, &quot;dojo/_base/array&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/parser&quot;, &quot;dijit/layout/BorderContainer&quot;, &quot;dijit/layout/ContentPane&quot;, &quot;dojo/domReady!&quot;, ], function ( Map, WMSLayer, WMSLayerInfo, Draw, SimpleLineSymbol, SimpleFillSymbol, Graphic, ArcGISTiledMapServiceLayer, Extent, array, dom, domConst, parser ) { parser.parse(); map = new Map(&quot;map&quot;, { // basemap: &quot;streets&quot;, // center: [120.1594, 30.2571], center: new esri.geometry.Point( 120.1594, 30.2571, new esri.SpatialReference({ wkid: 4490 }) ), zoom: 3, }); var layer2 = new ArcGISTiledMapServiceLayer( &quot;http://21.15.116.31/e8b4611714092ac7bc35cb5e8d476e4824f85f3a/Tile/ArcGISREST/hzsyvector.gis&quot;, { // id: layerInfo.LayerName, id: &quot;åº•å›¾&quot;, } ); map.addLayer(layer2); map.on(&quot;load&quot;, function () { var extent = map.extent; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wms&quot;; var resourceInfo = { extent: extent, layerInfos: [], version: &quot;1.1.1&quot;, visibleLayers: [&quot;1&quot;], }; var wmslayer = new esri.layers.WMSLayer(url, { resourceInfo: resourceInfo, }); wmslayer.setImageFormat(&quot;png&quot;); wmslayer.setVisibleLayers(&quot;gpserver&quot;); map.addLayer(wmslayer); toolbar = new Draw(map); toolbar.on(&quot;draw-end&quot;, showinfo); toolbar.activate(Draw[&quot;RECTANGLE&quot;]); }); function showinfo(evt) { var symbol; toolbar.deactivate(); map.graphics.clear(); symbol = new SimpleFillSymbol(); var graphic = new Graphic(evt.geometry, symbol); map.graphics.add(graphic); getAttr(evt.geometry); } function getAttr(geo) { var point = geo.cache._extent.xmin + &quot;,&quot; + geo.cache._extent.ymin + &quot;,&quot; + geo.cache._extent.xmax + &quot;,&quot; + geo.cache._extent.ymax; // &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=BBOX(geom,&quot; + point + &quot;)&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); var attr = &quot;&quot;; for (var i = 0; i &lt; text.features.length; i++) { attr += text.features[i].properties[&quot;quxian&quot;] + &quot;&lt;/br&gt;&quot;; } $(&quot;#details&quot;).html(attr); toolbar.activate(Draw[&quot;RECTANGLE&quot;]); }, }); } }); &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;claro&quot;&gt; &lt;div id=&quot;content&quot; data-dojo-type=&quot;dijit.layout.BorderContainer&quot; data-dojo-props=&quot;design:'headline', gutters:true&quot; style=&quot;width: 100%; height: 100%; margin: 0;&quot; \\&gt; &lt;div â€‹ id=&quot;details&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'left', splitter:true&quot; â€‹ style=&quot;overflow: auto; width: 200px;&quot; \\&gt;&lt;/div&gt; &lt;div â€‹ id=&quot;map&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'center'&quot; â€‹ style=&quot;overflow: hidden;&quot; \\&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 3.1.3.3å±æ€§æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1,user-scalable=no&quot; /&gt; &lt;title&gt;Query by Attr&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/dijit/themes/claro/claro.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/esri/css/esri.css&quot; /&gt; &lt;style&gt; html, body, \\#map { â€‹ height: 100%; â€‹ width: 100%; â€‹ margin: 0; â€‹ padding: 0; } &lt;/style&gt; &lt;script src=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/init.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var map; require([ &quot;esri/map&quot;, &quot;esri/layers/WMSLayer&quot;, &quot;esri/layers/WMSLayerInfo&quot;, &quot;esri/layers/ArcGISTiledMapServiceLayer&quot;, &quot;esri/geometry/Extent&quot;, &quot;dojo/_base/array&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/parser&quot;, &quot;dijit/layout/BorderContainer&quot;, &quot;dijit/layout/ContentPane&quot;, &quot;dojo/domReady!&quot;, ], function ( Map, WMSLayer, WMSLayerInfo, ArcGISTiledMapServiceLayer, Extent, array, dom, domConst, parser ) { parser.parse(); map = new Map(&quot;map&quot;, { center: new esri.geometry.Point( 120.1594, 30.2571, new esri.SpatialReference({ wkid: 4490 }) ), zoom: 3, }); var layer2 = new ArcGISTiledMapServiceLayer( &quot;http://21.15.116.31/e8b4611714092ac7bc35cb5e8d476e4824f85f3a/Tile/ArcGISREST/hzsyvector.gis&quot;, { id: &quot;åº•å›¾&quot;, } ); map.addLayer(layer2); map.on(&quot;load&quot;, function () { var extent = map.extent; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wms&quot;; var resourceInfo = { extent: extent, layerInfos: [], version: &quot;1.1.1&quot;, visibleLayers: [&quot;1&quot;], }; var wmslayer = new esri.layers.WMSLayer(url, { resourceInfo: resourceInfo, }); wmslayer.setImageFormat(&quot;png&quot;); wmslayer.setVisibleLayers(&quot;gpserver&quot;); map.addLayer(wmslayer); }); map.on(&quot;click&quot;, function (e) { console.log(&quot;è·å–åˆ°çš„ç‚¹&quot; + e); var point = &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; // &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=BBOX(geom,&quot; + point + &quot;)&quot;; qurl += &quot; and quxian='ä¸ŠåŸåŒº'&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); var attr = &quot;&quot;; for (var i = 0; i &lt; text.features.length; i++) { attr += text.features[i].properties[&quot;quxian&quot;] + &quot;&lt;/br&gt;&quot;; } $(&quot;#details&quot;).html(attr); }, }); }); }); &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;claro&quot;&gt; &lt;div id=&quot;content&quot; data-dojo-type=&quot;dijit.layout.BorderContainer&quot; data-dojo-props=&quot;design:'headline', gutters:true&quot; style=&quot;width: 100%; height: 100%; margin: 0;&quot; \\&gt; &lt;div â€‹ id=&quot;details&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'left', splitter:true&quot; â€‹ style=&quot;overflow: auto; width: 200px;&quot; \\&gt;ç‚¹å‡»åœ°å›¾å®ç°æŒ‰å±æ€§æŸ¥è¯¢ï¼ˆåŒºå¿=ä¸ŠåŸåŒºï¼‰&lt;/div&gt; &lt;div â€‹ id=&quot;map&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'center'&quot; â€‹ style=&quot;overflow: hidden;&quot; \\&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 3.1.3.4ç»„åˆæŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1,user-scalable=no&quot; /&gt; &lt;title&gt;Query&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/dijit/themes/claro/claro.css&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/esri/css/esri.css&quot; /&gt; &lt;style&gt; html, body, \\#map { â€‹ height: 100%; â€‹ width: 100%; â€‹ margin: 0; â€‹ padding: 0; } &lt;/style&gt; &lt;script src=&quot;http://172.18.109.232:8082/arcgis_js_api/3.24/init.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var map, toolbar; require([ &quot;esri/map&quot;, &quot;esri/layers/WMSLayer&quot;, &quot;esri/layers/WMSLayerInfo&quot;, &quot;esri/toolbars/draw&quot;, &quot;esri/symbols/SimpleLineSymbol&quot;, &quot;esri/symbols/SimpleFillSymbol&quot;, &quot;esri/graphic&quot;, &quot;esri/layers/ArcGISTiledMapServiceLayer&quot;, &quot;esri/geometry/Extent&quot;, &quot;dojo/_base/array&quot;, &quot;dojo/dom&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/parser&quot;, &quot;dijit/layout/BorderContainer&quot;, &quot;dijit/layout/ContentPane&quot;, &quot;dojo/domReady!&quot;, ], function ( Map, WMSLayer, WMSLayerInfo, Draw, SimpleLineSymbol, SimpleFillSymbol, Graphic, ArcGISTiledMapServiceLayer, Extent, array, dom, domConst, parser ) { parser.parse(); map = new Map(&quot;map&quot;, { center: new esri.geometry.Point( 120.1594, 30.2571, new esri.SpatialReference({ wkid: 4490 }) ), zoom: 3, }); var layer2 = new ArcGISTiledMapServiceLayer( &quot;http://21.15.116.31/e8b4611714092ac7bc35cb5e8d476e4824f85f3a/Tile/ArcGISREST/hzsyvector.gis&quot;, { id: &quot;åº•å›¾&quot;, } ); map.addLayer(layer2); map.on(&quot;load&quot;, function () { var extent = map.extent; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wms&quot;; var resourceInfo = { extent: extent, layerInfos: [], version: &quot;1.1.1&quot;, visibleLayers: [&quot;1&quot;], }; var wmslayer = new esri.layers.WMSLayer(url, { resourceInfo: resourceInfo, }); wmslayer.setImageFormat(&quot;png&quot;); wmslayer.setVisibleLayers(&quot;gpserver&quot;); map.addLayer(wmslayer); toolbar = new Draw(map); toolbar.on(&quot;draw-end&quot;, showinfo); toolbar.activate(Draw[&quot;RECTANGLE&quot;]); }); function showinfo(evt) { var symbol; toolbar.deactivate(); map.graphics.clear(); symbol = new SimpleFillSymbol(); var graphic = new Graphic(evt.geometry, symbol); map.graphics.add(graphic); getAttr(evt.geometry); } function getAttr(geo) { var point = geo.cache._extent.xmin + &quot;,&quot; + geo.cache._extent.ymin + &quot;,&quot; + geo.cache._extent.xmax + &quot;,&quot; + geo.cache._extent.ymax; // &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=BBOX(geom,&quot; + point + &quot;)&quot;; qurl += &quot; and quxian='ä¸ŠåŸåŒº'&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); var attr = &quot;&quot;; for (var i = 0; i &lt; text.features.length; i++) { attr += text.features[i].properties[&quot;quxian&quot;] + &quot;&lt;/br&gt;&quot;; } $(&quot;#details&quot;).html(attr); toolbar.activate(Draw[&quot;RECTANGLE&quot;]); }, }); } }); &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;claro&quot;&gt; &lt;div id=&quot;content&quot; data-dojo-type=&quot;dijit.layout.BorderContainer&quot; data-dojo-props=&quot;design:'headline', gutters:true&quot; style=&quot;width: 100%; height: 100%; margin: 0;&quot; \\&gt; &lt;div â€‹ id=&quot;details&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'left', splitter:true&quot; â€‹ style=&quot;overflow: auto; width: 200px;&quot; \\&gt;åœ¨æ¡†é€‰èŒƒå›´å†…æŸ¥è¯¢å±æ€§ï¼ˆåŒºå¿=ä¸ŠåŸåŒºï¼‰çš„æ•°æ®&lt;/div&gt; &lt;div â€‹ id=&quot;map&quot; â€‹ data-dojo-type=&quot;dijit.layout.ContentPane&quot; â€‹ data-dojo-props=&quot;region:'center'&quot; â€‹ style=&quot;overflow: hidden;&quot; \\&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; Openlayers OpenLayers æ˜¯ä¸€ä¸ªä¸“ä¸ºWeb GIS å®¢æˆ·ç«¯å¼€å‘æä¾›çš„JavaScript ç±»åº“åŒ…ï¼Œç”¨äºå®ç°æ ‡å‡†æ ¼å¼å‘å¸ƒçš„åœ°å›¾æ•°æ®è®¿é—®ã€‚OpenLayerså®ç°è®¿é—®åœ°ç†ç©ºé—´æ•°æ®çš„æ–¹æ³•éƒ½ç¬¦åˆè¡Œä¸šæ ‡å‡†ã€‚OpenLayers æ”¯æŒOpen GIS åä¼šåˆ¶å®šçš„WMSï¼ˆWeb Mapping Serviceï¼‰å’ŒWFSï¼ˆWeb Feature Serviceï¼‰ç­‰ç½‘ç»œæœåŠ¡è§„èŒƒï¼Œå¯ä»¥é€šè¿‡è¿œç¨‹æœåŠ¡çš„æ–¹å¼ï¼Œå°†ä»¥OGC æœåŠ¡å½¢å¼å‘å¸ƒçš„åœ°å›¾æ•°æ®åŠ è½½åˆ°åŸºäºæµè§ˆå™¨çš„OpenLayers å®¢æˆ·ç«¯ä¸­è¿›è¡Œæ˜¾ç¤ºã€‚è¯¦ç»†è§å®˜æ–¹ç½‘ç«™https://openlayers.org/ åœ°å›¾ çŸ¢é‡ç”µå­åœ°å›¾ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;æ·»åŠ ç”µå­åœ°å›¾&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/css/ol.css&quot; type=&quot;text/css&quot;&gt; &lt;script src=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/build/ol.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;map&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var format = 'image/png'; var bounds = [119.347618103027, 29.7052669525146, 120.698570251465, 30.5366992950439 ]; var projection = new ol.proj.Projection({ code: 'EPSG:4490', units: 'degrees', axisOrientation: 'neu', global: true }); var fullExtent = [118.33968849655, 29.188589472, 120.71408849655, 30.5651894750343]; var resolutions = [ 0.00549933137239034, 0.00274966568619517, 0.00137483284309758, 0.000687416421548792, 0.000343708210774396, 0.000171854105387198, 8.5927052693599E-05, 4.29635263467995E-05, 2.14817631733998E-05, 1.07408815866999E-05, 5.37044079334994E-06, 2.68522039667497E-06, 1.34261019833748E-06, ]; var tileGrid = new ol.tilegrid.TileGrid({ tileSize: 256, origin: [118.122911693886, 31.2869311022836], extent: fullExtent, resolutions: resolutions }); // ol.source.XYZæ·»åŠ ç“¦ç‰‡åœ°å›¾çš„å±‚ var tileLayer = new ol.layer.Tile({ source: new ol.source.XYZ({ tileGrid: tileGrid, tileUrlFunction: function (tileCoord) { var z = tileCoord[0]; var x = tileCoord[1]; var y = (-tileCoord[2] - 1); var url = 'http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver/tile/' + z + '/' + y + '/' + x; console.log(url); return url; }, projection: 'EPSG:4490' }) }); var map = new ol.Map({ target: 'map', layers: [ tileLayer ], view: new ol.View({ projection: projection }) }); map.getView().fit(bounds, map.getSize()); //éå¸¸é‡è¦ &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; å½±åƒç”µå­åœ°å›¾ æ·»åŠ ç”µå­åœ°å›¾ var format = 'image/png'; var bounds = [119.347618103027, 29.7052669525146, 120.698570251465, 30.5366992950439 ]; var projection = new ol.proj.Projection({ code: 'EPSG:4490', units: 'degrees', axisOrientation: 'neu', global: true }); var fullExtent = [118.33968849655, 29.188589472, 120.71408849655, 30.5651894750343]; var resolutions = [ 0.00549933137239034, 0.00274966568619517, 0.00137483284309758, 0.000687416421548792, 0.000343708210774396, 0.000171854105387198, 8.5927052693599E-05, 4.29635263467995E-05, 2.14817631733998E-05, 1.07408815866999E-05, 5.37044079334994E-06, 2.68522039667497E-06, 1.34261019833748E-06, ]; var tileGrid = new ol.tilegrid.TileGrid({ tileSize: 256, origin: [118.122911693886, 31.2869311022836], extent: fullExtent, resolutions: resolutions }); // ol.source.XYZæ·»åŠ ç“¦ç‰‡åœ°å›¾çš„å±‚ var tileLayer = new ol.layer.Tile({ source: new ol.source.XYZ({ tileGrid: tileGrid, tileUrlFunction: function (tileCoord) { var z = tileCoord[0]; var x = tileCoord[1]; var y = (-tileCoord[2] - 1); var url = 'http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyraster/Mapserver/tile/' + z + '/' + y + '/' + x; console.log(url); return url; }, projection: 'EPSG:4490' }) }); var map = new ol.Map({ target: 'map', layers: [ tileLayer ], view: new ol.View({ projection: projection }) }); map.getView().fit(bounds, map.getSize()); //éå¸¸é‡è¦ å›¾å±‚ å¼¹å‡ºæ¡†ä¿¡æ¯æ¡† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;å¼¹å‡ºä¿¡æ¯æ¡†&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/css/ol.css&quot; type=&quot;text/css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/build/ol.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;style&gt; #map { height: 100%; width: 100%; } #mypopup { background: #fff; }&lt;/style&gt;&lt;body&gt; &lt;div id=&quot;map&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;div id=&quot;mypopup&quot;&gt; &lt;div id=&quot;mypopup-content&quot;&gt;å†…å®¹è‡ªå®šä¹‰&lt;/div&gt; &lt;button id=&quot;closeOverlay&quot;&gt;å…³é—­&lt;/button&gt; &lt;/div&gt; &lt;script&gt; var format = &quot;image/png&quot;; var bounds = [ 119.347618103027, 29.7052669525146, 120.698570251465, 30.5366992950439, ]; var projection = new ol.proj.Projection({ code: &quot;EPSG:4490&quot;, units: &quot;degrees&quot;, axisOrientation: &quot;neu&quot;, global: true, }); var fullExtent = [ 118.33968849655, 29.188589472, 120.71408849655, 30.5651894750343, ]; var resolutions = [ 0.00549933137239034, 0.00274966568619517, 0.00137483284309758, 0.000687416421548792, 0.000343708210774396, 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var tileGrid = new ol.tilegrid.TileGrid({ tileSize: 256, origin: [118.122911693886, 31.2869311022836], extent: fullExtent, resolutions: resolutions, }); // ol.source.XYZæ·»åŠ ç“¦ç‰‡åœ°å›¾çš„å±‚ var tileLayer = new ol.layer.Tile({ source: new ol.source.XYZ({ tileGrid: tileGrid, tileUrlFunction: function (tileCoord) { var z = tileCoord[0]; var x = tileCoord[1]; var y = -tileCoord[2] - 1; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver/tile/&quot; + z + &quot;/&quot; + y + &quot;/&quot; + x; // console.log(url); return url; }, projection: &quot;EPSG:4490&quot;, }), }); var info = $(&quot;#mypopup&quot;); var content = $(&quot;#mypopup-content&quot;); var overlay = new ol.Overlay({ element: info[0], autopan: true, autoPanMargin: 20, positioning: &quot;center-center&quot;, }); //map.addOverlay(overlay); var map = new ol.Map({ target: &quot;map&quot;, layers: [tileLayer], overlays: [overlay], view: new ol.View({ projection: projection, }), }); map.getView().fit(bounds, map.getSize()); //éå¸¸é‡è¦ $(&quot;#closeOverlay&quot;).click(function () { info.hide(); return false; }); map.on(&quot;click&quot;, function (e) { var location = e.coordinate; content.html(&quot;è¿™æ˜¯ä¿¡æ¯æ¡†&quot;); info.show(); overlay.setPosition(location); }); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; çŸ¢é‡å›¾å±‚ï¼ˆwmsï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;æ·»åŠ ç”µå­åœ°å›¾&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/css/ol.css&quot; type=&quot;text/css&quot;&gt; &lt;script src=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/build/ol.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;map&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var format = 'image/png'; var bounds = [119.347618103027, 29.7052669525146, 120.698570251465, 30.5366992950439 ]; var projection = new ol.proj.Projection({ code: 'EPSG:4490', units: 'degrees', axisOrientation: 'neu', global: true }); var fullExtent = [118.33968849655, 29.188589472, 120.71408849655, 30.5651894750343]; var resolutions = [ 0.00549933137239034, 0.00274966568619517, 0.00137483284309758, 0.000687416421548792, 0.000343708210774396, 0.000171854105387198, 8.5927052693599E-05, 4.29635263467995E-05, 2.14817631733998E-05, 1.07408815866999E-05, 5.37044079334994E-06, 2.68522039667497E-06, 1.34261019833748E-06, ]; var tileGrid = new ol.tilegrid.TileGrid({ tileSize: 256, origin: [118.122911693886, 31.2869311022836], extent: fullExtent, resolutions: resolutions }); // ol.source.XYZæ·»åŠ ç“¦ç‰‡åœ°å›¾çš„å±‚ var tileLayer = new ol.layer.Tile({ source: new ol.source.XYZ({ tileGrid: tileGrid, tileUrlFunction: function (tileCoord) { var z = tileCoord[0]; var x = tileCoord[1]; var y = (-tileCoord[2] - 1); var url = 'http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver/tile/' + z + '/' + y + '/' + x; console.log(url); return url; }, projection: 'EPSG:4490' }) }); var untiled = new ol.layer.Image({ source: new ol.source.ImageWMS({ ratio: 1, //url: 'http://126.10.2.27:8080/geoserver/gpserver/wms', url: 'http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wms?', params: { 'FORMAT': format, 'VERSION': '1.1.1', &quot;LAYERS&quot;: 'lsyt_dmdz_qxbj0619', &quot;exceptions&quot;: 'application/vnd.ogc.se_inimage', } }) }); var map = new ol.Map({ target: 'map', layers: [ tileLayer, untiled ], view: new ol.View({ projection: projection }) }); map.getView().fit(bounds, map.getSize()); //éå¸¸é‡è¦ &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; çŸ¢é‡å›¾å±‚ï¼ˆwfsï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;æ·»åŠ WFSç”µå­åœ°å›¾&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/css/ol.css&quot; type=&quot;text/css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/build/ol.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;map&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var format = &quot;image/png&quot;; var bounds = [ 119.347618103027, 29.7052669525146, 120.698570251465, 30.5366992950439, ]; var projection = new ol.proj.Projection({ code: &quot;EPSG:4490&quot;, units: &quot;degrees&quot;, axisOrientation: &quot;neu&quot;, global: true, }); var fullExtent = [ 118.33968849655, 29.188589472, 120.71408849655, 30.5651894750343, ]; var resolutions = [ 0.00549933137239034, 0.00274966568619517, 0.00137483284309758, 0.000687416421548792, 0.000343708210774396, 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var tileGrid = new ol.tilegrid.TileGrid({ tileSize: 256, origin: [118.122911693886, 31.2869311022836], extent: fullExtent, resolutions: resolutions, }); // ol.source.XYZæ·»åŠ ç“¦ç‰‡åœ°å›¾çš„å±‚ var tileLayer = new ol.layer.Tile({ source: new ol.source.XYZ({ tileGrid: tileGrid, tileUrlFunction: function (tileCoord) { var z = tileCoord[0]; var x = tileCoord[1]; var y = -tileCoord[2] - 1; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver/tile/&quot; + z + &quot;/&quot; + y + &quot;/&quot; + x; //console.log(url); return url; }, projection: &quot;EPSG:4490&quot;, }), }); var vectorSource = new ol.source.Vector({ format: new ol.format.GeoJSON(), url: function (extent) { return &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;; }, //strategy: bboxStrategy, }); var vector = new ol.layer.Vector({ source: vectorSource, style: new ol.style.Style({ stroke: new ol.style.Stroke({ color: &quot;rgba(0, 0, 255, 1.0)&quot;, width: 2, }), }), }); var map = new ol.Map({ target: &quot;map&quot;, layers: [tileLayer, vector], view: new ol.View({ projection: projection, }), }); map.getView().fit(bounds, map.getSize()); //éå¸¸é‡è¦ &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; æŸ¥è¯¢ ç‚¹æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;ç‚¹æŸ¥è¯¢&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/css/ol.css&quot; type=&quot;text/css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/build/ol.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;map&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var format = &quot;image/png&quot;; var bounds = [ 119.347618103027, 29.7052669525146, 120.698570251465, 30.5366992950439, ]; var projection = new ol.proj.Projection({ code: &quot;EPSG:4490&quot;, units: &quot;degrees&quot;, axisOrientation: &quot;neu&quot;, global: true, }); var fullExtent = [ 118.33968849655, 29.188589472, 120.71408849655, 30.5651894750343, ]; var resolutions = [ 0.00549933137239034, 0.00274966568619517, 0.00137483284309758, 0.000687416421548792, 0.000343708210774396, 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var tileGrid = new ol.tilegrid.TileGrid({ tileSize: 256, origin: [118.122911693886, 31.2869311022836], extent: fullExtent, resolutions: resolutions, }); // ol.source.XYZæ·»åŠ ç“¦ç‰‡åœ°å›¾çš„å±‚ var tileLayer = new ol.layer.Tile({ source: new ol.source.XYZ({ tileGrid: tileGrid, tileUrlFunction: function (tileCoord) { var z = tileCoord[0]; var x = tileCoord[1]; var y = -tileCoord[2] - 1; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver/tile/&quot; + z + &quot;/&quot; + y + &quot;/&quot; + x; //console.log(url); return url; }, projection: &quot;EPSG:4490&quot;, }), }); var vectorSource = new ol.source.Vector({ format: new ol.format.GeoJSON(), url: function (extent) { return &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;; }, //strategy: bboxStrategy, }); var vector = new ol.layer.Vector({ source: vectorSource, style: new ol.style.Style({ stroke: new ol.style.Stroke({ color: &quot;rgba(0, 0, 255, 1.0)&quot;, width: 2, }), }), }); var map = new ol.Map({ target: &quot;map&quot;, layers: [tileLayer, vector], view: new ol.View({ projection: projection, }), }); map.getView().fit(bounds, map.getSize()); //éå¸¸é‡è¦ map.on(&quot;click&quot;, function (e) { var location = e.coordinate; var point = location[0] + &quot;,&quot; + location[1] + &quot;,&quot; + location[0] + &quot;,&quot; + location[1];// &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=BBOX(geom,&quot; + point + &quot;)&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); alert(&quot;You clicked the map at &quot; + text.features[1].properties['quxian']); } }); }); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; é¢æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;æ¡†é€‰æŸ¥è¯¢&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/css/ol.css&quot; type=&quot;text/css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/build/ol.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;map&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var format = &quot;image/png&quot;; var bounds = [ 119.347618103027, 29.7052669525146, 120.698570251465, 30.5366992950439, ]; var projection = new ol.proj.Projection({ code: &quot;EPSG:4490&quot;, units: &quot;degrees&quot;, axisOrientation: &quot;neu&quot;, global: true, }); var fullExtent = [ 118.33968849655, 29.188589472, 120.71408849655, 30.5651894750343, ]; var resolutions = [ 0.00549933137239034, 0.00274966568619517, 0.00137483284309758, 0.000687416421548792, 0.000343708210774396, 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var tileGrid = new ol.tilegrid.TileGrid({ tileSize: 256, origin: [118.122911693886, 31.2869311022836], extent: fullExtent, resolutions: resolutions, }); // ol.source.XYZæ·»åŠ ç“¦ç‰‡åœ°å›¾çš„å±‚ var tileLayer = new ol.layer.Tile({ source: new ol.source.XYZ({ tileGrid: tileGrid, tileUrlFunction: function (tileCoord) { var z = tileCoord[0]; var x = tileCoord[1]; var y = -tileCoord[2] - 1; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver/tile/&quot; + z + &quot;/&quot; + y + &quot;/&quot; + x; //console.log(url); return url; }, projection: &quot;EPSG:4490&quot;, }), }); var vectorSource = new ol.source.Vector({ format: new ol.format.GeoJSON(), url: function (extent) { return &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;; }, //strategy: bboxStrategy, }); var vector = new ol.layer.Vector({ source: vectorSource, style: new ol.style.Style({ stroke: new ol.style.Stroke({ color: &quot;rgba(0, 0, 255, 1.0)&quot;, width: 2, }), }), }); var map = new ol.Map({ target: &quot;map&quot;, layers: [tileLayer, vector], view: new ol.View({ projection: projection, }), }); map.getView().fit(bounds, map.getSize()); //éå¸¸é‡è¦ var dragbox = new ol.interaction.DragBox(); map.addInteraction(dragbox); dragbox.on(&quot;boxend&quot;, function () { var extent = dragbox.getGeometry().getExtent(); var point = extent[0] + &quot;,&quot; + extent[1] + &quot;,&quot; + extent[0] + &quot;,&quot; + extent[1];// &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=BBOX(geom,&quot; + point + &quot;)&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); alert(&quot;You clicked the map at &quot; + text.features[0].properties['quxian']); } }); }) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; å±æ€§æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;å±æ€§æŸ¥è¯¢&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/css/ol.css&quot; type=&quot;text/css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/build/ol.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;map&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var format = &quot;image/png&quot;; var bounds = [ 119.347618103027, 29.7052669525146, 120.698570251465, 30.5366992950439, ]; var projection = new ol.proj.Projection({ code: &quot;EPSG:4490&quot;, units: &quot;degrees&quot;, axisOrientation: &quot;neu&quot;, global: true, }); var fullExtent = [ 118.33968849655, 29.188589472, 120.71408849655, 30.5651894750343, ]; var resolutions = [ 0.00549933137239034, 0.00274966568619517, 0.00137483284309758, 0.000687416421548792, 0.000343708210774396, 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var tileGrid = new ol.tilegrid.TileGrid({ tileSize: 256, origin: [118.122911693886, 31.2869311022836], extent: fullExtent, resolutions: resolutions, }); // ol.source.XYZæ·»åŠ ç“¦ç‰‡åœ°å›¾çš„å±‚ var tileLayer = new ol.layer.Tile({ source: new ol.source.XYZ({ tileGrid: tileGrid, tileUrlFunction: function (tileCoord) { var z = tileCoord[0]; var x = tileCoord[1]; var y = -tileCoord[2] - 1; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver/tile/&quot; + z + &quot;/&quot; + y + &quot;/&quot; + x; //console.log(url); return url; }, projection: &quot;EPSG:4490&quot;, }), }); var vectorSource = new ol.source.Vector({ format: new ol.format.GeoJSON(), url: function (extent) { return &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;; }, //strategy: bboxStrategy, }); var vector = new ol.layer.Vector({ source: vectorSource, style: new ol.style.Style({ stroke: new ol.style.Stroke({ color: &quot;rgba(0, 0, 255, 1.0)&quot;, width: 2, }), }), }); var map = new ol.Map({ target: &quot;map&quot;, layers: [tileLayer, vector], view: new ol.View({ projection: projection, }), }); map.getView().fit(bounds, map.getSize()); //éå¸¸é‡è¦ map.on(&quot;click&quot;, function (e) { var location = e.coordinate; var point = location[0] + &quot;,&quot; + location[1] + &quot;,&quot; + location[0] + &quot;,&quot; + location[1];// &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=&quot;; qurl += &quot; quxian='ä¸ŠåŸåŒº'&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); alert(&quot;æ ¹æ®å±æ€§é€‰æ‹©çš„æ˜¯&quot; + text.features[0].properties['quxian']); } }); }); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ç»„åˆæŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;ç»„åˆæŸ¥è¯¢&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/css/ol.css&quot; type=&quot;text/css&quot; /&gt; &lt;script src=&quot;http://172.18.109.232:8082/openlayer/v3.20.1/build/ol.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;http://172.18.109.232:8082/jquery/jquery.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;map&quot; class=&quot;map&quot;&gt;&lt;/div&gt; &lt;script&gt; var format = &quot;image/png&quot;; var bounds = [ 119.347618103027, 29.7052669525146, 120.698570251465, 30.5366992950439, ]; var projection = new ol.proj.Projection({ code: &quot;EPSG:4490&quot;, units: &quot;degrees&quot;, axisOrientation: &quot;neu&quot;, global: true, }); var fullExtent = [ 118.33968849655, 29.188589472, 120.71408849655, 30.5651894750343, ]; var resolutions = [ 0.00549933137239034, 0.00274966568619517, 0.00137483284309758, 0.000687416421548792, 0.000343708210774396, 0.000171854105387198, 8.5927052693599e-5, 4.29635263467995e-5, 2.14817631733998e-5, 1.07408815866999e-5, 5.37044079334994e-6, 2.68522039667497e-6, 1.34261019833748e-6, ]; var tileGrid = new ol.tilegrid.TileGrid({ tileSize: 256, origin: [118.122911693886, 31.2869311022836], extent: fullExtent, resolutions: resolutions, }); // ol.source.XYZæ·»åŠ ç“¦ç‰‡åœ°å›¾çš„å±‚ var tileLayer = new ol.layer.Tile({ source: new ol.source.XYZ({ tileGrid: tileGrid, tileUrlFunction: function (tileCoord) { var z = tileCoord[0]; var x = tileCoord[1]; var y = -tileCoord[2] - 1; var url = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver/tile/&quot; + z + &quot;/&quot; + y + &quot;/&quot; + x; //console.log(url); return url; }, projection: &quot;EPSG:4490&quot;, }), }); var vectorSource = new ol.source.Vector({ format: new ol.format.GeoJSON(), url: function (extent) { return &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&quot;; }, //strategy: bboxStrategy, }); var vector = new ol.layer.Vector({ source: vectorSource, style: new ol.style.Style({ stroke: new ol.style.Stroke({ color: &quot;rgba(0, 0, 255, 1.0)&quot;, width: 2, }), }), }); var map = new ol.Map({ target: &quot;map&quot;, layers: [tileLayer, vector], view: new ol.View({ projection: projection, }), }); map.getView().fit(bounds, map.getSize()); //éå¸¸é‡è¦ map.on(&quot;click&quot;, function (e) { var location = e.coordinate; var point = location[0] + &quot;,&quot; + location[1] + &quot;,&quot; + location[0] + &quot;,&quot; + location[1];// &quot;120.16271670916996,30.251675868508478,120.1713094144393,30.25591314629446&quot;; var qurl = &quot;http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.0.0&amp;request=getfeature&amp;typename=lsyt_dmdz_qxbj0619&amp;outputFormat=application/json&amp;CQL_FILTER=BBOX(geom,&quot; + point + &quot;)&quot;; qurl += &quot; and quxian='ä¸ŠåŸåŒº'&quot;; $.ajax({ url: qurl, success: function (data) { console.log(data); var text = JSON.parse(data); if (!text.features.length) { alert(&quot;ä½ é€‰æ‹©çš„æ˜¯éä¸ŠåŸåŒºï¼Œæ— æŸ¥è¯¢ç»“æœï¼&quot;); } else { alert(&quot;ä½ é€‰æ‹©çš„æ˜¯ &quot; + text.features[0].properties[&quot;quxian&quot;]); } } }); }); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; Cygwin windowsä½¿ç”¨linuxç¯å¢ƒï¼ˆéƒ¨åˆ†æœºå‹å¤±è´¥ï¼‰ Tippecanoe Tippecanoeæ˜¯Mapboxçš„ä¸€ä¸ªå¼€æºåˆ‡ç‰‡å·¥å…·ï¼Œé¡¹ç›®åœ°å€ï¼šhttps://github.com/mapbox/tippecanoeï¼ŒMapboxå¸¸è§„çš„åˆ‡ç‰‡æ–¹æ³•tilelive-copyå‚è§å¦ä¸€ç¯‡åšå®¢ã€‚Tippecanoeä¸»è¦åœ¨å¤„ç†å¤§æ•°æ®é‡æ—¶æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œå…·æœ‰å¾ˆé«˜çš„æ•ˆç‡ï¼Œå¹¶ä¸”æœ‰å¾ˆå¤šå‚æ•°å¯ä»¥æ§åˆ¶ã€‚Tippecanoeåªèƒ½å¤„ç†GeoJSONï¼Œå› æ­¤åœ¨åˆ‡ç‰‡å‰éœ€è¦å°†çŸ¢é‡æ•°æ®è½¬æ¢ä¸ºGeoJSONï¼Œæ¨èä½¿ç”¨ogr2ogrå·¥å…·è½¬æ¢ã€‚åˆ‡ç‰‡ä»¥åçš„æ ¼å¼ä¸ºmbtilesï¼Œå¯è‡ªè¡Œå¯¼å…¥mongodbç­‰æ•°æ®åº“ã€‚ ç›®çš„ï¼šæ ¹æ®ä½ çš„æ•°æ®åˆ›é€ ä¸€ä¸ªå¯è‡ªç”±ç¼©æ”¾çš„è§†å›¾ å¼•ç”¨åœ°å€ï¼šhttps://my.oschina.net/u/1464512/blog/1631972 å¸¸ç”¨tippecanoeå‚æ•°è®¾ç½® GEOJSON GeoSever GeoServeræ˜¯OGC WebæœåŠ¡å™¨è§„èŒƒçš„J2EEå®ç°ï¼Œåˆ©ç”¨GeoServerå¯ä»¥æ–¹ä¾¿åœ°å‘å¸ƒåœ°å›¾æ•°æ®ï¼Œå…è®¸ç”¨æˆ·å¯¹ç‰¹å¾æ•°æ®è¿›è¡Œæ›´æ–°ã€åˆ é™¤ã€æ’å…¥æ“ä½œï¼Œé€šè¿‡GeoServerå¯ä»¥æ¯”è¾ƒå®¹æ˜“åœ°åœ¨ç”¨æˆ·ä¹‹é—´è¿…é€Ÿå…±äº«ç©ºé—´åœ°ç†ä¿¡æ¯ã€‚GeoServeræ˜¯å¼€æºè½¯ä»¶ã€‚ GeoServerä¸»è¦åŒ…å«å¦‚ä¸‹ä¸€äº›ç‰¹ç‚¹ï¼š å…¼å®¹WMSå’ŒWFSç‰¹æ€§ æ”¯æŒPostGISã€Shapefileã€ArcSDEã€Oracleã€VPFã€MySQLã€MapInfo æ”¯æŒä¸Šç™¾ç§æŠ•å½± èƒ½å¤Ÿå°†ç½‘ç»œåœ°å›¾è¾“å‡ºä¸ºJPEGã€GIFã€PNGã€SVGã€KMLç­‰æ ¼å¼ èƒ½å¤Ÿè¿è¡Œåœ¨ä»»ä½•åŸºäºJ2EE/Servletå®¹å™¨ä¹‹ä¸Š åµŒå…¥MapBuilderæ”¯æŒAJAXçš„åœ°å›¾å®¢æˆ·ç«¯OpenLayers å¼•ç”¨åœ°å€ WMS &amp;&amp; WFS WMSæ˜¯ç”±æœåŠ¡å™¨å°†ä¸€åœ°å›¾å›¾åƒå‘é€ç»™å®¢æˆ·ç«¯ï¼Œè€ŒWFSæ˜¯æœåŠ¡å™¨å°†çŸ¢é‡æ•°æ®å‘é€ç»™å®¢æˆ·ç«¯ï¼Œä¹Ÿå°±æ˜¯åœ¨ä½¿ç”¨WMSæ—¶åœ°å›¾ç”±æœåŠ¡å™¨ç»˜åˆ¶ï¼Œåœ¨ä½¿ç”¨WFSæ—¶åœ°å›¾ç”±å®¢æˆ·ç«¯ç»˜åˆ¶ã€‚ WMS 1.2.1 WMSæœåŠ¡ç®€ä»‹ Web Map Serviceï¼ˆç½‘ç»œåœ°å›¾æœåŠ¡ï¼‰ï¼Œç®€ç§°WMSï¼Œç”±å¼€æ”¾åœ°ç†ä¿¡æ¯è”ç›Ÿï¼ˆOpen GeoSpatial Consortiumï¼ŒOGCï¼‰åˆ¶å®šã€‚è¯¥è§„èŒƒå®šä¹‰äº†Webå®¢æˆ·ç«¯ä»ç½‘ç»œåœ°å›¾æœåŠ¡å™¨è·å–åœ°å›¾çš„æ¥å£æ ‡å‡†ã€‚ä¸€ä¸ªWMSå¯ä»¥åŠ¨æ€åœ°ç”Ÿæˆå…·æœ‰åœ°ç†å‚è€ƒæ•°æ®çš„åœ°å›¾ï¼Œè¿™äº›åœ°å›¾é€šå¸¸ç”¨GIFã€JPEGæˆ–PNGç­‰å›¾åƒæ ¼å¼ç­‰ï¼Œä½¿ç”¨è€…é€šè¿‡æŒ‡å®šçš„å‚æ•°è·å–ç›¸åº”çš„åœ°å›¾å›¾ç‰‡ã€‚ 1.2.2 æœåŠ¡æ“ä½œåˆ—è¡¨ WMSå®ç°è§„èŒƒç”±ä¸‰ä¸ªåŸºç¡€æ€§æ“ä½œåè®®(GetCapabilitiesï¼ŒGetMapå’ŒGetFeatureInfo)ç»„æˆï¼Œè¿™äº›åè®®å…±åŒæ„æˆäº†åˆ©ç”¨WMSåˆ›å»ºå’Œå åŠ æ˜¾ç¤ºä¸åŒæ¥æºçš„è¿œç¨‹å¼‚æ„åœ°å›¾æœåŠ¡çš„åŸºç¡€ã€‚WMSæœåŠ¡æ“ä½œåˆ—è¡¨è§ä¸‹è¡¨æ‰€ç¤ºã€‚ æ“ä½œ å®ç°è¦æ±‚ æè¿° GetCapabilities å¼ºåˆ¶å®ç° æš‚å…³é—­ GetMap å¼ºåˆ¶å®ç° è·å–åœ°å›¾å›¾ç‰‡ã€‚è¯¥æ“ä½œæ ¹æ®å®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚å‚æ•°åœ¨æœåŠ¡ç«¯è¿›è¡Œæ£€ç´¢ï¼ŒæœåŠ¡å™¨ç«¯è¿”å›ä¸€ä¸ªåœ°å›¾å›¾åƒï¼Œå…¶åœ°ç†ç©ºé—´å‚æ•°å’Œå¤§å°å‚æ•°æ˜¯å·²ç»æ˜ç¡®å®šä¹‰çš„ï¼Œè¿”å›çš„åœ°å›¾å›¾åƒå¯ä»¥æ˜¯GIFã€JPEGã€PNGæˆ–SVGæ ¼å¼ã€‚ GetFeatureInfo é€‰æ‹©å®ç° 1.2.3æœåŠ¡æ“ä½œçš„å‚æ•°åˆ—è¡¨ å‚æ•°åç§° å‚æ•°ä¸ªæ•° å‚æ•°ç±»å‹å’Œå€¼ service 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼ŒæœåŠ¡ç±»å‹å€¼ä¸ºâ€œWMSâ€ request 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œè¯·æ±‚çš„æ“ä½œåç§°ï¼Œå€¼ä¸ºâ€œGetCapabilitiesâ€ version 0æˆ–1ä¸ª(å¯é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚çš„WMSçš„ç‰ˆæœ¬å· format 0æˆ–1ä¸ª(å¯é€‰) MIMEç±»å‹ï¼Œå€¼ä¸ºæœåŠ¡å…ƒæ•°æ®çš„è¾“å‡ºæ ¼å¼ GetMapæ“ä½œè¯·æ±‚æ–¹æ³•å®ç°å‚æ•° å‚æ•°åç§° å‚æ•°ä¸ªæ•° å‚æ•°ç±»å‹å’Œå€¼ service 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼ŒæœåŠ¡ç±»å‹æ ‡è¯†å€¼ä¸ºâ€œWMSâ€ request 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºâ€œGetMapâ€ version 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚çš„WMSçš„ç‰ˆæœ¬å· layers 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ°å›¾å›¾å±‚åˆ—è¡¨ï¼Œå¤šä¸ªå›¾å±‚ä¹‹é—´ç”¨â€,â€éš”å¼€ styles 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚å›¾å±‚çš„åœ°å›¾æ¸²æŸ“æ ·å¼ CRS 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºåæ ‡å‚ç…§ç³»ç»Ÿ BBOX 1ä¸ª(å¿…é€‰) Wktæ ¼å¼ï¼Œå€¼ä¸ºæŸä¸ªCRSä¸‹çš„åœ°å›¾è¾¹ç•ŒèŒƒå›´çš„åæ ‡åºåˆ— width 1ä¸ª(å¿…é€‰) æ•´å‹ç±»å‹ï¼Œå€¼ä¸ºåœ°å›¾å›¾ç‰‡çš„åƒç´ å®½åº¦ height 1ä¸ª(å¿…é€‰) æ•´å‹ç±»å‹ï¼Œå€¼ä¸ºåœ°å›¾å›¾ç‰‡çš„åƒç´ é«˜åº¦ format 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºåœ°å›¾çš„è¾“å‡ºæ ¼å¼ transparent 0æˆ–1ä¸ª(å¯é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºtrueæˆ–è€…falseï¼Œç”¨æ¥è¡¨ç¤ºåœ°å›¾å›¾å±‚æ˜¯å¦é€æ˜(é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸é€æ˜çš„) filter 0æˆ–1ä¸ª(å¯é€‰) è¯·æ±‚è¦ç´ çš„è¿‡æ»¤æ¡ä»¶ 1.2.4 æ¥å£è°ƒç”¨ç¤ºä¾‹ å®ä¾‹åç§° è°ƒç”¨å®ä¾‹ GetCapabilities æš‚å…³é—­ GetMap http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_csbj0619/MapServer/wms?SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;LAYERS=gpserver%3Alsyt_dmdz_csbj0619&amp;CQL_FILTER=quxian%3D'æ»¨æ±ŸåŒº'&amp;SRS=EPSG%3A4490&amp;STYLES=&amp;WIDTH=768&amp;HEIGHT=546&amp;BBOX=120.05413055419922%2C30.084686279296875%2C120.31780242919922%2C30.272140502929688 WFS 1.3.1 WFSæœåŠ¡ç®€ä»‹ Web Feature Serviceï¼ˆç½‘ç»œè¦ç´ æœåŠ¡ï¼‰ï¼Œç®€ç§°WFSï¼Œç”±å¼€æ”¾åœ°ç†ä¿¡æ¯è”ç›Ÿï¼ˆOpen GeoSpatial Consortiumï¼ŒOGCï¼‰åˆ¶å®šã€‚è¯¥è§„èŒƒä¸»è¦å¯¹OpenGISç®€å•è¦ç´ çš„æ•°æ®ç¼–è¾‘æ“ä½œè¿›è¡Œè§„èŒƒï¼Œä»è€Œä½¿æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯èƒ½å¤Ÿåœ¨è¦ç´ å±‚é¢è¿›è¡Œâ€œé€šè®¯â€ã€‚å…¶è¿”å›ç»“æœçš„æ˜¯XMLæ ¼å¼çš„WFSæœåŠ¡å…ƒæ•°æ®æ–‡æ¡£ï¼Œé€šè¿‡è¯¥æ–‡æ¡£ç”¨æˆ·èƒ½å¤Ÿäº†è§£ï¼šWFSæœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰æ“ä½œæ“ä½œåˆ—è¡¨ï¼ŒGetFeatureæ“ä½œè¿”å›çš„æ•°æ®æ ¼å¼ï¼Œå¯ç”¨çš„åæ ‡å‚ç…§ç³»ç»Ÿåˆ—è¡¨ï¼Œæ“ä½œå¼‚å¸¸ä¿¡æ¯çš„åˆ—è¡¨ï¼ŒWFSæœåŠ¡æä¾›å•†çš„ç›¸å…³ä¿¡æ¯ï¼ŒWFSæœåŠ¡å™¨çš„å¯ç”¨è¦ç´ ç±»åˆ—è¡¨ç­‰ã€‚ 1.3.2 æœåŠ¡æ“ä½œåˆ—è¡¨ WFSæœåŠ¡æ¥å£è§„èŒƒå®šä¹‰äº†GetCapabilitiesï¼ŒDescribeFeatureTypeã€GetFeatureã€Transactionç­‰æ“ä½œã€‚å…¶ä¸­GetCapabilitiesï¼ŒDescribeFeatureTypeå’ŒGetFeatureä¸ºå¿…é¡»å®ç°çš„æ“ä½œï¼Œä¹Ÿå³åªè¦å®ç°äº†è¿™ä¸‰ä¸ªæ“ä½œçš„æœåŠ¡å‡å¯ç§°ä¸ºWFSæœåŠ¡ã€‚WFSçš„æ“ä½œè§ä¸‹è¡¨æ‰€ç¤ºã€‚ æ“ä½œ å®ç°è¦æ±‚ æè¿° GetCapabilities å¼ºåˆ¶å®ç° GetCapabilitiesè¯·æ±‚ç”¨äºæŸ¥è¯¢WFSæœåŠ¡çš„èƒ½åŠ›ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ”¯æŒçš„æ“ä½œã€æ”¯æŒçš„æ ¼å¼ã€ç©ºé—´åæ ‡ã€åŒ…å«çš„èµ„æºç­‰ã€‚å®ƒä¸»è¦çš„ç›®çš„æ˜¯ä½¿å®¢æˆ·ç«¯åœ¨ä½¿ç”¨GetFeatureè¯·æ±‚å‰å¯ä»¥å¯¹WFSæœåŠ¡æœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ï¼Œä»è€Œå¯ä»¥è®¾ç½®æ­£ç¡®çš„å‚æ•°ã€‚ DescribeFeatureType å¼ºåˆ¶å®ç° ç”¨äºç”Ÿæˆä¸€ä¸ª Schema æè¿°ï¼Œè¯¥ Schema æè¿°äº† WFS æœåŠ¡æä¾›çš„è¦ç´ ç±»å‹ï¼ˆFeature Typeï¼‰ï¼Œä»¥åŠè¦ç´ ç±»å‹çš„ç»“æ„ä¿¡æ¯ã€‚è¯¥ Schema è¿˜å®šä¹‰äº† WFS æœåŠ¡æ‰€æœŸæœ›çš„è¦ç´ å®ä¾‹åœ¨è¾“å…¥æ—¶å¦‚ä½•ç¼–ç ä»¥åŠè¾“å‡ºæ—¶å¦‚ä½•ç”Ÿæˆè¦ç´ å®ä¾‹ã€‚ GetFeature å¼ºåˆ¶å®ç° GetFeatureç”¨äºå‘WFSçš„å®¢æˆ·ç«¯ç¨‹åºæä¾›æŸ¥è¯¢ç‰¹å®šåœ°ç†ä¿¡æ¯çš„èƒ½åŠ›ï¼Œé€šè¿‡GetFeatureæ“ä½œå¯ä»¥ç”±æŒ‡å®šçš„å±æ€§æ¡ä»¶ã€ç©ºé—´æ¡ä»¶æˆ–è€…ä¸¤è€…å åŠ çš„æ¡ä»¶è¿›è¡Œç©ºé—´æŸ¥è¯¢ã€‚ Transaction é€‰æ‹©å®ç° å…è®¸Transactionæ“ä½œï¼Œä½¿å®¢æˆ·ç«¯å¯å¯¹æœåŠ¡å™¨ç«¯æ‰€æä¾›çš„åœ°å›¾è¦ç´ ç±»æ‰§æ’å…¥ï¼Œæ›´æ–°ï¼Œåˆ é™¤ç­‰å‘½ä»¤ 1.3.3æœåŠ¡æ“ä½œçš„å‚æ•°åˆ—è¡¨ GetCapabilitiesæ“ä½œè¯·æ±‚æ–¹æ³•å®ç°å‚æ•° å‚æ•°åç§° å‚æ•°ä¸ªæ•° å‚æ•°ç±»å‹å’Œå€¼ service 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼ŒæœåŠ¡ç±»å‹å€¼ä¸ºâ€œWFSâ€ request 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œè¯·æ±‚çš„æ“ä½œåç§°ï¼Œå€¼ä¸ºâ€œGetCapabilitiesâ€ versions 0æˆ–1ä¸ª(å¯é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚çš„WFSçš„ç‰ˆæœ¬å· DescribeFeatureTypeæ“ä½œè¯·æ±‚æ–¹æ³•å®ç°å‚æ•° å‚æ•°åç§° å‚æ•°ä¸ªæ•° å‚æ•°ç±»å‹å’Œå€¼ service 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼ŒæœåŠ¡ç±»å‹å€¼ä¸ºâ€œWFSâ€ request 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œè¯·æ±‚çš„æ“ä½œåç§°ï¼Œå€¼ä¸ºâ€œDescribeFeatureTypeâ€ typeName 0æˆ–1ä¸ª(å¯é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¦ç´ ç±»å‹çš„åˆ—è¡¨ï¼Œå¤šä¸ªå€¼ä¹‹é—´ç”¨â€œï¼Œâ€éš”å¼€ï¼Œé»˜è®¤è§£æåŒ…æ‹¬çš„å…¨éƒ¨è¦ç´ ç±»å‹ outputFormat 0æˆ–1ä¸ª(å¯é€‰) MIMEç±»å‹ï¼Œå€¼ä¸ºè¾“å‡ºæ ¼å¼ GetFeatureæ“ä½œè¯·æ±‚æ–¹æ³•å®ç°å‚æ•° å‚æ•°åç§° å‚æ•°ä¸ªæ•° å‚æ•°ç±»å‹å’Œå€¼ service 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼ŒæœåŠ¡ç±»å‹æ ‡è¯†å€¼ä¸ºâ€œWFSâ€ request 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œè¯·æ±‚çš„æ“ä½œå€¼ä¸ºâ€œGetFeatureâ€ typeName 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚çš„è¦ç´ ç±»å‹çš„åç§°ï¼Œå¤šä¸ªåç§°ä¹‹é—´ç”¨â€œï¼Œâ€éš”å¼€ version 0æˆ–1ä¸ª(å¯é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚çš„WFSçš„ç‰ˆæœ¬å· outputFormat 0æˆ–1ä¸ª(å¯é€‰) MIMEç±»å‹ï¼Œå€¼ä¸ºè¾“å‡ºæ ¼å¼ resultType 0æˆ–1ä¸ª(å¯é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚çš„ç»“æœç±»å‹ propertyName 0æˆ–1ä¸ª(å¯é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚è¦ç´ çš„å±æ€§åï¼Œå¤šä¸ªå€¼ä¹‹é—´ç”¨â€œï¼Œâ€éš”å¼€ featureVersion 0æˆ–1ä¸ª(å¯é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¦ç´ çš„ç‰ˆæœ¬ï¼Œå€¼ä¸ºALLè¿”å›è¯·æ±‚çš„è¦ç´ çš„æ‰€æœ‰ç‰ˆæœ¬ï¼Œæ²¡æœ‰å€¼é»˜è®¤ä¸ºè¿”å›è¯·æ±‚è¦ç´ çš„æœ€æ–°ç‰ˆæœ¬ maxFeature 0æˆ–1ä¸ª(å¯é€‰) æ•´å‹ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚è¦ç´ çš„æœ€å¤§æ•°ï¼Œé»˜è®¤å€¼ä¸ºæ»¡è¶³æŸ¥è¯¢çš„æ‰€æœ‰ç»“æœé›† expiry 0æˆ–1ä¸ª(å¯é€‰) æ•°å­—ç±»å‹ï¼Œè¦ç´ è¢«é”å®šçš„æ—¶é—´ SRSName 0æˆ–1ä¸ª(å¯é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºåæ ‡ç³»ç»Ÿå featureID 0æˆ–1ä¸ª(å¯é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¦ç´ çš„IDï¼Œå¤šä¸ªIDä¹‹é—´ç”¨â€œï¼Œâ€éš”å¼€ filter 0æˆ–1ä¸ª(å¯é€‰) è¯·æ±‚è¦ç´ çš„è¿‡æ»¤æ¡ä»¶ bBox 0æˆ–1ä¸ª(å¯é€‰) Wktæ ¼å¼ï¼Œè¯·æ±‚æŒ‡å®šè¦ç´ æŸ¥è¯¢èŒƒå›´ï¼Œå¯ä»¥æ›¿ä»£featureIdå’Œfilterå‚æ•° 1.3.4 æ¥å£è°ƒç”¨ç¤ºä¾‹ å®ä¾‹åç§° è°ƒç”¨å®ä¾‹ GetCapabilities http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_csbj0619/MapServer/wfs?service=wfs&amp;version=1.1.0&amp;request=getcapabilities DescribeFeatureType http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_qxbj0619/MapServer/wfs?service=wfs&amp;version=1.1.0&amp;request=describefeaturetype&amp;typename=lsyt_dmdz_csbj0619 GetFeature http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/lsyt_dmdz_csbj0619/MapServer/wfs?service=wfs&amp;version=1.1.0&amp;request=getfeature&amp;typename=lsyt_dmdz_csbj0619&amp;outputFormat=json&amp;CQL_FILTER=zhenjie='é—²æ—è¡—é“' WMTS WMTS 1.1 WMTSæœåŠ¡ç®€ä»‹ â€‹ Web Map Tile Serviceï¼ˆç½‘ç»œåœ°å›¾ç“¦ç‰‡æœåŠ¡ï¼‰ï¼Œç®€ç§°WMTSï¼Œç”±å¼€æ”¾åœ°ç†ä¿¡æ¯è”ç›Ÿï¼ˆOpen GeoSpatial Consortiumï¼ŒOGCï¼‰åˆ¶å®šï¼Œæ˜¯å’ŒWMSå¹¶åˆ—çš„é‡è¦OGCè§„èŒƒä¹‹ä¸€ã€‚WMTSæ ‡å‡†å®šä¹‰äº†ä¸€äº›æ“ä½œï¼Œè¿™äº›æ“ä½œå…è®¸ç”¨æˆ·è®¿é—®åˆ‡ç‰‡åœ°å›¾ï¼Œæ˜¯OGCé¦–ä¸ªæ”¯æŒRESTfulè®¿é—®çš„æœåŠ¡æ ‡å‡†ã€‚WMTSä¸åŒäºWMS,å®ƒæœ€é‡è¦çš„ç‰¹å¾æ˜¯é‡‡ç”¨ç¼“å­˜æŠ€æœ¯èƒ½å¤Ÿç¼“è§£WebGISæœåŠ¡å™¨ç«¯æ•°æ®å¤„ç†çš„å‹åŠ›ï¼Œæé«˜äº¤äº’å“åº”é€Ÿåº¦ï¼Œå¤§å¹…æ”¹å–„åœ¨çº¿åœ°å›¾åº”ç”¨å®¢æˆ·ç«¯çš„ç”¨æˆ·ä½“éªŒã€‚WMTSæ˜¯OGCä¸»æ¨çš„ç¼“å­˜æŠ€æœ¯è§„èŒƒï¼Œæ˜¯ç›®å‰å„ç§ç¼“å­˜æŠ€æœ¯ç›¸äº’å…¼å®¹çš„ä¸€ç§æ–¹æ³•ã€‚ WMTSçš„åˆ‡ç‰‡åæ ‡ç³»ç»Ÿå’Œå…¶ç»„ç»‡æ–¹å¼å¯å‚è€ƒä¸‹å›¾ï¼š 1.2 æœåŠ¡æ“ä½œåˆ—è¡¨ WMTSæœåŠ¡æ”¯æŒRESTfulè®¿é—®ï¼Œå…¶æ¥å£åŒ…æ‹¬GetCapabilitiesã€GetTileå’ŒGetFeatureInfo3ä¸ªæ“ä½œï¼Œè¿™äº›æ“ä½œå…è®¸ç”¨æˆ·è®¿é—®åˆ‡ç‰‡åœ°å›¾ã€‚ æ“ä½œ æ“ä½œ æè¿° GetCapabilities å¼ºåˆ¶å®ç° è·å–WMTSçš„èƒ½åŠ›æ–‡æ¡£ï¼ˆå³å…ƒæ•°æ®æ–‡æ¡£ï¼‰ï¼Œé‡Œé¢åŒ…å«æœåŠ¡çš„ä¿¡æ¯ GetTile å¼ºåˆ¶å®ç° è¯¥æ“ä½œæ ¹æ®å®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚å‚æ•°åœ¨æœåŠ¡ç«¯è¿›è¡Œæ£€ç´¢ï¼ŒæœåŠ¡å™¨ç«¯è¿”å›åœ°å›¾ç“¦ç‰‡å›¾åƒ GetFeatureInfo é€‰æ‹©å®ç° 1.3 æœåŠ¡æ“ä½œçš„å‚æ•°åˆ—è¡¨ GetCapabilitiesæ“ä½œè¯·æ±‚æ–¹æ³•å®ç°å‚æ•° å‚æ•°åç§° å‚æ•°ä¸ªæ•° å‚æ•°ç±»å‹å’Œå€¼ service 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼ŒæœåŠ¡ç±»å‹å€¼ä¸ºâ€œWMTSâ€ request 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œè¯·æ±‚çš„æ“ä½œåç§°ï¼Œå€¼ä¸ºâ€œGetCapabilitiesâ€ GetTileæ“ä½œè¯·æ±‚æ–¹æ³•å®ç°å‚æ•° å‚æ•°åç§° å‚æ•°ä¸ªæ•° å‚æ•°ç±»å‹å’Œå€¼ service 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼ŒæœåŠ¡ç±»å‹æ ‡è¯†å€¼ä¸ºâ€œWMTSâ€ request 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œè¯·æ±‚çš„æ“ä½œå€¼ä¸ºâ€œGetTileâ€ version 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚çš„WMTSçš„ç‰ˆæœ¬å· layer 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚çš„å›¾å±‚åç§° style 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºè¯·æ±‚å›¾å±‚çš„æ¸²æŸ“æ ·å¼ format 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œå€¼ä¸ºç“¦ç‰‡åœ°å›¾çš„è¾“å‡ºæ ¼å¼ tileMatrixSet 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œç“¦ç‰‡çŸ©é˜µæ•°æ®é›†ï¼Œå…¶å€¼åœ¨æœåŠ¡çš„å…ƒæ•°æ®æ–‡æ¡£ä¸­æŒ‡å®š tileMatrix 1ä¸ª(å¿…é€‰) å­—ç¬¦ç±»å‹ï¼Œç“¦ç‰‡çŸ©é˜µï¼Œå…¶å€¼åœ¨æœåŠ¡çš„å…ƒæ•°æ®æ–‡æ¡£ä¸­æŒ‡å®š tileRow 1ä¸ª(å¿…é€‰) æ•´å‹ç±»å‹ï¼Œå€¼ä¸ºå¤§äº0çš„æ•´æ•°ï¼Œè¡¨ç¤ºç“¦ç‰‡çŸ©é˜µçš„è¡Œå· tileCol 1ä¸ª(å¿…é€‰) æ•´å‹ç±»å‹ï¼Œå€¼ä¸ºå¤§äº0çš„æ•´æ•°ï¼Œè¡¨ç¤ºç“¦ç‰‡çŸ©é˜µçš„åˆ—å· 1.4æ¥å£è°ƒç”¨ç¤ºä¾‹ å®ä¾‹åç§° è°ƒç”¨å®ä¾‹ GetCapabilitiesæ“ä½œ http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver/WMTS?service=wmts&amp;request=GetCapabilities GetTileæ“ä½œ http://172.18.109.232:8080/68DE38F71E38CD8C508FAB3035752EA8ED8F9221EDE18FDBE593B01FCDD12BD296F09FE27CD7D2733AD075EAF994851B/PBS/rest/services/hzsyvector/Mapserver/WMTS?service=wmts&amp;request=getTile&amp;version=1.0.0&amp;layer=hzsyvector&amp;Style=&amp;tilematrixset=hzsyvector&amp;tilematrix=3&amp;tilerow=5&amp;tilecol=7&amp;format=png ****","link":"/2021/02/22/Draft/2021/GIS/"},{"title":"JVM ä¸ä¸Šå±‚æŠ€æœ¯","text":"JVM ä¸ä¸Šå±‚æŠ€æœ¯ æ–°å­¦å››é—® **WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ï¼š**äº†è§£åº•å±‚ï¼Œä¼˜åŒ–ï¼Œé¢è¯•ï¼Œè§£å†³åº•å±‚BUG **WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘ï¼š**ç»“æ„ï¼Œ HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘ï¼šå­¦ä¹ èµ„æºï¼šå°šç¡…è°·JVMï¼ŒANKIè®°å¿†ï¼Œæ–‡æ¡£ **LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ï¼š**äº†è§£ è¿›åº¦ï¼šä¸Šç¯‡ ã€å®Œ12.19ã€‘ ç»¼åˆé—®é¢˜ ç±»åŠ è½½è¿‡ç¨‹ æ•´ä½“ç»“æ„ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜æ´» åƒåœ¾å›æ”¶ç®—æ³• åƒåœ¾å›æ”¶å™¨ æ·±æ‹·è´æµ…æ‹·è´ åŒäº²å§”æ´¾æœºåˆ¶ StringTable ä¼˜åŒ–æ–¹æ³• ä¸Šç¯‡ï¼šå†…å­˜ä¸åƒåœ¾å›æ”¶ é€ŸæŸ¥ -XXé€‰é¡¹è¡¨ å † é€‰é¡¹å é€‰é¡¹ä½œç”¨ é»˜è®¤å€¼ å¤‡æ³¨ -XX: +PrintFlagsInitial æŸ¥çœ‹æ‰€æœ‰çš„å‚æ•°çš„é»˜è®¤åˆå§‹å€¼ -XX: +PrintFlagsFinal æŸ¥çœ‹æ‰€æœ‰çš„å‚æ•°çš„æœ€ç»ˆå€¼ï¼ˆå¯èƒ½ä¼šå­˜åœ¨ä¿®æ”¹ï¼Œä¸å†æ˜¯åˆå§‹å€¼) jps æŸ¥çœ‹å½“å‰è¿è¡Œä¸­çš„è¿›ç¨‹ jinfo -flag å‚æ•°å è¿›ç¨‹id å½“å‰è¿›ç¨‹ä¸­å‚æ•°å€¼ -Xms åˆå§‹é›„ç©ºå‘å†…å­˜ ç‰©ç†å†…å­˜çš„1/64 -Xmx :æœ€å¤§é›„ç©ºé—´å†…å­˜ ç‰©ç†å†…å­˜çš„1/4 -Xmn :è®¾ç½®æ–°ç”Ÿä»£çš„å¤§å°ã€‚ï¼ˆåˆå§‹å€¼åŠæœ€å¤§å€¼ï¼‰ -XX: NewRatio :é…ç½®æ–°ç”Ÿä»£ä¸è€å¹´ä»£åœ¨å †ç»“æ„çš„å æ¯” æ–°è€æ¯”ï¼š1:2 -XX: SurvivorRatio :è®¾ç½®æ–°ç”Ÿä»£ä¸­Edenå’ŒS0/S1ç©ºé—´æ¯”ä¾‹ 8 -XX: MaxTenuringThreshold :è®¾ç½®æ–°ç”Ÿä»£åƒæ‰±çš„æœ€å¤§å¹´é¾„ -XX: +PrintGCdetails :è¾“å‡ºè¯¦ç»†GCå¤„ç†æ—¥å¿— ğŸŒ -XX: +PrintGC ğŸŒ - verbose:GC :æ‰“å°ç­’è¦ä¿¡æ¯ -XX: HandlePromotionFailure :æ˜¯å¦è®¾ç½®ç©ºé—®åˆ†é…æ‹…ä¿ -XX: Doescapeanalysis æ˜¾å¼å¼€å¯é€ƒé€¸åˆ†æ JDK 6u23åé»˜è®¤å¼€å¯ -XX: Printescapeanalysis æŸ¥çœ‹é€ƒé€¸åˆ†æçš„ç­›é€‰ç»“æœ -XX:+EliminateAllocations :å¼€å¯æ ‡é‡æ›¿æ¢ï¼Œå…è®¸å°†å¯¹è±¡æ‰“æ•£åˆ†é…åœ¨æ ˆä¸Šã€‚ é»˜è®¤æ‰“å¼€ æ–¹æ³•åŒº é€‰é¡¹å é€‰é¡¹ä½œç”¨ é»˜è®¤å€¼ å¤‡æ³¨ åƒåœ¾å›æ”¶å™¨ é€‰é¡¹å é€‰é¡¹ä½œç”¨ é»˜è®¤å€¼ å¤‡æ³¨ ä¸€ã€JVMä¸JAVAä½“ç³»ç»“æ„ 1.JAVAä¸JVM Javaå¤§äº‹ä»¶ 1990å¹´ï¼Œåœ¨sunå…¬å¸ä¸­ï¼Œç”±Patrick naughtonã€mikesheridanä»¥åŠjames Goslingé¢†å¯¼çš„å°ç»„Green Teamï¼Œå¼€å‘å‡ºæ–°çš„ç¨‹åºè¯­è¨€ï¼Œå‘½åä¸ºOAKï¼ŒåæœŸæ›´åä¸ºJava 1995å¹´ï¼Œsunæ­£å¼å‘å¸ƒJavaå’ŒhotJAVAäº§å“ï¼ŒJavaé¦–æ¬¡å…¬å¼€äº®ç›¸ã€‚ 1996å¹´1æœˆ23æ—¥sun Microsystemså‘å¸ƒäº†JDK1.0. 1998å¹´ï¼ŒJDK1.2ç‰ˆæœ¬å‘å¸ƒã€‚åŒæ—¶ï¼Œsunå‘å¸ƒäº†JSP/Servletã€EJBè§„èŒƒï¼Œä»¥åŠå°†Javaåˆ†æˆäº†J2EEã€J2SEå’ŒJ2MEã€‚è¿™è¡¨æ˜Javaå¼€å§‹å‘ä¼ä¸šã€æ¡Œé¢åº”ç”¨å’Œç§»åŠ¨è®¾å¤‡åº”ç”¨3å¤§é¢†åŸŸæŒºè¿›ã€‚ 2000å¹´ï¼ŒJDK1.3å‘å¸ƒï¼ŒJava HotSpot Virtual Machineæ­£å¼å‘å¸ƒï¼Œæˆä¸ºJavaé»˜è®¤çš„è™šæ‹Ÿæœºã€‚ 2002å¹´ï¼ŒJDK 1.4å‘å¸ƒï¼Œå¤è€çš„classicè™šæ‹Ÿæœºé€€å‡ºå†å²èˆå°ã€‚ 2003å¹´åº•ï¼ŒJavaå¹³å°çš„scalaæ­£å¼å‘å¸ƒï¼ŒåŒå¹´Groovyä¹ŸåŠ å…¥äº†Javaé˜µè¥ã€‚ 2004å¹´ï¼ŒJDK1.5å‘å¸ƒï¼ŒåŒæ—¶JDK1.5æ”¹åä¸ºJavaSE5.0. 2006å¹´ï¼ŒJDK 6å‘å¸ƒï¼ŒåŒå¹´Javaå¼€æºå¹¶å»ºç«‹äº†openJDKï¼Œé¡ºç†æˆç« ï¼ŒHotspotè™šæ‹Ÿæœºæˆä¸ºäº†OpenJDKä¸­é»˜è®¤çš„è™šæ‹Ÿæœºã€‚ 2007å¹´ï¼ŒJavaå¹³å°è¿æ¥äº†æ–°ä¼™ä¼´Clojureã€‚ 2008å¹´ï¼ŒOracleæ”¶è´­äº†BEAï¼Œå¾—åˆ°äº†JRockitè™šæ‹Ÿæœºã€‚ 2009å¹´ï¼ŒTwitterå®£å¸ƒå°†åå°å¤§éƒ¨åˆ†ç¨‹åºä»rubyè¿ç§»åˆ°Scalaï¼Œè¿™æ˜¯Javaå¹³å°çš„æœ‰ä¸€æ¬¡å¤§è§„æ¨¡åº”ç”¨ã€‚ 2010å¹´ï¼ŒOracleæ”¶è´­äº†sunï¼Œè·å¾—Javaå•†æ ‡å’Œæœ€å…·ä»·å€¼çš„hotspotè™šæ‹Ÿæœºã€‚æ­¤æ—¶Oracleæ‹¥æœ‰å¸‚åœºå ç”¨ç‡æœ€é«˜çš„ä¸¤æ¬¾è™šæ‹Ÿæœºhotspotå’ŒJRockitï¼Œå¹¶ä¸”è®¡åˆ’æœªæ¥è¿›è¡Œæ•´åˆï¼šHotRockitã€‚ 2011å¹´ï¼ŒJDK7å‘å¸ƒï¼Œåœ¨JDKï¼‘.7ï½•4ä¸­ï¼Œæ­£å¼å¯ç”¨äº†æ–°çš„åƒåœ¾å›æ”¶å™¨G1. 2017å¹´ï¼ŒJDK9å‘å¸ƒï¼Œå°†G1è®¾ç½®ä¸ºé»˜è®¤GCï¼Œæ›¿ä»£CMSã€‚ 2017åŒå¹´ï¼ŒIBMçš„J9å¼€æºï¼Œå½¢æˆäº†ç°åœ¨çš„open J9ç¤¾åŒºã€‚ 2018å¹´ï¼ŒAndroidçš„Javaä¾µæƒæ¡ˆåˆ¤å†³ï¼ŒGoogleå…¬å¸èµ”å¿Oracleæ€»è®¡88äº¿ç¾å…ƒã€‚ 2018åŒå¹´ï¼ŒOracleå®£å¸ƒJavaEEæˆä¸ºå†å²åè¯ï¼ŒJDBCã€JMSã€Servletèµ ä¸EclipseåŸºé‡‘ä¼šã€‚ 2018åŒå¹´ï¼ŒJDK11å‘å¸ƒï¼ŒLTSç‰ˆæœ¬çš„JDKï¼Œå‘å¸ƒé©å‘½æ€§çš„ZGCï¼Œè°ƒæ•´JDKæˆæƒè®¸å¯ã€‚ 2019å¹´ï¼ŒJDK12å‘å¸ƒï¼ŒåŠ å…¥RedHaté¢†å¯¼å¼€å‘çš„shenandoah GCã€‚ åœ¨JDK11ä¹‹å‰ï¼ŒOracleJDKè¿˜ä¼šå­˜åœ¨ä¸€äº›openJDKä¸­æ²¡æœ‰çš„ã€é—­æºçš„åŠŸèƒ½ã€‚ä½†åœ¨JDK11ä¸­ï¼ŒopenJDKå’ŒOracleJDKä»£ç å®è´¨ä¸Šå·²ç»è¾¾åˆ°å®Œå…¨ä¸€è‡´çš„ç¨‹åº¦ã€‚ JVMä»‹ç» â€‹ æ‰€è°“è™šæ‹Ÿæœº(Virtual Machine)ï¼Œå°±æ˜¯ä¸€å°è™šæ‹Ÿçš„è®¡ç®—æœºã€‚å®ƒæ˜¯ä¸€æ¬¾è½¯ä»¶ï¼Œç”¨æ¥æ‰§è¡Œä¸€ç³»åˆ—è™šæ‹Ÿè®¡ç®—æœºæŒ‡ä»¤ã€‚å¤§ä½“ä¸Šï¼Œè™šæ‹Ÿæœºå¯ä»¥åˆ†ä¸ºç³»ç»Ÿè™šæ‹Ÿæœºå’Œç¨‹åºè™šæ‹Ÿæœºã€‚å¤§åé¼é¼çš„Visual Box,VMwareå°±å±äºç³»ç»Ÿè™šæ‹Ÿæœºï¼Œå®ƒä»¬å®Œå…¨æ˜¯å¯¹ç‰©ç†è®¡ç®—æœºçš„ä»¿çœŸï¼Œæä¾›äº†ä¸€ä¸ªå¯è¿è¡Œå®Œæ•´æ“ä½œç³»ç»Ÿçš„è½¯ä»¶å¹³å°ã€‚ç¨‹åºè™šæ‹Ÿæœºçš„å…¸å‹ä»£è¡¨å°±æ˜¯Javaè™šæ‹Ÿæœºï¼Œå®ƒä¸“é—¨ä¸ºæ‰§è¡Œå•ä¸ªè®¡ç®—æœºç¨‹åºè€Œè®¾è®¡ï¼Œåœ¨Javaè™šæ‹Ÿæœºä¸­æ‰§è¡Œçš„æŒ‡ä»¤æˆ‘ä»¬ç§°ä¸ºJavaå­—èŠ‚ç æŒ‡ä»¤ã€‚æ— è®ºæ˜¯ç³»ç»Ÿè™šæ‹Ÿæœºè¿˜æ˜¯ç¨‹åºè™šæ‹Ÿæœºï¼Œåœ¨ä¸Šé¢è¿è¡Œçš„è½¯ä»¶éƒ½è¢«é™åˆ¶äºè™šæ‹Ÿæœºæä¾›çš„èµ„æºä¸­ã€‚ â€‹ Javaè™šæ‹Ÿæœºæ˜¯ä¸€å°æ‰§è¡ŒJavaå­—èŠ‚ç çš„è™šæ‹Ÿè®¡ç®—æœºï¼Œå®ƒæ‹¥æœ‰ç‹¬ç«‹çš„è¿è¡Œæœºåˆ¶,å…¶è¿è¡Œçš„Javaå­—èŠ‚ç ä¹Ÿæœªå¿…ç”±Javaè¯­è¨€ç¼–è¯‘è€Œæˆã€‚JVMå¹³å°çš„å„ç§è¯­è¨€å¯ä»¥å…±äº«Javaè™šæ‹Ÿæœºå¸¦æ¥çš„è·¨å¹³å°æ€§ã€ä¼˜ç§€çš„åƒåœ¾å›å™¨ï¼Œä»¥åŠå¯é çš„å³æ—¶ç¼–è¯‘å™¨ã€‚JavaæŠ€æœ¯çš„æ ¸å¿ƒå°±æ˜¯Javaè™šæ‹Ÿæœºï¼ˆJVMï¼ŒJava Virtual Machine) ,å› ä¸ºæ‰€æœ‰çš„Javaç¨‹åºéƒ½è¿è¡Œåœ¨Javaè™šæ‹Ÿæœºå†…éƒ¨ã€‚ **ä½œç”¨ï¼š**Javaè™šæ‹Ÿæœºå°±æ˜¯äºŒè¿›åˆ¶å­—èŠ‚ç çš„è¿è¡Œç¯å¢ƒï¼Œè´Ÿè´£è£…è½½å­—èŠ‚ç åˆ°å…¶å†…éƒ¨ï¼Œè§£é‡Š/ç¼–è¯‘ä¸ºå¯¹åº”å¹³å°ä¸Šçš„æœºå™¨æŒ‡ä»¤æ‰§è¡Œã€‚æ¯ä¸€æ¡JavaæŒ‡ä»¤ï¼ŒJavaè™šæ‹Ÿæœºè§„æ±œç”²éƒ½æœ‰è¯¦ç»†å®šä¹‰ï¼Œå¦‚æ€ä¹ˆå–æ“ä½œæ•°ï¼Œæ€ä¹ˆå¤„ç†æ“ä½œæ•°ï¼Œå¤„ç†ç»“æœæ”¾åœ¨å“ªé‡Œã€‚ **ç‰¹ç‚¹ï¼š**ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œï¼›è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼›è‡ªåŠ¨åƒåœ¾å›æ”¶åŠŸèƒ½ ä½ç½®ï¼š JVMæ•´ä½“ç»“æ„ Javaä»£ç æ‰§è¡Œæµç¨‹ â€‹ JVMæ¶æ„æ¨¡å‹ Javaç¼–è¯‘å™¨è¾“å…¥çš„æŒ‡ä»¤æµåŸºæœ¬ä¸Šæ˜¯ä¸€ç§åŸºäºæ ˆçš„æŒ‡ä»¤é›†æ¶æ„ï¼Œå¦å¤–ä¸€ç§æŒ‡ä»¤é›†æ¶æ„åˆ™æ˜¯åŸºäºå¯„å­˜å™¨çš„æŒ‡ä»¤é›†æ¶æ„ã€‚ åŒºåˆ«: Â·åŸºäºæ ˆå¼æ¶æ„çš„ç‰¹ç‚¹ è®¾è®¡å’Œå®ç°æ›´ç®€å•ï¼Œé€‚ç”¨äºèµ„æºå—é™çš„ç³»ç»Ÿ; é¿å¼€äº†å¯„å­˜å™¨çš„åˆ†é…éš¾é¢˜:ä½¿ç”¨é›¶åœ°å€æŒ‡ä»¤æ–¹å¼åˆ†é…ã€‚ æŒ‡ä»¤æµä¸­çš„æŒ‡ä»¤å¤§éƒ¨åˆ†æ˜¯é›¶åœ°å€æŒ‡ä»¤ï¼Œå…¶æ‰§è¡Œè¿‡ç¨‹ä¾èµ–äºæ“ä½œæ ˆã€‚æŒ‡ä»¤é›†æ›´å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®ç°ã€‚ ä¸éœ€è¦ç¡¬ä»¶æ”¯æŒï¼Œå¯ç§»æ¤æ€§æ›´å¥½ï¼Œæ›´å¥½å®ç°è·¨å¹³å° åŸºäºå¯„å­˜å™¨æ¶æ„çš„ç‰¹ç‚¹ å…¸å‹çš„åº”ç”¨æ˜¯x86çš„äºŒè¿›åˆ¶æŒ‡ä»¤é›†:æ¯”å¦‚ä¼ ç»Ÿçš„PCä»¥åŠAndroidçš„Davlikè™šæ‹Ÿæœºã€‚ æŒ‡ä»¤é›†æ¶æ„åˆ™å®Œå…¨ä¾èµ–ç¡¬ä»¶,å¯ç§»æ¤æ€§å·® æ€§èƒ½ä¼˜ç§€å’Œæ‰§è¡Œæ›´é«˜æ•ˆ; èŠ±è´¹æ›´å°‘çš„æŒ‡ä»¤å»å®Œæˆä¸€é¡¹æ“ä½œã€‚ åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒåŸºäºå¯„å­˜å™¨æ¶æ„çš„æŒ‡ä»¤é›†å¾€å¾€éƒ½ä»¥ä¸€åœ°å€æŒ‡ä»¤ã€äºŒåœ°å€æŒ‡ä»¤å’Œä¸‰åœ°å€æŒ‡ä»¤ä¸ºä¸»ï¼Œè€ŒåŸºäºæ ˆå¼æ¶æ„çš„æŒ‡ä»¤é›†å´æ˜¯ä»¥é›¶åœ°å€æŒ‡ä»¤ä¸ºä¸»ã€‚ æ€»ç»“: ç”±äºè·¨å¹³å°æ€§çš„è®¾è®¡ï¼ŒJavaçš„æŒ‡ä»¤éƒ½æ˜¯æ ¹æ®æ ˆæ¥è®¾è®¡çš„ã€‚ä¸åŒå¹³å°CPUæ¶æ„ä¸åŒï¼Œæ‰€ä»¥ä¸èƒ½è®¾è®¡ä¸ºåŸºäºå¯„å­˜å™¨çš„ã€‚ä¼˜ç‚¹æ˜¯è·¨å¹³å°ï¼ŒæŒ‡ä»¤é›†å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®ç°ï¼Œç¼ºç‚¹æ˜¯æ€§èƒ½ä¸‹é™ï¼Œå®ç°åŒæ ·çš„åŠŸèƒ½éœ€è¦æ›´å¤šçš„æŒ‡ä»¤ã€‚æ—¶è‡³ä»Šæ—¥ï¼Œå°½ç®¡åµŒå…¥å¼å¹³å°å·²ç»ä¸æ˜¯Javaç¨‹åºçš„ä¸»æµè¿è¡Œå¹³å°äº†ï¼ˆå‡†ç¡®çš„æ¥è¯´HotSpotVMçš„å®¿ä¸»ç¯å¢ƒå·²ç»ä¸å±€é™äºåµŒå…¥å¼å¹³å°äº†)ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸å°†æ¶æ„æ›´æ¢ä¸ºåŸºäºå¯„å­˜å™¨çš„æ¶æ„å‘¢? æ ˆ: è·¨å¹³å°æ€§ã€æŒ‡ä»¤é›†å°ã€æŒ‡ä»¤å¤š;æ‰§è¡Œæ€§èƒ½æ¯”å¯„å­˜å™¨å·® JVMç”Ÿå‘½å‘¨æœŸ å¯åŠ¨ Javaè™šæ‹Ÿæœºçš„å¯åŠ¨æ˜¯é€šè¿‡å¼•å¯¼ç±»åŠ è½½å™¨(bootstrap class loader)åˆ›å»ºä¸€ä¸ªåˆå§‹ç±»(initial class)æ¥å®Œæˆçš„ï¼Œè¿™ä¸ªç±»æ˜¯ç”±è™šæ‹Ÿæœºçš„å…·ä½“å®ç°æŒ‡å®šçš„ æ‰§è¡Œ ä¸€ä¸ªè¿è¡Œä¸­çš„Javaè™šæ‹Ÿæœºæœ‰ç€ä¸€ä¸ªæ¸…æ™°çš„ä»»åŠ¡:æ‰§è¡ŒJavaç¨‹åºã€‚ ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶ä»–æ‰è¿è¡Œï¼Œç¨‹åºç»“æŸæ—¶ä»–å°±åœæ­¢ã€‚ æ‰§è¡Œä¸€ä¸ªæ‰€è°“çš„Javaç¨‹åºçš„æ—¶å€™ï¼ŒçœŸçœŸæ­£æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªå«åšJavaè™šæ‹Ÿæœºçš„è¿›ç¨‹ã€‚ é€€å‡º æœ‰å¦‚ä¸‹çš„å‡ ç§æƒ…å†µ:ã€‚ç¨‹åºæ­£å¸¸æ‰§è¡Œç»“æŸ Â·ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°äº†å¼‚å¸¸æˆ–é”™è¯¯è€Œå¼‚å¸¸ç»ˆæ­¢Â·ç”±äºæ“ä½œç³»ç»Ÿå‡ºç°é”™è¯¯è€Œå¯¼è‡´Javaè™šæ‹Ÿæœºè¿›ç¨‹ç»ˆæ­¢ Â·æŸçº¿ç¨‹è°ƒç”¨Runtimeç±»æˆ–systemç±»çš„exitæ–¹æ³•ï¼Œæˆ–Runtimeç±»çš„haltæ–¹æ³•ï¼Œå¹¶ä¸”Javaå®‰å…¨ç®¡ç†å™¨ä¹Ÿå…è®¸è¿™æ¬¡exitæˆ–haltæ“ä½œã€‚ Â·é™¤æ­¤ä¹‹å¤–ï¼ŒJNI ( Java Native Interface)è§„èŒƒæè¿°äº†ç”¨JNI Invocation APIæ¥åŠ è½½æˆ–å¸è½½Javaè™šæ‹Ÿæœºæ—¶ï¼ŒJavaè™šæ‹Ÿæœºçš„é€€å‡ºæƒ…å†µã€‚ JVMå‘å±•å†ç¨‹ SUN Classic VM Â·æ—©åœ¨1996å¹´Java1.0ç‰ˆæœ¬çš„æ—¶å€™ï¼Œsunå…¬å¸å‘å¸ƒäº†ä¸€æ¬¾åä¸ºSun Classic VMçš„Javaè™šæ‹Ÿæœºï¼Œå®ƒåŒæ—¶ä¹Ÿæ˜¯ä¸–ç•Œä¸Šç¬¬ä¸€æ¬¾å•†ç”¨Javaè™šæ‹Ÿæœºï¼ŒJDK1.4æ—¶å®Œå…¨è¢«æ·˜æ±°ã€‚ Â·è¿™æ¬¾è™šæ‹Ÿæœºå†…éƒ¨åªæä¾›è§£é‡Šå™¨ã€‚ Â·å¦‚æœä½¿ç”¨JITç¼–è¯‘å™¨ï¼Œå°±éœ€è¦è¿›è¡Œå¤–æŒ‚ã€‚ä½†æ˜¯ä¸€æ—¦ä½¿ç”¨äº†JITç¼–è¯‘å™¨JITå°±ä¼šæ¥ç®¡è™šæ‹Ÿæœºçš„æ‰§è¡Œç³»ç»Ÿã€‚è§£é‡Šå™¨å°±ä¸å†å·¥ä½œã€‚è§£é‡Šå™¨å’Œç¼–è¯‘å™¨ä¸èƒ½é…åˆå·¥ä½œã€‚ Â·ç°åœ¨hotspotå†…ç½®äº†æ­¤è™šæ‹Ÿæœºã€‚ Exact VM Â·ä¸ºäº†è§£å†³ä¸Šä¸€ä¸ªè™šæ‹Ÿæœºé—®é¢˜ï¼Œjdk1.2æ—¶ï¼Œsunæä¾›äº†æ­¤è™šæ‹Ÿæœºã€‚ Exact Memory Management:å‡†ç¡®å¼å†…å­˜ç®¡ç† Â·ä¹Ÿå¯ä»¥å«Non-conservative/Accurate Memory Managementï¼šè™šæ‹Ÿæœºå¯ä»¥çŸ¥é“å†…å­˜ä¸­æŸä¸ªä½ç½®çš„æ•°æ®å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ã€‚ å…·å¤‡ç°ä»£é«˜æ€§èƒ½è™šæ‹Ÿæœºçš„é›å½¢ Â·çƒ­ç‚¹æ¢æµ‹ Â·ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨æ··åˆå·¥ä½œæ¨¡å¼I åªåœ¨solariså¹³å°çŸ­æš‚ä½¿ç”¨ï¼Œå…¶ä»–å¹³å°ä¸Šè¿˜æ˜¯classic vm Â·è‹±é›„æ°”çŸ­ï¼Œç»ˆè¢«Hotspotè™šæ‹Ÿæœºæ›¿æ¢ SUNå…¬å¸çš„ HotSpot VM HotSpotå†å² Â·æœ€åˆç”±ä¸€å®¶åä¸ºâ€œLongview Technologies&quot;çš„å°å…¬å¸è®¾è®¡1997å¹´ï¼Œæ­¤å…¬å¸è¢«sunæ”¶è´­;2009å¹´ï¼Œsunå…¬å¸è¢«ç”²éª¨æ–‡æ”¶è´­ã€‚ Â·JDK1.3æ—¶ï¼ŒHotSpot VMæˆä¸ºé»˜è®¤è™šæ‹Ÿæœº Â·ç›®å‰Hotspotå æœ‰ç»å¯¹çš„å¸‚åœºåœ°ä½ï¼Œç§°éœ¸æ­¦æ—ã€‚ ä¸ç®¡æ˜¯ç°åœ¨ä»åœ¨å¹¿æ³›ä½¿ç”¨çš„JDK6ï¼Œè¿˜æ˜¯ä½¿ç”¨æ¯”ä¾‹è¾ƒå¤šçš„JDK8ä¸­ï¼Œé»˜è®¤çš„è™šæ‹Ÿæœºéƒ½æ˜¯HotSpot sun/ oracle JDK å’Œ OpenJDKçš„é»˜è®¤è™šæ‹Ÿæœº å› æ­¤æœ¬è¯¾ç¨‹ä¸­é»˜è®¤ä»‹ç»çš„è™šæ‹Ÿæœºéƒ½æ˜¯HotSpotï¼Œç›¸å…³æœºåˆ¶ä¹Ÿä¸»è¦æ˜¯æŒ‡HotSpotçš„GCæœºåˆ¶ã€‚(æ¯”å¦‚å…¶ä»–ä¸¤ä¸ªå•†ç”¨è™šæ‹Ÿæœºéƒ½æ²¡æœ‰æ–¹æ³•åŒºçš„æ¦‚å¿µ) Â·ä»æœåŠ¡å™¨ã€æ¡Œé¢åˆ°ç§»åŠ¨ç«¯ã€åµŒå…¥å¼éƒ½æœ‰åº”ç”¨ã€‚ Â·åç§°ä¸­çš„HotSpotæŒ‡çš„å°±æ˜¯å®ƒçš„çƒ­ç‚¹ä»£ç æ¢æµ‹æŠ€æœ¯ã€‚ é€šè¿‡è®¡æ•°å™¨æ‰¾åˆ°æœ€å…·ç¼–è¯‘ä»·å€¼ä»£ç ï¼Œè§¦å‘å³æ—¶ç¼–è¯‘æˆ–æ ˆä¸Šæ›¿æ¢ é€šè¿‡ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨ååŒå·¥ä½œï¼Œåœ¨æœ€ä¼˜åŒ–çš„ç¨‹åºå“åº”æ—¶é—´ä¸æœ€ä½³æ‰§è¡Œæ€§èƒ½ä¸­å–å¾—å¹³è¡¡ BEA çš„JRockit Â·ä¸“æ³¨äºæœåŠ¡å™¨ç«¯åº”ç”¨ å®ƒå¯ä»¥ä¸å¤ªå…³æ³¨ç¨‹åºå¯åŠ¨é€Ÿåº¦ï¼Œå› æ­¤JRockitå†…éƒ¨ä¸åŒ…å«è§£æå™¨å®ç°ï¼Œå…¨éƒ¨ä»£ç éƒ½é å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åæ‰§è¡Œã€‚ Â·å¤§é‡çš„è¡Œä¸šåŸºå‡†æµ‹è¯•æ˜¾ç¤ºï¼ŒJRockit JVMæ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„JVMã€‚ ä½¿ç”¨JRockitäº§å“ï¼Œå®¢æˆ·å·²ç»ä½“éªŒåˆ°äº†æ˜¾è‘—çš„æ€§èƒ½æé«˜ï¼ˆä¸€äº›è¶…è¿‡äº†70% ï¼‰å’Œ ç¡¬ä»¶æˆæœ¬çš„å‡å°‘(è¾¾50%ï¼‰ã€‚ Â·ä¼˜åŠ¿:å…¨é¢çš„Javaè¿è¡Œæ—¶è§£å†³æ–¹æ¡ˆç»„åˆ JRockité¢å‘å»¶è¿Ÿæ•æ„Ÿå‹åº”ç”¨çš„è§£å†³æ–¹æ¡ˆJRockit Real Timeæä¾›ä»¥æ¯«ç§’æˆ– å¾®ç§’çº§çš„JVMå“åº”æ—¶é—´ï¼Œé€‚åˆè´¢åŠ¡ã€å†›äº‹æŒ‡æŒ¥ã€ç”µä¿¡ç½‘ç»œçš„éœ€è¦ MissionControlæœåŠ¡å¥—ä»¶ï¼Œå®ƒæ˜¯ä¸€ç»„ä»¥æä½çš„å¼€é”€æ¥ç›‘æ§ã€ç®¡ç†å’Œåˆ†æç”Ÿäº§ ç¯å¢ƒä¸­çš„åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚ 2008å¹´ï¼ŒBEAè¢«oracleæ”¶è´­ã€‚ oracleè¡¨è¾¾äº†æ•´åˆä¸¤å¤§ä¼˜ç§€è™šæ‹Ÿæœºçš„å·¥ä½œï¼Œå¤§è‡´åœ¨JDK 8ä¸­å®Œæˆã€‚æ•´åˆçš„æ–¹å¼æ˜¯åœ¨HotSpotçš„åŸºç¡€ä¸Šï¼Œç§»æ¤JRockitçš„ä¼˜ç§€ç‰¹æ€§ã€‚ Â·é«˜æ–¯æ—:ç›®å‰å°±èŒäºè°·æ­Œï¼Œç ”ç©¶äººå·¥æ™ºèƒ½å’Œæ°´ä¸‹æœºå™¨äºº IBM çš„J9 å…¨ç§°:IBM Technology for Java virtual Machineï¼Œç®€ç§°IT4Jï¼Œå†…éƒ¨ä»£å·:J9 Â·å¸‚åœºå®šä½ä¸HotSpotæ¥è¿‘ï¼ŒæœåŠ¡å™¨ç«¯ã€æ¡Œé¢åº”ç”¨ã€åµŒå…¥å¼ç­‰å¤šç”¨é€”VMã€‚ Â·å¹¿æ³›ç”¨äºIBMçš„å„ç§Javaäº§å“ã€‚ Â·ç›®å‰ï¼Œæœ‰å½±å“åŠ›çš„ä¸‰å¤§å•†ç”¨è™šæ‹Ÿæœºä¹‹ä¸€ï¼Œä¹Ÿå·ç§°æ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„Javaè™šæ‹Ÿæœºã€‚ Â·2017å¹´å·¦å³ï¼ŒIBMå‘å¸ƒäº†å¼€æºJ9 VMï¼Œå‘½åä¸ºopenJ9ï¼Œäº¤ç»™EclipseåŸºé‡‘ä¼šç®¡ç†ï¼Œä¹Ÿç§°ä¸ºEclipse OpenJ9 KVMå’ŒcDC/CL.DC Hotspot oracleåœ¨Java MEäº§å“çº¿ä¸Šçš„ä¸¤æ¬¾è™šæ‹Ÿæœºä¸º:CDC/CLDC HotSpot Implementation VM KVM (Kilobyteï¼‰æ˜¯CLDC-HIæ—©æœŸäº§å“ Â·ç›®å‰ç§»åŠ¨é¢†åŸŸåœ°ä½å°´å°¬ï¼Œæ™ºèƒ½æ‰‹æœºè¢«Androidå’ŒioSäºŒåˆ†å¤©ä¸‹ã€‚ .KVMç®€å•ã€è½»é‡ã€é«˜åº¦å¯ç§»æ¤ï¼Œé¢å‘æ›´ä½ç«¯çš„è®¾å¤‡ä¸Šè¿˜ç»´æŒè‡ªå·±çš„ä¸€ç‰‡å¸‚åœº æ™ºèƒ½æ§åˆ¶å™¨ã€ä¼ æ„Ÿå™¨I è€äººæ‰‹æœºã€ç»æµæ¬ å‘è¾¾åœ°åŒºçš„åŠŸèƒ½æ‰‹æœº .æ‰€æœ‰çš„è™šæ‹Ÿæœºçš„åŸåˆ™:ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œã€‚ Azul VM Â·å‰é¢ä¸‰å¤§â€œé«˜æ€§èƒ½Javaè™šæ‹Ÿæœºâ€ä½¿ç”¨åœ¨é€šç”¨ç¡¬ä»¶å¹³å°ä¸Š Â·è¿™é‡ŒAzul VMå’ŒBEA Liquid VMæ˜¯ä¸ç‰¹å®šç¡¬ä»¶å¹³å°ç»‘å®šã€è½¯ç¡¬ä»¶é…åˆçš„ä¸“æœ‰è™šæ‹Ÿæœº é«˜æ€§èƒ½Javaè™šæ‹Ÿæœºä¸­çš„æˆ˜æ–—æœºã€‚ Azul VMæ˜¯Azul systemså…¬å¸åœ¨HotSpotåŸºç¡€ä¸Šè¿›è¡Œå¤§é‡æ”¹è¿›ï¼Œè¿è¡ŒäºAzul systemså…¬å¸çš„ä¸“æœ‰ç¡¬ä»¶vegaç³»ç»Ÿä¸Šçš„Javaè™šæ‹Ÿæœºã€‚ Â·æ¯ä¸ªAzul VMå®ä¾‹éƒ½å¯ä»¥ç®¡ç†è‡³å°‘æ•°åä¸ªCPUå’Œæ•°ç™¾GBå†…å­˜çš„ç¡¬ä»¶èµ„æºï¼Œå¹¶æä¾›åœ¨å·¨å¤§å†…å­˜èŒƒå›´å†…å®ç°å¯æ§çš„GCæ—¶é—´çš„åƒåœ¾æ”¶é›†å™¨ã€ä¸“æœ‰ç¡¬ä»¶ä¼˜åŒ–çš„çº¿ç¨‹è°ƒåº¦ç­‰ä¼˜ç§€ç‰¹æ€§ã€‚ 2010å¹´ï¼ŒAzul systemså…¬å¸å¼€å§‹ä»ç¡¬ä»¶è½¬å‘è½¯ä»¶ï¼Œå‘å¸ƒäº†è‡ªå·±çš„ZingJVMï¼Œå¯ä»¥åœ¨é€šç”¨x86å¹³å°ä¸Šæä¾›æ¥è¿‘äºVegaç³»ç»Ÿçš„ç‰¹æ€§ã€‚ Liquid VM Â·é«˜æ€§èƒ½Javaè™šæ‹Ÿæœºä¸­çš„æˆ˜æ–—æœºã€‚ Â·BEAå…¬å¸å¼€å‘çš„ï¼Œç›´æ¥è¿è¡Œåœ¨è‡ªå®¶Hypervisorç³»ç»Ÿä¸Š Â·Liquid VMå³æ˜¯ç°åœ¨çš„JRockit VE(Virtual Editionï¼‰ ,LiquidVMä¸éœ€è¦æ“ä½œç³»ç»Ÿçš„æ”¯æŒï¼Œæˆ–è€…è¯´å®ƒè‡ªå·±æœ¬èº«å®ç°äº†ä¸€ä¸ªä¸“ç”¨æ“ä½œç³»ç»Ÿçš„å¿…è¦åŠŸèƒ½ï¼Œå¦‚çº¿ç¨‹è°ƒåº¦ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œæ”¯æŒç­‰ã€‚ Â·éšç€JRockitè™šæ‹Ÿæœºç»ˆæ­¢å¼€å‘ï¼ŒLiquid VMé¡¹ç›®ä¹Ÿåœæ­¢äº†ã€‚ Apache Harmony Apacheä¹Ÿæ›¾ç»æ¨å‡ºè¿‡ä¸JDK 1.5å’ŒJDK 1.6å…¼å®¹çš„Javaè¿è¡Œå¹³å°Apache Harmonyã€‚ Â·å®ƒæ˜¯IBMå’ŒIntelè”åˆå¼€å‘çš„å¼€æºJVMï¼Œå—åˆ°åŒæ ·å¼€æºçš„openJDKçš„å‹åˆ¶ï¼Œ sunåšå†³ä¸è®©Harmonyè·å¾—JCPè®¤è¯ï¼Œæœ€ç»ˆäº2011å¹´é€€å½¹ï¼ŒIBMè½¬è€Œå‚ä¸OpenJDK Â·è™½ç„¶ç›®å‰å¹¶æ²¡æœ‰Apache Harmonyè¢«å¤§è§„æ¨¡å•†ç”¨çš„æ¡ˆä¾‹ï¼Œä½†æ˜¯å®ƒçš„Java ç±»åº“ä»£ç å¸çº³è¿›äº†Android SDKã€‚ Microsoft JVM Â·å¾®è½¯ä¸ºäº†åœ¨IE3æµè§ˆå™¨ä¸­æ”¯æŒJava Appletsï¼Œå¼€å‘äº†Microsoft JVMã€‚Â·åªèƒ½åœ¨windowå¹³å°ä¸‹è¿è¡Œã€‚ä½†ç¡®æ˜¯å½“æ—¶windowsä¸‹æ€§èƒ½æœ€å¥½çš„Java VM.. 1997å¹´ï¼Œsunä»¥ä¾µçŠ¯å•†æ ‡ã€ä¸æ­£å½“ç«äº‰ç½ªåæŒ‡æ§å¾®è½¯æˆåŠŸï¼Œèµ”äº†sunå¾ˆå¤šé’±ã€‚å¾®è½¯åœ¨windowsXP SP3ä¸­æŠ¹æ‰äº†å…¶VMã€‚ç°åœ¨windowsä¸Šå®‰è£…çš„jdkéƒ½æ˜¯HotSpotã€‚ TaobaoJVM Â·ç”±AliJVMå›¢é˜Ÿå‘å¸ƒã€‚é˜¿é‡Œï¼Œå›½å†…ä½¿ç”¨Javaæœ€å¼ºå¤§çš„å…¬å¸ï¼Œè¦†ç›–äº‘è®¡ç®—ã€é‡‘é›·ç”Ÿåˆ‡ä¸€ç”µå•†ç­‰ä¼—å¤šé¢†åŸŸï¼Œéœ€è¦è§£å†³é«˜å¹¶å‘ã€é«˜å¯ç”¨ã€åˆ†å¸ƒå¼çš„å¤åˆé—®é¢˜ã€‚æœ‰å¤§é‡çš„å¼€æºå¹¿çš„ã€‚ Â·åŸºäºopenJDKå¼€å‘äº†è‡ªå·±çš„å®šåˆ¶ç‰ˆæœ¬AlibabaJDKï¼Œç®€ç§°AJDKã€‚æ˜¯æ•´ä¸ªé˜¿é‡ŒJavaä½“ç³»çš„åŸºçŸ³ã€‚ Â·åŸºäºopenJDK HotSpot VM å‘å¸ƒçš„å›½å†…ç¬¬ä¸€ä¸ªä¼˜åŒ–ã€æ·±åº¦å®šåˆ¶ä¸”å¼€æºçš„é«˜æ€§èƒ½æœåŠ¡å™¨ç‰ˆJavaè™šæ‹Ÿæœºã€‚ åˆ›æ–°çš„GCIH (GC invisible heap ï¼‰æŠ€æœ¯å®ç°äº†off-heap ï¼Œå³å°†ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„Javaå¯¹è±¡ä»heapä¸­ç§»åˆ°heapä¹‹å¤–ï¼Œå¹¶ä¸”GCä¸èƒ½ç®¡ç†GCIHå†…éƒ¨çš„Java å¯¹è±¡ï¼Œä»¥æ­¤è¾¾åˆ°é™ä½GCçš„å›æ”¶é¢‘ç‡å’Œæå‡GC çš„å›æ”¶æ•ˆç‡çš„ç›®çš„ã€‚ GCIH ä¸­çš„å¯¹è±¡è¿˜èƒ½å¤Ÿåœ¨å¤šä¸ªJavaè™šæ‹Ÿæœºè¿›ç¨‹ä¸­å®ç°å…±äº« ä½¿ç”¨crc32æŒ‡ä»¤å®ç°JVM intrinsicé™ä½JNI çš„è°ƒç”¨å¼€é”€ PMU hardware çš„Java profiling toolå’Œè¯Šæ–­ååŠ©åŠŸèƒ½ é’ˆå¯¹å¤§æ•°æ®åœºæ™¯çš„ZenGC . taobao vmåº”ç”¨åœ¨é˜¿é‡Œäº§å“ä¸Šæ€§èƒ½é«˜ï¼Œç¡¬ä»¶ä¸¥é‡ä¾èµ–intelçš„cpuï¼ŒæŸå¤±äº†å…¼å®¹æ€§ï¼Œä½†æé«˜äº†æ€§èƒ½ ç›®å‰å·²ç»åœ¨æ·˜å®ã€å¤©çŒ«ä¸Šçº¿ï¼ŒæŠŠoracle å®˜æ–¹JVMç‰ˆæœ¬å…¨éƒ¨æ›¿æ¢äº†ã€‚ Dalvik VM : Â·è°·æ­Œå¼€å‘çš„ï¼Œåº”ç”¨äºAndroidç³»ç»Ÿï¼Œå¹¶åœ¨Android2.2ä¸­æä¾›äº†JITï¼Œå‘å±•è¿…çŒ›ã€‚.Dalvik VMåªèƒ½ç§°ä½œè™šæ‹Ÿæœºï¼Œè€Œä¸èƒ½ç§°ä½œâ€œJavaè™šæ‹Ÿæœºâ€ï¼Œå®ƒæ²¡æœ‰éµå¾ª Javaè™šæ‹Ÿæœºè§„èŒƒ Â·ä¸èƒ½ç›´æ¥æ‰§è¡ŒJava çš„class æ–‡ä»¶Â·åŸºäºå¯„å­˜å™¨æ¶æ„ï¼Œä¸æ˜¯jvmçš„æ ˆæ¶æ„ã€‚ Â·æ‰§è¡Œçš„æ˜¯ç¼–è¯‘ä»¥åçš„dex(Dalvik Executableï¼‰æ–‡ä»¶ã€‚æ‰§è¡Œæ•ˆç‡æ¯”è¾ƒé«˜ å®ƒæ‰§è¡Œçš„dex (Dalvik Executableï¼‰æ–‡ä»¶å¯ä»¥é€šè¿‡classæ–‡ä»¶è½¬åŒ–è€Œæ¥ï¼Œä½¿ç”¨Javaè¯­æ³•ç¼–å†™åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¤§éƒ¨åˆ†çš„Java APIç­‰ã€‚ Â·Android 5.0ä½¿ç”¨æ”¯æŒæå‰ç¼–è¯‘(Ahead of Time Compilationï¼ŒAOTï¼‰çš„ARTVMæ›¿æ¢Dalvik VMã€‚ Graal VM . 2018å¹´4æœˆï¼Œoracle Labså…¬å¼€äº†Graal VMï¼Œå·ç§°&quot;Run Programs Faster Anywhere&quot;ï¼Œå‹ƒå‹ƒé‡å¿ƒã€‚ä¸1995å¹´javaçš„â€write onceï¼Œrun anywhere&quot;é¥ç›¸å‘¼åº”ã€‚ Graal VMåœ¨HotSpot VMåŸºç¡€ä¸Šå¢å¼ºè€Œæˆçš„è·¨è¯­è¨€å…¨æ ˆè™šæ‹Ÿæœºï¼Œå¯ä»¥ä½œä¸ºâ€œä»»ä½•è¯­è¨€â€çš„è¿è¡Œå¹³å°ä½¿ç”¨ã€‚è¯­è¨€åŒ…æ‹¬: Javaã€Scalaã€Groovyã€Kotlin;Cã€C++ Javascriptã€Rubyã€Pythonã€Rç­‰ Â·æ”¯æŒä¸åŒè¯­è¨€ä¸­æ··ç”¨å¯¹æ–¹çš„æ¥å£å’Œå¯¹è±¡ï¼Œæ”¯æŒè¿™äº›è¯­è¨€ä½¿ç”¨å·²ç»ç¼–å†™å¥½çš„æœ¬åœ°åº“æ–‡ä»¶å·¥ä½œåŸç†æ˜¯å°†è¿™äº›è¯­è¨€çš„æºä»£ç æˆ–æºä»£ç ç¼–è¯‘åçš„ä¸­é—´æ ¼å¼ï¼Œé€šè¿‡è§£é‡Šå™¨è½¬æ¢ä¸ºèƒ½è¢«Graal VMæ¥å—çš„ä¸­é—´è¡¨ç¤ºã€‚Graal VMæä¾›Truffleå·¥å…·é›†å¿«é€Ÿæ„å»ºé¢å‘ä¸€ç§æ–°è¯­è¨€çš„è§£é‡Šå™¨ã€‚åœ¨è¿è¡Œæ—¶è¿˜èƒ½è¿›è¡Œå³æ—¶ç¼–è¯‘ä¼˜åŒ–ï¼Œè·å¾—æ¯”åŸç”Ÿç¼–è¯‘å™¨æ›´ä¼˜ç§€çš„æ‰§è¡Œæ•ˆç‡ã€‚ å¦‚æœè¯´HotSpotæœ‰ä¸€å¤©çœŸçš„è¢«å–ä»£ï¼ŒGraal VMå¸Œæœ›æœ€å¤§ã€‚ä½†æ˜¯Javaçš„è½¯ä»¶ç”Ÿæ€æ²¡æœ‰ä¸æ¯«å˜åŒ–ã€‚ äºŒã€ç±»åŠ è½½å­ç³»ç»Ÿ 1.å†…å­˜ç®€å›¾ 2.ç±»åŠ è½½å™¨ â€‹ ç±»åŠ è½½å™¨å­ç³»ç»Ÿè´Ÿè´£ä»æ–‡ä»¶ç³»ç»Ÿæˆ–è€…ç½‘ç»œä¸­åŠ è½½classæ–‡ä»¶ï¼Œclassæ–‡ä»¶åœ¨æ–‡ä»¶å¼€å¤´æœ‰ç‰¹å®šçš„æ–‡ä»¶æ ‡è¯†ã€‚ ClassLoaderåªè´Ÿè´£classæ–‡ä»¶çš„åŠ è½½ï¼Œè‡³äºå®ƒæ˜¯å¦å¯ä»¥è¿è¡Œï¼Œåˆ™ç”±ExecutionEngineå†³å®šã€‚ åŠ è½½çš„ç±»ä¿¡æ¯å­˜æ”¾äºä¸€å—ç§°ä¸ºæ–¹æ³•åŒºçš„å†…å­˜ç©ºé—´ã€‚é™¤äº†ç±»çš„ä¿¡æ¯å¤–ï¼Œæ–¹æ³•åŒºä¸­è¿˜ä¼šå­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ä¿¡æ¯ï¼Œå¯èƒ½è¿˜åŒ…æ‹¬å­—ç¬¦ä¸²å­—é¢é‡å’Œæ•°å­—å¸¸é‡ï¼ˆè¿™éƒ¨åˆ†å¸¸é‡ä¿¡æ¯æ˜¯Classæ–‡ä»¶ä¸­å¸¸é‡æ± éƒ¨åˆ†çš„å†…å­˜æ˜ å°„) 3.ç±»åŠ è½½å™¨ClassLoaderè§’è‰² class file å­˜åœ¨äºæœ¬åœ°ç¡¬ç›˜ä¸Šï¼Œå¯ä»¥ç†è§£ä¸ºè®¾è®¡å¸ˆç”»åœ¨çº¸ä¸Šçš„æ¨¡æ¿ï¼Œè€Œæœ€ç»ˆè¿™ä¸ªæ¨¡æ¿åœ¨æ‰§è¡Œçš„æ—¶å€™æ˜¯è¦åŠ è½½åˆ°JVMå½“ä¸­æ¥ï¼Œæ ¹æ®è¿™ä¸ªæ–‡ä»¶å®ä¾‹åŒ–å‡ºnä¸ªä¸€æ¨¡ä¸€æ ·çš„å®ä¾‹ã€‚ class file åŠ è½½åˆ°JVMä¸­ï¼Œè¢«ç§°ä¸ºDNAå…ƒæ•°æ®æ¨¡æ¿ï¼Œæ”¾åœ¨æ–¹æ³•åŒºã€‚ åœ¨.classæ–‡ä»¶-&gt; JVM -&gt;æœ€ç»ˆæˆä¸ºå…ƒæ•°æ®æ¨¡æ¿ï¼Œæ­¤è¿‡ç¨‹å°±è¦ä¸€ä¸ªè¿è¾“å·¥å…·(ç±»è£…è½½å™¨class Loader)ï¼Œæ‰®æ¼”ä¸€ä¸ªå¿«é€’å‘˜çš„è§’è‰²ã€‚ è·å–ClassLoaderé€”ç» 4.ç±»åŠ è½½è¿‡ç¨‹ åŠ è½½(Loading): 1ï¼é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåè·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµ 2ï¼å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ 3ï¼åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„ java.lang.Class å¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ è¡¥å……:åŠ è½½.classæ–‡ä»¶çš„æ–¹å¼ Â·ä»æœ¬åœ°ç³»ç»Ÿä¸­ç›´æ¥åŠ è½½ Â·é€šè¿‡ç½‘ç»œè·å–ï¼Œå…¸å‹åœºæ™¯: web Applet Â·ä»zipå‹ç¼©åŒ…ä¸­è¯»å–ï¼Œæˆä¸ºæ—¥åjarã€ waræ ¼å¼çš„åŸºç¡€Â·è¿è¡Œæ—¶è®¡ç®—ç”Ÿæˆï¼Œä½¿ç”¨æœ€å¤šçš„æ˜¯:åŠ¨æ€ä»£ç†æŠ€æœ¯ Â·ç”±å…¶ä»–æ–‡ä»¶ç”Ÿæˆï¼Œå…¸å‹åœºæ™¯:JSPåº”ç”¨ Â·ä»ä¸“æœ‰æ•°æ®åº“ä¸­æå–.classæ–‡ä»¶,æ¯”è¾ƒå°‘è§ Â·ä»åŠ å¯†æ–‡ä»¶ä¸­è·å–ï¼Œå…¸å‹çš„é˜²classæ–‡ä»¶è¢«åç¼–è¯‘çš„ä¿æŠ¤æªæ–½ é“¾æ¥ éªŒè¯(Verify): Â·ç›®çš„åœ¨äºç¡®ä¿classæ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºè¦æ±‚ï¼Œä¿è¯è¢«åŠ è½½ç±»çš„æ­£ç¡®æ€§ï¼Œä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«å®‰å…¨ã€‚ Â·ä¸»è¦åŒ…æ‹¬å››ç§éªŒè¯ï¼Œæ–‡ä»¶æ ¼å¼éªŒè¯ï¼Œå…ƒæ•°æ®éªŒè¯ï¼Œå­—èŠ‚ç éªŒè¯ï¼Œç¬¦å·å¼•ç”¨éªŒè¯ã€‚ å‡†å¤‡(Prepare): Â·ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶ä¸”è®¾ç½®è¯¥ç±»å˜é‡çš„é»˜è®¤åˆå§‹å€¼ï¼Œå³é›¶å€¼ã€‚ è¿™é‡Œä¸åŒ…å«ç”¨finalä¿®é¥°çš„staticï¼Œå› ä¸ºfinalåœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šåˆ†é…äº†ï¼Œå‡†å¤‡é˜¶æ®µä¼šæ˜¾å¼é“¾åˆå§‹åŒ–; Â·è¿™é‡Œä¸ä¼šä¸ºå®ä¾‹å˜é‡åˆ†é…åˆå§‹åŒ–ï¼Œç±»å˜é‡ä¼šåˆ†é…åœ¨æ–¹æ³•åŒºä¸­ï¼Œè€Œå®ä¾‹å˜é‡æ˜¯ä¼šéšç€å¯¹è±¡ä¸€èµ·åˆ†é…åˆ°Javaå †ä¸­ã€‚ è§£æ(Resolve) : Â·å°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚ Â·äº‹å®ä¸Šï¼Œè§£ææ“ä½œå¾€å¾€ä¼šä¼´éšç€JVMåœ¨æ‰§è¡Œå®Œåˆå§‹åŒ–ä¹‹åå†æ‰§è¡Œã€‚ Â·ç¬¦å·å¼•ç”¨å°±æ˜¯ä¸€ç»„ç¬¦å·æ¥æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ã€‚ç¬¦å·å¼•ç”¨çš„å­—é¢é‡å½¢å¼æ˜ç¡®å®šä¹‰åœ¨ã€Šjavaè™šæ‹Ÿæœºè§„èŒƒã€‹çš„classæ–‡ä»¶æ ¼å¼ä¸­ã€‚ç›´æ¥å¼•ç”¨å°±æ˜¯ç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–ä¸€ä¸ªé—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ã€‚ Â·è§£æåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–æ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»å‹ç­‰ã€‚å¯¹åº”å¸¸é‡æ± ä¸­çš„ CONSTANT Class infoã€CONSTANT Fieldref_infoã€CONSTANT _Methodref_infoç­‰.ã€‚ åˆå§‹åŒ–: Â·åˆå§‹åŒ–é˜¶æ®µå°±æ˜¯æ‰§è¡Œç±»æ„é€ å™¨æ–¹æ³• ()çš„è¿‡ç¨‹ã€‚ Â·æ­¤æ–¹æ³•ä¸éœ€å®šä¹‰ï¼Œæ˜¯javacç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥åˆå¹¶è€Œæ¥ã€‚ Â·æ„é€ å™¨æ–¹æ³•ä¸­æŒ‡ä»¤æŒ‰è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºæ‰§è¡Œã€‚ . ()ä¸åŒäºç±»çš„æ„é€ å™¨ã€‚(å…³è”:æ„é€ å™¨æ˜¯è™šæ‹Ÿæœºè§†è§’ä¸‹çš„( ))Â·è‹¥è¯¥ç±»å…·æœ‰çˆ¶ç±»ï¼ŒJVMä¼šä¿è¯å­ç±»çš„()æ‰§è¡Œå‰ï¼Œçˆ¶ç±»çš„ ()å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚ Â·è™šæ‹Ÿæœºå¿…é¡»ä¿è¯ä¸€ä¸ªç±»çš„ ()æ–¹æ³•åœ¨å¤šçº¿ç¨‹ä¸‹è¢«åŒæ­¥åŠ é”ã€‚ 5.ç±»åŠ è½½å™¨åˆ†ç±» JVMæ”¯æŒä¸¤ç§ç±»å‹çš„ç±»åŠ è½½å™¨ï¼Œåˆ†åˆ«ä¸ºå¼•å¯¼ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰å’Œè‡ªå®šä¹‰ç±»åŠ è½½å™¨(User-Defined ClassLoader)ã€‚ Â·ä»æ¦‚å¿µä¸Šæ¥è®²ï¼Œè‡ªå®šä¹‰ç±»åŠ è½½å™¨ä¸€èˆ¬æŒ‡çš„æ˜¯ç¨‹åºä¸­ç”±å¼€å‘äººå‘˜è‡ªå®šä¹‰çš„ä¸€ç±»ç±»åŠ è½½å™¨ï¼Œä½†æ˜¯Javaè™šæ‹Ÿæœºè§„èŒƒå´æ²¡æœ‰è¿™ä¹ˆå®šä¹‰ï¼Œè€Œæ˜¯å°†æ‰€æœ‰æ´¾ç”ŸäºæŠ½è±¡ç±»ClassLoaderçš„ç±»åŠ è½½å™¨éƒ½åˆ’åˆ†ä¸ºè‡ªå®šä¹‰ç±»åŠ è½½å™¨ã€‚ Â·æ— è®ºç±»åŠ è½½å™¨çš„ç±»å‹å¦‚ä½•åˆ’åˆ†ï¼Œåœ¨ç¨‹åºä¸­æˆ‘ä»¬æœ€å¸¸è§çš„ç±»åŠ è½½å™¨å§‹ç»ˆåªæœ‰3ä¸ªï¼Œå¦‚ä¸‹æ‰€ç¤º: è™šæ‹Ÿæœºè‡ªå¸¦çš„åŠ è½½å™¨ Â·å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆå¼•å¯¼ç±»åŠ è½½å™¨ï¼ŒBootstrap classLoader) è¿™ä¸ªç±»åŠ è½½ä½¿ç”¨**C/C++**è¯­è¨€å®ç°çš„ï¼ŒåµŒå¥—åœ¨JVMå†…éƒ¨ã€‚ å®ƒç”¨æ¥åŠ è½½Javaçš„æ ¸å¿ƒåº“ï¼ˆJAVA HOME/jre/lib/rt.jarã€resources.jaræˆ–sun.boot.class.pathè·¯å¾„ä¸‹çš„å†…å®¹ï¼‰ï¼Œç”¨äºæä¾›JVMè‡ªèº«éœ€è¦çš„ç±» å¹¶ä¸ç»§æ‰¿è‡ªjava.lang.classLoaderï¼Œæ²¡æœ‰çˆ¶åŠ è½½å™¨ã€‚åŠ è½½æ‰©å±•ç±»å’Œåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼Œå¹¶æŒ‡å®šä¸ºä»–ä»¬çš„çˆ¶ç±»åŠ è½½å™¨ã€‚ å‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒBootstrapå¯åŠ¨ç±»åŠ è½½å™¨åªåŠ è½½åŒ…åä¸ºjavaã€javaxã€sunç­‰å¼€å¤´çš„ç±» Â·æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoader) Javaè¯­è¨€ç¼–å†™ï¼Œç”±sun.misc.Launcher$ExtClassLoaderå®ç°ã€‚æ´¾ç”ŸäºclassLoaderç±» çˆ¶ç±»åŠ è½½å™¨ä¸ºå¯åŠ¨ç±»åŠ è½½å™¨ ä»java.ext.dirsç³»ç»Ÿå±æ€§æ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ è½½ç±»åº“ï¼Œæˆ–ä»JDKçš„å®‰è£…ç›®å½•çš„jre/lib/extå­ç›®å½•ï¼ˆæ‰©å±•ç›®å½•)ä¸‹åŠ è½½ç±»åº“ã€‚å¦‚æœç”¨æˆ·åˆ›å»ºçš„JARæ”¾åœ¨æ­¤ç›®å½•ä¸‹ï¼Œä¹Ÿä¼šè‡ªåŠ¨ç”±æ‰©å±•ç±»åŠ è½½å™¨åŠ è½½ã€‚ Â·åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆç³»ç»Ÿç±»åŠ è½½å™¨ï¼ŒAppClassLoader) javaè¯­è¨€ç¼–å†™ï¼Œç”±sun.misc.Launcher$AppclassLoaderå®ç°&gt;æ´¾ç”ŸäºclassLoaderç±» çˆ¶ç±»åŠ è½½å™¨ä¸ºæ‰©å±•ç±»åŠ è½½å™¨ å®ƒè´Ÿè´£åŠ è½½ç¯å¢ƒå˜é‡classpathæˆ–ç³»ç»Ÿå±æ€§java.class.pathæŒ‡å®šè·¯å¾„ä¸‹çš„ç±»åº“ è¯¥ç±»åŠ è½½æ˜¯ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒJavaåº”ç”¨çš„ç±»éƒ½æ˜¯ç”±å®ƒæ¥å®ŒæˆåŠ è½½ é€šè¿‡classLoader#getSystemClassLoader ()æ–¹æ³•å¯ä»¥è·å–åˆ°è¯¥ç±»åŠ è½½å™¨ ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨ Â·åœ¨Javaçš„æ—¥å¸¸åº”ç”¨ç¨‹åºå¼€å‘ä¸­ï¼Œç±»çš„åŠ è½½å‡ ä¹æ˜¯ç”±ä¸Šè¿°3ç§ç±»åŠ è½½å™¨ç›¸äº’ é…åˆæ‰§è¡Œçš„ï¼Œåœ¨å¿…è¦æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œæ¥å®šåˆ¶ç±»çš„åŠ è½½æ–¹å¼ã€‚ .ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨? éš”ç¦»åŠ è½½ç±» ä¿®æ”¹ç±»åŠ è½½çš„æ–¹å¼ æ‰©å±•åŠ è½½æº é˜²æ­¢æºç æ³„æ¼ ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨å®ç°æ­¥éª¤: 1.å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡ç»§æ‰¿æŠ½è±¡ç±»java.lang.classLoaderç±»çš„æ–¹å¼ï¼Œå®ç°è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œä»¥æ»¡è¶³ä¸€äº›ç‰¹æ®Šçš„éœ€æ±‚ 2.åœ¨JDK1.2ä¹‹å‰ï¼Œåœ¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ—¶ï¼Œæ€»ä¼šå»ç»§æ‰¿classLoaderç±»å¹¶é‡å†™loadClass ()æ–¹æ³•ï¼Œä»è€Œå®ç°è‡ªå®šä¹‰çš„ç±»åŠ è½½ç±»ï¼Œä½†æ˜¯åœ¨JDK1.2ä¹‹åå·²ä¸å†å»ºè®®ç”¨æˆ·å»è¦†ç›–loadclass ()æ–¹æ³•ï¼Œè€Œæ˜¯å»ºè®®æŠŠè‡ªå®šä¹‰çš„ç±»åŠ è½½é€»è¾‘å†™åœ¨findclass ()æ–¹æ³•ä¸­ 3ï¼åœ¨ç¼–å†™è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ—¶ï¼Œå¦‚æœæ²¡æœ‰å¤ªè¿‡äºå¤æ‚çš„éœ€æ±‚ï¼Œå¯ä»¥ç›´æ¥ç»§æ‰¿URLClassLoaderç±»ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…è‡ªå·±å»ç¼–å†™findclass ()æ–¹æ³•åŠå…¶è·å–å­—èŠ‚ç æµçš„æ–¹å¼ï¼Œä½¿è‡ªå®šä¹‰ç±»åŠ è½½å™¨ç¼–å†™æ›´åŠ ç®€æ´ã€‚ 6.åŒäº²å§”æ´¾æœºåˆ¶ â€‹ Javaè™šæ‹Ÿæœºå¯¹classæ–‡ä»¶é‡‡ç”¨çš„æ˜¯æŒ‰éœ€åŠ è½½çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½“éœ€è¦ä½¿ç”¨è¯¥ç±»æ—¶æ‰ä¼šå°†å®ƒçš„classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ç”Ÿæˆclasså¯¹è±¡ã€‚è€Œä¸”åŠ è½½æŸä¸ªç±»çš„classæ–‡ä»¶æ—¶ï¼ŒJavaè™šæ‹Ÿæœºé‡‡ç”¨çš„æ˜¯åŒäº²å§”æ´¾æ¨¡å¼ï¼Œå³æŠŠè¯·æ±‚äº¤ç”±çˆ¶ç±»å¤„ç†,å®ƒæ˜¯ä¸€ç§ä»»åŠ¡å§”æ´¾æ¨¡å¼ã€‚ å·¥ä½œåŸç† 1)å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½è¯·æ±‚ï¼Œå®ƒå¹¶ä¸ä¼šè‡ªå·±å…ˆå»åŠ è½½ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»çš„åŠ è½½å™¨å»æ‰§è¡Œ; 2)å¦‚æœçˆ¶ç±»åŠ è½½å™¨è¿˜å­˜åœ¨å…¶çˆ¶ç±»åŠ è½½å™¨ï¼Œåˆ™è¿›ä¸€æ­¥å‘ä¸Šå§”æ‰˜ï¼Œä¾æ¬¡é€’å½’ï¼Œè¯·æ±‚æœ€ç»ˆå°†åˆ°è¾¾é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨; 3)å¦‚æœçˆ¶ç±»åŠ è½½å™¨å¯ä»¥å®Œæˆç±»åŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›ï¼Œå€˜è‹¥çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆæ­¤åŠ è½½ä»»åŠ¡ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ï¼Œè¿™å°±æ˜¯åŒäº²å§”æ´¾æ¨¡å¼ã€‚ å³å‘ä¸Šå§”æ‰˜ï¼Œå‘ä¸‹ç”©é”… åŒäº²å§”æ´¾ä¼˜åŠ¿ é¿å…ç±»çš„é‡å¤åŠ è½½ ä¿æŠ¤ç¨‹åºå®‰å…¨ï¼Œé˜²æ­¢æ ¸å¿ƒAPIè¢«éšæ„ç¯¡æ”¹ è‡ªå®šä¹‰ç±»:java. lang. string è‡ªå®šä¹‰ç±»: java . lang. shkStart java.lang. securityException: Prohibited package name: java.lang æ²™ç®±å®‰å…¨æœºåˆ¶ â€‹ è‡ªå®šä¹‰stringç±»ï¼Œä½†æ˜¯åœ¨åŠ è½½è‡ªå®šä¹‰Stringç±»çš„æ—¶å€™ä¼šç‡å…ˆä½¿ç”¨å¼•å¯¼ç±»åŠ è½½å™¨åŠ è½½ï¼Œè€Œå¼•å¯¼ç±»åŠ è½½å™¨åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ä¼šå…ˆåŠ è½½jdkè‡ªå¸¦çš„æ–‡ä»¶(rt.jaråŒ…ä¸­java\\lang\\String.class)ï¼ŒæŠ¥é”™ä¿¡æ¯è¯´æ²¡æœ‰mainæ–¹æ³•ï¼Œå°±æ˜¯å› ä¸ºåŠ è½½çš„æ˜¯rt.jaråŒ…ä¸­çš„Stringç±»ã€‚è¿™æ ·å¯ä»¥ä¿è¯å¯¹javaæ ¸å¿ƒæºä»£ç çš„ä¿æŠ¤ï¼Œè¿™å°±æ˜¯æ²™ç®±å®‰å…¨æœºåˆ¶ã€‚å³å…ˆç”¨javaæ ¸å¿ƒæºç å†å¾€å¤–å±‚ç”¨ 7.å…¶ä»– Â·åœ¨JVMä¸­è¡¨ç¤ºä¸¤ä¸ªclasså¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªå¿…è¦æ¡ä»¶: ç±»çš„å®Œæ•´ç±»åå¿…é¡»ä¸€è‡´ï¼ŒåŒ…æ‹¬åŒ…åã€‚ åŠ è½½è¿™ä¸ªç±»çš„classLoader(æŒ‡classLoaderå®ä¾‹å¯¹è±¡)å¿…é¡»ç›¸åŒã€‚ Â·æ¢å¥è¯è¯´ï¼Œåœ¨VMä¸­ï¼Œå³ä½¿è¿™ä¸¤ä¸ªç±»å¯¹è±¡(classå¯¹è±¡)æ¥æºåŒä¸€ä¸ªclassæ–‡ä»¶ï¼Œè¢«åŒä¸€ä¸ªè™šæ‹Ÿæœºæ‰€åŠ è½½ï¼Œä½†åªè¦åŠ è½½å®ƒä»¬çš„ClassLoaderå®ä¾‹å¯¹è±¡ä¸åŒï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªç±»å¯¹è±¡ä¹Ÿæ˜¯ä¸ç›¸ç­‰çš„ã€‚ å¯¹ç±»åŠ è½½å…¶çš„å¼•ç”¨ JVMå¿…é¡»çŸ¥é“ä¸€ä¸ªç±»å‹æ˜¯ç”±å¯åŠ¨åŠ è½½å™¨åŠ è½½çš„è¿˜æ˜¯ç”±ç”¨æˆ·ç±»åŠ è½½å™¨åŠ è½½çš„ã€‚å¦‚æœä¸€ä¸ªç±»å‹æ˜¯ç”±ç”¨æˆ·ç±»åŠ è½½å™¨åŠ è½½çš„ï¼Œé‚£ä¹ˆJVMä¼šå°†è¿™ä¸ªç±»åŠ è½½å™¨çš„ä¸€ä¸ªå¼•ç”¨ä½œä¸ºç±»å‹ä¿¡æ¯çš„ä¸€éƒ¨åˆ†ä¿å­˜åœ¨æ–¹æ³•åŒºä¸­ã€‚å½“è§£æä¸€ä¸ªç±»å‹åˆ°å¦ä¸€ä¸ªç±»å‹çš„å¼•ç”¨çš„æ—¶å€™ï¼ŒJVMéœ€è¦ä¿è¯è¿™ä¸¤ä¸ªç±»å‹çš„ç±»åŠ è½½å™¨æ˜¯ç›¸åŒçš„ã€‚ ç±»çš„ä¸»åŠ¨ä½¿ç”¨å’Œè¢«åŠ¨ä½¿ç”¨ Javaç¨‹åºå¯¹ç±»çš„ä½¿ç”¨æ–¹å¼åˆ†ä¸º:ä¸»åŠ¨ä½¿ç”¨å’Œè¢«åŠ¨ä½¿ç”¨ã€‚Â·ä¸»åŠ¨ä½¿ç”¨ï¼Œåˆåˆ†ä¸ºä¸ƒç§æƒ…å†µ: Â·åˆ›å»ºç±»çš„å®ä¾‹ Â·è®¿é—®æŸä¸ªç±»æˆ–æ¥å£çš„é™æ€å˜é‡ï¼Œæˆ–è€…å¯¹è¯¥é™æ€å˜é‡èµ‹å€¼ Â·è°ƒç”¨ç±»çš„é™æ€æ–¹æ³• Â·åå°„ï¼ˆæ¯”å¦‚: Class.forName ( &quot;com.atguigu . Test&quot;) )&gt; Â·åˆå§‹åŒ–ä¸€ä¸ªç±»çš„å­ç±» Â·Javaè™šæ‹Ÿæœºå¯åŠ¨æ—¶è¢«æ ‡æ˜ä¸ºå¯åŠ¨ç±»çš„ç±» Â·JDK 7å¼€å§‹æä¾›çš„åŠ¨æ€è¯­è¨€æ”¯æŒ:java . lang.invoke.MethodHandleå®ä¾‹çš„è§£æç»“æœREF getstaticã€REF putstaticã€REF_invokestaticå¥æŸ„å¯¹åº”çš„ç±»æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™åˆå§‹åŒ– é™¤äº†ä»¥ä¸Šä¸ƒç§æƒ…å†µï¼Œå…¶ä»–ä½¿ç”¨Javaç±»çš„æ–¹å¼éƒ½è¢«çœ‹ä½œæ˜¯å¯¹ç±»çš„è¢«åŠ¨ä½¿ç”¨ï¼Œéƒ½ä¸ä¼šå¯¼è‡´ç±»çš„åˆå§‹åŒ–ã€‚ ä¸‰ã€è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°åŠçº¿ç¨‹ 1.è¿è¡Œæ—¶æ•°æ®åŒºå†…éƒ¨ç»“æ„ â€‹ å†…å­˜æ˜¯éå¸¸é‡è¦çš„ç³»ç»Ÿèµ„æºï¼Œæ˜¯ç¡¬ç›˜å’ŒCPUçš„ä¸­é—´ä»“åº“åŠæ¡¥æ¢ï¼Œæ‰¿è½½ç€æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„å®æ—¶è¿è¡Œã€‚JVMå†…å­˜å¸ƒå±€è§„å®šäº†Javaåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å†…å­˜ç”³è¯·ã€åˆ†é…ã€ç®¡ç†çš„ç­–ç•¥ï¼Œä¿è¯äº†JVMçš„é«˜æ•ˆç¨³å®šè¿è¡Œã€‚ä¸åŒçš„JVMå¯¹äºå†…å­˜çš„åˆ’åˆ†æ–¹å¼å’Œç®¡ç†æœºåˆ¶å­˜åœ¨ç€éƒ¨åˆ†å·®å¼‚ã€‚ç»“åˆJVMè™šæ‹Ÿæœºè§„èŒƒï¼Œæ¥æ¢è®¨ä¸€ä¸‹ç»å…¸çš„JVMå†…å­˜å¸ƒå±€ã€‚ Error GC(Garbage Collection) OOM(OutOfMemoryError) StackOverflowError ç¨‹åºè®¡æ•°å™¨ âŒ âŒ âŒ æœ¬åœ°æ–¹æ³•æ ˆ âœ”ï¸ âŒ âœ”ï¸ âœ”ï¸ è™šæ‹Ÿæœºæ ˆ âœ”ï¸ âŒ âœ”ï¸ âœ”ï¸ å † âœ”ï¸ âœ”ï¸ âœ”ï¸ æ–¹æ³•åŒº âœ”ï¸ âœ”ï¸ âœ”ï¸ â€‹ Javaè™šæ‹Ÿæœºå®šä¹‰äº†è‹¥å¹²ç§ç¨‹åºè¿è¡ŒæœŸé—´ä¼šä½¿ç”¨åˆ°çš„è¿è¡Œæ—¶æ•°æ®åŒºï¼Œå…¶ä¸­æœ‰ä¸€äº›ä¼šéšç€è™šæ‹Ÿæœºå¯åŠ¨è€Œåˆ›å»ºï¼Œéšç€è™šæ‹Ÿæœºé€€å‡ºè€Œé”€æ¯ã€‚å¦å¤–ä¸€äº›åˆ™æ˜¯ä¸çº¿ç¨‹ä¸€ä¸€å¯¹åº”çš„ï¼Œè¿™äº›ä¸çº¿ç¨‹å¯¹åº”çš„æ•°æ®åŒºåŸŸä¼šéšç€çº¿ç¨‹å¼€å§‹å’Œç»“æŸè€Œåˆ›å»ºå’Œé”€æ¯ã€‚ç°è‰²çš„ä¸ºå•ç‹¬çº¿ç¨‹ç§æœ‰çš„ï¼Œçº¢è‰²çš„ä¸ºå¤šä¸ªçº¿ç¨‹å…±äº«çš„ã€‚å³:æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹ï¼šåŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨ã€æ ˆã€æœ¬åœ°æ ˆã€‚æ¯ä¸ªçº¿ç¨‹å…±äº«ï¼šå †ã€æ–¹æ³•åŒº 2.çº¿ç¨‹ â€‹ çº¿ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºé‡Œçš„è¿è¡Œå•å…ƒã€‚JVMå…è®¸ä¸€ä¸ªåº”ç”¨æœ‰å¤šä¸ªçº¿ç¨‹å¹¶è¡Œçš„æ‰§è¡Œã€‚åœ¨Hotspot JVMé‡Œï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¸æ“ä½œç³»ç»Ÿçš„æœ¬åœ°çº¿ç¨‹ç›´æ¥æ˜ å°„ã€‚ â€‹ å½“ä¸€ä¸ªJavaçº¿ç¨‹å‡†å¤‡å¥½æ‰§è¡Œä»¥åï¼Œæ­¤æ—¶ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„æœ¬åœ°çº¿ç¨‹ä¹ŸåŒæ—¶åˆ›å»ºã€‚Javaçº¿ç¨‹æ‰§è¡Œç»ˆæ­¢åï¼Œæœ¬åœ°çº¿ç¨‹ä¹Ÿä¼šå›æ”¶ã€‚æ“ä½œç³»ç»Ÿè´Ÿè´£æ‰€æœ‰çº¿ç¨‹çš„å®‰æ’è°ƒåº¦åˆ°ä»»ä½•ä¸€ä¸ªå¯ç”¨çš„CPUä¸Šã€‚ä¸€æ—¦æœ¬åœ°çº¿ç¨‹åˆå§‹åŒ–æˆåŠŸï¼Œå®ƒå°±ä¼šè°ƒç”¨Javaçº¿ç¨‹ä¸­çš„run ()æ–¹æ³•ã€‚ â€‹ å¦‚æœä½ ä½¿ç”¨jconsoleæˆ–è€…æ˜¯ä»»ä½•ä¸€ä¸ªè°ƒè¯•å·¥å…·ï¼Œéƒ½èƒ½çœ‹åˆ°åœ¨åå°æœ‰è®¸å¤šçº¿ç¨‹åœ¨è¿è¡Œã€‚è¿™äº›åå°çº¿ç¨‹ä¸åŒ…æ‹¬è°ƒç”¨public static void main (string[])çš„mainçº¿ç¨‹ä»¥åŠæ‰€æœ‰è¿™ä¸ªmainçº¿ç¨‹è‡ªå·±åˆ›å»ºçš„çº¿ç¨‹ã€‚è¿™äº›ä¸»è¦çš„åå°ç³»ç»Ÿçº¿ç¨‹åœ¨Hotspot JVMé‡Œä¸»è¦æ˜¯ä»¥ä¸‹å‡ ä¸ª: **è™šæ‹Ÿæœºçº¿ç¨‹:**è¿™ç§çº¿ç¨‹çš„æ“ä½œæ˜¯éœ€è¦JVMè¾¾åˆ°å®‰å…¨ç‚¹æ‰ä¼šå‡ºç°ã€‚è¿™äº›æ“ä½œå¿…é¡»åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­å‘ç”Ÿçš„åŸå› æ˜¯ä»–ä»¬éƒ½éœ€è¦JVMè¾¾åˆ°å®‰å…¨ç‚¹ï¼Œè¿™æ ·å †æ‰ä¸ä¼šå˜åŒ–ã€‚è¿™ç§ çº¿ç¨‹çš„æ‰§è¡Œç±»å‹åŒ…æ‹¬&quot;stop-the-world&quot;çš„åƒåœ¾æ”¶é›†ï¼Œçº¿ç¨‹æ ˆæ”¶é›†ï¼Œçº¿ç¨‹æŒ‚èµ·ä»¥åŠåå‘é”æ’¤é”€ã€‚ **å‘¨æœŸä»»åŠ¡çº¿ç¨‹:**è¿™ç§çº¿ç¨‹æ˜¯æ—¶é—´å‘¨æœŸäº‹ä»¶çš„ä½“ç°(æ¯”å¦‚ä¸­æ–­)ï¼Œä»–ä»¬ä¸€èˆ¬ç”¨äºå‘¨æœŸæ€§æ“ä½œçš„è°ƒåº¦æ‰§è¡Œã€‚ **GCçº¿ç¨‹:**è¿™ç§çº¿ç¨‹å¯¹åœ¨JVMé‡Œä¸åŒç§ç±»çš„åƒåœ¾æ”¶é›†è¡Œä¸ºæä¾›äº†æ”¯æŒã€‚&gt;ç¼–è¯‘çº¿ç¨‹:è¿™ç§çº¿ç¨‹åœ¨è¿è¡Œæ—¶ä¼šå°†å­—èŠ‚ç ç¼–è¯‘æˆåˆ°æœ¬åœ°ä»£ç ã€‚ **ä¿¡å·è°ƒåº¦çº¿ç¨‹:**è¿™ç§çº¿ç¨‹æ¥æ”¶ä¿¡å·å¹¶å‘é€ç»™JVMï¼Œåœ¨å®ƒå†…éƒ¨é€šè¿‡è°ƒç”¨é€‚å½“çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ Â·çº¿ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºé‡Œçš„è¿è¡Œå•å…ƒã€‚JVMå…è®¸ä¸€ä¸ªåº”ç”¨æœ‰å¤šä¸ªçº¿ç¨‹å¹¶è¡Œçš„æ‰§è¡Œã€‚ .åœ¨Hotspot JVMé‡Œï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¸æ“ä½œç³»ç»Ÿçš„æœ¬åœ°çº¿ç¨‹ç›´æ¥æ˜ å°„ã€‚ å½“ä¸€ä¸ªJavaçº¿ç¨‹å‡†å¤‡å¥½æ‰§è¡Œä»¥åï¼Œæ­¤æ—¶ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„æœ¬åœ°çº¿ç¨‹ä¹ŸåŒæ—¶åˆ›å»ºã€‚Javaçº¿ç¨‹æ‰§è¡Œç»ˆæ­¢åï¼Œæœ¬åœ°çº¿ç¨‹ä¹Ÿä¼šå›æ”¶ã€‚ Â·æ“ä½œç³»ç»Ÿè´Ÿè´£æ‰€æœ‰çº¿ç¨‹çš„å®‰æ’è°ƒåº¦åˆ°ä»»ä½•ä¸€ä¸ªå¯ç”¨çš„CPUä¸Šã€‚ä¸€æ—¦æœ¬åœ°çº¿ç¨‹åˆå§‹åŒ–æˆåŠŸï¼Œå®ƒå°±ä¼šè°ƒç”¨Javaçº¿ç¨‹ä¸­çš„run ()æ–¹æ³•ã€‚ â—å®ˆæŠ¤çº¿ç¨‹ã€æ™®é€šçº¿ç¨‹ å››ã€ç¨‹åºè®¡æ•°å™¨ 1.Program Counter Registerä»‹ç» â€‹ JVMä¸­çš„ç¨‹åºè®¡æ•°å¯„å­˜å™¨(Program counter Register)ä¸­ï¼Œ Registerçš„å‘½åæºäºCPUçš„å¯„å­˜å™¨ï¼Œå¯„å­˜å™¨å­˜å‚¨æŒ‡ä»¤ç›¸å…³çš„ç°åœºä¿¡æ¯ã€‚CPUåªæœ‰æŠŠæ•°æ®è£…è½½åˆ°å¯„å­˜å™¨æ‰èƒ½å¤Ÿè¿è¡Œã€‚è¿™é‡Œï¼Œå¹¶éæ˜¯å¹¿ä¹‰ä¸Šæ‰€æŒ‡çš„ç‰©ç†å¯„å­˜å™¨ï¼Œæˆ–è®¸å°†å…¶ç¿»è¯‘ä¸ºPCè®¡æ•°å™¨ï¼ˆæˆ–æŒ‡ä»¤è®¡æ•°å™¨ï¼‰ä¼šæ›´åŠ è´´åˆ‡(ä¹Ÿç§°ä¸ºç¨‹åºé’©å­)ï¼Œå¹¶ä¸”ä¹Ÿä¸å®¹æ˜“å¼•èµ·ä¸€äº›ä¸å¿…è¦çš„è¯¯ä¼šã€‚JVMä¸­çš„PCå¯„å­˜å™¨æ˜¯å¯¹ç‰©ç†PCå¯„å­˜å™¨çš„ä¸€ç§æŠ½è±¡æ¨¡æ‹Ÿã€‚ ä½œç”¨: PCå¯„å­˜å™¨ç”¨æ¥å­˜å‚¨æŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€,ä¹Ÿå³å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤ä»£ç ã€‚ç”±æ‰§è¡Œå¼•æ“è¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤(æŒ‡ä»¤ä»£ç åœ¨javaæ ˆä¸­å¯¹åº”çš„æŒ‡ä»¤)ã€‚ å®ƒæ˜¯ä¸€å—å¾ˆå°çš„å†…å­˜ç©ºé—´ï¼Œå‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®°ã€‚ä¹Ÿæ˜¯è¿è¡Œé€Ÿåº¦æœ€å¿«çš„å­˜å‚¨åŒºåŸŸã€‚ åœ¨JVMè§„èŒƒä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å®ƒè‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ï¼Œæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¿æŒä¸€è‡´ã€‚ ä»»ä½•æ—¶é—´ä¸€ä¸ªçº¿ç¨‹éƒ½åªæœ‰ä¸€ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å½“å‰æ–¹æ³•ã€‚ç¨‹åºè®¡æ•°å™¨ä¼šå­˜å‚¨å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„Javaæ–¹æ³•çš„TVMæŒ‡ä»¤åœ°å€;æˆ–è€…ï¼Œå¦‚æœæ˜¯åœ¨æ‰§è¡Œnativeæ–¹æ³•ï¼Œåˆ™æ˜¯æœªæŒ‡å®šå€¼ï¼ˆundefned) ã€‚ å®ƒæ˜¯ç¨‹åºæ§åˆ¶æµçš„æŒ‡ç¤ºå™¨ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚ å­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚ å®ƒæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰è§„å®šä»»ä½•OutOfMemoryErroræƒ…å†µçš„åŒºåŸŸã€‚ 2.ç¨‹åºç¤ºä¾‹ 1javap -v/verbose ï¼ˆclassåï¼‰ //åç¼–è¯‘ 3.ä¸¤ä¸ªé—®é¢˜ ï¼ˆ1ï¼‰ä½¿ç”¨PCå¯„å­˜å™¨å­˜å‚¨å­—èŠ‚ç æŒ‡ä»¤åœ°å€æœ‰ä»€ä¹ˆç”¨å‘¢?ä¸ºä»€ä¹ˆä½¿ç”¨PCå¯„å­˜å™¨è®°å½•å½“å‰çº¿ç¨‹çš„æ‰§è¡Œåœ°å€å‘¢ï¼Ÿ å› ä¸ºCPUéœ€è¦ä¸åœçš„åˆ‡æ¢å„ä¸ªçº¿ç¨‹ï¼Œè¿™æ—¶å€™åˆ‡æ¢å›æ¥ä»¥åï¼Œå°±å¾—çŸ¥é“æ¥ç€ä»å“ªå¼€å§‹ç»§ç»­æ‰§è¡Œã€‚ JVMçš„å­—èŠ‚ç è§£é‡Šå™¨å°±éœ€è¦é€šè¿‡æ”¹å˜PCå¯„å­˜å™¨çš„å€¼æ¥æ˜ç¡®ä¸‹ä¸€æ¡åº”è¯¥æ‰§è¡Œä»€ä¹ˆæ ·çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚ (2)PCå¯„å­˜å™¨ä¸ºä»€ä¹ˆä¼šè¢«è®¾å®šä¸ºçº¿ç¨‹ç§æœ‰? â€‹ æˆ‘ä»¬éƒ½çŸ¥é“æ‰€è°“çš„å¤šçº¿ç¨‹åœ¨ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´æ®µå†…åªä¼šæ‰§è¡Œå…¶ä¸­æŸä¸€ä¸ªçº¿ç¨‹çš„æ–¹æ³•ï¼ŒCPUä¼šä¸åœåœ°åšä»»åŠ¡åˆ‡æ¢ï¼Œè¿™æ ·å¿…ç„¶å¯¼è‡´ç»å¸¸ä¸­æ–­æˆ–æ¢å¤ï¼Œå¦‚ä½•ä¿è¯åˆ†æ¯«æ— å·®å‘¢?ä¸ºäº†èƒ½å¤Ÿå‡†ç¡®åœ°è®°å½•å„ä¸ªçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„å½“å‰å­—èŠ‚ç æŒ‡ä»¤åœ°å€ï¼Œæœ€å¥½çš„åŠæ³•è‡ªç„¶æ˜¯ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½åˆ†é…ä¸€ä¸ªPCå¯„å­˜å™¨ï¼Œè¿™æ ·ä¸€æ¥å„ä¸ªçº¿ç¨‹ä¹‹é—´ä¾¿å¯ä»¥è¿›è¡Œç‹¬ç«‹è®¡ç®—ï¼Œä»è€Œä¸ä¼šå‡ºç°ç›¸äº’åƒæ‰°çš„æƒ…å†µã€‚ â€‹ CPUæ—¶é—´ç‰‡å³CPUåˆ†é…ç»™å„ä¸ªç¨‹åºçš„æ—¶é—´ï¼Œæ¯ä¸ªçº¿ç¨‹è¢«åˆ†é…ä¸€ä¸ªæ—¶é—´æ®µï¼Œç§°ä½œå®ƒçš„æ—¶é—´ç‰‡ã€‚åœ¨å®è§‚ä¸Š:æˆ‘ä»¬å¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªåº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªç¨‹åºå¹¶è¡Œä¸æ‚–ï¼ŒåŒæ—¶è¿è¡Œã€‚ä½†åœ¨å¾®è§‚ä¸Š:ç”±äºåªæœ‰ä¸€ä¸ªCPUï¼Œä¸€æ¬¡åªèƒ½å¤„ç†ç¨‹åºè¦æ±‚çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚ä½•å¤„ç†å…¬å¹³ï¼Œä¸€ç§æ–¹æ³•å°±æ˜¯å¼•å…¥æ—¶é—´ç‰‡ï¼Œæ¯ä¸ªç¨‹åºè½®æµæ‰§è¡Œã€‚ äº”ã€è™šæ‹Ÿæœºæ ˆ 1.æ ˆä¸»è¦ç‰¹ç‚¹ â€‹ ç”±äºè·¨åŠå°æ€§çš„è®¾è®¡ï¼ŒJavaçš„æŒ‡ä»¤éƒ½æ˜¯æ ¹æ®æ ˆæ¥è®¾è®¡çš„ã€‚ä¸åŒå¹³å°CPUæ¶æ„ä¸åŒï¼Œæ‰€ä»¥ä¸èƒ½è®¾è®¡ä¸ºåŸºäºå¯„å­˜å™¨çš„ã€‚ä¼˜ç‚¹æ˜¯è·¨å¹³å°ï¼ŒæŒ‡ä»¤é›†å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®ç°ï¼Œç¼ºç‚¹æ˜¯æ€§èƒ½ä¸‹é™ï¼Œå®ç°åŒæ ·çš„åŠŸèƒ½éœ€è¦æ›´å¤šçš„æŒ‡ä»¤ã€‚**æ ˆæ˜¯è¿è¡Œæ—¶çš„å•ä½ï¼Œè€Œå †æ˜¯å­˜å‚¨çš„å•ä½ã€‚**å³ï¼šæ ˆè§£å†³ç¨‹åºçš„è¿è¡Œé—®é¢˜ï¼Œå³ç¨‹åºå¦‚ä½•æ‰§è¡Œï¼Œæˆ–è€…è¯´å¦‚ä½•å¤„ç†æ•°æ®ã€‚å †è§£å†³çš„æ˜¯æ•°æ®å­˜å‚¨çš„é—®é¢˜ï¼Œå³æ•°æ®æ€ä¹ˆæ”¾ã€æ”¾åœ¨å“ªå„¿ã€‚ ãƒ»Javaè™šæ‹Ÿæœºæ ˆæ˜¯ä»€ä¹ˆï¼Ÿ Javaè™šæ‹Ÿæœºæ ˆ( Java Virtual Machine Stack),æ—©æœŸä¹Ÿå«Javaæ ˆã€‚æ¯ä¸ªçº¿ç¨‹åœ¨åˆ›å»ºæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºæ ˆï¼Œå…¶å†…éƒ¨ä¿å­˜ä¸€ä¸ªä¸ªçš„æ ˆå¸§( Stack Frame),å¯¹åº”ç€ä¸€æ¬¡æ¬¡çš„Javaæ–¹æ³•è°ƒç”¨ï¼Œæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚ç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹ä¸€è‡´ã€‚ ãƒ»ä½œç”¨ ä¸»ç®¡Javaç¨‹åºçš„è¿è¡Œï¼Œå®ƒä¿å­˜æ–¹æ³•çš„å±€éƒ¨å˜é‡(8ç§åŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡çš„å¼•ç”¨åœ°å€)ã€éƒ¨åˆ†ç»“æœï¼Œå¹¶å‚ä¸æ–¹æ³•çš„è°ƒç”¨å’Œè¿”å›ã€‚ å±€éƒ¨å˜é‡vsæˆå‘˜å˜é‡ï¼ˆæˆ–å±æ€§ï¼‰ åŸºæœ¬æ•°æ®å˜é‡vså¼•ç”¨ç±»å‹å˜é‡(ç±»ã€æ•°ç»„ã€æ¥å£) ãƒ»æ ˆçš„ç‰¹ç‚¹ï¼ˆä¼˜ç‚¹ï¼‰ æ ˆæ˜¯ä¸€ç§å¿«é€Ÿæœ‰æ•ˆçš„åˆ†é…å­˜å‚¨æ–¹å¼ï¼Œè®¿é—®é€Ÿåº¦ä»ªæ¬¡äºç¨‹åºè®¡æ•°å™¨ã€‚ JVMç›´æ¥å¯¹Javaæ ˆçš„æ“ä½œåªæœ‰ä¸¤ä¸ªï¼š æ¯ä¸ªæ–¹æ³•æ‰§è¡Œï¼Œä¼´éšç€è¿›æ ˆ(å…¥æ ˆã€å‹æ ˆ) æ‰§è¡Œç»“æŸåçš„å‡ºæ ˆå·¥ä½œ å¯¹äºæ ˆæ¥è¯´ä¸å­˜åœ¨åƒåœ¾å›æ”¶é—®é¢˜ 2.æ ˆä¸­å¯èƒ½å‡ºç°çš„å¼‚å¸¸ â€‹ Javaè™šæ‹Ÿæœºè§„èŒƒå…è®¸Javaæ ˆçš„å¤§å°æ˜¯åŠ¨æ€çš„æˆ–è€…æ˜¯å›ºå®šä¸å˜çš„ã€‚ â€‹ å¦‚æœé‡‡ç”¨å›ºå®šå¤§å°çš„Javaè™šæ‹Ÿæœºæ ˆï¼Œé‚£æ¯ä¸€ä¸ªçº¿ç¨‹çš„Javaè™šæ‹Ÿæœºæ ˆå®¹é‡å¯ä»¥åœ¨çº¿ç¨‹åˆ›å»ºçš„æ—¶å€™ç‹¬ç«‹é€‰å®šã€‚å¦‚æœçº¿ç¨‹è¯·æ±‚åˆ†é…çš„æ ˆå®¹é‡è¶…è¿‡Javaè™šæ‹Ÿæœºæ ˆå…è®¸çš„æœ€å¤§å®¹é‡ï¼ŒJavaè™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºä¸€ä¸ªStackOverflowErrorå¼‚å¸¸ã€‚ â€‹ å¦‚æœJavaè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œå¹¶ä¸”åœ¨å°è¯•æ‰©å±•çš„æ—¶å€™æ— æ³•ä¸­è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œæˆ–è€…åœ¨åˆ›å»ºæ–°çš„çº¿ç¨‹æ—¶æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜å»åˆ›å»ºå¯¹åº”çš„è™šæ‹Ÿæœºæ ˆï¼Œé‚£Javaè™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºä¸€ä¸ª OutOfMemoryErrorå¼‚å¸¸ã€‚ è®¾ç½®æ ˆå¤§å° Xss size Sets the thread stack size( in bytes). Append the letter k or K to indicate KB, m or M to indicate MB, and g or G to indicate GB. The default value depends on the platform Linux/x64(64-bit): 1024 KB macos(64-bit): 1024 KB Oracle Solaris/x64(64-bit): 1024 KB Windows: The default value depends on virtual memory The following examples set the thread stack size to 1024 KB in different units -Xss1m -Xss1024k Xss1048576 3.æ ˆå­˜å‚¨å•ä½ æ ˆä¸­å­˜å‚¨ä»€ä¹ˆ ãƒ»æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ ˆï¼Œæ ˆä¸­çš„æ•°æ®éƒ½æ˜¯ä»¥æ ˆå¸§( Stack Frame)çš„æ ¼å¼å­˜åœ¨ã€‚ ãƒ»åœ¨è¿™ä¸ªçº¿ç¨‹ä¸Šæ­£åœ¨æ‰§è¡Œçš„æ ˆå¸§( Stack Frame) æ ˆå¸§æ˜¯ä¸€ä¸ªå†…å­˜åŒºå—ï¼Œæ˜¯ä¸€ä¸ªæ•°æ®é›†ï¼Œç»´ç³»ç€æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å„ç§æ•°æ®ä¿¡æ¯ å¤ä¹  ãƒ»OOPçš„åŸºæœ¬æ¦‚å¿µï¼šç±»ã€å¯¹è±¡ ãƒ»ç±»ä¸­åŸºæœ¬ç»“æ„ï¼šfield(å±æ€§ã€å­—æ®µã€åŸŸ)ã€ method JVMç›´æ¥å¯¹Javaæ ˆçš„æ“ä½œåªæœ‰ä¸¤ä¸ªï¼Œå°±æ˜¯å¯¹æ ˆå¸§çš„æ ˆå’Œå‡ºæ ˆï¼Œéµå¾ªâ€œå…ˆè¿›åå‡ºâ€/â€œåè¿›å…ˆå‡ºâ€åŸåˆ™ã€‚ åœ¨ä¸€æ¡æ´»åŠ¨çº¿ç¨‹ä¸­ï¼Œä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šï¼Œåªä¼šæœ‰ä¸€ä¸ªæ´»åŠ¨çš„æ ˆå¸§ã€‚å³åªæœ‰å½“å‰æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•çš„æ ˆå¸§ï¼ˆæ ˆé¡¶æ ˆå¸§ï¼‰æ˜¯æœ‰æ•ˆçš„ï¼Œè¿™ä¸ªæ ˆå¸§è¢«ç§°ä¸ºå½“å‰æ ˆå¸§( Current Frame),ä¸å½“å‰æ ˆå¸§ç›¸å¯¹åº”çš„æ–¹æ³•å°±æ˜¯å½“å‰æ–¹æ³•ï¼ˆ Current Method),å®šä¹‰è¿™ä¸ªæ–¹æ³•çš„ç±»å°±æ˜¯å½“å‰ç±»( Current Class). æ‰§è¡Œå¼•æ“è¿è¡Œçš„æ‰€æœ‰å­—èŠ‚ç æŒ‡ä»¤åªé’ˆå¯¹å½“å‰æ ˆå¸§è¿›è¡Œæ“ä½œã€‚ å¦‚æœåœ¨è¯¥æ–¹æ³•ä¸­è°ƒç”¨äº†å…¶ä»–æ–¹æ³•ï¼Œå¯¹åº”çš„æ–°çš„æ ˆå¸§ä¼šè¢«åˆ›å»ºå‡ºæ¥ï¼Œæ”¾åœ¨æ ˆçš„é¡¶ç«¯ï¼Œæˆä¸ºæ–°çš„å½“å‰å¸§ã€‚ ãƒ»ä¸åŒçº¿ç¨‹ä¸­æ‰€åŒ…å«çš„æ ˆå¸§æ˜¯ä¸å…è®¸å­˜åœ¨ç›¸äº’å¼•ç”¨çš„ï¼Œå³ä¸å¯èƒ½åœ¨ä¸€ä¸ªæ ˆå¸§ä¹‹ä¸­å¼•ç”¨å¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„æ ˆå¸§ ãƒ»å¦‚æœå½“å‰æ–¹æ³•è°ƒç”¨äº†å…¶ä»–æ–¹æ³•ï¼Œæ–¹æ³•è¿”å›ä¹‹é™…ï¼Œå½“å‰æ ˆå¸§ä¼šä¼ å›æ­¤æ–¹æ³•çš„æ‰§è¡Œç»“æœç»™å‰ä¸€ä¸ªæ ˆå¸§ï¼Œæ¥ç€ï¼Œè™šæ‹Ÿæœºä¼šä¸¢å¼ƒå½“å‰æ ˆå¸§ï¼Œä½¿å¾—å‰ä¸€ä¸ªæ ˆå¸§é‡æ–°æˆä¸ºå½“å‰æ ˆå¸§ã€‚ ãƒ»Javaæ–¹æ³•æœ‰ä¸¤ç§è¿”å›å‡½æ•°çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯æ­£å¸¸çš„å‡½æ•°è¿”å›ï¼Œä½¿ç”¨ returnæŒ‡ä»¤ï¼›å¦å¤–ä¸€ç§æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚ä¸ç®¡ä½¿ç”¨å“ªç§æ–¹å¼ï¼Œéƒ½ä¼šå¯¼è‡´æ ˆå¸§è¢«å¼¹å‡ºã€‚ 4.æ ˆå¸§ç»“æ„ ãƒ»å±€éƒ¨å˜é‡è¡¨(Local variables) ãƒ»æ“ä½œæ•°æ ˆ( Operand Stack)ï¼ˆæˆ–è¡¨è¾¾å¼æ ˆï¼‰ ãƒ»åŠ¨æ€é“¾æ¥( Dynamic Linking)ï¼ˆæˆ–æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„æ–¹æ³•å¼•ç”¨ï¼‰ ãƒ»æ–¹æ³•è¿”å›åœ°å€( Return Address)ï¼ˆæˆ–æ–¹æ³•æ­£å¸¸é€€å‡ºæˆ–è€…å¼‚å¸¸é€€å‡ºçš„å®šä¹‰ï¼‰ ãƒ»ä¸€äº›é™„åŠ ä¿¡æ¯ 1.å±€éƒ¨å˜é‡è¡¨ ãƒ»å±€éƒ¨å˜é‡è¡¨ä¹Ÿè¢«ç§°ä¹‹ä¸ºå±€éƒ¨å˜é‡æ•°ç»„æˆ–æœ¬åœ°å˜é‡è¡¨ ãƒ»å®šä¹‰ä¸ºä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œä¸»è¦ç”¨äºå­˜å‚¨æ–¹æ³•å‚æ•°å’Œå®šä¹‰åœ¨æ–¹æ³•ä½“å†…çš„å±€éƒ¨å˜é‡,è¿™äº›æ•°æ®ç±»å‹åŒ…æ‹¬å„ç±»åŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡å¼•ç”¨( reference),ä»¥åŠreturnAddressç±»å‹ã€‚ ãƒ»ç”±äºå±€éƒ¨å˜é‡è¡¨æ˜¯å»ºç«‹åœ¨çº¿ç¨‹çš„æ ˆä¸Šï¼Œæ˜¯çº¿ç¨‹çš„ç§æœ‰æ•°æ®ï¼Œå› æ­¤ä¸å­˜åœ¨æ•°æ®å®‰å…¨é—®é¢˜ ãƒ»å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å®¹é‡å¤§å°æ˜¯åœ¨ç¼–è¯‘æœŸç¡®å®šä¸‹æ¥çš„ï¼Œå¹¶ä¿å­˜åœ¨æ–¹æ³•çš„codeå±æ€§çš„ maximuim local variablesæ•°æ®é¡¹ä¸­ã€‚åœ¨æ–¹æ³•è¿è¡ŒæœŸé—´æ˜¯ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°çš„ã€‚ ãƒ»æ–¹æ³•åµŒå¥—è°ƒç”¨çš„æ¬¡æ•°ç”±æ ˆçš„å¤§å°å†³å®šã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ ˆè¶Šå¤§ï¼Œæ–¹æ³•åµŒå¥—è°ƒç”¨æ¬¡æ•°è¶Šå¤šã€‚å¯¹ä¸€ä¸ªå‡½æ•°è€Œè¨€ï¼Œå®ƒçš„å‚æ•°å’Œå±€éƒ¨å˜é‡è¶Šå¤šï¼Œä½¿å¾—å±€éƒ¨å˜é‡è¡¨è†¨èƒ€ï¼Œå®ƒçš„æ ˆå¸§å°±è¶Šå¤§ï¼Œä»¥æ»¡è¶³æ–¹æ³•è°ƒç”¨æ‰€éœ€ä¼ é€’çš„ä¿¡æ¯å¢—å¤§çš„éœ€æ±‚ã€‚è¿›è€Œå‡½æ•°è°ƒç”¨å°±ä¼šå ç”¨æ›´å¤šçš„æ ˆç©ºé—´ï¼Œå¯¼è‡´å…¶åµŒå¥—è°ƒç”¨æ¬¡æ•°å°±ä¼šå‡å°‘ã€‚ ãƒ»å±€éƒ¨å˜é‡è¡¨ä¸­çš„å˜é‡åªåœ¨å½“å‰æ–¹æ³•è°ƒç”¨ä¸­æœ‰æ•ˆã€‚åœ¨æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œè™šæ‹Ÿæœºé€šè¿‡ä½¿ç”¨å±€éƒ¨å˜é‡è¡¨å®Œæˆå‚æ•°å€¼åˆ°å‚æ•°å˜é‡åˆ—è¡¨çš„ä¼ é€’è¿‡ç¨‹ã€‚å½“æ–¹æ³•è°ƒç”¨ç»“æŸåï¼Œéšç€æ–¹æ³•æ ˆå¸§çš„é”€æ¯ï¼Œå±€éƒ¨å˜é‡è¡¨ä¹Ÿä¼šéšä¹‹é”€æ¯ã€‚ 2.å­—èŠ‚ç ä¸­æ–¹æ³•å†…éƒ¨ç»“æ„è§£æ 3.Slot ãƒ»å‚æ•°å€¼çš„å­˜æ”¾æ€»æ˜¯åœ¨å±€éƒ¨å˜é‡æ•°ç»„çš„ index0å¼€å§‹ï¼Œåˆ°æ•°ç»„é•¿åº¦-1çš„ç´¢å¼•ç»“æŸ ãƒ»å±€éƒ¨å˜é‡è¡¨ï¼Œæœ€åŸºæœ¬çš„å­˜å‚¨å•å…ƒæ˜¯Slotï¼ˆå˜é‡æ§½ï¼‰ ãƒ»å±€éƒ¨å˜é‡è¡¨ä¸­å­˜æ”¾ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹(8ç§)ï¼Œå¼•ç”¨ç±»å‹( reference), returnAddressaç±»å‹ã€‚ ãƒ»åœ¨å±€éƒ¨å˜é‡è¡¨é‡Œï¼Œ32ä½ä»¥å†…çš„ç±»å‹åªå ç”¨ä¸€ä¸ªslot(åŒ…æ‹¬returnAddressaç±»å‹ï¼‰ï¼Œ64ä½çš„ç±»å‹(longå’Œ double)å ç”¨ä¸¤ä¸ªslot. byteã€ shortã€charåœ¨å­˜å‚¨å‰è¢«è½¬æ¢ä¸ºint, booleanä¹Ÿè¢«è½¬æ¢ä¸ºint,0è¡¨ç¤º false,é0è¡¨ç¤ºtrueã€‚ longå’Œdoubleåˆ™å æ®ä¸¤ä¸ªSlotã€‚ ãƒ»JVMä¼šä¸ºå±€éƒ¨å˜é‡è¡¨ä¸­çš„æ¯ä¸€ä¸ªSlotéƒ½åˆ†é…ä¸€ä¸ªè®¿é—®ç´ å¼•ï¼Œé€šè¿‡è¿™ä¸ªç´ å¼•å³å¯æˆåŠŸè®¿é—®åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­æŒ‡å®šçš„å±€éƒ¨å˜é‡å€¼. ãƒ»å½“ä¸€ä¸ªå®ä¾‹æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå®ƒçš„æ–¹æ³•å‚æ•°å’Œæ–¹æ³•ä½“å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡å°†ä¼šæŒ‰ç…§é¡ºåºè¢«å¤åˆ¶åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­çš„æ¯ä¸€ä¸ªSlotä¸Š. ãƒ»å¦‚æœéœ€è¦è®¿é—®å±€éƒ¨å˜é‡è¡¨ä¸­ãƒ¼ä¸ª64bitçš„å±€éƒ¨å˜é‡å€¼æ—¶ï¼Œåªéœ€è¦ä½¿ç”¨å‰ä¸€ä¸ªç´ å¼•å³å¯ã€‚(æ¯”å¦‚ï¼šè®¿é—®1ongæˆ–doub1eç±»å‹å˜é‡). ãƒ»å¦‚æœå½“å‰å¸§æ˜¯ç”±æ„é€ æ–¹æ³•æˆ–è€…å®ä¾‹æ–¹æ³•åˆ›å»ºçš„ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å¼•ç”¨thiså°†ä¼šå­˜æ”¾åœ¨ indexä¸º0çš„slotå¤„ï¼Œå…¶ä½™çš„å‚æ•°æŒ‰ç…§å‚æ•°è¡¨é¡ºåºç»§ç»­æ’åˆ—. â€‹ æ ˆå¸§ä¸­çš„å±€éƒ¨å˜é‡è¡¨ä¸­çš„æ§½ä½æ˜¯å¯ä»¥é‡ç”¨çš„ï¼Œå¦‚æœä¸€ä¸ªå±€éƒ¨å˜é‡è¿‡äº†å…¶ä½œç”¨åŸŸï¼Œé‚£ä¹ˆåœ¨å…¶ä½œç”¨åŸŸä¹‹åç”³æ˜çš„æ–°çš„å±€éƒ¨å˜é‡å°±å¾ˆæœ‰å¯èƒ½ä¼šå¤ç”¨è¿‡æœŸå±€éƒ¨å˜é‡çš„æ§½ä½ï¼Œä»è€Œè¾¾åˆ°èŠ‚çœèµ„æºçš„ç›®çš„ã€‚ 7.é™æ€å˜é‡å’Œå±€éƒ¨å˜é‡å¯¹æ¯” $\\triangleright$ å‚æ•°è¡¨åˆ†é…å®Œæ¯•ä¹‹åï¼Œå†æ ¹æ®æ–¹æ³•ä½“å†…å®šä¹‰çš„å˜é‡çš„é¡ºåºå’Œä½œç”¨åŸŸåˆ†é… $\\triangleright$ æˆ‘ä»¬çŸ¥é“ç±»å˜é‡è¡¨æœ‰ä¸¤æ¬¡åˆå§‹åŒ–çš„æœºä¼šï¼Œç¬¬ä¸€æ¬¡æ˜¯åœ¨â€œå‡†å¤‡é˜¶æ®µâ€ï¼Œæ‰§è¡Œç³»ç»Ÿåˆå§‹åŒ–ï¼Œå¯¹ç±»å˜é‡è®¾ç½®é›¶å€¼ï¼Œå¦ä¸€æ¬¡åˆ™æ˜¯åœ¨â€œåˆå§‹åŒ–â€é˜¶æ®µï¼Œèµ‹äºˆç¨‹åºå‘˜åœ¨ä»£ç ä¸­å®šä¹‰çš„åˆå§‹å€¼. $\\triangleright$ å’Œç±»å˜é‡åˆå§‹åŒ–ä¸åŒçš„æ˜¯ï¼Œå±€éƒ¨å˜é‡è¡¨ä¸å­˜åœ¨ç³»ç»Ÿåˆå§‹åŒ–çš„è¿‡ç¨‹ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦å®šä¹‰äº†å±€éƒ¨å˜é‡åˆ™å¿…é¡»äººä¸ºçš„åˆå§‹åŒ–ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ã€‚ 12345//è¿™æ ·çš„ä»£ç æ˜¯é”™è¯¯çš„ï¼Œæ²¡æœ‰èµ‹å€¼ä¸èƒ½å¤Ÿä½¿ç”¨public void test() {int i;System.out .println(i);} å˜é‡çš„åˆ†ç±»ï¼š $\\triangleright$ æŒ‰ç…§æ•°æ®ç±»å‹åˆ†ï¼šåŸºæœ¬æ•°æ®ç±»å‹ã€å¼•ç”¨æ•°æ®ç±»å‹ $\\triangleright$ æŒ‰ç…§åœ¨ç±»ä¸­å£°æ˜çš„ä½ç½®åˆ†ï¼šæˆå‘˜å˜é‡ï¼šåœ¨ä½¿ç”¨å‰ï¼Œéƒ½ç»å†è¿‡é»˜è®¤åˆå§‹åŒ–èµ‹å€¼ ç±»å˜é‡ï¼š Linkingçš„ prepareé˜¶æ®µï¼šç»™ç±»å˜é‡é»˜è®¤èµ‹å€¼â€“&gt;initialé˜¶æ®µï¼šç»™é™æ€ä»£ç å—èµ‹å€¼ å®ä¾‹å˜é‡ï¼šéšç€å¯¹è±¡çš„åˆ›å»ºï¼Œä¼šåœ¨å †ç©ºé—´ä¸­åˆ†é…å®ä¾‹å˜é‡ç©ºé—´ï¼Œå¹¶è¿›è¡Œé»˜è®¤èµ‹å€¼ $\\triangleright$ å±€éƒ¨å˜é‡ï¼šåœ¨ä½¿ç”¨å‰ï¼Œå¿…é¡»è¦è¿›è¡Œæ˜¾å¼èµ‹å€¼çš„ï¼å¦åˆ™ï¼Œç¼–è¯‘ä¸é€šè¿‡ã€‚ è¡¥å……è¯´æ˜ $\\triangleright$ åœ¨æ ˆå¸§ä¸­ ï¼Œ ä¸æ€§èƒ½è°ƒä¼˜å…³ç³»æœ€ä¸ºå¯†åˆ‡çš„éƒ¨åˆ†å°±æ˜¯å‰é¢æåˆ°çš„å±€éƒ¨å˜é‡è¡¨ ã€‚åœ¨æ–¹æ³•æ‰§è¡Œæ—¶ ï¼Œ è™šæ‹Ÿæœºä½¿ç”¨å±€éƒ¨å˜é‡è¡¨å®Œæˆæ–¹æ³•çš„ä¼ é€’ ã€‚ $\\triangleright$ å±€éƒ¨å˜é‡è¡¨ä¸­çš„å˜é‡ä¹Ÿæ˜¯é‡è¦çš„åƒåœ¾å›æ”¶æ ¹èŠ‚ç‚¹ ï¼Œ åªè¦è¢«å±€éƒ¨å˜é‡è¡¨ä¸­ç›´æ¥æˆ–é—´æ¥å¼•ç”¨çš„å¯¹è±¡éƒ½ä¸ä¼šè¢«å›æ”¶ ã€‚ 8.æ“ä½œæ•°æ ˆ $\\triangleright$ æ¯ä¸€ä¸ªç‹¬ç«‹çš„æ ˆå¸§ä¸­é™¤äº†åŒ…å«å±€éƒ¨å˜é‡è¡¨ä»¥å¤–ï¼Œè¿˜åŒ…å«ä¸€ä¸ªåè¿›å…ˆå‡º(Last-In-First-0ut)çš„æ“ä½œæ•°æ ˆï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºè¡¨è¾¾å¼æ ˆ(Expression Stack). $\\triangleright$ æ“ä½œæ•°æ ˆï¼Œåœ¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ ¹æ®å­—èŠ‚ç æŒ‡ä»¤ï¼Œå¾€æ ˆä¸­å†™å…¥æ•°æ®æˆ–æå–æ•°æ®ï¼Œå³å…¥æ ˆ(push)/å‡ºæ ˆ(pop). æŸäº›å­—èŠ‚ç æŒ‡ä»¤å°†å€¼å‹å…¥æ“ä½œæ•°æ ˆï¼Œå…¶ä½™çš„å­—èŠ‚ç æŒ‡ä»¤å°†æ“ä½œæ•°å–å‡ºæ ˆã€‚ä½¿ç”¨å®ƒä»¬åå†æŠŠç»“æœå‹å…¥æ ˆã€‚æ¯”å¦‚ï¼šæ‰§è¡Œå¤åˆ¶ã€äº¤æ¢ã€æ±‚å’Œç­‰æ“ä½œ $\\triangleright$ å¦‚æœè¢«è°ƒç”¨çš„æ–¹æ³•å¸¦æœ‰è¿”å›å€¼çš„è¯ï¼Œå…¶è¿”å›å€¼å°†ä¼šè¢«å‹å…¥å½“å‰æ ˆå¸§çš„æ“ä½œæ•°æ ˆä¸­ï¼Œå¹¶æ›´æ–°PCå¯„å­˜å™¨ä¸­ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚ $\\triangleright$ æ“ä½œæ•°æ ˆä¸­å…ƒç´ çš„æ•°æ®ç±»å‹å¿…é¡»ä¸å­—èŠ‚ç æŒ‡ä»¤çš„åºåˆ—ä¸¥æ ¼åŒ¹é…ï¼Œè¿™ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘å™¨æœŸé—´è¿›è¡ŒéªŒè¯ï¼ŒåŒæ—¶åœ¨ç±»åŠ è½½è¿‡ç¨‹ä¸­çš„ç±»æ£€éªŒé˜¶æ®µçš„æ•°æ®æµåˆ†æé˜¶æ®µè¦å†æ¬¡éªŒè¯ã€‚ $\\triangleright$ å¦å¤–ï¼Œæˆ‘ä»¬è¯´Javaè™šæ‹Ÿæœºçš„è§£é‡Šå¼•æ“æ˜¯åŸºäºæ ˆçš„æ‰§è¡Œå¼•æ“ï¼Œå…¶ä¸­çš„æ ˆæŒ‡çš„å°±æ˜¯æ“ä½œæ•°æ ˆã€‚ $\\triangleright$ æ“ä½œæ•°æ ˆï¼Œä¸»è¦ç”¨äºä¿å­˜è®¡ç®—è¿‡ç¨‹çš„ä¸­é—´ç»“æœï¼ŒåŒæ—¶ä½œä¸ºè®¡ç®—è¿‡ç¨‹ä¸­å˜é‡ä¸´æ—¶çš„å­˜å‚¨ç©ºé—´ã€‚ $\\triangleright$ æ“ä½œæ•°æ ˆå°±æ˜¯JVMæ‰§è¡Œå¼•æ“çš„-ä¸€ä¸ªå·¥ä½œåŒºï¼Œå½“ä¸€ä¸ªæ–¹æ³•åˆšå¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€ä¸ªæ–°çš„æ ˆå¸§ä¹Ÿä¼šéšä¹‹è¢«åˆ›å»ºå‡ºæ¥ï¼Œè¿™ä¸ªæ–¹æ³•çš„æ“ä½œæ•°æ ˆæ˜¯ç©ºçš„ã€‚ $\\triangleright$ æ¯ä¸€ä¸ªæ“ä½œæ•°æ ˆéƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªæ˜ç¡®çš„æ ˆæ·±åº¦ç”¨äºå­˜å‚¨æ•°å€¼ï¼Œå…¶æ‰€éœ€çš„æœ€å¤§æ·±åº¦åœ¨ç¼–è¯‘æœŸå°±å®šä¹‰å¥½äº†ï¼Œä¿å­˜åœ¨æ–¹æ³•çš„Codeå±æ€§ä¸­ï¼Œä¸ºmax stackçš„å€¼ã€‚ $\\triangleright$ æ ˆä¸­çš„ä»»ä½•ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯å¯ä»¥ä»»æ„çš„Javaæ•°æ®ç±»å‹ã€‚ â¢32bitçš„ç±»å‹å ç”¨ä¸€ä¸ªæ ˆå•ä½æ·±åº¦ â¢64bitçš„ç±»å‹å ç”¨ä¸¤ä¸ªæ ˆå•ä½æ·±åº¦ $\\triangleright$ æ“ä½œæ•°æ ˆå¹¶éé‡‡ç”¨è®¿é—®ç´¢å¼•çš„æ–¹å¼æ¥è¿›è¡Œæ•°æ®è®¿é—®çš„ï¼Œè€Œæ˜¯åªèƒ½é€šè¿‡æ ‡å‡†çš„å…¥æ ˆ(push) å’Œå‡ºæ ˆ(pop)æ“ä½œæ¥å®Œæˆä¸€æ¬¡æ•°æ®è®¿é—®ã€‚ ä»£ç ç¤ºä¾‹ï¼š 12345public void testAddOperation(){byte i=15;int j=8;int k=i + j;} å›¾ä¾‹ï¼š 9.æ ˆé¡¶ç¼“å­˜ï¼ˆTop-of-Stack-Cashingï¼‰æŠ€æœ¯ $\\star$ å‰é¢æè¿‡ï¼ŒåŸºäºæ ˆå¼æ¶æ„çš„è™›æ‹Ÿæœºæ‰€ä½¿ç”¨çš„é›¶åœ°å€æŒ‡ä»¤æ›´åŠ ç´§å‡‘ï¼Œä½†å®Œæˆä¸€é¡¹æ“ä½œçš„æ—¶å€™å¿…ç„¶éœ€è¦ä½¿ç”¨æ›´å¤šçš„å…¥æ ˆå’Œå‡ºæ ˆæŒ‡ä»¤ï¼Œè¿™åŒæ—¶ä¹Ÿå°±æ„å‘³ç€å°†éœ€è¦æ›´å¤šçš„æŒ‡ä»¤åˆ†æ´¾( instruction dispatch)æ¬¡æ•°å’Œå†…å­˜è¯»/å†™æ¬¡æ•°ã€‚ $\\star$ ç”±äºæ“ä½œæ•°æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œå› æ­¤é¢‘ç¹åœ°æ‰§è¡Œå†…å­˜è¯»/å†™æ“ä½œå¿…ç„¶ä¼šå½±å“æ‰§è¡Œé€Ÿåº¦ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ Hotspot JVMçš„è®¾è®¡è€…ä»¬æå‡ºäº†æ ˆé¡¶ç¼“å­˜(ToS,Top-of- Stack Cashing)æŠ€æœ¯ï¼Œå°†æ ˆé¡¶å…ƒç´ å…¨éƒ¨ç¼“å­˜åœ¨ç‰©ç†CPUçš„å¯„å­˜å™¨ä¸­ï¼Œä»¥æ­¤é™ä½å¯¹å†…å­˜çš„è¯»/å†™æ¬¡æ•°ï¼Œæå‡æ‰§è¡Œå¼•æ“çš„æ‰§è¡Œæ•ˆç‡ã€‚ 10.åŠ¨æ€é“¾æ¥ $\\star$ æ¯ä¸€ä¸ªæ ˆå¸§å†…éƒ¨éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± ä¸­è¯¥æ ˆå¸§æ‰€å±æ–¹æ³•çš„å¼•ç”¨,åŒ…å«è¿™ä¸ªå¼•ç”¨çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ”¯æŒå½“å‰æ–¹æ³•çš„ä»£ç èƒ½å¤Ÿå®ç°åŠ¨æ€é“¾æ¥( Dynamic Linking)ã€‚æ¯”å¦‚ï¼šinvoke dynamic æŒ‡ä»¤ã€‚ $\\star$ åœ¨Javaæºæ–‡ä»¶è¢«ç¼–è¯‘åˆ°å­—èŠ‚ç æ–‡ä»¶ä¸­æ—¶ï¼Œæ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•å¼•ç”¨éƒ½ä½œä¸ºç¬¦å·å¼•ç”¨( Symbolic Reference)ä¿å­˜åœ¨classæ–‡ä»¶çš„å¸¸é‡æ± é‡Œã€‚æ¯”å¦‚ï¼šæè¿°ä¸€ä¸ªæ–¹æ³•è°ƒç”¨äº†å¦å¤–çš„å…¶ä»–æ–¹æ³•æ—¶ï¼Œå°±æ˜¯é€šè¿‡å¸¸é‡æ± ä¸­æŒ‡å‘æ–¹æ³•çš„ç¬¦å·å¼•ç”¨æ¥è¡¨ç¤ºçš„ï¼Œé‚£ä¹ˆåŠ¨æ€é“¾æ¥çš„ä½œç”¨å°±æ˜¯ä¸ºäº†å°†è¿™äº›ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºè°ƒç”¨æ–¹æ³•çš„ç›´æ¥å¼•ç”¨ã€‚ 11.æ–¹æ³•çš„è°ƒç”¨ åœ¨JVMä¸­ï¼Œå°†ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºè°ƒç”¨æ–¹æ³•çš„ç›´æ¥å¼•ç”¨ä¸æ–¹æ³•çš„ç»‘å®šæœºåˆ¶ç›¸å…³ã€‚ é™æ€é“¾æ¥ï¼š $\\star$ å½“ä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶è¢«è£…è½½è¿›JVMå†…éƒ¨æ—¶ï¼Œå¦‚æœè¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•åœ¨ç¼–è¯‘æœŸå¯çŸ¥ï¼Œä¸”è¿è¡ŒæœŸä¿æŒä¸å˜æ—¶ã€‚è¿™ç§æƒ…å†µä¸‹å°†è°ƒç”¨æ–¹æ³•çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºé™æ€é“¾æ¥ åŠ¨æ€é“¾æ¥ï¼š $\\star$ å¦‚æœè¢«è°ƒç”¨çš„æ–¹æ³•åœ¨ç¼–è¯‘æœŸæ— æ³•è¢«ç¡®å®šä¸‹æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªèƒ½å¤Ÿåœ¨ç¨‹åºè¿è¡ŒæœŸå°†è°ƒç”¨æ–¹æ³•çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œç”±äºè¿™ç§å¼•ç”¨è½¬æ¢è¿‡ç¨‹å…·å¤‡åŠ¨æ€æ€§ï¼Œå› æ­¤ä¹Ÿå°±è¢«ç§°ä¹‹ä¸ºåŠ¨æ€é“¾æ¥ã€‚ å¯¹åº”çš„æ–¹æ³•çš„ç»‘å®šæœºåˆ¶ä¸ºï¼šæ—©æœŸç»‘å®š(Early Binding)å’Œæ™šæœŸç»‘å®š( Late Binding)ã€‚ç»‘å®šæ˜¯ä¸€ä¸ªå­—æ®µã€æ–¹æ³•æˆ–è€…ç±»åœ¨ç¬¦å·å¼•ç”¨è¢«æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ï¼Œè¿™ä»…ä»…å‘ç”Ÿä¸€æ¬¡ã€‚ æ—©æœŸç»‘å®šï¼š $\\star$ æ—©æœŸç»‘å®šå°±æ˜¯æŒ‡è¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•å¦‚æœåœ¨ç¼–è¯‘æœŸå¯çŸ¥ï¼Œä¸”è¿è¡ŒæœŸä¿æŒä¸å˜æ—¶ï¼Œå³å¯å°†è¿™ä¸ªæ–¹æ³•ä¸æ‰€å±çš„ç±»å‹è¿›è¡Œç»‘å®šï¼Œè¿™æ ·ä¸€æ¥ï¼Œç”±äºæ˜ç¡®äº†è¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•ç©¶ç«Ÿæ˜¯å“ªä¸€ä¸ªï¼Œå› æ­¤ä¹Ÿå°±å¯ä»¥ä½¿ç”¨é™æ€é“¾æ¥çš„æ–¹å¼å°†ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ã€‚ æ™šæœŸç»‘å®šï¼š $\\star$ å¦‚æœè¢«è°ƒç”¨çš„æ–¹æ³•åœ¨ç¼–è¯‘æœŸæ— æ³•è¢«ç¡®å®šä¸‹æ¥ï¼Œåªèƒ½å¤Ÿåœ¨ç¨‹åºè¿è¡ŒæœŸæ ¹æ®å®é™…çš„ç±»å‹ç»‘å®šç›¸å…³çš„æ–¹æ³•ï¼Œè¿™ç§ç»‘å®šæ–¹å¼ä¹Ÿå°±è¢«ç§°ä¹‹ä¸ºæ™šæœŸç»‘å®šã€‚ 12.è™šæ–¹æ³•ã€éè™šæ–¹æ³• éè™šæ–¹æ³•ï¼š å¦‚æœæ–¹æ³•åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šäº†å…·ä½“çš„è°ƒç”¨ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬åœ¨è¿è¡Œæ—¶æ˜¯ä¸å¯å˜çš„ã€‚è¿™æ ·çš„æ–¹æ³•ç§°ä¸ºéè™šæ–¹æ³•ã€‚é™æ€æ–¹æ³•ã€ç§æœ‰æ–¹æ³•ã€finalæ–¹æ³•ã€å®ä¾‹æ„é€ å™¨ã€çˆ¶ç±»æ–¹æ³•éƒ½æ˜¯éè™šæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•ç§°ä¸ºè™šæ–¹æ³•ã€‚ â€‹ éšç€é«˜çº§è¯­è¨€çš„æ¨ªç©ºå‡ºä¸–ï¼Œç±»ä¼¼äºJavaãƒ¼æ ·çš„åŸºäºé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€å¦‚ä»Šè¶Šæ¥è¶Šå¤šï¼Œå°½ç®¡è¿™ç±»ç¼–ç¨‹è¯­è¨€åœ¨è¯­æ³•é£æ ¼ä¸Šå­˜åœ¨ä¸€å®šçš„å·®åˆ«ï¼Œä½†æ˜¯å®ƒä»¬å½¼æ­¤ä¹‹é—´å§‹ç»ˆä¿æŒç€ä¸€ä¸ªå…±æ€§ï¼Œé‚£å°±æ˜¯éƒ½æ”¯æŒå°è£…ã€ç»§æ‰¿å’Œå¤šæ€ç­‰é¢å‘å¯¹è±¡ç‰¹æ€§ï¼Œæ—¢ç„¶è¿™ä¸€ç±»çš„ç¼–ç¨‹è¯­è¨€å…·å¤‡å¤šæ€ç‰¹æ€§ï¼Œé‚£ä¹ˆè‡ªç„¶ä¹Ÿå°±å…·å¤‡æ—©æœŸç»‘å®šå’Œæ™šæœŸç»‘å®šä¸¤ç§ç»‘å®šæ–¹å¼ã€‚ â€‹ Javaä¸­ä»»ä½•ä¸€ä¸ªæ™®é€šçš„æ–¹æ³•å…¶å®éƒ½å…·å¤‡è™šå‡½æ•°çš„ç‰¹å¾ï¼Œå®ƒä»¬ç›¸å½“äºCè¯­è¨€ä¸­çš„è™šå‡½æ•°(Cä¸­åˆ™éœ€è¦ä½¿ç”¨å…³é”®å­— virtualæ¥æ˜¾å¼å®šä¹‰)ã€‚å¦‚æœåœ¨Javaç¨‹åºä¸­ä¸å¸Œæœ›æŸä¸ªæ–¹æ³•æ‹¥æœ‰è™šå‡½æ•°çš„ç‰¹å¾æ—¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å…³é”®å­—finalæ¥æ ‡è®°è¿™ä¸ªæ–¹æ³•ã€‚ è™šæ‹Ÿæœºä¸­æä¾›äº†ä»¥ä¸‹å‡ æ¡æ–¹æ³•è°ƒç”¨æŒ‡ä»¤ æ™®é€šè°ƒç”¨æŒ‡ä»¤ invokestatic:è°ƒç”¨é™æ€æ–¹æ³•ï¼Œè§£æé˜¶æ®µç¡®å®šå”¯ä¸€æ–¹æ³•ç‰ˆæœ¬ invokespecial:è°ƒç”¨****æ–¹æ³•ã€ç§æœ‰åŠçˆ¶ç±»æ–¹æ³•ï¼Œè§£æé˜¶æ®µç¡®å®šå”¯ä¸€æ–¹æ³•ç‰ˆæœ¬ involkevirtual:è°ƒç”¨æ‰€æœ‰è™šæ–¹æ³• invokeinterface:è°ƒç”¨æ¥å£æ–¹æ³• åŠ¨æ€è°ƒç”¨æŒ‡ä»¤ invokedynamic:åŠ¨æ€è§£æå‡ºéœ€è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œç„¶åæ‰§è¡Œå‰å››æ¡æŒ‡ä»¤å›ºåŒ–åœ¨è™šæ‹Ÿæœºå†…éƒ¨ï¼Œæ–¹æ³•çš„è°ƒç”¨æ‰§è¡Œä¸å¯äººä¸ºå¹²é¢„ï¼Œè€Œ invokedynamicæŒ‡ä»¤åˆ™æ”¯æŒç”±ç”¨æˆ·ç¡®å®šæ–¹æ³•ç‰ˆæœ¬ã€‚å…¶ä¸­ invokestatic æŒ‡ä»¤å’Œ invokespecial æŒ‡ä»¤è°ƒç”¨çš„æ–¹æ³•ç§°ä¸ºéè™šæ–¹æ³•ï¼Œå…¶ä½™çš„( final ä¿®é¥°çš„é™¤å¤–)ç§°ä¸ºè™šæ–¹æ³•ã€‚ 13.Invokedynamic $\\star$ JVMå­—èŠ‚ç æŒ‡ä»¤é›†ä¸€ç›´æ¯”è¾ƒç¨³å®šï¼Œä¸€ç›´åˆ°Java7ä¸­ã‚ªå¢—åŠ äº†ä¸€ä¸ª invokedynamic æŒ‡ä»¤ï¼Œè¿™æ˜¯ Java ä¸ºäº†å®ç°ã€ŒåŠ¨æ€ç±»å‹è¯­è¨€ã€æ”¯æŒè€Œåšçš„ç§æ”¹è¿›ã€‚ $\\star$ ä½†æ˜¯åœ¨ Java7 ä¸­å¹¶æ²¡æœ‰æä¾›ç›´æ¥ç”Ÿæˆ invokedynamic æŒ‡ä»¤çš„æ–¹æ³•ï¼Œéœ€è¦å€ŸåŠ© ASM è¿™ç§åº•å±‚å­—èŠ‚ç å·¥å…·æ¥äº§ç”Ÿ invokedynamic æŒ‡ä»¤ã€‚ç›´åˆ° Java8 çš„ Lambda è¡¨è¾¾å¼çš„å‡ºç°ï¼Œnvokedynamic æŒ‡ä»¤çš„ç”Ÿæˆï¼Œåœ¨ Java ä¸­æ‰æœ‰äº†ç›´æ¥çš„ç”Ÿæˆæ–¹å¼ã€‚ $\\star$ Java7 ä¸­å¢åŠ çš„åŠ¨æ€è¯­è¨€ç±»å‹æ”¯æŒçš„æœ¬è´¨æ˜¯å¯¹ Java è™šæ‹Ÿæœºè§„èŒƒçš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯å¯¹ Java è¯­è¨€è§„åˆ™çš„ä¿®æ”¹ï¼Œè¿™ä¸€å—ç›¸å¯¹æ¥è®²æ¯”è¾ƒå¤æ‚ï¼Œå¢åŠ äº†è™šæ‹Ÿæœºä¸­çš„æ–¹æ³•è°ƒç”¨ï¼Œæœ€ç›´æ¥çš„å—ç›Šè€…å°±æ˜¯è¿è¡Œåœ¨ Java å¹³å°çš„åŠ¨æ€è¯­è¨€çš„ç¼–è¯‘å™¨ã€‚ åŠ¨æ€ç±»å‹è¯­è¨€å’Œé™æ€ç±»å‹è¯­è¨€ åŠ¨æ€ç±»å‹è¯­è¨€å’Œé™æ€ç±»å‹è¯­è¨€ä¸¤è€…çš„åŒºåˆ«å°±åœ¨äºå¯¹ç±»å‹çš„æ£€æŸ¥æ˜¯åœ¨ç¼–è¯‘æœŸè¿˜æ˜¯åœ¨è¿è¡ŒæœŸï¼Œæ»¡è¶³å‰è€…å°±æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œåä¹‹æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ã€‚é™æ€ç±»å‹è¯­è¨€æ˜¯åˆ¤æ–­å˜é‡è‡ªèº«çš„ç±»å‹ä¿¡æ¯ï¼›åŠ¨æ€ç±»å‹è¯­è¨€æ˜¯åˆ¤æ–­å˜é‡å€¼çš„ç±»å‹ä¿¡æ¯ï¼Œå˜é‡æ²¡æœ‰ç±»å‹ä¿¡æ¯ï¼Œå˜é‡å€¼æ‰æœ‰ç±»å‹ä¿¡æ¯ï¼Œè¿™æ˜¯åŠ¨æ€è¯­è¨€ï¼ˆæ¯”å¦‚Pythonï¼‰çš„ä¸€ä¸ªé‡è¦ç‰¹å¾ã€‚ 14.æ–¹æ³•é‡å†™æœ¬è´¨ Javaè¯­è¨€ä¸­æ–¹æ³•é‡å†™çš„æœ¬è´¨ 1.æ‰¾åˆ°æ“ä½œæ•°æ ˆé¡¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ‰€æ‰§è¡Œçš„å¯¹è±¡çš„å®é™…ç±»å‹ï¼Œè®°ä½œC 2.å¦‚æœåœ¨ç±»å‹Cä¸­æ‰¾åˆ°ä¸å¸¸é‡ä¸­çš„æè¿°ç¬¦åˆç®€å•åç§°éƒ½ç›¸ç¬¦çš„æ–¹æ³•ï¼Œåˆ™è¿›è¡Œè®¿é—®æƒé™æ ¡éªŒï¼Œå¦‚æœé€šè¿‡åˆ™è¿”å›è¿™ä¸ªæ–¹æ³•çš„ç›´æ¥å¼•ç”¨ï¼ŒæŸ»æ‰¾è¿‡ç¨‹ç»“æŸï¼›å¦‚æœä¸é€šè¿‡ï¼Œåˆ™è¿”å›java.lang.Illegal AccessErrorå¼‚å¸¸ã€‚ 3.å¦åˆ™ï¼ŒæŒ‰ç…§ç»§æ‰¿å…³ç³»ä»ä¸‹å¾€ä¸Šä¾æ¬¡å¯¹Cçš„å„ä¸ªçˆ¶ç±»è¿›è¡Œç¬¬2æ­¥çš„æœç´¢å’ŒéªŒè¯è¿‡ç¨‹ã€‚ 4.å¦‚æœå§‹ç»ˆæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æ–¹æ³•ï¼Œåˆ™æŠ›å‡ºjava.lang. AbstractMethodErrorå¼‚å¸¸ã€‚ Illegal Accessarrorä»‹ç»ï¼š ç¨‹åºè¯•å›¾è®¿é—®æˆ–ä¿®æ”¹ä¸€ä¸ªå±æ€§æˆ–è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªå±æ€§æˆ–æ–¹æ³•ï¼Œä½ æ²¡æœ‰æƒé™è®¿é—®ã€‚ä¸€èˆ¬çš„ï¼Œè¿™ä¸ªä¼šå¼•èµ·ç¼–è¯‘å™¨å¼‚å¸¸ã€‚è¿™ä¸ªé”™è¯¯å¦‚æœå‘ç”Ÿåœ¨è¿è¡Œæ—¶ï¼Œå°±è¯´æ˜ä¸€ä¸ªç±»å‘ç”Ÿäº†ä¸å…¼å®¹çš„æ”¹å˜ã€‚ ãƒ»åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­ï¼Œä¼šå¾ˆé¢‘ç¹çš„ä½¿ç”¨åˆ°åŠ¨æ€åˆ†æ´¾ï¼Œå¦‚æœåœ¨æ¯æ¬¡åŠ¨æ€åˆ†æ´¾çš„è¿‡ç¨‹ä¸­éƒ½è¦é‡æ–°åœ¨ç±»çš„æ–¹æ³•å…ƒæ•°æ®ä¸­æœç´¢åˆé€‚çš„ç›®æ ‡çš„è¯å°±å¯èƒ½å½±å“åˆ°æ‰§è¡Œæ•ˆç‡ã€‚å› æ­¤ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼ŒJVMé‡‡ç”¨åœ¨ç±»çš„æ–¹æ³•åŒºå»ºç«‹ä¸€ä¸ªè™šæ–¹æ³•è¡¨( virtual method tabble)ï¼ˆéè™šæ–¹æ³•ä¸ä¼šå‡ºç°åœ¨è¡¨ä¸­ï¼‰æ¥å®ç°ã€‚ä½¿ç”¨ç´¢å¼•è¡¨æ¥ä»£æ›¿æŸ¥æ‰¾ã€‚ ãƒ»æ¯ä¸ªç±»ä¸­éƒ½æœ‰ä¸€ä¸ªè™šæ–¹æ³•è¡¨ï¼Œè¡¨ä¸­å­˜æ”¾ç€å„ä¸ªæ–¹æ³•çš„å®é™…å…¥å£ ãƒ»é‚£ä¹ˆè™šæ–¹æ³•è¡¨ä»€ä¹ˆæ—¶å€™è¢«åˆ›å»ºï¼Ÿ è™šæ–¹æ³•è¡¨ä¼šåœ¨ç±»åŠ è½½çš„é“¾æ¥é˜¶æ®µè¢«åˆ›å»ºå¹¶å¼€å§‹åˆå§‹åŒ–ï¼Œç±»çš„å˜é‡åˆå§‹å€¼å‡†å¤‡å®Œæˆä¹‹åï¼ŒJVMä¼šæŠŠè¯¥ç±»çš„æ–¹æ³•è¡¨ä¹Ÿåˆå§‹åŒ–å®Œæ¯•ã€‚ 15.æ–¹æ³•è¿”å›åœ°å€ å­˜æ”¾è°ƒç”¨è¯¥æ–¹æ³•çš„PCå¯„å­˜å™¨çš„å€¼ã€‚ **ä¸€ä¸ªæ–¹æ³•çš„ç»“æŸï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š**1.æ­£å¸¸æ‰§è¡Œå®Œæˆã€‚2.å‡ºç°æœªå¤„ç†çš„å¼‚å¸¸ï¼Œéæ­£å¸¸é€€å‡º â€‹ æ— è®ºé€šè¿‡å“ªç§æ–¹å¼é€€å‡ºï¼Œåœ¨æ–¹æ³•é€€å‡ºåéƒ½è¿”å›åˆ°è¯¥æ–¹æ³•è¢«è°ƒç”¨çš„ä½ç½®ã€‚æ–¹æ³•æ­£å¸¸é€€å‡ºæ—¶ï¼Œè°ƒç”¨è€…çš„PCè®¡æ•°å™¨çš„å€¼ä½œä¸ºè¿”å›åœ°å€ï¼Œå³è°ƒç”¨è¯¥æ–¹æ³•çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ã€‚è€Œé€šè¿‡å¼‚å¸¸é€€å‡ºçš„ï¼Œè¿”å›åœ°å€æ˜¯è¦é€šè¿‡å¼‚å¸¸è¡¨æ¥ç¡®å®šï¼Œæ ˆå¸§ä¸­ä¸€èˆ¬ä¸ä¼šä¿å­˜è¿™éƒ¨åˆ†ä¿¡æ¯ã€‚ â€‹ æœ¬è´¨ä¸Šï¼Œæ–¹æ³•çš„é€€å‡ºå°±æ˜¯å½“å‰æ ˆå¸§å‡ºæ ˆçš„è¿‡ç¨‹ã€‚æ­¤æ—¶ï¼Œéœ€è¦æ¢å¤ä¸Šå±‚æ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€å°†è¿”å›å€¼å‹å…¥è°ƒç”¨è€…æ ˆå¸§çš„æ“ä½œæ•°æ ˆã€è®¾ç½®PCå¯„å­˜å™¨å€¼ç­‰ï¼Œè®©è°ƒç”¨è€…æ–¹æ³•ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚ â€‹ æ­£å¸¸å®Œæˆå‡ºå£å’Œå¼‚å¸¸å®Œæˆå‡ºå£çš„åŒºåˆ«åœ¨äºï¼šé€šè¿‡å¼‚å¸¸å®Œæˆå‡ºå£é€€å‡ºçš„ä¸ä¼šç»™ä»–çš„ä¸Šå±‚è°ƒç”¨è€…äº§ç”Ÿä»»ä½•çš„è¿”å›å€¼ã€‚ å½“ä¸€ä¸ªæ–¹æ³•å¼€å§‹æ‰§è¡Œåï¼Œåªæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥é€€å‡ºè¿™ä¸ªæ–¹æ³• 1ã€æ‰§è¡Œå¼•æ“é‡åˆ°ä»»æ„ä¸€ä¸ªæ–¹æ³•è¿”å›çš„å­—èŠ‚ç æŒ‡ä»¤( return),ä¼šæœ‰è¿”å›å€¼ä¼ é€’ç»™ä¸Šå±‚çš„æ–¹æ³•è°ƒç”¨è€…ï¼Œç®€ç§°æ­£å¸¸å®Œæˆå‡ºå£ â€‹ ä¸€ä¸ªæ–¹æ³•åœ¨æ­£å¸¸è°ƒç”¨å®Œæˆä¹‹åç©¶ç«Ÿéœ€è¦ä½¿ç”¨å“ªä¸€ä¸ªè¿”å›æŒ‡ä»¤è¿˜éœ€è¦æ ¹æ®æ–¹æ³•è¿”å›å€¼çš„å®é™…æ•°æ®ç±»å‹è€Œå®šã€‚ â€‹ åœ¨å­—èŠ‚ç æŒ‡ä»¤ä¸­ï¼Œè¿”å›æŒ‡ä»¤åŒ…å« lreturn(å½“è¿”å›å€¼æ˜¯ booleanã€byteã€charã€shorthå’Œintç±»å‹æ—¶ä½¿ç”¨)ã€lreturnã€ freturnã€ dreturnä»¥åŠ areturn,å¦å¤–è¿˜æœ‰ä¸€ä¸ª returnæŒ‡ä»¤ä¾›å£°æ˜ä¸ºvoidçš„æ–¹æ³•ã€å®ä¾‹åˆå§‹åŒ–æ–¹æ³•ã€ç±»å’Œæ¥å£çš„åˆå§‹åŒ–æ–¹æ³•ä½¿ç”¨ã€‚ 2ã€åœ¨æ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å¼‚å¸¸( Exception),å¹¶ä¸”è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰åœ¨æ–¹æ³•å†…è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå°±æ˜¯åªè¦åœ¨æœ¬æ–¹æ³•çš„å¼‚å¸¸è¡¨ä¸­æ²¡æœ‰æœç´¢åˆ°åŒ¹é…çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œå°±ä¼šå¯¼è‡´æ–¹æ³•é€€å‡ºã€‚ç®€ç§°å¼‚å¸¸å®Œæˆå‡ºå£ã€‚ æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸æ—¶çš„å¼‚å¸¸å¤„ç†ï¼Œå­˜å‚¨åœ¨ä¸€ä¸ªå¼‚å¸¸å¤„ç†è¡¨ï¼Œæ–¹ä¾¿åœ¨å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™æ‰¾åˆ°å¤„ç†å¼‚å¸¸çš„ä»£ç ã€‚ 16.ä¸€äº›é™„åŠ ä¿¡æ¯(ç•¥) 17.é¢è¯•é¢˜ ä¸¾ä¾‹æ ˆæº¢å‡ºçš„æƒ…å†µï¼Ÿ( StackOverflowError):2.æ ˆä¸­å¯èƒ½å‡ºç°çš„å¼‚å¸¸ é€šè¿‡-Xssè®¾ç½®æ ˆçš„å¤§å°ï¼›OOM è°ƒæ•´æ ˆå¤§å°ï¼Œå°±èƒ½ä¿è¯ä¸å‡ºç°æº¢å‡ºå—ï¼Ÿä¸èƒ½ åˆ†é…çš„æ ˆå†…å­˜è¶Šå¤§è¶Šå¥½å—ï¼Ÿä¸æ˜¯ åƒåœ¾å›æ”¶æ˜¯å¦ä¼šæ¶‰åŠåˆ°è™šæ‹Ÿæœºæ ˆï¼Ÿä¸ä¼šçš„ï¼ æ–¹æ³•ä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡æ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Ÿ1.å±€éƒ¨å˜é‡è¡¨ å…­ã€æœ¬åœ°æ–¹æ³•æ¥å£ ä»€ä¹ˆæ˜¯æœ¬åœ°æ–¹æ³•ï¼Ÿ ç®€å•åœ°è®²ï¼Œä¸€ä¸ª Native Method å°±æ˜¯ä¸€ä¸ªJavaè°ƒç”¨éJavaä»£ç çš„æ¥å£ã€‚ä¸€ä¸ªNative Methodæ˜¯è¿™æ ·ä¸€ä¸ªJavaæ–¹æ³•ï¼šè¯¥æ–¹æ³•çš„å®ç°ç”±éJavaè¯­è¨€å®ç°ï¼Œæ¯”å¦‚C.è¿™ä¸ªç‰¹å¾å¹¶éJavaæ‰€ç‰¹æœ‰ï¼Œå¾ˆå¤šå…¶å®ƒçš„ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è¿™ä¸€æœºåˆ¶ï¼Œæ¯”å¦‚åœ¨ C ä¸­ï¼Œä½ å¯ä»¥ç”¨ extern&quot;c&quot;å‘ŠçŸ¥C ç¼–è¯‘å™¨å»è°ƒç”¨ä¸€ä¸ªCçš„å‡½æ•°ã€‚ A native method is a Java method whose Implementation is provided by non-java code åœ¨å®šä¹‰ãƒ¼ä¸ª native method æ—¶ï¼Œå¹¶ä¸æä¾›å®ç°ä½“(æœ‰äº›åƒå®šä¹‰ãƒ¼ä¸ªJavai nterface),å› ä¸ºå…¶å®ç°ä½“æ˜¯ç”±éjavaè¯­è¨€åœ¨å¤–é¢å®ç°çš„ã€‚ æœ¬åœ°æ¥å£çš„ä½œç”¨æ˜¯èåˆä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸ºJavaæ‰€ç”¨ï¼Œå®ƒçš„åˆè¡·æ˜¯èåˆC/C++ç¨‹åºã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Native Method? Javaä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œç„¶è€Œæœ‰äº›å±‚æ¬¡çš„ä»»åŠ¡ç”¨Javaå®ç°èµ·æ¥ä¸å®¹æ˜“ï¼Œæˆ–è€…æˆ‘ä»¬å¯¹ç¨‹åºçš„æ•ˆç‡å¾ˆåœ¨æ„æ—¶ï¼Œé—®é¢˜å°±æ¥äº†ã€‚ ãƒ»ä¸Javaç¯å¢ƒå¤–äº¤äº’ï¼š**æœ‰æ—¶Javaåº”ç”¨éœ€è¦ä¸Javaå¤–é¢çš„ç¯å¢ƒäº¤äº’ï¼Œè¿™æ˜¯æœ¬åœ°æ–¹æ³•å­˜åœ¨çš„ä¸»è¦åŸå› ã€‚**ä½ å¯ä»¥æƒ³æƒ³Javaéœ€è¦ä¸ä¸€äº›åº•å±‚ç³»ç»Ÿï¼Œå¦‚æ“ä½œç³»ç»Ÿæˆ–æŸäº›ç¡¬ä»¶äº¤æ¢ä¿¡æ¯æ—¶çš„æƒ…å†µã€‚æœ¬åœ°æ–¹æ³•æ­£æ˜¯è¿™æ ·ä¸€ç§äº¤æµæœºåˆ¶ï¼šå®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªéå¸¸ç®€æ´çš„æ¥å£è€Œä¸”æˆ‘ä»¬æ— éœ€å»äº†è§£Javaåº”ç”¨ä¹‹å¤–çš„ç¹ççš„ç»†èŠ‚ã€‚ ä¸æ“ä½œç³»ç»Ÿäº¤äº’ JVMæ”¯æŒç€Javaè¯­è¨€æœ¬èº«å’Œè¿è¡Œæ—¶åº“ï¼Œå®ƒæ˜¯Javaç¨‹åºèµ–ä»¥ç”Ÿå­˜çš„å¹³å°ï¼Œå®ƒç”±ä¸€ä¸ªè§£é‡Šå™¨ï¼ˆè§£é‡Šå­—èŠ‚ç ï¼‰å’Œä¸€äº›è¿æ¥åˆ°æœ¬åœ°ä»£ç çš„åº“ç»„æˆã€‚ç„¶è€Œä¸ç®¡æ€æ ·ï¼Œå®ƒæ¯•ç«Ÿä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿï¼Œå®ƒç»å¸¸ä¾èµ–äºä¸€äº›åº•å±‚ç³»ç»Ÿçš„æ”¯æŒã€‚è¿™äº›åº•å±‚ç³»ç»Ÿå¸¸å¸¸æ˜¯å¼ºå¤§çš„æ“ä½œç³»ç»Ÿã€‚é€šè¿‡ä½¿ç”¨æœ¬åœ°æ–¹æ³•ï¼Œæˆ‘ä»¬å¾—ä»¥ç”¨Javaå®ç°äº†jreçš„ä¸åº•å±‚ç³»ç»Ÿçš„äº¤äº’ï¼Œç”šè‡³JVMçš„ä¸€äº›éƒ¨åˆ†å°±æ˜¯ç”¨Cå†™çš„ã€‚è¿˜æœ‰ï¼Œå¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨ä¸€äº›Javaè¯­è¨€æœ¬èº«æ²¡æœ‰æä¾›å°è£…çš„æ“ä½œç³»ç»Ÿçš„ç‰¹æ€§æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä½¿ç”¨æœ¬åœ°æ–¹æ³•ã€‚ Sunâ€™s Java **Sunçš„è§£é‡Šå™¨æ˜¯ç”¨Cå®ç°çš„ï¼Œè¿™ä½¿å¾—å®ƒèƒ½åƒä¸€äº›æ™®é€šçš„Cä¸€æ ·ä¸å¤–éƒ¨äº¤äº’ã€‚**jreå¤§éƒ¨åˆ†æ˜¯ç”¨Javaå®ç°çš„ï¼Œå®ƒä¹Ÿé€šè¿‡ä¸€äº›æœ¬åœ°æ–¹æ³•ä¸å¤–ç•Œäº¤äº’ã€‚ä¾‹å¦‚ï¼šç±»java.lang. hreadçš„ setpriorityï¼ˆï¼‰æ–¹æ³•æ˜¯ç”¨Javaå®ç°çš„ï¼Œä½†æ˜¯å®ƒå®ç°è°ƒç”¨çš„æ˜¯è¯¥ç±»é‡Œçš„æœ¬åœ°æ–¹æ³•setprlority0ï¼ˆï¼‰ã€‚è¿™ä¸ªæœ¬åœ°æ–¹æ³•æ˜¯ç”¨Cå®ç°çš„ï¼Œå¹¶è¢«æ¤å…¥JVMå†…éƒ¨ï¼Œåœ¨Windows 95çš„å¹³å°ä¸Šï¼Œè¿™ä¸ªæœ¬åœ°æ–¹æ³•æœ€ç»ˆå°†è°ƒç”¨Win32 Setpriorityï¼ˆï¼‰APIã€‚è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•çš„å…·ä½“å®ç°ç”±JVMç›´æ¥æä¾›ï¼Œæ›´å¤šçš„æƒ…å†µæ˜¯æœ¬åœ°æ–¹æ³•ç”±å¤–éƒ¨çš„åŠ¨æ€é“¾æ¥åº“( external dynamic link library)æä¾›ï¼Œç„¶åè¢«JVMè°ƒç”¨ã€‚ ç°çŠ¶ ç›®å‰è¯¥æ–¹æ³•ä½¿ç”¨çš„è¶Šæ¥è¶Šå°‘äº†ï¼Œé™¤éæ˜¯ä¸ç¡¬ä»¶æœ‰å…³çš„åº”ç”¨ï¼Œæ¯”å¦‚é€šè¿‡Javaç¨‹åºé©±åŠ¨æ‰“å°æœºæˆ–è€…Javaç³»ç»Ÿç®¡ç†ç”Ÿäº§è®¾å¤‡ï¼Œåœ¨ä¼ä¸šçº§åº”ç”¨ä¸­å·²ç»æ¯”è¾ƒå°‘è§ã€‚å› ä¸ºç°åœ¨çš„å¼‚æ„é¢†åŸŸé—´çš„é€šä¿¡å¾ˆå‘è¾¾ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨ Socketé€šä¿¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç½‘ Web Serviceç­‰ç­‰ï¼Œä¸å¤šåšä»‹ç»ã€‚ ä¸ƒã€æœ¬åœ°æ–¹æ³•æ ˆ æœ¬åœ°æ–¹æ³•æ ˆ( Native Method Stack) ãƒ»Javaè™šæ‹Ÿæœºæ ˆç”¨äºç®¡ç†Javaæ–¹æ³•çš„è°ƒç”¨ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆç”¨äºç®¡ç†æœ¬åœ°æ–¹æ³•çš„è°ƒç”¨ã€‚ ãƒ»æœ¬åœ°æ–¹æ³•æ ˆï¼Œä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚ ãƒ»å…è®¸è¢«å®ç°æˆå›ºå®šæˆ–è€…æ˜¯å¯åŠ¨æ€æ‰©å±•çš„å†…å­˜å¤§å°ã€‚ï¼ˆåœ¨å†…å­˜æº¢å‡ºæ–¹é¢æ˜¯ç›¸åŒçš„ï¼‰ â€‹ å¦‚æœçº¿ç¨‹è¯·æ±‚åˆ†é…çš„æ ˆå®¹é‡è¶…è¿‡æœ¬åœ°æ–¹æ³•æ ˆå…è®¸çš„æœ€å¤§å®¹é‡ï¼ŒJavaè™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºä¸€ä¸ª StackOverflowErrorå¼‚å¸¸ã€‚ â€‹ å¦‚æœæœ¬åœ°æ–¹æ³•æ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œå¹¶ä¸”åœ¨å°è¯•æ‰©å±•çš„æ—¶å€™æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œæˆ–è€…åœ¨åˆ›å»ºæ–°çš„çº¿ç¨‹æ—¶æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜å»åˆ›å»ºå¯¹åº”çš„æœ¬åœ°æ–¹æ³•æ ˆï¼Œé‚£ä¹ˆJavaè™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºä¸€ä¸ª OutOfMemoryErrorå¼‚å¸¸ã€‚ ãƒ»æœ¬åœ°æ–¹æ³•æ ˆæ˜¯ä½¿ç”¨Cè¯­è¨€å®ç°çš„ ãƒ»å®ƒçš„å…·ä½“åšæ³•æ˜¯ Native Method Stackä¸­ç™»è®° native æ–¹æ³•ï¼Œåœ¨ Execution Engine æ‰§è¡Œæ—¶åŠ è½½æœ¬åœ°æ–¹æ³•åº“ã€‚ ãƒ»å½“æŸä¸ªçº¿ç¨‹è°ƒç”¨ä¸€ä¸ªæœ¬åœ°æ–¹æ³•æ—¶ï¼Œå®ƒå°±è¿›å…¥äº†ä¸€ä¸ªå…¨æ–°çš„å¹¶ä¸”ä¸å†å—è™šæ‹Ÿæœºé™åˆ¶çš„ä¸–ç•Œã€‚å®ƒå’Œè™šæ‹Ÿæœºæ‹¥æœ‰åŒæ ·çš„æƒé™ã€‚ æœ¬åœ°æ–¹æ³•æ ˆå¯ä»¥é€šè¿‡æœ¬åœ°æ–¹æ³•æ¥å£æ¥è®¿é—®è™šæ‹Ÿæœºå†…éƒ¨çš„è¿è¡Œæ—¶æ•°æ®åŒºã€‚ å®ƒç”šè‡³å¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬åœ°å¤„ç†å™¨ä¸­çš„å¯„å­˜å™¨ ç›´æ¥ä»æœ¬åœ°å†…å­˜çš„å †ä¸­åˆ†é…ä»»æ„æ•°é‡çš„å†…å­˜ã€‚ å¹¶ä¸æ˜¯æ‰€æœ‰çš„JVMéƒ½æ”¯æŒæœ¬åœ°æ–¹æ³•ã€‚å› ä¸ºJavaè™šæ‹Ÿæœºè§„èŒƒå¹¶æ²¡æœ‰æ˜ç¡®è¦æ±‚æœ¬åœ°æ–¹æ³•æ ˆçš„ä½¿ç”¨è¯­è¨€ã€å…·ä½“å®ç°æ–¹å¼ã€æ•°æ®ç»“æ„ç­‰ã€‚å¦‚æœJVMäº§å“ä¸æ‰“ç®—æ”¯æŒ nativeæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ— éœ€å®ç°æœ¬åœ°æ–¹æ³•æ ˆã€‚ ãƒ»åœ¨ Hotspot JVMä¸­ï¼Œç›´æ¥å°†æœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆåˆäºŒä¸ºä¸€ã€‚ å…«ã€å † 1.å †çš„æ ¸å¿ƒæ¦‚è¿° ãƒ»ä¸€ä¸ªJVMå®ä¾‹åªå­˜åœ¨ä¸€ä¸ªå †å†…å­˜ï¼Œå †ä¹Ÿæ˜¯Javaå†…å­˜ç®¡ç†çš„æ ¸å¿ƒåŒºåŸŸã€‚ ãƒ»Javaå †åŒºåœ¨JVMå¯åŠ¨çš„æ—¶å€™å³è¢«åˆ›å»ºï¼Œå…¶ç©ºé—´å¤§å°ä¹Ÿå°±ç¡®å®šäº†ã€‚æ˜¯JVMç®¡ç†çš„æœ€å¤§ä¸€å—å†…å­˜ç©ºé—´ã€‚å †å†…å­˜çš„å¤§å°æ˜¯å¯ä»¥è°ƒèŠ‚çš„ã€‚ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹è§„å®šï¼Œå †å¯ä»¥å¤„äºç‰©ç†ä¸Šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œä½†åœ¨é€»è¾‘ä¸Šå®ƒåº”è¯¥è¢«è§†ä¸ºè¿ç»­çš„ã€‚ ãƒ»æ‰€æœ‰çš„çº¿ç¨‹å…±äº«Javaå †ï¼Œåœ¨è¿™é‡Œè¿˜å¯ä»¥åˆ’åˆ†çº¿ç¨‹ç§æœ‰çš„ç¼“å†²åŒºï¼ˆ Thread Local Allocation Buffer, TLAB) ãƒ»ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­å¯¹Javaå †çš„æè¿°æ˜¯ï¼šæ‰€æœ‰çš„å¯¹è±¡å®ä¾‹ä»¥åŠæ•°ç»„éƒ½åº”å½“åœ¨è¿è¡Œæ—¶åˆ†é…åœ¨å †ä¸Šã€‚ï¼ˆ The heap is the run-time data area fromwhich memcry for all class instances and arrays is allocated)æˆ‘è¦è¯´çš„æ˜¯ï¼šâ€œå‡ ä¹â€æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚ä¸€ä»å®é™…ä½¿ç”¨è§’åº¦çœ‹çš„ã€‚ ãƒ»æ•°ç»„å’Œå¯¹è±¡å¯èƒ½æ°¸è¿œä¸ä¼šå­˜å‚¨åœ¨æ ˆä¸Šï¼Œå› ä¸ºæ ˆå¸§ä¸­ä¿å­˜å¼•ç”¨ï¼Œè¿™ä¸ªå¼•ç”¨æŒ‡å‘å¯¹è±¡æˆ–è€…æ•°ç»„åœ¨å †ä¸­çš„ä½ç½®ã€‚ ãƒ»åœ¨æ–¹æ³•ç»“æŸåï¼Œå †ä¸­çš„å¯¹è±¡ä¸ä¼šé©¬ä¸Šè¢«ç§»é™¤ï¼Œä»…ä»…åœ¨åƒåœ¾æ”¶é›†çš„æ—¶å€™æ‰ä¼šè¢«ç§»é™¤ã€‚ ãƒ»å †ï¼Œæ˜¯GC( Garbage Collection,åƒåœ¾æ”¶é›†å™¨)æ‰§è¡Œåƒåœ¾å›æ”¶çš„é‡ç‚¹åŒºåŸŸã€‚ 2.å †çš„ç»†åˆ†å†…å­˜ç»“æ„ 3.è®¾ç½®å †å†…å­˜å¤§å°ä¸OOM 1.è®¾ç½®å †å†…å­˜ Javaå †åŒºç”¨äºå­˜å‚¨Javaå¯¹è±¡å®ä¾‹ï¼Œé‚£ä¹ˆå †çš„å¤§å°åœ¨JVMå¯åŠ¨æ—¶å°±å·²ç»è®¾å®šå¥½äº†ï¼Œå¤§å®¶å¯ä»¥é€šè¿‡é€‰é¡¹&quot;-Xmx&quot;å’Œ&quot;-Xms&quot;æ¥è¿›è¡Œè®¾ç½® â€‹ â€œ-Xms&quot;ç”¨äºè¡¨ç¤ºå †åŒºçš„èµ·å§‹å†…å­˜ï¼Œç­‰ä»·äºãƒ¼XX: Initialheapsize â€‹ â€œ-Xmx&quot;åˆ™ç”¨äºè¡¨ç¤ºå †åŒºçš„æœ€å¤§å†…å­˜ï¼Œç­‰ä»·äºãƒ¼XX: Maxheapsize ä¸€æ—¦å †åŒºä¸­çš„å†…å­˜å¤§å°è¶…è¿‡â€œ-Xmx&quot;æ‰€æŒ‡å®šçš„æœ€å¤§å†…å­˜æ—¶ï¼Œå°†ä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚ ãƒ»é€šå¸¸ä¼šå°† -Xms å’Œ -Xmx ä¸¤ä¸ªå‚æ•°é…ç½®ç›¸åŒçš„å€¼ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨javaåƒåœ¾å›æ”¶æœºåˆ¶æ¸…ç†å®Œå †åŒºåä¸éœ€è¦é‡æ–°åˆ†éš”è®¡ç®—å †åŒºçš„å¤§å°ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼šåˆå§‹å†…å­˜å¤§å°ï¼šç‰©ç†ç”µè„‘å†…å­˜å¤§å°/64ï¼Œæœ€å¤§å†…å­˜å¤§å°ï¼šç‰©ç†ç”µè„‘å†…å­˜å¤§å°/4 4.æŸ¥çœ‹è®¾ç½®çš„å‚æ•°ï¼šæ–¹å¼ä¸€ï¼šjps/jstat -GC è¿›ç¨‹id æ–¹å¼äºŒï¼š-XX: +PrintGCdetails 2.OOMè¯´æ˜ä¸ä¸¾ä¾‹ å·¥å…·ï¼š jvisualvmï¼šæŸ¥çœ‹å†…å­˜æƒ…å†µï¼Œjvisualvmå‘½ä»¤å¯ç›´æ¥æ‰“å¼€ å®‰è£…æ’ä»¶ 1234567891011121314151617181920212223public class OOMInstance { public static void main(String[] args){ ArrayList&lt;Picture1&gt; list=new ArrayList&lt;&gt;(); while(true) { try { Thread.sleep(20); } catch (InterruptedException e) { e.printStackTrace(); } list.add(new Picture1(new Random().nextInt(1024*1024))); } }}class Picture1{ private byte[] pixels; public Picture1(int length){ this.pixels = new byte[length]; }} ç¼–è¯‘ç¨‹åº ä¿®æ”¹å †å¤§å° è¿è¡Œç¨‹åºæŸ¥çœ‹ jvisualvm Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space at pers.lxl.mylearnproject.programbase.jvm.Picture1.(OOMInstance.java:27) at pers.lxl.mylearnproject.programbase.jvm.OOMInstance.main(OOMInstance.java:19) 4.å¹´è½»ä»£ä¸è€å¹´ä»£ ãƒ»å­˜å‚¨åœ¨JVMä¸­çš„Javaå¯¹è±¡å¯ä»¥è¢«åˆ’åˆ†ä¸ºä¸¤ç±» ä¸€ç±»æ˜¯ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­çš„ç¬æ—¶å¯¹è±¡ï¼Œè¿™ç±»å¯¹è±¡çš„åˆ›å»ºå’Œæ¶ˆäº¡éƒ½éå¸¸è¿…é€Ÿ å¦å¤–ä¸€ç±»å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå´éå¸¸é•¿ï¼Œåœ¨æŸäº›æç«¯çš„æƒ…å†µä¸‹è¿˜èƒ½å¤Ÿä¸JVMçš„ç”Ÿå‘½å‘¨æœŸä¿æŒä¸€è‡´ã€‚ ãƒ»Javaå †åŒºè¿›ä¸€æ­¥ç»†åˆ†çš„è¯ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºå¹´è½»ä»£( YoungGen)å’Œè€å¹´ä»£( OldGen) ãƒ»å…¶ä¸­å¹´è½»ä»£åˆå¯ä»¥åˆ’åˆ†ä¸ºEdenç©ºé—´ã€ Survivor0ç©ºé—´å’Œ Survivor1ç©ºé—´(æœ‰æ—¶ä¹Ÿå«åšfromåŒºã€toåŒº)ã€‚ å‚æ•°è®¾ç½®ï¼š é…ç½®æ–°ç”Ÿä»£ä¸è€å¹´ä»£åœ¨å †ç»“æ„çš„å æ¯”ã€‚ é»˜è®¤**-XX: NewRatio=2**,è¡¨ç¤ºæ–°ç”Ÿä»£å 1,è€å¹´ä»£å 2,æ–°ç”Ÿä»£å æ•´ä¸ªå †çš„1/3 å¯ä»¥ä¿®æ”¹-XX: Newratio=4,è¡¨ç¤ºæ–°ç”Ÿä»£å 1,è€å¹´ä»£å 4,æ–°ç”Ÿä»£å æ•´ä¸ªå †çš„1/5 åœ¨ Hot Spotä¸­ï¼ŒEdenç©¶é—´å’Œå¦å¤–ä¸¤ä¸ª Survivor'ç©ºé—´ç¼ºçœæ‰€å çš„æ¯”ä¾‹æ˜¯8:1:1å½“ç„¶å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡é€‰é¡¹â€œ-Xx: SurvivorRatioâ€è°ƒæ•´è¿™ä¸ªç©ºé—´æ¯”ä¾‹ã€‚æ¯”å¦‚XX: Survivorratio=8,é»˜è®¤8 å‡ ä¹æ‰€æœ‰çš„Javaå¯¹è±¡éƒ½æ˜¯åœ¨EdenåŒºè¢«newå‡ºæ¥çš„ç»å¤§éƒ¨åˆ†çš„Javaå¯¹è±¡çš„é”€æ¯éƒ½åœ¨æ–°ç”Ÿä»£è¿›è¡Œäº†ã€‚IBMå…¬å¸çš„ä¸“é—¨ç ”ç©¶è¡¨æ˜ï¼Œæ–°ç”Ÿä»£ä¸­80%çš„å¯¹è±¡éƒ½æ˜¯â€œæœç”Ÿå¤•æ­»â€çš„ã€‚ å¯ä»¥ä½¿ç”¨é€‰é¡¹&quot;-Xmn'&quot;è®¾ç½®æ–°ç”Ÿä»£æœ€å¤§å†…å­˜å¤§å°&gt;è¿™ä¸ªå‚æ•°ä¸€èˆ¬ä½¿ç”¨é»˜è®¤å€¼å°±å¯ä»¥äº†ã€‚ å¯¹è±¡æµç¨‹ï¼š 5.å¯¹è±¡åˆ†é…è¿‡ç¨‹ 1.ä¸€èˆ¬è¿‡ç¨‹ â€‹ Eden æ»¡è§¦å‘ YGC/Minor GC å¯¹ Edenä¸ From åŒºå›æ”¶ï¼Œè¿˜åœ¨ç”¨çš„å¯¹è±¡æ”¾åˆ° From åŒºï¼ŒAgeè®¾ä¸º1ï¼Œä¸‹æ¬¡å›æ”¶è§¦å‘æ—¶å¤åˆ¶ From åŒºè½¬åˆ° To åŒºï¼ˆç©ºçš„åŒºï¼‰ï¼ŒAge+1ï¼ŒAge è¾¾åˆ°é˜ˆå€¼ï¼ˆå¯é€šè¿‡è®¾ç½® -XX: MaxTenuringThreshold=ï¼‰æ”¾å…¥Oldã€‚ ä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜æ˜¯ä¸€ä»¶éå¸¸ä¸¥è°¨å’Œå¤æ‚çš„ä»»åŠ¡ï¼ŒJVMçš„è®¾è®¡è€…ä»¬ä¸ä»…éœ€è¦è€ƒè™‘å†…å­˜å¦‚ä½•åˆ†é…ã€åœ¨å“ªé‡Œåˆ†é…ç­‰é—®é¢˜ï¼Œå¹¶ä¸”ç”±äºå†…å­˜åˆ†é…ç®—æ³•ä¸å†…å­˜å›æ”¶ç®—æ³•å¯†åˆ‡ç›¸å…³ï¼Œæ‰€ä»¥è¿˜éœ€è¦è€ƒè™‘GCæ‰§è¡Œå®Œå†…å­˜å›æ”¶åæ˜¯å¦ä¼šåœ¨å†…å­˜ç©ºé—´ä¸­çˆ¬ç”Ÿå†…å­˜ç¢ç‰‡ã€‚ 1.newçš„å¯¹è±¡å…ˆæ”¾ä¼Šç”¸å›­åŒºã€‚æ­¤åŒºæœ‰å¤§å°é™åˆ¶ã€‚ 2.å½“ä¼Šç”¸å›­çš„ç©ºé—´å¡«æ»¡æ—¶ï¼Œç¨‹åºåˆéœ€è¦åˆ›å»ºå¯¹è±¡ï¼ŒJVMçš„åƒåœ¾å›æ”¶å™¨å°†å¯¹ä¼Šç”¸å›­åŒºè¿›è¡Œåƒåœ¾å›æ”¶( Minor GC),å°†ä¼Šç”¸å›­åŒºä¸­çš„ä¸å†è¢«å…¶ä»–å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡è¿›è¡Œé”€æ¯ã€‚å†åŠ è½½æ–°çš„å¯¹è±¡æ”¾åˆ°ä¼Šç”¸å›­åŒºã€‚ 3.ç„¶åå°†ä¼Šç”¸å›­ä¸­çš„å‰©ä½™å¯¹è±¡ç§»åŠ¨åˆ°å¹¸å­˜è€…0åŒº 4.å¦‚æœå†æ¬¡è§¦å‘åƒåœ¾å›æ”¶ï¼Œæ­¤æ—¶ä¸Šæ¬¡å¹¸å­˜ä¸‹æ¥çš„æ”¾åˆ°å¹¸å­˜è€…0åŒºçš„ï¼Œå¦‚æœæ²¡æœ‰å›æ”¶ï¼Œå°±ä¼šæ”¾åˆ°å¹¸å­˜è€…1åŒºã€‚ 5.å¦‚æœå†æ¬¡ç»å†åƒåœ¾å›æ”¶ï¼Œæ­¤æ—¶ä¼šé‡æ–°æ”¾å›å¹¸å­˜è€…0åŒºï¼Œæ¥ç€å†å»å¹¸å­˜è€…1åŒº 6.å•¥æ—¶å€™èƒ½å»å…»è€åŒºå‘¢ï¼Ÿå¯ä»¥è®¾ç½®æ¬¡æ•°ã€‚é»˜è®¤æ˜¯15æ¬¡ã€‚å¯ä»¥è®¾ç½®å‚æ•°ï¼š-XX: MaxTenuringThreshold=è¿›è¡Œè®¾ç½®ã€‚ æ€»ç»“ é’ˆå¯¹å¹¸å­˜è€…s0,s1åŒºçš„æ€»ç»“ï¼šå¤åˆ¶ä¹‹åæœ‰äº¤æ¢ï¼Œè°ç©ºè°æ˜¯To å…³äºåƒåœ¾å›æ”¶ï¼šé¢‘ç¹åœ¨æ–°ç”ŸåŒºæ”¶é›†ï¼Œå¾ˆå°‘åœ¨å…»è€åŒºæ”¶é›†ï¼Œå‡ ä¹ä¸åœ¨æ°¸ä¹…åŒº/å…ƒç©ºé—´æ”¶é›†ã€‚ 2.ç‰¹æ®Šæƒ…å†µ 6.å¸¸ç”¨è°ƒä¼˜å·¥å…· ãƒ»JDKå‘½ä»¤è¡Œ Ecllpse: Memory Analyzer Tool Jconsole Visualvm Jprofiler Java Flight Recorder GCVlewer GC Easy 7.Minor GCã€ Maior GCã€ Full GC JVMåœ¨è¿›è¡ŒGCæ—¶ï¼Œå¹¶éæ¯æ¬¡éƒ½å¯¹ä¸Šé¢ä¸‰ä¸ªå†…å­˜(æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ–¹æ³•åŒº)åŒºåŸŸä¸€èµ·å›æ”¶çš„ï¼Œå¤§éƒ¨åˆ†æ—¶å€™å›æ”¶çš„éƒ½æ˜¯æŒ‡æ–°ç”Ÿä»£ã€‚ é’ˆå¯¹ HotSpot VMçš„å®ç°ï¼Œå®ƒé‡Œé¢çš„GCæŒ‰ç…§å›æ”¶åŒºåŸŸåˆåˆ†ä¸ºä¸¤å¤§ç§ç±»å‹ï¼šä¸€ç§æ˜¯éƒ¨åˆ†æ”¶é›†( Partial GC),ä¸€ç§æ˜¯æ•´å †æ”¶é›†(Full GC) éƒ¨åˆ†æ”¶é›†ï¼šä¸æ˜¯å®Œæ•´æ”¶é›†æ•´ä¸ªJAVAå †çš„åƒåœ¾æ”¶é›†ã€‚å…¶ä¸­åˆåˆ†ä¸ºï¼š æ–°ç”Ÿä»£æ”¶é›†( Minor GC / Young GC):åªæ˜¯æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›† è€å¹´ä»£æ”¶é›†( Major GC / Old GC):åªæ˜¯è€å¹´ä»£çš„åƒåœ¾æ”¶é›† ç›®å‰ï¼Œåªæœ‰ CMS GCä¼šæœ‰å•ç‹¬æ”¶é›†è€å¹´ä»£çš„è¡Œä¸ºã€‚ æ³¨æ„ï¼Œå¾ˆå¤šæ—¶å€™ Major GC ä¼šå’Œ Full GCæ··æ·†ä½¿ç”¨ï¼Œéœ€è¦å…·ä½“åˆ†è¾¨æ˜¯è€å¹´ä»£å›æ”¶è¿˜æ˜¯æ•´å †å›æ”¶ã€‚ æ··åˆæ”¶é›†( Mixed GC):æ”¶é›†æ•´ä¸ªæ–°ç”Ÿä»£ä»¥åŠéƒ¨åˆ†è€å¹´ä»£çš„åƒåœ¾æ”¶é›†ã€‚ ç›®å‰ï¼Œåªæœ‰G1 GCä¼šæœ‰è¿™ç§è¡Œä¸º æ•´å †æ”¶é›†(Full GC):æ”¶é›†æ•´ä¸ªjavaå †å’Œæ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ã€‚ 1.å¹´è½»ä»£GC( Minor GC)è§¦å‘æœºåˆ¶ï¼š â€‹ å½“å¹´è½»ä»£ç©ºé—´ä¸è¶³æ—¶ï¼Œå°±ä¼šè§¦å‘ Minor GC,è¿™é‡Œçš„å¹´è½»ä»£æ»¡æŒ‡çš„æ˜¯ Edenä»£æ»¡ï¼Œ Survivoræ»¡ä¸ä¼šå¼•å‘GC.(æ¯æ¬¡ Minor GCä¼šæ¸…ç†å¹´è½»ä»£çš„å†…å­˜ã€‚ï¼‰ â€‹ å› ä¸ºJavaå¯¹è±¡å¤§å¤šéƒ½å…·å¤‡æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ Minor GCéå¸¸é¢‘ç¹ï¼Œä¸€èˆ¬å›æ”¶é€Ÿåº¦ä¹Ÿæ¯”è¾ƒå¿«ã€‚è¿™ä¸€å®šä¹‰æ—¢æ¸…æ™°åˆæ˜“äºç†è§£ã€‚ â€‹ Minor GCä¼šå¼•å‘STW,æš‚åœå…¶å®ƒç”¨æˆ·çš„çº¿ç¨‹ï¼Œç­‰åƒåœ¾å›æ”¶ç»“æ±ï¼Œç”¨æˆ·çº¿ç¨‹æ‰æ¢å¤è¿è¡Œã€‚ 2.è€å¹´ä»£GC( Major GC / Full GC) è§¦å‘æœºåˆ¶ æŒ‡å‘ç”Ÿåœ¨è€å¹´ä»£çš„GC,å¯¹è±¡ä»è€å¹´ä»£æ¶ˆå¤±æ—¶ï¼Œæˆ‘ä»¬è¯´â€œ Major GCâ€æˆ–â€œFull GCâ€å‘ç”Ÿäº†ã€‚ å‡ºç°äº† Major GC,ç»å¸¸ä¼šä¼´éšè‡³å°‘ä¸€æ¬¡çš„ Minor GC(ä½†éç»å¯¹çš„ï¼Œåœ¨Parallel Scavengeæ”¶é›†å™¨çš„æ”¶é›†ç­–ç•¥é‡Œå°±æœ‰ç›´æ¥è¿›è¡Œ Major GCEçš„ç­–ç•¥é€‰æ‹©è¿‡ç¨‹ï¼‰ ä¹Ÿå°±æ˜¯åœ¨è€å¹´ä»£ç©ºé—´ä¸è¶³æ—¶ï¼Œä¼šå…ˆå°è¯•è§¦å‘ Minor GCã€‚å¦‚æœä¹‹åç©ºé—´è¿˜ä¸è¶³ï¼Œåˆ™è§¦å‘ Major GCã€‚ Major GCçš„é€Ÿåº¦ä¸€èˆ¬ä¼šæ¯” Minor GC æ…¢10å€ä»¥ä¸Šï¼ŒSTW çš„æ—¶é—´æ›´é•¿ã€‚ å¦‚æœ Major GCåï¼Œå†…å­˜è¿˜ä¸è¶³ï¼Œå°±æŠ¥OOMäº† Major GC çš„é€Ÿåº¦ä¸€èˆ¬ä¼šæ¯” Minor GCæ…¢10å€ä»¥ä¸Šã€‚ 3.Full GC è§¦å‘æœºåˆ¶ï¼šï¼ˆåé¢ç»†è®²è§¦å‘Full GCæ‰§è¡Œçš„æƒ…å†µæœ‰å¦‚ä¸‹äº”ç§ï¼š (1)è°ƒç”¨ System.GCï¼ˆï¼‰æ—¶ï¼Œç³»ç»Ÿå»ºè®®æ‰§è¡ŒFull GC,ä½†æ˜¯ä¸å¿…ç„¶æ‰§è¡Œ (2)è€å¹´ä»£ç©ºé—´ä¸è¶³ (3)æ–¹æ³•åŒºç©ºé—´ä¸è¶³ (4)é€šè¿‡ Minor GCåè¿›å…¥è€å¹´ä»£çš„å¹³å‡å¤§å°å¤§äºè€å¹´ä»£çš„å¯ç”¨å†…å­˜ (5)ç”±EdenåŒºã€ survivor space0( From Space)åŒºå‘ survivor space1(To Space)åŒºå¤åˆ¶æ—¶ï¼Œå¯¹è±¡å¤§å°å¤§äº To Spaceå¯ç”¨å†…å­˜ï¼Œåˆ™æŠŠè¯¥å¯¹è±¡è½¬å­˜åˆ°è€å¹´ä»£ï¼Œä¸”è€å¹´ä»£çš„å¯ç”¨å†…å­˜å°äºè¯¥å¯¹è±¡å¤§å° è¯´æ˜ï¼šFull GCæ˜¯å¼€å‘æˆ–è°ƒä¼˜ä¸­å°½é‡è¦é¿å…çš„ã€‚è¿™æ ·æš‚æ—¶æ—¶é—´ä¼šçŸ­ä¸€äº›ã€‚ 8.GCä¸¾ä¾‹ä¸æ—¥å¿—åˆ†æ æ·»åŠ å‚æ•°ï¼š-XX:PrintGCDetails æŸ¥çœ‹æ—¥å¿—ï¼š 9.å †ç©ºé—´åˆ†ä»£æ€æƒ³ ä¸ºä»€ä¹ˆéœ€è¦æŠŠJavaå †åˆ†ä»£ï¼Ÿä¸åˆ†ä»£å°±ä¸èƒ½æ­£å¸¸å·¥ä½œäº†å—ï¼Ÿ å…¶å®ä¸åˆ†ä»£å®Œå…¨å¯ä»¥ï¼Œåˆ†ä»£çš„å”¯ä¸€ç†ç”±å°±æ˜¯ä¼˜åŒ–GCæ€§èƒ½ã€‚å¦‚æœæ²¡æœ‰åˆ†ä»£ï¼Œé‚£æ‰€æœ‰çš„å¯¹è±¡éƒ½åœ¨ä¸€å—ï¼Œå°±å¦‚åŒæŠŠä¸€ä¸ªå­¦æ ¡çš„äººéƒ½å…³åœ¨ä¸€ä¸ªæ•™å®¤ã€‚GCçš„æ—¶å€™è¦æ‰¾åˆ°å“ªäº›å¯¹è±¡æ²¡ç”¨ï¼Œè¿™æ ·å°±ä¼šå¯¹å †çš„æ‰€æœ‰åŒºåŸŸè¿›è¡Œæ‰«æã€‚è€Œå¾ˆå¤šå¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•æ­»çš„ï¼Œå¦‚æœåˆ†ä»£çš„è¯ï¼ŒæŠŠæ–°åˆ›å»ºçš„å¯¹è±¡æ”¾åˆ°æŸä¸€åœ°æ–¹ï¼Œå½“GCçš„æ—¶å€™å…ˆæŠŠè¿™å—å­˜å‚¨â€œæœç”Ÿå¤•æ­»â€å¯¹è±¡çš„åŒºåŸŸè¿›è¡Œå›æ”¶ï¼Œè¿™æ ·å°±ä¼šè…¾å‡ºå¾ˆå¤§çš„ç©ºé—´å‡ºæ¥ã€‚ 10.å†…å­˜åˆ†é…ç­–ç•¥ï¼ˆå¯¹è±¡æå‡ã€Promotionã€‘è§„åˆ™ï¼‰ â€‹ å¦‚æœå¯¹è±¡åœ¨ Eden å‡ºç”Ÿå¹¶ç»è¿‡ç¬¬ä¸€æ¬¡ Miinor GC åä»ç„¶å­˜æ´»ï¼Œå¹¶ä¸”èƒ½è¢« Survivor å®¹çº³çš„è¯ï¼Œå°†è¢«ç§»åŠ¨åˆ° Survivor ç©ºé—´ä¸­ï¼Œå¹¶å°†å¯¹è±¡å¹´é¾„è®¾ä¸º1ã€‚å¯¹è±¡ SurvivoråŒºä¸­æ¯ç†¬è¿‡ä¸€æ¬¡ MInorGC,å¹´é¾„å°±å¢åŠ 1å²ï¼Œå½“å®ƒçš„å¹´é¾„å¢åŠ åˆ°ä¸€å®šç¨‹åº¦(é»˜è®¤ä¸º15å²ï¼Œå…¶å®æ¯ä¸ªJVMã€æ¯ä¸ªGCéƒ½æœ‰æ‰€ä¸åŒ)æ—¶ï¼Œå°±ä¼šè¢«æ™‹å‡åˆ°è€å¹´ä»£ä¸­ã€‚å¯¹è±¡æ™‹å‡è€å¹´ä»£çš„å¹´é¾„é˜ˆå€¼ï¼Œå¯ä»¥é€šè¿‡é€‰é¡¹**-XX: MaxTenuringThreshold**æ¥è®¾ç½®ã€‚ é’ˆå¯¹ä¸åŒå¹´é¾„æ®µçš„å¯¹è±¡åˆ†é…åŸåˆ™å¦‚ä¸‹æ‰€ç¤ºï¼š ä¼˜å…ˆåˆ†é…åˆ°Edenã€‚ å¤§å¯¹è±¡ç›´æ¥åˆ†é…åˆ°è€å¹´ä»£ã€‚ å°½é‡é¿å…”ç¨‹åºä¸­å‡ºç°è¿‡å¤šçš„å¤§å¯¹è±¡ã€‚ é•¿æœŸå­˜æ´»çš„å¯¹è±¡åˆ†é…åˆ°è€å¹´ä»£ã€‚ åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤æ–­ å¦‚æœ SurvivoråŒºä¸­ç›¸åŒå¹´é¾„çš„æ‰€æœ‰å¯¹è±¡å¤§å°çš„æ€»å’Œå¤§äº Survivorç©ºé—´çš„ä¸€åŠï¼Œå¹´é¾„å¤§äºæˆ–ç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡å¯ä»¥ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œæ— é¡»ç­‰åˆ° MaxTenuringThresholdä¸­è¦æ±‚çš„å¹´é¾„ ç©ºé—´åˆ†é…æ‹…ä¿ï¼š -XX: HandlePromotionFailure 11.å¯¹è±¡åˆ†é…è¿‡ç¨‹ï¼šTLAB 1.ä¸ºä»€ä¹ˆæœ‰TLAB( Thread Local Allocation Buffer)? ğŸ§ å †åŒºæ˜¯çº¿ç¨‹å…±äº«åŒºåŸŸï¼Œä»»ä½•çº¿ç¨‹éƒ½å¯ä»¥è®¿é—®åˆ°å †åŒºä¸­çš„å…±äº«æ•°æ® ğŸ§ ç”±äºå¯¹è±¡å®ä¾‹çš„åˆ›å»ºåœ¨JVMä¸­éå¸¸é¢‘ç¹ï¼Œå› æ­¤åœ¨å¹¶å‘ç¯å¢ƒä¸‹ä»å †åŒºä¸­åˆ’åˆ†å†…å­˜ç©ºé—´æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ ğŸ§ ä¸ºé¿å…å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€åœ°å€ï¼Œéœ€è¦ä½¿ç”¨åŠ é”ç­‰æœºåˆ¶ï¼Œè¿›è€Œå½±å“åˆ†é…é€Ÿåº¦ã€‚ 2.ä»€ä¹ˆæ˜¯TLAB? ğŸœ ä»å†…å­˜æ¨¡å‹è€Œä¸æ˜¯åƒåœ¾æ”¶é›†çš„è§’åº¦ï¼Œå¯¹EdenåŒºåŸŸç»§ç»­è¿›è¡Œåˆ’åˆ†ï¼ŒJVMä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…äº†ä¸€ä¸ªç§æœ‰ç¼“å­˜åŒºåŸŸï¼Œå®ƒåŒ…å«åœ¨Edenç©ºé—´å†… ğŸœ å¤šçº¿ç¨‹åŒæ—¶åˆ†é…å†…å­˜æ—¶ï¼Œä½¿ç”¨TLABå¯ä»¥é¿å…ä¸€ç³»åˆ—çš„éçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿæå‡å†…å­˜åˆ†é…çš„ååé‡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†è¿™ç§å†…å­˜åˆ†é…æ–¹å¼ç§°ä¹‹ä¸ºå¿«é€Ÿåˆ†é…ç­–ç•¥ã€‚ ğŸœ æ®æˆ‘æ‰€çŸ¥æ‰€æœ‰ OPENJDKè¡Œç”Ÿå‡ºæ¥çš„JVMéƒ½æä¾›äº†TLABçš„è®¾è®¡ ğŸœ å°½ç®¡ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½èƒ½å¤Ÿåœ¨TLABä¸­æˆåŠŸåˆ†é…å†…å­˜ï¼Œä½†JVMç¡®å®æ˜¯å°†TLABä½œä¸ºå†…å­˜åˆ†é…çš„é¦–é€‰ã€‚ ğŸœ åœ¨ç¨‹åºä¸­ï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡é€‰é¡¹â€œ-XX: USETLABâ€è®¾ç½®æ˜¯å¦å¼€å¯TLABç©ºé—´ã€‚ ğŸœ é»˜è®¤æƒ…å†µä¸‹ï¼ŒTLABç©ºé—´çš„å†…å­˜éå¸¸å°ï¼Œä»…å æœ‰æ•´ä¸ªEdenç©ºé—´çš„1%,å½“ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡é€‰é¡¹â€œ-XX: TLABWasteTargetPercentâ€è®¾ç½®TLABç©ºé—´æ‰€å ç”¨Edenç©ºé—´çš„ç™¾åˆ†æ¯”å¤§å°ã€‚ ğŸœ ä¸€æ—¦å¯¹è±¡åœ¨ABç©ºé—´åˆ†é…å†…å­˜å¤±è´¥æ—¶ï¼ŒJVMå°±ä¼šå°è¯•ç€é€šè¿‡ä½¿ç”¨åŠ é”æœºåˆ¶ç¡®ä¿æ•°æ®æ“ä½œçš„åŸå­æ€§ï¼Œä»è€Œç›´æ¥åœ¨Edenç©ºé—´ä¸­åˆ†é…å†…å­˜ã€‚ 12.å †ç©ºé—´å¸¸è§å‚æ•° -XX: +PrintFlagsInitial:æŸ¥çœ‹æ‰€æœ‰çš„å‚æ•°çš„é»˜è®¤åˆå§‹å€¼ -XX: +PrintFlagsFinal:æŸ¥çœ‹æ‰€æœ‰çš„å‚æ•°çš„æœ€ç»ˆå€¼ï¼ˆå¯èƒ½ä¼šå­˜åœ¨ä¿®æ”¹ï¼Œä¸å†æ˜¯åˆå§‹å€¼) -Xms:åˆå§‹é›„ç©ºå‘å†…å­˜(é»˜è®¤ä¸ºç‰©ç†å†…å­˜çš„1/64) -Xmx:æœ€å¤§é›„ç©ºé—´å†…å­˜(é»˜è®¤ä¸ºç‰©ç†å†…å­˜çš„1/4) -Xmn:è®¾ç½®æ–°ç”Ÿä»£çš„å¤§å°ã€‚ï¼ˆåˆå§‹å€¼åŠæœ€å¤§å€¼ï¼‰ -XX: NewRatio:é…ç½®æ–°ç”Ÿä»£ä¸è€å¹´ä»£åœ¨å †ç»“æ„çš„å æ¯” -XX: SurvivorRatio:è®¾ç½®æ–°ç”Ÿä»£ä¸­Edenå’ŒS0/S1ç©ºé—´æ¯”ä¾‹ -XX: MaxTenuringThreshold:è®¾ç½®æ–°ç”Ÿä»£åƒæ‰±çš„æœ€å¤§å¹´é¾„ -XX: +PrintGCdetails:è¾“å‡ºè¯¦ç»†GCå¤„ç†æ—¥å¿— æ‰“å°ç­’è¦ä¿¡æ¯ï¼šğŸŒ -XX: +PrintGC ğŸŒ - verbose:GC -XX: HandlePromotionFailure:æ˜¯å¦è®¾ç½®ç©ºé—®åˆ†é…æ‹…ä¿ æ˜¯å¦è®¾ç½®ç©ºé—®åˆ†é…æ‹…ä¿ï¼Ÿï¼š åœ¨å‘ç”Ÿ Minor GCä¹‹å‰ï¼Œè™šæ‹Ÿæœºä¼šæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£æ‰€æœ‰å¯¹è±¡çš„æ€»ç©ºé—´ã€‚ å¦‚æœå¤§äºï¼Œåˆ™æ­¤æ¬¡ Minor GCæ˜¯å®‰å…¨çš„ å¦‚æœå°äºï¼Œåˆ™è™šæ‹Ÿæœºä¼šæŸ¥çœ‹ãƒ¼XX: HandlePromotionFailureè®¾ç½®å€¼æ˜¯å¦å…è®¸æ‹…ä¿å¤±è´¥ã€‚ å¦‚æœ HandlepromotionFailure=true,é‚£ä¹ˆä¼šç»§ç»­æ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºå†æ¬¡æ™‹å‡åˆ°è€å¹´ä»£çš„å¯¹è±¡çš„å¹³å‡å¤§å°ã€‚ å¦‚æœå¤§äºï¼Œåˆ™å°è¯•è¿›è¡Œä¸€æ¬¡ Minor GC,ä½†è¿™æ¬¡ Minor GCä¾ç„¶æ˜¯æœ‰é£é™©çš„ã€‚ å¦‚æœå°äºï¼Œåˆ™æ”¹ä¸ºè¿›è¡Œä¸€æ¬¡Full GCã€‚ å¦‚æœ HandlePromotionFalure= false,åˆ™æ”¹ä¸ºè¿›è¡Œä¸€æ¬¡Full GCã€‚ åœ¨JDK6 Update24ä¹‹åï¼Œ HandlePromotionFailure å‚æ•°ä¸ä¼šå†å½±å“åˆ°è™šæ‹Ÿæœºçš„ç©ºé—´åˆ†é…æ‹…ä¿ç­–ç•¥ï¼Œè§‚å¯Ÿ OpenJDKä¸­çš„æºç å˜åŒ–ï¼Œè™½ç„¶æºç ä¸­è¿˜å®šä¹‰äº†HandlePromotionFailure å‚æ•°ï¼Œä½†æ˜¯åœ¨ä»£ç ä¸­å·²ç»ä¸ä¼šå†ä½¿ç”¨å®ƒã€‚JDK6 Update24ä¹‹åçš„è§„åˆ™å˜ä¸º åªè¦è€å¹´ä»£çš„è¿ç»­ç©ºé—´å¤§äºæ–°ç”Ÿä»£å¯¹è±¡æ€»å¤§å°æˆ–è€…å†æ¬¡æ™‹å‡çš„å¹³å‡å¤§å° å°±ä¼šè¿›è¡Œ Minor GC,å¦åˆ™å°†è¿›è¡ŒFull GCã€‚ 13.é€šè¿‡é€ƒé€¸åˆ†æçœ‹å †ç©ºé—´çš„å¯¹è±¡åˆ†é… å †æ˜¯åˆ†é…å¯¹è±¡å­˜å‚¨çš„å”¯ä¸€é€‰æ‹©å—ï¼Ÿ â€‹ åœ¨ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­å…³äºJavaå †å†…å­˜æœ‰è¿™æ ·ä¸€æ®µæè¿°ï¼šéšç€JITç¼–è¯‘æœŸçš„å‘å±•ä¸é€ƒé€¸åˆ†ææŠ€æœ¯é€æ¸æˆç†Ÿï¼Œæ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢ä¼˜åŒ–æŠ€æœ¯å°†ä¼šå¯¼è‡´ä¸€äº›å¾®å¦™çš„å˜åŒ–ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½åˆ†é…åˆ°å †ä¸Šä¹Ÿæ¸æ¸å˜å¾—ä¸é‚£ä¹ˆâ€œç»å¯¹â€äº†ã€‚åœ¨Javaè™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡æ˜¯åœ¨Javaå †ä¸­åˆ†é…å†…å­˜çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ™®éçš„å¸¸è¯†ã€‚ä½†æ˜¯ï¼Œæœ‰ç§ç‰¹æ®Šæƒ…å†µï¼Œé‚£å°±æ˜¯å¦‚æœç»è¿‡é€ƒé€¸åˆ†æ( Escape Analysis)åå‘ç°ï¼Œä¸€ä¸ªå¯¹è±¡å¹¶æ²¡æœ‰é€ƒé€¸å‡ºæ–¹æ³•**ã€NEWçš„å¯¹è±¡æ˜¯å¦æœ‰å¯èƒ½åœ¨æ–¹æ³•å¤–è¢«è°ƒç”¨ï¼Œè°ƒç”¨åˆ™å‘ç”Ÿé€ƒé€¸ã€‘**çš„è¯ï¼Œé‚£ä¹ˆå°±å¯èƒ½è¢«ä¼˜åŒ–æˆæ ˆä¸Šåˆ†é…ã€‚è¿™æ ·å°±æ— éœ€åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œä¹Ÿæ— é¡»è¿›è¡Œåƒåœ¾å›æ”¶äº†ã€‚è¿™ä¹Ÿæ˜¯æœ€å¸¸è§çš„å †å¤–å­˜å‚¨æŠ€æœ¯ã€‚ â€‹ æ­¤å¤–ï¼Œå‰é¢æåˆ°çš„åŸºäº OPENJDKæ·±åº¦å®šåˆ¶çš„ TaoBaoVM,å…¶ä¸­åˆ›æ–°çš„GCIH(GCinvisible heap)æŠ€æœ¯å®ç°ã€‚off-heap,å°†ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„Javaå¯¹è±¡ä»heapä¸­ç§»è‡³heapå¤–ï¼Œå¹¶ä¸”GCä¸èƒ½ç®¡ç†GCIHå†…éƒ¨çš„Javaå¯¹è±¡ï¼Œä»¥æ­¤è¾¾åˆ°é™ä½GCçš„å›æ”¶é¢‘ç‡å’Œæå‡GCçš„å›æ”¶æ•ˆç‡çš„ç›®çš„ã€‚ [å †ä¸æ˜¯åˆ†é…å¯¹è±¡å­˜å‚¨çš„å”¯ä¸€é€‰æ‹©å—](# 4.å †ä¸æ˜¯åˆ†é…å¯¹è±¡å­˜å‚¨çš„å”¯ä¸€é€‰æ‹©å—) å¦‚ä½•å°†å †ä¸Šçš„å¯¹è±¡åˆ†é…åˆ°æ ˆï¼Œéœ€è¦ä½¿ç”¨é€ƒé€¸åˆ†ææ‰‹æ®µã€‚ è¿™æ˜¯ä¸€ç§å¯ä»¥æœ‰æ•ˆå‡å°‘Javaç¨‹åºä¸­åŒæ­¥è´Ÿè½½å’Œå†…å­˜å †åˆ†é…å‹åŠ›çš„è·¨å‡½æ•°å…¨å±€æ•°æ®æµåˆ†æç®—æ³•ã€‚é€šè¿‡é€ƒé€¸åˆ†æï¼Œ Java Hotspotç¼–è¯‘å™¨èƒ½å¤Ÿåˆ†æå‡ºä¸€ä¸ªæ–°çš„å¯¹è±¡çš„å¼•ç”¨çš„ä½¿ç”¨èŒƒå›´ä»è€Œå†³å®šæ˜¯å¦è¦å°†è¿™ä¸ªå¯¹è±¡åˆ†é…åˆ°å †ä¸Šã€‚ é€ƒé€¸åˆ†æçš„åŸºæœ¬è¡Œä¸ºå°±æ˜¯åˆ†æå¯¹è±¡åŠ¨æ€ä½œç”¨åŸŸï¼š å½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰åï¼Œå¯¹è±¡åªåœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼Œåˆ™è®¤ä¸ºæ²¡æœ‰å‘ç”Ÿé€ƒé€¸ã€‚ å½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰åï¼Œå®ƒè¢«å¤–éƒ¨æ–¹æ³•æ‰€å¼•ç”¨ï¼Œåˆ™è®¤ä¸ºå‘ç”Ÿé€ƒé€¸ã€‚ä¾‹å¦‚ä½œä¸ºè°ƒç”¨å‚æ•°ä¼ é€’åˆ°å…¶ä»–åœ°æ–¹ä¸­ã€‚ å‚æ•°è®¾ç½®ï¼š ãƒ»åœ¨JDK6u23ç‰ˆæœ¬ä¹‹åï¼Œ HotSpotä¸­é»˜è®¤å°±å·²ç»å¼€å¯äº†é€ƒé€¸åˆ†æã€‚å¦‚æœä½¿ç”¨çš„æ˜¯è¾ƒæ—©çš„ç‰ˆæœ¬ï¼Œå¼€å‘äººå‘˜åˆ™å¯ä»¥é€šè¿‡ é€‰é¡¹â€œ-XX: Doescapeanalysis&quot;æ˜¾å¼å¼€å¯é€ƒé€¸åˆ†æ é€šè¿‡é€‰é¡¹â€œ-X: Printescapeanalysis&quot;æŸ¥çœ‹é€ƒé€¸åˆ†æçš„ç­›é€‰ç»“æœ ç»“è®ºï¼š å¼€å‘ä¸­èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡çš„ï¼Œå°±ä¸è¦ä½¿ç”¨åœ¨æ–¹æ³•å¤–å®šä¹‰ã€‚ 14.é€ƒé€¸åˆ†æï¼šä»£ç ä¼˜åŒ– â€‹ ä½¿ç”¨é€ƒé€¸åˆ†æï¼Œç¼–è¯‘å™¨å¯ä»¥å¯¹ä»£ç åšå¦‚ä¸‹ä¼˜åŒ–ï¼š ä¸€ã€æ ˆä¸Šåˆ†é…ã€‚å°†å †åˆ†é…è½¬åŒ–ä¸ºæ ˆåˆ†é…ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡åœ¨å­ç¨‹åºä¸­è¢«åˆ†é…ï¼Œè¦ä½¿æŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆæ°¸è¿œä¸ä¼šé€ƒé€¸ï¼Œå¯¹è±¡å¯èƒ½æ˜¯æ ˆåˆ†é…çš„å€™é€‰ï¼Œè€Œä¸æ˜¯å †åˆ†é…ã€‚ äºŒã€åŒæ­¥çœç•¥ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡è¢«å‘ç°åªèƒ½ä»ä¸€ä¸ªçº¿ç¨‹è¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆå¯¹äºè¿™ä¸ªå¯¹è±¡çš„æ“ä½œå¯ä»¥ä¸è€ƒè™‘åŒæ­¥ã€‚ ä¸‰ã€åˆ†ç¦»å¯¹è±¡æˆ–æ ‡é‡æ›¿æ¢ã€‚æœ‰çš„å¯¹è±¡å¯èƒ½ä¸éœ€è¦ä½œä¸ºä¸€ä¸ªè¿ç»­çš„å†…å­˜ç»“æ„å­˜åœ¨ä¹Ÿå¯ä»¥è¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆå¯¹è±¡çš„éƒ¨åˆ†ï¼ˆæˆ–å…¨éƒ¨ï¼‰å¯ä»¥ä¸å­˜å‚¨åœ¨å†…å­˜ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨CPUå¯„å­˜å™¨ä¸­ã€‚ 1.æ ˆä¸Šåˆ†é… å®éªŒï¼š 1.-Xmx1G -Xms1G -XX:-DoEscapeAnalysis -XX:+PrintGCDetails 2.-Xmx1G -Xms1G -XX:+DoEscapeAnalysis -XX:+PrintGCDetails 3.-Xmx256m -Xms256m -XX:-DoEscapeAnalysis -XX:+PrintGCDetails 4.-Xmx256m -Xms256m -XX:+DoEscapeAnalysis -XX:+PrintGCDetails 1234567891011121314151617181920212223242526272829303132/** * æ ˆä¸Šåˆ†é…æµ‹è¯• * -Xmx1G -Xms1G -XX:-DoEscapeAnalysis -XX:+PrintGCDetails * @author shkstart shkstart@126.com * @create 2020 10:31 */public class StackAllocation { public static void main(String[] args) { long start = System.currentTimeMillis(); for (int i = 0; i &lt; 10000000; i++) { alloc(); } // æŸ¥çœ‹æ‰§è¡Œæ—¶é—´ long end = System.currentTimeMillis(); System.out.println(&quot;èŠ±è´¹çš„æ—¶é—´ä¸ºï¼š &quot; + (end - start) + &quot; ms&quot;); // ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹å †å†…å­˜ä¸­å¯¹è±¡ä¸ªæ•°ï¼Œçº¿ç¨‹sleep try { Thread.sleep(1000000); } catch (InterruptedException e1) { e1.printStackTrace(); } } private static void alloc() { User user = new User();//æœªå‘ç”Ÿé€ƒé€¸ } static class User { }} 2.åŒæ­¥çœç•¥ï¼ˆé”æ¶ˆé™¤ï¼‰ â€‹ çº¿ç¨‹åŒæ­¥çš„ä»£ä»·æ˜¯ç›¸å½“é«˜çš„ï¼ŒåŒæ­¥çš„åæœæ˜¯é™ä½å¹¶å‘æ€§å’Œæ€§èƒ½ã€‚ â€‹ åœ¨åŠ¨æ€ç¼–è¯‘åŒæ­¥å—çš„æ—¶å€™ï¼ŒJITç¼–è¯‘å™¨å¯ä»¥å€ŸåŠ©é€ƒé€¸åˆ†ææ¥åˆ¤æ–­åŒæ­¥å—æ‰€ä½¿ç”¨çš„é”å¯¹è±¡æ˜¯å¦åªèƒ½å¤Ÿè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®è€Œæ²¡æœ‰è¢«å‘å¸ƒåˆ°å…¶ä»–çº¿ç¨‹ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆJITç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿™ä¸ªåŒæ­¥å—çš„æ—¶å€™å°±ä¼šå–æ¶ˆå¯¹è¿™éƒ¨åˆ†ä»£ç çš„åŒæ­¥ã€‚è¿™æ ·å°±èƒ½å¤§å¤§æé«˜å¹¶å‘æ€§å’Œæ€§èƒ½ã€‚è¿™ä¸ªå–æ¶ˆåŒæ­¥çš„è¿‡ç¨‹å°±å«åŒæ­¥çœç•¥ï¼Œä¹Ÿå«é”æ¶ˆé™¤ã€‚ 3.åˆ†ç¦»å¯¹è±¡æˆ–æ ‡é‡æ›¿æ¢ â€‹ æ ‡é‡(Scalar)æ˜¯æŒ‡ä¸€ä¸ªæ— æ³•å†åˆ†è§£æˆæ›´å°çš„æ•°æ®çš„æ•°æ®ã€‚Javaä¸­çš„åŸå§‹æ•°æ®ç±»å‹å°±æ˜¯æ ‡é‡ã€‚ç›¸å¯¹çš„ï¼Œé‚£äº›è¿˜å¯ä»¥åˆ†è§£çš„æ•°æ®å«åšèšåˆé‡( Aggregate),Javaä¸­çš„å¯¹è±¡å°±æ˜¯èšåˆé‡ï¼Œå› ä¸ºä»–å¯ä»¥åˆ†è§£æˆå…¶ä»–èšåˆæšˆå’Œæ ‡é‡ â€‹ åœ¨JITé˜¶æ®µï¼Œå¦‚æœç»è¿‡é€ƒé€¸åˆ†æï¼Œå‘ç°ä¸€ä¸ªå¯¹è±¡ä¸ä¼šè¢«å¤–ç•Œè®¿é—®çš„è¯ï¼Œé‚£ä¹ˆç»è¿‡JITä¼˜åŒ–ï¼Œå°±ä¼šæŠŠè¿™ä¸ªå¯¹è±¡æ‹†è§£æˆè‹¥å¹²ä¸ªå…¶ä¸­åŒ…å«çš„è‹¥å¹²ä¸ªæˆå‘˜å˜é‡æ¥ä»£æ›¿ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯æ ‡é‡æ›¿æ¢ã€‚ æ ‡é‡æ›¿æ¢å‚æ•°è®¾ç½®ï¼š å‚æ•°-XX:+EliminateAllocations:å¼€å¯æ ‡é‡æ›¿æ›ï¼ˆé»˜è®¤æ‰“å¼€ï¼‰ï¼Œå…è®¸å°†å¯¹è±¡æ‰“æ•£åˆ†é…åœ¨æ ˆä¸Šã€‚ 4.å †ä¸æ˜¯åˆ†é…å¯¹è±¡å­˜å‚¨çš„å”¯ä¸€é€‰æ‹©å—ï¼Ÿ ä¸Šè¿°ä»£ç åœ¨ä¸»å‡½æ•°ä¸­è¿›è¡Œäº†1äº¿æ¬¡allocã€‚è°ƒç”¨è¿›è¡Œå¯¹è±¡åˆ›å»ºï¼Œç”±äºUserå¯¹è±¡å®ä¾‹éœ€è¦å æ®çº¦16å­—èŠ‚çš„ç©ºé—´ï¼Œå› æ­¤ç´¯è®¡åˆ†é…ç©ºé—´è¾¾åˆ°å°†è¿‘1.5GBã€‚å¦‚æœå †ç©ºé—´å°äºè¿™ä¸ªå€¼ï¼Œå°±å¿…ç„¶ä¼šå‘ç”ŸGCã€‚ä½¿ç”¨å¦‚ä¸‹å‚æ•°è¿è¡Œä¸Šè¿°ä»£ç  -server -Xmx100m -xms100m -xx:+DoEscapeAnalvsis -XX: Print GC -XX:+EliminateAllocations è¿™é‡Œä½¿ç”¨å‚æ•°å¦‚ä¸‹ ãƒ»å‚æ•°- server:å¯åŠ¨ serveræ¨¡å¼ï¼Œå› ä¸ºåœ¨ Serveræ¨¡å¼ä¸‹ï¼Œã‚ªå¯ä»¥å¯ç”¨é€ƒé€¸åˆ†æã€‚ ãƒ»å‚æ•°-XX: +DoEscapeAnalysis:å¯ç”¨é€ƒé€¸åˆ†æ ãƒ»å‚æ•°-Xmx10m:æŒ‡å®šäº†å †ç©ºé—´æœ€å¤§ä¸º10MB ãƒ»å‚æ•°-XX: Print GC:å°†æ‰“å°GCæ—¥å¿—ã€‚ ãƒ»å‚æ•°-XX: EliminateAllocations:å¼€å¯äº†æ ‡é‡æ›¿æ¢ï¼ˆé»˜è®¤æ‰“å¼€ï¼‰ï¼Œå…è®¸å°†å¯¹è±¡æ‰“æ•£åˆ†é…åœ¨æ ˆä¸Šï¼Œæ¯”å¦‚å¯¹è±¡æ‹¥æœ‰idå’Œnameä¸¤ä¸ªå­—æ®µï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå­—æ®µå°†ä¼šè¢«è§†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„å±€éƒ¨å˜é‡è¿›è¡Œåˆ†é…ã€‚ â€‹ å…³äºé€ƒé€¸åˆ†æçš„è®ºæ–‡åœ¨1999å¹´å°±å·²ç»å‘è¡¨äº†ï¼Œä½†ç›´åˆ°JDK1.6ã‚ªæœ‰å®ç°ï¼Œè€Œä¸”è¿™é¡¹æŠ€æœ¯åˆ°å¦‚ä»Šä¹Ÿå¹¶ä¸æ˜¯ååˆ†æˆç†Ÿçš„ã€‚ â€‹ å…¶æ ¹æœ¬åŸå› å°±æ˜¯æ— æ³•ä¿è¯é€ƒé€¸åˆ†æçš„æ€§èƒ½æ¶ˆè€—ä¸€å®šèƒ½é«˜äºä»–çš„æ¶ˆè€—ã€‚è™½ç„¶ç»è¿‡é€ƒé€¸åˆ†æå¯ä»¥åšæ ‡é‡æ›¿æ¢ã€æ ˆä¸Šåˆ†é…ã€å’Œé”æ¶ˆé™¤ã€‚ä½†æ˜¯é€ƒé€¸åˆ†æè‡ªèº«ä¹Ÿæ˜¯éœ€è¦è¿›è¡Œä¸€ç³»åˆ—å¤æ‚çš„åˆ†æçš„ï¼Œè¿™å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªç›¸å¯¹è€—æ—¶çš„è¿‡ç¨‹ã€‚ â€‹ ä¸€ä¸ªæç«¯çš„ä¾‹å­ï¼Œå°±æ˜¯ç»è¿‡é€ƒé€¸åˆ†æä¹‹åï¼Œå‘ç°æ²¡æœ‰ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸é€ƒé€¸çš„ã€‚é‚£è¿™ä¸ªé€ƒé€¸åˆ†æçš„è¿‡ç¨‹å°±ç™½ç™½æµªè´¹æ‰äº† â€‹ è™½ç„¶è¿™é¡¹æŠ€æœ¯å¹¶ä¸ååˆ†æˆç†Ÿï¼Œä½†æ˜¯å®ƒä¹Ÿæ˜¯å³æ—¶ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ä¸­ä¸€ä¸ªååˆ†é‡è¦çš„æ‰‹æ®µã€‚æ³¨æ„åˆ°æœ‰ä¸€äº›è§‚ç‚¹ï¼Œè®¤ä¸ºé€šè¿‡é€ƒé€¸åˆ†æï¼ŒJVMä¼šåœ¨æ ˆä¸Šåˆ†é…é‚£äº›ä¸ä¼šé€ƒé€¸çš„å¯¹è±¡ï¼Œè¿™åœ¨ç†è®ºä¸Šæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å–å†³äºJVMè®¾è®¡è€…çš„é€‰æ‹©ã€‚æ®æˆ‘æ‰€çŸ¥ï¼Œ Oracle Hotspot JVMä¸­å¹¶æœªè¿™ä¹ˆåšï¼Œè¿™ä¸€ç‚¹åœ¨é€ƒé€¸åˆ†æç›¸å…³çš„æ–‡æ¡£é‡Œå·²ç»è¯´æ˜ï¼Œæ‰€ä»¥å¯ä»¥æ˜ç¡®æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½æ˜¯åˆ›å»ºåœ¨å †ä¸Šã€‚ â€‹ ç›®å‰å¾ˆå¤šä¹¦ç±è¿˜æ˜¯åŸºäºJDK7ä»¥å‰çš„ç‰ˆæœ¬ï¼ŒJDKå·²ç»å‘ç”Ÿäº†å¾ˆå¤§å˜åŒ–ï¼Œ internå­—ç¬¦ä¸²çš„ç¼“å­˜å’Œé™æ€å˜é‡æ›¾ç»éƒ½è¢«åˆ†é…åœ¨æ°¸ä¹…ä»£ä¸Šï¼Œè€Œæ°¸ä¹…ä»£å·²ç»è¢«å…ƒæ•°æ®åŒºå–ä»£ã€‚ä½†æ˜¯ï¼Œintern:å­—ç¬¦ä¸²ç¼“å­˜å’Œé™æ€å˜é‡å¹¶ä¸æ˜¯è¢«è½¬ç§»åˆ°å…ƒæ•°æ®åŒºï¼Œè€Œæ˜¯ç›´æ¥åœ¨å †ä¸Šåˆ†é…ï¼Œæ‰€ä»¥è¿™ä¸€ç‚¹åŒæ ·ç¬¦åˆå‰é¢ä¸€ç‚¹çš„ç»“è®ºï¼šå¯¹è±¡å®ä¾‹éƒ½æ˜¯åˆ†é…åœ¨å †ä¸Šã€‚ ä¹ã€æ–¹æ³•åŒº 1.æ ˆã€å †ã€æ–¹æ³•åŒºé—´çš„äº¤äº’å…³ç³» 2.æ–¹æ³•åŒºåŸºæœ¬ç†è§£ â€‹ ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æ˜ç¡®è¯´æ˜ï¼š&quot;å°½ç®¡æ‰€æœ‰çš„æ–¹æ³•åŒºåœ¨é€»è¾‘ä¸Šæ˜¯å±äºå †çš„ä¸€éƒ¨åˆ†ï¼Œä½†äº›ç®€å•çš„å®ç°å¯èƒ½ä¸ä¼šé€‰æ‹©å»è¿›è¡Œåƒåœ¾æ”¶é›†æˆ–è€…è¿›è¡Œå‹ç¼©ã€‚â€ä½†å¯¹äº HotSpotJVMè€Œè¨€ï¼Œæ–¹æ³•åŒºè¿˜æœ‰ä¸€ä¸ªåˆ«åå«åšNon-Heapï¼ˆéå †ï¼‰ï¼Œç›®çš„å°±æ˜¯è¦å’Œå †åˆ†å¼€ã€‚æ‰€ä»¥ï¼Œæ–¹æ³•åŒºçœ‹ä½œæ˜¯ä¸€å—ç‹¬ç«‹äºJavaå †çš„å†…å­˜ç©ºé—´ã€‚ ãƒ»æ–¹æ³•åŒº( Method Area)ä¸JAVAå †ä¸€æ ·ï¼Œæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸã€‚ ãƒ»æ–¹æ³•åŒºåœ¨JVMå¯åŠ¨çš„æ—¶ä¾¯è¢«åˆ›å»ºï¼Œå¹¶ä¸”å®ƒçš„å®é™…çš„ç‰©ç†å†…å­˜ç©ºé—´ä¸­å’ŒJavaå †åŒºä¸€æ ·éƒ½å¯ä»¥æ˜¯ä¸è¿ç»­çš„ã€‚ ãƒ»æ–¹æ³•åŒºçš„å¤§å°ï¼Œè·Ÿå †ç©ºé—´ä¸€æ ·ï¼Œå¯ä»¥é€‰æ‹©å›ºå®šå¤§å°æˆ–è€…å¯æ‰©å±•ã€‚ ãƒ»æ–¹æ³•åŒºçš„å¤§å°å†³å®šäº†ç³»ç»Ÿå¯ä»¥ä¿å­˜å¤šå°‘ä¸ªç±»ï¼Œå¦‚æœç³»ç»Ÿå®šä¹‰äº†å¤ªå¤šçš„ç±»ã€æ¯”å¦‚åŠ è½½å¤§é‡çš„ç¬¬ä¸‰æ–¹çš„jaråŒ…ï¼› Tomcatéƒ¨ç½²çš„å·¥ç¨‹è¿‡å¤š(30-50ä¸ª)ï¼›å¤§é‡åŠ¨æ€çš„ç”Ÿæˆåå°„ç±»ã€‘ï¼Œå¯¼è‡´æ–¹æ³•åŒºæº¢å‡ºï¼Œè™šæ‹ŸæœºåŒæ ·ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºé”™è¯¯ï¼šjava.lang. OutOfMemoryError: PermGen space æˆ–è€… java. lang.OutOfMemoryError: Metaspace ãƒ»å…³é—­JVMå°±ä¼šé‡Šæ”¾è¿™ä¸ªåŒºåŸŸçš„å†…å­˜ã€‚ 3.HotSpotä¸­æ–¹æ³•åŒºçš„æ¼”è¿› åœ¨jdk7åŠä»¥å‰ï¼Œä¹ æƒ¯ä¸ŠæŠŠæ–¹æ³•åŒºï¼Œç§°ä¸ºæ°¸ä¹…ä»£ã€‚jdk8å¼€å§‹ï¼Œä½¿ç”¨å…ƒç©ºé—´å–ä»£äº†æ°¸ä¹…ä»£ã€‚ In JDK8, classes metadata is now stored in the native heap and this space is called Metaspace æœ¬è´¨ä¸Šï¼Œæ–¹æ³•åŒºå’Œæ°¸ä¹…ä»£å¹¶ä¸ç­‰ä»·ã€‚ä»…æ˜¯å¯¹ HotSpotè€Œè¨€çš„ã€‚ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¯¹å¦‚ä½•å®ç°æ–¹æ³•åŒºï¼Œä¸åšç»Ÿä¸€è¦æ±‚ã€‚ä¾‹å¦‚ï¼š BEA JRockit / IBM J9ä¸­ä¸å­˜åœ¨æ°¸ä¹…ä»£çš„æ¦‚å¿µã€‚ç°åœ¨æ¥çœ‹ï¼Œå½“å¹´ä½¿ç”¨æ°¸ä¹…ä»£ï¼Œä¸æ˜¯å¥½çš„ideaã€‚å¯¼è‡´Javaç¨‹åºæ›´å®¹æ˜“OOM(è¶…è¿‡XX: MaxPermSizeä¸Šé™) è€Œåˆ°äº†JDK8,ç»ˆäºå®Œå…¨åºŸå¼ƒäº†æ°¸ä¹…ä»£çš„æ¦‚å¿µï¼Œæ”¹ç”¨ä¸ Jrockitã€J9ä¸€æ ·åœ¨æœ¬åœ°å†…å­˜ä¸­å®ç°çš„å…ƒç©ºé—´( Metaspace)æ¥ä»£æ›¿ å…ƒç©ºé—´çš„æœ¬è´¨å’Œæ°¸ä¹…ä»£ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹JVMè§„èŒƒä¸­æ–¹æ³•åŒºçš„å®ç°ã€‚ä¸è¿‡**å…ƒç©ºé—´ä¸æ°¸ä¹…ä»£æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šå…ƒç©ºé—´ä¸åœ¨è™šæ‹Ÿæœºè®¾ç½®çš„å†…å­˜ä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ã€‚**æ°¸ä¹…ä»£ã€å…ƒç©ºé—´äºŒè€…å¹¶ä¸åªæ˜¯åå­—å˜äº†ï¼Œå†…éƒ¨ç»“æ„ä¹Ÿè°ƒæ•´äº†ã€‚æ ¹æ®ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹çš„è§„å®šï¼Œå¦‚æœæ–¹æ³•åŒºæ— æ³•æ»¡è¶³æ–°çš„å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼Œå°†æŠ›å‡ºOOMå¼‚å¸¸ã€‚ 4.è®¾ç½®æ–¹æ³•åŒºå¤§å° æ–¹æ³•åŒºçš„å¤§å°ä¸å¿…æ˜¯å›ºå®šçš„ï¼ŒJVMå¯ä»¥æ ¹æ®åº”ç”¨çš„éœ€è¦åŠ¨æ€è°ƒæ•´ã€‚ jdk7åŠä»¥å‰ï¼š é€šè¿‡**-XX: PermSize**æ¥è®¾ç½®æ°¸ä¹…ä»£åˆå§‹åˆ†é…ç©ºé—´ã€‚é»˜è®¤å€¼æ˜¯20.75M -XX: MaxPermSizeæ¥è®¾å®šæ°¸ä¹…ä»£æœ€å¤§å¯åˆ†é…ç©ºé—´ã€‚32ä½æœºå™¨é»˜è®¤æ˜¯64M,64ä½æœºå™¨æ¨¡å¼æ˜¯82M å½“JVMåŠ è½½çš„ç±»ä¿¡æ¯å®¹é‡è¶…è¿‡äº†è¿™ä¸ªå€¼ï¼Œä¼šæŠ¥å¼‚å¸¸ OutOfMemoryError: Permgen Spaceã€‚ å¯é€šè¿‡å‘½ä»¤è¡ŒæŸ¥çœ‹ï¼šjpsâ€”â€”â€”â€”ã€‹jinfo -flag PermSize/MaxPermSize â€™numâ€˜ jdk8åŠä»¥åï¼š â€‹ å…ƒæ•°æ®åŒºå¤§å°å¯ä»¥ä½¿ç”¨å‚æ•°**-XX: MetaspaceSizeå’Œ-XX: MaxMetaspacesSize**æŒ‡å®šï¼Œæ›¿ä»£ä¸Šè¿°åŸæœ‰çš„ä¸¤ä¸ªå‚æ•°ã€‚ â€‹ é»˜è®¤å€¼ä¾èµ–äºå¹³å°ã€‚ windowsä¸‹ï¼Œ-XX: MetaspaceSizeæ˜¯21M,-XX: MaxMetaspaceSizeçš„å€¼æ˜¯-1,å³æ²¡æœ‰é™åˆ¶ã€‚ â€‹ ä¸æ°¸ä¹…ä»£ä¸åŒï¼Œå¦‚æœä¸æŒ‡å®šå¤§å°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿæœºä¼šè€—å°½æ‰€æœ‰çš„å¯ç”¨ç³»ç»Ÿå†…å­˜ã€‚å¦‚æœå…ƒæ•°æ®åŒºå‘ç”Ÿæº¢å‡ºï¼Œè™šæ‹Ÿæœºä¸€æ ·ä¼šæŠ›å‡ºå¼‚å¸¸OutOfMemoryError:Metaspace â€‹ -XX: MetaspaceSize:è®¾ç½®åˆå§‹çš„å…ƒç©ºé—´å¤§å°ã€‚å¯¹äºãƒ¼ä¸ª64ä½çš„æœåŠ¡å™¨ç«¯JVMæ¥è¯´ï¼Œå…¶é»˜è®¤çš„-XX: MetaspaceSizeå€¼ä¸º21MBã€‚è¿™å°±æ˜¯åˆå§‹çš„é«˜æ°´ä½çº¿ï¼Œä¸€æ—¦è§¦åŠè¿™ä¸ªæ°´ä½çº¿ï¼ŒFull GCå°†ä¼šè¢«è§¦å‘å¹¶å¸è½½æ²¡ç”¨çš„ç±»ï¼ˆå³è¿™äº›ç±»å¯¹åº”çš„ç±»åŠ è½½å™¨ä¸å†å­˜æ´»ï¼‰ï¼Œç„¶åè¿™ä¸ªé«˜æ°´ä½çº¿å°†ä¼šé‡ç½®ã€‚æ–°çš„é«˜æ°´ä½çº¿çš„å€¼å–å†³äºGCåé‡Šæ”¾äº†å¤šå°‘å…ƒç©ºé—´ã€‚å¦‚æœé‡Šæ”¾çš„ç©ºé—´ä¸è¶³ï¼Œé‚£ä¹ˆåœ¨ä¸è¶…è¿‡ MaxMetaspaceSizeæ—¶ï¼Œé€‚å½“æé«˜è¯¥å€¼ã€‚å¦‚æœé‡Šæ”¾ç©ºé—´è¿‡å¤šï¼Œåˆ™é€‚å½“é™ä½è¯¥å€¼ã€‚ â€‹ å¦‚æœåˆå§‹åŒ–çš„é«˜æ°´ä½çº¿è®¾ç½®è¿‡ä½ï¼Œä¸Šè¿°é«˜æ°´ä½çº¿è°ƒæ•´æƒ…å†µä¼šå‘ç”Ÿå¾ˆå¤šæ¬¡ã€‚é€šè¿‡åƒåœ¾å›æ”¶å™¨çš„æ—¥å¿—å¯ä»¥è§‚å¯Ÿåˆ°FullGCå¤šæ¬¡è°ƒç”¨ã€‚ä¸ºäº†é¿å…é¢‘ç¹åœ°GC,å»ºè®®å°† -XX: MetaspaceSizeè®¾ç½®ä¸ºä¸€ä¸ªç›¸å¯¹è¾ƒé«˜çš„å€¼ã€‚ 5.OOMä¸¾ä¾‹ 1234567891011121314151617181920212223242526272829303132333435import com.sun.xml.internal.ws.org.objectweb.asm.ClassWriter;import jdk.internal.org.objectweb.asm.Opcodes;/** * jdk6/7ä¸­ï¼š * -XX:PermSize=10m -XX:MaxPermSize=10m * * jdk8ä¸­ï¼š * -XX:MetaspaceSize=10m -XX:MaxMetaspaceSize=10m * * @author shkstart shkstart@126.com * @create 2020 22:24 */public class OOMTest extends ClassLoader { public static void main(String[] args) { int j = 0; try { OOMTest test = new OOMTest(); for (int i = 0; i &lt; 10000; i++) { //åˆ›å»ºClassWriterå¯¹è±¡ï¼Œç”¨äºç”Ÿæˆç±»çš„äºŒè¿›åˆ¶å­—èŠ‚ç  ClassWriter classWriter = new ClassWriter(0); //æŒ‡æ˜ç‰ˆæœ¬å·ï¼Œä¿®é¥°ç¬¦ï¼Œç±»åï¼ŒåŒ…åï¼Œçˆ¶ç±»ï¼Œæ¥å£ classWriter.visit(Opcodes.V1_6, Opcodes.ACC_PUBLIC, &quot;Class&quot; + i, null, &quot;java/lang/Object&quot;, null); //è¿”å›byte[] byte[] code = classWriter.toByteArray(); //ç±»çš„åŠ è½½ test.defineClass(&quot;Class&quot; + i, code, 0, code.length);//Classå¯¹è±¡ j++; } } finally { System.out.println(j); } }} å¦‚ä½•è§£å†³è¿™äº›OOMï¼Ÿ 1ã€è¦è§£å†³OOMå¼‚å¸¸æˆ– heap spaceçš„å¼‚å¸¸ï¼Œä¸€èˆ¬çš„æ‰‹æ®µæ˜¯é¦–å…ˆé€šè¿‡å†…å­˜æ˜ åƒåˆ†æå·¥å…·(å¦‚Eclipse Memory Analyzer)å¯¹dumpå‡ºæ¥çš„å †è½¬å‚¨å¿«ç…§è¿›è¡Œåˆ†æï¼Œé‡ç‚¹æ˜¯ç¡®è®¤å†…å­˜ä¸­çš„å¯¹è±¡æ˜¯å¦æ˜¯å¿…è¦çš„ï¼Œä¹Ÿå°±æ˜¯è¦å…ˆåˆ†æ¸…æ¥šåˆ°åº•æ˜¯å‡ºç°äº†å†…å­˜æ³„æ¼ï¼ˆ Memory Leak)è¿˜æ˜¯å†…å­˜æº¢å‡º( Memory Overflow) 2ã€å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œå¯è¿›ä¸€æ­¥é€šè¿‡å·¥å…·æŸ»çœ‹æ³„æ¼å¯¹è±¡åˆ° GC Rootsçš„å¼•ç”¨é“¾ã€‚äºæ˜¯å°±èƒ½æ‰¾åˆ°æ³„æ¼å¯¹è±¡æ˜¯é€šè¿‡æ€æ ·çš„è·¯å¾„ä¸ GC Rootsç›¸å…³è”å¹¶å¯¼è‡´åƒåœ¾æ”¶é›†å™¨æ— æ³•è‡ªåŠ¨å›æ”¶å®ƒä»¬çš„ã€‚æŒæ¡äº†æ³„æ¼å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œä»¥åŠ GC Rootså¼•ç”¨é“¾çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥æ¯”è¾ƒå‡†ç¡®åœ°å®šä½å‡ºæ³„æ¼ä»£ç çš„ä½ç½®ã€‚ 3ã€å¦‚æœä¸å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å†…å­˜ä¸­çš„å¯¹è±¡ç¡®å®éƒ½è¿˜å¿…é¡»å­˜æ´»ç€ï¼Œé‚£å°±åº”å½“æ£€æŸ»è™šæ‹Ÿæœºçš„å †å‚æ•°(-Xmxä¸-Xms),ä¸æœºå™¨ç‰©ç†å†…å­˜å¯¹æ¯”çœ‹æ˜¯å¦è¿˜å¯ä»¥è°ƒå¤§ï¼Œä»ä»£ç ä¸Šæ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸäº›å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¿‡é•¿ã€æŒæœ‰çŠ¶æ€æ—¶é—´è¿‡é•¿çš„æƒ…å†µï¼Œå°è¯•å‡å°‘ç¨‹åºè¿è¡ŒæœŸçš„å†…å­˜æ¶ˆè€—ã€‚ 6.æ–¹æ³•åŒºå†…éƒ¨ç»“æ„ â€‹ ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¹¦ä¸­å¯¹æ–¹æ³•åŒº( Method Area)å­˜å‚¨å†…å®¹æè¿°å¦‚ä¸‹å®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜ç­‰ã€‚ ç±»å‹ä¿¡æ¯ï¼š å¯¹æ¯ä¸ªåŠ è½½çš„ç±»å‹(ç±»classã€æ¥å£ interfaceã€æšä¸¾enumã€æ³¨è§£ annotation),JVMå¿…é¡»åœ¨æ–¹æ³•åŒºä¸­å­˜å‚¨ä»¥ä¸‹ç±»å‹ä¿¡æ¯ï¼š â‘ è¿™ä¸ªç±»å‹çš„å®Œæ•´æœ‰æ•ˆåç§°(å…¨å=åŒ…å.ç±»å) â‘¡)è¿™ä¸ªç±»å‹ç›´æ¥çˆ¶ç±»çš„å®Œæ•´æœ‰æ•ˆåï¼ˆå¯¹äº interfaceæˆ–æ˜¯java.lang.Object,éƒ½æ²¡æœ‰çˆ¶ç±») â‘¢è¿™ä¸ªç±»å‹çš„ä¿®é¥°ç¬¦ï¼ˆpulblic, abstract,finaçš„æŸä¸ªå­é›†) â‘£è¿™ä¸ªç±»å‹ç›´æ¥æ¥å£çš„ä¸€ä¸ªæœ‰åºåˆ—è¡¨ åŸŸï¼ˆFiledï¼‰ä¿¡æ¯ JVMå¿…é¡»åœ¨æ–¹æ³•åŒºä¸­ä¿å­˜ç±»å‹çš„æ‰€æœ‰åŸŸçš„ç›¸å…³ä¿¡æ¯ä»¥åŠåŸŸçš„å£°æ˜é¡ºåºã€‚ åŸŸçš„ç›¸å…³ä¿¡æ¯åŒ…æ‹¬ï¼šåŸŸåç§°ã€åŸŸç±»å‹ã€åŸŸä¿®é¥°ç¬¦ï¼ˆ publicï¼Œprivateï¼Œprotectedï¼Œstaticï¼Œfinaï¼Œ volatileï¼Œtransientçš„æŸä¸ªå­é›†ï¼‰ æ–¹æ³•ï¼ˆMethodï¼‰ä¿¡æ¯ JTVMå¿…é¡»ä¿å­˜æ‰€æœ‰æ–¹æ³•çš„ä»¥ä¸‹ä¿¡æ¯ï¼ŒåŒåŸŸä¿¡æ¯ä¸€æ ·åŒ…æ‹¬å£°æ˜é¡ºåº ğŸ”¼ æ–¹æ³•åç§° ğŸ”¼ æ–¹æ³•çš„è¿”å›ç±»å‹(æˆ–void)æ–¹æ³•å‚æ•°çš„æ•°é‡å’Œç±»å‹ï¼ˆæŒ‰é¡ºåº ğŸ”¼ æ–¹æ³•çš„ä¿®é¥°ç¬¦ï¼ˆ public, private, protected, static, final,synchronized, native, abstractçš„ä¸€ä¸ªå­é›†) ğŸ”¼ æ–¹æ³•çš„å­—èŠ‚ç ( bytecodes)ã€æ“ä½œæ•°æ ˆã€å±€éƒ¨å˜é‡è¡¨åŠå¤§å°( abstractå’Œnativeæ–¹æ³•é™¤å¤–) ğŸ”¼ å¼‚å¸¸è¡¨( abstractå’Œ nativeæ–¹æ³•é™¤å¤–)ï¼šæ¯ä¸ªå¼‚å¸¸å¤„ç†çš„å¼€å§‹ä½ç½®ã€ç»“æŸä½ç½®ã€ä»£ç å¤„ç†åœ¨ç¨‹åºè®¡æ•°å™¨ä¸­çš„åç§»åœ°å€è¢«æ•è·çš„å¼‚å¸¸ç±»çš„å¸¸é‡æ± ç´¢å¼• non- finalçš„ç±»å˜é‡ é™æ€å˜é‡å’Œç±»å…³è”åœ¨ä¸€èµ·ï¼Œéšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå®ƒä»¬æˆä¸ºç±»æ•°æ®åœ¨é€»è¾‘ä¸Šçš„ä¸€éƒ¨åˆ†ã€‚ ç±»å˜é‡è¢«ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œå³ä½¿æ²¡æœ‰ç±»å®ä¾‹æ—¶ä½ ä¹Ÿå¯ä»¥è®¿é—®å®ƒã€‚ å…¨å±€å¸¸é‡ï¼š static final è¢«å£°æ˜ä¸º finalçš„ç±»å˜é‡çš„å¤„ç†æ–¹æ³•åˆ™ä¸åŒï¼Œæ¯ä¸ªå…¨å±€å¸¸é‡åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šè¢«åˆ†é…äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276import java.io.Serializable;/** * æµ‹è¯•æ–¹æ³•åŒºçš„å†…éƒ¨æ„æˆ * @author shkstart shkstart@126.com * @create 2020 23:39 */public class MethodInnerStrucTest extends Object implements Comparable&lt;String&gt;,Serializable { //å±æ€§ public int num = 10; private static String str = &quot;æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„&quot;; //æ„é€ å™¨ //æ–¹æ³• public void test1(){ int count = 20; System.out.println(&quot;count = &quot; + count); } public static int test2(int cal){ int result = 0; try { int value = 30; result = value / cal; } catch (Exception e) { e.printStackTrace(); } return result; } @Override public int compareTo(String o) { return 0; }}//è¿è¡Œjavap-v-p MethodInnerStrucTest.class &gt; test.txtClassfile /D:/workspace_idea5/JVMDemo/out/production/chapter09/com/atguigu/java/MethodInnerStrucTest.class Last modified 2020-4-22; size 1626 bytes MD5 checksum 69643a16925bb67a96f54050375c75d0 Compiled from &quot;MethodInnerStrucTest.java&quot; //ç±»å‹ä¿¡æ¯public class com.atguigu.java.MethodInnerStrucTest extends java.lang.Object implements java.lang.Comparable&lt;java.lang.String&gt;, java.io.Serializable minor version: 0 major version: 51 flags: ACC_PUBLIC, ACC_SUPERConstant pool: #1 = Methodref #18.#52 // java/lang/Object.&quot;&lt;init&gt;&quot;:()V #2 = Fieldref #17.#53 // com/atguigu/java/MethodInnerStrucTest.num:I #3 = Fieldref #54.#55 // java/lang/System.out:Ljava/io/PrintStream; #4 = Class #56 // java/lang/StringBuilder #5 = Methodref #4.#52 // java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V #6 = String #57 // count = #7 = Methodref #4.#58 // java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; #8 = Methodref #4.#59 // java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder; #9 = Methodref #4.#60 // java/lang/StringBuilder.toString:()Ljava/lang/String; #10 = Methodref #61.#62 // java/io/PrintStream.println:(Ljava/lang/String;)V #11 = Class #63 // java/lang/Exception #12 = Methodref #11.#64 // java/lang/Exception.printStackTrace:()V #13 = Class #65 // java/lang/String #14 = Methodref #17.#66 // com/atguigu/java/MethodInnerStrucTest.compareTo:(Ljava/lang/String;)I #15 = String #67 // æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„ #16 = Fieldref #17.#68 // com/atguigu/java/MethodInnerStrucTest.str:Ljava/lang/String; #17 = Class #69 // com/atguigu/java/MethodInnerStrucTest #18 = Class #70 // java/lang/Object #19 = Class #71 // java/lang/Comparable #20 = Class #72 // java/io/Serializable #21 = Utf8 num #22 = Utf8 I #23 = Utf8 str #24 = Utf8 Ljava/lang/String; #25 = Utf8 &lt;init&gt; #26 = Utf8 ()V #27 = Utf8 Code #28 = Utf8 LineNumberTable #29 = Utf8 LocalVariableTable #30 = Utf8 this #31 = Utf8 Lcom/atguigu/java/MethodInnerStrucTest; #32 = Utf8 test1 #33 = Utf8 count #34 = Utf8 test2 #35 = Utf8 (I)I #36 = Utf8 value #37 = Utf8 e #38 = Utf8 Ljava/lang/Exception; #39 = Utf8 cal #40 = Utf8 result #41 = Utf8 StackMapTable #42 = Class #63 // java/lang/Exception #43 = Utf8 compareTo #44 = Utf8 (Ljava/lang/String;)I #45 = Utf8 o #46 = Utf8 (Ljava/lang/Object;)I #47 = Utf8 &lt;clinit&gt; #48 = Utf8 Signature #49 = Utf8 Ljava/lang/Object;Ljava/lang/Comparable&lt;Ljava/lang/String;&gt;;Ljava/io/Serializable; #50 = Utf8 SourceFile #51 = Utf8 MethodInnerStrucTest.java #52 = NameAndType #25:#26 // &quot;&lt;init&gt;&quot;:()V #53 = NameAndType #21:#22 // num:I #54 = Class #73 // java/lang/System #55 = NameAndType #74:#75 // out:Ljava/io/PrintStream; #56 = Utf8 java/lang/StringBuilder #57 = Utf8 count = #58 = NameAndType #76:#77 // append:(Ljava/lang/String;)Ljava/lang/StringBuilder; #59 = NameAndType #76:#78 // append:(I)Ljava/lang/StringBuilder; #60 = NameAndType #79:#80 // toString:()Ljava/lang/String; #61 = Class #81 // java/io/PrintStream #62 = NameAndType #82:#83 // println:(Ljava/lang/String;)V #63 = Utf8 java/lang/Exception #64 = NameAndType #84:#26 // printStackTrace:()V #65 = Utf8 java/lang/String #66 = NameAndType #43:#44 // compareTo:(Ljava/lang/String;)I #67 = Utf8 æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„ #68 = NameAndType #23:#24 // str:Ljava/lang/String; #69 = Utf8 com/atguigu/java/MethodInnerStrucTest #70 = Utf8 java/lang/Object #71 = Utf8 java/lang/Comparable #72 = Utf8 java/io/Serializable #73 = Utf8 java/lang/System #74 = Utf8 out #75 = Utf8 Ljava/io/PrintStream; #76 = Utf8 append #77 = Utf8 (Ljava/lang/String;)Ljava/lang/StringBuilder; #78 = Utf8 (I)Ljava/lang/StringBuilder; #79 = Utf8 toString #80 = Utf8 ()Ljava/lang/String; #81 = Utf8 java/io/PrintStream #82 = Utf8 println #83 = Utf8 (Ljava/lang/String;)V #84 = Utf8 printStackTrace{ //åŸŸä¿¡æ¯ public int num; descriptor: I flags: ACC_PUBLIC private static java.lang.String str; descriptor: Ljava/lang/String; flags: ACC_PRIVATE, ACC_STATIC //æ–¹æ³•ä¿¡æ¯ public com.atguigu.java.MethodInnerStrucTest(); descriptor: ()V flags: ACC_PUBLIC Code: stack=2, locals=1, args_size=1 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: aload_0 5: bipush 10 7: putfield #2 // Field num:I 10: return LineNumberTable: line 10: 0 line 12: 4 LocalVariableTable: Start Length Slot Name Signature 0 11 0 this Lcom/atguigu/java/MethodInnerStrucTest; public void test1(); descriptor: ()V flags: ACC_PUBLIC Code: stack=3, locals=2, args_size=1 0: bipush 20 2: istore_1 3: getstatic #3 // Field java/lang/System.out:Ljava/io/PrintStream; 6: new #4 // class java/lang/StringBuilder 9: dup 10: invokespecial #5 // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V 13: ldc #6 // String count = 15: invokevirtual #7 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 18: iload_1 19: invokevirtual #8 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder; 22: invokevirtual #9 // Method java/lang/StringBuilder.toString:()Ljava/lang/String; 25: invokevirtual #10 // Method java/io/PrintStream.println:(Ljava/lang/String;)V 28: return LineNumberTable: line 17: 0 line 18: 3 line 19: 28 LocalVariableTable: Start Length Slot Name Signature 0 29 0 this Lcom/atguigu/java/MethodInnerStrucTest; 3 26 1 count I public static int test2(int); descriptor: (I)I flags: ACC_PUBLIC, ACC_STATIC Code: stack=2, locals=3, args_size=1 0: iconst_0 1: istore_1 2: bipush 30 4: istore_2 5: iload_2 6: iload_0 7: idiv 8: istore_1 9: goto 17 12: astore_2 13: aload_2 14: invokevirtual #12 // Method java/lang/Exception.printStackTrace:()V 17: iload_1 18: ireturn Exception table: from to target type 2 9 12 Class java/lang/Exception LineNumberTable: line 21: 0 line 23: 2 line 24: 5 line 27: 9 line 25: 12 line 26: 13 line 28: 17 LocalVariableTable: Start Length Slot Name Signature 5 4 2 value I 13 4 2 e Ljava/lang/Exception; 0 19 0 cal I 2 17 1 result I StackMapTable: number_of_entries = 2 frame_type = 255 /* full_frame */ offset_delta = 12 locals = [ int, int ] stack = [ class java/lang/Exception ] frame_type = 4 /* same */ public int compareTo(java.lang.String); descriptor: (Ljava/lang/String;)I flags: ACC_PUBLIC Code: stack=1, locals=2, args_size=2 0: iconst_0 1: ireturn LineNumberTable: line 33: 0 LocalVariableTable: Start Length Slot Name Signature 0 2 0 this Lcom/atguigu/java/MethodInnerStrucTest; 0 2 1 o Ljava/lang/String; public int compareTo(java.lang.Object); descriptor: (Ljava/lang/Object;)I flags: ACC_PUBLIC, ACC_BRIDGE, ACC_SYNTHETIC Code: stack=2, locals=2, args_size=2 0: aload_0 1: aload_1 2: checkcast #13 // class java/lang/String 5: invokevirtual #14 // Method compareTo:(Ljava/lang/String;)I 8: ireturn LineNumberTable: line 10: 0 LocalVariableTable: Start Length Slot Name Signature 0 9 0 this Lcom/atguigu/java/MethodInnerStrucTest; static {}; descriptor: ()V flags: ACC_STATIC Code: stack=1, locals=0, args_size=0 0: ldc #15 // String æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„ 2: putstatic #16 // Field str:Ljava/lang/String; 5: return LineNumberTable: line 13: 0}Signature: #49 // Ljava/lang/Object;Ljava/lang/Comparable&lt;Ljava/lang/String;&gt;;Ljava/io/Serializable;SourceFile: &quot;MethodInnerStrucTest.java&quot; è¿è¡Œæ—¶å¸¸é‡æ± VSå¸¸é‡æ±  å¸¸é‡æ±  æ–¹æ³•åŒºå†…éƒ¨åŒ…å«äº†è¿è¡Œæ—¶å¸¸é‡æ±  ãƒ»å­—èŠ‚ç æ–‡ä»¶ï¼Œå†…éƒ¨åŒ…å«äº†å¸¸é‡æ± ã€‚ ãƒ»è¦å¼„æ¸…æ¥šæ–¹æ³•åŒºï¼Œéœ€è¦ç†è§£æ¸…æ¥šClassFile,å› ä¸ºåŠ è½½ç±»çš„ä¿¡æ¯éƒ½åœ¨æ–¹æ³•åŒºã€‚ ãƒ»è¦å¼„æ¸…æ¥šæ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œéœ€è¦ç†è§£æ¸…æ¥šClassFileä¸­çš„å¸¸é‡æ± https://docs.oracle.com/javase/specs/ivms/se8/htm1/jvms-4.htmlå¦‚ä¸‹ï¼š ä¸€ä¸ªæœ‰æ•ˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­é™¤äº†åŒ…å«ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ã€å­—æ®µã€æ–¹æ³•ä»¥åŠæ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œè¿˜åŒ…å«ä¸€é¡¹ä¿¡æ¯é‚£å°±æ˜¯å¸¸é‡æ± è¡¨( Constant Pool Table),åŒ…æ‹¬å„ç§å­—é¢é‡å’Œå¯¹ç±»å‹ã€åŸŸå’Œæ–¹æ³•çš„ç¬¦å·å¼•ç”¨ã€‚ ä¸ºä»€ä¹ˆéœ€è¦å¸¸é‡æ± ï¼Ÿ ä¸€ä¸ªjavaæºæ–‡ä»¶ä¸­çš„ç±»ã€æ¥å£ï¼Œç¼–è¯‘åäº§ç”Ÿä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶ã€‚è€ŒJavaä¸­çš„å­—èŠ‚ç éœ€è¦æ•°æ®æ”¯æŒï¼Œé€šå¸¸è¿™ç§æ•°æ®ä¼šå¾ˆå¤§ä»¥è‡³äºä¸èƒ½ç›´æ¥å­˜åˆ°å­—èŠ‚ç é‡Œï¼Œæ¢å¦ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥å­˜åˆ°å¸¸é‡æ± ï¼Œè¿™ä¸ªå­—èŠ‚ç åŒ…å«äº†æŒ‡å‘å¸¸é‡æ± çš„å¼•ç”¨ã€‚åœ¨åŠ¨æ€é“¾æ¥çš„æ—¶å€™ä¼šç”¨åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œä¹‹å‰æœ‰ä»‹ç»ã€‚ å°ç»“ å¸¸é‡æ± ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€å¼ è¡¨ï¼Œè™šæ‹ŸæœºæŒ‡ä»¤æ ¹æ®è¿™å¼ å¸¸é‡è¡¨æ‰¾åˆ°è¦æ‰§è¡Œçš„ç±»åã€æ–¹æ³•åã€å‚æ•°ç±»å‹ã€å­—é¢é‡ç­‰ç±»å‹ã€‚ è¿è¡Œæ—¶å¸¸é‡æ±  ğŸ¥‘ è¿è¡Œæ—¶å¸¸é‡æ± ( Runtime Constant Pool)æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚ ğŸ¥‘ å¸¸é‡æ± è¡¨( Constant Pool Table)æ˜¯Classæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡ä¸ç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åå­˜æ”¾åˆ°æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚ ğŸ¥‘ è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œåœ¨åŠ è½½ç±»å’Œæ¥å£åˆ°è™šæ‹Ÿæœºåï¼Œå°±ä¼šåˆ›å»ºå¯¹åº”çš„è¿è¡Œæ—¶å¸¸é‡æ± ã€‚ ğŸ¥‘ JVMä¸ºæ¯ä¸ªå·²åŠ è½½çš„ç±»å‹ï¼ˆç±»æˆ–æ¥å£ï¼‰éƒ½ç»´æŠ¤ä¸€ä¸ªå¸¸é‡æ± ã€‚æ± ä¸­çš„æ•°æ®é¡¹åƒæ•°ç»„é¡¹ä¸€æ ·ï¼Œæ˜¯é€šè¿‡ç´¢å¼•è®¿é—®çš„ã€‚ ğŸ¥‘ è¿è¡Œæ—¶å¸¸é‡æ± ä¸­åŒ…å«å¤šç§ä¸åŒçš„å¸¸é‡ï¼ŒåŒ…æ‹¬ç¼–è¯‘æœŸå°±å·²ç»æ˜ç¡®çš„æ•°å€¼å­—é¢é‡ï¼Œä¹ŸåŒ…æ‹¬åˆ°è¿è¡ŒæœŸè§£æåæ‰èƒ½å¤Ÿè·å¾—çš„æ–¹æ³•æˆ–è€…å­—æ®µå¼•ç”¨ã€‚æ­¤æ—¶ä¸å†æ˜¯å¸¸é‡æ± ä¸­çš„ç¬¦å·åœ°å€äº†ï¼Œè¿™é‡Œæ¢ä¸ºçœŸå®åœ°å€ã€‚ ğŸ¥‘ è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œç›¸å¯¹äºClassæ–‡ä»¶å¸¸é‡æ± çš„å¦ä¸€é‡è¦ç‰¹å¾æ˜¯ï¼šå…·å¤‡åŠ¨æ€æ€§ã€‚è¿è¡Œæ—¶å¸¸é‡æ± ç±»ä¼¼äºä¼ ç»Ÿç¼–ç¨‹è¯­è¨€ä¸­çš„ç¬¦å·è¡¨( symol table),ä½†æ˜¯å®ƒæ‰€åŒ…å«çš„æ•°æ®å´æ¯”ç¬¦å·è¡¨è¦æ›´åŠ ä¸°å¯Œä¸€äº›ã€‚ ğŸ¥‘ å½“åˆ›å»ºç±»æˆ–æ¥å£çš„è¿è¡Œæ—¶å¸¸é‡æ± æ—¶ï¼Œå¦‚æœæ„é€ è¿è¡Œæ—¶å¸¸é‡æ± æ‰€éœ€çš„å†…å­˜ç©ºé—´è¶…è¿‡äº†æ–¹æ³•åŒºæ‰€èƒ½æä¾›çš„æœ€å¤§å€¼ï¼Œåˆ™JVMä¼šæŠ› OutOfMemoryErrorå¼‚å¸¸ã€‚ 7.æ–¹æ³•åŒºçš„æ¼”è¿›ç»†èŠ‚ 1.é¦–å…ˆæ˜ç¡®ï¼šåªæœ‰ HotSpotã‚ªæœ‰æ°¸ä¹…ä»£ã€‚ BEA JRockitã€IBM J9ç­‰æ¥è¯´ï¼Œæ˜¯ä¸å­˜åœ¨æ°¸ä¹…ä»£çš„æ¦‚å¿µçš„ã€‚åŸåˆ™ä¸Šå¦‚ä½•å®ç°æ–¹æ³•åŒºå±äºè™šæ‹Ÿæœºå®ç°ç»†èŠ‚ï¼Œä¸å—ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ç®¡æŸï¼Œå¹¶ä¸è¦æ±‚ç»Ÿä¸€ã€‚ 2, HotSpotä¸­æ–¹æ³•åŒºçš„å˜åŒ–ï¼š jak1.6åŠä¹‹å‰ æœ‰æ°¸ä¹…ä»£( permanent generation),é™æ€å˜é‡ï¼ˆå˜é‡åï¼‰å­˜æ”¾åœ¨æ°¸ä¹…ä»£ä¸Š jdk. 7 æœ‰æ°¸ä¹…ä»£ï¼Œä½†å·²ç»é€æ­¥â€œå»æ°¸ä¹…ä»£â€ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ã€é™æ€å˜é‡ç§»é™¤ï¼Œä¿å­˜åœ¨å †ä¸­ jak1.8åŠä¹‹å æ— æ°¸ä¹…ä»£ï¼Œç±»å‹ä¿¡æ¯ã€å­—æ®µã€æ–¹æ³•ã€å¸¸é‡ä¿å­˜åœ¨æœ¬åœ°å†…å­˜çš„å…ƒç©ºé—´ï¼Œä½†å­—ç¬¦ä¸²å¸¸é‡æ± ã€é™æ€å˜é‡ä»åœ¨å † 3.æ°¸ä¹…ä»£ä¸ºä»€ä¹ˆè¦è¢«å…ƒç©ºé—´æ›¿æ¢ï¼Ÿ ãƒ»éšç€Java8çš„åˆ°æ¥ï¼Œ Hotspot Vyä¸­å†ä¹Ÿè§ä¸åˆ°æ°¸ä¹…ä»£äº†ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ„å‘³ç€ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ä¹Ÿæ¶ˆå¤±äº†ã€‚è¿™äº›æ•°æ®è¢«ç§»åˆ°äº†ä¸€ä¸ªä¸å †ä¸ç›¸è¿çš„æœ¬åœ°å†…å­˜åŒºåŸŸï¼Œè¿™ä¸ªåŒºåŸŸå«åšå…ƒç©ºé—´( Metaspace). ãƒ»ç”±äºç±»çš„å…ƒæ•°æ®åˆ†é…åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œå…ƒç©ºé—´çš„æœ€å¤§å¯åˆ†é…ç©ºé—´å°±æ˜¯ç³»ç»Ÿå¯ç”¨å†…å­˜ç©º ãƒ»è¿™é¡¹æ”¹åŠ¨æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼ŒåŸå› æœ‰ï¼š 1)ä¸ºæ°¸ä¹…ä»£è®¾ç½®ç©ºé—´å¤§å°æ˜¯å¾ˆéš¾ç¡®å®šçš„ â€‹ åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¦‚æœåŠ¨æ€åŠ è½½ç±»è¿‡å¤šï¼Œå®¹æ˜“äº§ç”ŸPerm åŒºçš„OOMã€‚æ¯”å¦‚æŸä¸ªå®é™…Webå·¥ç¨‹ä¸­ï¼Œå› ä¸ºåŠŸèƒ½ç‚¹æ¯”è¾ƒå¤šï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¦ä¸æ–­åŠ¨æ€åŠ è½½å¾ˆå¤šç±»ï¼Œç»å¸¸å‡ºç°è‡´å‘½é”™è¯¯ã€‚æ¯”å¦‚Exception in thread â€˜dubbo client x.x connerâ€™ java. lang. Outommemoryemor PermGen space è€Œå…ƒç©ºé—´å’Œæ°¸ä¹…ä»£ä¹‹é—´æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šå…ƒç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ã€‚å› æ­¤ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå…ƒç©ºé—´çš„å¤§å°ä»…å—æœ¬åœ°å†…å­˜é™åˆ¶ã€‚ 2)å¯¹æ°¸ä¹…ä»£è¿›è¡Œè°ƒä¼˜æ˜¯å¾ˆå›°éš¾çš„ã€‚ ãƒ»åˆ¤å®šä¸€ä¸ªå¸¸é‡æ˜¯å¦â€œåºŸå¼ƒâ€è¿˜æ˜¯ç›¸å¯¹ç®€å•ï¼Œè€Œè¦åˆ¤å®šä¸€ä¸ªç±»å‹æ˜¯å¦å±äºâ€œä¸å†è¢«ä½¿ç”¨çš„ç±»â€çš„æ¡ä»¶å°±æ¯”è¾ƒè‹›åˆ»äº†ã€‚éœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢ä¸‰ä¸ªæ¡ä»¶ï¼š è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯JAVAå †ä¸­ä¸å­˜åœ¨è¯¥ç±»åŠå…¶ä»»ä½•æ´¾ç”Ÿå­ç±»çš„å®ä¾‹ã€‚ åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨å·²ç»è¢«å›æ”¶ï¼Œè¿™ä¸ªæ¡ä»¶é™¤éæ˜¯ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„å¯æ›¿æ¢ç±»åŠ è½½å™¨çš„åœºæ™¯ï¼Œå¦‚OSGiã€JSPçš„é‡åŠ è½½ç­‰ï¼Œå¦åˆ™é€šå¸¸æ˜¯å¾ˆéš¾è¾¾æˆçš„ã€‚ è¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚ ãƒ»JAVAè™šæ‹Ÿæœºè¢«å…è®¸å¯¹æ»¡è¶³ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶çš„æ— ç”¨ç±»è¿›è¡Œå›æ”¶ï¼Œè¿™é‡Œè¯´çš„ä»…ä»…æ˜¯â€œè¢«å…è®¸â€ï¼Œè€Œå¹¶ä¸æ˜¯å’Œå¯¹è±¡ä¸€æ ·ï¼Œæ²¡æœ‰å¼•ç”¨äº†å°±å¿…ç„¶ä¼šå›æ”¶ã€‚å…³äºæ˜¯å¦è¦å¯¹ç±»å‹è¿›è¡Œå›æ”¶ï¼ŒHotSpotè™šæ‹Ÿæœºæä¾›äº†-Xnoclasscå‚æ•°è¿›è¡Œæ§åˆ¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ -verbose:class ä»¥åŠ -XX: TracedClass - Loadingã€-XX: +TraceClassUnLoadingæŸ¥çœ‹ç±»åŠ è½½å’Œå¸è½½ä¿¡æ¯ã€‚ ãƒ»åœ¨å¤§é‡ä½¿ç”¨åå°„ã€åŠ¨æ€ä»£ç†ã€CGLibç­‰å­—èŠ‚ç æ¡†æ¶ï¼ŒåŠ¨æ€ç”ŸæˆJSPä»¥åŠOSGiè¿™ç±»é¢‘ç¹è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„åœºæ™¯ä¸­ï¼Œé€šå¸¸éƒ½éœ€è¦Javaè™šæ‹Ÿæœºå…·å¤‡ç±»å‹å¸è½½çš„èƒ½åŠ›ï¼Œä»¥ä¿è¯ä¸ä¼šå¯¹æ–¹æ³•åŒºé€ æˆè¿‡å¤§çš„å†…å­˜å‹åŠ›ã€‚ 4ã€Stringtableä¸ºä»€ä¹ˆè¦è°ƒæ•´ï¼Ÿ â€‹ jdk7ä¸­å°† string Tableæ”¾åˆ°äº†å †ç©ºé—´ä¸­ã€‚å› ä¸ºæ°¸ä¹…ä»£çš„å›æ”¶æ•ˆç‡å¾ˆä½ï¼Œåœ¨full GCçš„æ—¶å€™æ‰ä¼šè§¦å‘ã€‚è€Œfull GCæ˜¯è€å¹´ä»£çš„ç©ºé—´ä¸è¶³ã€æ°¸ä¹…ä»£ä¸è¶³æ—¶æ‰ä¼šè§¦å‘ è¿™å°±å¯¼è‡´ StringTableå›æ”¶æ•ˆç‡ä¸é«˜ã€‚è€Œæˆ‘ä»¬å¼€å‘ä¸­ä¼šæœ‰å¤§é‡çš„å­—ç¬¦ä¸²è¢«åˆ›å»ºï¼Œå›æ”¶æ•ˆç‡ä½ï¼Œå¯¼è‡´æ°¸ä¹…ä»£å†…å­˜ä¸è¶³ã€‚æ”¾åˆ°å †é‡Œï¼Œèƒ½åŠæ—¶å›æ”¶å†…å­˜ã€‚ 8.é™æ€å˜é‡å­˜åœ¨å“ª å·¥å…·ï¼š 12345678910111213141516public class StaticObjTest { static class Test { static ObjectHolder staticObj = new ObjectHolder(); ObjectHolder instanceObj = new ObjectHolder(); void foo { ObjectHolder localObj = new ObjectH01der(); System.out.println(&quot;done&quot;); private static class ObjectHolder { } public static void main (String[]args){ Test test = new StaticObjTest.Test(); test.foo(); } } staticOBJéšç€Testçš„ç±»å‹ä¿¡æ¯å­˜æ”¾åœ¨æ–¹æ³•åŒºï¼Œ instanceOBJéšç€Testçš„å¯¹è±¡å®ä¾‹å­˜æ”¾åœ¨JAVAå †ï¼ŒlocalObjectåˆ™æ˜¯å­˜æ”¾åœ¨foo()æ–¹æ³•æ ˆå¸§çš„å±€éƒ¨å˜é‡è¡¨ä¸­ã€‚ 1234hsdb&gt;scanoops 0x00007f32c7800000 0x00007f32c7b50000 JHSDB_TestCase$ObjectHolder0x00007f32c7a7c458 JHSDB_TestCase$ObjectHolder0x00007f32c7a7c480 JHSDB_TestCase$ObjectHolder0x00007f32c7a7c490 JHSDB_TestCase$ObjectHolder æµ‹è¯•å‘ç°ï¼šä¸‰ä¸ªå¯¹è±¡çš„æ•°æ®åœ¨å†…å­˜ä¸­çš„åœ°å€éƒ½è½åœ¨EdenåŒºèŒƒå›´å†…ï¼Œæ‰€ä»¥ç»“è®ºï¼šåªè¦æ˜¯å¯¹è±¡å®ä¾‹å¿…ç„¶ä¼šåœ¨Javaå †ä¸­åˆ†é… æ¥ç€ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªå¼•ç”¨è¯¥ staticon&gt;å¯¹è±¡çš„åœ°æ–¹ï¼Œæ˜¯åœ¨ä¸€ä¸ªjava.1ang.C1assçš„å®ä¾‹é‡Œï¼Œå¹¶ä¸”ç»™å‡ºäº†è¿™ä¸ªå®ä¾‹çš„åœ°å€ï¼Œé€šè¿‡å·¥ nspectoræŸ¥çœ‹è¯¥å¯¹è±¡å®ä¾‹ï¼Œå¯ä»¥æ¸…æ¥šçœ‹åˆ°è¿™ç¡®å®æ˜¯ä¸€ä¸ªjava.1ang.C1assç±»å‹çš„å¯¹è±¡å®ä¾‹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªåä¸º statical]çš„å®ä¾‹å­—æ®µï¼š â€‹ ä»ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹æ‰€å®šä¹‰çš„æ¦‚å¿µæ¨¡å‹æ¥çœ‹ï¼Œæ‰€æœ‰Classç›¸å…³çš„ä¿¡æ¯éƒ½åº”è¯¥å­˜æ”¾åœ¨æ–¹æ³•åŒºä¹‹ä¸­ï¼Œä½†æ–¹æ³•åŒºè¯¥å¦‚ä½•å®ç°ï¼Œã€ŠJAVAè™šæ‹Ÿæœºè§„èŒƒã€‹å¹¶æœªåšå‡ºè§„å®šï¼Œè¿™å°±æˆäº†ä¸€ä»¶å…è®¸ä¸åŒè™šæ‹Ÿæœºè‡ªå·±çµæ´»æŠŠæ¡çš„äº‹æƒ…ã€‚JDK7åŠå…¶ä»¥åç‰ˆæœ¬çš„ HotSpotè™šæ‹Ÿæœºé€‰æ‹©æŠŠé™æ€å˜é‡ä¸ç±»å‹åœ¨Javaè¯­è¨€ä¸€ç«¯çš„æ˜ å°„classå¯¹è±¡å­˜æ”¾åœ¨ä¸€èµ·ï¼Œå­˜å‚¨äºJavaå †ä¹‹ä¸­ï¼Œä»æˆ‘ä»¬çš„å®éªŒä¸­ä¹Ÿæ˜ç¡®éªŒè¯äº†è¿™ä¸€ç‚¹ã€‚ 9.æ–¹æ³•åŒºåƒåœ¾å›æ”¶ â€‹ æœ‰äº›äººè®¤ä¸ºæ–¹æ³•åŒº(å¦‚ HotSpotè™šæ‹Ÿæœºä¸­çš„å…ƒç©ºé—´æˆ–è€…æ°¸ä¹…)æ˜¯æ²¡æœ‰åƒåœ¾æ”¶é›†è¡Œä¸ºçš„ï¼Œå…¶å®ä¸ç„¶ã€‚ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¯¹æ–¹æ³•åŒºçš„çº¦æŸæ˜¯éå¸¸å®½æ¾çš„ï¼Œæåˆ°è¿‡å¯ä»¥ä¸è¦æ±‚è™šæ‹Ÿæœºåœ¨æ–¹æ³•åŒºä¸­å®ç°åƒåœ¾æ”¶é›†ã€‚äº‹å®ä¸Šä¹Ÿç¡®å®æœ‰æœªå®ç°æˆ–æœªèƒ½å®Œæ•´å®ç°æ–¹æ³•åŒºç±»å‹å¸è½½çš„æ”¶é›†å™¨å­˜åœ¨(å¦‚JDK11æ—¶æœŸçš„ZGCæ”¶é›†å™¨å°±ä¸æ”¯æŒç±»å¸è½½)ã€‚ â€‹ ä¸€èˆ¬æ¥è¯´è¿™ä¸ªåŒºåŸŸçš„å›æ”¶æ•ˆæœæ¯”è¾ƒéš¾ä»¤äººæ»¡æ„ï¼Œå°¤å…¶æ˜¯ç±»å‹çš„å¸è½½ï¼Œæ¡ä»¶ç›¸å½“è‹›åˆ»ã€‚ä½†æ˜¯è¿™éƒ¨åˆ†åŒºåŸŸçš„å›æ”¶æœ‰æ—¶åˆç¡®å®æ˜¯å¿…è¦çš„ã€‚ä»¥å‰Sunå…¬å¸çš„Bugåˆ—è¡¨ä¸­ï¼Œæ›¾å‡ºç°è¿‡çš„è‹¥å¹²ä¸ªä¸¥é‡çš„Bugå°±æ˜¯ç”±äºä½ç‰ˆæœ¬çš„ HotSpotè™šæ‹Ÿæœºå¯¹æ­¤åŒºåŸŸæœªå®Œå…¨å›æ”¶è€Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ â€‹ æ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹ï¼šå¸¸é‡æ± ä¸­åºŸå¼ƒçš„å¸¸é‡å’Œä¸å†ä½¿ç”¨çš„ç±»å‹ã€‚ â€‹ å…ˆæ¥è¯´è¯´æ–¹æ³•åŒºå†…å¸¸é‡æ± ä¹‹ä¸­ä¸»è¦å­˜æ”¾çš„ä¸¤å¤§ç±»å¸¸é‡ï¼šå­—é¢é‡å’Œç¬¦å·å¼•ç”¨å­—é¢é‡æ¯”è¾ƒæ¥è¿‘JAVAè¯­è¨€å±‚æ¬¡çš„å¸¸é‡æ¦‚å¿µï¼Œå¦‚æ–‡æœ¬å­—ç¬¦ä¸²ã€è¢«å£°æ˜ä¸ºfinalçš„å¸¸é‡å€¼ç­‰ã€‚è€Œç¬¦å·å¼•ç”¨åˆ™å±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬ä¸‹é¢ä¸‰ç±»å¸¸é‡ï¼š â€‹ 1ã€ç±»å’Œæ¥å£çš„å…¨é™å®šå â€‹ 2ã€å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ â€‹ 3ã€æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦ â€‹ HotSpot,è™šæ‹Ÿæœºå¯¹å¸¸é‡æ± çš„å›æ”¶ç­–ç•¥æ˜¯å¾ˆæ˜ç¡®çš„ï¼Œåªè¦å¸¸é‡æ± ä¸­çš„å¸¸é‡æ²¡æœ‰è¢«ä»»ä½•åœ°æ–¹å¼•ç”¨ï¼Œå°±å¯ä»¥è¢«å›æ”¶ã€‚ â€‹ å›æ”¶åºŸå¼ƒå¸¸é‡ä¸å›æ”¶JAVAå †ä¸­çš„å¯¹è±¡éå¸¸ç±»ä¼¼ â€‹ åˆ¤å®šä¸€ä¸ªå¸¸é‡æ˜¯å¦â€œåºŸå¼ƒâ€è¿˜æ˜¯ç›¸å¯¹ç®€å•ï¼Œè€Œè¦åˆ¤å®šä¸€ä¸ªç±»å‹æ˜¯å¦å±äºâ€œä¸å†è¢«ä½¿ç”¨çš„ç±»â€çš„æ¡ä»¶å°±æ¯”è¾ƒè‹›åˆ»äº†ã€‚éœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢ä¸‰ä¸ªæ¡ä»¶ â€‹ è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯Javaå †ä¸­ä¸å­˜åœ¨è¯¥ç±»åŠå…¶ä»»ä½•æ´¾ç”Ÿå­ç±»çš„å®ä¾‹ã€‚ â€‹ åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨å·²ç»è¢«å›æ”¶ï¼Œè¿™ä¸ªæ¡ä»¶é™¤éæ˜¯ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„å¯æ›¿æ¢ç±»åŠ è½½å™¨çš„åœºæ™¯ï¼Œå¦‚OSGiã€JSPçš„é‡åŠ è½½ç­‰ï¼Œå¦åˆ™é€šå¸¸æ˜¯å¾ˆéš¾è¾¾æˆçš„ã€‚ â€‹ è¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚ â€‹ Javaè™šæ‹Ÿæœºè¢«å…è®¸å¯¹æ»¡è¶³ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶çš„æ— ç”¨ç±»è¿›è¡Œå›æ”¶ï¼Œè¿™é‡Œè¯´çš„ä»…ä»…æ˜¯â€œè¢«å…è®¸â€ï¼Œè€Œå¹¶ä¸æ˜¯å’Œå¯¹è±¡ä¸€æ ·ï¼Œæ²¡æœ‰å¼•ç”¨äº†å°±å¿…ç„¶ä¼šå›æ”¶ã€‚å…³äºæ˜¯å¦è¦å¯¹ç±»å‹è¿›è¡Œå›æ”¶ï¼ŒHotSpotè™šæ‹Ÿæœºæä¾›äº†-Xnoclasscå‚æ•°è¿›è¡Œæ§åˆ¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ -cverbose:classä»¥åŠ -XX: +TracedClass- Loadingã€-XX: TracedClassUnLoadingæŸ¥çœ‹ç±»åŠ è½½å’Œå¸è½½ä¿¡æ¯ã€‚ â€‹ åœ¨å¤§é‡ä½¿ç”¨åå°„ã€åŠ¨æ€ä»£ç†ã€CGLibç­‰å­—èŠ‚ç æ¡†æ¶ï¼ŒåŠ¨æ€ç”ŸæˆJSPä»¥åŠSGiè¿™ç±»é¢‘ç¹è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„åœºæ™¯ä¸­ï¼Œé€šå¸¸éƒ½éœ€è¦Javaè™šæ‹Ÿæœºå…·å¤‡ç±»å‹å¸è½½çš„èƒ½åŠ›ï¼Œä»¥ä¿è¯ä¸ä¼šå¯¹æ–¹æ³•åŒºé€ æˆè¿‡å¤§çš„å†…å­˜å‹åŠ›ã€‚ åã€å¯¹è±¡çš„å®ä¾‹åŒ–å†…å­˜ å¸ƒå±€ä¸è®¿é—®å®šä½ 1.å¯¹è±¡å®ä¾‹åŒ–çš„å‡ ç§æ–¹å¼ 2.åˆ›å»ºå¯¹è±¡çš„æ­¥éª¤ 1.åˆ¤æ–­å¯¹è±¡å¯¹åº”çš„ç±»æ˜¯å¦åŠ è½½ã€é“¾æ¥ã€åˆå§‹åŒ– â€‹ è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡newæŒ‡ä»¤ï¼Œé¦–å…ˆå»æ£€æŸ»è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°èƒ½å¦åœ¨ Metaspaceçš„å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ã€è§£æå’Œåˆå§‹åŒ–ã€‚ï¼ˆå³åˆ¤æ–­ç±»å…ƒä¿¡æ¯æ˜¯å¦å­˜åœ¨ï¼‰ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆåœ¨åŒäº²å§”æ´¾æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨å½“å‰ç±»åŠ è½½å™¨ä»¥classloader åŒ…å ç±»åä¸ºKeyè¿›è¡ŒæŸ¥æ‰¾å¯¹åº”çš„ï¼Œclassæ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶ï¼Œåˆ™æŠ›å‡ºClassnotfound Exceptionå¼‚å¸¸ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œåˆ™è¿›è¡Œç±»åŠ è½½ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„classç±»å¯¹è±¡ 2.ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ â€‹ é¦–å…ˆè®¡ç®—å¯¹è±¡å ç”¨ç©ºé—´å¤§å°ï¼Œæ¥ç€åœ¨å †ä¸­åˆ’åˆ†ä¸€å—å†…å­˜ç»™æ–°å¯¹è±¡ã€‚å¦‚æœå®ä¾‹æˆå‘˜å˜é‡æ˜¯å¼•ç”¨å˜é‡ï¼Œä»…åˆ†é…å¼•ç”¨å˜é‡ç©ºé—´å³å¯ï¼Œå³4ä¸ªå­—èŠ‚å¤§å°ã€‚ å¦‚æœå†…å­˜è§„æ•´ï¼Œä½¿ç”¨æŒ‡é’ˆç¢°æ’ â€‹ å¦‚æœå†…å­˜æ˜¯è§„æ•´çš„ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°†é‡‡ç”¨çš„æ˜¯æŒ‡é’ˆç¢°æ’æ³•( Bump The Pointer)æ¥ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ã€‚æ„æ€æ˜¯æ‰€æœ‰ç”¨è¿‡çš„å†…å­˜åœ¨ä¸€è¾¹ï¼Œç©ºé—²çš„å†…å­˜åœ¨å¦å¤–ä¸€è¾¹ï¼Œä¸­é—´æ”¾ç€ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºåˆ†ç•Œç‚¹çš„æŒ‡ç¤ºå™¨ï¼Œåˆ†é…å†…å­˜å°±ä»…ä»…æ˜¯æŠŠæŒ‡é’ˆå‘ç©ºé—²é‚£è¾¹æŒªåŠ¨ä¸€æ®µä¸å¯¹è±¡å¤§å°ç›¸ç­‰çš„è·ç¦»ç½¢äº†ã€‚å¦‚æœåƒåœ¾æ”¶é›†å™¨é€‰æ‹©çš„æ˜¯ Serialã€ Pardewè¿™ç§åŸºäºå‹ç¼©ç®—æ³•çš„ï¼Œè™šæ‹Ÿæœºé‡‡ç”¨è¿™ç§åˆ†é…æ–¹å¼ã€‚èˆ¬ä½¿ç”¨å¸¦æœ‰ compactï¼ˆæ•´ç†ï¼‰è¿‡ç¨‹çš„æ”¶é›†å™¨æ—¶ï¼Œä½¿ç”¨æŒ‡é’ˆç¢°æ’ã€‚ å¦‚æœå†…å­˜ä¸è§„æ•´ï¼Œè™šæ‹Ÿæœºéœ€è¦ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨ï¼Œä½¿ç”¨ç©ºé—²åˆ—è¡¨åˆ†é… â€‹ å¦‚æœå†…å­˜ä¸æ˜¯è§„æ•´çš„ï¼Œå·²ä½¿ç”¨çš„å†…å­˜å’Œæœªä½¿ç”¨çš„å†…å­˜ç›¸äº’äº¤é”™ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°†é‡‡ç”¨çš„æ˜¯ç©ºé—²åˆ—è¡¨æ³•æ¥ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ã€‚æ„æ€æ˜¯è™šæ‹Ÿæœºç»´æŠ¤äº†ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•ä¸Šå“ªäº›å†…å­˜å—æ˜¯å¯ç”¨çš„ï¼Œå†åˆ†é…çš„æ—¶å€™ä»åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´åˆ’åˆ†ç»™å¯¹è±¡å®ä¾‹ï¼Œå¹¶æ›´æ–°åˆ—è¡¨ä¸Šçš„å†…å®¹ã€‚è¿™ç§åˆ†é…æ–¹å¼æˆä¸ºâ€œç©ºé—²åˆ—è¡¨( Free List)â€ è¯´æ˜ï¼šé€‰æ‹©å“ªç§åˆ†é…æ–¹å¼ç”±Javaå †æ˜¯å¦è§„æ•´å†³å®šï¼Œè€ŒJAVAå †æ˜¯å¦è§„æ•´åˆç”±æ‰€é‡‡ç”¨çš„åƒåœ¾æ”¶é›†å™¨æ˜¯å¦å¸¦æœ‰å‹ç¼©æ•´ç†åŠŸèƒ½å†³å®šã€‚ 3.å¤„ç†å¹¶å‘å®‰å…¨é—®é¢˜ â€‹ åœ¨åˆ†é…å†…å­˜ç©ºé—´æ—¶ï¼Œå¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯åŠæ—¶ä¿è¯newå¯¹è±¡æ—¶å€™çš„çº¿ç¨‹å®‰å…¨æ€§ï¼šåˆ›å»ºå¯¹è±¡æ˜¯éå¸¸é¢‘ç¹çš„æ“ä½œï¼Œè™šæ‹Ÿæœºéœ€è¦è§£å†³å¹¶å‘é—®é¢˜ã€‚è™šæ‹Ÿæœºé‡‡ç”¨äº†ä¸¤ç§æ–¹å¼è§£å†³å¹¶å‘é—®é¢˜: ãƒ»CAS( Compare And Swap)å¤±è´¥é‡è¯•ã€åŒºåŸŸåŠ é”ï¼šä¿è¯æŒ‡é’ˆæ›´æ–°æ“ä½œçš„åŸå­æ€§ï¼› ãƒ»TLABæŠŠå†…å­˜åˆ†é…çš„åŠ¨ä½œæŒ‰ç…§çº¿ç¨‹åˆ’åˆ†åœ¨ä¸åŒçš„ç©ºé—´ä¹‹ä¸­è¿›è¡Œï¼Œå³æ¯ä¸ªçº¿ç¨‹åœ¨JAVAå †ä¸­é¢„å…ˆåˆ†é…ä¸€å°å—å†…å­˜ï¼Œç§°ä¸ºæœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²åŒºï¼Œï¼ˆTLAB, Thread Local All ocation Buffer)è™šæ‹Ÿæœºæ˜¯å¦ä½¿ç”¨TLAB,å¯ä»¥é€šè¿‡-XX:+/- UseTLABå‚æ•°æ¥è®¾å®šã€‚ 4,åˆå§‹åŒ–åˆ†é…åˆ°çš„ç©ºé—´ â€‹ å†…å­˜åˆ†é…ç»“æŸï¼Œè™šæ‹Ÿæœºå°†åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ã€‚è¿™ä¸€æ­¥ä¿è¯äº†å¯¹è±¡çš„å®ä¾‹å­—æ®µåœ¨JAVAä»£ç ä¸­å¯ä»¥ä¸ç”¨èµ‹åˆå§‹å€¼å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œç¨‹åºèƒ½è®¿é—®åˆ°è¿™äº›å­—æ®µçš„æ•°æ®ç±»å‹æ‰€å¯¹åº”çš„é›¶å€¼ã€‚ 5,è®¾ç½®å¯¹è±¡çš„å¯¹è±¡å¤´ â€‹ å°†å¯¹è±¡çš„æ‰€å±ç±»ï¼ˆå³ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ï¼‰ã€å¯¹è±¡çš„ Hashcode,å’Œå¯¹è±¡çš„GCä¿¡æ¯ã€é”ä¿¡æ¯ç­‰æ•° æ®å­˜å‚¨åœ¨å¯¹è±¡çš„å¯¹è±¡å¤´ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹çš„å…·ä½“è®¾ç½®æ–¹å¼å–å†³äºJVMå®ç°ã€‚ 6,æ‰§è¡Œinitæ–¹æ³•è¿›è¡Œåˆå§‹åŒ– â€‹ åœ¨Javaç¨‹åºçš„è§†è§’çœ‹æ¥ï¼Œåˆå§‹åŒ–æ‰æ­£å¼å¼€å§‹ã€‚åˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œæ‰§è¡Œå®ä¾‹åŒ–ä»£ç å—ï¼Œè°ƒç”¨ç±»çš„æ„é€ æ–¹æ³•ï¼Œå¹¶æŠŠå †å†…å¯¹è±¡çš„é¦–åœ°å€èµ‹å€¼ç»™å¼•ç”¨å˜é‡ã€‚å› æ­¤ä¸€èˆ¬æ¥è¯´(ç”±å­—èŠ‚ç ä¸­æ˜¯å¦è·Ÿéšæœ‰invokespecialæŒ‡ä»¤æ‰€å†³å®š)ï¼ŒnewæŒ‡ä»¤ä¹‹åä¼šæ¥ç€å°±æ˜¯æ‰§è¡Œæ–¹æ³•ï¼ŒæŠŠå¯¹è±¡æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„å¯¹è±¡æ‰ç®—å®Œå…¨åˆ›å»ºå‡ºæ¥ã€‚ 3.å¯¹è±¡çš„å†…å­˜å¸ƒå±€ 4.å¯¹è±¡è®¿é—®å®šä½ åä¸€ã€ç›´æ¥å†…å­˜ ãƒ»ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚ ãƒ»ç›´æ¥å†…å­˜æ˜¯åœ¨Javaå †å¤–çš„ã€ç›´æ¥å‘ç³»ç»Ÿç”³è¯·çš„å†…å­˜åŒºé—´ã€‚ æ¥æºäºNIO,é€šè¿‡å­˜åœ¨å †ä¸­çš„ Directbytebufferæ“ä½œ Nativeå†…å­˜ ãƒ»é€šå¸¸ï¼Œè®¿é—®ç›´æ¥å†…å­˜çš„é€Ÿåº¦ä¼šä¼˜äºJavaå †ã€‚å³è¯»å†™æ€§èƒ½é«˜ã€‚å› æ­¤å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œè¯»å†™é¢‘ç¹çš„åœºåˆå¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨ç›´æ¥å†…å­˜ã€‚ Javaçš„NIOåº“å…è®¸Javaç¨‹åºä½¿ç”¨ç›´æ¥å†…å­˜ï¼Œç”¨äºæ•°æ®ç¼“å†²åŒº éç›´æ¥ç¼“å­˜ï¼šè¯»å†™æ–‡ä»¶ï¼Œéœ€è¦ä¸ç£ç›˜äº¤äº’ï¼Œéœ€è¦ç”±ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ã€‚åœ¨å†…æ ¸æ€æ—¶ï¼Œéœ€è¦å†…å­˜å¦‚å³å›¾çš„æ“ä½œã€‚ ä½¿ç”¨ï½´O,è§å³å›¾ã€‚è¿™é‡Œéœ€è¦ä¸¤ä»½å†…å­˜å­˜å‚¨é‡å¤æ•°æ®ï¼Œæ•ˆç‡ä½ã€‚ ç›´æ¥ç¼“å­˜ï¼šä½¿ç”¨NIOæ—¶ï¼Œå¦‚å›¾ã€‚æ“ä½œç³»ç»Ÿåˆ’å‡ºçš„ç›´æ¥ç¼“å­˜åŒºå¯ä»¥è¢«javaä»£ç ç›´æ¥è®¿é—®ï¼Œåªæœ‰ä¸€ä»½ã€‚NIOé€‚åˆå¯¹å¤§æ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚ ç›´æ¥å†…å­˜ä¹Ÿå¯èƒ½å¯¼è‡´ Outofmemoryerrorå¼‚å¸¸ï¼Œç”±äºç›´æ¥å†…å­˜åœ¨Javaå †å¤–ï¼Œå› æ­¤å®ƒçš„å¤§å°ä¸ä¼šç›´æ¥å—é™äº-XmxæŒ‡å®šçš„æœ€å¤§å †å¤§å°ï¼Œä½†æ˜¯ç³»ç»Ÿå†…å­˜æ˜¯æœ‰é™çš„ï¼ŒJavaå †å’Œç›´æ¥å†…å­˜çš„æ€»å’Œä¾ç„¶å—é™äºæ“ä½œç³»ç»Ÿèƒ½ç»™å‡ºçš„æœ€å¤§å†…å­˜ã€‚ ç¼ºç‚¹ï¼š åˆ†é…å›æ”¶æˆæœ¬è¾ƒé«˜ ä¸å—JVMå†…å­˜å›æ”¶ç®¡ç† ç›´æ¥å†…å­˜å¤§å°å¯ä»¥é€šè¿‡ MaxDlrectMemorySizeå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸å †çš„æœ€å¤§å€¼ä¸€Xmxå‚æ•°å€¼ä¸€è‡´ åäºŒã€æ‰§è¡Œå¼•æ“ åä¸‰ã€StringTable 1.Stringçš„åŸºæœ¬ç‰¹æ€§ String:å­—ç¬¦ä¸²,ä½¿ç”¨ä¸€å¯¹&quot; &quot;å¼•èµ·æ¥è¡¨ç¤º. ãƒ» string s1=&quot; atgulqu&quot;;//å­—é¢é‡çš„å®šä¹‰æ–¹å¼ ãƒ» string s2= new String(&quot;hello&quot;)ï¼› stringå£°æ˜ä¸ºfinalçš„,ä¸å¯è¢«ç»§æ‰¿ ãƒ» stringå®ç°äº† Serializableæ¥å£:è¡¨ç¤ºå­—ç¬¦ä¸²æ˜¯æ”¯æŒåºåˆ—åŒ–çš„. å®ç°äº† Comparableæ¥å£:è¡¨ç¤º stringå¯ä»¥æ¯”è¾ƒå¤§å° ãƒ» Stringåœ¨jdk8åŠä»¥å‰å†…éƒ¨å®šä¹‰äº† final charã€ã€‘ valueç”¨äºå­˜å‚¨å­—ç¬¦ä¸²æ•°æ®.jk9æ—¶æ”¹ä¸ºbyteã€ã€‘åŠ ä¸Šç¼–ç æ ‡è®° ä»¥èŠ‚çº¦ç©ºé—´ã€‚StringBufferä¸StringBuilderåŒæ­¥ä¿®æ”¹ã€‚ string:ä»£è¡¨ä¸å¯å˜çš„å­—ç¬¦åºåˆ—.ç®€ç§°:ä¸å¯å˜æ€§. å½“å¯¹å­—ç¬¦ä¸²é‡æ–°èµ‹å€¼æ—¶,éœ€è¦é‡å†™æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼,ä¸èƒ½ä½¿ç”¨åŸæœ‰çš„valueè¿›è¡Œèµ‹å€¼. å½“å¯¹ç°æœ‰çš„å­—ç¬¦ä¸²è¿›è¡Œè¿æ¥æ“ä½œæ—¶,ä¹Ÿéœ€è¦é‡æ–°æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼,ä¸èƒ½ä½¿ç”¨åŸæœ‰çš„valueè¿›è¡Œèµ‹å€¼. å½“è°ƒç”¨ stringçš„ replace()æ–¹æ³•ä¿®æ”¹æŒ‡å®šå­—ç¬¦æˆ–å­—ç¬¦ä¸²æ—¶,ä¹Ÿéœ€è¦é‡æ–°æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼,ä¸èƒ½ä½¿ç”¨åŸæœ‰çš„valueè¿›è¡Œèµ‹å€¼ é€šè¿‡å­—é¢é‡çš„æ–¹å¼(åŒºåˆ«äºnew)ç»™ä¸€ä¸ªå­—ç¬¦ä¸²èµ‹å€¼,æ­¤æ—¶çš„å­—ç¬¦ä¸²å€¼å£°æ˜åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­. å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ˜¯ä¸ä¼šå­˜å‚¨ç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²çš„ Stringlçš„ String Poolæ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„ Hashtable,é»˜è®¤å€¼å¤§å°é•¿åº¦æ˜¯1009.å¦‚æœæ”¾è¿› string Poolçš„Stringéå¸¸å¤š,å°±ä¼šé€ æˆHashå†²ä¸¥é‡,ä»è€Œå¯¼è‡´é“¾è¡¨ä¼šå¾ˆé•¿,è€Œé“¾è¡¨é•¿äº†åç›´æ¥ä¼šé€ æˆçš„å½±å“å°±æ˜¯å½“è°ƒç”¨ String. internlæ—¶æ€§èƒ½ä¼šå¤§å¹…ä¸‹é™. ä½¿ç”¨-XX: StringTableSizeå¯è®¾ç½® StringTableçš„é•¿åº¦ åœ¨jdk6ä¸­ StringTableæ˜¯å›ºå®šçš„,å°±æ˜¯1009çš„é•¿åº¦,æ‰€ä»¥å¦‚æœå¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²è¿‡å¤šå°±ä¼šå¯¼è‡´æ•ˆç‡ä¸‹é™å¾ˆå¿«. StringTableSizeè®¾ç½®æ²¡æœ‰è¦æ±‚ åœ¨jdk7ä¸­ï¼Œ Stringtableçš„é•¿åº¦é»˜è®¤å€¼æ˜¯60013, StringTableSizeè®¾ç½®æ²¡æœ‰è¦æ±‚ Jdk8å¼€å§‹ï¼Œè®¾ç½® StringTableçš„é•¿åº¦çš„è¯ï¼Œ1009æ˜¯å¯è®¾ç½®çš„æœ€å°å€¼ã€‚ 2.Stringçš„å†…å­˜åˆ†é… â€‹ åœ¨Javaè¯­è¨€ä¸­æœ‰8ç§åŸºæœ¬æ•°æ®ç±»å‹å’Œä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„ç±»å‹ stringã€‚è¿™äº›ç±»å‹ä¸ºäº†ä½¿å®ƒä»¬åœ¨è¿è¡Œè¿‡ç¨‹ä¸­é€Ÿåº¦æ›´å¿«ã€æ›´èŠ‚çœå†…å­˜ï¼Œéƒ½æä¾›äº†ä¸€ç§å¸¸é‡æ± çš„æ¦‚å¿µã€‚å¸¸é‡æ± å°±ç±»ä¼¼ä¸€ä¸ªJavaç³»ç»Ÿçº§åˆ«æä¾›çš„ç¼“å­˜ã€‚8ç§åŸºæœ¬æ•°æ®ç±»å‹çš„å¸¸é‡æ± éƒ½æ˜¯ç³»ç»Ÿåè°ƒçš„ï¼ŒStringç±»å‹çš„å¸¸é‡æ± æ¯”è¾ƒç‰¹æ®Šã€‚å®ƒçš„ä¸»è¦ä½¿ç”¨æ–¹æ³•æœ‰ä¸¤ç§ï¼š ç›´æ¥ä½¿ç”¨åŒå¼•å·å£°æ˜å‡ºæ¥çš„ stringå¯¹è±¡ä¼šç›´æ¥å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­ã€‚æ¯”å¦‚ï¼šStringinfo=&quot;atqulgu.com&quot;; å¦‚æœä¸æ˜¯ç”¨åŒå¼•å·å£°æ˜çš„ stringå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ stringæä¾›çš„ Internï¼ˆï¼‰æ–¹æ³•ã€‚ Java6åŠä»¥å‰ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± å­˜æ”¾åœ¨æ°¸ä¹…ä»£ã€‚ Java7 ä¸­ Oracleçš„å·¥ç¨‹å¸ˆå¯¹å­—ç¬¦ä¸²æ± çš„é€»è¾‘åšäº†å¾ˆå¤§çš„æ”¹å˜ï¼Œå³å°†å­—ç¬¦ä¸²å¸¸é‡æ± çš„ä½ç½®è°ƒæ•´åˆ°Javaå †å†…ã€‚ æ‰€æœ‰çš„å­—ç¬¦ä¸²éƒ½ä¿å­˜åœ¨å †(Heap)ä¸­ï¼Œå’Œå…¶ä»–æ™®é€šå¯¹è±¡ä¸€æ ·ï¼Œè¿™æ ·å¯ä»¥è®©ä½ åœ¨è¿›è¡Œè°ƒä¼˜åº”ç”¨æ—¶ä»…éœ€è¦è°ƒæ•´å †å¤§å°å°±å¯ä»¥äº†ã€‚ å­—ç¬¦ä¸²å¸¸é‡æ± æ¦‚å¿µåŸæœ¬ä½¿ç”¨å¾—æ¯”è¾ƒå¤šï¼Œä½†æ˜¯è¿™ä¸ªæ”¹åŠ¨ä½¿å¾—æˆ‘ä»¬æœ‰è¶³å¤Ÿçš„ç†ç”±è®©æˆ‘ä»¬é‡æ–°è€ƒè™‘åœ¨Java7ä¸­ä½¿ç”¨ string.internï¼ˆï¼‰ Java8å…ƒç©ºé—´ï¼Œå­—ç¬¦ä¸²å¸¸é‡åœ¨å †ã€‚ 3.Stringçš„åŸºæœ¬æ“ä½œ 4.å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œ å¸¸é‡ä¸å¸¸é‡çš„æ‹¼æ¥ç»“æœåœ¨å¸¸é‡æ± ï¼ŒåŸç†æ˜¯ç¼–è¯‘æœŸä¼˜åŒ– 2.å¸¸é‡æ± ä¸­ä¸ä¼šå­˜åœ¨ç›¸åŒå†…å®¹çš„å¸¸é‡ã€‚ 3.åªè¦å…¶ä¸­æœ‰ä¸€ä¸ªæ˜¯å˜é‡ï¼Œç»“æœå°±åœ¨å †ä¸­ã€‚å˜é‡æ‹¼æ¥çš„åŸç†æ˜¯ String Builder 4.å¦‚æœæ‹¼æ¥çš„ç»“æœè°ƒç”¨ internï¼ˆï¼‰æ–¹æ³•ï¼Œåˆ™ä¸»åŠ¨å°†å¸¸é‡æ± ä¸­è¿˜æ²¡æœ‰çš„å­—ç¬¦ä¸²å¯¹è±¡æ”¾å…¥æ± ä¸­ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡åœ°å€ã€‚ å­—ç¬¦ä¸²å¦‚ä½•æ‹¼æ¥ï¼Ÿ å­—ç¬¦å®¡æ‹¼æ¥æ“ä½œä¸ä¸€å®šä½¿ç”¨çš„æ˜¯ Stringbuilder! å¦‚æœæ‹¼æ¥ç¬¦å·å·¦å³ä¸¤è¾¹éƒ¨æ˜¯å­—ç¬¦å®¡å¸¸é‡æˆ¦å¸¸é‡å¼•ç”¨ï¼Œåˆ™ä»ç„¶ä½¿ç¼–è¯‘æœŸä¼˜åŒ–ï¼Œå³é StringBuilderçš„æ–¹å¼åˆ†å¯¹äº finalä¿®é£¾ç±»ã€æ–¹æ³•ã€è’¸æœ¬æ•°ç±»ç‡ã€å¼•ç”¨æ•°æ®ç±»å‹çš„é‡çš„ç»“æ„æ—¶ï¼Œèƒ½ä½¿ç”¨ä¸Š finalçš„æ—¶å€™å»ºè®®ä½¿ç”¨ä¸Šã€‚ ä½“ä¼šæ‰§è¡Œæ•ˆç‡ï¼šé€šè¿‡ StringBuilderçš„appendï¼ˆï¼‰çš„æ–¹å¼æ·»åŠ å­—ç¬¦å®‡çš„æ•™ç‡è¦è¿œé«˜äºä½¿ç”¨ stringçš„å­—ç¬¦å®‡æ‹¼æ¥æ–¹å¼ï¼ æ´‹æƒ…ï¼š StringBuilderçš„ appendï¼ˆï¼‰çš„æ–¹å¼ï¼šè‡ªå§‹è‡³çµ‚ä¸­åªåˆ›å»ºè¿‡ä¸€ä¸ªStringBuilderçš„å¯¹è±¡ ä½¿ç”¨Stringçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼šå»ºè¿‡å¤šä¸ª StringBuilderå’Œ Stringçš„å¯¹è±¡ ä½¿ç”¨ Stringçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼šå†…å­˜ä¸­å‡ºäºåˆ›å»ºäº†è¾ƒå¤š StringBuilderå’Œ Stringçš„å¯¹è±¡ï¼Œå†…å­˜å ç”¨æ›´å¤§ï¼›å¦‚æœè¿›è¡ŒGC,éœ€è¦èŠ±è´¹é¢å¤–çš„æ—¶é—´ã€‚ æ”¹è¿›ç©ºé—´ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœåŸºæœ¬ç¡®å®šè¦å‰å‰ååæ·»åŠ çš„å­—ç¬¦ä¸²é•¿åº¦ä¸é«˜æ‰‹æŸä¸ªé™å®šå€¼ highlevelçš„å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨æ„é€ å™¨å®ä¾‹åŒ– StringBuilder s=new StringBuilder(highlevel);//new char[highlevel] 12345678String s1=&quot;a&quot;;String s2=&quot;b&quot;;String s3=&quot;ab&quot;;//s1+s2ç»†èŠ‚ï¼š//1.StringBuilder s=new StringBuilder();//s.append(&quot;a&quot;);//s.append(&quot;b&quot;);//s.toString()//---&gt;çº¦ç­‰äº new String(&quot;ab&quot;) 5.internï¼ˆï¼‰çš„ä½¿ç”¨ â€‹ å¦‚æœä¸æ˜¯ç”¨åŒå¼•å·å£°æ˜çš„ stringå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ stringæä¾›çš„ internæ–¹æ³•ï¼š internæ–¹æ³•ä¼šä»å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æŸ»è¯¢å½“å‰å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨å°±ä¼šå°†å½“å‰å­—ç¬¦ä¸²æ”¾å…¥å¸¸é‡æ± ä¸­ã€‚ æ¯”å¦‚ï¼šString myinfo = new string(&quot;I love atguigu&quot;).intern(ï¼‰ â€‹ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨ä»»æ„å­—ç¬¦ä¸²ä¸Šè°ƒç”¨ string. internæ–¹æ³•ï¼Œé‚£ä¹ˆå…¶è¿”å›ç»“æœæ‰€æŒ‡å‘çš„é‚£ä¸ªç±»å®ä¾‹ï¼Œå¿…é¡»å’Œç›´æ¥ä»¥å¸¸é‡å½¢å¼å‡ºç°çš„å­—ç¬¦ä¸²å®ä¾‹å®Œå…¨ç›¸åŒã€‚å› æ­¤ï¼Œä¸‹åˆ—è¡¨è¾¾å¼çš„å€¼å¿…å®šæ˜¯true: â€‹ (â€œaâ€+â€œbâ€+â€œcâ€).intern() ==&quot;abc&quot; â€‹ é€šä¿—ç‚¹è®²ï¼Œ Interned String/å°±æ˜¯ç¡®ä¿å­—ç¬¦ä¸²åœ¨å†…å­˜é‡Œåªæœ‰ä¸€ä»½æ‹·è´ï¼Œè¿™æ ·å¯ä»¥èŠ‚çº¦å†…å­˜ç©ºé—´ï¼ŒåŠ å¿«å­—ç¬¦ä¸²æ“ä½œä»»åŠ¡çš„æ‰§è¡Œé€Ÿåº¦ã€‚æ³¨æ„ï¼Œè¿™ä¸ªå€¼ä¼šè¢«å­˜æ”¾åœ¨å­—ç¬¦ä¸²å†…éƒ¨æ± (String Intern Pool) é—®é¢˜ new Stringï¼ˆâ€œabâ€ï¼‰ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡,new String(&quot;a&quot;) + new String(&quot;b&quot;)å‘¢ï¼Ÿ 1234567891011121314151617181920212223242526/** * é¢˜ç›®ï¼š * new String(&quot;ab&quot;)ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿçœ‹å­—èŠ‚ç ï¼Œå°±çŸ¥é“æ˜¯ä¸¤ä¸ªã€‚ * ä¸€ä¸ªå¯¹è±¡æ˜¯ï¼šnewå…³é”®å­—åœ¨å †ç©ºé—´åˆ›å»ºçš„ * å¦ä¸€ä¸ªå¯¹è±¡æ˜¯ï¼šå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„å¯¹è±¡&quot;ab&quot;ã€‚ å­—èŠ‚ç æŒ‡ä»¤ï¼šldc * * * æ€è€ƒï¼š * new String(&quot;a&quot;) + new String(&quot;b&quot;)å‘¢ï¼Ÿ * å¯¹è±¡1ï¼šnew StringBuilder() * å¯¹è±¡2ï¼š new String(&quot;a&quot;) * å¯¹è±¡3ï¼š å¸¸é‡æ± ä¸­çš„&quot;a&quot; * å¯¹è±¡4ï¼š new String(&quot;b&quot;) * å¯¹è±¡5ï¼š å¸¸é‡æ± ä¸­çš„&quot;b&quot; * * æ·±å…¥å‰–æï¼š StringBuilderçš„toString(): * å¯¹è±¡6 ï¼šnew String(&quot;ab&quot;) * å¼ºè°ƒä¸€ä¸‹ï¼ŒtoString()çš„è°ƒç”¨ï¼Œåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œæ²¡æœ‰ç”Ÿæˆ&quot;ab&quot; */public class StringNewTest { public static void main(String[] args) {// String str = new String(&quot;ab&quot;); String str = new String(&quot;a&quot;) + new String(&quot;b&quot;); }} å¦‚ä½•ä¿è¯å˜é‡sæŒ‡å‘çš„æ˜¯å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„æ•°æ®å‘¢ï¼Ÿ 123456789101112131415161718192021222324252627/** * å¦‚ä½•ä¿è¯å˜é‡sæŒ‡å‘çš„æ˜¯å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„æ•°æ®å‘¢ï¼Ÿ * æœ‰ä¸¤ç§æ–¹å¼ï¼š * æ–¹å¼ä¸€ï¼š String s = &quot;shkstart&quot;;//å­—é¢é‡å®šä¹‰çš„æ–¹å¼ * æ–¹å¼äºŒï¼š è°ƒç”¨intern() * String s = new String(&quot;shkstart&quot;).intern(); * String s = new StringBuilder(&quot;shkstart&quot;).toString().intern(); */public class StringIntern { public static void main(String[] args) { String s = new String(&quot;1&quot;); s.intern();//è°ƒç”¨æ­¤æ–¹æ³•ä¹‹å‰ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å·²ç»å­˜åœ¨äº†&quot;1&quot; String s2 = &quot;1&quot;; System.out.println(s == s2);//jdk6ï¼šfalse jdk7/8ï¼šfalse String s3 = new String(&quot;1&quot;) + new String(&quot;1&quot;);//s3å˜é‡è®°å½•çš„åœ°å€ä¸ºï¼šnew String(&quot;11&quot;) //æ‰§è¡Œå®Œä¸Šä¸€è¡Œä»£ç ä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œæ˜¯å¦å­˜åœ¨&quot;11&quot;å‘¢ï¼Ÿç­”æ¡ˆï¼šä¸å­˜åœ¨ï¼ï¼ s3.intern();//åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ç”Ÿæˆ&quot;11&quot;ã€‚å¦‚ä½•ç†è§£ï¼šjdk6:åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡&quot;11&quot;,ä¹Ÿå°±æœ‰æ–°çš„åœ°å€ã€‚ // jdk7:æ­¤æ—¶å¸¸é‡ä¸­å¹¶æ²¡æœ‰åˆ›å»º&quot;11&quot;,è€Œæ˜¯åˆ›å»ºä¸€ä¸ªæŒ‡å‘å †ç©ºé—´ä¸­new String(&quot;11&quot;)çš„åœ°å€ String s4 = &quot;11&quot;;//s4å˜é‡è®°å½•çš„åœ°å€ï¼šä½¿ç”¨çš„æ˜¯ä¸Šä¸€è¡Œä»£ç ä»£ç æ‰§è¡Œæ—¶ï¼Œåœ¨å¸¸é‡æ± ä¸­ç”Ÿæˆçš„&quot;11&quot;çš„åœ°å€ System.out.println(s3 == s4);//jdk6ï¼šfalse jdk7/8ï¼štrue }} 12345678910public class StringIntern1 { public static void main(String[] args) { String s3 = new String(&quot;1&quot;) + new String(&quot;1&quot;);//new String(&quot;11&quot;) //æ‰§è¡Œå®Œä¸Šä¸€è¡Œä»£ç ä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œæ˜¯å¦å­˜åœ¨&quot;11&quot;å‘¢ï¼Ÿç­”æ¡ˆï¼šä¸å­˜åœ¨ï¼ï¼ String s4 = &quot;11&quot;;//åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ç”Ÿæˆå¯¹è±¡&quot;11&quot; String s5 = s3.intern(); System.out.println(s3 == s4);//false System.out.println(s5 == s4);//true }} æ€»ç»“ stringlçš„ internï¼ˆï¼‰çš„ä½¿ç”¨ ãƒ»jdk1.6ä¸­ï¼Œå°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ã€‚ å¦‚æœä¸²æ± ä¸­æœ‰ï¼Œåˆ™å¹¶ä¸ä¼šæ”¾å…¥ã€‚è¿”å›å·²æœ‰çš„ä¸²æ± ä¸­çš„å¯¹è±¡çš„åœ°å€ã€‚å¦‚æœæ²¡æœ‰ï¼Œä¼šæŠŠæ­¤å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œæ”¾å…¥ä¸²æ± ï¼Œå¹¶è¿”å›ä¸²æ± ä¸­çš„å¯¹è±¡åœ°å€ ãƒ»Jdk1.7èµ·ï¼Œå°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ã€‚ å¦‚æœä¸²æ± ä¸­æœ‰ï¼Œåˆ™å¹¶ä¸ä¼šæ”¾å…¥ã€‚è¿”å›å·²æœ‰çš„ä¸²æ± ä¸­çš„å¯¹è±¡çš„åœ°å€ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šæŠŠå¯¹è±¡çš„å¼•ç”¨åœ°å€å¤åˆ¶ä¸€ä»½ï¼Œæ”¾å…¥ä¸²æ± ï¼Œå¹¶è¿”å›ä¸²æ± ä¸­çš„å¼•ç”¨åœ°å€ 12345678910111213public class StringExer1 { public static void main(String[] args) { String x = &quot;ab&quot;; String s = new String(&quot;a&quot;) + new String(&quot;b&quot;);//new String(&quot;ab&quot;) //åœ¨ä¸Šä¸€è¡Œä»£ç æ‰§è¡Œå®Œä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å¹¶æ²¡æœ‰&quot;ab&quot; String s2 = s.intern();//jdk6ä¸­ï¼šåœ¨ä¸²æ± ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²&quot;ab&quot; //jdk8ä¸­ï¼šä¸²æ± ä¸­æ²¡æœ‰åˆ›å»ºå­—ç¬¦ä¸²&quot;ab&quot;,è€Œæ˜¯åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼ŒæŒ‡å‘new String(&quot;ab&quot;)ï¼Œå°†æ­¤å¼•ç”¨è¿”å› System.out.println(s2 == &quot;ab&quot;);//jdk6:true jdk8:true System.out.println(s == &quot;ab&quot;);//jdk6:false jdk8:true }} 123456789public class StringExer2 { public static void main(String[] args) { String s1 = new String(&quot;ab&quot;);//æ‰§è¡Œå®Œä»¥åï¼Œä¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ä¼šç”Ÿæˆ&quot;ab&quot;// String s1 = new String(&quot;a&quot;) + new String(&quot;b&quot;);////æ‰§è¡Œå®Œä»¥åï¼Œä¸ä¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ä¼šç”Ÿæˆ&quot;ab&quot; s1.intern(); String s2 = &quot;ab&quot;; System.out.println(s1 == s2); }} ç©ºé—´æ•ˆç‡æµ‹è¯• 123456789101112131415161718192021222324252627282930/** * ä½¿ç”¨intern()æµ‹è¯•æ‰§è¡Œæ•ˆç‡ï¼šç©ºé—´ä½¿ç”¨ä¸Š * * ç»“è®ºï¼šå¯¹äºç¨‹åºä¸­å¤§é‡å­˜åœ¨å­˜åœ¨çš„å­—ç¬¦ä¸²ï¼Œå°¤å…¶å…¶ä¸­å­˜åœ¨å¾ˆå¤šé‡å¤å­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨intern()å¯ä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚ * å¤§çš„ç½‘ç«™å¹³å°ï¼Œéœ€è¦å†…å­˜ä¸­å­˜å‚¨å¤§é‡çš„å­—ç¬¦ä¸²ã€‚æ¯”å¦‚ç¤¾äº¤ç½‘ç«™ï¼Œå¾ˆå¤šäººéƒ½å­˜å‚¨ï¼šåŒ—äº¬å¸‚ã€æµ·æ·€åŒºç­‰ä¿¡æ¯ã€‚è¿™æ—¶ä¾¯å¦‚æœå­—ç¬¦ä¸²éƒ½è°ƒç”¨internï¼ˆï¼‰æ–¹ * * æ³•ï¼Œå°±ä¼šæ˜æ˜¾é™ä½å†…å­˜çš„å¤§å°ã€‚ */public class StringIntern2 { static final int MAX_COUNT = 1000 * 10000; static final String[] arr = new String[MAX_COUNT]; public static void main(String[] args) { Integer[] data = new Integer[]{1,2,3,4,5,6,7,8,9,10}; long start = System.currentTimeMillis(); for (int i = 0; i &lt; MAX_COUNT; i++) {// arr[i] = new String(String.valueOf(data[i % data.length])); arr[i] = new String(String.valueOf(data[i % data.length])).intern(); } long end = System.currentTimeMillis(); System.out.println(&quot;èŠ±è´¹çš„æ—¶é—´ä¸ºï¼š&quot; + (end - start)); try { Thread.sleep(1000000); } catch (InterruptedException e) { e.printStackTrace(); } System.GC(); }} åƒåœ¾å›æ”¶æµ‹è¯• 1234567891011121314/** * Stringçš„åƒåœ¾å›æ”¶: * -Xms15m -Xmx15m -XX:+PrintStringTableStatistics -XX:+PrintGCDetails * * @author shkstart shkstart@126.com * @create 2020 21:27 */public class StringGCTest { public static void main(String[] args) { for (int j = 0; j &lt; 100000; j++) { String.valueOf(j).intern(); } }} G1çš„Stringå»é‡æ“ä½œ èƒŒæ™¯ï¼š å¯¹è®¸å¤šJavaåº”ç”¨ï¼ˆæœ‰å¤§çš„ä¹Ÿæœ‰å°çš„ï¼‰åšçš„æµ‹è¯•å¾—å‡ºä»¥ä¸‹ç»“æœï¼š å †å­˜æ´»æ•°æ®é›†åˆé‡Œé¢ string,å¯¹è±¡å äº†25% å †å­˜æ´»æ•°æ®é›†åˆé‡Œé¢é‡å¤çš„ stringå¯¹è±¡æœ‰13.5% Stringå¯¹è±¡çš„å¹³å‡é•¿åº¦æ˜¯45 è®¸å¤šå¤§è§„æ¨¡çš„Javaåº”ç”¨çš„ç“¶é¢ˆåœ¨äºå†…å­˜ï¼Œæµ‹è¯•è¡¨æ˜ï¼Œåœ¨è¿™äº›ç±»å‹çš„åº”ç”¨é‡Œé¢ï¼ŒJavaå †ä¸­å­˜æ´»çš„æ•°æ®é›†åˆå·®ä¸å¤š25%æ˜¯ stringå¯¹è±¡ã€‚æ›´è¿›ä¸€æ­¥ï¼Œè¿™é‡Œé¢å·®ä¸å¤šä¸€åŠ stringå¯¹è±¡æ˜¯é‡å¤çš„ï¼Œé‡å¤çš„æ„æ€æ˜¯è¯´: strinG1. equals( string2)=trueã€‚å †ä¸Šå­˜åœ¨é‡å¤çš„ Stringå¯¹è±¡å¿…ç„¶æ˜¯ä¸€ç§å†…å­˜çš„æµªè´¹ã€‚è¿™ä¸ªé¡¹ç›®å°†åœ¨G1åƒåœ¾æ”¶é›†å™¨ä¸­å®ç°è‡ªåŠ¨æŒç»­å¯¹é‡å¤çš„ stringå¯¹è±¡è¿›è¡Œå»é‡ï¼Œè¿™æ ·å°±èƒ½é¿å…æµªè´¹å†…å­˜ã€‚ å®ç° å½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œçš„æ—¶å€™ï¼Œä¼šè®¿é—®å †ä¸Šå­˜æ´»çš„å¯¹è±¡ã€‚å¯¹æ¯ä¸€ä¸ªè®¿é—®çš„å¯¹è±¡éƒ½ä¼šæ£€æŸ¥æ˜¯å¦æ˜¯å€™é€‰çš„è¦å»é‡çš„Stringå¯¹è±¡ã€‚ å¦‚æœæ˜¯ï¼ŒæŠŠè¿™ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨æ’å…¥åˆ°é˜Ÿåˆ—ä¸­ç­‰å¾…åç»­çš„å¤„ç†ã€‚ä¸€ä¸ªå»é‡çš„çº¿ç¨‹åœ¨åå°è¿è¡Œï¼Œå¤„ç†è¿™ä¸ªé˜Ÿåˆ—ã€‚å¤„ç†é˜Ÿåˆ—çš„ä¸€ä¸ªå…ƒç´ æ„å‘³ç€ä»é˜Ÿåˆ—åˆ é™¤è¿™ä¸ªå…ƒç´ ï¼Œç„¶åå°è¯•å»é‡å®ƒå¼•ç”¨çš„Stringå¯¹è±¡ã€‚ ä½¿ç”¨ä¸€ä¸ª hashtableæ¥è®°å½•æ‰€æœ‰çš„è¢« Stringå¯¹è±¡ä½¿ç”¨çš„ä¸é‡å¤çš„charæ•°ç»„ã€‚å½“å»é‡çš„æ—¶å€™ï¼Œä¼šæŸ»è¿™ä¸ª hashtable,æ¥çœ‹å †ä¸Šæ˜¯å¦å·²ç»å­˜åœ¨ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„charæ•°ç»„ã€‚ å¦‚æœå­˜åœ¨ï¼Œ stringå¯¹è±¡ä¼šè¢«è°ƒæ•´å¼•ç”¨é‚£ä¸ªæ•°ç»„ï¼Œé‡Šæ”¾å¯¹åŸæ¥çš„æ•°ç»„çš„å¼•ç”¨ï¼Œæœ€ç»ˆä¼šè¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶æ‰ã€‚ å¦‚æœæŸ¥æ‰¾å¤±è´¥ï¼Œcharæ•°ç»„ä¼šè¢«æ’å…¥åˆ° hashtable,è¿™æ ·ä»¥åçš„æ—¶å€™å°±å¯ä»¥å…±äº«è¿™ä¸ªæ•°ç»„äº†ã€‚ å‘½ä»¤è¡Œé€‰é¡¹ UsestringDeduplication(bool):å¼€å¯ Stringå»é‡ï¼Œé»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ã€‚ PrintstringDeduplicationStatistics(bool):æ‰“å°è¯¦ç»†çš„å»é‡ç»Ÿè®¡ä¿¡æ¯ StringdeduplicationAgethreshold( uintx):è¾¾åˆ°è¿™ä¸ªå¹´é¾„çš„ stringå¯¹è±¡è¢«è®¤ä¸ºæ˜¯å»é‡çš„å€™é€‰å¯¹è±¡ åå››ã€åƒåœ¾å›æ”¶æ¦‚è¿° åƒåœ¾æ”¶é›†ï¼Œä¸æ˜¯Javaè¯­è¨€çš„ä¼´ç”Ÿäº§ç‰©ã€‚æ—©åœ¨1960å¹´ï¼Œç¬¬ä¸€é—¨å¼€å§‹ä½¿ç”¨å†…å­˜åŠ¨æ€åˆ†é…å’Œåƒåœ¾æ”¶é›†æŠ€æœ¯çš„Lispè¯­è¨€è¯ç”Ÿ å…³äºåƒåœ¾æ”¶é›†æœ‰ä¸‰ä¸ªç»å…¸é—®é¢˜ï¼šå“ªäº›å†…å­˜éœ€è¦å›æ”¶ï¼Ÿ&gt;ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼Ÿå¦‚ä½•å›æ”¶ï¼Ÿ åƒåœ¾æ”¶é›†æœºåˆ¶æ˜¯Javaçš„æ‹›ç‰Œèƒ½åŠ›ï¼Œæå¤§åœ°æé«˜äº†å¼€å‘æ•ˆç‡ã€‚å¦‚ä»Šï¼Œåƒåœ¾æ”¶é›†å‡ ä¹æˆä¸ºç°ä»£è¯­è¨€çš„æ ‡é…ï¼Œå³ä½¿ç»è¿‡å¦‚æ­¤é•¿æ—¶é—´çš„å‘å±•ï¼ŒJavaçš„åƒåœ¾æ”¶é›†æœºåˆ¶ä»ç„¶åœ¨ä¸æ–­çš„æ¼”è¿›ä¸­ï¼Œä¸åŒå¤§å°çš„è®¾å¤‡ã€ä¸åŒç‰¹å¾çš„åº”ç”¨åœºæ™¯ï¼Œå¯¹åƒåœ¾æ”¶é›†æå‡ºäº†æ–°çš„æŒ‘æˆ˜ï¼Œè¿™å½“ç„¶ä¹Ÿæ˜¯é¢è¯•çš„çƒ­ç‚¹ã€‚ é¢˜ä¾‹ï¼š èš‚èšé‡‘æœï¼š ä½ çŸ¥é“å“ªå‡ ç§åƒåœ¾å›æ”¶å™¨ï¼Œå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œé‡ç‚¹è®²ä¸€ä¸‹CMSå’ŒG1 é¢ï¼š JVM GCç®—æ³•æœ‰å“ªäº›ï¼Œç›®å‰çš„JDKç‰ˆæœ¬é‡‡ç”¨ä»€ä¹ˆå›æ”¶ç®—æ³• é¢ï¼šG1å›æ”¶å™¨è®²ä¸‹å›æ”¶è¿‡ç¨‹ GCæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰GC? é¢ï¼šGCçš„ä¸¤ç§åˆ¤å®šæ–¹æ³•?CMSæ”¶é›†å™¨ä¸G1æ”¶é›†å™¨çš„ç‰¹ç‚¹ã€‚ ç™¾åº¦ï¼š è¯´ä¸€ä¸‹GCç®—æ³•ï¼Œåˆ†ä»£å›æ”¶è¯´ä¸‹åƒåœ¾æ”¶é›†ç­–ç•¥å’Œç®—æ³• å¤©çŒ«ï¼š é¢ï¼š JVM GCåŸç†ï¼ŒJVMæ€ä¹ˆå›æ”¶å†…å­˜ ä¸€é¢ï¼šCMSç‰¹ç‚¹ï¼Œåƒåœ¾å›æ”¶ç®—æ³•æœ‰å“ªäº›ï¼Ÿå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œä»–ä»¬å…±åŒçš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ æ»´æ»´ é¢ï¼šjavaçš„åƒåœ¾å›æ”¶å™¨éƒ½æœ‰å“ªäº›ï¼Œè¯´ä¸‹G1çš„åº”ç”¨åœºæ™¯ï¼Œå¹³æ—¶ä½ æ˜¯å¦‚ä½•æ­é…ä½¿ç”¨åƒåœ¾å›æ”¶å™¨çš„ã€‚ äº¬ä¸œï¼š ä½ çŸ¥é“å“ªå‡ ç§åƒåœ¾æ”¶é›†å™¨ï¼Œå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œé‡ç‚¹è®²ä¸‹CMSå’ŒG1,åŒ…æ‹¬åŸç†ï¼Œæµç¨‹ï¼Œä¼˜ç¼ºç‚¹ã€‚åƒåœ¾å›æ”¶ç®—æ³•çš„å®ç°åŸç†é˜¿é‡Œï¼š è®²ä¸€è®²åƒåœ¾å›æ”¶ç®—æ³•ã€‚ä»€ä¹ˆæƒ…å†µä¸‹è§¦å‘åƒåœ¾å›æ”¶ï¼Ÿå¦‚ä½•é€‰æ‹©åˆé€‚çš„åƒåœ¾æ”¶é›†ç®—æ³•ï¼Ÿ JVMæœ‰å“ªä¸‰ç§åƒåœ¾å›æ”¶å™¨ï¼Ÿ å­—èŠ‚è·³åŠ¨ï¼š å¸¸è§çš„åƒåœ¾å›æ”¶å™¨ç®—æ³•æœ‰å“ªäº›ï¼Œå„æœ‰ä»€ä¹ˆä¼˜åŠ£ï¼Ÿsystem.GCï¼ˆï¼‰å’Œ runtime.GCï¼ˆï¼‰ä¼šåšä»€ä¹ˆäº‹æƒ…ï¼Ÿé¢ï¼š Java GCæœºåˆ¶ï¼Ÿ GC Rootsæœ‰å“ªäº›ï¼Ÿ äºŒé¢ï¼šJavaå¯¹è±¡çš„å›æ”¶æ–¹å¼ï¼Œå›æ”¶ç®—æ³• CMSå’ŒG1äº†è§£ä¹ˆï¼ŒCMSè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œè¯´ä¸€ä¸‹å›æ”¶çš„è¿‡ç¨‹ã€‚ CMSå›æ”¶åœé¡¿äº†å‡ æ¬¡ï¼Œä¸ºä»€ä¹ˆè¦åœé¡¿ä¸¤æ¬¡ã€‚ 1.ä»€ä¹ˆæ˜¯åƒåœ¾ ä»€ä¹ˆæ˜¯åƒåœ¾( Garbage)å‘¢ï¼Ÿ åƒåœ¾æ˜¯æŒ‡åœ¨è¿è¡Œç¨‹åºä¸­æ²¡æœ‰ä»»ä½•æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯éœ€è¦è¢«å›æ”¶çš„åƒåœ¾ã€‚ An object is considered garbage when it can nolonger be reached from any pointer in the runningprogram å¦‚æœä¸åŠæ—¶å¯¹å†…å­˜ä¸­çš„åƒåœ¾è¿›è¡Œæ¸…ç†ï¼Œé‚£ä¹ˆï¼Œè¿™äº›åƒåœ¾å¯¹è±¡æ‰€å çš„å†…å­˜ç©ºé—´ä¼šä¸€ç›´ä¿ç•™åˆ°åº”ç”¨ç¨‹åºç»“æŸï¼Œè¢«ä¿ç•™çš„ç©ºé—´æ— æ³•è¢«å…¶ä»–å¯¹è±¡ä½¿ç”¨ã€‚ç”šè‡³å¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚ 2.æƒ³è¦å­¦ä¹ GC,é¦–å…ˆéœ€è¦ç†è§£ä¸ºä»€ä¹ˆéœ€è¦GC? â€‹ å¯¹äºé«˜çº§è¯­è¨€æ¥è¯´ï¼Œä¸€ä¸ªåŸºæœ¬è®¤çŸ¥æ˜¯å¦‚æœä¸è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå†…å­˜è¿Ÿæ—©éƒ½ä¼šè¢«æ¶ˆè€—å®Œå› ä¸ºä¸æ–­åœ°åˆ†é…å†…å­˜ç©ºé—´è€Œä¸è¿›è¡Œå›æ”¶ï¼Œå°±å¥½åƒä¸åœåœ°ç”Ÿäº§ç”Ÿæ´»åƒåœ¾è€Œä»æ¥ä¸æ‰“æ‰«ä¸€æ ·ã€‚ â€‹ é™¤äº†é‡Šæ”¾æ²¡ç”¨çš„å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶ä¹Ÿå¯ä»¥æ¸…é™¤å†…å­˜é‡Œçš„è®°å½•ç¢ç‰‡ã€‚ç¢ç‰‡æ•´ç†å°†æ‰€å ç”¨çš„å †å†…å­˜ç§»åˆ°å †çš„ä¸€ç«¯ï¼Œä»¥ä¾¿JVMå°†æ•´ç†å‡ºçš„å†…å­˜åˆ†é…ç»™æ–°çš„å¯¹è±¡ã€‚ â€‹ éšç€åº”ç”¨ç¨‹åºæ‰€åº”ä»˜çš„ä¸šåŠ¡è¶Šæ¥è¶Šåºå¤§ã€å¤æ‚ï¼Œç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œæ²¡æœ‰GCå°±ä¸èƒ½ä¿è¯åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿›è¡Œã€‚è€Œç»å¸¸é€ æˆSTWçš„GCåˆè·Ÿä¸ä¸Šå®é™…çš„éœ€æ±‚ï¼Œæ‰€ä»¥æ‰ä¼šä¸æ–­åœ°å°è¯•å¯¹GCè¿›è¡Œä¼˜åŒ–ã€‚ æ—©æœŸåƒåœ¾å›æ”¶ â€‹ åœ¨æ—©æœŸçš„C/C æ—¶ä»£ï¼Œåƒåœ¾å›æ”¶åŸºæœ¬ä¸Šæ˜¯æ‰‹å·¥è¿›è¡Œçš„ã€‚å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨newå…³é”®å­—è¿›è¡Œå†…å­˜ç”³è¯·ï¼Œå¹¶ä½¿ç”¨ deleteå…³é”®å­—è¿›è¡Œå†…å­˜é‡Šæ”¾ã€‚æ¯”å¦‚ä»¥ä¸‹ä»£ç ã€‚ â€‹ è¿™ç§æ–¹å¼å¯ä»¥çµæ´»æ§åˆ¶å†…å­˜é‡Šæ”¾çš„æ—¶é—´ï¼Œä½†æ˜¯ä¼šç»™å¼€å‘äººå‘˜å¸¦æ¥é¢‘ç¹ç”³è¯·å’Œé‡Šæ”¾å†…å­˜çš„ç®¡ç†è´Ÿæ‹…ã€‚å€˜è‹¥æœ‰ä¸€å¤„å†…å­˜åŒºé—´ç”±äºç¨‹åºå‘˜ç¼–ç çš„é—®é¢˜å¿˜è®°è¢«å›æ”¶ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ï¼Œåƒåœ¾å¯¹è±¡æ°¸è¿œæ— æ³•è¢«æ¸…é™¤ï¼Œéšç€ç³»ç»Ÿè¿è¡Œæ—¶é—´çš„ä¸æ–­å¢é•¿ï¼Œåƒåœ¾å¯¹è±¡æ‰€è€—å†…å­˜å¯èƒ½æŒç»­ä¸Šå‡ï¼Œç›´åˆ°å‡ºç°å†…å­˜æº¢å‡ºå¹¶é€ æˆåº”ç”¨ç¨‹åºå´©æºƒã€‚ç°åœ¨ï¼Œé™¤äº†Javaä»¥å¤–ï¼ŒC#ã€ pythonã€Rubyç­‰è¯­è¨€éƒ½ä½¿ç”¨äº†è‡ªåŠ¨åƒåœ¾å›æ”¶çš„æ€æƒ³ï¼Œä¹Ÿæ˜¯æœªæ¥å‘å±•è¶‹åŠ¿ã€‚å¯ä»¥è¯´ï¼Œè¿™ç§è‡ªåŠ¨åŒ–çš„å†…å­˜åˆ†é…å’Œåƒåœ¾å›æ”¶çš„æ–¹å¼å·±ç»æˆä¸ºç°ä»£å¼€å‘è¯­è¨€å¿…å¤‡çš„æ ‡å‡†ã€‚ Javaåƒåœ¾å›æ”¶æœºåˆ¶ â€‹ è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œæ— éœ€å¼€å‘äººå‘˜æ‰‹åŠ¨å‚ä¸å†…å­˜çš„åˆ†é…ä¸å›æ”¶ï¼Œè¿™æ ·é™ä½å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºçš„é£é™©ã€‚æ²¡æœ‰åƒåœ¾å›æ”¶å™¨ï¼Œjavaä¹Ÿä¼šå’Œcppä¸€æ ·ï¼Œå„ç§æ‚¬å‚æŒ‡é’ˆï¼Œé‡æŒ‡é’ˆï¼Œæ³„éœ²é—®é¢˜è®©ä½ å¤´ç–¼ä¸å·²ã€‚ â€‹ è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå°†ç¨‹åºå‘˜ä»ç¹é‡çš„å†…å­˜ç®¡ç†ä¸­é‡Šæ”¾å‡ºæ¥ï¼Œå¯ä»¥æ›´ä¸“å¿ƒåœ°ä¸“æ³¨äºä¸šåŠ¡å¼€å‘ oracleå®˜ç½‘å…³äºåƒåœ¾å›æ”¶çš„ä»‹ç»ï¼šhttps://docs.oracle.com/javase/8/docs/technotes/guides/vm/GCtuning/toc.html â€‹ å¯¹äºJavaå¼€å‘äººå‘˜è€Œè¨€ï¼Œè‡ªåŠ¨å†…å­˜ç®¡ç†å°±åƒæ˜¯ä¸€ä¸ªé»‘åŒ£å­ï¼Œå¦‚æœè¿‡åº¦ä¾èµ–äºâ€œè‡ªåŠ¨â€ï¼Œé‚£ä¹ˆè¿™å°†ä¼šæ˜¯ä¸€åœºç¾éš¾ï¼Œæœ€ä¸¥é‡çš„å°±ä¼šå¼±åŒ–Javaå¼€å‘äººå‘˜åœ¨ç¨‹åºå‡ºç°å†…å­˜æº¢å‡ºæ—¶å®šä½é—®é¢˜å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚ â€‹ æ­¤æ—¶ï¼Œäº†è§£JVMçš„è‡ªåŠ¨å†…å­˜åˆ†é…å’Œå†…å­˜å›æ”¶åŸç†å°±æ˜¾å¾—éå¸¸é‡è¦ï¼Œåªæœ‰åœ¨çœŸæ­£äº†è§£JVMæ˜¯å¦‚ä½•ç®¡ç†å†…å­˜åï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿåœ¨é‡è§ OutOfMemoryErroræ—¶ï¼Œå¿«é€Ÿåœ°æ ¹æ®é”™è¯¯å¼‚å¸¸æ—¥å¿—å®šä½é—®é¢˜å’Œè§£å†³é—®é¢˜ã€‚ â€‹ å½“éœ€è¦æ’æŸ¥å„ç§å†…å­˜æº¢å‡ºã€å†…å­˜æ³„æ¼é—®é¢˜æ—¶ï¼Œå½“åƒåœ¾æ”¶é›†æˆä¸ºç³»ç»Ÿè¾¾åˆ°æ›´é«˜å¹¶å‘é‡çš„ç“¶é¢ˆæ—¶ï¼Œæˆ‘ä»¬å°±å¿…é¡»å¯¹è¿™äº›â€œè‡ªåŠ¨åŒ–â€çš„æŠ€æœ¯å®æ–½å¿…è¦çš„ç›‘æ§å’Œè°ƒèŠ‚ã€‚ åƒåœ¾å›æ”¶å™¨å¯ä»¥å¯¹å¹´è½»ä»£å›æ”¶ï¼Œä¹Ÿå¯ä»¥å¯¹è€å¹´ä»£å›æ”¶ï¼Œç”šè‡³æ˜¯å…¨å †å’Œæ–¹æ³•åŒºçš„å›æ”¶ã€‚ å…¶ä¸­ï¼ŒJavaå †æ˜¯åƒåœ¾æ”¶é›†å™¨çš„å·¥ä½œé‡ç‚¹ã€‚ ä»æ¬¡æ•°ä¸Šè®² é¢‘ç¹æ”¶é›† YoungåŒº è¾ƒå°‘æ”¶é›†oldåŒº åŸºæœ¬ä¸åŠ¨PermåŒº åäº”ã€åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³• 1.åƒåœ¾æ ‡è®°é˜¶æ®µçš„ç®—æ³• 1.åƒåœ¾æ ‡è®°é˜¶æ®µï¼šå¯¹è±¡å­˜æ´»åˆ¤æ–­ â€‹ åœ¨å †é‡Œå­˜æ”¾ç€å‡ ä¹æ‰€æœ‰çš„Javaå¯¹è±¡å®ä¾‹ï¼Œåœ¨GCæ‰§è¡Œåƒåœ¾å›æ”¶ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦åŒºåˆ†å‡ºå†…å­˜ä¸­å“ªäº›æ˜¯å­˜æ´»å¯¹è±¡ï¼Œå“ªäº›æ˜¯å·²ç»æ­»äº¡çš„å¯¹è±¡ã€‚åªæœ‰è¢«æ ‡è®°ä¸ºå·±ç»æ­»äº¡çš„å¯¹è±¡ï¼ŒGCã‚ªä¼šåœ¨æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œé‡Šæ”¾æ‰å…¶æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬å¯ä»¥ç§°ä¸ºåƒåœ¾æ ‡è®°é˜¶æ®µã€‚ é‚£ä¹ˆåœ¨JVMä¸­ç©¶ç«Ÿæ˜¯å¦‚ä½•æ ‡è®°ä¸€ä¸ªæ­»äº¡å¯¹è±¡å‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å·²ç»ä¸å†è¢«ä»»ä½•çš„å­˜æ´»å¯¹è±¡ç»§ç»­å¼•ç”¨æ—¶ï¼Œå°±å¯ä»¥å®£åˆ¤ä¸ºå·²ç»æ­»äº¡ã€‚åˆ¤æ–­å¯¹è±¡å­˜æ´»ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼šå¼•ç”¨è®¡æ•°ç®—æ³•å’Œå¯è¾¾æ€§åˆ†æç®—æ³•ã€‚ æ–¹å¼ä¸€ï¼šå¼•ç”¨è®¡æ•°ç®—æ³• å¼•ç”¨è®¡æ•°ç®—æ³•( Reference Counting)æ¯”è¾ƒç®€å•ï¼Œå¯¹æ¯ä¸ªå¯¹è±¡ä¿å­˜ä¸€ä¸ªæ•´å‹çš„å¼•ç”¨è®¡æ•°å™¨å±æ€§ã€‚ç”¨äºè®°å½•å¯¹è±¡è¢«å¼•ç”¨çš„æƒ…å†µã€‚ å¯¹äºä¸€ä¸ªå¯¹è±¡A,åªè¦æœ‰ä»»ä½•ä¸€ä¸ªå¯¹è±¡å¼•ç”¨äº†A,åˆ™Açš„å¼•ç”¨è®¡æ•°å™¨å°±åŠ 1;å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œå¼•ç”¨è®¡æ•°å™¨å°±å‡1ã€‚åªè¦å¯¹è±¡Açš„å¼•ç”¨è®¡æ•°å™¨çš„å€¼ä¸º0,å³è¡¨ç¤ºå¯¹è±¡Aä¸å¯èƒ½å†è¢«ä½¿ç”¨ï¼Œå¯è¿›è¡Œå›æ”¶ã€‚ ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œåƒåœ¾å¯¹è±¡ä¾¿äºè¾¨è¯†ï¼›åˆ¤å®šæ•ˆç‡é«˜ï¼Œå›æ”¶æ²¡æœ‰å»¶é€€æ€§ã€‚ ç¼ºç‚¹ï¼šå®ƒéœ€è¦å•ç‹¬çš„å­—æ®µå­˜å‚¨è®¡æ•°å™¨ï¼Œè¿™æ ·çš„åšæ³•å¢åŠ äº†å­˜å‚¨ç©ºé—´çš„å¼€é”€ã€‚æ¯æ¬¡èµ‹å€¼éƒ½éœ€è¦æ›´æ–°è®¡æ•°å™¨ï¼Œä¼´éšç€åŠ æ³•å’Œå‡æ³•æ“ä½œï¼Œè¿™å¢åŠ äº†æ—¶é—´å¼€é”€ã€‚å¼•ç”¨è®¡æ•°å™¨æœ‰ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå³æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨çš„æƒ…å†µã€‚è¿™æ˜¯ä¸€æ¡è‡´å‘½ç¼ºé™·ï¼Œå¯¼è‡´åœ¨Javaçš„åƒåœ¾å›æ”¶å™¨ä¸­æ²¡æœ‰ä½¿ç”¨è¿™ç±»ç®—æ³•ã€‚ æ–¹å¼äºŒï¼šå¯è¾¾æ€§åˆ†æ(æˆ–æ ¹æœç´¢ç®—æ³•ã€è¿½è¸ªæ€§åƒåœ¾æ”¶é›†) ç›¸å¯¹äºå¼•ç”¨è®¡æ•°ç®—æ³•è€Œè¨€ï¼Œå¯è¾¾æ€§åˆ†æç®—æ³•ä¸ä»…åŒæ ·å…·å¤‡å®ç°ç®€å•å’Œæ‰§è¡Œé«˜æ•ˆç­‰ç‰¹ç‚¹ï¼Œæ›´é‡è¦çš„æ˜¯è¯¥ç®—æ³•å¯ä»¥æœ‰æ•ˆåœ°è§£å†³åœ¨å¼•ç”¨è®¡æ•°ç®—æ³•ä¸­å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼çš„å‘ç”Ÿã€‚ ç›¸è¾ƒäºå¼•ç”¨è®¡æ•°ç®—æ³•ï¼Œè¿™é‡Œçš„å¯è¾¾æ€§åˆ†æå°±æ˜¯Javaã€C#é€‰æ‹©çš„ã€‚è¿™ç§ç±»å‹çš„åƒåœ¾æ”¶é›†é€šå¸¸ä¹Ÿå«ä½œè¿½è¸ªæ€§åƒåœ¾æ”¶é›†ï¼ˆ Tracing Garbage Collection)ã€‚ æ‰€è°“&quot; GC Roots&quot;æ ¹é›†åˆå°±æ˜¯ä¸€ç»„å¿…é¡»æ´»è·ƒçš„å¼•ç”¨ã€‚ åŸºæœ¬æ€è·¯ï¼š å¯è¾¾æ€§åˆ†æç®—æ³•æ˜¯ä»¥æ ¹å¯¹è±¡é›†åˆ( GC Roots)ä¸ºèµ·å§‹ç‚¹ï¼ŒæŒ‰ç…§ä»ä¸Šè‡³ä¸‹çš„æ–¹å¼æœç´¢è¢«æ ¹å¯¹è±¡é›†åˆæ‰€è¿æ¥çš„ç›®æ ‡å¯¹è±¡æ˜¯å¦å¯è¾¾ã€‚ ä½¿ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•åï¼Œå†…å­˜ä¸­çš„å­˜æ´»å¯¹è±¡éƒ½ä¼šè¢«æ ¹å¯¹è±¡é›†åˆç›´æ¥æˆ–é—´æ¥è¿æ¥ç€ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾( Reference Chain) å¦‚æœç›®æ ‡å¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼Œåˆ™æ˜¯ä¸å¯è¾¾çš„ï¼Œå°±æ„å‘³ç€è¯¥å¯¹è±¡å·±ç»æ­»äº¡ï¼Œå¯ä»¥æ ‡è®°ä¸ºåƒåœ¾å¯¹è±¡ã€‚ åœ¨å¯è¾¾æ€§åˆ†æç®—æ³•ä¸­ï¼Œåªæœ‰èƒ½å¤Ÿè¢«æ ¹å¯¹è±¡é›†åˆç›´æ¥æˆ–è€…é—´æ¥è¿æ¥çš„å¯¹è±¡æ‰æ˜¯å­˜æ´»å¯¹è±¡ã€‚ GC ROOT åœ¨Javaè¯­è¨€ä¸­ï¼Œ GC RootsåŒ…æ‹¬ä»¥ä¸‹å‡ ç±»å…ƒç´ ï¼š è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚æ¯”å¦‚ï¼šå„ä¸ªçº¿ç¨‹è¢«è°ƒç”¨çš„æ–¹æ³•ä¸­ä½¿ç”¨åˆ°çš„å‚æ•°ã€å±€éƒ¨å˜é‡ç­‰ã€‚ æœ¬åœ°æ–¹æ³•æ ˆå†…JNIï¼ˆé€šå¸¸è¯´çš„æœ¬åœ°æ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡ æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡&gt;æ¯”å¦‚ï¼šJavaç±»çš„å¼•ç”¨ç±»å‹é™æ€å˜é‡æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ã€‚æ¯”å¦‚ï¼šå­—ç¬¦ä¸²å¸¸é‡æ± ( String Table)é‡Œçš„å¼•ç”¨æ‰€æœ‰è¢«åŒæ­¥é” synchronizedæŒæœ‰çš„å¯¹è±¡ Javaè™šæ‹Ÿæœºå†…éƒ¨çš„å¼•ç”¨ã€‚åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„classå¯¹è±¡ï¼Œä¸€äº›å¸¸é©»çš„å¼‚å¸¸å¯¹è±¡ï¼ˆå¦‚ï¼šNull Pointerexceptionã€ OutOfMemoryError),ç³»ç»Ÿç±»åŠ è½½å™¨ã€‚ åæ˜ javaè™šæ‹Ÿæœºå†…éƒ¨æƒ…å†µçš„ JMXbeamã€JVMTIä¸­æ³¨å†Œçš„å›è°ƒã€æœ¬åœ°ä»£ç ç¼“å­˜ç­‰ã€‚ é™¤äº†è¿™äº›å›ºå®šçš„ GC Rootsé›†åˆä»¥å¤–ï¼Œæ ¹æ®ç”¨æˆ·æ‰€é€‰ç”¨çš„åƒåœ¾æ”¶é›†å™¨ä»¥åŠå½“å‰å›æ”¶çš„å†…å­˜åŒºåŸŸä¸åŒï¼Œè¿˜å¯ä»¥æœ‰å…¶ä»–å¯¹è±¡â€œä¸´æ—¶æ€§â€åœ°åŠ å…¥ï¼Œå…±åŒæ„æˆå®Œæ•´ GC Rootsé›†åˆã€‚æ¯”å¦‚ï¼šåˆ†ä»£æ”¶é›†å’Œå±€éƒ¨å›æ”¶( Partial GC)ã€‚å¦‚æœåªé’ˆå¯¹Javaå †ä¸­çš„æŸä¸€å—åŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶(æ¯”å¦‚ï¼šå…¸å‹çš„åªé’ˆå¯¹æ–°ç”Ÿä»£)ï¼Œå¿…é¡»è€ƒè™‘åˆ°å†…å­˜åŒºåŸŸæ˜¯è™šæ‹Ÿæœºè‡ªå·±çš„å®ç°ç»†èŠ‚ï¼Œæ›´ä¸æ˜¯å­¤ç«‹å°é—­çš„ï¼Œè¿™ä¸ªåŒºåŸŸçš„å¯¹è±¡å®Œå…¨æœ‰å¯èƒ½è¢«å…¶ä»–åŒºåŸŸçš„å¯¹è±¡æ‰€å¼•ç”¨ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä¸€å¹¶å°†å…³è”çš„åŒºåŸŸå¯¹è±¡ä¹ŸåŠ å…¥ GC Roots é›†åˆä¸­å»è€ƒè™‘ï¼Œæ‰èƒ½ä¿è¯å¯è¾¾æ€§åˆ†æçš„å‡†ç¡®æ€§ å°æŠ€å·§ï¼šç”±äºRooté‡‡ç”¨æ ˆæ–¹å¼å­˜æ”¾å˜é‡å’ŒæŒ‡é’ˆï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒä¿å­˜äº†å †å†…å­˜é‡Œé¢çš„å¯¹è±¡ï¼Œä½†æ˜¯è‡ªå·±åˆä¸å­˜æ”¾åœ¨å †å†…å­˜é‡Œé¢ï¼Œé‚£å®ƒå°±æ˜¯ä¸€ä¸ªRoot å¦‚æœè¦ä½¿ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•æ¥åˆ¤æ–­å†…å­˜æ˜¯å¦å¯å›æ”¶ï¼Œé‚£ä¹ˆåˆ†æå·¥ä½œå¿…é¡»åœ¨ä¸ªèƒ½ä¿éšœä¸€è‡´æ€§çš„å¿«ç…§ä¸­è¿›è¡Œã€‚è¿™ç‚¹ä¸æ»¡è¶³çš„è¯åˆ†æç»“æœçš„å‡†ç¡®æ€§å°±æ— æ³•ä¿è¯ã€‚ è¿™ç‚¹ä¹Ÿæ˜¯å¯¼è‡´GCè¿›è¡Œæ—¶å¿…é¡» â€œStop The World&quot;çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚å³ä½¿æ˜¯å·ç§°ï¼ˆå‡ ä¹ï¼‰ä¸ä¼šå‘ç”Ÿåœé¡¿çš„CMSæ”¶é›†å™¨ä¸­ï¼Œæšä¸¾æ ¹èŠ‚ç‚¹æ—¶ä¹Ÿæ˜¯å¿…é¡»è¦åœé¡¿çš„ã€‚ 2.å¯¹è±¡çš„ finalizationæœºåˆ¶ Javaè¯­è¨€æä¾›äº†å¯¹è±¡ç»ˆæ­¢( finalization)æœºåˆ¶æ¥å…è®¸å¼€å‘äººå‘˜æä¾›å¯¹è±¡è¢«é”€æ¯ä¹‹å‰çš„è‡ªå®šä¹‰å¤„ç†é€»è¾‘ã€‚ å½“åƒåœ¾å›æ”¶å™¨å‘ç°æ²¡æœ‰å¼•ç”¨æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå³ï¼šåƒåœ¾å›æ”¶æ­¤å¯¹è±¡ä¹‹å‰ï¼Œæ€»ä¼šå…ˆè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„ finallizeï¼ˆï¼‰æ–¹æ³• finalize()æ–¹æ³•å…è®¸åœ¨å­ç±»ä¸­è¢«é‡å†™ï¼Œç”¨äºåœ¨å¯¹è±¡è¢«å›æ”¶æ—¶è¿›è¡Œèµ„æºé‡Šæ”¾ã€‚é€šå¸¸åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œä¸€äº›èµ„æºé‡Šæ”¾å’Œæ¸…ç†çš„å·¥ä½œï¼Œæ¯”å¦‚å…³é—­æ–‡ä»¶ã€å¥—æ¥å­—å’Œæ•°æ®åº“è¿æ¥ç­‰ã€‚ æ°¸è¿œä¸è¦ä¸»åŠ¨è°ƒç”¨æŸä¸ªå¯¹è±¡çš„finalize()æ–¹æ³•ï¼Œåº”è¯¥äº¤ç»™åƒåœ¾å›æ”¶æœºåˆ¶è°ƒç”¨ã€‚ç†ç”±åŒ…æ‹¬ä¸‹é¢ä¸‰ç‚¹ï¼š finalize() æ—¶å¯èƒ½ä¼šå¯¼è‡´å¯¹è±¡å¤æ´»ã€‚ finalize() æ–¹æ³•çš„æ‰§è¡Œæ—¶é—´æ˜¯æ²¡æœ‰ä¿éšœçš„ï¼Œå®ƒå®Œå…¨ç”±GCçº¿ç¨‹å†³å®šï¼Œæç«¯æƒ…å†µä¸‹ï¼Œè‹¥ä¸å‘ç”ŸGC,åˆ™finalize()æ–¹æ³•å°†æ²¡æœ‰æ‰§è¡Œæœºä¼šã€‚ ä¸€ä¸ªç³Ÿç³•çš„ finalize() ä¼šä¸¥é‡å½±å“GCçš„æ€§èƒ½ ä»åŠŸèƒ½ä¸Šæ¥è¯´ï¼Œ finalize() æ–¹æ³•ä¸ C ä¸­çš„ææ„å‡½æ•°æ¯”è¾ƒç›¸ä¼¼ï¼Œä½†æ˜¯Javaé‡‡ç”¨çš„æ˜¯åŸºäºåƒåœ¾å›æ”¶å™¨çš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œæ‰€ä»¥ finalize() æ–¹æ³•åœ¨æœ¬è´¨ä¸Šä¸åŒäºCä¸­çš„ææ„å‡½æ•°ã€‚ç”±äº finalize() æ–¹æ³•çš„å­˜åœ¨ï¼Œè™šæ‹Ÿæœºä¸­çš„å¯¹è±¡ä¸€èˆ¬å¤„äºä¸‰ç§å¯èƒ½çš„çŠ¶æ€ã€‚ å¦‚æœä»æ‰€æœ‰çš„æ ¹èŠ‚ç‚¹éƒ½æ— æ³•è®¿é—®åˆ°æŸä¸ªå¯¹è±¡ï¼Œè¯´æ˜å¯¹è±¡å·±ç»ä¸å†ä½¿ç”¨äº†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ­¤å¯¹è±¡éœ€è¦è¢«å›æ”¶ã€‚ä½†äº‹å®ä¸Šï¼Œä¹Ÿå¹¶éæ˜¯â€œéæ­»ä¸å¯â€çš„ï¼Œè¿™æ—¶å€™å®ƒä»¬æš‚æ—¶å¤„äºâ€œç¼“åˆ‘â€é˜¶æ®µã€‚ä¸€ä¸ªæ— æ³•è§¦åŠçš„å¯¹è±¡æœ‰å¯èƒ½åœ¨æŸä¸€ä¸ªæ¡ä»¶ä¸‹â€œå¤æ´»â€è‡ªå·±ï¼Œå¦‚æœè¿™æ ·ï¼Œé‚£ä¹ˆå¯¹å®ƒçš„å›æ”¶å°±æ˜¯ä¸åˆç†çš„ï¼Œä¸ºæ­¤ï¼Œå®šä¹‰è™šæ‹Ÿæœºä¸­çš„å¯¹è±¡å¯èƒ½çš„ä¸‰ç§çŠ¶æ€ã€‚å¦‚ä¸‹ï¼š å¯è§¦åŠçš„ï¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå¯ä»¥åˆ°è¾¾è¿™ä¸ªå¯¹è±¡ã€‚ å¯å¤æ´»çš„ï¼šå¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«é‡Šæ”¾ï¼Œä½†æ˜¯å¯¹è±¡æœ‰å¯èƒ½ finalize() ä¸­å¤æ´»ã€‚ ä¸å¯è§¦åŠçš„ï¼šå¯¹è±¡çš„ finalize() è¢«è°ƒç”¨ï¼Œå¹¶ä¸”æ²¡æœ‰å¤æ´»ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥ä¸å¯è§¦åŠçŠ¶æ€ã€‚ä¸å¯è§¦åŠçš„å¯¹è±¡ä¸å¯èƒ½è¢«å¤æ´»ï¼Œå› ä¸º finalize() åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚ ä»¥ä¸Š3ç§çŠ¶æ€ä¸­ï¼Œæ˜¯ç”±äºfina1izeï¼ˆï¼‰æ–¹æ³•çš„å­˜åœ¨ï¼Œè¿›è¡Œçš„åŒºåˆ†ã€‚åªæœ‰åœ¨å¯¹è±¡ä¸å¯è§¦åŠæ—¶æ‰å¯ä»¥è¢«å›æ”¶ã€‚ å…·ä½“è¿‡ç¨‹ï¼š åˆ¤å®šä¸€ä¸ªå¯¹è±¡ objA æ˜¯å¦å¯å›æ”¶ï¼Œè‡³å°‘è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ 1.å¦‚æœå¯¹è±¡ã€‚objAåˆ° GC Rootsæ²¡æœ‰å¼•ç”¨é“¾ï¼Œåˆ™è¿›è¡Œç¬¬ä¸€æ¬¡æ ‡è®°ã€‚ 2.è¿›è¡Œç­›é€‰ï¼Œåˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œfinalize()æ–¹æ³•ã€‚ â‘ å¦‚æœå¯¹è±¡objAæ²¡æœ‰é‡å†™ finalize()æ–¹æ³•ï¼Œæˆ–è€… finalize() æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ï¼Œåˆ™è™šæ‹Ÿæœºè§†ä¸ºâ€œæ²¡æœ‰å¿…è¦æ‰§è¡Œâ€ï¼ŒobjAè¢«åˆ¤å®šä¸ºä¸å¯è§¦åŠçš„ã€‚ â‘¡å¦‚æœå¯¹è±¡objAé‡å†™äº†finalize() æ–¹æ³•ï¼Œä¸”è¿˜æœªæ‰§è¡Œè¿‡ï¼Œé‚£ä¹ˆobjAä¼šè¢«æ’å…¥åˆ°F- Queueé˜Ÿåˆ—ä¸­ï¼Œç”±ä¸€ä¸ªè™šæ‹Ÿæœºè‡ªåŠ¨åˆ›å»ºçš„ã€ä½ä¼˜å…ˆçº§çš„Finalizerçº¿ç¨‹è§¦å‘å…¶ finalize() æ–¹æ³•æ‰§è¡Œã€‚ â‘¢ finalize() æ–¹æ³•æ˜¯å¯¹è±¡é€ƒè„±æ­»äº¡çš„æœ€åæœºä¼šï¼Œç¨åGCä¼šå¯¹F- Queueé˜Ÿåˆ—ä¸­çš„å¯¹è±¡è¿›è¡Œç¬¬äºŒæ¬¡æ ‡è®°ã€‚å¦‚æœobjAåœ¨finalize() æ–¹æ³•ä¸­ä¸å¼•ç”¨é“¾ä¸Šçš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡å»ºç«‹äº†è”ç³»ï¼Œé‚£ä¹ˆåœ¨ç¬¬äºŒæ¬¡æ ‡è®°æ—¶ï¼ŒobjAä¼šè¢«ç§»å‡ºâ€œå³å°†å›æ”¶â€é›†åˆã€‚ä¹‹åï¼Œå¯¹è±¡ä¼šå†æ¬¡å‡ºç°æ²¡æœ‰å¼•ç”¨å­˜åœ¨çš„æƒ…å†µã€‚åœ¨è¿™ä¸ªæƒ…å†µä¸‹ï¼Œfinalizeæ–¹æ³•ä¸ä¼šè¢«å†æ¬¡è°ƒç”¨ï¼Œå¯¹è±¡ä¼šç›´æ¥å˜æˆä¸å¯è§¦åŠçš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå¯¹è±¡çš„finalizeæ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚ 3.MATä¸ Jprofilerçš„GC Rootsæ¹–æº MAT MATæ˜¯ Memory Analyzerçš„ç®€ç§°ï¼Œå®ƒæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„Javaå †å†…å­˜åˆ†æå™¨ã€‚ç”¨äºæŸ»æ‰¾å†…å­˜æ³„æ¼ä»¥åŠæŸ»çœ‹å†…å­˜æ¶ˆè€—æƒ…å†µã€‚MATæ˜¯åŸºäº Eclipseå¼€å‘çš„ï¼Œæ˜¯ä¸€æ¬¾å…è´¹çš„æ€§èƒ½åˆ†æå·¥å…·å¤§å®¶å¯ä»¥åœ¨https://www.eclipse.org/mat/ä¸‹è½½å¹¶ä½¿ç”¨MATã€‚ â€‹ è·å– dump æ–‡ä»¶ Jprofiler 4.åƒåœ¾æ¸…é™¤é˜¶æ®µç®—æ³•ä¹‹æ ‡è®°ä¸€æ¸…é™¤ç®—æ³• å½“æˆåŠŸåŒºåˆ†å‡ºå†…å­˜ä¸­å­˜æ´»å¯¹è±¡å’Œæ­»äº¡å¯¹è±¡åï¼ŒGCæ¥ä¸‹æ¥çš„ä»»åŠ¡å°±æ˜¯æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œé‡Šæ”¾æ‰æ— ç”¨å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œä»¥ä¾¿æœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ç©ºé—´ä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜ã€‚ ç›®å‰åœ¨JVMä¸­æ¯”è¾ƒå¸¸è§çš„ä¸‰ç§åƒåœ¾æ”¶é›†ç®—æ³•æ˜¯æ ‡è®° - æ¸…é™¤ç®—æ³•ï¼ˆMark Sweep)ã€å¤åˆ¶ç®—æ³•( Copying)ã€æ ‡è®° - å‹ç¼©ç®—æ³•ï¼ˆMark Compactï¼‰ æ ‡è®° - æ¸…é™¤ç®—æ³•ï¼ˆMark Sweep) åœæ­¢-æ ‡è®°-æ¸…é™¤ èƒŒæ™¯ï¼šæ ‡è®°ä¸€æ¸…é™¤ç®—æ³•(Mark- Sweep)æ˜¯ä¸€ç§éå¸¸åŸºç¡€å’Œå¸¸è§çš„åƒåœ¾æ”¶é›†ç®—æ³•ï¼Œè¯¥ç®—æ³•è¢«J. Mccarthyç­‰äººåœ¨1960å¹´æå‡ºå¹¶å¹¶åº”ç”¨äºLispè¯­è¨€ã€‚ æ‰§è¡Œè¿‡ç¨‹ï¼šå½“å †ä¸­çš„æœ‰æ•ˆå†…å­˜ç©ºé—´(avail able memory)è¢«è€—å°½çš„æ—¶å€™ï¼Œå°±ä¼šåœæ­¢æ•´ä¸ªç¨‹åº(ä¹Ÿè¢«ç§°ä¸º stop the world),ç„¶åè¿›è¡Œä¸¤é¡¹å·¥ä½œï¼Œç¬¬ä¸€é¡¹åˆ™æ˜¯æ ‡è®°ï¼Œç¬¬äºŒé¡¹åˆ™æ˜¯æ¸…é™¤ã€‚ æ ‡è®°ï¼šCollectorä»å¼•ç”¨æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼Œæ ‡è®°æ‰€æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚ä¸€èˆ¬æ˜¯åœ¨å¯¹è±¡çš„ Headerä¸­è®°å½•ä¸ºå¯è¾¾å¯¹è±¡ã€‚ æ¸…é™¤ï¼šCollectorå¯¹å †å†…å­˜ä»å¤´åˆ°å°¾è¿›è¡Œçº¿æ€§çš„éå†ï¼Œå¦‚æœå‘ç°æŸä¸ªå¯¹è±¡åœ¨å…¶ Headerlä¸­æ²¡æœ‰æ ‡è®°ä¸ºå¯è¾¾å¯¹è±¡ï¼Œåˆ™å°†å…¶å›æ”¶. ç¼ºç‚¹ æ•ˆç‡ä¸ç®—é«˜ åœ¨è¿›è¡ŒGCçš„æ—¶å€™ï¼Œéœ€è¦åœæ­¢æ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒå·®ã€‚ è¿™ç§æ–¹å¼æ¸…ç†å‡ºæ¥çš„ç©ºé—²å†…å­˜æ˜¯ä¸è¿ç»­çš„ï¼Œäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚éœ€è¦ç»´æŠ¤ä¸€ä¸ªç©ºé—²åˆ—è¡¨æ³¨æ„ã€‚ ä½•ä¸ºæ¸…é™¤ï¼Ÿ è¿™é‡Œæ‰€è°“çš„æ¸…é™¤å¹¶ä¸æ˜¯çœŸçš„ç½®ç©ºï¼Œè€Œæ˜¯æŠŠéœ€è¦æ¸…é™¤çš„å¯¹è±¡åœ°å€ä¿å­˜åœ¨ç©ºé—²çš„åœ°å€åˆ—è¡¨é‡Œã€‚ä¸‹æ¬¡æœ‰æ–°å¯¹è±¡éœ€è¦åŠ è½½æ—¶ï¼Œåˆ¤æ–­åƒåœ¾çš„ä½ç½®ç©ºé—´æ˜¯å¦å¤Ÿå¦‚æœå¤Ÿï¼Œå°±å­˜æ”¾ã€‚ å¤åˆ¶ç®—æ³•( Copying) ä¸¤å—-æ´»è¿ç»­å¤åˆ¶åˆ°å¦ä¸€å—-æ¸…é™¤ èƒŒæ™¯ ä¸ºäº†è§£å†³æ ‡è®°ä¸€æ¸…é™¤ç®—æ³•åœ¨åƒåœ¾æ”¶é›†æ•ˆç‡æ–¹é¢çš„ç¼ºé™·,M,å·¥. Minskyäº1963å¹´å‘è¡¨äº†è‘—åçš„è®ºæ–‡,&quot;ä½¿ç”¨åŒå­˜å‚¨åŒºçš„Lispè¯­è¨€åƒåœ¾æ”¶é›†å™¨CALISP Garbage Collector Algorithm Using Serial Secondary Storage)&quot;ã€‚M.L. Minskyåœ¨è¯¥è®ºæ–‡ä¸­æè¿°çš„ç®—æ³•è¢«äººä»¬]ç§°ä¸ºå¤åˆ¶( Copying)ç®—æ³•,å®ƒä¹Ÿè¢«M.L. Minskyæœ¬äººæˆåŠŸåœ°å¼•å…¥åˆ°äº†Lispè¯­è¨€çš„ä¸€ä¸ªå®ç°ç‰ˆæœ¬ä¸­ã€‚ æ‰§è¡Œè¿‡ç¨‹ å°†æ´»ç€çš„å†…å­˜ç©ºé—´åˆ†ä¸ºä¸¤å—,æ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€å—,åœ¨åƒåœ¾å›æ”¶æ—¶å°†æ­£åœ¨ä½¿ç”¨çš„å†…å­˜ä¸­çš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°æœªè¢«ä½¿ç”¨çš„å†…å­˜å—ä¸­,ä¹‹åæ¸…é™¤æ­£åœ¨ä½¿ç”¨çš„å†…å­˜å—ä¸­çš„æ‰€æœ‰å¯¹è±¡,äº¤æ¢ä¸¤ä¸ªå†…å­˜çš„è§’è‰²,æœ€åå®Œæˆåƒåœ¾å›æ”¶. ä¼˜ç‚¹ï¼š æ²¡æœ‰æ ‡è®°å’Œæ¸…é™¤è¿‡ç¨‹ï¼Œå®ç°ç®€å•ï¼Œè¿è¡Œé«˜æ•ˆ å¤åˆ¶è¿‡å»ä»¥åä¿è¯ç©ºé—´çš„è¿ç»­æ€§ï¼Œä¸ä¼šå‡ºç°â€œç¢ç‰‡â€é—®é¢˜ç¼ºç‚¹ ç¼ºç‚¹ï¼šéœ€è¦ä¸¤å€çš„å†…å­˜ç©ºé—´ã€‚ å¯¹äºG1è¿™ç§åˆ†æ‹†æˆä¸ºå¤§é‡ regionçš„GC,å¤åˆ¶è€Œä¸æ˜¯ç§»åŠ¨ï¼Œæ„å‘³ç€GCéœ€è¦ç»´æŠ¤ regionä¹‹é—´å¯¹è±¡å¼•ç”¨å…³ç³»ï¼Œä¸ç®¡æ˜¯å†…å­˜å ç”¨æˆ–è€…æ—¶é—´å¼€é”€ä¹Ÿä¸å°ã€‚ ç‰¹åˆ«çš„ï¼šå¦‚æœç³»ç»Ÿä¸­çš„åƒåœ¾å¯¹è±¡å¾ˆå¤šï¼Œå¤åˆ¶ç®—æ³•ä¸ä¼šå¾ˆç†æƒ³ï¼Œå› ä¸ºå¤åˆ¶ç®—æ³•éœ€è¦å¤åˆ¶çš„å­˜æ´»å¯¹è±¡æ•°é‡å¹¶ä¸ä¼šå¤ªå¤§æˆ–è€…è¯´éå¸¸ä½æ‰è¡Œã€‚ æ ‡è®° - å‹ç¼©ç®—æ³•ï¼ˆMark Compactï¼‰ æ ‡è®°-å¼•ç”¨å¯¹è±¡å‹ç¼©åˆ°ä¸€ç«¯-æ¸…é™¤ èƒŒæ™¯ å¤åˆ¶ç®—æ³•çš„é«˜æ•ˆæ€§æ˜¯å»ºç«‹åœ¨å­˜æ´»å¯¹è±¡å°‘ã€åƒåœ¾å¯¹è±¡å¤šçš„å‰æä¸‹çš„ã€‚è¿™ç§æƒ…å†µåœ¨æ–°ç”Ÿä»£ç»å¸¸å‘ç”Ÿï¼Œä½†æ˜¯åœ¨è€å¹´ä»£ï¼Œæ›´å¸¸è§çš„æƒ…å†µæ˜¯å¤§éƒ¨åˆ†å¯¹è±¡éƒ½æ˜¯å­˜æ´»å¯¹è±¡ã€‚å¦‚æœä¾ç„¶ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œç”±äºå­˜æ´»å¯¹è±¡è¾ƒå¤šï¼Œå¤åˆ¶çš„æˆæœ¬ä¹Ÿå°†å¾ˆé«˜ã€‚å› æ­¤ï¼ŒåŸºäºè€å¹´ä»£åƒåœ¾å›æ”¶çš„ç‰¹æ€§ï¼Œéœ€è¦ä½¿ç”¨å…¶ä»–çš„ç®—æ³•ã€‚ æ ‡è®°ä¸€æ¸…é™¤ç®—æ³•çš„ç¡®å¯ä»¥åº”ç”¨åœ¨è€å¹´ä»£ä¸­ï¼Œä½†æ˜¯è¯¥ç®—æ³•ä¸ä»…æ‰§è¡Œæ•ˆç‡ä½ä¸‹ï¼Œè€Œä¸”åœ¨æ‰§è¡Œå®Œå†…å­˜å›æ”¶åè¿˜ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œæ‰€ä»¥JMçš„è®¾è®¡è€…éœ€è¦åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šè¿›è¡Œæ”¹è¿›ã€‚æ ‡è®°å‹ç¼©(Mark- Compact)ç®—æ³•ç”±æ­¤è¯ç”Ÿã€‚ 1970å¹´å‰åï¼ŒG.L. Steeleã€C.J. Cheneå’ŒD.S.Wiseç­‰ç ”ç©¶è€…å‘å¸ƒæ ‡è®°å‹ç¼©ç®—æ³•ã€‚åœ¨è®¸å¤šç°ä»£çš„åƒåœ¾æ”¶é›†å™¨ä¸­ï¼Œäººä»¬éƒ½ä½¿ç”¨äº†æ ‡è®°-å‹ç¼©ç®—æ³•æˆ–å…¶æ”¹è¿›ç‰ˆæœ¬ã€‚ æ‰§è¡Œè¿‡ç¨‹ ç¬¬ä¸€é˜¶æ®µå’Œæ ‡è®°æ¸…é™¤ç®—æ³•ä¸€æ ·ä»æ ¹èŠ‚ç‚¹å¼€å§‹æ ‡è®°æ‰€æœ‰è¢«å¼•ç”¨å¯¹è±¡ ç¬¬äºŒé˜¶æ®µå°†æ‰€æœ‰çš„å­˜æ´»å¯¹è±¡å‹ç¼©åˆ°å†…å­˜çš„ä¸€ç«¯ï¼ŒæŒ‰é¡ºåºæ’æ”¾ã€‚ ä¹‹åï¼Œæ¸…ç†è¾¹ç•Œå¤–æ‰€æœ‰çš„ç©ºé—´ã€‚ â€‹ æ ‡è®°ä¸€å‹ç¼©ç®—æ³•çš„æœ€ç»ˆæ•ˆæœç­‰åŒäºæ ‡è®°ä¸€æ¸…é™¤ç®—æ³•æ‰§è¡Œå®Œæˆåï¼Œå†è¿›è¡Œä¸€æ¬¡å†…å­˜ç¢ç‰‡æ•´ç†ï¼Œå› æ­¤ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒç§°ä¸ºæ ‡è®°ä¸€æ¸…é™¤ä¸€å‹ç¼©ï¼ˆMark- Sweep- Compact)ç®—æ³•ã€‚äºŒè€…çš„æœ¬è´¨å·®å¼‚åœ¨äºæ ‡è®°ä¸€æ¸…é™¤ç®—æ³•æ˜¯ä¸€ç§éç§»åŠ¨å¼çš„å›æ”¶ç®—æ³•ï¼Œæ ‡è®°-å‹ç¼©æ˜¯ç§»åŠ¨å¼çš„ã€‚æ˜¯å¦ç§»åŠ¨å›æ”¶åçš„å­˜æ´»å¯¹è±¡æ˜¯ä¸€é¡¹ä¼˜ç¼ºç‚¹å¹¶å­˜çš„é£é™©å†³ç­–ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ ‡è®°çš„å­˜æ´»å¯¹è±¡å°†ä¼šè¢«æ•´ç†ï¼ŒæŒ‰ç…§å†…å­˜åœ°å€ä¾æ¬¡æ’åˆ—ï¼Œè€Œæœªè¢«æ ‡è®°çš„å†…å­˜ä¼šè¢«æ¸…ç†æ‰ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå½“æˆ‘ä»¬éœ€è¦ç»™æ–°å¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼ŒJVMåªéœ€è¦æŒæœ‰ä¸€ä¸ªå†…å­˜çš„èµ·å§‹åœ°å€å³å¯ï¼Œè¿™æ¯”ç»´æŠ¤ä¸€ä¸ªç©ºé—²åˆ—è¡¨æ˜¾ç„¶å°‘äº†è®¸å¤šå¼€é”€ã€‚ ä¼˜ç‚¹ï¼š æ¶ˆé™¤äº†æ ‡è®°ä¸€æ¸…é™¤ç®—æ³•å½“ä¸­ï¼Œå†…å­˜åŒºåŸŸåˆ†æ•£çš„ç¼ºç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ–°å¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼ŒJVMåªéœ€è¦æŒæœ‰ä¸€ä¸ªå†…å­˜çš„èµ·å§‹åœ°å€å³å¯ã€‚æ¶ˆé™¤äº†å¤åˆ¶ç®—æ³•å½“ä¸­ï¼Œå†…å­˜å‡åŠçš„é«˜é¢ä»£ä»· ç¼ºç‚¹ï¼š ä»æ•ˆç‡ä¸Šæ¥è¯´ï¼Œæ ‡è®°ä¸€æ•´ç†ç®—æ³•è¦ä½äºå¤åˆ¶ç®—æ³•ç§»åŠ¨å¯¹è±¡çš„åŒæ—¶ï¼Œå¦‚æœå¯¹è±¡è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨ï¼Œåˆ™è¿˜éœ€è¦è°ƒæ•´å¼•ç”¨çš„åœ°å€ã€‚ç§»åŠ¨è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å…¨ç¨‹æš‚åœç”¨æˆ·åº”ç”¨ç¨‹åºã€‚å³ï¼šSTW æ€»ç»“ â€‹ æ•ˆç‡ä¸Šæ¥è¯´ï¼Œå¤åˆ¶ç®—æ³•æ˜¯å½“ä¹‹æ— æ„§çš„è€å¤§ï¼Œä½†æ˜¯å´æµªè´¹äº†å¤ªå¤šå†…å­˜ã€‚è€Œä¸ºäº†å°½é‡å…¼é¡¾ä¸Šé¢æåˆ°çš„ä¸‰ä¸ªæŒ‡æ ‡ï¼Œæ ‡è®°ä¸€æ•´ç†ç®—æ³•ç›¸å¯¹æ¥è¯´æ›´å¹³æ»‘ä¸€äº›ï¼Œä½†æ˜¯æ•ˆç‡ä¸Šä¸å°½å¦‚äººæ„ï¼Œå®ƒæ¯”å¤åˆ¶ç®—æ³•å¤šäº†ä¸€ä¸ªæ ‡è®°çš„é˜¶æ®µï¼Œæ¯”æ ‡è®°ä¸€æ¸…é™¤å¤šäº†ä¸€ä¸ªæ•´ç†å†…å­˜çš„é˜¶æ®µã€‚ å‰é¢æ‰€æœ‰è¿™äº›ç®—æ³•ä¸­ï¼Œå¹¶æ²¡æœ‰ä¸€ç§ç®—æ³•å¯ä»¥å®Œå…¨æ›¿ä»£å…¶ä»–ç®—æ³•ï¼Œå®ƒä»¬éƒ½å…·æœ‰è‡ªå·±ç‹¬ç‰¹çš„ä¼˜åŠ¿å’Œç‰¹ç‚¹ã€‚åˆ†ä»£æ”¶é›†ç®—æ³•åº”è¿è€Œç”Ÿã€‚ åˆ†ä»£æ”¶é›†ç®—æ³•ï¼Œæ˜¯åŸºäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼šä¸åŒçš„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸ä¸€æ ·çš„ã€‚å› æ­¤ï¼Œä¸åŒç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡å¯ä»¥é‡‡å–ä¸åŒçš„æ”¶é›†æ–¹å¼ï¼Œä»¥ä¾¿æé«˜å›æ”¶æ•ˆç‡ã€‚ä¸€èˆ¬æ˜¯æŠŠJavaå †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹ä½¿ç”¨ä¸åŒçš„å›æ”¶ç®—æ³•ï¼Œä»¥æé«˜åƒåœ¾å›æ”¶çš„æ•ˆç‡ åœ¨Javaç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„å¯¹è±¡ï¼Œå…¶ä¸­æœ‰äº›å¯¹è±¡æ˜¯ä¸ä¸šåŠ¡ä¿¡æ¯ç›¸å…³ï¼Œæ¯”å¦‚Httpè¯·æ±‚ä¸­çš„ Sessionå¯¹è±¡ã€çº¿ç¨‹ã€ Socketè¿æ¥ï¼Œè¿™ç±»å¯¹è±¡è·Ÿä¸šåŠ¡ç›´æ¥æŒ‚é’©ï¼Œå› æ­¤ç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒé•¿ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€äº›å¯¹è±¡ï¼Œä¸»è¦æ˜¯ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ç”Ÿæˆçš„ä¸´æ—¶å˜é‡ï¼Œè¿™äº›å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¼šæ¯”è¾ƒçŸ­ï¼Œæ¯”å¦‚ï¼š string,å¯¹è±¡ï¼Œç”±äºå…¶ä¸å˜ç±»çš„ç‰¹æ€§ï¼Œç³»ç»Ÿä¼šäº§ç”Ÿå¤§é‡çš„è¿™äº›å¯¹è±¡ï¼Œæœ‰äº›å¯¹è±¡ç”šè‡³åªç”¨ä¸€æ¬¡å³å¯å›æ”¶ã€‚ â€‹ ç›®å‰å‡ ä¹æ‰€æœ‰çš„GCéƒ½æ˜¯é‡‡ç”¨åˆ†ä»£æ”¶é›†( Generational Collecting)ç®—æ³•æ‰§è¡Œåƒåœ¾å›æ”¶çš„ã€‚åœ¨ Hotspotä¸­ï¼ŒåŸºäºåˆ†ä»£çš„æ¦‚å¿µï¼ŒGCæ‰€ä½¿ç”¨çš„å†…å­˜å›æ”¶ç®—æ³•å¿…é¡»ç»“åˆå¹´è½»ä»£å’Œè€å¹´ä»£å„è‡ªçš„ç‰¹ç‚¹ã€‚ å¹´è½»ä»£( Young Gen) â€‹ å¹´è½»ä»£ç‰¹ç‚¹ï¼šåŒºåŸŸç›¸å¯¹è€å¹´ä»£è¾ƒå°ï¼Œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸçŸ­ã€å­˜æ´»ç‡ä½ï¼Œå›æ”¶é¢‘ç¹ã€‚è¿™ç§æƒ…å†µå¤åˆ¶ç®—æ³•çš„å›æ”¶æ•´ç†ï¼Œé€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚å¤åˆ¶ç®—æ³•çš„æ•ˆç‡åªå’Œå½“å‰å­˜æ´»å¯¹è±¡å¤§å°æœ‰å…³ï¼Œå› æ­¤å¾ˆé€‚ç”¨äºå¹´è½»ä»£çš„å›æ”¶ã€‚è€Œå¤åˆ¶ç®—æ³•å†…å­˜åˆ©ç”¨ç‡ä¸é«˜çš„é—®é¢˜ï¼Œé€šè¿‡ hotspotä¸­çš„ä¸¤ä¸ª survivorçš„è®¾è®¡å¾—åˆ°ç¼“è§£ã€‚ è€å¹´ä»£( Tensured Gen) â€‹ è€å¹´ä»£ç‰¹ç‚¹ï¼šåŒºåŸŸè¾ƒå¤§ï¼Œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸé•¿ã€å­˜æ´»ç‡é«˜ï¼Œå›æ”¶ä¸åŠå¹´è½»ä»£é¢‘ç¹ã€‚è¿™ç§æƒ…å†µå­˜åœ¨å¤§é‡å­˜æ´»ç‡é«˜çš„å¯¹è±¡ï¼Œå¤åˆ¶ç®—æ³•æ˜æ˜¾å˜å¾—ä¸åˆé€‚ã€‚ä¸€èˆ¬æ˜¯ç”±æ ‡è®°ä¸€æ¸…é™¤æˆ–è€…æ˜¯æ ‡è®°ä¸€æ¸…é™¤ä¸æ ‡è®°æ•´ç†çš„æ··åˆå®ç°ã€‚Marké˜¶æ®µçš„å¼€é”€ä¸å­˜æ´»å¯¹è±¡çš„æ•°é‡æˆæ­£æ¯”ã€‚Sweepé˜¶æ®µçš„å¼€é”€ä¸æ‰€ç®¡ç†åŒºåŸŸçš„å¤§å°æˆæ­£ç›¸å…³ã€‚Compacté˜¶æ®µçš„å¼€é”€ä¸å­˜æ´»å¯¹è±¡çš„æ•°æ®æˆæ­£æ¯”ã€‚ â€‹ ä»¥ Hotspotä¸­çš„CMSå›æ”¶å™¨ä¸ºä¾‹ï¼ŒCMSæ˜¯åŸºäºMark- Sweepå®ç°çš„ï¼Œå¯¹äºå¯¹è±¡çš„å›æ”¶æ•ˆç‡å¾ˆé«˜ã€‚è€Œå¯¹äºç¢ç‰‡é—®é¢˜ï¼ŒCMSé‡‡ç”¨åŸºäºMark- Compactç®—æ³•çš„ Serial old å›æ”¶å™¨ä½œä¸ºè¡¥å¿æªæ–½ï¼šå½“å†…å­˜å›æ”¶ä¸ä½³ï¼ˆç¢ç‰‡å¯¼è‡´çš„ Concurrent Mode Failureæ—¶ï¼‰ï¼Œå°†é‡‡ç”¨ Seraloldæ‰§è¡ŒFullGCä»¥è¾¾åˆ°å¯¹è€å¹´ä»£å†…å­˜çš„æ•´ç†ã€‚åˆ†ä»£çš„æ€æƒ³è¢«ç°æœ‰çš„è™šæ‹Ÿæœºå¹¿æ³›ä½¿ç”¨ã€‚å‡ ä¹æ‰€æœ‰çš„åƒåœ¾å›æ”¶å™¨éƒ½åŒºåˆ†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚ åˆ†åŒºç®—æ³• â€‹ ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ç›¸åŒæ¡ä»¶ä¸‹ï¼Œå †ç©ºé—´è¶Šå¤§ï¼Œä¸€æ¬¡GCæ—¶æ‰€éœ€è¦çš„æ—¶é—´å°±è¶Šé•¿ï¼Œæœ‰å…³GCäº§ç”Ÿçš„åœé¡¿ä¹Ÿè¶Šé•¿ã€‚ä¸ºäº†æ›´å¥½åœ°æ§åˆ¶GCäº§ç”Ÿçš„åœé¡¿æ—¶é—´ï¼Œå°†ä¸€å—å¤§çš„å†…å­˜åŒºåŸŸåˆ†å‰²æˆå¤šä¸ªå°å—ï¼Œæ ¹æ®ç›®æ ‡çš„åœé¡¿æ—¶é—´ï¼Œæ¯æ¬¡åˆç†åœ°å›æ”¶è‹¥å¹²ä¸ªå°åŒºé—´ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå †ç©ºé—´ï¼Œä»è€Œå‡å°‘ãƒ¼æ¬¡GCæ‰€äº§ç”Ÿçš„åœé¡¿ã€‚åˆ†ä»£ç®—æ³•å°†æŒ‰ç…§å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸé•¿çŸ­åˆ’åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åŒºç®—æ³•å°†æ•´ä¸ªå †ç©ºé—´åˆ’åˆ†æˆè¿ç»­çš„ä¸åŒå°åŒºé—´ã€‚æ¯ä¸€ä¸ªå°åŒºé—´éƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œç‹¬ç«‹å›æ”¶ã€‚è¿™ç§ç®—æ³•çš„å¥½å¤„æ˜¯å¯ä»¥æ§åˆ¶ä¸€æ¬¡å›æ”¶å¤šå°‘ä¸ªå°åŒºé—´ã€‚ å¢é‡æ”¶é›†ç®—æ³• ç¼ºç‚¹ ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œç”±äºåœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œé—´æ–­æ€§åœ°è¿˜æ‰§è¡Œäº†åº”ç”¨ç¨‹åºä»£ç ï¼Œæ‰€ä»¥èƒ½å‡å°‘ç³»ç»Ÿçš„åœé¡¿æ—¶é—´ã€‚ä½†æ˜¯ï¼Œå› ä¸ºçº¿ç¨‹åˆ‡æ¢å’Œä¸Šä¸‹æ–‡è½¬æ¢çš„æ¶ˆè€—ï¼Œä¼šä½¿å¾—åƒåœ¾å›æ”¶çš„æ€»ä½“æˆæœ¬ä¸Šå‡ï¼Œé€ æˆç³»ç»Ÿååé‡çš„ä¸‹é™ã€‚ åå…­ã€åƒåœ¾å›æ”¶ç›¸å…³æ¦‚å¿µ 1.System.GC()çš„ç†è§£ åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡ System.GC)æˆ–è€… Runtime. getruntimeï¼ˆï¼‰.GCï¼ˆï¼‰çš„è°ƒç”¨ï¼Œä¼šæ˜¾å¼è§¦å‘Full GC,åŒæ—¶å¯¹è€å¹´ä»£å’Œæ–°ç”Ÿä»£è¿›è¡Œå›æ”¶ï¼Œå°è¯•é‡Šæ”¾è¢«ä¸¢å¼ƒå¯¹è±¡å ç”¨çš„å†…å­˜ã€‚ ç„¶è€Œ system.GCï¼ˆï¼‰è°ƒç”¨é™„å¸¦ä¸€ä¸ªå…è´£å£°æ˜ï¼Œæ— æ³•ä¿è¯å¯¹åƒåœ¾æ”¶é›†å™¨çš„è°ƒç”¨ã€‚ JVMå®ç°è€…å¯ä»¥é€šè¿‡ System.GCï¼ˆï¼‰è°ƒç”¨æ¥å†³å®šJVMçš„GCè¡Œä¸ºã€‚è€Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåƒåœ¾å›æ”¶åº”è¯¥æ˜¯è‡ªåŠ¨è¿›è¡Œçš„ï¼Œæ— é¡»æ‰‹åŠ¨è§¦å‘ï¼Œå¦åˆ™å°±å¤ªè¿‡äºéº»çƒ¦äº†ã€‚åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¦‚æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªæ€§èƒ½åŸºå‡†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œä¹‹é—´è°ƒç”¨System.GCï¼ˆï¼‰ã€‚ 2.å†…å­˜æº¢å‡ºä¸å†…å­˜æ³„æ¼ å†…å­˜æº¢å‡º (æ»¡äº†) å†…å­˜æº¢å‡ºç›¸å¯¹äºå†…å­˜æ³„æ¼æ¥è¯´ï¼Œå°½ç®¡æ›´å®¹æ˜“è¢«ç†è§£ï¼Œä½†æ˜¯åŒæ ·çš„ï¼Œå†…å­˜æº¢å‡ºä¹Ÿæ˜¯å¼•å‘ç¨‹åºå´©æºƒçš„ç½ªé­ç¥¸é¦–ä¹‹ä¸€ã€‚ ç”±äºGCä¸€ç›´åœ¨å‘å±•ï¼Œæ‰€æœ‰ä¸€èˆ¬æƒ…æ³ä¸‹ï¼Œé™¤éåº”ç”¨ç¨‹åºå ç”¨çš„å†…å­˜å¢é•¿é€Ÿåº¦éå¸¸å¿«ï¼Œé€ æˆåƒåœ¾å›æ”¶å·²ç»è·Ÿä¸ä¸Šå†…å­˜æ¶ˆè€—çš„é€Ÿåº¦ï¼Œå¦åˆ™ä¸å¤ªå®¹æ˜“å‡ºç°OOMçš„æƒ…å†µã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒGCä¼šè¿›è¡Œå„ç§å¹´é¾„æ®µçš„åƒåœ¾å›æ”¶ï¼Œå®åœ¨ä¸è¡Œäº†å°±æ”¾å¤§æ‹›ï¼Œæ¥ä¸€æ¬¡ç‹¬å å¼çš„Full GCæ“ä½œï¼Œè¿™æ—¶å€™ä¼šå›æ”¶å¤§é‡çš„å†…å­˜ï¼Œä¾›åº”ç”¨ç¨‹åºç»§ç»­ä½¿ç”¨ã€‚ javadocä¸­å¯¹ OutOfMemoryErrorçš„è§£é‡Šæ˜¯ï¼Œæ²¡æœ‰ç©ºé—²å†…å­˜ï¼Œå¹¶ä¸”åƒåœ¾æ”¶é›†å™¨ä¹Ÿæ— æ³•æä¾›æ›´å¤šå†…å­˜ã€‚ ãƒ»æ²¡æœ‰ç©ºé—²å†…å­˜çš„æƒ…å†µ:è¯´æ˜javaè™šæ‹Ÿæœºçš„å †å†…å­˜ä¸å¤Ÿ.åŸå› æœ‰äºŒï¼š (1)Javaè™šæ‹Ÿæœºçš„å †å†…å­˜è®¾ç½®ä¸å¤Ÿ æ¯”å¦‚:å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜:åœ°å¾ˆæœ‰å¯èƒ½å°±æ˜¯å †çš„å¤§å°ä¸åˆç†,æ¯”å¦‚æˆ‘ä»¬è¦å¤„ç†æ¯”è¾ƒå¯è§‚çš„æ•°æ®é‡,ä½†æ˜¯æ²¡æœ‰æ˜¾å¼æŒ‡å®šJVMå †å¤§å°æˆ–è€…æŒ‡å®šæ•°å€¼åå°.æˆ‘ä»¬å¯ä»¥é€šè¿‡å‚æ•°-Xmsã€Xmxæ¥è°ƒæ•´. (2)ä»£ç ä¸­åˆ›å»ºäº†å¤§é‡å¤§å¯¹è±¡,å¹¶ä¸”é•¿æ—¶é—´ä¸èƒ½è¢«åƒåœ¾æ”¶é›†å™¨æ”¶é›†(å­˜åœ¨è¢«å¼•ç”¨) så¯¹äºè€ç‰ˆæœ¬çš„ Oracle JDK,å› ä¸ºæ°¸ä¹…ä»£çš„å¤§å°æ˜¯æœ‰é™çš„,å¹¶ä¸”JVMå¯¹æ°¸ä¹…ä»£åƒåœ¾å›æ”¶(å¦‚,å¸¸é‡æ± å›æ”¶ã€å¸è½½ä¸å†éœ€è¦çš„ç±»å‹)éå¸¸ä¸ç§¯æ,æ‰€ä»¥å½“æˆ‘ä»¬ä¸æ–­æ·»åŠ æ–°ç±»å‹çš„æ—¶å€™,æ°¸ä¹…ä»£å‡ºç° OutOfMemoryErrorä¹Ÿéå¸¸å¤šè§,å°¤å…¶æ˜¯åœ¨è¿è¡Œæ—¶å­˜åœ¨å¤§é‡åŠ¨æ€ç±»å‹ç”Ÿæˆçš„åœºåˆ;ç±»ä¼¼ l ternå­—ç¬¦ä¸²ç¼“å­˜å ç”¨å¤ªå¤šç©ºé—´,ä¹Ÿä¼šå¯¼è‡´OOMé—®é¢˜.å¯¹åº”çš„å¼‚å¸¸ä¿¡æ¯,ä¼šæ ‡è®°å‡ºæ¥å’Œæ°¸ä¹…ä»£ç›¸å…³:&quot;java.lang.OutOfMemoryError: Permgen space&quot;. éšç€å…ƒæ•°æ®åŒºçš„å¼•å…¥,æ–¹æ³•åŒºå†…å­˜å·²ç»ä¸å†é‚£ä¹ˆçª˜è¿«,æ‰€ä»¥ç›¸åº”çš„OOMæœ‰æ‰€æ”¹è§‚,å‡ºç°OOM,å¼‚å¸¸ä¿¡æ¯åˆ™å˜æˆäº†:&quot;java.lang. OutOfMemoryError: Metaspace&quot;.ç›´æ¥å†…å­˜ä¸è¶³,ä¹Ÿä¼šå¯¼è‡´OOM. â€‹ è¿™é‡Œé¢éšå«ç€ä¸€å±‚æ„æ€æ˜¯,åœ¨æŠ›å‡º OutOfMemoryErrorä¹‹å‰,é€šå¸¸åƒåœ¾æ”¶é›†å™¨ä¼šè¢«è§¦å‘,å°½å…¶æ‰€èƒ½å»æ¸…ç†å‡ºç©ºé—´ã€‚ä¾‹å¦‚:åœ¨å¼•ç”¨æœºåˆ¶åˆ†æä¸­,æ¶‰åŠåˆ°JVMä¼šå»å°è¯•å›æ”¶è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ç­‰ã€‚åœ¨java.nio.BTts. reservememory()æ–¹æ³•ä¸­,æˆ‘ä»¬èƒ½æ¸…æ¥šçš„çœ‹åˆ°, System.GC()ä¼šè¢«è°ƒç”¨,ä»¥æ¸…ç†ç©ºé—´. â€‹ å½“ç„¶,ä¹Ÿä¸æ˜¯åœ¨ä»»ä½•æƒ…å†µä¸‹åƒåœ¾æ”¶é›†å™¨éƒ½ä¼šè¢«è§¦å‘çš„ã€‚æ¯”å¦‚,æˆ‘ä»¬å»åˆ†é…ä¸€ä¸ªè¶…å¤§å¯¹è±¡,ç±»ä¼¼ä¸€ä¸ªè¶…å¤§æ•°ç»„è¶…è¿‡å †çš„æœ€å¤§å€¼,JVMå¯ä»¥åˆ¤æ–­å‡ºåƒåœ¾æ”¶é›†å¹¶ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜,æ‰€ä»¥ç›´æ¥æŠ›å‡º OutOfMemoryError. å†…å­˜æ³„æ¼ï¼ˆä¸èƒ½å›æ”¶ï¼‰ â€‹ ä¹Ÿç§°ä½œâ€œå­˜å‚¨æ¸—æ¼â€ã€‚ä¸¥æ ¼æ¥è¯´ï¼Œåªæœ‰å¯¹è±¡ä¸ä¼šå†è¢«ç¨‹åºç”¨åˆ°äº†ï¼Œä½†æ˜¯GCåˆä¸èƒ½å›æ”¶ä»–ä»¬çš„æƒ…å†µï¼Œæ‰å«å†…å­˜æ³„æ¼ã€‚ä½†å®é™…æƒ…å†µå¾ˆå¤šæ—¶å€™ä¸€äº›ä¸å¤ªå¥½çš„å®è·µï¼ˆæˆ–ç–å¿½ï¼‰ä¼šå¯¼è‡´å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå˜å¾—å¾ˆé•¿ç”šè‡³å¯¼è‡´OOM,ä¹Ÿå¯ä»¥å«åšå®½æ³›æ„ä¹‰ä¸Šçš„â€œå†…å­˜æ³„æ¼â€ã€‚ â€‹ å°½ç®¡å†…å­˜æ³„æ¼å¹¶ä¸ä¼šç«‹åˆ»å¼•èµ·ç¨‹åºå´©æºƒï¼Œä½†æ˜¯ä¸€æ—¦å‘ç”Ÿå†…å­˜æ³„æ¼ï¼Œç¨‹åºä¸­çš„å¯ç”¨å†…å­˜å°±ä¼šè¢«é€æ­¥èš•é£Ÿï¼Œç›´è‡³è€—å°½æ‰€æœ‰å†…å­˜ï¼Œæœ€ç»ˆå‡ºç° OutOfMemoryå¼‚å¸¸ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„å­˜å‚¨ç©ºé—´å¹¶ä¸æ˜¯æŒ‡ç‰©ç†å†…å­˜ï¼Œè€Œæ˜¯æŒ‡è™šæ‹Ÿå†…å­˜å¤§å°ï¼Œè¿™ä¸ªè™šæ‹Ÿå†…å­˜å¤§å°å–å†³äºç£ç›˜äº¤æ¢åŒºè®¾å®šçš„å¤§å°ã€‚ ä¸¾ä¾‹ 1ã€å•ä¾‹æ¨¡å¼ å•ä¾‹çš„ç”Ÿå‘½å‘¨æœŸå’Œåº”ç”¨ç¨‹åºæ˜¯ä¸€æ ·é•¿çš„ï¼Œæ‰€ä»¥å•ä¾‹ç¨‹åºä¸­ï¼Œå¦‚æœæŒæœ‰å¯¹å¤–éƒ¨å¯¹è±¡çš„å¼•ç”¨çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤–éƒ¨å¯¹è±¡æ˜¯ä¸èƒ½è¢«å›æ”¶çš„ï¼Œåˆ™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼çš„äº§ç”Ÿã€‚ 2ã€ä¸€äº›æä¾›closeçš„èµ„æºæœªå…³é—­å¯¼è‡´å†…å­˜æ³„æ¼ æ•°æ®åº“è¿æ¥( datasource. getconnectionï¼ˆï¼‰),ç½‘ç»œè¿æ¥( socket)å’Œioè¿æ¥å¿…é¡»æ‰‹åŠ¨close,å¦åˆ™æ˜¯ä¸èƒ½è¢«å›æ”¶çš„ã€‚ 3.Stop The World Stop-the-World,ç®€ç§° STW,æŒ‡çš„æ˜¯GCäº‹ä»¶å‘ç”Ÿè¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿåº”ç”¨ç¨‹åºçš„åœé¡¿ã€‚åœé¡¿äº§ç”Ÿæ—¶æ•´ä¸ªåº”ç”¨ç¨‹åºçº¿ç¨‹éƒ½ä¼šè¢«æš‚åœï¼Œæ²¡æœ‰ä»»ä½•å“åº”ï¼Œæœ‰ç‚¹åƒå¡æ­»çš„æ„Ÿè§‰ï¼Œè¿™ä¸ªåœé¡¿ç§°ä¸ºSTW. å¯è¾¾æ€§åˆ†æç®—æ³•ä¸­æšä¸¾æ ¹èŠ‚ç‚¹( GC Roots)ä¼šå¯¼è‡´æ‰€æœ‰Javaæ‰§è¡Œçº¿ç¨‹åœé¡¿ã€‚åˆ†æå·¥ä½œå¿…é¡»åœ¨ä¸€ä¸ªèƒ½ç¡®ä¿ä¸€è‡´æ€§çš„å¿«ç…§ä¸­è¿›è¡Œã€‚ä¸€è‡´æ€§æŒ‡æ•´ä¸ªåˆ†ææœŸé—´æ•´ä¸ªæ‰§è¡Œç³»ç»Ÿçœ‹èµ·æ¥åƒè¢«å†»ç»“åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šå¦‚æœå‡ºç°åˆ†æè¿‡ç¨‹ä¸­å¯¹è±¡å¼•ç”¨å…³ç³»è¿˜åœ¨ä¸æ–­å˜åŒ–ï¼Œåˆ™åˆ†æç»“æœçš„å‡†ç¡®æ€§æ— æ³•ä¿è¯ã€‚ è¢«STWä¸­æ–­çš„åº”ç”¨ç¨‹åºçº¿ç¨‹ä¼šåœ¨å®ŒæˆGCä¹‹åæ¢å¤ï¼Œé¢‘ç¹ä¸­æ–­ä¼šè®©ç”¨æˆ·æ„Ÿè§‰åƒæ˜¯ç½‘é€Ÿä¸å¿«é€ æˆç”µå½±å¡å¸¦ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å‡å°‘STWçš„å‘ç”Ÿ STWäº‹ä»¶å’Œé‡‡ç”¨å“ªæ¬¾GCæ— å…³ï¼Œæ‰€æœ‰çš„GCéƒ½æœ‰è¿™ä¸ªäº‹ä»¶ã€‚å“ªæ€•æ˜¯G1ä¹Ÿä¸èƒ½å®Œå…¨é¿å…Stop-the-worldæƒ…å†µå‘ç”Ÿï¼Œåªèƒ½è¯´åƒåœ¾å›æ”¶å™¨è¶Šæ¥è¶Šä¼˜ç§€ï¼Œå›æ”¶æ•ˆç‡è¶Šæ¥è¶Šé«˜ï¼Œå°½å¯èƒ½åœ°ç¼©çŸ­äº†æš‚åœæ—¶é—´ã€‚ STWæ˜¯JVMåœ¨åå°è‡ªåŠ¨å‘èµ·å’Œè‡ªåŠ¨å®Œæˆçš„ã€‚åœ¨ç”¨æˆ·ä¸å¯è§çš„æƒ…å†µä¸‹ï¼ŒæŠŠç”¨æˆ·æ­£å¸¸çš„å·¥ä½œçº¿ç¨‹å…¨éƒ¨åœæ‰ã€‚ å¼€å‘ä¸­ä¸è¦ç”¨ system.GC() ä¼šå¯¼è‡´Stop-the- worldçš„å‘ç”Ÿã€‚ 4.åƒåœ¾å›æ”¶çš„å¹¶å‘ä¸å¹¶è¡Œ å¹¶å‘å’Œå¹¶è¡Œï¼Œåœ¨è°ˆè®ºåƒåœ¾æ”¶é›†å™¨çš„ä¸Šä¸‹æ–‡è¯­å¢ƒä¸­ï¼Œå®ƒä»¬å¯ä»¥è§£é‡Šå¦‚ä¸‹ï¼š **å¹¶è¡Œ( Parallel)ğŸ˜—*æŒ‡å¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œä½†æ­¤æ—¶ç”¨æˆ·çº¿ç¨‹ä»å¤„äºç­‰å¾…çŠ¶æ€ã€‚å¦‚ Pardewã€ Parallel Scavengeã€ Parallel Old **ä¸²è¡Œ( Serial)ğŸ˜—*ç›¸è¾ƒäºå¹¶è¡Œçš„æ¦‚å¿µï¼Œå•çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœå†…å­˜ä¸å¤Ÿï¼Œåˆ™ç¨‹åºæš‚åœï¼Œå¯åŠ¨JVMåƒåœ¾å›æ”¶å™¨è¿›è¡Œåƒåœ¾å›æ”¶ã€‚å›æ”¶å®Œï¼Œå†å¯åŠ¨ç¨‹åºçš„çº¿ç¨‹ã€‚ å¹¶å‘å’Œå¹¶è¡Œ,åœ¨è°ˆè®ºåƒåœ¾æ”¶é›†å™¨çš„ä¸Šä¸‹æ–‡è¯­å¢ƒä¸­,å®ƒä»¬å¯ä»¥è§£é‡Šå¦‚ä¸‹: å¹¶å‘( Concurrent):æŒ‡ç”¨æˆ·çº¿ç¨‹ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹åŒæ—¶æ‰§è¡Œ(ä½†ä¸ä¸€å®šæ˜¯å¹¶è¡Œçš„,å¯èƒ½ä¼šäº¤æ›¿æ‰§è¡Œ),åƒåœ¾å›æ”¶çº¿ç¨‹åœ¨æ‰§è¡Œæ—¶ä¸ä¼šåœé¡¿ç”¨æˆ·ç¨‹åºçš„è¿è¡Œã€‚ç”¨æˆ·ç¨‹åºåœ¨ç»§ç»­è¿è¡Œ,è€Œåƒåœ¾æ”¶é›†ç¨‹åºçº¿ç¨‹è¿è¡Œäºå¦ãƒ¼ä¸ªCPUä¸Šï¼Œå¦‚:CMSã€G1ã€‚ 5.å®‰å…¨ç‚¹ä¸å®‰å…¨åŒºåŸŸ å®‰å…¨ç‚¹ ç¨‹åºæ‰§è¡Œæ—¶å¹¶éåœ¨æ‰€æœ‰åœ°æ–¹éƒ½èƒ½åœé¡¿ä¸‹æ¥å¼€å§‹GC,åªæœ‰åœ¨ç‰¹å®šçš„ä½ç½®æ‰èƒ½åœé¡¿ä¸‹æ¥å¼€å§‹GC,è¿™äº›ä½ç½®ç§°ä¸ºâ€œå®‰å…¨ç‚¹( Safepoint)â€ã€‚ Safe Pointlçš„é€‰æ‹©å¾ˆé‡è¦ï¼Œå¦‚æœå¤ªå°‘å¯èƒ½å¯¼è‡´GCç­‰å¾…çš„æ—¶é—´å¤ªé•¿ï¼Œå¦‚æœå¤ªé¢‘ç¹å¯èƒ½å¯¼è‡´è¿è¡Œæ—¶çš„æ€§èƒ½é—®é¢˜ã€‚å¤§éƒ¨åˆ†æŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´éƒ½éå¸¸çŸ­æš‚é€šå¸¸ä¼šæ ¹æ®â€œæ˜¯å¦å…·æœ‰è®©ç¨‹åºé•¿æ—¶é—´æ‰§è¡Œçš„ç‰¹å¾â€ä¸ºæ ‡å‡†ã€‚æ¯”å¦‚ï¼šé€‰æ‹©äº›æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„æŒ‡ä»¤ä½œä¸º Safe Point,å¦‚æ–¹æ³•è°ƒç”¨ã€å¾ªç¯è·³è½¬å’Œå¼‚å¸¸è·³è½¬ç­‰ã€‚ å¦‚ä½•åœ¨GCå‘ç”Ÿæ—¶ï¼Œæ£€æŸ»æ‰€æœ‰çº¿ç¨‹éƒ½è·‘åˆ°æœ€è¿‘çš„å®‰å…¨ç‚¹åœé¡¿ä¸‹æ¥å‘¢ï¼Ÿ æŠ¢å…ˆå¼ä¸­æ–­ï¼šï¼ˆç›®å‰æ²¡æœ‰è™šæ‹Ÿæœºé‡‡ç”¨äº†) é¦–å…ˆä¸­æ–­æ‰€æœ‰çº¿ç¨‹ã€‚å¦‚æœè¿˜æœ‰çº¿ç¨‹ä¸åœ¨å®‰å…¨ç‚¹ï¼Œå°±æ¢å¤çº¿ç¨‹ï¼Œè®©çº¿ç¨‹è·‘åˆ°å®‰å…¨ç‚¹ã€‚ ä¸»åŠ¨å¼ä¸­æ–­ è®¾ç½®ä¸€ä¸ªä¸­æ–­æ ‡å¿—ï¼Œå„ä¸ªçº¿ç¨‹è¿è¡Œåˆ° Safe Pointçš„æ—¶å€™ä¸»åŠ¨è½®è¯¢è¿™ä¸ªæ ‡å¿—ï¼Œå¦‚æœä¸­æ–­æ ‡å¿—ä¸ºçœŸï¼Œåˆ™å°†è‡ªå·±è¿›è¡Œä¸­æ–­æŒ‚èµ·ã€‚ å®‰å…¨åŒºåŸŸ Safepointæœºåˆ¶ä¿è¯äº†ç¨‹åºæ‰§è¡Œæ—¶ï¼Œåœ¨ä¸å¤ªé•¿çš„æ—¶é—´å†…å°±ä¼šé‡åˆ°å¯è¿›å…¥GCçš„ Safepointã€‚ä½†æ˜¯ï¼Œç¨‹åºâ€œä¸æ‰§è¡Œâ€çš„æ—¶å€™å‘¢ï¼Ÿä¾‹å¦‚çº¿ç¨‹å¤„äºSleepçŠ¶æ€æˆ–BlockedçŠ¶æ€ï¼Œè¿™æ—¶å€™çº¿ç¨‹æ— æ³•å“åº”JVMçš„ä¸­æ–­è¯·æ±‚ï¼Œâ€œèµ°â€åˆ°å®‰å…¨ç‚¹å»ä¸­æ–­æŒ‚èµ·ï¼ŒJVMä¹Ÿä¸å¤ªå¯èƒ½ç­‰å¾…çº¿ç¨‹è¢«å”¤é†’ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œå°±éœ€è¦å®‰å…¨åŒºåŸŸ( Safe Region)æ¥è§£å†³ã€‚ å®‰å…¨åŒºåŸŸæ˜¯æŒ‡åœ¨ä¸€æ®µä»£ç ç‰‡æ®µä¸­ï¼Œå¯¹è±¡çš„å¼•ç”¨å…³ç³»ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œåœ¨è¿™ä¸ªåŒºåŸŸä¸­çš„ä»»ä½•ä½ç½®å¼€å§‹GCéƒ½æ˜¯å®‰å…¨çš„ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠ Safe Regionçœ‹åšæ˜¯è¢«æ‰©å±•äº†çš„ Safepointã€‚ å®é™…æ‰§è¡Œæ—¶ï¼š 1ã€å½“çº¿ç¨‹è¿è¡Œåˆ° Safe Regionçš„ä»£ç æ—¶ï¼Œé¦–å…ˆæ ‡è¯†å·²ç»è¿›å…¥äº† Safe Region,å¦‚æœè¿™æ®µæ—¶é—´å†…å‘ç”ŸGC,JVMä¼šå¿½ç•¥æ ‡è¯†ä¸º Safe RegionçŠ¶æ€çš„çº¿ç¨‹ 2ã€å½“çº¿ç¨‹å³å°†ç¦»å¼€ Safe Regionæ—¶ï¼Œä¼šæ£€æŸ»JVMæ˜¯å¦å·²ç»å®ŒæˆGC,å¦‚æœå®Œæˆäº†ï¼Œåˆ™ç»§ç»­è¿è¡Œï¼Œå¦åˆ™çº¿ç¨‹å¿…é¡»ç­‰å¾…ç›´åˆ°æ”¶åˆ°å¯ä»¥å®‰å…¨ç¦»å¼€ Safe Regiongçš„ä¿¡å·ä¸ºæ­¢ï¼› 6.å¼•ç”¨ â€‹ æˆ‘ä»¬å¸Œæœ›èƒ½æè¿°è¿™æ ·ä¸€ç±»å¯¹è±¡ï¼šå½“å†…å­˜ç©ºé—´è¿˜è¶³å¤Ÿæ—¶ï¼Œåˆ™èƒ½ä¿ç•™åœ¨å†…å­˜ä¸­ï¼›å¦‚æœå†…å­˜ç©ºé—´åœ¨è¿›è¡Œåƒåœ¾æ”¶é›†åè¿˜æ˜¯å¾ˆç´§å¼ ï¼Œåˆ™å¯ä»¥æŠ›å¼ƒè¿™äº›å¯¹è±¡ã€‚ ã€æ—¢åé—¨åˆéå¸¸é«˜é¢‘çš„é¢è¯•é¢˜ã€‘å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå…·ä½“ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ â€‹ åœ¨JDK1.2ç‰ˆä¹‹åï¼ŒJavaå¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸ºå¼ºå¼•ç”¨ï¼ˆ Strong Reference)ã€è½¯å¼•ç”¨( Soft Reference)ã€å¼±å¼•ç”¨( Weak Reference)å’Œè™šå¼•ç”¨(Phantom Reference)4ç§ï¼Œè¿™4ç§å¼•ç”¨å¼ºåº¦ä¾æ¬¡é€æ¸å‡å¼±ã€‚ â€‹ é™¤å¼ºå¼•ç”¨å¤–ï¼Œå…¶ä»–3ç§å¼•ç”¨å‡å¯ä»¥åœ¨java.lang. refåŒ…ä¸­æ‰¾åˆ°å®ƒä»¬çš„èº«å½±ã€‚å¦‚ä¸‹å›¾ï¼Œæ˜¾ç¤ºäº†è¿™3ç§å¼•ç”¨ç±»å‹å¯¹åº”çš„ç±»ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨å®ƒä»¬ã€‚ Referenceå­ç±»ä¸­åªæœ‰ç»ˆç»“å™¨å¼•ç”¨æ˜¯åŒ…å†…å¯è§çš„ï¼Œå…¶ä»–3ç§å¼•ç”¨ç±»å‹å‡ä¸ºpublicå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨ å¼ºå¼•ç”¨( StrongReference)ğŸ˜—*ã€å¼•ç”¨åœ¨å°±åˆ«ç®¡æˆ‘ã€‘**æœ€ä¼ ç»Ÿçš„â€œå¼•ç”¨â€çš„å®šä¹‰ï¼Œæ˜¯æŒ‡åœ¨ç¨‹åºä»£ç ä¹‹ä¸­æ™®éå­˜åœ¨çš„å¼•ç”¨èµ‹å€¼ï¼Œå³ç±»ä¼¼â€œ Object obj= new Objectï¼ˆï¼‰â€è¿™ç§å¼•ç”¨å…³ç³»ã€‚æ— è®ºä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦å¼ºå¼•ç”¨å…³ç³»è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨å°±æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚ è½¯å¼•ç”¨( SoftReference)ğŸ˜—*ã€å¿«æ»¡äº†å›æ”¶æˆ‘ã€‘**åœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºä¹‹å‰ï¼Œå°†ä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—å…¥å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ã€‚å¦‚æœè¿™æ¬¡å›æ”¶åè¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚ å¼±å¼•ç”¨( WeakReference)ğŸ˜—*ã€çœ‹åˆ°å°±å›æ”¶æˆ‘ã€‘**è¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†ä¹‹å‰ã€‚å½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œæ—¶ï¼Œæ— è®ºå†…å­˜ç©ºé—´æ˜¯å¦è¶³å¤Ÿ,éƒ½ä¼šå›æ”¶æ‰è¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡. è™šå¼•ç”¨( PhantomReference)ğŸ˜—*ã€ä¸å½±å“ä½ ã€‘**ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨,å®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“,ä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥è·å¾—ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹.ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ å¼ºå¼•ç”¨ åœ¨Javaç¨‹åºä¸­ï¼Œæœ€å¸¸è§çš„å¼•ç”¨ç±»å‹æ˜¯å¼ºå¼•ç”¨(æ™®é€šç³»ç»Ÿ99%ä»¥ä¸Šéƒ½æ˜¯å¼ºå¼•ç”¨)ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„æ™®é€šå¯¹è±¡å¼•ç”¨ï¼Œä¹Ÿæ˜¯é»˜è®¤çš„å¼•ç”¨ç±»å‹ã€‚ å½“åœ¨JAVAè¯­è¨€ä¸­ä½¿ç”¨newæ“ä½œç¬¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œè¿™ä¸ªå˜é‡å°±æˆä¸ºæŒ‡å‘è¯¥å¯¹è±¡çš„ä¸€ä¸ªå¼ºå¼•ç”¨ã€‚ å¼ºå¼•ç”¨çš„å¯¹è±¡æ˜¯å¯è§¦åŠçš„ï¼Œåƒåœ¾æ”¶é›†å™¨å°±æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ å¯¹äºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å¼•ç”¨å…³ç³»ï¼Œåªè¦è¶…è¿‡äº†å¼•ç”¨çš„ä½œç”¨åŸŸæˆ–è€…æ˜¾å¼åœ°å°†ç›¸åº”ï¼ˆå¼ºï¼‰å¼•ç”¨èµ‹å€¼ä¸ºnull,å°±æ˜¯å¯ä»¥å½“åšåƒåœ¾è¢«æ”¶é›†äº†ï¼Œå½“ç„¶å…·ä½“å›æ”¶æ—¶æœºè¿˜æ˜¯è¦çœ‹åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚ ç›¸å¯¹çš„ï¼Œè½¯å¼•ç”¨ã€å¼±å¼•ç”¨å’Œè™šå¼•ç”¨çš„å¯¹è±¡æ˜¯è½¯å¯è§¦åŠã€å¼±å¯è§¦åŠå’Œè™šå¯è§¦åŠçš„ï¼Œåœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼Œéƒ½æ˜¯å¯ä»¥è¢«å›æ”¶çš„ã€‚æ‰€ä»¥ï¼Œå¼ºå¼•ç”¨æ˜¯é€ æˆJavaå†…å­˜æ³„æ¼çš„ä¸»è¦åŸå› ä¹‹ è½¯å¼•ç”¨ è½¯å¼•ç”¨æ˜¯ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ï¼Œä½†éå¿…éœ€çš„å¯¹è±¡ã€‚åªè¢«è½¯å¼•ç”¨å…³è”ç€çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸å‰ï¼Œä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—è¿›å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ï¼Œå¦‚æœè¿™æ¬¡å›æ”¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œã‚ªä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚ è½¯å¼•ç”¨é€šå¸¸ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ã€‚æ¯”å¦‚ï¼šé«˜é€Ÿç¼“å­˜å°±æœ‰ç”¨åˆ°è½¯å¼•ç”¨ã€‚å¦‚æœè¿˜æœ‰ç©ºé—²å†…å­˜ï¼Œå°±å¯ä»¥æš‚æ—¶ä¿ç•™ç¼“å­˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶æ¸…ç†æ‰ï¼Œè¿™æ ·å°±ä¿è¯äº†ä½¿ç”¨ç¼“å­˜çš„åŒæ—¶ï¼Œä¸ä¼šè€—å°½å†…å­˜ã€‚ åƒåœ¾å›æ”¶å™¨åœ¨æŸä¸ªæ—¶åˆ»å†³å®šå›æ”¶è½¯å¯è¾¾çš„å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šæ¸…ç†è½¯å¼•ç”¨ï¼Œå¹¶å¯é€‰åœ°æŠŠå¼•ç”¨å­˜æ”¾åˆ°ä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—( Reference Queue)ã€‚ ç±»ä¼¼å¼±å¼•ç”¨ï¼Œåªä¸è¿‡Javaè™šæ‹Ÿæœºä¼šå°½é‡è®©è½¯å¼•ç”¨çš„å­˜æ´»æ—¶é—´é•¿ä¸€äº›ï¼Œè¿«ä¸å¾—å·²æ‰æ¸…ç†ã€‚ å¼±å¼•ç”¨ å¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°é‚£äº›éå¿…éœ€å¯¹è±¡ï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¸ºæ­¢ã€‚åœ¨ç³»ç»ŸGCæ—¶ï¼Œåªè¦å‘ç°å¼±å¼•ç”¨ï¼Œä¸ç®¡ç³»ç»Ÿå †ç©ºé—´ä½¿ç”¨æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ ä½†æ˜¯ï¼Œç”±äºåƒåœ¾å›æ”¶å™¨çš„çº¿ç¨‹é€šå¸¸ä¼˜å…ˆçº§å¾ˆä½ï¼Œå› æ­¤ï¼Œå¹¶ä¸ä¸€å®šèƒ½å¾ˆå¿«åœ°å‘ç°æŒæœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼±å¼•ç”¨å¯¹è±¡å¯ä»¥å­˜åœ¨è¾ƒé•¿çš„æ—¶é—´ã€‚ å¼±å¼•ç”¨å’Œè½¯å¼•ç”¨ä¸€æ ·ï¼Œåœ¨æ„é€ å¼±å¼•ç”¨æ—¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼Œå½“å¼±å¼•ç”¨å¯¹è±¡è¢«å›æ”¶æ—¶ï¼Œå°±ä¼šåŠ å…¥æŒ‡å®šçš„å¼•ç”¨é˜Ÿåˆ—ï¼Œé€šè¿‡è¿™ä¸ªé˜Ÿåˆ—å¯ä»¥è·Ÿè¸ªå¯¹è±¡çš„å›æ”¶æƒ…å†µã€‚ è½¯å¼•ç”¨ã€å¼±å¼•ç”¨éƒ½éå¸¸é€‚åˆæ¥ä¿å­˜é‚£äº›å¯æœ‰å¯æ— çš„ç¼“å­˜æ•°æ®ã€‚å¦‚æœè¿™ä¹ˆåšï¼Œå½“ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶ï¼Œè¿™äº›ç¼“å­˜æ•°æ®ä¼šè¢«å›æ”¶ï¼Œä¸ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºã€‚è€Œå½“å†…å­˜èµ„æºå……è¶³æ—¶ï¼Œè¿™äº›ç¼“å­˜æ•°æ®åˆå¯ä»¥å­˜åœ¨ç›¸å½“é•¿çš„æ—¶é—´ï¼Œä»è€Œèµ·åˆ°åŠ é€Ÿç³»ç»Ÿçš„ä½œç”¨ã€‚ å¼±å¼•ç”¨å¯¹è±¡ä¸è½¯å¼•ç”¨å¯¹è±¡çš„æœ€å¤§ä¸åŒå°±åœ¨äºï¼Œå½“GCåœ¨è¿›è¡Œå›æ”¶æ—¶ï¼Œéœ€è¦é€šè¿‡ç®—æ³•æ£€æŸ¥æ˜¯å¦å›æ”¶è½¯å¼•ç”¨å¯¹è±¡ï¼Œè€Œå¯¹äºå¼±å¼•ç”¨å¯¹è±¡ï¼ŒGCæ€»æ˜¯è¿›è¡Œå›æ”¶ã€‚å¼±å¼•ç”¨å¯¹è±¡æ›´å®¹æ˜“ã€æ›´å¿«è¢«GCå›æ”¶ã€‚é¢è¯•é¢˜ï¼šä½ å¼€å‘ä¸­ä½¿ç”¨è¿‡ WeakHashMapå—ï¼Ÿ è™šå¼•ç”¨ â€‹ ä¹Ÿç§°ä¸ºâ€œå¹½çµå¼•ç”¨â€æˆ–è€…â€œå¹»å½±å¼•ç”¨â€ï¼Œæ˜¯æ‰€æœ‰å¼•ç”¨ç±»å‹ä¸­æœ€å¼±çš„ä¸€ä¸ªã€‚ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå†³å®šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå’Œæ²¡æœ‰å¼•ç”¨å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œéšæ—¶éƒ½å¯èƒ½è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚å®ƒä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥è·å–è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚å½“è¯•å›¾é€šè¿‡è™šå¼•ç”¨çš„getï¼ˆï¼‰æ–¹æ³•å–å¾—å¯¹è±¡æ—¶ï¼Œæ€»æ˜¯nullã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„åœ¨äºè·Ÿè¸ªåƒåœ¾å›æ”¶è¿‡ç¨‹ã€‚æ¯”å¦‚ï¼šèƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚ â€‹ è™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—ä¸€èµ·ä½¿ç”¨ã€‚è™šå¼•ç”¨åœ¨åˆ›å»ºæ—¶å¿…é¡»æä¾›ä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ä½œä¸ºå‚æ•°ã€‚å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡åï¼Œå°†è¿™ä¸ªè™šå¼•ç”¨åŠ å…¥å¼•ç”¨é˜Ÿåˆ—ï¼Œä»¥é€šçŸ¥åº”ç”¨ç¨‹åºå¯¹è±¡çš„å›æ”¶æƒ…å†µã€‚ç”±äºè™šå¼•ç”¨å¯ä»¥è·Ÿè¸ªå¯¹è±¡çš„å›æ”¶æ—¶é—´ï¼Œå› æ­¤ï¼Œä¹Ÿå¯ä»¥å°†ä¸€äº›èµ„æºé‡Šæ”¾æ“ä½œæ”¾ç½®åœ¨è™šå¼•ç”¨ä¸­æ‰§è¡Œå’Œè®°å½•ã€‚åœ¨JDK1.2ç‰ˆä¹‹åæä¾›äº† PhantomReferenceç±»æ¥å®ç°è™šå¼•ç”¨ã€‚ ç»ˆç»“å™¨å¼•ç”¨ â€‹ å®ƒç”¨ä»¥å®ç°å¯¹è±¡çš„finalize()æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºç»ˆç»“å™¨å¼•ç”¨ã€‚æ— éœ€æ‰‹åŠ¨ç¼–ç ï¼Œå…¶å†…éƒ¨é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ã€‚åœ¨GCæ—¶ï¼Œç»ˆç»“å™¨å¼•ç”¨å…¥é˜Ÿã€‚ç”±Finalizerçº¿ç¨‹é€šè¿‡ç»ˆç»“å™¨å¼•ç”¨æ‰¾åˆ°è¢«å¼•ç”¨å¯¹è±¡å¹¶è°ƒç”¨å®ƒçš„finalize()æ–¹æ³•ï¼Œç¬¬äºŒæ¬¡GCæ—¶æ‰èƒ½å›æ”¶è¢«å¼•ç”¨å¯¹è±¡ã€‚ åä¸ƒã€åƒåœ¾å›æ”¶å™¨ 1.GCåˆ†ç±» â€‹ åƒåœ¾æ”¶é›†å™¨æ²¡æœ‰åœ¨è§„èŒƒä¸­è¿›è¡Œè¿‡å¤šçš„è§„å®šï¼Œå¯ä»¥ç”±ä¸åŒçš„å‚å•†ã€ä¸åŒç‰ˆæœ¬çš„JVMæ¥å®ç°ã€‚ç”±äºJDKçš„ç‰ˆæœ¬å¤„äºé«˜é€Ÿé€ä»£è¿‡ç¨‹ä¸­ï¼Œå› æ­¤Javaå‘å±•è‡³ä»Šå·²ç»è¡ç”Ÿäº†ä¼—å¤šçš„GCç‰ˆæœ¬ã€‚ä»ä¸åŒè§’åº¦åˆ†æåƒåœ¾æ”¶é›†å™¨ï¼Œå¯ä»¥å°†GCåˆ†ä¸ºä¸åŒçš„ç±»å‹ã€‚ â€‹ æŒ‰çº¿ç¨‹æ•°åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºä¸²è¡Œåƒåœ¾å›æ”¶å™¨å’Œå¹¶è¡Œåƒåœ¾å›æ”¶å™¨ã€‚ â€‹ ä¸²è¡Œå›æ”¶æŒ‡çš„æ˜¯åœ¨åŒä¸€æ—¶é—´æ®µå†…åªå…è®¸æœ‰ä¸€ä¸ªCPUç”¨äºæ‰§è¡Œåƒåœ¾å›æ”¶æ“ä½œï¼Œæ­¤æ—¶å·¥ä½œçº¿ç¨‹è¢«æš‚åœï¼Œç›´è‡³åƒåœ¾æ”¶é›†å·¥ä½œç»“æŸã€‚åœ¨è¯¸å¦‚å•CPUå¤„ç†å™¨æˆ–è€…è¾ƒå°çš„åº”ç”¨å†…å­˜ç­‰ç¡¬ä»¶å¹³å°ä¸æ˜¯ç‰¹åˆ«ä¼˜è¶Šçš„åœºåˆï¼Œä¸²è¡Œå›æ”¶å™¨çš„æ€§èƒ½è¡¨ç°å¯ä»¥è¶…è¿‡å¹¶è¡Œå›æ”¶å™¨å’Œå¹¶å‘å›æ”¶å™¨ã€‚æ‰€ä»¥ï¼Œä¸²è¡Œå›æ”¶é»˜è®¤è¢«åº”ç”¨åœ¨å®¢æˆ·ç«¯çš„Clientæ¨¡å¼ä¸‹çš„JVMä¸­åœ¨å¹¶å‘èƒ½åŠ›æ¯”è¾ƒå¼ºçš„CPUä¸Šï¼Œå¹¶è¡Œå›æ”¶å™¨äº§ç”Ÿçš„åœé¡¿æ—¶é—´è¦çŸ­äºä¸²è¡Œå›æ”¶å™¨ã€‚ â€‹ å’Œä¸²è¡Œå›æ”¶ç›¸åï¼Œå¹¶è¡Œæ”¶é›†å¯ä»¥è¿ç”¨å¤šä¸ªCPUåŒæ—¶æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œå› æ­¤æå‡äº†åº”ç”¨çš„ååé‡ï¼Œä¸è¿‡å¹¶è¡Œå›æ”¶ä»ç„¶ä¸ä¸²è¡Œå›æ”¶ä¸€æ ·ï¼Œé‡‡ç”¨ç‹¬å å¼ï¼Œä½¿ç”¨äº†â€œStop-the- worldâ€æœºåˆ¶ã€‚ â€‹ **æŒ‰ç…§å·¥ä½œæ¨¡å¼åˆ†ï¼Œ**å¯ä»¥åˆ†ä¸ºå¹¶å‘å¼åƒåœ¾å›æ”¶å™¨å’Œç‹¬å å¼åƒåœ¾å›æ”¶å™¨ã€‚ â€‹ å¹¶å‘å¼åƒåœ¾å›æ”¶å™¨ä¸åº”ç”¨ç¨‹åºçº¿ç¨‹äº¤æ›¿å·¥ä½œï¼Œä»¥å°½å¯èƒ½å‡å°‘åº”ç”¨ç¨‹åºçš„åœé¡¿æ—¶é—´ã€‚ç‹¬å å¼åƒåœ¾å›æ”¶å™¨( Stop the world)ä¸€æ—¦è¿è¡Œï¼Œå°±åœæ­¢åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹ï¼Œç›´åˆ°åƒåœ¾å›æ”¶è¿‡ç¨‹å®Œå…¨ç»“æŸ â€‹ æŒ‰ç¢ç‰‡å¤„ç†æ–¹å¼åˆ†ï¼Œå¯åˆ†ä¸ºå‹ç¼©å¼åƒåœ¾å›æ”¶å™¨å’Œéå‹ç¼©å¼åƒåœ¾å›æ”¶å™¨ â€‹ å‹ç¼©å¼åƒåœ¾å›æ”¶å™¨ä¼šåœ¨å›æ”¶å®Œæˆåï¼Œå¯¹å­˜æ´»å¯¹è±¡è¿›è¡Œå‹ç¼©æ•´ç†ï¼Œæ¶ˆé™¤å›æ”¶åçš„ç¢ç‰‡ã€‚éå‹ç¼©å¼çš„åƒåœ¾å›æ”¶å™¨ä¸è¿›è¡Œè¿™æ­¥æ“ä½œã€‚ â€‹ æŒ‰å·¥ä½œçš„å†…å­˜åŒºé—´åˆ†ï¼Œåˆå¯åˆ†ä¸ºå¹´è½»ä»£åƒåœ¾å›æ”¶å™¨å’Œè€å¹´ä»£åƒåœ¾å›æ”¶å™¨ã€‚ 2.GCæ€§èƒ½è¯„ä¼°æŒ‡æ ‡ ååé‡ï¼šè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´å æ€»è¿è¡Œæ—¶é—´çš„æ¯”ä¾‹(æ€»è¿è¡Œæ—¶é—´ï¼šç¨‹åºçš„è¿è¡Œæ—¶é—´åå†…å­˜å›æ”¶çš„æ—¶é—´) åƒåœ¾æ”¶é›†å¼€é”€ï¼šååé‡çš„è¡¥æ•°ï¼Œåƒåœ¾æ”¶é›†æ‰€ç”¨æ—¶é—´ä¸æ€»è¿è¡Œæ—¶é—´çš„æ¯”ä¾‹ æš‚åœæ—¶é—´ï¼šæ‰§è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œç¨‹åºçš„å·¥ä½œçº¿ç¨‹è¢«æš‚åœçš„æ—¶é—´ æ”¶é›†é¢‘ç‡ï¼šç›¸å¯¹äºåº”ç”¨ç¨‹åºçš„æ‰§è¡Œï¼Œæ”¶é›†æ“ä½œå‘ç”Ÿçš„é¢‘ç‡ã€‚ å†…å­˜å ç”¨ï¼šJAVAå †åŒºæ‰€å çš„å†…å­˜å¤§å°ã€‚ å¿«é€Ÿï¼šä¸€ä¸ªå¯¹è±¡ä»è¯ç”Ÿåˆ°è¢«å›æ”¶æ‰€ç»å†çš„æ—¶é—´ã€‚ â€‹ è¿™ä¸‰è€…å…±åŒæ„æˆä¸€ä¸ªâ€œä¸å¯èƒ½ä¸‰è§’â€ã€‚ä¸‰è€…æ€»ä½“çš„è¡¨ç°ä¼šéšç€æŠ€æœ¯è¿›æ­¥è€Œè¶Šæ¥è¶Šå¥½ã€‚ä¸€æ¬¾ä¼˜ç§€çš„æ”¶é›†å™¨é€šå¸¸æœ€å¤šåŒæ—¶æ»¡è¶³å…¶ä¸­çš„ä¸¤é¡¹ã€‚ â€‹ è¿™ä¸‰é¡¹é‡Œï¼Œæš‚åœæ—¶é—´çš„é‡è¦æ€§æ—¥ç›Šå‡¸æ˜¾ã€‚å› ä¸ºéšç€ç¡¬ä»¶å‘å±•ï¼Œå†…å­˜å ç”¨å¤šäº›è¶Šæ¥è¶Šèƒ½å®¹å¿ï¼Œç¡¬ä»¶æ€§èƒ½çš„æå‡ä¹Ÿæœ‰åŠ©äºé™ä½æ”¶é›†å™¨è¿è¡Œæ—¶å¯¹åº”ç”¨ç¨‹åºçš„å½±å“ï¼Œå³æé«˜äº†ååé‡ã€‚è€Œå†…å­˜çš„æ‰©å¤§ï¼Œå¯¹å»¶é€€åè€Œå¸¦æ¥è´Ÿé¢æ•ˆæœã€‚ç®€å•æ¥è¯´ï¼Œä¸»è¦æŠ“ä½ä¸¤ç‚¹ï¼šååé‡ã€æš‚åœæ—¶é—´ã€‚ 3.ååé‡ä¸æš‚åœæ—¶é—´ â€‹ ååé‡å°±æ˜¯CPUç”¨äºè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´ä¸CPUæ€»æ¶ˆè€—æ—¶é—´çš„æ¯”å€¼ï¼Œå³ååé‡=è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/(è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´+åƒåœ¾æ”¶é›†æ—¶é—´)ã€‚æ¯”å¦‚ï¼šè™šæ‹Ÿæœºæ€»å…±è¿è¡Œäº†180åˆ†é’Ÿï¼Œå…¶ä¸­åƒåœ¾æ”¶é›†èŠ±æ‰1åˆ†é’Ÿï¼Œé‚£ååé‡å°±æ˜¯99%ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºèƒ½å®¹å¿è¾ƒé«˜çš„æš‚åœæ—¶é—´ï¼Œå› æ­¤ï¼Œé«˜ååé‡çš„åº”ç”¨ç¨‹åºæœ‰æ›´é•¿çš„æ—¶é—´åŸºå‡†ï¼Œå¿«é€Ÿå“åº”æ˜¯ä¸å¿…è€ƒè™‘çš„ååé‡ä¼˜å…ˆï¼Œæ„å‘³ç€åœ¨å•ä½æ—¶é—´å†…ï¼ŒSTWçš„æ—¶é—´æœ€çŸ­ã€‚ â€‹ â€œæš‚åœæ—¶é—´â€æ˜¯æŒ‡ä¸€ä¸ªæ—¶é—´æ®µå†…åº”ç”¨ç¨‹åºçº¿ç¨‹æš‚åœï¼Œè®©GCçº¿ç¨‹æ‰§è¡Œçš„çŠ¶æ€ã€‚ä¾‹å¦‚ï¼ŒGCæœŸé—´100æ¯«ç§’çš„æš‚åœæ—¶é—´æ„å‘³ç€åœ¨è¿™100æ¯«ç§’æœŸé—´å†…æ²¡æœ‰åº”ç”¨ç¨‹åºçº¿ç¨‹æ˜¯æ´»åŠ¨çš„ã€‚æš‚åœæ—¶é—´ä¼˜å…ˆï¼Œæ„å‘³ç€å°½å¯èƒ½è®©å•æ¬¡STWçš„æ—¶é—´æœ€çŸ­ã€‚ â€‹ é«˜ååé‡è¾ƒå¥½å› ä¸ºè¿™ä¼šè®©åº”ç”¨ç¨‹åºçš„æœ€ç»ˆç”¨æˆ·æ„Ÿè§‰åªæœ‰åº”ç”¨ç¨‹åºçº¿ç¨‹åœ¨åšâ€œç”Ÿäº§æ€§â€å·¥ä½œã€‚ç›´è§‰ä¸Šï¼Œååé‡è¶Šé«˜ç¨‹åºè¿è¡Œè¶Šå¿«ã€‚ â€‹ ä½æš‚åœæ—¶é—´ï¼ˆä½å»¶è¿Ÿï¼‰è¾ƒå¥½å› ä¸ºä»æœ€ç»ˆç”¨æˆ·çš„è§’åº¦æ¥çœ‹ä¸ç®¡æ˜¯GCè¿˜æ˜¯å…¶ä»–åŸå› å¯¼è‡´ä¸€ä¸ªåº”ç”¨è¢«æŒ‚èµ·å§‹ç»ˆæ˜¯ä¸å¥½çš„ã€‚è¿™å–å†³äºåº”ç”¨ç¨‹åºçš„ç±»å‹ï¼Œæœ‰æ—¶å€™ç”šè‡³çŸ­æš‚çš„260æ¯«ç§’æš‚åœéƒ½å¯èƒ½æ‰“æ–­ç»ˆç«¯ç”¨æˆ·ä½“éªŒã€‚å› æ­¤ï¼Œå…·æœ‰ä½çš„è¾ƒå¤§æš‚åœæ—¶é—´æ˜¯éå¸¸é‡è¦çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸€ä¸ªäº¤äº’å¼åº”ç”¨ç¨‹åºã€‚ â€‹ ä¸å¹¸çš„æ˜¯â€é«˜ååé‡â€å’Œâ€ä½æš‚åœæ—¶é—´â€æ˜¯ä¸€å¯¹ç›¸äº’ç«äº‰çš„ç›®æ ‡ï¼ˆçŸ›ç›¾ï¼‰å› ä¸ºå¦‚æœé€‰æ‹©ä»¥ååé‡ä¼˜å…ˆï¼Œé‚£ä¹ˆå¿…ç„¶éœ€è¦é™ä½å†…å­˜å›æ”¶çš„æ‰§è¡Œé¢‘ç‡ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´GCéœ€è¦æ›´é•¿çš„æš‚åœæ—¶é—´æ¥æ‰§è¡Œå†…å­˜å›æ”¶ã€‚ç›¸åçš„ï¼Œå¦‚æœé€‰æ‹©ä»¥ä½å»¶è¿Ÿä¼˜å…ˆä¸ºåŸåˆ™ï¼Œé‚£ä¹ˆä¸ºäº†é™ä½æ¯æ¬¡æ‰§è¡Œå†…å­˜å›æ”¶æ—¶çš„æš‚åœæ—¶é—´ï¼Œä¹Ÿåªèƒ½é¢‘ç¹åœ°æ‰§è¡Œå†…å­˜å›æ”¶ï¼Œä½†è¿™åˆå¼•èµ·äº†å¹´è½»ä»£å†…å­˜çš„ç¼©å‡å’Œå¯¼è‡´ç¨‹åºååé‡çš„ä¸‹é™ã€‚ â€‹ åœ¨è®¾è®¡ï¼ˆæˆ–ä½¿ç”¨ï¼‰GCç®—æ³•æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®å®šæˆ‘ä»¬çš„ç›®æ ‡ï¼šä¸€ä¸ªGCç®—æ³•åªå¯èƒ½é’ˆå¯¹ä¸¤ä¸ªç›®æ ‡ä¹‹ä¸€ï¼ˆå³åªä¸“æ³¨äºè¾ƒå¤§ååé‡æˆ–æœ€å°æš‚åœæ—¶é—´ï¼‰ï¼Œæˆ–å°è¯•æ‰¾åˆ°ä¸€ä¸ªäºŒè€…çš„æŠ˜è¡·ã€‚ç°åœ¨æ ‡å‡†ï¼šåœ¨æœ€å¤§ååé‡ä¼˜å…ˆçš„æƒ…å†µä¸‹ï¼Œé™ä½åœé¡¿æ—¶é—´ã€‚ 4ï¼Œåƒåœ¾å›æ”¶å™¨å‘å±•å² æœ‰äº†è™šæ‹Ÿæœºï¼Œå°±ä¸€å®šéœ€è¦æ”¶é›†åƒåœ¾çš„æœºåˆ¶ï¼Œè¿™å°±æ˜¯ Garbage Collection,å¯¹åº”çš„äº§å“æˆ‘ä»¬ç§°ä¸º Garbage Collector. ãƒ»1999å¹´éšJDK1.3.1ä¸€èµ·æ¥çš„æ˜¯ä¸²è¡Œæ–¹å¼çš„ Serial GC,å®ƒæ˜¯ç¬¬ä¸€æ¬¾GC. Pardewåƒåœ¾æ”¶é›†å™¨æ˜¯ Seriaæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ ãƒ»2002å¹´2æœˆ26æ—¥ï¼ŒParalle GCå’Œ Concurrent Mark Sweep GCè·ŸéšJDK1.4.2èµ·å‘å¸ƒParallel GCåœ¨JDK6ä¹‹åæˆä¸º Hotspoté»˜è®¤GC.2012å¹´ï¼Œåœ¨JDK1.7u4ç‰ˆæœ¬ä¸­ï¼ŒG1å¯ç”¨ã€‚ ãƒ»2017å¹´ï¼ŒJDK9ä¸­G1å˜æˆé»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨ï¼Œä»¥æ›¿ä»£CMS. ãƒ»2018å¹´3æœˆï¼ŒJDK10ä¸­G1åƒåœ¾å›æ”¶å™¨çš„å¹¶è¡Œå®Œæ•´åƒåœ¾å›æ”¶ï¼Œå®ç°å¹¶è¡Œæ€§æ¥æ”¹å–„æœ€åæƒ…å†µä¸‹çš„å»¶è¿Ÿã€‚ ãƒ»2018å¹´9æœˆï¼ŒJDK11å‘å¸ƒã€‚å¼•å…¥Bpsi1onåƒåœ¾å›æ”¶å™¨ï¼Œåˆè¢«ç§°ä¸º&quot;No-Opï¼ˆæ— æ“ä½œï¼‰å›æ”¶å™¨ã€‚åŒæ—¶ï¼Œå¼•å…¥zGC:å¯ä¼¸ç¼©çš„ä½å»¶è¿Ÿåƒåœ¾å›æ”¶å™¨( Experimental). ãƒ»2019å¹´3æœˆï¼ŒJDK12å‘å¸ƒã€‚å¢å¼ºG1,è‡ªåŠ¨è¿”å›æœªç”¨å †å†…å­˜ç»™æ“ä½œç³»ç»Ÿã€‚åŒæ—¶ï¼Œå¼•å…¥Sh. enandoah GC:ä½åœé¡¿æ—¶é—´çš„GC( Experimenta1). ãƒ»2019å¹´9æœˆï¼ŒJDK13å‘å¸ƒã€‚å¢å¼ºZGC,è‡ªåŠ¨è¿”å›æœªç”¨å †å†…å­˜ç»™æ“ä½œç³»ç»Ÿ ãƒ»2020å¹´3æœˆï¼ŒJDK14å‘å¸ƒã€‚åˆ é™¤CMSåƒåœ¾å›æ”¶å™¨ã€‚æ‰©å±•zGCåœ¨ macos,å’Œ Windowsä¸Šçš„åº”ç”¨ ä¸²è¡Œå›æ”¶å™¨ï¼š Serialã€ Serial Old å¹¶è¡Œå›æ”¶å™¨ï¼š Pa rnewã€Parallel Scavengeã€ Parallel Old å¹¶å‘å›æ”¶å™¨ï¼šCMSã€G1 åƒåœ¾æ”¶é›†å™¨çš„ç»„åˆå…³ç³» æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼š Serialã€ Pardewã€Parallel Scavenge è€å¹´ä»£æ”¶é›†å™¨ï¼š Serial 0ldã€Parallel 0ldã€CMS æ•´å †æ”¶é›†å™¨ï¼šG1 JDK 8â€”&gt;JDK 9 å®çº¿----ã€‹çº¢è™šçº¿ â€”&gt;JDK 14 å®çº¿----ã€‹ç»¿è™šçº¿ å¹¶åºŸå¼ƒCMS é»˜è®¤G1 â€‹ ä¸ºä»€ä¹ˆè¦æœ‰å¾ˆå¤šæ”¶é›†å™¨ï¼Œä¸€ä¸ªä¸å¤Ÿå—ï¼Ÿå› ä¸ºJavaçš„ä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œç§»åŠ¨ç«¯ï¼ŒæœåŠ¡å™¨ç­‰ã€‚æ‰€ä»¥å°±éœ€è¦é’ˆå¯¹ä¸åŒçš„åœºæ™¯ï¼Œæä¾›ä¸åŒçš„åƒåœ¾æ”¶é›†å™¨ï¼Œæé«˜åƒåœ¾æ”¶é›†çš„æ€§èƒ½ã€‚ â€‹ è™½ç„¶æˆ‘ä»¬ä¼šå¯¹å„ä¸ªæ”¶é›†å™¨è¿›è¡Œæ¯”è¾ƒï¼Œä½†å¹¶éä¸ºäº†æŒ‘é€‰ä¸€ä¸ªæœ€å¥½çš„æ”¶é›†å™¨å‡ºæ¥ã€‚æ²¡æœ‰ä¸€ç§æ”¾ä¹‹å››æµ·çš†å‡†ã€ä»»ä½•åœºæ™¯ä¸‹éƒ½é€‚ç”¨çš„å®Œç¾æ”¶é›†å™¨å­˜åœ¨æ›´åŠ æ²¡æœ‰ä¸‡èƒ½çš„æ”¶é›†å™¨ã€‚æ‰€ä»¥æˆ‘ä»¬é€‰æ‹©çš„åªæ˜¯å¯¹å…·ä½“åº”ç”¨æœ€åˆé€‚çš„æ”¶é›†å™¨ã€‚ 5.æŸ¥çœ‹é»˜è®¤åƒåœ¾å›æ”¶å™¨ **-XX: PrintCommandLineFlags:**æŸ¥çœ‹å‘½ä»¤è¡Œç›¸å…³å‚æ•°ï¼ˆåŒ…å«ä½¿ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼‰ ä½¿ç”¨å‘½ä»¤è¡ŒæŒ‡ä»¤ï¼šjinfo -flag ç›¸å…³åƒåœ¾å›æ”¶å™¨å‚æ•° è¿›ç¨‹ID Serial ä¸²è¡Œå›æ”¶ Serial æ”¶é›†å™¨æ˜¯æœ€åŸºæœ¬ã€å†å²æœ€æ‚ ä¹…çš„åƒåœ¾æ”¶é›†å™¨äº†ã€‚JDK1.3ä¹‹å‰å›æ”¶æ–°ç”Ÿä»£å”¯ä¸€çš„é€‰æ‹©ã€‚ Serial æ”¶é›†å™¨ä½œä¸º Hotspotä¸­Clientæ¨¡å¼ä¸‹çš„é»˜è®¤æ–°ç”Ÿä»£åƒåœ¾æ”¶é›†å™¨ã€‚ Serialæ”¶é›†å™¨é‡‡ç”¨å¤åˆ¶ç®—æ³•ã€ä¸²è¡Œå›æ”¶å’Œ&quot;Stop-the-World&quot;æœºåˆ¶çš„æ–¹å¼æ‰§è¡Œå†…å­˜å›æ”¶ã€‚ é™¤äº†å¹´è½»ä»£ä¹‹å¤–ï¼Œ Serial æ”¶é›†å™¨è¿˜æä¾›ç”¨äºæ‰§è¡Œè€å¹´ä»£åƒåœ¾æ”¶é›†çš„ Serial Oldæ”¶é›†å™¨ã€‚ Serial Oldæ”¶é›†å™¨åŒæ ·ä¹Ÿé‡‡ç”¨äº†ä¸²è¡Œå›æ”¶å’Œ&quot; Stop the World&quot;æœºåˆ¶ï¼Œåªä¸è¿‡å†…å­˜å›æ”¶ç®—æ³•ä½¿ç”¨çš„æ˜¯æ ‡è®°ä¸€å‹ç¼©ç®—æ³•ã€‚ Serial Oldæ˜¯è¿è¡Œåœ¨Client æ¨¡å¼ä¸‹é»˜è®¤çš„è€å¹´ä»£çš„åƒåœ¾å›æ”¶å™¨ã€‚ Serial Oldåœ¨ Server,æ¨¡å¼ä¸‹ä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼šâ‘ ä¸æ–°ç”Ÿä»£çš„Parallel Scavengeé…åˆä½¿ç”¨ã€‚â‘¡ä½œä¸ºè€å¹´ä»£CMSæ”¶é›†å™¨çš„åå¤‡åƒåœ¾æ”¶é›†æ–¹æ¡ˆã€‚ ä¼˜åŠ¿ï¼šç®€å•è€Œé«˜æ•ˆï¼ˆä¸å…¶ä»–æ”¶é›†å™¨çš„å•çº¿ç¨‹æ¯”ï¼‰ï¼Œå¯¹äºé™å®šå•ä¸ªCPUçš„ç¯å¢ƒæ¥è¯´ï¼Œ Serial æ”¶é›†å™¨ç”±äºæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œä¸“å¿ƒåšåƒåœ¾æ”¶é›†è‡ªç„¶å¯ä»¥è·å¾—æœ€é«˜çš„å•çº¿ç¨‹æ”¶é›†æ•ˆç‡ã€‚è¿è¡Œåœ¨Client æ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ åœ¨ç”¨æˆ·çš„æ¡Œé¢åº”ç”¨åœºæ™¯ä¸­ï¼Œå¯ç”¨å†…å­˜ä¸€èˆ¬ä¸å¤§(å‡ åMBè‡³ä¸€ä¸¤ç™¾MB),å¯ä»¥åœ¨è¾ƒçŸ­æ—¶é—´å†…å®Œæˆåƒåœ¾æ”¶é›†(å‡ åmsè‡³ä¸€ç™¾å¤šms),åªè¦ä¸é¢‘ç¹å‘ç”Ÿä½¿ç”¨ä¸²è¡Œå›æ”¶å™¨æ˜¯å¯ä»¥æ¥å—çš„ã€‚ åœ¨ Hotspotè™šæ‹Ÿæœºä¸­ï¼Œä½¿ç”¨ -XX: UseSerialGCå‚æ•°å¯ä»¥æŒ‡å®šå¹´è½»ä»£å’Œè€å¹´ä»£éƒ½ä½¿ç”¨ä¸²è¡Œæ”¶é›†å™¨ã€‚ç­‰ä»·äºæ–°ç”Ÿä»£ç”¨ Seral GC,ä¸”è€å¹´ä»£ç”¨ Serial Old GC æ€»ç»“ï¼šè¿™ç§åƒåœ¾æ”¶é›†å™¨å¤§å®¶äº†è§£ï¼Œç°åœ¨å·²ç»ä¸ç”¨ä¸²è¡Œçš„äº†ã€‚è€Œä¸”åœ¨é™å®šå•æ ¸cpuã‚ªå¯ä»¥ç”¨ã€‚ç°åœ¨éƒ½ä¸æ˜¯å•æ ¸çš„äº†ã€‚å¯¹äºäº¤äº’è¾ƒå¼ºçš„åº”ç”¨è€Œè¨€ï¼Œè¿™ç§åƒåœ¾æ”¶é›†å™¨æ˜¯ä¸èƒ½æ¥å—çš„ã€‚ä¸€èˆ¬åœ¨Java Webåº”ç”¨ç¨‹åºä¸­æ˜¯ä¸ä¼šé‡‡ç”¨ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨çš„ã€‚ ParNew å¹¶è¡Œå›æ”¶ â€‹ å¦‚æœè¯´ Serial GCæ˜¯å¹´è½»ä»£ä¸­çš„å•çº¿ç¨‹åƒåœ¾æ”¶é›†å™¨ï¼Œé‚£ä¹ˆ ParNewlæ”¶é›†å™¨åˆ™æ˜¯ Seral æ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ã€‚Paræ˜¯ Parallel çš„ç¼©å†™ï¼ŒNew:åªèƒ½å¤„ç†çš„æ˜¯æ–°ç”Ÿä»£ã€‚ParNewæ”¶é›†å™¨é™¤äº†é‡‡ç”¨å¹¶è¡Œå›æ”¶çš„æ–¹å¼æ‰§è¡Œå†…å­˜å›æ”¶å¤–ï¼Œä¸¤æ¬¾åƒåœ¾æ”¶é›†å™¨ä¹‹é—´å‡ ä¹æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚ ParNewæ”¶é›†å™¨åœ¨å¹´è½»ä»£ä¸­åŒæ ·ä¹Ÿæ˜¯é‡‡ç”¨å¤åˆ¶ç®—æ³•ã€&quot;Stop-the-world&quot;æœºåˆ¶ã€‚ParNewæ˜¯å¾ˆå¤šJVMè¿è¡Œåœ¨ Serveræ¨¡å¼ä¸‹æ–°ç”Ÿä»£çš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨ã€‚ å¯¹äºæ–°ç”Ÿä»£ï¼Œå›æ”¶æ¬¡æ•°é¢‘ç¹ï¼Œä½¿ç”¨å¹¶è¡Œæ–¹å¼é«˜æ•ˆã€‚ å¯¹äºè€å¹´ä»£ï¼Œå›æ”¶æ¬¡æ•°å°‘ï¼Œä½¿ç”¨ä¸²è¡Œæ–¹å¼èŠ‚çœèµ„æºã€‚ï¼ˆCPUå¹¶è¡Œéœ€è¦åˆ‡æ¢çº¿ç¨‹ï¼Œä¸²è¡Œå¯ä»¥çœå»åˆ‡æ¢çº¿ç¨‹çš„èµ„æºï¼‰ ç”±äº Pardewæ”¶é›†å™¨æ˜¯åŸºäºå¹¶è¡Œå›æ”¶ï¼Œé‚£ä¹ˆæ˜¯å¦å¯ä»¥æ–­å®š Parnewlæ”¶é›†å™¨çš„å›æ”¶æ•ˆç‡åœ¨ä»»ä½•åœºæ™¯ä¸‹éƒ½ä¼šæ¯” Seral æ”¶é›†å™¨æ›´é«˜æ•ˆï¼Ÿ Parnewæ”¶é›†å™¨è¿è¡Œåœ¨å¤šCPUçš„ç¯å¢ƒä¸‹ï¼Œç”±äºå¯ä»¥å……åˆ†åˆ©ç”¨å¤šCPUã€å¤šæ ¸å¿ƒç­‰ç‰©ç†ç¡¬ä»¶èµ„æºä¼˜åŠ¿ï¼Œå¯ä»¥æ›´å¿«é€Ÿåœ°å®Œæˆåƒåœ¾æ”¶é›†ï¼Œæå‡ç¨‹åºçš„ååé‡ã€‚ ä½†æ˜¯åœ¨å•ä¸ªCPUçš„ç¯å¢ƒä¸‹ï¼Œ Parnewlæ”¶é›†å™¨ä¸æ¯” Seral æ”¶é›†å™¨æ›´é«˜æ•ˆã€‚è™½ç„¶ Serlalæ”¶é›†å™¨æ˜¯åŸºäºä¸²è¡Œå›æ”¶ï¼Œä½†æ˜¯ç”±äºCPUä¸éœ€è¦é¢‘ç¹åœ°åšä»»åŠ¡åˆ‡æ¢ï¼Œå› æ­¤å¯ä»¥æœ‰æ•ˆé¿å…å¤šçº¿ç¨‹äº¤äº’è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸€äº›é¢å¤–å¼€é”€ã€‚ å› ä¸ºé™¤ Seralå¤–ï¼Œç›®å‰åªæœ‰ PardNew GCèƒ½ä¸CMSæ”¶é›†å™¨é…åˆå·¥ä½œã€‚ åœ¨ç¨‹åºä¸­ï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡é€‰é¡¹â€-XX: UseParNewGC&quot;æ‰‹åŠ¨æŒ‡å®šä½¿ç”¨ParNewlæ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡ã€‚å®ƒè¡¨ç¤ºå¹´è½»ä»£ä½¿ç”¨å¹¶è¡Œæ”¶é›†å™¨ï¼Œä¸å½±å“è€å¹´ä»£ã€‚ -XX: ParallelGCThreadsé™åˆ¶çº¿ç¨‹æ•°é‡ï¼Œé»˜è®¤å¼€å¯å’ŒCPUæ•°æ®ç›¸åŒçš„çº¿ç¨‹æ•°ã€‚ Parallel Scavenge ååé‡ä¼˜å…ˆ HotSpotçš„å¹´è½»ä»£ä¸­é™¤äº†æ‹¥æœ‰ ParNewæ”¶é›†å™¨æ˜¯åŸºäºå¹¶è¡Œå›æ”¶çš„ä»¥å¤–ï¼ŒParallel Scavengeæ”¶é›†å™¨åŒæ ·ä¹Ÿé‡‡ç”¨äº†å¤åˆ¶ç®—æ³•ã€å¹¶è¡Œå›æ”¶å’Œ&quot;Stop The World&quot;æœºåˆ¶ã€‚ é‚£ä¹ˆ Parallel æ”¶é›†å™¨çš„å‡ºç°æ˜¯å¦å¤šæ­¤ä¸€ä¸¾ï¼Ÿ å’Œ Pardewæ”¶é›†å™¨ä¸åŒï¼Œ Parallel Scavengeæ”¶é›†å™¨çš„ç›®æ ‡åˆ™æ˜¯è¾¾åˆ°ä¸ªå¯æ§åˆ¶çš„ååé‡( Throughput),å®ƒä¹Ÿè¢«ç§°ä¸ºååé‡ä¼˜å…ˆçš„åƒåœ¾æ”¶é›†å™¨ã€‚ è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ä¹Ÿæ˜¯ Parallel Scavengeä¸ ParNewä¸€ä¸ªé‡è¦åŒºåˆ«ã€‚ é«˜ååé‡åˆ™å¯ä»¥é«˜æ•ˆç‡åœ°åˆ©ç”¨CPUæ—¶é—´ï¼Œå°½å¿«å®Œæˆç¨‹åºçš„è¿ç®—ä»»åŠ¡ï¼Œä¸»è¦é€‚åˆåœ¨åå°è¿ç®—è€Œä¸éœ€è¦å¤ªå¤šäº¤äº’çš„ä»»åŠ¡ã€‚å› æ­¤ï¼Œå¸¸è§åœ¨æœåŠ¡å™¨ç¯å¢ƒä¸­ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œé‚£äº›æ‰§è¡Œæ‰¹é‡å¤„ç†ã€è®¢å•å¤„ç†ã€å·¥èµ„æ”¯ä»˜ã€ç§‘å­¦è®¡ç®—çš„åº”ç”¨ç¨‹åºã€‚ Parallel æ”¶é›†å™¨åœ¨JDK1.6æ—¶æä¾›äº†ç”¨äºæ‰§è¡Œè€å¹´ä»£åƒåœ¾æ”¶é›†çš„ Parallel Old æ”¶é›†å™¨ï¼Œç”¨æ¥ä»£æ›¿è€å¹´ä»£çš„ Seral Oldæ”¶é›†å™¨ã€‚ Parallel Old æ”¶é›†å™¨é‡‡ç”¨äº†æ ‡è®°-å‹ç¼©ç®—æ³•ï¼Œä½†åŒæ ·ä¹Ÿæ˜¯åŸºäºå¹¶è¡Œå›æ”¶å’Œ&quot;Stop-the- World&quot;æœºåˆ¶ã€‚ â€‹ ååé‡å°±æ˜¯CPUç”¨äºè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´ä¸CPUæ€»æ¶ˆè€—æ—¶é—´çš„æ¯”å€¼ï¼Œå³ååé‡=è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/(è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ åƒåœ¾æ”¶é›†æ—¶é—´)ã€‚æ¯”å¦‚ï¼šè™šæ‹Ÿæœºæ€»å…±è¿è¡Œäº†160åˆ†é’Ÿï¼Œå…¶ä¸­åƒåœ¾æ”¶é›†èŠ±æ‰1åˆ†é’Ÿï¼Œé‚£ååé‡å°±æ˜¯99%ã€‚ â€‹ è¿™ç§æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºèƒ½å®¹å¿è¾ƒé«˜çš„æš‚åœæ—¶é—´ï¼Œå› æ­¤ï¼Œé«˜ååé‡çš„åº”ç”¨ç¨‹åºæœ‰æ›´é•¿çš„æ—¶é—´åŸºå‡†ï¼Œå¿«é€Ÿå“åº”æ˜¯ä¸å¿…è€ƒè™‘çš„ã€‚ååé‡ä¼˜å…ˆï¼Œæ„å‘³ç€åœ¨å•ä½æ—¶é—´å†…ï¼ŒSTçš„æ—¶é—´æœ€çŸ­ã€‚åœ¨ç¨‹åºååé‡ä¼˜å…ˆçš„åº”ç”¨åœºæ™¯ä¸­ï¼ŒParallel æ”¶é›†å™¨å’Œ Parallel Oldæ”¶é›†å™¨çš„ç»„åˆï¼Œåœ¨ Serveræ¨¡å¼ä¸‹çš„å†…å­˜å›æ”¶æ€§èƒ½å¾ˆä¸é”™ã€‚åœ¨Java8ä¸­ï¼Œé»˜è®¤æ˜¯æ­¤åƒåœ¾æ”¶é›†å™¨ã€‚ å‚æ•°è®¾ç½®: -XX: +UseParallelGCæ‰‹åŠ¨æŒ‡å®šå¹´è½»ä»£ä½¿ç”¨Para1le1å¹¶è¡Œæ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡ -XX: +UseParallelOldGCæ‰‹åŠ¨æŒ‡å®šè€å¹´ä»£éƒ½æ˜¯ä½¿ç”¨å¹¶è¡Œå›æ”¶æ”¶é›†å™¨ã€‚åˆ†åˆ«é€‚ç”¨äºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚é»˜è®¤jdk8æ˜¯å¼€å¯çš„ã€‚ä¸Šé¢ä¸¤ä¸ªå‚æ•°ï¼Œé»˜è®¤å¼€å¯ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªä¹Ÿä¼šè¢«å¼€å¯ã€‚ï¼ˆäº’ç›¸æ¿€æ´»ï¼‰ -XX: +ParallelGCThreadsè®¾ç½®å¹´è½»ä»£å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°ã€‚ä¸€èˆ¬åœ°ï¼Œæœ€å¥½ä¸CPUæ•°é‡ç›¸ç­‰ï¼Œä»¥é¿å…è¿‡å¤šçš„çº¿ç¨‹æ•°å½±å“åƒåœ¾æ”¶é›†æ€§èƒ½ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“CPUæ•°é‡å°äº8ä¸ªï¼ŒParallelGCThreadsçš„å€¼ç­‰äºCPUæ•°é‡ã€‚å½“CPUæ•°é‡å¤§äº8ä¸ªï¼ŒParallelGCThreadsçš„å€¼ç­‰äº3+[5*CPU_Count] / 8]ã€‚ -XX: MaxGCPauseMillis è®¾ç½®åƒåœ¾æ”¶é›†å™¨æœ€å¤§åœé¡¿æ—¶é—´(å³STWçš„æ—¶é—´)ã€‚å•ä½æ˜¯æ¯«ç§’ã€‚ ä¸ºäº†å°½å¯èƒ½åœ°æŠŠåœé¡¿æ—¶é—´æ§åˆ¶åœ¨ MaxGCPauseMillis ä»¥å†…ï¼Œæ”¶é›†å™¨åœ¨å·¥ä½œæ—¶ä¼šè°ƒæ•´Javaå †å¤§å°æˆ–è€…å…¶ä»–ä¸€äº›å‚æ•°ã€‚å¯¹äºç”¨æˆ·æ¥è®²ï¼Œåœé¡¿æ—¶é—´è¶ŠçŸ­ä½“éªŒè¶Šå¥½ã€‚ä½†æ˜¯åœ¨æœåŠ¡å™¨ç«¯ï¼Œæˆ‘ä»¬æ³¨é‡é«˜å¹¶å‘ï¼Œæ•´ä½“çš„ååé‡ã€‚æ‰€ä»¥æœåŠ¡å™¨ç«¯é€‚åˆ Paralle1,è¿›è¡Œæ§åˆ¶ã€‚è¯¥å‚æ•°ä½¿ç”¨éœ€è°¨æ…ã€‚ -XX: GCTimeRatio åƒåœ¾æ”¶é›†æ—¶é—´å æ€»æ—¶é—´çš„æ¯”ä¾‹ (=1/(N+1))ç”¨äºè¡¡é‡ååé‡çš„å¤§å°ã€‚ å–å€¼èŒƒå›´(0,100)ã€‚é»˜è®¤å€¼99,ä¹Ÿå°±æ˜¯åƒåœ¾å›æ”¶æ—¶é—´ä¸è¶…è¿‡1%ã€‚ä¸å‰ä¸€ä¸ª -XX: MaxGCPauseMilliså‚æ•°æœ‰ä¸€å®šçŸ›ç›¾æ€§ã€‚æš‚åœæ—¶é—´è¶Šé•¿ï¼Œ Radioå‚æ•°å°±å®¹æ˜“è¶…è¿‡è®¾å®šçš„æ¯”ä¾‹ã€‚ -XX: UseAdaptiveSizePoltcy è®¾ç½® Parallel Scavengeæ”¶é›†å™¨å…·æœ‰è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¹´è½»ä»£çš„å¤§å°ã€Edenå’Œ Survivorçš„æ¯”ä¾‹ã€æ™‹å‡è€å¹´ä»£çš„å¯¹è±¡å¹´é¾„ç­‰å‚æ•°ä¼šè¢«è‡ªåŠ¨è°ƒæ•´ï¼Œå·²è¾¾åˆ°åœ¨å †å¤§å°ã€ååé‡å’Œåœé¡¿æ—¶é—´ä¹‹é—´çš„å¹³è¡¡ç‚¹ã€‚åœ¨æ‰‹åŠ¨è°ƒä¼˜æ¯”è¾ƒå›°éš¾çš„åœºåˆï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ç§è‡ªé€‚åº”çš„æ–¹å¼ï¼Œä»…æŒ‡å®šè™šæ‹Ÿæœºçš„æœ€å¤§å †ã€æ—¥æ ‡çš„ååé‡( GCTimeRatio )å’Œåœé¡¿æ—¶é—´( MaxGCPauseMillis ),è®©è™šæ‹Ÿæœºè‡ªå·±å®Œæˆè°ƒä¼˜å·¥ä½œã€‚ CMS ä½å»¶è¿Ÿ åœ¨JDK1.5æ—¶æœŸï¼Œ HotSpotæ¨å‡ºäº†ä¸€æ¬¾åœ¨å¼ºäº¤äº’åº”ç”¨ä¸­å‡ ä¹å¯è®¤ä¸ºæœ‰åˆ’æ—¶ä»£æ„ä¹‰çš„åƒåœ¾æ”¶é›†å™¨ï¼šCMS( Concurrent - Mark - Sweep)æ”¶é›†å™¨ï¼Œè¿™æ¬¾æ”¶é›†å™¨æ˜¯ HotSpotè™šæ‹Ÿæœºä¸­ç¬¬ä¸€æ¬¾çœŸæ­£æ„ä¹‰ä¸Šçš„å¹¶å‘æ”¶é›†å™¨ï¼Œå®ƒç¬¬ä¸€æ¬¡å®ç°äº†è®©åƒåœ¾æ”¶é›†çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶å·¥ä½œã€‚ CMSæ”¶é›†å™¨çš„å…³æ³¨ç‚¹æ˜¯å°½å¯èƒ½ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹çš„åœé¡¿æ—¶é—´ã€‚åœé¡¿æ—¶é—´è¶ŠçŸ­ï¼ˆä½å»¶è¿Ÿï¼‰å°±è¶Šé€‚åˆä¸ç”¨æˆ·äº¤äº’çš„ç¨‹åºï¼Œè‰¯å¥½çš„å“åº”é€Ÿåº¦èƒ½æå‡ç”¨æˆ·ä½“éªŒã€‚ç›®å‰å¾ˆå¤§ä¸€éƒ¨åˆ†çš„Javaåº”ç”¨é›†ä¸­åœ¨äº’è”ç½‘ç«™æˆ–è€…B/Sç³»ç»Ÿçš„æœåŠ¡ç«¯ä¸Šï¼Œè¿™ç±»åº”ç”¨å°¤å…¶é‡è§†æœåŠ¡çš„å“åº”é€Ÿåº¦ï¼Œå¸Œæœ›ç³»ç»Ÿåœé¡¿æ—¶é—´æœ€çŸ­ï¼Œä»¥ç»™ç”¨æˆ·å¸¦æ¥è¾ƒå¥½çš„ä½“éªŒã€‚CMSæ”¶é›†å™¨å°±éå¸¸ç¬¦åˆè¿™ç±»åº”ç”¨çš„éœ€æ±‚ã€‚ CMSçš„åƒåœ¾æ”¶é›†ç®—æ³•é‡‡ç”¨æ ‡è®°ä¸€æ¸…é™¤ç®—æ³•ï¼Œå¹¶ä¸”ä¹Ÿä¼š&quot;Stop-the-world ä¸å¹¸çš„æ˜¯ï¼ŒCMSä½œä¸ºè€å¹´ä»£çš„æ”¶é›†å™¨ï¼Œå´æ— æ³•ä¸JDK1.4.8ä¸­å·²ç»å­˜åœ¨çš„æ–°ç”Ÿä»£æ”¶é›†å™¨Parallel Scavengeé…åˆå·¥ä½œï¼Œæ‰€ä»¥åœ¨JDK1.5ä¸­ä½¿ç”¨CMSæ¥æ”¶é›†è€å¹´ä»£çš„æ—¶å€™ï¼Œæ–°ç”Ÿä»£åªèƒ½é€‰æ‹© Pardewæˆ–è€… Sera1æ”¶é›†å™¨ä¸­çš„ä¸€ä¸ªã€‚åœ¨G1å‡ºç°ä¹‹å‰ï¼ŒCMSä½¿ç”¨è¿˜æ˜¯éå¸¸å¹¿æ³›çš„ã€‚ä¸€ç›´åˆ°ä»Šå¤©ï¼Œä»ç„¶æœ‰å¾ˆå¤šç³»ç»Ÿä½¿ç”¨ CMS GCã€‚ å·¥ä½œåŸç† CMSæ•´ä¸ªè¿‡ç¨‹æ¯”ä¹‹å‰çš„æ”¶é›†å™¨è¦å¤æ‚ï¼Œæ•´ä¸ªè¿‡ç¨‹åˆ†ä¸º4ä¸ªä¸»è¦é˜¶æ®µï¼Œå³åˆå§‹æ ‡è®°é˜¶æ®µã€å¹¶å‘æ ‡è®°é˜¶æ®µã€é‡æ–°æ ‡è®°é˜¶æ®µå’Œå¹¶å‘æ¸…é™¤é˜¶æ®µã€‚ **åˆå§‹æ ‡è®°( Initial-Mark)é˜¶æ®µï¼š**åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œç¨‹åºä¸­æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹éƒ½å°†ä¼šå› ä¸ºâ€œStop-the-Worldâ€æœºåˆ¶è€Œå‡ºç°çŸ­æš‚çš„æš‚åœï¼Œè¿™ä¸ªé˜¶æ®µçš„ä¸»è¦ä»»åŠ¡ä»…ä»…åªæ˜¯æ ‡è®°å‡ºGC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ã€‚ä¸€æ—¦æ ‡è®°å®Œæˆä¹‹åå°±ä¼šæ¢å¤ä¹‹å‰è¢«æš‚åœçš„æ‰€æœ‰åº”ç”¨çº¿ç¨‹ã€‚ç”±äºç›´æ¥å…³è”å¯¹è±¡æ¯”è¾ƒå°ï¼Œæ‰€ä»¥è¿™é‡Œçš„é€Ÿåº¦éå¸¸å¿«ã€‚ **å¹¶å‘æ ‡è®°( Concurrent-Mark)é˜¶æ®µï¼š**ä» GC Rootsçš„ç›´æ¥å…³è”å¯¹è±¡å¼€å§‹éå†æ•´ä¸ªå¯¹è±¡å›¾çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹è€—æ—¶è¾ƒé•¿ä½†æ˜¯ä¸éœ€è¦åœé¡¿ç”¨æˆ·çº¿ç¨‹ï¼Œå¯ä»¥ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹ä¸€èµ·å¹¶å‘è¿è¡Œã€‚ **é‡æ–°æ ‡è®°( Remark)é˜¶æ®µï¼š**ç”±äºåœ¨å¹¶å‘æ ‡è®°é˜¶æ®µä¸­ï¼Œç¨‹åºçš„å·¥ä½œçº¿ç¨‹ä¼šå’Œåƒåœ¾æ”¶é›†çº¿ç¨‹åŒæ—¶è¿è¡Œæˆ–è€…äº¤å‰è¿è¡Œï¼Œå› æ­¤ä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´ï¼Œå› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ï¼Œè¿™ä¸ªé˜¶æ®µçš„åœé¡¿æ—¶é—´é€šå¸¸ä¼šæ¯”åˆå§‹æ ‡è®°é˜¶æ®µç¨é•¿ä¸€äº›ï¼Œä½†ä¹Ÿè¿œæ¯”å¹¶å‘æ ‡è®°é˜¶æ®µçš„æ—¶é—´çŸ­ã€‚ **å¹¶å‘æ¸…é™¤( Concurrent- Sweep)é˜¶æ®µï¼š**æ­¤é˜¶æ®µæ¸…ç†åˆ é™¤æ‰æ ‡è®°é˜¶æ®µåˆ¤æ–­çš„å·±ç»æ­»äº¡çš„å¯¹è±¡ï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´ã€‚ç”±äºä¸éœ€è¦ç§»åŠ¨å­˜æ´»å¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªé˜¶æ®µä¹Ÿæ˜¯å¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶å¹¶å‘çš„ã€‚ ç‰¹ç‚¹ä¸å¼Šç«¯ å°½ç®¡CMSæ”¶é›†å™¨é‡‡ç”¨çš„æ˜¯å¹¶å‘å›æ”¶ï¼ˆéç‹¬å å¼ï¼‰ï¼Œä½†æ˜¯åœ¨å…¶åˆå§‹åŒ–æ ‡è®°å’Œå†æ¬¡æ ‡è®°è¿™ä¸¤ä¸ªé˜¶æ®µä¸­ä»ç„¶éœ€è¦æ‰§è¡Œâ€œStop-The-Wolrdâ€æœºåˆ¶æš‚åœç¨‹åºä¸­çš„å·¥ä½œçº¿ç¨‹ï¼Œä¸è¿‡æš‚åœæ—¶é—´å¹¶ä¸ä¼šå¤ªé•¿ï¼Œå› æ­¤å¯ä»¥è¯´æ˜ç›®å‰æ‰€æœ‰çš„åƒåœ¾æ”¶é›†å™¨éƒ½åšä¸åˆ°å®Œå…¨ä¸éœ€è¦ â€œStop-The-Wolrdâ€ï¼Œåªæ˜¯å°½å¯èƒ½åœ°ç¼©çŸ­æš‚åœæ—¶é—´ã€‚ ç”±äºæœ€è€—è´¹æ—¶é—´çš„å¹¶å‘æ ‡è®°ä¸å¹¶å‘æ¸…é™¤é˜¶æ®µéƒ½ä¸éœ€è¦æš‚åœå·¥ä½œï¼Œæ‰€ä»¥æ•´ä½“çš„å›æ”¶æ˜¯ä½åœé¡¿çš„ã€‚ å¦å¤–ï¼Œç”±äºåœ¨åƒåœ¾æ”¶é›†é˜¶æ®µç”¨æˆ·çº¿ç¨‹æ²¡æœ‰ä¸­æ–­ï¼Œæ‰€ä»¥åœ¨CMSå›æ”¶è¿‡ç¨‹ä¸­ï¼Œè¿˜åº”è¯¥ç¡®ä¿åº”ç”¨ç¨‹åºç”¨æˆ·çº¿ç¨‹æœ‰è¶³å¤Ÿçš„å†…å­˜å¯ç”¨ã€‚å› æ­¤ï¼ŒCMSæ”¶é›†å™¨ä¸èƒ½åƒå…¶ä»–æ”¶é›†å™¨é‚£æ ·ç­‰åˆ°è€å¹´ä»£å‡ ä¹å®Œå…¨è¢«å¡«æ»¡äº†å†è¿›è¡Œæ”¶é›†ï¼Œè€Œæ˜¯å½“å †å†…å­˜ä½¿ç”¨ç‡è¾¾åˆ°æŸä¸€é˜ˆå€¼æ—¶ï¼Œä¾¿å¼€å§‹è¿›è¡Œå›æ”¶ï¼Œä»¥ç¡®ä¿åº”ç”¨ç¨‹åºåœ¨CMSå·¥ä½œè¿‡ç¨‹ä¸­ä¾ç„¶æœ‰è¶³å¤Ÿçš„ç©ºé—´æ”¯æŒåº”ç”¨ç¨‹åºè¿è¡Œã€‚è¦æ˜¯CMSè¿è¡ŒæœŸé—´é¢„ç•™çš„å†…å­˜æ— æ³•æ»¡è¶³ç¨‹åºéœ€è¦ï¼Œå°±ä¼šå‡ºç°ä¸€æ¬¡â€œ Concurrent Mode Failureâ€å¤±è´¥ï¼Œè¿™æ—¶è™šæ‹Ÿæœºå°†å¯åŠ¨åå¤‡é¢„æ¡ˆï¼šä¸´æ—¶å¯ç”¨ Seral Oldæ”¶é›†å™¨æ¥é‡æ–°è¿›è¡Œè€å¹´ä»£çš„åƒåœ¾æ”¶é›†ï¼Œè¿™æ ·åœé¡¿æ—¶é—´å°±å¾ˆé•¿äº†ã€‚ CMSæ”¶é›†å™¨çš„åƒåœ¾æ”¶é›†ç®—æ³•é‡‡ç”¨çš„æ˜¯æ ‡è®°ä¸€æ¸…é™¤ç®—æ³•ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡æ‰§è¡Œå®Œå†…å­˜å›æ”¶åï¼Œç”±äºè¢«æ‰§è¡Œå†…å­˜å›æ”¶çš„æ— ç”¨å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ææœ‰å¯èƒ½æ˜¯ä¸è¿ç»­çš„ä¸€äº›å†…å­˜å—ï¼Œä¸å¯é¿å…åœ°å°†ä¼šäº§ç”Ÿä¸€äº›å†…å­˜ç¢ç‰‡ã€‚é‚£ä¹ˆCMSåœ¨ä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´æ—¶ï¼Œå°†æ— æ³•ä½¿ç”¨æŒ‡é’ˆç¢°æ’( Bump the Pointer)æŠ€æœ¯ï¼Œè€Œåªèƒ½å¤Ÿé€‰æ‹©ç©ºé—²åˆ—è¡¨( Free List)æ‰§è¡Œå†…å­˜åˆ†é…ã€‚ä¸ºä»€ä¹ˆä¸ä½¿ç”¨Mark Compactï¼Ÿå› ä¸ºå½“å¹¶å‘æ¸…é™¤çš„æ—¶å€™ï¼Œç”¨ Compact æ•´ç†å†…å­˜çš„è¯ï¼ŒåŸæ¥çš„ç”¨æˆ·çº¿ç¨‹ä½¿ç”¨çš„å†…å­˜è¿˜æ€ä¹ˆç”¨å‘¢ï¼Ÿè¦ä¿è¯ç”¨æˆ·çº¿ç¨‹èƒ½ç»§ç»­æ‰§è¡Œï¼Œå‰ææ˜¯å®ƒè¿è¡Œçš„èµ„æºä¸å—å½±å“ã€‚ Mark Compactæ›´é€‚åˆâ€œ Stop the Worldâ€è¿™ç§åœºæ™¯ä¸‹ä½¿ç”¨ã€‚ CMSçš„ä¼˜ç‚¹ï¼š å¹¶å‘æ”¶é›†ã€ä½å»¶è¿Ÿ CMSçš„å¼Šç«¯ï¼š **1)ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œ**å¯¼è‡´å¹¶å‘æ¸…é™¤åï¼Œç”¨æˆ·çº¿ç¨‹å¯ç”¨çš„ç©ºé—´ä¸è¶³ã€‚åœ¨æ— æ³•åˆ†é…å¤§å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä¸å¾—ä¸æå‰è§¦å‘Full GCã€‚ **2)CMSæ”¶é›†å™¨å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿã€‚**åœ¨å¹¶å‘é˜¶æ®µï¼Œå®ƒè™½ç„¶ä¸ä¼šå¯¼è‡´ç”¨æˆ·åœé¡¿ï¼Œä½†æ˜¯ä¼šå› ä¸ºå ç”¨äº†ä¸€éƒ¨åˆ†çº¿ç¨‹è€Œå¯¼è‡´åº”ç”¨ç¨‹åºå˜æ…¢ï¼Œæ€»ååé‡ä¼šé™ä½ã€‚ **3)CMSæ”¶é›†å™¨æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ã€‚**å¯èƒ½å‡ºç°â€œ Concurrent Mode Failure&quot;å¤±è´¥è€Œå¯¼è‡´å¦ä¸€æ¬¡Full GCçš„äº§ç”Ÿã€‚åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µç”±äºç¨‹åºçš„å·¥ä½œçº¿ç¨‹å’Œåƒåœ¾æ”¶é›†çº¿ç¨‹æ˜¯åŒæ—¶è¿è¡Œæˆ–è€…äº¤å‰è¿è¡Œçš„ï¼Œé‚£ä¹ˆåœ¨å¹¶å‘æ ‡è®°é˜¶æ®µå¦‚æœäº§ç”Ÿæ–°çš„åƒåœ¾å¯¹è±¡ï¼ŒCMSå°†æ— æ³•å¯¹è¿™äº›åƒåœ¾å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œæœ€ç»ˆä¼šå¯¼è‡´è¿™äº›æ–°äº§ç”Ÿçš„åƒåœ¾å¯¹è±¡æ²¡æœ‰è¢«åŠæ—¶å›æ”¶ï¼Œä»è€Œåªèƒ½åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡ŒGCæ—¶é‡Šæ”¾è¿™äº›ä¹‹å‰æœªè¢«å›æ”¶çš„å†…å­˜ç©ºé—´ã€‚ å‚æ•°è®¾ç½® **-XX: UseConcMarkSweepGC **æ‰‹åŠ¨æŒ‡å®šä½¿ç”¨CMSæ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡ã€‚å¼€å¯è¯¥å‚æ•°åä¼šè‡ªåŠ¨å°† -XX: UseParNEWGCæ‰“å¼€ã€‚å³ï¼š ParNew( YoungåŒºç”¨) +CMS(OldåŒºç”¨) Serial Oldçš„ç»„åˆã€‚ -XX: CMSLnitiatingOccupanyFraction è®¾ç½®å †å†…å­˜ä½¿ç”¨ç‡çš„é˜ˆå€¼ï¼Œä¸€æ—¦è¾¾åˆ°è¯¥é˜ˆå€¼ï¼Œä¾¿å¼€å§‹è¿›è¡Œå›æ”¶ã€‚JDK5åŠä»¥å‰ç‰ˆæœ¬çš„é»˜è®¤å€¼ä¸º68,å³å½“è€å¹´ä»£çš„ç©ºé—´ä½¿ç”¨ç‡è¾¾åˆ°68%æ—¶ï¼Œä¼šæ‰§è¡Œä¸€æ¬¡CMSå›æ”¶ã€‚JDK6åŠä»¥ä¸Šç‰ˆæœ¬é»˜è®¤å€¼ä¸º92%ã€‚å¦‚æœå†…å­˜å¢é•¿ç¼“æ…¢ï¼Œåˆ™å¯ä»¥è®¾ç½®ä¸€ä¸ªç¨å¤§çš„å€¼ï¼Œå¤§çš„é˜ˆå€¼å¯ä»¥æœ‰æ•ˆé™ä½CMSçš„è§¦å‘é¢‘ç‡ï¼Œå‡å°‘è€å¹´ä»£å›æ”¶çš„æ¬¡æ•°å¯ä»¥è¾ƒä¸ºæ˜æ˜¾åœ°æ”¹å–„åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚åä¹‹ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå†…å­˜ä½¿ç”¨ç‡å¢é•¿å¾ˆå¿«ï¼Œåˆ™åº”è¯¥é™ä½è¿™ä¸ªé˜ˆå€¼ï¼Œä»¥é¿å…é¢‘ç¹è§¦å‘è€å¹´ä»£ä¸²è¡Œæ”¶é›†å™¨ã€‚å› æ­¤é€šè¿‡è¯¥é€‰é¡¹ä¾¿å¯ä»¥æœ‰æ•ˆé™ä½Full GCçš„æ‰§è¡Œæ¬¡æ•°ã€‚ **-XX: UseCMSCompactAtFullCollection **ç”¨äºæŒ‡å®šåœ¨æ‰§è¡Œå®ŒFull GCåå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©æ•´ç†ï¼Œä»¥æ­¤é¿å…å†…å­˜ç¢ç‰‡çš„äº§ç”Ÿã€‚ä¸è¿‡ç”±äºå†…å­˜å‹ç¼©æ•´ç†è¿‡ç¨‹æ— æ³•å¹¶å‘æ‰§è¡Œï¼Œæ‰€å¸¦æ¥çš„é—®é¢˜å°±æ˜¯åœé¡¿æ—¶é—´å˜å¾—æ›´é•¿äº†ã€‚ -XX: CMSFullGCsBeforeCompaction è®¾ç½®åœ¨æ‰§è¡Œå¤šå°‘æ¬¡Full GCåå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©æ•´ç†ã€‚ -XX: ParalellCMSThreads è®¾ç½®CMSçš„çº¿ç¨‹æ•°é‡ã€‚CMSé»˜è®¤å¯åŠ¨çš„çº¿ç¨‹æ•°æ˜¯(ParalellCMSThreads+3)/4ã€‚ParalellCMSThreadsæ˜¯å¹´è½»ä»£å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°ã€‚å½“CPUèµ„æºæ¯”è¾ƒç´§å¼ æ—¶ï¼Œå—åˆ°CMSæ”¶é›†å™¨çº¿ç¨‹çš„å½±å“ï¼Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½åœ¨åƒåœ¾å›æ”¶é˜¶æ®µå¯èƒ½ä¼šéå¸¸ç³Ÿç³•ã€‚ æ€»ç»“ å°ç»“ï¼š HotSpotæœ‰è¿™ä¹ˆå¤šçš„åƒåœ¾å›æ”¶å™¨ï¼Œé‚£ä¹ˆå¦‚æœæœ‰äººé—®ï¼Œ Serial GCã€ParalleGCã€Concurrent Mark Sweep GC.è¿™ä¸‰ä¸ªGCæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ è¯·è®°ä½ä»¥ä¸‹å£ä»¤ï¼š å¦‚æœä½ æƒ³è¦æœ€å°åŒ–åœ°ä½¿ç”¨å†…å­˜å’Œå¹¶è¡Œå¼€é”€ï¼Œè¯·é€‰ Serial GC; å¦‚æœä½ æƒ³è¦æœ€å¤§åŒ–åº”ç”¨ç¨‹åºçš„ååé‡ï¼Œè¯·é€‰ Paralle GC; å¦‚æœä½ æƒ³è¦æœ€å°åŒ–GCçš„ä¸­æ–­æˆ–åœé¡¿æ—¶é—´ï¼Œè¯·é€‰ CMS GCã€‚ JDK9æ–°ç‰¹æ€§ï¼šCMS è¢«æ ‡è®°ä¸º Deprecate(JEP291)ã€‚å¦‚æœå¯¹JDK9åŠä»¥ä¸Šç‰ˆæœ¬çš„ Hotspot,è™šæ‹Ÿæœºä½¿ç”¨å‚æ•° -XX: UseConcMarkSweepGC æ¥å¼€å¯CMSæ”¶é›†å™¨çš„è¯ï¼Œç”¨æˆ·ä¼šæ”¶åˆ°ä¸€ä¸ªè­¦å‘Šä¿¡æ¯ï¼Œæç¤ºCMSæœªæ¥å°†ä¼šè¢«åºŸå¼ƒã€‚ DK14æ–°ç‰¹æ€§ï¼šåˆ é™¤CMSåƒåœ¾å›æ”¶å™¨(JEP363)ç§»é™¤äº†CMSåƒåœ¾æ”¶é›†å™¨ï¼Œå¦‚æœåœ¨JDK14ä¸­ä½¿ç”¨ -XX: UseConcMarkSweepGCçš„è¯ï¼ŒJVMä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯ç»™å‡ºä¸€ä¸ªwarningä¿¡æ¯ï¼Œä½†æ˜¯ä¸ä¼šexitã€‚JVMä¼šè‡ªåŠ¨å›é€€ä»¥é»˜è®¤GCæ–¹å¼å¯åŠ¨JVMã€‚ G1 åŒºåŸŸåˆ†ä»£åŒ– ä¸ºä»€ä¹ˆåå­—å«åš Garbage First(G1)å‘¢ï¼Ÿ å› ä¸ºG1æ˜¯ä¸€ä¸ªå¹¶è¡Œå›æ”¶å™¨ï¼Œå®ƒæŠŠå †å†…å­˜åˆ†å‰²ä¸ºå¾ˆå¤šä¸ç›¸å…³çš„åŒºåŸŸ( Region)ï¼ˆç‰©ç†ä¸Šä¸è¿ç»­çš„ï¼‰ã€‚ä½¿ç”¨ä¸åŒçš„ Regionæ¥è¡¨ç¤ºEdenã€å¹¸å­˜è€…0åŒºï¼Œå¹¸å­˜è€…1åŒºï¼Œè€å¹´ä»£ç­‰ã€‚ G1 GCæœ‰è®¡åˆ’åœ°é¿å…åœ¨æ•´ä¸ªJavaå †ä¸­è¿›è¡Œå…¨åŒºåŸŸçš„åƒåœ¾æ”¶é›†ã€‚G1è·Ÿè¸ªå„ä¸ª Regioné‡Œé¢çš„åƒåœ¾å †ç§¯çš„ä»·å€¼å¤§å°ï¼ˆå›æ”¶æ‰€è·å¾—çš„ç©ºé—´å¤§å°ä»¥åŠå›æ”¶æ‰€éœ€æ—¶é—´çš„ç»éªŒå€¼ï¼‰ï¼Œåœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆåˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„ Regionç”±äºè¿™ç§æ–¹å¼çš„ä¾§é‡ç‚¹åœ¨äºå›æ”¶åƒåœ¾æœ€å¤§é‡çš„åŒºé—´( Region),æ‰€ä»¥æˆ‘ä»¬ç»™G1ä¸€ä¸ªåå­—ï¼šåƒåœ¾ä¼˜å…ˆ(Garbage First)ã€‚ æ—¢ç„¶æˆ‘ä»¬å·²ç»æœ‰äº†å‰é¢å‡ ä¸ªå¼ºå¤§çš„GC,ä¸ºä»€ä¹ˆè¿˜è¦å‘å¸ƒ Garbage First(G1)GC? åŸå› å°±åœ¨äºåº”ç”¨ç¨‹åºæ‰€åº”å¯¹çš„ä¸šåŠ¡è¶Šæ¥è¶Šåºå¤§ã€å¤æ‚ï¼Œç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œæ²¡æœ‰GCå°±ä¸èƒ½ä¿è¯åº”ç”¨ç¨‹åºæ­£å¸¸è¿›è¡Œï¼Œè€Œç»å¸¸é€ æˆSTWçš„GCåˆè·Ÿä¸ä¸Šå®é™…çš„éœ€æ±‚ï¼Œæ‰€ä»¥æ‰ä¼šä¸æ–­åœ°å°è¯•å¯¹GCè¿›è¡Œä¼˜åŒ–ã€‚G1( Garbage- First)åƒåœ¾å›æ”¶å™¨æ˜¯åœ¨Java7 update4ä¹‹åå¼•å…¥çš„ä¸€ä¸ªæ–°çš„åƒåœ¾å›æ”¶å™¨ï¼Œæ˜¯å½“ä»Šæ”¶é›†å™¨æŠ€æœ¯å‘å±•çš„æœ€å‰æ²¿æˆæœä¹‹ä¸€ã€‚ ä¸æ­¤åŒæ—¶ï¼Œä¸ºäº†é€‚åº”ç°åœ¨ä¸æ–­æ‰©å¤§çš„å†…å­˜å’Œä¸æ–­å¢åŠ çš„å¤„ç†å™¨æ•°é‡ï¼Œè¿›ä¸€æ­¥é™ä½æš‚åœæ—¶é—´( pause time),åŒæ—¶å…¼é¡¾è‰¯å¥½çš„ååé‡ã€‚å®˜æ–¹ç»™G1è®¾å®šçš„ç›®æ ‡æ˜¯åœ¨å»¶é€€å¯æ§çš„æƒ…å†µä¸‹è·å¾—å°½å¯èƒ½é«˜çš„ååé‡ï¼Œæ‰€ä»¥æ‰æ‹…å½“èµ·â€œå…¨åŠŸèƒ½æ”¶é›†å™¨â€çš„é‡ä»»ä¸æœŸæœ›ã€‚ â€‹ G1( Garbage- First)æ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼Œä¸»è¦é’ˆå¯¹é…å¤‡å¤šæ ¸CPUåŠå¤§å®¹é‡å†…å­˜çš„æœºå™¨ï¼Œä»¥æé«˜æ¦‚ç‡æ»¡è¶³GCåœé¡¿æ—¶é—´çš„åŒæ—¶ï¼Œè¿˜å…¼å…·é«˜ååé‡çš„æ€§èƒ½ç‰¹å¾ã€‚ â€‹ åœ¨JDK1.7ç‰ˆæœ¬æ­£å¼å¯ç”¨ï¼Œç§»é™¤äº† Experimentalçš„æ ‡è¯†ï¼Œæ˜¯JDK9ä»¥åçš„é»˜è®¤åƒåœ¾å›æ”¶å™¨ï¼Œå–ä»£äº†CMSå›æ”¶å™¨ä»¥åŠParalel Parallel Oldç»„åˆã€‚è¢« Oracleå®˜æ–¹ç§°ä¸ºâ€œå…¨åŠŸèƒ½çš„åƒåœ¾æ”¶é›†å™¨â€ã€‚ä¸æ­¤åŒæ—¶ï¼ŒCMSå·²ç»åœ¨JDK9ä¸­è¢«æ ‡è®°ä¸ºåºŸå¼ƒ( deprecated)ã€‚åœ¨jdk8ä¸­è¿˜ä¸æ˜¯é»˜è®¤çš„åƒåœ¾å›æ”¶å™¨ï¼Œéœ€è¦ä½¿ç”¨ -XX: UseG1GCæ¥å¯ç”¨ã€‚ ä¼˜åŠ¿ ä¸å…¶ä»–GCæ”¶é›†å™¨ç›¸æ¯”ï¼ŒG1ä½¿ç”¨äº†å…¨æ–°çš„åˆ†åŒºç®—æ³•ï¼Œå…¶ç‰¹ç‚¹å¦‚ä¸‹æ‰€ç¤ºï¼š å¹¶è¡Œä¸å¹¶å‘ å¹¶è¡Œæ€§ï¼šG1åœ¨å›æ”¶æœŸé—´ï¼Œå¯ä»¥æœ‰å¤šä¸ªGCçº¿ç¨‹åŒæ—¶å·¥ä½œï¼Œæœ‰æ•ˆåˆ©ç”¨å¤šæ ¸è®¡ç®—èƒ½åŠ›ã€‚æ­¤æ—¶ç”¨æˆ·çº¿ç¨‹STW å¹¶å‘æ€§ï¼šG1æ‹¥æœ‰ä¸åº”ç”¨ç¨‹åºäº¤æ›¿æ‰§è¡Œçš„èƒ½åŠ›ï¼Œéƒ¨åˆ†å·¥ä½œå¯ä»¥å’Œåº”ç”¨ç¨‹åºåŒæ—¶æ‰§è¡Œï¼Œå› æ­¤ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸ä¼šåœ¨æ•´ä¸ªå›æ”¶é˜¶æ®µå‘ç”Ÿå®Œå…¨é˜»å¡åº”ç”¨ç¨‹åºçš„æƒ…å†µã€‚ åˆ†ä»£æ”¶é›† ä»åˆ†ä»£ä¸Šçœ‹ï¼ŒG1ä¾ç„¶å±äºåˆ†ä»£å‹åƒåœ¾å›æ”¶å™¨ï¼Œå®ƒä¼šåŒºåˆ†å¹´è½»ä»£å’Œè€å¹´ä»£ï¼Œå¹´è½»ä»£ä¾ç„¶æœ‰EdenåŒºå’Œ SurvivoråŒºã€‚ä½†ä»å †çš„ç»“æ„ä¸Šçœ‹ï¼Œå®ƒä¸è¦æ±‚æ•´ä¸ªEdenåŒºã€å¹´è½»ä»£æˆ–è€…è€å¹´ä»£éƒ½æ˜¯è¿ç»­çš„ï¼Œä¹Ÿä¸å†åšæŒå›ºå®šå¤§å°å’Œå›ºå®šæ•°é‡ã€‚å°†å †ç©ºé—´åˆ†ä¸ºè‹¥å¹²ä¸ªåŒºåŸŸ( Region),è¿™äº›åŒºåŸŸä¸­åŒ…å«äº†é€»è¾‘ä¸Šçš„å¹´è½»ä»£å’Œè€å¹´ä»£ã€‚å’Œä¹‹å‰çš„å„ç±»å›æ”¶å™¨ä¸åŒï¼Œå®ƒåŒæ—¶å…¼é¡¾å¹´è½»ä»£å’Œè€å¹´ä»£ã€‚å¯¹æ¯”å…¶ä»–å›æ”¶å™¨ï¼Œæˆ–è€…å·¥ä½œåœ¨å¹´è½»ä»£ï¼Œæˆ–è€…å·¥ä½œåœ¨è€å¹´ä»£ï¼› ç©ºé—´æ•´åˆ â€‹ CMS:â€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•ã€å†…å­˜ç¢ç‰‡ã€è‹¥å¹²æ¬¡GCåè¿›è¡Œä¸€æ¬¡ç¢ç‰‡æ•´ç†ã€‚G1å°†å†…å­˜åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªçš„ regionã€‚å†…å­˜çš„å›æ”¶æ˜¯ä»¥ regiontä½œä¸ºåŸºæœ¬å•ä½çš„ã€‚Regionä¹‹é—´æ˜¯å¤åˆ¶ç®—æ³•ï¼Œä½†æ•´ä½“ä¸Šå®é™…å¯çœ‹ä½œæ˜¯æ ‡è®°ä¸€å‹ç¼©ï¼ˆMark- Compactç®—æ³•ï¼Œä¸¤ç§ç®—æ³•éƒ½å¯ä»¥é¿å…å†…å­˜ç¢ç‰‡ã€‚è¿™ç§ç‰¹æ€§æœ‰åˆ©äºç¨‹åºé•¿æ—¶é—´è¿è¡Œï¼Œåˆ†é…å¤§å¯¹è±¡æ—¶ä¸ä¼šå› ä¸ºæ— æ³•æ‰¾åˆ°è¿ç»­å†…å­˜ç©ºé—´è€Œæå‰è§¦å‘ä¸‹ä¸€æ¬¡GCã€‚å°¤å…¶æ˜¯å½“Javaå †éå¸¸å¤§çš„æ—¶å€™ï¼ŒG1çš„ä¼˜åŠ¿æ›´åŠ æ˜æ˜¾ã€‚ å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹(å³ï¼šè½¯å®æ—¶ soft real-time) â€‹ è¿™æ˜¯G1ç›¸å¯¹äºCMSçš„å¦ä¸€å¤§ä¼˜åŠ¿ï¼ŒG1é™¤äº†è¿½æ±‚ä½åœé¡¿å¤–ï¼Œè¿˜èƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ï¼Œèƒ½è®©ä½¿ç”¨è€…æ˜ç¡®æŒ‡å®šåœ¨ä¸€ä¸ªé•¿åº¦ä¸ºMæ¯«ç§’çš„æ—¶é—´ç‰‡æ®µå†…ï¼Œæ¶ˆè€—åœ¨åƒåœ¾æ”¶é›†ä¸Šçš„æ—¶é—´ä¸å¾—è¶…è¿‡Næ¯«ç§’ã€‚ç”±äºåˆ†åŒºçš„åŸå› ï¼ŒG1å¯ä»¥åªé€‰å–éƒ¨åˆ†åŒºåŸŸè¿›è¡Œå†…å­˜å›æ”¶ï¼Œè¿™æ ·ç¼©å°äº†å›æ”¶çš„èŒƒå›´ï¼Œå› æ­¤å¯¹äºå…¨å±€åœé¡¿æƒ…å†µçš„å‘ç”Ÿä¹Ÿèƒ½å¾—åˆ°è¾ƒå¥½çš„æ§åˆ¶ã€‚ â€‹ G1è·Ÿè¸ªå„ä¸ª Region é‡Œé¢çš„åƒåœ¾å †ç§¯çš„ä»·å€¼å¤§å°ï¼ˆå›æ”¶æ‰€è·å¾—çš„ç©ºé—´å¤§å°ä»¥åŠå›æ”¶æ‰€éœ€æ—¶é—´çš„ç»éªŒå€¼ï¼‰ï¼Œåœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆåˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„ Regionã€‚ä¿è¯äº†G1æ”¶é›†å™¨åœ¨æœ‰é™çš„æ—¶é—´å†…å¯ä»¥è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ã€‚ç›¸æ¯”äº CMS GC,G1æœªå¿…èƒ½åšåˆ°CMSåœ¨æœ€å¥½æƒ…å†µä¸‹çš„å»¶æ—¶åœé¡¿ï¼Œä½†æ˜¯æœ€å·®æƒ…å†µè¦å¥½å¾ˆå¤šã€‚ â€‹ ç›¸è¾ƒäºCMS,G1è¿˜ä¸å…·å¤‡å…¨æ–¹ä½ã€å‹å€’æ€§ä¼˜åŠ¿ã€‚æ¯”å¦‚åœ¨ç”¨æˆ·ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒG1æ— è®ºæ˜¯ä¸ºäº†åƒåœ¾æ”¶é›†äº§ç”Ÿçš„å†…å­˜å ç”¨( Footprint)è¿˜æ˜¯ç¨‹åºè¿è¡Œæ—¶çš„é¢å¤–æ‰§è¡Œè´Ÿè½½( overload)éƒ½è¦æ¯”CMSè¦é«˜ã€‚ä»ç»éªŒä¸Šæ¥è¯´ï¼Œåœ¨å°å†…å­˜åº”ç”¨ä¸ŠCMSçš„è¡¨ç°å¤§æ¦‚ç‡ä¼šä¼˜äºG1,è€ŒG1åœ¨å¤§å†…å­˜åº”ç”¨ä¸Šåˆ™å‘æŒ¥å…¶ä¼˜åŠ¿ã€‚å¹³è¡¡ç‚¹åœ¨6-8GBä¹‹é—´ã€‚ å‚æ•°è®¾ç½® -XX:+UseG1GCæ‰‹åŠ¨æŒ‡å®šä½¿ç”¨G1æ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡ -XX:G1HeapRegionSizeè®¾ç½®æ¯ä¸ª Regionlçš„å¤§å°ã€‚å€¼æ˜¯2çš„å¹‚ï¼ŒèŒƒå›´æ˜¯1MBåˆ°32MBä¹‹é—´ï¼Œç›®æ ‡æ˜¯æ ¹æ®æœ€å°çš„Javaå †å¤§å°åˆ’åˆ†å‡ºçº¦2048ä¸ªåŒºåŸŸã€‚é»˜è®¤æ˜¯å †å†…å­˜çš„1/2000 -XX: MaxGCPauseMilllisè®¾ç½®æœŸæœ›è¾¾åˆ°çš„æœ€å¤§GCåœé¡¿æ—¶é—´æŒ‡æ ‡ï¼ˆJVMä¼šå°½åŠ›å®ç°ï¼Œä½†ä¸ä¿è¯è¾¾åˆ°ï¼‰,é»˜è®¤å€¼æ˜¯200msã€‚ -XX:ParallelGCThreadsè®¾ç½®STWå·¥ä½œçº¿ç¨‹æ•°çš„å€¼ã€‚æœ€å¤šè®¾ç½®ä¸º8ã€‚ -XX:ConcGCThreadsè®¾ç½®å¹¶å‘æ ‡è®°çš„çº¿ç¨‹æ•°ã€‚å°†nè®¾ç½®ä¸ºå¹¶è¡Œåƒåœ¾å›æ”¶çº¿ç¨‹æ•°(ParallelGCThreadS)çš„1/4å·¦å³ã€‚ -XX: InitiatingHeapOccupancyPercentè®¾ç½®è§¦å‘å¹¶å‘GCå‘¨æœŸçš„Javaã€‚å †å ç”¨ç‡é˜ˆå€¼ã€‚è¶…è¿‡æ­¤å€¼ï¼Œå°±è§¦å‘GCã€‚é»˜è®¤å€¼æ˜¯45ã€‚ G1å›æ”¶å™¨å¸¸è§æ­¥éª¤ G1çš„è®¾è®¡åŸåˆ™å°±æ˜¯ç®€åŒ–JVMæ€§èƒ½è°ƒä¼˜ï¼Œå¼€å‘äººå‘˜åªéœ€è¦ç®€å•çš„ä¸‰æ­¥å³å¯å®Œæˆè°ƒä¼˜ ç¬¬ä¸€æ­¥ï¼šå¼€å¯G1åƒåœ¾æ”¶é›†å™¨ ç¬¬äºŒæ­¥ï¼šè®¾ç½®å †çš„æœ€å¤§å†…å­˜ ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æœ€å¤§çš„åœé¡¿æ—¶é—´ G1ä¸­æä¾›äº†ä¸‰ç§åƒåœ¾å›æ”¶æ¨¡å¼ï¼š YoungGCã€ Mixed GCå’ŒFullGC,åœ¨ä¸åŒçš„æ¡ä»¶ä¸‹è¢«è§¦å‘ã€‚ ä½¿ç”¨åœºæ™¯ é¢å‘æœåŠ¡ç«¯åº”ç”¨ï¼Œé’ˆå¯¹å…·æœ‰å¤§å†…å­˜ã€å¤šå¤„ç†å™¨çš„æœºå™¨ã€‚ï¼ˆåœ¨æ™®é€šå¤§å°çš„å †é‡Œè¡¨ç°å¹¶ä¸æƒŠå–œï¼‰ æœ€ä¸»è¦çš„åº”ç”¨æ˜¯éœ€è¦ä½GCå»¶è¿Ÿï¼Œå¹¶å…·æœ‰å¤§å †çš„åº”ç”¨ç¨‹åºæä¾›è§£å†³æ–¹æ¡ˆï¼›å¦‚ï¼šåœ¨å †å¤§å°çº¦6GBæˆ–æ›´å¤§æ—¶ï¼Œå¯é¢„æµ‹çš„æš‚åœæ—¶é—´å¯ä»¥ä½äº8.5ç§’ï¼›ï¼ˆG1é€šè¿‡æ¯æ¬¡åªæ¸…ç†ä¸€éƒ¨åˆ†è€Œä¸æ˜¯å…¨éƒ¨çš„ Regionçš„å¢é‡å¼æ¸…ç†æ¥ä¿è¯æ¯æ¬¡Gåœé¡¿æ—¶é—´ä¸ä¼šè¿‡é•¿ï¼‰ç”¨æ¥æ›¿æ¢æ‰JDK1.5ä¸­çš„CMSæ”¶é›†å™¨ åœ¨ä¸‹é¢çš„æƒ…å†µæ—¶ï¼Œä½¿ç”¨G1å¯èƒ½æ¯”CMSå¥½ï¼š â‘ è¶…è¿‡50%çš„Javaå †è¢«æ´»åŠ¨æ•°æ®å ç”¨ï¼› â‘¡å¯¹è±¡åˆ†é…é¢‘ç‡æˆ–å¹´ä»£æå‡é¢‘ç‡å˜åŒ–å¾ˆå¤§ï¼› â‘¢GCåœé¡¿æ—¶é—´è¿‡é•¿(é•¿äº6.5è‡³1ç§’)ï¼› Hotspotåƒåœ¾æ”¶é›†å™¨é‡Œï¼Œé™¤äº†G1ä»¥å¤–ï¼Œå…¶ä»–çš„åƒåœ¾æ”¶é›†å™¨ä½¿ç”¨å†…ç½®çš„JVMçº¿ç¨‹æ‰§è¡Œã€‚GCçš„å¤šçº¿ç¨‹æ“ä½œï¼Œè€ŒG1GCå¯ä»¥é‡‡ç”¨åº”ç”¨çº¿ç¨‹æ‰¿æ‹…åå°è¿è¡Œçš„GCå·¥ä½œï¼Œå³å½“JVMçš„GCçº¿ç¨‹å¤„ç†é€Ÿåº¦æ…¢æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨åº”ç”¨ç¨‹åºçº¿ç¨‹å¸®åŠ©åŠ é€Ÿåƒåœ¾å›æ”¶è¿‡ç¨‹ã€‚ Region â€‹ ä½¿ç”¨G1æ”¶é›†å™¨æ—¶ï¼Œå®ƒå°†æ•´ä¸ªJavaå †åˆ’åˆ†æˆçº¦2048ä¸ªå¤§å°ç›¸åŒçš„ç‹¬ç«‹ Regionå—ï¼Œæ¯ä¸ª Regionå—å¤§å°æ ¹æ®å †ç©ºé—´çš„å®é™…å¤§å°è€Œå®šï¼Œæ•´ä½“è¢«æ§åˆ¶åœ¨1MBåˆ°32MBä¹‹é—´ï¼Œä¸”ä¸º2çš„Næ¬¡å¹‚ï¼Œå³1MB,2MB,4MB,8MB,16MB,32MBã€‚å¯ä»¥é€šè¿‡**-XX:G1HeapRegionSize**è®¾å®šã€‚æ‰€æœ‰çš„ Regionå¤§å°ç›¸åŒï¼Œä¸”åœ¨JVMç”Ÿå‘½å‘¨æœŸå†…ä¸ä¼šè¢«æ”¹å˜ã€‚ â€‹ è™½ç„¶è¿˜ä¿ç•™æœ‰æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„æ¦‚å¿µï¼Œä½†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¸å†æ˜¯ç‰©ç†éš”ç¦»çš„äº†ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸€éƒ¨åˆ† Regionï¼ˆä¸éœ€è¦è¿ç»­ï¼‰çš„é›†åˆã€‚é€šè¿‡ Regionçš„åŠ¨æ€åˆ†é…æ–¹å¼å®ç°é€»è¾‘ä¸Šçš„è¿ç»­ã€‚ â€‹ ä¸€ä¸ª regionæœ‰å¯èƒ½å±äºEden, Survivoræˆ–è€…Old/ Tenuredå†…å­˜åŒºåŸŸã€‚ä½†æ˜¯ ä¸€ä¸ª regionåªå¯èƒ½å±äºä¸€ä¸ªè§’è‰²ã€‚å›¾ä¸­çš„Eè¡¨ç¤ºè¯¥ regionå±äºEdenå†…å­˜åŒºåŸŸï¼ŒSè¡¨ç¤ºå±äº Survivorå†…å­˜åŒºåŸŸï¼ŒOè¡¨ç¤ºå±äºOldå†…å­˜åŒºåŸŸã€‚å›¾ä¸­ç©ºç™½çš„è¡¨ç¤ºæœªä½¿ç”¨çš„å†…å­˜ç©ºé—´ã€‚ â€‹ G1åƒåœ¾æ”¶é›†å™¨è¿˜å¢åŠ äº†ä¸€ç§æ–°çš„å†…å­˜åŒºåŸŸï¼Œå«åš Humongouså†…å­˜åŒºåŸŸï¼Œå¦‚å›¾ä¸­çš„Hå—ã€‚ä¸»è¦ç”¨äºå­˜å‚¨å¤§å¯¹è±¡ï¼Œå¦‚æœè¶…è¿‡1.5ä¸ª region,å°±æ”¾åˆ°Hã€‚ **è®¾ç½®Hçš„åŸå› ï¼š**å¯¹äºå †ä¸­çš„å¤§å¯¹è±¡ï¼Œé»˜è®¤ç›´æ¥ä¼šè¢«åˆ†é…åˆ°è€å¹´ä»£ï¼Œä½†æ˜¯å¦‚æœå®ƒæ˜¯ä¸€ä¸ªçŸ­æœŸå­˜åœ¨çš„å¤§å¯¹è±¡ï¼Œå°±ä¼šå¯¹åƒåœ¾æ”¶é›†å™¨é€ æˆè´Ÿé¢å½±å“ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒG1åˆ’åˆ†äº†ä¸€ä¸ª HumongousåŒºã€‚å®ƒç”¨æ¥ä¸“é—¨å­˜æ”¾å¤§å¯¹è±¡ã€‚å¦‚æœä¸€ä¸ªHåŒºè£…ä¸ä¸‹ãƒ¼ä¸ªå¤§å¯¹è±¡ï¼Œé‚£ä¹ˆG1ä¼šå¯»æ‰¾è¿ç»­çš„HåŒºæ¥å­˜å‚¨ã€‚ä¸ºäº†èƒ½æ‰¾åˆ°è¿ç»­çš„HåŒºï¼Œæœ‰æ—¶å€™ä¸å¾—ä¸å¯åŠ¨Full GC.G1çš„å¤§å¤šæ•°è¡Œä¸ºéƒ½æŠŠHåŒºä½œä¸ºè€å¹´ä»£çš„ä¸€éƒ¨åˆ†æ¥çœ‹å¾…ã€‚ G1 å›æ”¶è¿‡ç¨‹ G1 GCçš„åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹ä¸‰ä¸ªç¯èŠ‚ å¹´è½»ä»£GC( Young GC) è€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹( Concurrent Marking) æ··åˆå›æ”¶( Mixed GC) (å¦‚æœéœ€è¦ï¼Œå•çº¿ç¨‹ã€ç‹¬å å¼ã€é«˜å¼ºåº¦çš„FullGCè¿˜æ˜¯ç»§ç»­å­˜åœ¨çš„ã€‚å®ƒé’ˆå¯¹GCçš„è¯„ä¼°å¤±è´¥æä¾›äº†ä¸€ç§å¤±è´¥ä¿æŠ¤æœºåˆ¶ï¼Œå³å¼ºåŠ›å›æ”¶ã€‚ï¼‰ â€‹ åº”ç”¨ç¨‹åºåˆ†é…å†…å­˜ï¼Œå½“å¹´è½»ä»£çš„EdenåŒºç”¨å°½æ—¶å¼€å§‹å¹´è½»ä»£å›æ”¶è¿‡ç¨‹ï¼›G1çš„å¹´è½»ä»£æ”¶é›†é˜¶æ®µæ˜¯ä¸€ä¸ªå¹¶è¡Œçš„ç‹¬å å¼æ”¶é›†å™¨ã€‚åœ¨å¹´è½»ä»£å›æ”¶æœŸï¼ŒG1GCæš‚åœæ‰€æœ‰åº”ç”¨ç¨‹åºçº¿ç¨‹ï¼Œå¯åŠ¨å¤šçº¿ç¨‹æ‰§è¡Œå¹´è½»ä»£å›æ”¶ã€‚ç„¶åä»å¹´è½»ä»£åŒºé—´ç§»åŠ¨å­˜æ´»å¯¹è±¡åˆ° SurvivoråŒºé—´æˆ–è€…è€å¹´åŒºé—´ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸¤ä¸ªåŒºé—´éƒ½ä¼šæ¶‰åŠã€‚ å½“å †å†…å­˜ä½¿ç”¨è¾¾åˆ°ä¸€å®šå€¼(é»˜è®¤45%)æ—¶ï¼Œå¼€å§‹è€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹ã€‚æ ‡è®°å®Œæˆé©¬ä¸Šå¼€å§‹æ··åˆå›æ”¶è¿‡ç¨‹ã€‚å¯¹äºä¸€ä¸ªæ··åˆå›æ”¶æœŸï¼ŒG1GCä»è€å¹´åŒºé—´ç§»åŠ¨å­˜æ´»å¯¹è±¡åˆ°ç©ºé—²åŒºé—´ï¼Œè¿™äº›ç©ºé—²åŒºé—´ä¹Ÿå°±æˆä¸ºäº†è€å¹´ä»£çš„ä¸€éƒ¨åˆ†ã€‚å’Œå¹´è½»ä»£ä¸åŒï¼Œè€å¹´ä»£çš„G1å›æ”¶å™¨å’Œå…¶ä»–GCä¸åŒï¼ŒG1çš„è€å¹´ä»£å›æ”¶å™¨ä¸éœ€è¦æ•´ä¸ªè€å¹´ä»£è¢«å›æ”¶ï¼Œä¸€æ¬¡åªéœ€è¦æ‰«æ/å›æ”¶å°éƒ¨åˆ†è€å¹´ä»£çš„ Regionå°±å¯ä»¥äº†ã€‚åŒæ—¶ï¼Œè¿™ä¸ªè€å¹´ä»£ Regionæ˜¯å’Œå¹´è½»ä»£ä¸€èµ·è¢«å›æ”¶çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼šä¸€ä¸ªWebæœåŠ¡å™¨ï¼ŒJavaè¿›ç¨‹æœ€å¤§å †å†…å­˜ä¸º4G,æ¯åˆ†é’Ÿå“åº”1500ä¸ªè¯·æ±‚ï¼Œæ¯45ç§’é’Ÿä¼šæ–°åˆ†é…å¤§çº¦2Gçš„å†…å­˜ã€‚G1ä¼šæ¯45ç§’é’Ÿè¿›è¡Œä¸€æ¬¡å¹´è½»ä»£å›æ”¶ï¼Œæ¯31ä¸ªå°æ—¶æ•´ä¸ªå †çš„ä½¿ç”¨ç‡ä¼šè¾¾åˆ°45%,ä¼šå¼€å§‹è€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹ï¼Œæ ‡è®°å®Œæˆåå¼€å§‹å››åˆ°äº”æ¬¡çš„æ··åˆå›æ”¶ã€‚ Remembered Set ä¸€ä¸ªå¯¹è±¡è¢«ä¸åŒåŒºåŸŸå¼•ç”¨çš„é—®é¢˜ã€‚ä¸€ä¸ª Regionä¸å¯èƒ½æ˜¯å­¤ç«‹çš„ï¼Œä¸€ä¸ª Regionä¸­çš„å¯¹è±¡å¯èƒ½è¢«å…¶ä»–ä»»æ„ Regionä¸­å¯¹è±¡å¼•ç”¨ï¼Œåˆ¤æ–­å¯¹è±¡å­˜æ´»æ—¶ï¼Œæ˜¯å¦éœ€è¦æ‰«ææ•´ä¸ªJavaå †æ‰èƒ½ä¿è¯å‡†ç¡®ã€‚åœ¨å…¶ä»–çš„åˆ†ä»£æ”¶é›†å™¨ï¼Œä¹Ÿå­˜åœ¨è¿™æ ·çš„é—®é¢˜(è€ŒG1æ›´çªå‡º)ã€‚å›æ”¶æ–°ç”Ÿä»£ä¹Ÿä¸å¾—ä¸åŒæ—¶æ‰«æè€å¹´ä»£ï¼Ÿè¿™æ ·çš„è¯ä¼šé™ä½ Minor GCçš„æ•ˆç‡ã€‚ è§£å†³æ–¹æ³•ï¼š æ— è®ºG1è¿˜æ˜¯å…¶ä»–åˆ†ä»£æ”¶é›†å™¨ï¼ŒJVMéƒ½æ˜¯ä½¿ç”¨ Remembered Setæ¥é¿å…å…¨å±€æ‰«æï¼šæ¯ä¸ª Regionéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ Remembered Set;æ¯æ¬¡ Referenceç±»å‹æ•°æ®å†™æ“ä½œæ—¶ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ª Write Barrieræš‚æ—¶ä¸­æ–­æ“ä½œï¼›ç„¶åæ£€æŸ¥å°†è¦å†™å…¥çš„å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡æ˜¯å¦å’Œè¯¥ Referenceaç±»å‹æ•°æ®åœ¨ä¸åŒçš„ Region(å…¶ä»–æ”¶é›†å™¨ï¼šæ£€æŸ»è€å¹´ä»£å¯¹è±¡æ˜¯å¦å¼•ç”¨äº†æ–°ç”Ÿä»£å¯¹è±¡ï¼‰ï¼›å¦‚æœä¸åŒï¼Œé€šè¿‡ CardtableæŠŠç›¸å…³å¼•ç”¨ä¿¡æ¯è®°å½•åˆ°å¼•ç”¨æŒ‡å‘å¯¹è±¡çš„æ‰€åœ¨ Regionå¯¹åº”çš„ Remembered Setä¸­ï¼›å½“è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œåœ¨GCæ ¹èŠ‚ç‚¹çš„æšä¸¾èŒƒå›´åŠ å…¥ Remembered Set:å°±å¯ä»¥ä¿è¯ä¸è¿›è¡Œå…¨å±€æ‰«æï¼Œä¹Ÿä¸ä¼šæœ‰é—æ¼ã€‚ å›æ”¶è¿‡ç¨‹ä¸€ï¼šå¹´è½»ä»£GC â€‹ JVMå¯åŠ¨æ—¶ï¼ŒG1å…ˆå‡†å¤‡å¥½EdenåŒºï¼Œç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸æ–­åˆ›å»ºå¯¹è±¡åˆ°EdenåŒºï¼Œå½“Edenç©ºé—´è€—å°½æ—¶ï¼ŒG1ä¼šå¯åŠ¨ä¸€æ¬¡å¹´è½»ä»£åƒåœ¾å›æ”¶è¿‡ç¨‹ã€‚å¹´è½»ä»£åƒåœ¾å›æ”¶åªä¼šå›æ”¶EdenåŒºå’Œ SurvivoråŒºã€‚é¦–å…ˆ61åœæ­¢åº”ç”¨ç¨‹åºçš„æ‰§è¡Œ(Stop-The-World),G1åˆ›å»ºå›æ”¶é›†(Collection Set),å›æ”¶é›†æ˜¯æŒ‡éœ€è¦è¢«å›æ”¶çš„å†…å­˜åˆ†æ®µçš„é›†åˆï¼Œå¹´è½»ä»£å›æ”¶è¿‡ç¨‹çš„å›æ”¶é›†åŒ…å«å¹´è½»ä»£EdenåŒºå’Œ SurvivoråŒºæ‰€æœ‰çš„å†…å­˜åˆ†æ®µã€‚ ç„¶åå¼€å§‹å¦‚ä¸‹å›æ”¶è¿‡ç¨‹ï¼š ç¬¬ä¸€é˜¶æ®µï¼Œæ‰«ææ ¹ã€‚ æ ¹æ˜¯æŒ‡ staticå˜é‡æŒ‡å‘çš„å¯¹è±¡ï¼Œæ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•è°ƒç”¨é“¾æ¡ä¸Šçš„å±€éƒ¨å˜é‡ç­‰ã€‚æ ¹å¼•ç”¨è¿åŒRSetè®°å½•çš„å¤–éƒ¨å¼•ç”¨ä½œä¸ºæ‰«æå­˜æ´»å¯¹è±¡çš„å…¥å£ ç¬¬äºŒé˜¶æ®µï¼Œæ›´æ–°RSet. å¤„ç† dirty card queueï¼ˆè§å¤‡æ³¨ï¼‰ä¸­çš„card,æ›´æ–°RSetã€‚æ­¤é˜¶æ®µå®Œæˆåï¼ŒRSetå¯ä»¥å‡†ç¡®çš„åæ˜ è€å¹´ä»£å¯¹æ‰€åœ¨çš„å†…å­˜åˆ†æ®µä¸­å¯¹è±¡çš„å¼•ç”¨ã€‚ ç¬¬ä¸‰é˜¶æ®µï¼Œå¤„ç†RSet. è¯†åˆ«è¢«è€å¹´ä»£å¯¹è±¡æŒ‡å‘çš„Edenä¸­çš„å¯¹è±¡ï¼Œè¿™äº›è¢«æŒ‡å‘çš„Edenä¸­çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯å­˜æ´»çš„å¯¹è±¡ã€‚ ç¬¬å››é˜¶æ®µï¼Œå¤åˆ¶å¯¹è±¡ã€‚ æ­¤é˜¶æ®µï¼Œå¯¹è±¡æ ‘è¢«éå†ï¼ŒEdenåŒºå†…å­˜æ®µä¸­å­˜æ´»çš„å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ° SurvivoråŒºä¸­ç©ºçš„å†…å­˜åˆ†æ®µï¼ŒSurvivoråŒºå†…å­˜æ®µä¸­å­˜æ´»çš„å¯¹è±¡å¦‚æœå¹´é¾„æœªè¾¾é˜ˆå€¼ï¼Œå¹´é¾„ä¼šåŠ 1,è¾¾åˆ°é˜€å€¼ä¼šè¢«ä¼šè¢«å¤åˆ¶åˆ°0ldåŒºä¸­ç©ºçš„å†…å­˜åˆ†æ®µã€‚å¦‚æœ Survivorç©ºé—´ä¸å¤Ÿï¼ŒEdenç©ºé—´çš„éƒ¨åˆ†æ•°æ®ä¼šç›´æ¥æ™‹å‡åˆ°è€å¹´ä»£ç©ºé—´ã€‚ ç¬¬äº”é˜¶æ®µï¼Œå¤„ç†å¼•ç”¨ã€‚ å¤„ç†Soft,Weak, Phantom,Fina1, JNI Weakç­‰å¼•ç”¨ã€‚æœ€ç»ˆEdenç©ºé—´çš„æ•°æ®ä¸ºç©ºï¼ŒGCåœæ­¢å·¥ä½œï¼Œè€Œç›®æ ‡å†…å­˜ä¸­çš„å¯¹è±¡éƒ½æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œæ²¡æœ‰ç¢ç‰‡ï¼Œæ‰€ä»¥å¤åˆ¶è¿‡ç¨‹å¯ä»¥è¾¾åˆ°å†…å­˜æ•´ç†çš„æ•ˆæœï¼Œå‡å°‘ç¢ç‰‡ã€‚ å›æ”¶è¿‡ç¨‹äºŒï¼šå¹¶å‘æ ‡è®°è¿‡ç¨‹ åˆå§‹æ ‡è®°é˜¶æ®µï¼šæ ‡è®°ä»æ ¹èŠ‚ç‚¹ç›´æ¥å¯è¾¾çš„å¯¹è±¡ã€‚è¿™ä¸ªé˜¶æ®µæ˜¯STWçš„ï¼Œå¹¶ä¸”ä¼šè§¦å‘ä¸€æ¬¡å¹´è½»ä»£GC. æ ¹åŒºåŸŸæ‰«æ( Root Region Scanning):G1 GCæ‰«æ SurvivoråŒºç›´æ¥å¯è¾¾çš„è€å¹´ä»£åŒºåŸŸå¯¹è±¡ï¼Œå¹¶æ ‡è®°è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚è¿™ä¸€è¿‡ç¨‹å¿…é¡»åœ¨ young GCä¹‹å‰å®Œæˆ å¹¶å‘æ ‡è®°( Concurrent Marking):åœ¨æ•´ä¸ªå †ä¸­è¿›è¡Œå¹¶å‘æ ‡è®°ï¼ˆå’Œåº”ç”¨ç¨‹åºå¹¶å‘æ‰§è¡Œï¼‰ï¼Œæ­¤è¿‡ç¨‹å¯èƒ½è¢« young GCä¸­æ–­ã€‚åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼Œè‹¥å‘ç°åŒºåŸŸå¯¹è±¡ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯åƒåœ¾ï¼Œé‚£è¿™ä¸ªåŒºåŸŸä¼šè¢«ç«‹å³å›æ”¶ã€‚åŒæ—¶ï¼Œå¹¶å‘æ ‡è®°è¿‡ç¨‹ä¸­ï¼Œä¼šè®¡ç®—æ¯ä¸ªåŒºåŸŸçš„å¯¹è±¡æ´»æ€§ï¼ˆåŒºåŸŸä¸­å­˜æ´»å¯¹è±¡çš„æ¯”ä¾‹ï¼‰ã€‚ å†æ¬¡æ ‡è®°( Remark):ç”±äºåº”ç”¨ç¨‹åºæŒç»­è¿›è¡Œï¼Œéœ€è¦ä¿®æ­£ä¸Šä¸€æ¬¡çš„æ ‡è®°ç»“æœã€‚æ˜¯STWçš„ã€‚G1ä¸­é‡‡ç”¨äº†æ¯”CMSæ›´å¿«çš„åˆå§‹å¿«ç…§ç®—æ³•ï¼š snapshot-at-the- beginning(SATB)ã€‚ ç‹¬å æ¸…ç†(cleanup,STW):è®¡ç®—å„ä¸ªåŒºåŸŸçš„å­˜æ´»å¯¹è±¡å’ŒGCå›æ”¶æ¯”ä¾‹ï¼Œå¹¶è¿›è¡Œæ’åºï¼Œè¯†åˆ«å¯ä»¥æ··åˆå›æ”¶çš„åŒºåŸŸã€‚ä¸ºä¸‹é˜¶æ®µåšé“ºå«ã€‚æ˜¯STçš„ã€‚è¿™ä¸ªé˜¶æ®µå¹¶ä¸ä¼šå®é™…ä¸Šå»åšåƒåœ¾çš„æ”¶é›†å¹¶å‘æ¸…ç†é˜¶æ®µï¼šè¯†åˆ«å¹¶æ¸…ç†å®Œå…¨ç©ºé—²çš„åŒºåŸŸã€‚ å›æ”¶é˜¶æ®µä¸‰ï¼šæ··åˆå›æ”¶ â€‹ å½“è¶Šæ¥è¶Šå¤šçš„å¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£ã€‚old regionæ—¶ï¼Œä¸ºäº†é¿å…å †å†…å­˜è¢«è€—å°½ï¼Œè™šæ‹Ÿæœºä¼šè§¦å‘ä¸€ä¸ªæ··åˆçš„åƒåœ¾æ”¶é›†å™¨ï¼Œå³ Mixed GC,è¯¥ç®—æ³•å¹¶ä¸æ˜¯ä¸€ä¸ªOld GC,é™¤äº†å›æ”¶æ•´ä¸ª Young Region,è¿˜ä¼šå›æ”¶ä¸€éƒ¨åˆ†çš„Old Regionã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼šæ˜¯ä¸€éƒ¨åˆ†è€å¹´ä»£ï¼Œè€Œä¸æ˜¯å…¨éƒ¨è€å¹´ä»£ã€‚å¯ä»¥é€‰æ‹©å“ªäº›Old Regionè¿›è¡Œæ”¶é›†ï¼Œä»è€Œå¯ä»¥å¯¹åƒåœ¾å›æ”¶çš„è€—æ—¶æ—¶é—´è¿›è¡Œæ§åˆ¶ã€‚ä¹Ÿè¦æ³¨æ„çš„æ˜¯ Mixed GCå¹¶ä¸æ˜¯Full GCã€‚ å¹¶å‘æ ‡è®°ç»“æŸä»¥åï¼Œè€å¹´ä»£ä¸­ç™¾åˆ†ç™¾ä¸ºåƒåœ¾çš„å†…å­˜åˆ†æ®µè¢«å›æ”¶äº†ï¼Œéƒ¨åˆ†ä¸ºåƒåœ¾çš„å†…å­˜åˆ†æ®µè¢«è®¡ç®—äº†å‡ºæ¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›è€å¹´ä»£çš„å†…å­˜åˆ†æ®µä¼šåˆ†8æ¬¡(å¯ä»¥é€šè¿‡XX:G1 MixedGCCountTargetè®¾ç½®)è¢«å›æ”¶ã€‚ æ··åˆå›æ”¶çš„å›æ”¶é›†(Collection Set)åŒ…æ‹¬å…«åˆ†ä¹‹ä¸€çš„è€å¹´ä»£å†…å­˜åˆ†æ®µï¼ŒEdenåŒºå†…å­˜åˆ†æ®µï¼Œ SurvivoråŒºå†…å­˜åˆ†æ®µã€‚æ··åˆå›æ”¶çš„ç®—æ³•å’Œå¹´è½»ä»£å›æ”¶çš„ç®—æ³•å®Œå…¨ä¸€æ ·ï¼Œåªæ˜¯å›æ”¶é›†å¤šäº†è€å¹´ä»£çš„å†…å­˜åˆ†æ®µã€‚å…·ä½“è¿‡ç¨‹è¯·å‚è€ƒä¸Šé¢çš„å¹´è½»ä»£å›æ”¶è¿‡ç¨‹ã€‚ ç”±äºè€å¹´ä»£ä¸­çš„å†…å­˜åˆ†æ®µé»˜è®¤åˆ†8æ¬¡å›æ”¶ï¼ŒG1ä¼šä¼˜å…ˆå›æ”¶åƒåœ¾å¤šçš„å†…å­˜åˆ†æ®µã€‚åƒåœ¾å å†…å­˜åˆ†æ®µæ¯”ä¾‹è¶Šé«˜çš„ï¼Œè¶Šä¼šè¢«å…ˆå›æ”¶ã€‚å¹¶ä¸”æœ‰ä¸€ä¸ªé˜ˆå€¼ä¼šå†³å®šå†…å­˜åˆ†æ®µæ˜¯å¦è¢«å›æ”¶ï¼Œ-XX:G1 MixedGCliveThresholPercent,é»˜è®¤ä¸º65%,æ„æ€æ˜¯åƒåœ¾å å†…å­˜åˆ†æ®µæ¯”ä¾‹è¦è¾¾åˆ°65%æ‰ä¼šè¢«å›æ”¶ã€‚å¦‚æœåƒåœ¾å æ¯”å¤ªä½ï¼Œæ„å‘³ç€å­˜æ´»çš„å¯¹è±¡å æ¯”é«˜ï¼Œåœ¨å¤åˆ¶çš„æ—¶å€™ä¼šèŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚ æ··åˆå›æ”¶å¹¶ä¸ä¸€å®šè¦è¿›è¡Œ8æ¬¡ã€‚æœ‰ä¸€ä¸ªé˜ˆå€¼-XX:G1HeapWastePercent,é»˜è®¤å€¼ä¸º10%,æ„æ€æ˜¯å…è®¸æ•´ä¸ªå †å†…å­˜ä¸­æœ‰10%çš„ç©ºé—´è¢«æµªè´¹ï¼Œæ„å‘³ç€å¦‚æœå‘ç°å¯ä»¥å›æ”¶çš„åƒåœ¾å å †å†…å­˜çš„æ¯”ä¾‹ä½äº10%,åˆ™ä¸å†è¿›è¡Œæ··åˆå›æ”¶ã€‚å› ä¸ºGCä¼šèŠ±è´¹å¾ˆå¤šçš„æ—¶é—´ä½†æ˜¯å›æ”¶åˆ°çš„å†…å­˜å´å¾ˆå°‘ã€‚ æ€»ç»“ G1çš„åˆè¡·å°±æ˜¯è¦é¿å…Full GCçš„å‡ºç°ã€‚ä½†æ˜¯å¦‚æœä¸Šè¿°æ–¹å¼ä¸èƒ½æ­£å¸¸å·¥ä½œï¼ŒG1ä¼šåœæ­¢åº”ç”¨ç¨‹åºçš„æ‰§è¡Œ(Stop-The-World),ä½¿ç”¨å•çº¿ç¨‹çš„å†…å­˜å›æ”¶ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œæ€§èƒ½ä¼šéå¸¸å·®ï¼Œåº”ç”¨ç¨‹åºåœé¡¿æ—¶é—´ä¼šå¾ˆé•¿è¦é¿å…Full GCçš„å‘ç”Ÿï¼Œä¸€æ—¦å‘ç”Ÿéœ€è¦è¿›è¡Œè°ƒæ•´ã€‚ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”ŸFull GCå‘¢ï¼Ÿæ¯”å¦‚å †å†…å­˜å¤ªå°ï¼Œå½“G1åœ¨å¤åˆ¶å­˜æ´»å¯¹è±¡çš„æ—¶å€™æ²¡æœ‰ç©ºçš„å†…å­˜åˆ†æ®µå¯ç”¨åˆ™ä¼šå›é€€åˆ°Full GC,è¿™ç§æƒ…å†µå¯ä»¥é€šè¿‡å¢—å¤§å†…å­˜è§£å†³ã€‚å¯¼è‡´G1 Full GCçš„åŸå› å¯èƒ½æœ‰ä¸¤ä¸ªï¼šEvacuationçš„æ—¶å€™æ²¡æœ‰è¶³å¤Ÿçš„to- spaceæ¥å­˜æ”¾æ™‹å‡çš„å¯¹è±¡ã€‚å¹¶å‘å¤„ç†è¿‡ç¨‹å®Œæˆä¹‹å‰ç©ºé—´è€—å°½ã€‚ â€‹ ä» Oracleå®˜æ–¹é€éœ²å‡ºæ¥çš„ä¿¡æ¯å¯è·çŸ¥ï¼Œå›æ”¶é˜¶æ®µ( Evacuation)å…¶å®æœ¬ä¹Ÿæœ‰æƒ³è¿‡è®¾è®¡æˆä¸ç”¨æˆ·ç¨‹åºä¸€èµ·å¹¶å‘æ‰§è¡Œï¼Œä½†è¿™ä»¶äº‹æƒ…åšèµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œè€ƒè™‘åˆ°G1åªæ˜¯å›æ”¶ä¸€éƒ¨åˆ† Reglon,åœé¡¿æ—¶é—´æ˜¯ç”¨æˆ·å¯æ§åˆ¶çš„ï¼Œæ‰€ä»¥å¹¶ä¸è¿«åˆ‡å»å®ç°ï¼Œè€Œé€‰æ‹©æŠŠè¿™ä¸ªç‰¹æ€§æ”¾åˆ°äº†G1ä¹‹åå‡ºç°çš„ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨(å³ZGC)ä¸­ã€‚å¦å¤–ï¼Œè¿˜è€ƒè™‘åˆ°G1ä¸æ˜¯ä»…ä»…é¢å‘ä½å»¶è¿Ÿï¼Œåœé¡¿ç”¨æˆ·çº¿ç¨‹èƒ½å¤Ÿæœ€å¤§å¹…åº¦æé«˜åƒåœ¾æ”¶é›†æ•ˆç‡ï¼Œä¸ºäº†ä¿è¯ååé‡æ‰€ä»¥æ‰é€‰æ‹©äº†å®Œå…¨æš‚åœç”¨æˆ·çº¿ç¨‹çš„å®ç°æ–¹æ¡ˆã€‚ ä¼˜åŒ–å»ºè®® å¹´è½»ä»£å¤§å° é¿å…ä½¿ç”¨-Xmnæˆ–-XX: NewRatioç­‰ç›¸å…³é€‰é¡¹æ˜¾å¼è®¾ç½®å¹´è½»ä»£å¤§å°ã€‚å›ºå®šå¹´è½»ä»£çš„å¤§å°ä¼šè¦†ç›–æš‚åœæ—¶é—´ç›®æ ‡æš‚åœæ—¶é—´ç›®æ ‡ä¸è¦å¤ªè¿‡ä¸¥è‹› G1 GCçš„ååé‡ç›®æ ‡æ˜¯90%çš„åº”ç”¨ç¨‹åºæ—¶é—´å’Œ1%çš„åƒåœ¾å›æ”¶æ—¶é—´è¯„ä¼°G1GCçš„ååé‡æ—¶ï¼Œæš‚åœæ—¶é—´ç›®æ ‡ä¸è¦å¤ªä¸¥è‹›ã€‚ç›®æ ‡å¤ªè¿‡ä¸¥è‹›è¡¨ ç¤ºä½ æ„¿æ„æ‰¿å—æ›´å¤šçš„åƒåœ¾å›æ”¶å¼€é”€ï¼Œè€Œè¿™äº›ä¼šç›´æ¥å½±å“åˆ°ååé‡ã€‚ åƒåœ¾å›æ”¶å™¨æ€»ç»“ Javaåƒåœ¾æ”¶é›†å™¨çš„é…ç½®å¯¹äº]Wì¨ä¼˜åŒ–æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„é€‰æ‹©ï¼Œé€‰æ‹©åˆé€‚çš„åƒåœ¾æ”¶é›†å™¨å¯ä»¥è®©Vçš„æ€§èƒ½æœ‰ä¸€ä¸ªå¾ˆå¤§çš„æå‡ã€‚ æ€ä¹ˆé€‰æ‹©åƒåœ¾æ”¶é›†å™¨ï¼Ÿ ä¼˜å…ˆè°ƒæ•´å †çš„å¤§å°è®©JVMè‡ªé€‚åº”å®Œæˆ å¦‚æœå†…å­˜å°äº100M,ä½¿ç”¨ä¸²è¡Œæ”¶é›†å™¨ å¦‚æœæ˜¯å•æ ¸ã€å•æœºç¨‹åºï¼Œå¹¶ä¸”æ²¡æœ‰åœé¡¿æ—¶é—´çš„è¦æ±‚ï¼Œä¸²è¡Œæ”¶é›†å™¨ å¦‚æœæ˜¯å¤šCPUã€éœ€è¦é«˜ååé‡ã€å…è®¸åœé¡¿æ—¶é—´è¶…è¿‡1ç§’ï¼Œé€‰æ‹©å¹¶è¡Œæˆ–è€…JVMè‡ªå·±é€‰æ‹© å¦‚æœæ˜¯å¤šCPUã€è¿½æ±‚ä½åœé¡¿æ—¶é—´ï¼Œéœ€å¿«é€Ÿå“åº”ï¼ˆæ¯”å¦‚å»¶è¿Ÿä¸èƒ½è¶…è¿‡1ç§’ï¼Œå¦‚äº’è”ç½‘åº”ç”¨ï¼‰ï¼Œä½¿ç”¨å¹¶å‘æ”¶é›†å™¨ å®˜æ–¹æ¨èG1,æ€§èƒ½é«˜ã€‚ç°åœ¨äº’è”ç½‘çš„é¡¹ç›®ï¼ŒåŸºæœ¬éƒ½æ˜¯ä½¿ç”¨G1ã€‚ æœ€åéœ€è¦æ˜ç¡®ä¸€ä¸ªè§‚ç‚¹ 1.æ²¡æœ‰æœ€å¥½çš„æ”¶é›†å™¨ï¼Œæ›´æ²¡æœ‰ä¸‡èƒ½çš„æ”¶é›†ï¼› 2.è°ƒä¼˜æ°¸è¿œæ˜¯é’ˆå¯¹ç‰¹å®šåœºæ™¯ã€ç‰¹å®šéœ€æ±‚ï¼Œä¸å­˜åœ¨ä¸€åŠ³æ°¸é€¸çš„æ”¶é›†å™¨ å¯¹äºåƒåœ¾æ”¶é›†ï¼Œé¢è¯•å®˜å¯ä»¥å¾ªåºæ¸è¿›ä»ç†è®ºã€å®è·µå„ç§è§’åº¦æ·±å…¥ï¼Œä¹Ÿæœªå¿…æ˜¯è¦æ±‚é¢è¯•è€…ä»€ä¹ˆéƒ½æ‡‚ã€‚ä½†å¦‚æœä½ æ‡‚å¾—åŸç†ï¼Œä¸€å®šä¼šæˆä¸ºé¢è¯•ä¸­çš„åŠ åˆ†é¡¹ã€‚ è¿™é‡Œè¾ƒé€šç”¨ã€åŸºç¡€æ€§çš„éƒ¨åˆ†å¦‚ä¸‹ åƒåœ¾æ”¶é›†çš„ç®—æ³•æœ‰å“ªäº›ï¼Ÿå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥å›æ”¶ï¼Ÿ åƒåœ¾æ”¶é›†å™¨å·¥ä½œçš„åŸºæœ¬æµç¨‹ã€‚ å¦å¤–ï¼Œå¤§å®¶éœ€è¦å¤šå…³æ³¨åƒåœ¾å›æ”¶å™¨è¿™ä¸€ç« çš„å„ç§å¸¸ç”¨çš„å‚æ•°ã€‚ GCæ—¥å¿—åˆ†æ é€šè¿‡é˜…è¯»GCæ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£Javaè™šæ‹Ÿæœºå†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥ã€‚ å†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶çš„å‚æ•°åˆ—è¡¨ -XX:+PriintGC è¾“å‡ºGCæ—¥å¿—ã€‚ç±»ä¼¼ï¼š- verbose:GC -XX:+ PrintGCDetails è¾“å‡ºGCçš„è¯¦ç»†æ—¥å¿— -XX:+PrintGCTimeStampsè¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥åŸºå‡†æ—¶é—´çš„å½¢å¼ï¼‰ -XX:+ PrintGCDateStampsè¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥æ—¥æœŸçš„å½¢å¼ï¼Œå¦‚2013-05-04T21:53:59.234+0800) -XX:+PrintHeapAtGC åœ¨è¿›è¡ŒGCçš„å‰åæ‰“å°å‡ºå †çš„ä¿¡æ¯ -XlogGC:../logs/GC.logæ—¥å¿—æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ &quot;[GC&quot;å’Œ&quot;[Full GC&quot;è¯´æ˜äº†è¿™æ¬¡åƒåœ¾æ”¶é›†çš„åœé¡¿ç±»å‹,å¦‚æœæœ‰&quot;Full&quot;åˆ™è¯´æ˜GCå‘ç”Ÿäº†Stop The World ä½¿ç”¨ Serialæ”¶é›†å™¨åœ¨æ–°ç”Ÿä»£çš„åå­—æ˜¯ Default New Generation,å› æ­¤æ˜¾ç¤ºçš„æ˜¯&quot;[ ParNew ä½¿ç”¨ ParNewæ”¶é›†å™¨åœ¨æ–°ç”Ÿä»£çš„åå­—ä¼šå˜æˆ&quot;[Pardew&quot;,æ„æ€æ˜¯&quot; Parallel New Generation&quot; ä½¿ç”¨Parallel Scavengeæ”¶é›†å™¨åœ¨æ–°ç”Ÿä»£çš„åå­—æ˜¯&quot;Psyounggen&quot; è€å¹´ä»£çš„æ”¶é›†å’Œæ–°ç”Ÿä»£é“ç†ä¸€æ ·,åå­—ä¹Ÿæ˜¯æ”¶é›†å™¨å†³å®šçš„ ä½¿ç”¨G1æ”¶é›†å™¨çš„è¯,ä¼šæ˜¾ç¤ºä¸º&quot; garbage- first heap&quot; Allocation Failure è¡¨æ˜æœ¬æ¬¡å¼•èµ·GCçš„åŸå› æ˜¯å› ä¸ºåœ¨å¹´è½»ä»£ä¸­æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´èƒ½å¤Ÿå­˜å‚¨æ–°çš„æ•°æ®äº†ã€‚ [ PSZoungGen:5986K-&gt;696K(8704K)]5986K--704K(9216K) ä¸­æ‹¬å·å†…ï¼šGCå›æ”¶å‰å¹´è½»ä»£å¤§å°ï¼Œå›æ”¶åå¤§å°ï¼Œï¼ˆå¹´è½»ä»£æ€»å¤§å°ï¼‰ æ‹¬å·å¤–ï¼šGCå›æ”¶å‰å¹´è½»ä»£å’Œè€å¹´ä»£å¤§å°ï¼Œå›æ”¶åå¤§å°ï¼Œï¼ˆå¹´è½»ä»£å’Œè€å¹´ä»£æ€»å¤§å°ï¼‰ userä»£è¡¨ç”¨æˆ·æ€å›æ”¶è€—æ—¶ï¼Œsyså†…æ ¸æ€å›æ”¶è€—æ—¶ï¼Œreaå®é™…è€—æ—¶ã€‚ç”±äºå¤šæ ¸çš„åŸå› ï¼Œæ—¶é—´æ€»å’Œå¯èƒ½ä¼šè¶…è¿‡realæ—¶é—´ æ—¥å¿—åˆ†æå·¥å…· å¯ä»¥ç”¨ä¸€äº›å·¥å…·å»åˆ†æè¿™äº›GCæ—¥å¿—ã€‚å¸¸ç”¨çš„æ—¥å¿—åˆ†æå·¥å…·æœ‰ï¼š GCVlewerã€ GCEsayã€ GCHistoã€ GCCLogViewerã€Hpjmeterã€ garbagecatç­‰ã€‚ åƒåœ¾å›æ”¶å™¨çš„æ–°æ—¶ä»£å‘å±• GCä»ç„¶å¤„äºé£é€Ÿå‘å±•ä¹‹ä¸­ï¼Œç›®å‰çš„é»˜è®¤é€‰é¡¹G1GCåœ¨ä¸æ–­çš„è¿›è¡Œæ”¹è¿›ï¼Œå¾ˆå¤šæˆ‘ä»¬åŸæ¥è®¤ä¸ºçš„ç¼ºç‚¹ï¼Œä¾‹å¦‚ä¸²è¡Œçš„FullGCã€ Card Tableæ‰«æçš„ä½æ•ˆç­‰ï¼Œéƒ½å·²ç»è¢«å¤§å¹…æ”¹è¿›ï¼Œä¾‹å¦‚ï¼ŒJDK10ä»¥åï¼ŒFullGCå·²ç»æ˜¯å¹¶è¡Œè¿è¡Œï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œå…¶è¡¨ç°è¿˜ç•¥ä¼˜äº ParallelGCçš„å¹¶è¡ŒFullGCå®ç°ã€‚å³ä½¿æ˜¯ SerialGC,è™½ç„¶æ¯”è¾ƒå¤è€ï¼Œä½†æ˜¯ç®€å•çš„è®¾è®¡å’Œå®ç°æœªå¿…å°±æ˜¯è¿‡æ—¶çš„ï¼Œå®ƒæœ¬èº«çš„å¼€é”€ï¼Œä¸ç®¡æ˜¯GCç›¸å…³æ•°æ®ç»“æ„çš„å¼€é”€ï¼Œè¿˜æ˜¯çº¿ç¨‹çš„å¼€é”€ï¼Œéƒ½æ˜¯éå¸¸å°çš„ï¼Œæ‰€ä»¥éšç€äº‘è®¡ç®—çš„å…´èµ·ï¼Œåœ¨ Serverless:ç­‰æ–°çš„åº”ç”¨åœºæ™¯ä¸‹ï¼Œ SeralGCæ‰¾åˆ°äº†æ–°çš„èˆå°ã€‚æ¯”è¾ƒä¸å¹¸çš„æ˜¯ CMS GC,å› ä¸ºå…¶ç®—æ³•çš„ç†è®ºç¼ºé™·ç­‰åŸå› ï¼Œè™½ç„¶ç°åœ¨è¿˜æœ‰éå¸¸å¤§çš„ç”¨æˆ·ç¾¤ä½“ï¼Œä½†åœ¨3DK9ä¸­å·²ç»è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼Œå¹¶åœ¨JDK14ç‰ˆæœ¬ä¸­ç§»é™¤ã€‚ Open JDK12çš„ Shenandoah GC:ä½åœé¢ æ—¶é—´çš„ccï¼ˆå®éªŒæ€§ï¼‰ Shenandoah,æ— ç–‘æ˜¯ä¼—å¤šGCä¸­æœ€å­¤ç‹¬çš„ä¸€ä¸ªã€‚æ˜¯ç¬¬ä¸€æ¬¾ä¸ç”± Oracleå…¬å¸å›¢é˜Ÿé¢†å¯¼å¼€å‘çš„ Hotspotåƒåœ¾æ”¶é›†å™¨ã€‚ä¸å¯é¿å…çš„å—åˆ°å®˜æ–¹çš„æ’æŒ¤ã€‚æ¯”å¦‚å·ç§°openJDKå’ŒoracleJDKæ²¡æœ‰åŒºåˆ«çš„oracleå…¬å¸ä»æ‹’ç»åœ¨oracleJDK12ä¸­æ”¯æŒ Shenandoahã€‚Shenandoahåƒåœ¾å›æ”¶å™¨æœ€åˆç”± Redhatè¿›è¡Œçš„ä¸€é¡¹åƒåœ¾æ”¶é›†å™¨ç ”ç©¶é¡¹ç›® Pauseless GCçš„å®ç°ï¼Œæ—¨åœ¨é’ˆå¯¹]WMä¸Šçš„å†…å­˜å›æ”¶å®ç°ä½åœé¡¿çš„éœ€æ±‚ã€‚åœ¨2014å¹´è´¡çŒ®ç»™OPENJDK. Red Hatç ”å‘ Shenandoahå›¢é˜Ÿå¯¹å¤–å®£ç§°ï¼Œ Shenandoahåƒåœ¾å›æ”¶å™¨çš„æš‚åœæ—¶é—´ä¸å †å¤§å°æ— å…³ï¼Œè¿™æ„å‘³ç€æ— è®ºå°†å †è®¾ç½®ä¸º200MBè¿˜æ˜¯200GB,99.9%çš„ç›®æ ‡éƒ½å¯ä»¥æŠŠåƒåœ¾æ”¶é›†çš„åœé¡¿æ—¶é—´é™åˆ¶åœ¨åæ¯«ç§’ä»¥å†…ã€‚ä¸è¿‡å®é™…ä½¿ç”¨æ€§èƒ½å°†å–å†³äºå®é™…å·¥ä½œå †çš„å¤§å°å’Œå·¥ä½œè´Ÿè½½ã€‚ æ€»ç»“ï¼š Shenandoah GCçš„å¼±é¡¹ï¼šé«˜è¿è¡Œè´Ÿæ‹…ä¸‹çš„ååé‡ä¸‹é™ã€‚ Shenandoah GCçš„å¼ºé¡¹ï¼šä½å»¶è¿Ÿæ—¶é—´ã€‚ Shenandoah GCçš„å·¥ä½œè¿‡ç¨‹å¤§è‡´åˆ†ä¸ºä¹ä¸ªé˜¶æ®µï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚åœ¨ä¹‹å‰ Java12æ–°ç‰¹æ€§è§†é¢‘é‡Œæœ‰è¿‡ä»‹ç»ã€‚ ZGC â€‹ ZGCä¸ Shenandoahç›®æ ‡é«˜åº¦ç›¸ä¼¼ï¼Œåœ¨å°½å¯èƒ½å¯¹ååé‡å½±å“ä¸å¤§çš„å‰æä¸‹å®ç°åœ¨ä»»æ„å †å†…å­˜å¤§å°ä¸‹éƒ½å¯ä»¥æŠŠåƒåœ¾æ”¶é›†çš„åœé¡¿æ—¶é—´é™åˆ¶åœ¨åæ¯«ç§’ä»¥å†…çš„ä½å»¶è¿Ÿã€‚ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸€ä¹¦ä¸­è¿™æ ·å®šä¹‰zGC:2GCæ”¶é›†å™¨æ˜¯ä¸€æ¬¾åŸºäºRegionå†…å­˜å¸ƒå±€çš„ï¼Œï¼ˆæš‚æ—¶ï¼‰ä¸è®¾åˆ†ä»£çš„ï¼Œä½¿ç”¨äº†è¯»å±éšœã€æŸ“è‰²æŒ‡é’ˆå’Œå†…å­˜å¤šé‡æ˜ å°„ç­‰æŠ€æœ¯æ¥å®ç°å¯å¹¶å‘çš„æ ‡è®°ä¸€å‹ç¼©ç®—æ³•çš„ï¼Œä»¥ä½å»¶è¿Ÿä¸ºé¦–è¦ç›®æ ‡çš„ä¸€æ¬¾åƒåœ¾æ”¶é›†å™¨2GCçš„å·¥ä½œè¿‡ç¨‹å¯ä»¥åˆ†ä¸º4ä¸ªé˜¶æ®µï¼šå¹¶å‘æ ‡è®°ä¸€å¹¶å‘é¢„å¤‡é‡åˆ†é…ä¸€å¹¶å‘é‡åˆ†é…å¹¶å‘é‡æ˜ å°„ç­‰ã€‚ZGCå‡ ä¹åœ¨æ‰€æœ‰åœ°æ–¹å¹¶å‘æ‰§è¡Œçš„ï¼Œé™¤äº†åˆå§‹æ ‡è®°çš„æ˜¯STWçš„ã€‚æ‰€ä»¥åœé¡¿æ—¶é—´å‡ ä¹å°±è€—è´¹åœ¨åˆå§‹æ ‡è®°ä¸Šï¼Œè¿™éƒ¨åˆ†çš„å®é™…æ—¶é—´æ˜¯éå¸¸å°‘çš„ã€‚ JBP364:ZGCåº”ç”¨åœ¨ macosä¸Š JEP365:ZGCåº”ç”¨åœ¨ Windowsä¸Š JDK14ä¹‹å‰ï¼ŒZGCä»…inuxã‚ªæ”¯æŒã€‚ ãƒ»å°½ç®¡è®¸å¤šä½¿ç”¨ZGCçš„ç”¨æˆ·éƒ½ä½¿ç”¨ç±»ã‚¨inuxçš„ç¯å¢ƒï¼Œä½†åœ¨ Windowså’Œ macosä¸Šï¼Œäººä»¬ä¹Ÿéœ€è¦ZGCè¿›è¡Œå¼€å‘éƒ¨ç½²å’Œæµ‹è¯•ã€‚è®¸å¤šæ¡Œé¢åº”ç”¨ä¹Ÿå¯ä»¥ä»ZGCä¸­å—ç›Šã€‚å› æ­¤ï¼ŒZGCç‰¹æ€§è¢«ç§»æ¤åˆ°äº† Windowså’Œ macosä¸Šã€‚ ãƒ»ç°åœ¨macæˆ– Windowsä¸Šä¹Ÿèƒ½ä½¿ç”¨ZGCäº†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼šXX: +UnlockExperimentalVMOptions -XX: +UseZGC å¤ä¹ ã€processonä½œå›¾ï¼Œå®Œå–„æµç¨‹è¿‡ç¨‹ä¸­å†æ¬¡ç†Ÿæ‚‰ã€‘ å®Œæˆï¼šJVMæ€»å›¾ - ProcessOn","link":"/2021/11/10/Draft/2021/JVM%20%E4%B8%8E%E4%B8%8A%E5%B1%82%E6%8A%80%E6%9C%AF/"},{"title":"JavaåŸºç¡€æ·±å…¥","text":"æ–°å­¦å››é—® WHYã€ä¸å‰ä»£ä¼˜åŒ–äº†ä»€ä¹ˆï¼Œå¼¥è¡¥äº†ä»€ä¹ˆç©ºç™½ã€‘ç­‘åŸºï¼Œè¶Šæ·±è¶Šç¨³ WHATã€æ¡†æ¶ï¼Œæ€ç»´å¯¼å›¾ï¼Œä¸»é¢˜æ¡†æ¶ã€‘å®¹å™¨ã€å¹¶å‘ã€IOã€NETã€JVMã€å…¶ä»– HOWã€å¦‚ä½•è®°å¿†ï¼Œå­¦ä¹ èµ„æºã€‘:https://github.com/CyC2018ã€åšå®¢å®Œå–„ã€ä¹¦ç±æ·±å…¥ã€ANKIç¨³å›ºã€ç†Ÿæ‚‰åŸºç¡€æ•°æ®ç»“æ„ LEVELã€ä¸æ˜¯æ¯ä¸ªéƒ½å­¦ç²¾ã€‘ç²¾é€š ç»¼åˆé—®é¢˜ å¢å¼ºforå’Œæ™®é€šforåŒºåˆ«ï¼Ÿ â€‹ éœ€è¦å¾ªç¯æ•°ç»„ç»“æ„çš„æ•°æ®æ—¶ï¼Œå»ºè®®ä½¿ç”¨æ™®é€šforå¾ªç¯ï¼Œå› ä¸ºforå¾ªç¯é‡‡ç”¨ä¸‹æ ‡è®¿é—®ï¼Œå¯¹äºæ•°ç»„ç»“æ„çš„æ•°æ®æ¥è¯´ï¼Œé‡‡ç”¨ä¸‹æ ‡è®¿é—®æ¯”è¾ƒå¥½ã€‚éœ€è¦å¾ªç¯é“¾è¡¨ç»“æ„çš„æ•°æ®æ—¶ï¼Œä¸€å®šä¸è¦ä½¿ç”¨æ™®é€šforå¾ªç¯ï¼Œè¿™ç§åšæ³•å¾ˆç³Ÿç³•ï¼Œæ•°æ®é‡å¤§çš„æ—¶å€™æœ‰å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚forå¾ªç¯æ˜¯éšæœºè¯»å–ï¼Œå¢å¼ºforçš„åº•å±‚æ˜¯è¿­ä»£å™¨ï¼Œå±äºé¡ºåºè¯»å–ã€‚ArrayListå®ç°äº†RandomAccessæ ‡è®°æ€§æ¥å£ï¼Œå¯ä»¥æ˜¾è‘—æå‡éšæœºè¯»å–çš„æ•ˆç‡ï¼›è€Œlinkedlistæ²¡æœ‰å®ç°RandomAccessæ¥å£ï¼Œéšæœºè¯»å–ä¼šå¾ˆæ…¢ æ•°æ®ç»“æ„ å“ˆå¸Œ **æ ¸å¿ƒç†è®ºï¼š**Hashä¹Ÿç§°æ•£åˆ—ã€å“ˆå¸Œï¼Œå¯¹åº”çš„è‹±æ–‡éƒ½æ˜¯Hashã€‚åŸºæœ¬åŸç†å°±æ˜¯æŠŠä»»æ„é•¿åº¦çš„è¾“å…¥ï¼Œé€šè¿‡Hashç®—æ³•å˜æˆå›ºå®šé•¿åº¦çš„è¾“å‡ºã€‚è¿™ä¸ªæ˜ å°„çš„è§„åˆ™å°±æ˜¯å¯¹åº”çš„Hashç®—æ³•ï¼Œè€ŒåŸå§‹æ•°æ®æ˜ å°„åçš„äºŒè¿›åˆ¶ä¸²å°±æ˜¯å“ˆå¸Œå€¼ã€‚ Hashçš„ç‰¹ç‚¹ï¼š 1.hashå€¼ä¸å¯ä»¥åå‘æ¨å¯¼å‡ºåŸå§‹çš„æ•°æ® 2.è¾“å…¥æ•°æ®çš„å¾®å°å˜åŒ–ä¼šå¾—åˆ°å®Œå…¨ä¸åŒçš„hashå€¼ï¼Œç›¸åŒçš„æ•°æ®ä¼šå¾—åˆ°ç›¸åŒçš„å€¼ 3.å“ˆå¸Œç®—æ³•çš„æ‰§è¡Œæ•ˆç‡è¦é«˜æ•ˆï¼Œé•¿çš„æ–‡æœ¬ä¹Ÿèƒ½å¿«é€Ÿåœ°è®¡ç®—å‡ºå“ˆå¸Œå€¼ 4.hashç®—æ³•çš„å†²çªæ¦‚ç‡è¦å° ç”±äºhashçš„åŸç†æ˜¯å°†è¾“å…¥ç©ºé—´çš„å€¼æ˜ å°„æˆhashç©ºé—´å†…ï¼Œè€Œhashå€¼çš„ç©ºé—´è¿œå°äºè¾“å…¥çš„ç©ºé—´ã€‚æ ¹æ®æŠ½å±‰åŸç†ï¼Œä¸€å®šä¼šå­˜åœ¨ä¸åŒçš„è¾“å…¥è¢«æ˜ å°„æˆç›¸åŒè¾“å‡ºçš„æƒ…å†µã€‚æŠ½å±‰åŸç†ï¼šæ¡Œä¸Šæœ‰åä¸ªè‹¹æœï¼Œè¦æŠŠè¿™åä¸ªè‹¹æœæ”¾åˆ°ä¹ä¸ªæŠ½å±‰é‡Œï¼Œæ— è®ºæ€æ ·æ”¾ï¼Œæˆ‘ä»¬ä¼šå‘ç°è‡³å°‘ä¼šæœ‰ä¸€ä¸ªæŠ½å±‰é‡Œé¢æ”¾ä¸å°‘äºä¸¤ä¸ªè‹¹æœï¼Œè¿™ä¸€ç°è±¡å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„æŠ½å±‰åŸç†ã€‚ çº¢é»‘æ ‘ R-B Treeï¼Œå…¨ç§°æ˜¯Red-Black Treeï¼Œåˆç§°ä¸ºâ€œçº¢é»‘æ ‘â€ï¼Œå®ƒä¸€ç§ç‰¹æ®Šçš„äºŒå‰æŸ¥æ‰¾æ ‘ã€‚çº¢é»‘æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½æœ‰å­˜å‚¨ä½è¡¨ç¤ºèŠ‚ç‚¹çš„é¢œè‰²ï¼Œå¯ä»¥æ˜¯çº¢(Red)æˆ–é»‘(Black)ã€‚ çº¢é»‘æ ‘çš„ç‰¹æ€§: ï¼ˆ1ï¼‰æ¯ä¸ªèŠ‚ç‚¹æˆ–è€…æ˜¯é»‘è‰²ï¼Œæˆ–è€…æ˜¯çº¢è‰²ã€‚ ï¼ˆ2ï¼‰æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚ ï¼ˆ3ï¼‰æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ã€‚ [æ³¨æ„ï¼šè¿™é‡Œå¶å­èŠ‚ç‚¹ï¼Œæ˜¯æŒ‡ä¸ºç©º(NILæˆ–NULL)çš„å¶å­èŠ‚ç‚¹ï¼] ï¼ˆ4ï¼‰å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„ã€‚ ï¼ˆ5ï¼‰ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„å­å­™èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸ŠåŒ…å«ç›¸åŒæ•°ç›®çš„é»‘èŠ‚ç‚¹ã€‚ æ³¨æ„ï¼š (01) ç‰¹æ€§(3)ä¸­çš„å¶å­èŠ‚ç‚¹ï¼Œæ˜¯åªä¸ºç©º(NILæˆ–null)çš„èŠ‚ç‚¹ã€‚ (02) ç‰¹æ€§(5)ï¼Œç¡®ä¿æ²¡æœ‰ä¸€æ¡è·¯å¾„ä¼šæ¯”å…¶ä»–è·¯å¾„é•¿å‡ºä¿©å€ã€‚å› è€Œï¼Œçº¢é»‘æ ‘æ˜¯ç›¸å¯¹æ˜¯æ¥è¿‘å¹³è¡¡çš„äºŒå‰æ ‘ã€‚ çº¢é»‘æ ‘ç¤ºæ„å›¾å¦‚ä¸‹ï¼š å¦‚ä½•é˜…è¯»æºç ï¼Ÿ æ–¹æ³•ï¼š 1.å®è·µæ–­ç‚¹ 2.é¡ºåºï¼šæ¥å£$\\longrightarrow$å®ç°ç±»ï¼ˆ(æ–¹æ³•ã€å±æ€§--ã€‹åˆ¤æ–­ã€‘)æ„é€ å™¨æ–¹æ³•$\\longrightarrow$å¸¸ç”¨æ–¹æ³•$\\longrightarrow$å…¶ä»–æ–¹æ³•ï¼‰ 3.å·¥å…·ï¼šIDEA çš„ Diagram å›¾æ ‡åŒ–æŸ¥çœ‹ç»§æ‰¿ç»“æ„ï¼Œæ‰€æœ‰ç±»çš„æ‰€æœ‰ç»“æ„ï¼ŒåŒå‡»è·³è½¬å¯¹åº”ç±».å·¦ä¸‹è§’StructureæŸ¥çœ‹ç±»ç»“æ„ã€‚ctrl+HæŸ¥çœ‹ç»§æ‰¿æ ‘ã€‚ 4.æ³¨é‡Šï¼šæŸ¥çœ‹æ³¨é‡Š 5.å¿«æ·é”®ï¼š 6.æ ¹æ®å·²çŸ¥çœ‹æœªçŸ¥ï¼šæ¯”å¦‚å·²çŸ¥åº•å±‚çœ‹æºç ï¼Œçº¿ç¨‹å®‰å…¨çœ‹åŸç† é¡¹ç›® JDK å¸¸ç”¨åŒ…ï¼šã€java.io java.lang java.utilã€‘ ã€java.lang.reflect java.net javax.net.* java.nio.* java.util.concurrent.ã€‘ æ¡†æ¶ å®¹å™¨ å­¦ä¹ æµç¨‹ è¿›åº¦ï¼š collection$\\longrightarrow$list$\\longrightarrow$set$\\longrightarrow$map$\\longrightarrow$queue æ–¹æ³•ï¼š æ€»ç»“ç‰¹ç‚¹$\\longrightarrow$æ ¹æ®ç‰¹ç‚¹æŸ¥çœ‹æºç  $\\longrightarrow$ç¬”è®° æ€»ç»“ æ€»å…³ç³»å›¾ è¡¨æ ¼æ€»ç»“ é›†åˆåç§° ç»“æ„ æ˜¯å¦å¯é‡å¤ æ˜¯å¦çº¿ç¨‹å®‰å…¨ æ˜¯å¦å¯ä¸ºç©º æ˜¯å¦æœ‰åº æ‰©å®¹å€æ•° å¢ åˆ  æ”¹ æŸ¥ List Vector åŠ¨æ€æ•°ç»„ã€Object [ ] ã€‘ å¯é‡ å®‰ å¤šç©ºå…±å­˜ æœ‰åº 2 ArrayList åŠ¨æ€æ•°ç»„ã€Object [ ] ã€‘ å¯é‡ ä¸å®‰ å¤šç©ºå…±å­˜ æœ‰åº 1.5 å°¾ğŸ’š å°¾ğŸ’š ğŸ’š LinkedList åŒå‘å¾ªç¯é“¾è¡¨ å¯é‡ ä¸å®‰ å¤šç©ºå…±å­˜ æœ‰åº é“¾è¡¨æ—  ğŸ’š ğŸ’š Set TreeSet çº¢é»‘æ ‘ã€red-black treeã€‘ ä¸é‡ ä¸å®‰ é»˜è®¤éç©ºï¼Œè‡ªå®šä¹‰å®ç°Comparatoræ¥å£å¯å­˜å‚¨null æœ‰åº çº¢é»‘æ ‘æ—  O(logN) HashSet å“ˆå¸Œè¡¨ã€HashMapã€‘ ä¸é‡ ä¸å®‰ å¤šç©ºå•å­˜ æ— åº 2 ğŸ’š O(1)ğŸ’š LinkedHashSet åŒå‘é“¾è¡¨ã€LinkedHashMapã€‘ ä¸é‡ ä¸å®‰ å¤šç©ºå•å­˜ æœ‰åº 2 Map HashMap æ•°ç»„+é“¾è¡¨ï¼ˆ1.8ä¹‹åé“¾è¡¨é•¿åº¦å¤§äºé»˜è®¤8ä¸”æ•°ç»„é•¿åº¦å¤§äº64è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼‰ï¼Œæ•£åˆ—ï¼ˆå“ˆå¸Œï¼‰è¡¨ å€¼å¯é‡ ä¸å®‰ å¤šç©ºé”®å€¼æˆ–å•ç©ºé”®æˆ–å€¼ æ— åº 2 TreeMap çº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼‰ å€¼å¯é‡ ä¸å®‰ å¯å€¼ç©ºå…±å­˜ æœ‰åº çº¢é»‘æ ‘æ—  LinkedHashMap åº•å±‚å“ˆå¸Œè¡¨+åŒå‘é“¾è¡¨ï¼ŒHashMapå­ç±» å€¼å¯é‡ ä¸å®‰ å¤šç©ºé”®å€¼æˆ–å•ç©ºé”®æˆ–å€¼ æœ‰åº 2 ConcurrentHashMap 1.8ä¹‹å æ•°ç»„ã€é“¾è¡¨/çº¢é»‘æ ‘ é€‚åˆå¤šçº¿ç¨‹ å€¼å¯é‡ å®‰ éç©º 2 ã€ä¿ç•™ã€‘Hashtable å®‰ Queue PriorityQueue äºŒå‰å°é¡¶å †ï¼Œæ¯æ¬¡å–å‡ºæƒå€¼æœ€å°å…ƒç´ ï¼Œå…ˆè¿›å…ˆå‡º å®‰ é Collection é›†åˆæ ¹æ¥å£ï¼Œå®šä¹‰å­ç±»åŸºç¡€æ“ä½œ éå†æ–¹å¼ foreach Iterator listiterator:åŒºåˆ«ï¼šListä¸“ç”¨ã€éå†æ—¶å¯æ·»åŠ å…ƒç´ ã€å¯é€†å‘éå†ã€å¯å®šä½å½“å‰ç´¢å¼•ä½ç½®ã€å¯ä¿®æ”¹éå†å¯¹è±¡ã€‚ 12345Collection&lt;Person&gt; persons = new ArrayList&lt;Person&gt;();Iterator iterator = persons.iterator();while (iterator.hasNext()) { System.out.println(iterator.next); } aggregate operations 123456789Collection&lt;Person&gt; persons = new ArrayList&lt;Person&gt;();persons .stream() .forEach(new Consumer&lt;Person&gt;() { @Override public void accept(Person person) { System.out.println(person.name); } }); 1234567891011121314//åœ¨ JDK 8 ä»¥åï¼Œæ¨èä½¿ç”¨èšåˆæ“ä½œå¯¹ä¸€ä¸ªé›†åˆè¿›è¡Œæ“ä½œã€‚èšåˆæ“ä½œé€šå¸¸å’Œ lambda è¡¨è¾¾å¼ç»“åˆä½¿ç”¨ï¼Œè®©ä»£ç çœ‹èµ·æ¥æ›´ç®€æ´ï¼ˆå› æ­¤å¯èƒ½æ›´éš¾ç†è§£ï¼‰ã€‚ä¸‹é¢ä¸¾å‡ ä¸ªç®€å•çš„æ —å­ï¼š//1.ä½¿ç”¨æµæ¥éå†ä¸€ä¸ª ShapesCollectionï¼Œç„¶åè¾“å‡ºçº¢è‰²çš„å…ƒç´ ï¼šmyShapesCollection.stream() .filter(e -&gt; e.getColor() == Color.RED) .forEach(e -&gt; System.out.println(e.getName()));//ä½ è¿˜å¯ä»¥è·å–ä¸€ä¸ªå¹¶è¡Œæµï¼ˆparallelStreamï¼‰ï¼Œå½“é›†åˆå…ƒç´ å¾ˆå¤šæ—¶ä½¿ç”¨å¹¶å‘å¯ä»¥æé«˜æ•ˆç‡ï¼šmyShapesCollection.parallelStream() .filter(e -&gt; e.getColor() == Color.RED) .forEach(e -&gt; System.out.println(e.getName())); //èšåˆæ“ä½œè¿˜æœ‰å¾ˆå¤šæ“ä½œé›†åˆçš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯´ä½ æƒ³æŠŠ Collection ä¸­çš„å…ƒç´ éƒ½è½¬æˆ String å¯¹è±¡ï¼Œç„¶åæŠŠå®ƒä»¬ è¿èµ·æ¥ï¼šString joined = elements.stream() .map(Object::toString) .collect(Collectors.joining(&quot;, &quot;));//Thanks:https://blog.csdn.net/u011240877/article/details/52773577 List æ’å…¥æœ‰åºå¯é‡å¯å¤šç©º Vector åº•å±‚æ•°ç»„ï¼ŒåŒæ­¥ï¼ŒåŒæ­¥è®©å…¶æ¯”ALæ…¢ï¼Œå†…å­˜ä¸å¤Ÿé»˜è®¤æ‰©100% ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ ä¸ ArrayList ç›¸ä¼¼ çº¿ç¨‹å®‰å…¨ æ–¹æ³•ä¸­æœ‰synchronizedï¼Œæ‰€ä»¥æ€§èƒ½ä¸å¦‚ArrayList åŠ¨æ€æ‰©å®¹ä¸ºåŸæ¥çš„2å€ int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ? capacityIncrement : oldCapacity); å¯æ’åºæ‰©å®¹ä¸ºåŸæ¥ä¸¤å€ 123456789101112private void grow(int minCapacity) { // overflow-conscious code int oldCapacity = elementData.length; //æ‰©å®¹ä¸ºåŸæ¥ä¸¤å€ int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ? capacityIncrement : oldCapacity); if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); elementData = Arrays.copyOf(elementData, newCapacity);} ArrayList ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ åº•å±‚æ•°ç»„ new Object[initialCapacity]; æŸ¥ä¼˜ï¼Œå°¾å¢åˆ å¿«ï¼Œå…¶ä»–åœ°æ–¹å¢åˆ æ…¢ åº•å±‚æ•°ç»„ åŠ¨æ€æ‰©å®¹åŸæ¥çš„1.5å€ int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); çº¿ç¨‹ä¸å®‰å…¨ æ–¹æ³•ä¸­æ²¡æœ‰synchronized/**This class is roughly equivalent to * Vector, except that it is unsynchronized.*/ æ”¯æŒå¿«é€Ÿéšæœºè®¿é—® RandomAccess åŠ¨æ€æ‰©å®¹ 123456789101112131415161718/** * Increases the capacity to ensure that it can hold at least the * number of elements specified by the minimum capacity argument. * * @param minCapacity the desired minimum capacity */ private void grow(int minCapacity) { // overflow-conscious code int oldCapacity = elementData.length; //====== åŠ¨æ€æ‰©å®¹ï¼šä½è¿ç®— &gt;&gt;ï¼šå³ç§»è¿ç®—ç¬¦ oldCapacity &gt;&gt; 1 ---ã€‹ M &gt;&gt; n = M / 2^n å³æ‰©å®¹50%====== int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: elementData = Arrays.copyOf(elementData, newCapacity); } å‚è€ƒï¼šä½è¿ç®—ï¼šM &gt;&gt; n = M / 2^n æ€»ç»“ LinkedList ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ åº•å±‚åŒå‘é“¾è¡¨ï¼Œå¢åˆ ä¼˜ï¼Œå¯æ“ä½œå¤´å°¾ï¼Œç”¨ä½œæ ˆã€ï¼ˆåŒå‘ï¼‰é˜Ÿåˆ— åº•å±‚åŒå‘é“¾è¡¨ å¯æ’å…¥ç©º åº•å±‚åŒå‘é“¾è¡¨ æŸ¥è¯¢æ…¢ åº•å±‚åŒå‘é“¾è¡¨ï¼Œä¼šéå†æ•´ä¸ªé“¾è¡¨ çº¿ç¨‹ä¸å®‰å…¨ æ–¹æ³•ä¸­æ²¡æœ‰synchronized åº•å±‚åŒå‘é“¾è¡¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172 /** * Returns the (non-null) Node at the specified element index. */ Node&lt;E&gt; node(int index) { // assert isElementIndex(index); if (index &lt; (size &gt;&gt; 1)) { Node&lt;E&gt; x = first; for (int i = 0; i &lt; index; i++) x = x.next; return x; } else { Node&lt;E&gt; x = last; for (int i = size - 1; i &gt; index; i--) x = x.prev; return x; } }/** * Inserts all of the elements in the specified collection into this * list, starting at the specified position. Shifts the element * currently at that position (if any) and any subsequent elements to * the right (increases their indices). The new elements will appear * in the list in the order that they are returned by the * specified collection's iterator. * * @param index index at which to insert the first element * from the specified collection * @param c collection containing elements to be added to this list * @return {@code true} if this list changed as a result of the call * @throws IndexOutOfBoundsException {@inheritDoc} * @throws NullPointerException if the specified collection is null */ public boolean addAll(int index, Collection&lt;? extends E&gt; c) { checkPositionIndex(index); Object[] a = c.toArray(); int numNew = a.length; if (numNew == 0) return false; Node&lt;E&gt; pred, succ; if (index == size) { succ = null; pred = last; } else { succ = node(index); pred = succ.prev; } for (Object o : a) { @SuppressWarnings(&quot;unchecked&quot;) E e = (E) o; Node&lt;E&gt; newNode = new Node&lt;&gt;(pred, e, null); if (pred == null) first = newNode; else pred.next = newNode; pred = newNode; } if (succ == null) { last = pred; } else { pred.next = succ; succ.prev = pred; } size += numNew; modCount++; return true; } æ€»ç»“ Stack åè¿›å…ˆå‡ºçš„å †æ ˆ Set æ— åºä¸é‡å•ç©ºï¼Œå¸¸ç”¨äºå»é‡ TreeSet ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ åº•å±‚TreeMap åº•å±‚ã€å¯æ’åº å¯æ’åºã€è‡ªç„¶æ’åºï¼Œå®šåˆ¶æ’åºã€‘ åº•å±‚ã€å¯æ’åº çº¿ç¨‹ä¸å®‰å…¨ æ–¹æ³•ä¸­æ²¡æœ‰synchronized é»˜è®¤éç©ºï¼Œè‡ªå®šä¹‰å®ç°Comparatoræ¥å£å¯å­˜å‚¨null åº•å±‚ã€å¯æ’åºåº•å±‚ã€å¯æ’åº 1234567891011121314151617181920212223public interface NavigableSet&lt;E&gt; extends SortedSet&lt;E&gt; {}public class TreeSet&lt;E&gt; extends AbstractSet&lt;E&gt; implements NavigableSet&lt;E&gt;, Cloneable, java.io.Serializable{}// Integerèƒ½æ’åº(æœ‰é»˜è®¤é¡ºåº), Stringèƒ½æ’åº(æœ‰é»˜è®¤é¡ºåº)ï¼Œå¯ä»¥å¯¹å¯¹è±¡å…ƒç´ è¿›è¡Œæ’åºï¼Œä½†æ˜¯è‡ªå®šä¹‰ç±»éœ€è¦å®ç°comparableæ¥å£ï¼Œé‡å†™comparaTo() æ–¹æ³•,å¦åˆ™ï¼š{@code ClassCastException}æŠ¥ClassCastExceptionå¼‚å¸¸ã€‚æ‰€æœ‰å…ƒç´ å¿…é¡»å¯ä»¥ç›¸äº’æ¯”è¾ƒï¼ˆç›¸åŒç±»å‹ï¼‰ï¼Œå¦åˆ™å°†ä¼šæŠ¥ç±»å‹è½¬æ¢å¼‚å¸¸ClassCastExection /** * Constructs a new, empty tree set, sorted according to the * natural ordering of its elements. All elements inserted into * the set must implement the {@link Comparable} interface. * Furthermore, all such elements must be &lt;i&gt;mutually * comparable&lt;/i&gt;: {@code e1.compareTo(e2)} must not throw a * {@code ClassCastException} for any elements {@code e1} and * {@code e2} in the set. If the user attempts to add an element * to the set that violates this constraint (for example, the user * attempts to add a string element to a set whose elements are * integers), the {@code add} call will throw a * {@code ClassCastException}. */ public TreeSet() { this(new TreeMap&lt;E,Object&gt;()); } TreeSetçš„æ’åˆ—é¡ºåºä¸é‡å†™çš„compareTo()æ–¹æ³•çš„è¿”å›å€¼æœ‰å…³ã€‚ return 0:å…ƒç´ æ¯æ¬¡è¿›è¡Œæ¯”è¾ƒï¼Œéƒ½è®¤ä¸ºæ˜¯ç›¸åŒçš„å…ƒç´ ï¼Œè¿™æ˜¯å°±ä¸å†å‘TreeSeté‡Œé¢æ’å…¥é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ä»¥å¤–çš„å…ƒç´ ï¼Œæ‰€ä»¥TreeSetä¸­å°±åªæ’å…¥äº†ä¸€ä¸ªå…ƒç´ ã€‚ return 1:å…ƒç´ æ¯æ¬¡è¿›è¡Œæ¯”è¾ƒï¼Œéƒ½è®¤ä¸ºæ–°æ’å…¥çš„å…ƒç´ æ¯”ä¸Šä¸€ä¸ªå…ƒç´ å¤§ï¼Œäºæ˜¯äºŒå‰æ ‘å­˜å‚¨æ—¶ï¼Œä¼šå‚¨å­˜åœ¨æ ¹çš„å³ä¾§ï¼Œè¯»å–æ—¶å°±æ˜¯æ­£åºæ’åˆ—ï¼Œå…ˆè¿›å…ˆå‡ºã€‚ return -1:å…ƒç´ æ¯æ¬¡è¿›è¡Œæ¯”è¾ƒï¼Œéƒ½è®¤ä¸ºæ–°æ’å…¥çš„å…ƒç´ æ¯”ä¸Šä¸€ä¸ªå…ƒç´ å°ï¼Œäºæ˜¯äºŒå‰æ ‘å­˜å‚¨æ—¶ï¼Œä¼šå‚¨å­˜åœ¨æ ¹çš„å·¦ä¾§ï¼Œè¯»å–æ—¶å°±æ˜¯å€’åºæ’åˆ—ï¼Œå…ˆè¿›åå‡ºã€‚ HashSet å­¦ä¹ å‰æœ€å¥½å…ˆå­¦ä¹  HashMap ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ åº•å±‚HashMap åº•å±‚HashMap å¯å•ç©º Mapçš„keyå”¯ä¸€ å–„å­˜å– æ•£åˆ—è¡¨å®šä½ æ— åº æ²¡ç»§æ‰¿SortedSet ä¸å®‰ æ–¹æ³•ä¸­æ²¡æœ‰synchronized ä¸é‡å¤ ä¸é‡å¤ 2å€æ‰©å®¹ åŒhashmap åº•å±‚HashMap 123456789101112131415161718192021 private transient HashMap&lt;E,Object&gt; map; // Dummy value to associate with an Object in the backing Map private static final Object PRESENT = new Object();/** * Constructs a new set containing the elements in the specified * collection. The &lt;tt&gt;HashMap&lt;/tt&gt; is created with default load factor * (0.75) and an initial capacity sufficient to contain the elements in * the specified collection. * * @param c the collection whose elements are to be placed into this set * @throws NullPointerException if the specified collection is null */public HashSet(Collection&lt;? extends E&gt; c) { //åˆå§‹16ï¼ŒåŠ è½½å› å­0.75 map = new HashMap&lt;&gt;(Math.max((int) (c.size()/.75f) + 1, 16)); addAll(c);}//HashSetä¸­çš„å…ƒç´ éƒ½å­˜æ”¾åœ¨HashMapçš„keyä¸Šé¢ï¼Œè€Œvalueä¸­çš„å€¼éƒ½æ˜¯ç»Ÿä¸€çš„ä¸€ä¸ªå›ºå®šå¯¹è±¡private static final Object PRESENT = new Object(); ä¸é‡å¤ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384/** * Adds the specified element to this set if it is not already present. * More formally, adds the specified element &lt;tt&gt;e&lt;/tt&gt; to this set if * this set contains no element &lt;tt&gt;e2&lt;/tt&gt; such that * &lt;tt&gt;(e==null&amp;nbsp;?&amp;nbsp;e2==null&amp;nbsp;:&amp;nbsp;e.equals(e2))&lt;/tt&gt;. * If this set already contains the element, the call leaves the set * unchanged and returns &lt;tt&gt;false&lt;/tt&gt;. * * @param e element to be added to this set * @return &lt;tt&gt;true&lt;/tt&gt; if this set did not already contain the specified * element */public boolean add(E e) { return map.put(e, PRESENT)==null;} /** * Associates the specified value with the specified key in this map. * If the map previously contained a mapping for the key, the old * value is replaced. * * @param key key with which the specified value is to be associated * @param value value to be associated with the specified key * @return the previous value associated with &lt;tt&gt;key&lt;/tt&gt;, or * &lt;tt&gt;null&lt;/tt&gt; if there was no mapping for &lt;tt&gt;key&lt;/tt&gt;. * (A &lt;tt&gt;null&lt;/tt&gt; return can also indicate that the map * previously associated &lt;tt&gt;null&lt;/tt&gt; with &lt;tt&gt;key&lt;/tt&gt;.) */public V put(K key, V value) { return putVal(hash(key), key, value, false, true);} /** * Implements Map.put and related methods * * @param hash hash for key * @param key the key * @param value the value to put * @param onlyIfAbsent if true, don't change existing value * @param evict if false, the table is in creation mode. * @return previous value, or null if none */final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) { Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null); else { Node&lt;K,V&gt; e; K k; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; else if (p instanceof TreeNode) e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); else { for (int binCount = 0; ; ++binCount) { if ((e = p.next) == null) { p.next = newNode(hash, key, value, null); if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); break; } if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; } } if (e != null) { // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; } } ++modCount; if (++size &gt; threshold) resize(); afterNodeInsertion(evict); return null;} LinkedHashSet ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ åº•å±‚é“¾è¡¨ã€LinkedHashMapã€‘ åº•å±‚ ä¸å®‰ æ–¹æ³•ä¸­æ²¡æœ‰synchronized æ’å…¥æœ‰åº LinkedHashSetåœ¨éå†æ—¶è·å¾—çš„è¿­ä»£å™¨æ˜¯LinkedHashSetæ‰€å®ç°çš„LinkedKeyIteratorï¼Œå®ƒçš„éå†æ˜¯ä»åŒå‘é“¾è¡¨å¤´å¼€å§‹é¡ºåºéå†ï¼Œå®ç°äº†æœ‰åºè¾“å‡ºã€‚ ä¸é‡å¤ ç±»ä¼¼ä¸é‡å¤ åº•å±‚ 1234567891011121314151617181920212223242526272829303132333435/** * Constructs a new linked hash set with the same elements as the * specified collection. The linked hash set is created with an initial * capacity sufficient to hold the elements in the specified collection * and the default load factor (0.75). * * @param c the collection whose elements are to be placed into * this set * @throws NullPointerException if the specified collection is null */ public LinkedHashSet(Collection&lt;? extends E&gt; c) { super(Math.max(2*c.size(), 11), .75f, true); addAll(c); } public class LinkedHashSet&lt;E&gt; extends HashSet&lt;E&gt; implements Set&lt;E&gt;, Cloneable, java.io.Serializable {} /** * Constructs a new, empty linked hash set. (This package private * constructor is only used by LinkedHashSet.) The backing * HashMap instance is a LinkedHashMap with the specified initial * capacity and the specified load factor. * * @param initialCapacity the initial capacity of the hash map * @param loadFactor the load factor of the hash map * @param dummy ignored (distinguishes this * constructor from other int, float constructor.) * @throws IllegalArgumentException if the initial capacity is less * than zero, or if the load factor is nonpositive */ HashSet(int initialCapacity, float loadFactor, boolean dummy) { map = new LinkedHashMap&lt;&gt;(initialCapacity, loadFactor); } Map é”®å€¼å¯¹ï¼Œé”®ä¸é‡ HashMap æ¨èèµ„æºï¼šåšå®¢1 ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ åº•å±‚ä¸ºæ•°ç»„ç§°ä¹‹ä¸ºå“ˆå¸Œæ¡¶ï¼Œæ¯ä¸ªæ¡¶é‡Œé¢æ”¾çš„æ˜¯é“¾è¡¨ï¼Œé“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå°±æ˜¯å“ˆå¸Œè¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚JDK8åï¼Œé“¾è¡¨å®¹é‡å¤§äº8ä¸”æ¡¶çš„å®¹é‡å¤§äº64ï¼Œè½¬åŒ–æˆçº¢é»‘æ ‘ åº•å±‚ çº¿ç¨‹ä¸å®‰å…¨ æ–¹æ³•ä¸­æ²¡æœ‰synchronized é»˜è®¤é•¿åº¦16 åˆå§‹å®¹é‡ æ‰©å®¹ä¸ºåŸæ¥çš„ä¸¤å€ æ‰©å®¹ æ— åº æ— åº,å¯ç©º å¤šç©ºé”®å€¼æˆ–å•ç©ºé”®æˆ–å€¼ æ— åº,å¯ç©º åº•å±‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475 /** Node å•å‘é“¾è¡¨ * Basic hash bin node, used for most entries. (See below for * TreeNode subclass, and in LinkedHashMap for its Entry subclass.) */static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; { final int hash; final K key; V value; //ç¢°æ’ä¹‹åå½¢æˆé“¾è¡¨ Node&lt;K,V&gt; next; Node(int hash, K key, V value, Node&lt;K,V&gt; next) { this.hash = hash; this.key = key; this.value = value; this.next = next; } public final K getKey() { return key; } public final V getValue() { return value; } public final String toString() { return key + &quot;=&quot; + value; } public final int hashCode() { return Objects.hashCode(key) ^ Objects.hashCode(value); } public final V setValue(V newValue) { V oldValue = value; value = newValue; return oldValue; } public final boolean equals(Object o) { if (o == this) return true; if (o instanceof Map.Entry) { Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o; if (Objects.equals(key, e.getKey()) &amp;&amp; Objects.equals(value, e.getValue())) return true; } return false; }}/**çº¢é»‘æ ‘ * Entry for Tree bins. Extends LinkedHashMap.Entry (which in turn * extends Node) so can be used as extension of either regular or * linked node. */static final class TreeNode&lt;K,V&gt; extends LinkedHashMap.Entry&lt;K,V&gt; { TreeNode&lt;K,V&gt; parent; // red-black tree links TreeNode&lt;K,V&gt; left; TreeNode&lt;K,V&gt; right; TreeNode&lt;K,V&gt; prev; // needed to unlink next upon deletion boolean red; TreeNode(int hash, K key, V val, Node&lt;K,V&gt; next) { super(hash, key, val, next); } /** * Returns root of tree containing this node. */ final TreeNode&lt;K,V&gt; root() { for (TreeNode&lt;K,V&gt; r = this, p;;) { if ((p = r.parent) == null) return r; r = p; } } ......} æ‰©å®¹ å‚è€ƒ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118 /** ä¸ºä»€ä¹ˆéœ€è¦æ‰©å®¹ï¼šå“ˆå¸Œå†²çªå¯¼è‡´çš„é“¾åŒ–å½±åƒæŸ¥æ‰¾æ•ˆç‡ï¼Œæ•°ç»„ä»¥ç©ºé—´æ¢æ—¶é—´ ç”±power-of-two expansion newCap = oldCap &lt;&lt; 1 å¯çŸ¥æ‰©å®¹ä¸ºåŸæ¥çš„ä¸¤å€1010 åè¿›åˆ¶ï¼š10 åŸå§‹æ•° number10100 åè¿›åˆ¶ï¼š20 å·¦ç§»ä¸€ä½ number = number &lt;&lt; 1; 1010 åè¿›åˆ¶ï¼š10 å³ç§»ä¸€ä½ number = number &gt;&gt; 1; å³ oldCap &lt;&lt; 1 å³äºŒè¿›åˆ¶å‘å·¦ç§»åŠ¨ä¸¤ä½ï¼šoldCap &lt;&lt; 1=oldCap*2 åŒç†oldCap &gt;&gt; 1=oldCap/2 è¡¥å……&gt;&gt;&gt;ï¼šæ— ç¬¦å·å³ç§»ï¼Œå¿½ç•¥ç¬¦å·ä½ï¼Œç©ºä½éƒ½ä»¥0è¡¥é½ * Initializes or doubles table size. If null, allocates in * accord with initial capacity target held in field threshold. * Otherwise, because we are using power-of-two expansion, the * elements from each bin must either stay at same index, or move * with a power of two offset in the new table. * * @return the table */ final Node&lt;K,V&gt;[] resize() { //oldTabæ‰©å®¹å‰å“ˆå¸Œè¡¨ Node&lt;K,V&gt;[] oldTab = table; //æ‰©å®¹ä¹‹å‰æ•°ç»„é•¿åº¦ int oldCap = (oldTab == null) ? 0 : oldTab.length; //æ‰©å®¹ä¹‹å‰çš„é˜ˆå€¼ï¼Œè§¦å‘æœ¬æ¬¡æ‰©å®¹çš„é˜ˆå€¼ int oldThr = threshold; //æ‰©å®¹ä¹‹åçš„æ•°ç»„å¤§å° //ä¸‹æ¬¡è§¦å‘æ‰©å®¹çš„æ¡ä»¶ int newCap, newThr = 0; //æ•£åˆ—è¡¨å·²åˆå§‹åŒ–ï¼Œè¿™æ˜¯ä¸€æ¬¡æ­£å¸¸çš„æ‰©å®¹ if (oldCap &gt; 0) { //æ‰©å®¹ä¹‹å‰æ•°ç»„å¤§å°è¾¾åˆ°æœ€å¤§é˜ˆå€¼ï¼Œåˆ™ä¸æ‰©å®¹ä¸”è®¾æ‰©å®¹æ¡ä»¶ä¸ºintæœ€å¤§å€¼ if (oldCap &gt;= MAXIMUM_CAPACITY) { threshold = Integer.MAX_VALUE; return oldTab; } //oldCapå·¦ç§»ä¸€ä½å®ç°æ•°å€¼ç¿»å€ï¼Œå¹¶ä¸”å¤åˆ¶ç»™newCapï¼ŒnewCapå°äºæœ€å¤§é™åˆ¶ä¸”æ‰©å®¹ä¹‹å‰çš„æ•°ç»„é•¿åº¦ &gt;= 16 else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY) newThr = oldThr &lt;&lt; 1; // double threshold } //oldCap==0,è¯´æ˜HashMapä¸­çš„æ•£åˆ—è¡¨æ˜¯null //1.new HashMapï¼ˆinitCapï¼ŒloadFactorï¼‰ï¼› //2.new HashMapï¼ˆinitCapï¼‰ï¼› //3.new HashMapï¼ˆmapï¼‰ï¼›ä¸”mapæœ‰æ•°æ® else if (oldThr &gt; 0) // initial capacity was placed in threshold newCap = oldThr; //oldCap==0ï¼ŒoldThr==0 //new HashMapï¼ˆmapï¼‰; else { // zero initial threshold signifies using defaults newCap = DEFAULT_INITIAL_CAPACITY;//16 newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);//12 } //newThrä¸º0æ—¶ï¼Œé€šè¿‡newCapå’ŒloadFactorè®¡ç®—å‡ºä¸€ä¸ªnewThr if (newThr == 0) { float ft = (float)newCap * loadFactor; newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); } threshold = newThr; //ç¬¬ä¸€æ¬¡æˆ–åˆ›å»ºä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ @SuppressWarnings({&quot;rawtypes&quot;,&quot;unchecked&quot;}) Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap]; table = newTab; //æ‰©å®¹å‰æ•°ç»„ä¸ä¸ºç©º if (oldTab != null) { for (int j = 0; j &lt; oldCap; ++j) { //å½“å‰nodeèŠ‚ç‚¹ Node&lt;K,V&gt; e; //å½“å‰æ¡¶ä½ä¸­æœ‰æ•°æ®ï¼Œä½†æ˜¯æ•°æ®å…·ä½“æ˜¯å•ä¸ªæ•°æ®æˆ–é“¾è¡¨æˆ–çº¢é»‘æ ‘è¿˜ä¸æ˜ç¡® if ((e = oldTab[j]) != null) { //æ–¹ä¾¿JVM GCå›æ”¶ oldTab[j] = null; //å½“å‰èŠ‚ç‚¹ä¸ºå•æ•°æ® if (e.next == null) newTab[e.hash &amp; (newCap - 1)] = e; //å½“å‰èŠ‚ç‚¹å·²ç»æ ‘åŒ– else if (e instanceof TreeNode) ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap); //å½“å‰èŠ‚ç‚¹ä¸ºé“¾è¡¨ else { // preserve order //loHeadä½ä½é“¾è¡¨ï¼Œå­˜æ”¾åœ¨æ‰©å®¹ä¹‹åçš„æ•°ç»„çš„ä¸‹æ ‡ä½ç½®ï¼Œä¸å½“å‰æ•°ç»„çš„ä¸‹æ ‡ä½ç½®ä¸€è‡´ã€‚ //hiHeadé«˜ä½é“¾è¡¨ï¼Œå­˜æ”¾åœ¨æ‰©å®¹ä¹‹åçš„æ•°ç»„çš„ä¸‹æ ‡ä½ç½®ä¸ºå½“å‰æ•°ç»„çš„ä¸‹æ ‡ä½ç½®+æ‰©å®¹ä¹‹å‰çš„é•¿åº¦ã€‚ Node&lt;K,V&gt; loHead = null, loTail = null; Node&lt;K,V&gt; hiHead = null, hiTail = null; Node&lt;K,V&gt; next; do { next = e.next; if ((e.hash &amp; oldCap) == 0) { if (loTail == null) loHead = e; else loTail.next = e; loTail = e; } else { if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; } } while ((e = next) != null); //ä½ä½é“¾è¡¨æœ‰æ•°æ® if (loTail != null) { loTail.next = null; newTab[j] = loHead; } if (hiTail != null) { hiTail.next = null; newTab[j + oldCap] = hiHead; } } } } } return newTab; } åˆå§‹å®¹é‡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118/**é»˜è®¤ï¼ˆç¼ºçœï¼‰æ•°ç»„é•¿åº¦ * The default initial capacity - MUST be a power of two. */ static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16 /**æœ€å¤§æ•°ç»„é•¿åº¦ * The maximum capacity, used if a higher value is implicitly specified * by either of the constructors with arguments. * MUST be a power of two &lt;= 1&lt;&lt;30. */ static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30; /**ç¼ºçœè´Ÿè½½å› å­å¤§å° * The load factor used when none specified in constructor. */ static final float DEFAULT_LOAD_FACTOR = 0.75f; /**è½¬æ¢ä¸ºçº¢é»‘æ ‘çš„å•ä¸ªé“¾è¡¨å…ƒç´ é˜ˆå€¼ if (binCount &gt;= TREEIFY_THRESHOLD - 1) treeifyBin(tab, hash);çœ‹ä¸‹é¢æ–¹æ³• } * The bin count threshold for using a tree rather than list for a * bin. Bins are converted to trees when adding an element to a * bin with at least this many nodes. The value must be greater * than 2 and should be at least 8 to mesh with assumptions in * tree removal about conversion back to plain bins upon * shrinkage. */ static final int TREEIFY_THRESHOLD = 8;/** * Replaces all linked nodes in bin at index for given hash unless * table is too small, in which case resizes instead. */ final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) { int n, index; Node&lt;K,V&gt; e; if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY) resize(); else if ((e = tab[index = (n - 1) &amp; hash]) != null) { TreeNode&lt;K,V&gt; hd = null, tl = null; do { TreeNode&lt;K,V&gt; p = replacementTreeNode(e, null); if (tl == null) hd = p; else { p.prev = tl; tl.next = p; } tl = p; } while ((e = e.next) != null); if ((tab[index] = hd) != null) hd.treeify(tab); } } /**ä»çº¢é»‘æ ‘é™ä¸ºé“¾è¡¨çš„é˜ˆå€¼ * The bin count threshold for untreeifying a (split) bin during a * resize operation. Should be less than TREEIFY_THRESHOLD, and at * most 6 to mesh with shrinkage detection under removal. */ static final int UNTREEIFY_THRESHOLD = 6; /**è½¬æ¢ä¸ºçº¢é»‘æ ‘çš„æ•°ç»„é˜ˆå€¼ * The smallest table capacity for which bins may be treeified. * (Otherwise the table is resized if too many nodes in a bin.) * Should be at least 4 * TREEIFY_THRESHOLD to avoid conflicts * between resizing and treeification thresholds. */ static final int MIN_TREEIFY_CAPACITY = 64; /** å“ˆç³»æ¡¶ï¼ˆè¡¨ï¼‰ * The table, initialized on first use, and resized as * necessary. When allocated, length is always a power of two. * (We also tolerate length zero in some operations to allow * bootstrapping mechanics that are currently not needed.) */ transient Node&lt;K,V&gt;[] table; /** * Holds cached entrySet(). Note that AbstractMap fields are used * for keySet() and values(). */ transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet; /**å½“å‰å“ˆå¸Œè¡¨å…ƒç´ ä¸ªæ•° * The number of key-value mappings contained in this map. */ transient int size; /**ä¿®æ”¹æ¬¡æ•°ï¼Œä¸åŒ…å«æ›¿æ¢ * The number of times this HashMap has been structurally modified * Structural modifications are those that change the number of mappings in * the HashMap or otherwise modify its internal structure (e.g., * rehash). This field is used to make iterators on Collection-views of * the HashMap fail-fast. (See ConcurrentModificationException). */ transient int modCount; /**æ‰©å®¹é˜ˆå€¼ï¼Œå½“å“ˆå¸Œè¡¨å…ƒç´ è¶…è¿‡é˜ˆå€¼æ—¶è§¦å‘æ‰©å®¹ï¼Œ * The next size value at which to resize (capacity * load factor). * * @serial */ // (The javadoc description is true upon serialization. // Additionally, if the table array has not been allocated, this // field holds the initial array capacity, or zero signifying // DEFAULT_INITIAL_CAPACITY.) int threshold; /**è´Ÿè½½å› å­ï¼Œthreshold = capacity * loadFactor * The load factor for the hash table. * * @serial */ final float loadFactor; æ— åº,å¯ç©º æœªè§£å†³é—®é¢˜:ä¸ºä»€ä¹ˆæœ‰æ—¶å€™çœ‹èµ·æ¥æœ‰åºï¼Ÿ ç­”ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124 /** * Associates the specified value with the specified key in this map. * If the map previously contained a mapping for the key, the old * value is replaced. * * @param key key with which the specified value is to be associated * @param value value to be associated with the specified key * @return the previous value associated with &lt;tt&gt;key&lt;/tt&gt;, or * &lt;tt&gt;null&lt;/tt&gt; if there was no mapping for &lt;tt&gt;key&lt;/tt&gt;. * (A &lt;tt&gt;null&lt;/tt&gt; return can also indicate that the map * previously associated &lt;tt&gt;null&lt;/tt&gt; with &lt;tt&gt;key&lt;/tt&gt;.) */ public V put(K key, V value) { return putVal(hash(key), key, value, false, true); } //====Keyä¸ºnullæƒ…å†µ//å‡è®¾ putVal(hash(null), null, value, false, true);//å³ putVal(0, 0, value, false, true);//ç”± if ((p = tab[i = (n - 1) &amp; hash]) == null)// tab[i] = newNode(hash, key, value, null);//å¾—tab[0]==null --&gt; tab[0] = newNode(hash, key, value, null);//keyä¸ºnullæ”¾åœ¨tab[0] /** * Computes key.hashCode() and spreads (XORs) higher bits of hash * to lower. Because the table uses power-of-two masking, sets of * hashes that vary only in bits above the current mask will * always collide. (Among known examples are sets of Float keys * holding consecutive whole numbers in small tables.) So we * apply a transform that spreads the impact of higher bits * downward. There is a tradeoff between speed, utility, and * quality of bit-spreading. Because many common sets of hashes * are already reasonably distributed (so don't benefit from * spreading), and because we use trees to handle large sets of * collisions in bins, we just XOR some shifted bits in the * cheapest possible way to reduce systematic lossage, as well as * to incorporate impact of the highest bits that would otherwise * never be used in index calculations because of table bounds. *///ä½œç”¨ï¼šåœ¨tableé•¿åº¦ä¸é•¿çš„æƒ…å†µä¸‹ï¼Œèƒ½è®©keyçš„hashå€¼çš„é«˜16ä½ä¹Ÿå‚ä¸è·¯ç”±è¿ç®—,//å¼‚æˆ–ï¼šåŒ0å¼‚1//h=0b 0010 0101 1010 1100 0011 1111 0010 1110// 0b 0010 0101 1010 1100 0011 1111 0010 1110// ^// 0b 0000 0000 0000 0000 0010 0101 1010 1100//=&gt; 0010 0101 1010 1100 0001 1010 1000 0010 static final int hash(Object key) { int h; return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16); }/** * Implements Map.put and related methods * * @param hash hash for key * @param key the key * @param value the value to put * onlyIfAbsent true==ã€‹keyå­˜åœ¨ï¼Œä¸æ’å…¥ * @param onlyIfAbsent if true, don't change existing value * @param evict if false, the table is in creation mode. * @return previous value, or null if none */ final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) { //tab å½“å‰æ•£åˆ—è¡¨ //p å½“å‰æ•£åˆ—è¡¨å…ƒç´  //n å½“å‰æ•£åˆ—è¡¨æ•°ç»„é•¿åº¦ //i è·¯ç”±å¯»å€ç»“æœ Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; //å»¶è¿Ÿåˆå§‹åŒ–ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨putValæ—¶ä¼šåˆå§‹åŒ–hashMapå¯¹è±¡ä¸­æœ€æ¶ˆè€—å†…å­˜çš„æ•£åˆ—è¡¨ if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; //æœ€ç®€å•æƒ…å†µï¼Œå¯»å€æ‰¾åˆ°çš„æ¡¶ä½ä¸ºnullï¼Œç›´æ¥æ”¾å…¥æ•°æ® if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null); else { //e ä¸ä¸ºnull æ‰¾åˆ°äº†ä¸€ä¸ªä¸å½“å‰è¦æ’å…¥çš„key-valueä¸€è‡´çš„ keyå…ƒç´  Node&lt;K,V&gt; e; K k; //è¡¨ç¤ºæ¡¶ä½ä¸­çš„è¯¥å…ƒç´ ä¸å½“å‰æ’å…¥å…ƒç´ keyå®Œå…¨ä¸€è‡´ï¼Œåç»­å°†æ›¿æ¢ if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; //è¯¥å…ƒç´ å·²ç»æ ‘åŒ–æ—¶ else if (p instanceof TreeNode) e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); //é“¾è¡¨æ—¶ä¸”ä¸ç­‰äºå¤´å…ƒç´ ï¼Œå…ƒç´ ä¾æ¬¡æ¯”è¾ƒ else { for (int binCount = 0; ; ++binCount) { //æœ€åä¸€ä¸ªå…ƒç´ è¿˜æ‰¾ä¸åˆ°åŒæ’å…¥keyç›¸åŒçš„node if ((e = p.next) == null) { //æ’å…¥æœ€å p.next = newNode(hash, key, value, null); //é“¾è¡¨å…ƒç´ æ•°é‡å¤§äº8ï¼Œæ ‘åŒ– if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); break; } //é“¾è¡¨ä¸­æ‰¾åˆ°åŒæ’å…¥keyçš„nodeï¼Œæ›¿æ¢ if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; } } //ä¸Šé¢çš„eå­˜åœ¨æ›¿æ¢å€¼ if (e != null) { // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; } } //è®°å½•ä¿®æ”¹æ¬¡æ•°ï¼Œæ›¿æ¢ä¸ç®— ++modCount; //æ’å…¥åå®¹é‡å¤§äºæ‰©å®¹é˜ˆå€¼åˆ™æ‰©å®¹ if (++size &gt; threshold) resize(); afterNodeInsertion(evict); return null; } GET() 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/** * Returns the value to which the specified key is mapped, * or {@code null} if this map contains no mapping for the key. * * &lt;p&gt;More formally, if this map contains a mapping from a key * {@code k} to a value {@code v} such that {@code (key==null ? k==null : * key.equals(k))}, then this method returns {@code v}; otherwise * it returns {@code null}. (There can be at most one such mapping.) * * &lt;p&gt;A return value of {@code null} does not &lt;i&gt;necessarily&lt;/i&gt; * indicate that the map contains no mapping for the key; it's also * possible that the map explicitly maps the key to {@code null}. * The {@link #containsKey containsKey} operation may be used to * distinguish these two cases. * * @see #put(Object, Object) */public V get(Object key) { Node&lt;K,V&gt; e; return (e = getNode(hash(key), key)) == null ? null : e.value;}/** * Implements Map.get and related methods. * * @param hash hash for key * @param key the key * @return the node, or null if none */final Node&lt;K,V&gt; getNode(int hash, Object key) { //tab:å¼•ç”¨å½“å‰ hashmapçš„æ•£åˆ—è¡¨ //first:æ¡¶ä½ä¸­çš„å¤´å…ƒç´  //e:ä¸´æ—¶nodeå…ƒç´  //n: tableæ•°ç»„é•¿åº¦ Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k; if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (first = tab[(n - 1) &amp; hash]) != null) { //ç¬¬ä¸€ç§æƒ…å†µï¼šå®šä½å‡ºæ¥çš„æ¡¶ä½å…ƒç´ å³ä¸ºå’±ä»¬è¦getçš„æ•°æ® if (first.hash == hash &amp;&amp; // always check first node ((k = first.key) == key || (key != null &amp;&amp; key.equals(k)))) return first; //è¯´æ˜å½“å‰æ¡¶ä½ä¸æ­¢ä¸€ä¸ªå…ƒç´ ï¼Œå¯èƒ½æ˜¯é“¾è¡¨ä¹Ÿå¯èƒ½æ˜¯çº¢é»‘æ ‘ if ((e = first.next) != null) { //ç¬¬äºŒç§æƒ…å†µï¼Œæ¡¶å‡çº§æˆäº†çº¢é»‘æ ‘ if (first instanceof TreeNode) return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key); //æ¡¶å½¢æˆäº†é“¾è¡¨ do { if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; } while ((e = e.next) != null); } } return null;} Removeï¼ˆï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465/** * Implements Map.remove and related methods. * * @param hash hash for key * @param key the key * @param value the value to match if matchValue, else ignored * @param matchValue if true only remove if value is equal * @param movable if false do not move other nodes while removing * @return the node, or null if none */final Node&lt;K,V&gt; removeNode(int hash, Object key, Object value, boolean matchValue, boolean movable) { //tab:å¼•ç”¨å½“å‰ hashmapä¸­çš„æ•£åˆ—è¡¨ //p:å½“å‰nodeå…ƒç´  //n:è¡¨ç¤ºæ•£åˆ—è¡¨æ•°ç»„é•¿åº¦ //index:è¡¨ç¤ºå¯»å€ç»“æœ Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, index; if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (p = tab[index = (n - 1) &amp; hash]) != null) { //è¯´æ˜è·¯ç”±çš„æ¡¶ä½æ˜¯æœ‰æ•°æ®çš„ï¼Œéœ€è¦è¿›è¡ŒæŸ¥æ‰¾æ“ä½œï¼Œå¹¶ä¸”åˆ é™¤ //node:æŸ¥æ‰¾åˆ°çš„ç»“æœ //e:å½“å‰Nodeçš„ä¸‹ä¸€ä¸ªå…ƒç´  Node&lt;K,V&gt; node = null, e; K k; V v; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) node = p; else if ((e = p.next) != null) { //è¯´æ˜ï¼Œå½“å‰æ¡¶ä½è¦ä¹ˆæ˜¯é“¾è¡¨è¦ä¹ˆæ˜¯çº¢é»‘æ ‘ if (p instanceof TreeNode)//åˆ¤æ–­å½“å‰æ¡¶ä½æ˜¯å¦å‡çº§ä¸ºçº¢é»‘æ ‘äº† //ç¬¬äºŒç§æƒ…å†µï¼šçº¢é»‘æ ‘æŸ¥æ‰¾ node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key); else { //ç¬¬ä¸‰ç§é“¾è¡¨ do { if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) { node = e; break; } p = e; } while ((e = e.next) != null); } } //åˆ¤æ–­nodeä¸ä¸ºç©ºçš„è¯ï¼Œè¯´æ˜æŒ‰ç…§keyæŸ»æ‰¾åˆ°éœ€è¦åˆ é™¤çš„æ•°æ®äº† if (node != null &amp;&amp; (!matchValue || (v = node.value) == value || (value != null &amp;&amp; value.equals(v)))) { //ç¬¬ä¸€ç§æƒ…æ³ï¼šnodeæ˜¯æ ‘èŠ‚ç‚¹ï¼Œè¯´æ˜éœ€è¦è¿›è¡Œæ ‘èŠ‚ç‚¹ç§»é™¤æ“ä½œ if (node instanceof TreeNode) ((TreeNode&lt;K,V&gt;)node).removeTreeNode(this, tab, movable); //ç¬¬äºŒç§æƒ…æ³ï¼šæ¡¶ä½å…ƒç´ å³ä¸ºæŸ»æ‰¾ç»“æœï¼Œåˆ™å°†è¯¥å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ æ”¾è‡³æ¡¶ä½ä¸­ else if (node == p) tab[index] = node.next; else //ç¬¬ä¸‰ç§æƒ…æ³ï¼šå°†å½“å‰å…ƒç´ pçš„ä¸‹ä¸€ä¸ªå…ƒç´ è®¾ç½®æˆè¦åˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´  p.next = node.next; ++modCount; --size; afterNodeRemoval(node); return node; } } return null;} æ„é€ æ–¹æ³• ï¼š&gt;&gt;&gt;æ— ç¬¦å·å³ç§»ï¼Œå¿½ç•¥ç¬¦å·ä½ï¼Œç©ºä½éƒ½ä»¥0è¡¥é½ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273/* ---------------- Public operations -------------- */ /** * Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the specified initial * capacity and load factor. * * @param initialCapacity the initial capacity * @param loadFactor the load factor * @throws IllegalArgumentException if the initial capacity is negative * or the load factor is nonpositive */ public HashMap(int initialCapacity, float loadFactor) { //é™åˆ¶æ•°ç»„ä¸loadFactor 0&lt;initialCapacity&lt;MAXIMUM_CAPACITY // loadFactor&gt;0 if (initialCapacity &lt; 0) throw new IllegalArgumentException(&quot;Illegal initial capacity: &quot; + initialCapacity); if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException(&quot;Illegal load factor: &quot; + loadFactor); this.loadFactor = loadFactor; //tableSizeFor è¿”å›ä¸€ä¸ªå¤§äºç­‰äºå½“å‰capçš„ä¸€ä¸ªæ•°å­—ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°å­—ä¸€å®šæ˜¯2çš„æ¬¡æ–¹æ•°ï¼Œæºç å¦‚ä¸‹ï¼š this.threshold = tableSizeFor(initialCapacity); } /**è¿”å›ä¸€ä¸ªå¤§äºç­‰äºå½“å‰capçš„ä¸€ä¸ªæ•°å­—ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°å­—ä¸€å®šæ˜¯2çš„æ¬¡æ–¹æ•°ï¼š * &gt;&gt;&gt;ï¼šæ— ç¬¦å·å³ç§»ï¼Œå¿½ç•¥ç¬¦å·ä½ï¼Œç©ºä½éƒ½ä»¥0è¡¥é½ * Returns a power of two size for the given target capacity. */ static final int tableSizeFor(int cap) { int n = cap - 1; n |= n &gt;&gt;&gt; 1; n |= n &gt;&gt;&gt; 2; n |= n &gt;&gt;&gt; 4; n |= n &gt;&gt;&gt; 8; n |= n &gt;&gt;&gt; 16; return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1; } /** * Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the specified initial * capacity and the default load factor (0.75). * * @param initialCapacity the initial capacity. * @throws IllegalArgumentException if the initial capacity is negative. */ public HashMap(int initialCapacity) { this(initialCapacity, DEFAULT_LOAD_FACTOR); } /** * Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the default initial capacity * (16) and the default load factor (0.75). */ public HashMap() { this.loadFactor = DEFAULT_LOAD_FACTOR; // all other fields defaulted } /** * Constructs a new &lt;tt&gt;HashMap&lt;/tt&gt; with the same mappings as the * specified &lt;tt&gt;Map&lt;/tt&gt;. The &lt;tt&gt;HashMap&lt;/tt&gt; is created with * default load factor (0.75) and an initial capacity sufficient to * hold the mappings in the specified &lt;tt&gt;Map&lt;/tt&gt;. * * @param m the map whose mappings are to be placed in this map * @throws NullPointerException if the specified map is null */ public HashMap(Map&lt;? extends K, ? extends V&gt; m) { this.loadFactor = DEFAULT_LOAD_FACTOR; putMapEntries(m, false); } LinkedHashMap ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ åº•å±‚å“ˆå¸Œè¡¨+åŒå‘é“¾è¡¨ï¼ŒHashMapå­ç±» åº•å±‚ çº¿ç¨‹ä¸å®‰å…¨ æ–¹æ³•ä¸­æ²¡æœ‰synchronized æœ‰åº æœ‰åº å¤šç©ºé”®å€¼æˆ–å•ç©ºé”®æˆ–å€¼ åŒHashMap æ‰©å®¹ä¸¤å€ åŒhashmap åº•å±‚ putã€resizeæ‰©å®¹å‡ä½¿ç”¨HashMapçš„æ–¹æ³•ï¼Œæ‹¥æœ‰HashMapæ‰€æœ‰ç‰¹æ€§ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485public class LinkedHashMap&lt;K,V&gt; extends HashMap&lt;K,V&gt; implements Map&lt;K,V&gt;{} /** * HashMap.Node subclass for normal LinkedHashMap entries. */ static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; { Entry&lt;K,V&gt; before, after; Entry(int hash, K key, V value, Node&lt;K,V&gt; next) { super(hash, key, value, next); } } /**åŒå‘é“¾è¡¨å¤´ * The head (eldest) of the doubly linked list. */ transient LinkedHashMap.Entry&lt;K,V&gt; head; /**åŒå‘é“¾è¡¨å°¾ * The tail (youngest) of the doubly linked list. */ transient LinkedHashMap.Entry&lt;K,V&gt; tail; /** * The iteration ordering method for this linked hash map: &lt;tt&gt;true&lt;/tt&gt; * for access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order. * * @serial */ final boolean accessOrder;/** * Constructs an empty insertion-ordered &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance * with the specified initial capacity and a default load factor (0.75). * * @param initialCapacity the initial capacity * @throws IllegalArgumentException if the initial capacity is negative */ public LinkedHashMap(int initialCapacity) { super(initialCapacity); accessOrder = false; } /** * Constructs an empty insertion-ordered &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance * with the default initial capacity (16) and load factor (0.75). */ public LinkedHashMap() { super(); accessOrder = false; } /** * Constructs an insertion-ordered &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance with * the same mappings as the specified map. The &lt;tt&gt;LinkedHashMap&lt;/tt&gt; * instance is created with a default load factor (0.75) and an initial * capacity sufficient to hold the mappings in the specified map. * * @param m the map whose mappings are to be placed in this map * @throws NullPointerException if the specified map is null */ public LinkedHashMap(Map&lt;? extends K, ? extends V&gt; m) { super(); accessOrder = false; putMapEntries(m, false); } /** * Constructs an empty &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance with the * specified initial capacity, load factor and ordering mode. * * @param initialCapacity the initial capacity * @param loadFactor the load factor *=====æ­¤æ„é€ æ–¹æ³•accessOrderä¸ºtrueæ—¶å®ç°äº†æŒ‰è®¿é—®é¡ºåºå­˜å‚¨å…ƒç´ ====== *@param accessOrder the ordering mode - &lt;tt&gt;true&lt;/tt&gt; for access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order * @throws IllegalArgumentException if the initial capacity is negative * or the load factor is nonpositive */ public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder) { super(initialCapacity, loadFactor); this.accessOrder = accessOrder; } æœ‰åº 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105 /** * HashMap.Node subclass for normal LinkedHashMap entries. */ static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; { //è®°å½•ç›¸é‚»ä¸¤ä¸ªkey-valueå¯¹è±¡ Entry&lt;K,V&gt; before, after; Entry(int hash, K key, V value, Node&lt;K,V&gt; next) { super(hash, key, value, next); } } /**åŒå‘é“¾è¡¨å¤´ * The head (eldest) of the doubly linked list. */ transient LinkedHashMap.Entry&lt;K,V&gt; head; /**åŒå‘é“¾è¡¨å°¾ * The tail (youngest) of the doubly linked list. */ transient LinkedHashMap.Entry&lt;K,V&gt; tail;/**====falseåˆ™æŒ‰æ’å…¥é¡ºåºå­˜å‚¨å…ƒç´ ï¼Œå¦‚æœæ˜¯trueåˆ™æŒ‰è®¿é—®é¡ºåºå­˜å‚¨å…ƒç´  * The iteration ordering method for this linked hash map: &lt;tt&gt;true&lt;/tt&gt; * for access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order. * * @serial */ final boolean accessOrder; Node&lt;K,V&gt; newNode(int hash, K key, V value, Node&lt;K,V&gt; e) { LinkedHashMap.Entry&lt;K,V&gt; p = new LinkedHashMap.Entry&lt;K,V&gt;(hash, key, value, e); linkNodeLast(p); return p; } /** * The iteration ordering method for this linked hash map: &lt;tt&gt;true&lt;/tt&gt; * for access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order. * * @serial */ final boolean accessOrder; // internal utilities//å®ç°æœ‰åºçš„æ–¹æ³•//ä¸¾ä¾‹:æ”¾å…¥1,2,3//1è¿›ï¼šhead=tail=1 last=null // 3è¿›ï¼štail=last=1--ã€‹tail=3 3.before=1 --ã€‹ 1.after=3 // 2è¿›ï¼štail=last=3--ã€‹tail=2 2.before=3 --ã€‹ 3.after=2 // link at the end of list private void linkNodeLast(LinkedHashMap.Entry&lt;K,V&gt; p) { LinkedHashMap.Entry&lt;K,V&gt; last = tail; tail = p; if (last == null) head = p; else { p.before = last; last.after = p; } }//HashMapçš„Node===============/** * Basic hash bin node, used for most entries. (See below for * TreeNode subclass, and in LinkedHashMap for its Entry subclass.) */ static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; { final int hash; final K key; V value; Node&lt;K,V&gt; next; Node(int hash, K key, V value, Node&lt;K,V&gt; next) { this.hash = hash; this.key = key; this.value = value; this.next = next; } public final K getKey() { return key; } public final V getValue() { return value; } public final String toString() { return key + &quot;=&quot; + value; } public final int hashCode() { return Objects.hashCode(key) ^ Objects.hashCode(value); } public final V setValue(V newValue) { V oldValue = value; value = newValue; return oldValue; } public final boolean equals(Object o) { if (o == this) return true; if (o instanceof Map.Entry) { Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o; if (Objects.equals(key, e.getKey()) &amp;&amp; Objects.equals(value, e.getValue())) return true; } return false; } } TreeMap ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ åº•å±‚äºŒå‰æ ‘ã€çº¢é»‘æ ‘ã€‘ åº•å±‚çº¢é»‘æ ‘ çº¿ç¨‹ä¸å®‰å…¨ æ–¹æ³•ä¸­æ²¡æœ‰synchronized æœ‰åºï¼Œæ¯”è¾ƒé€šè¿‡key åº•å±‚çº¢é»‘æ ‘ å¤šå€¼å¯ç©º åº•å±‚çº¢é»‘æ ‘ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697//NavigableMapæ¥å£æä¾›é’ˆå¯¹Keyçš„æœ‰åºè®¿é—®ï¼Œpublic class TreeMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements NavigableMap&lt;K,V&gt;, Cloneable, java.io.Serializable{ /** * The comparator used to maintain order in this tree map, or * null if it uses the natural ordering of its keys. * * @serial */ private final Comparator&lt;? super K&gt; comparator; private transient Entry&lt;K,V&gt; root; /** * The number of entries in the tree */ private transient int size = 0; /** * The number of structural modifications to the tree. */ private transient int modCount = 0; /** * Node in the Tree. Doubles as a means to pass key-value pairs back to * user (see Map.Entry). */ static final class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; { K key; V value; Entry&lt;K,V&gt; left; Entry&lt;K,V&gt; right; Entry&lt;K,V&gt; parent; boolean color = BLACK; /** * Make a new cell with given key, value, and parent, and with * {@code null} child links, and BLACK color. */ Entry(K key, V value, Entry&lt;K,V&gt; parent) { this.key = key; this.value = value; this.parent = parent; } /** * Returns the key. * * @return the key */ public K getKey() { return key; } /** * Returns the value associated with the key. * * @return the value associated with the key */ public V getValue() { return value; } /** * Replaces the value currently associated with the key with the given * value. * * @return the value associated with the key before this method was * called */ public V setValue(V value) { V oldValue = this.value; this.value = value; return oldValue; } public boolean equals(Object o) { if (!(o instanceof Map.Entry)) return false; Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o; return valEquals(key,e.getKey()) &amp;&amp; valEquals(value,e.getValue()); } public int hashCode() { int keyHash = (key==null ? 0 : key.hashCode()); int valueHash = (value==null ? 0 : value.hashCode()); return keyHash ^ valueHash; } public String toString() { return key + &quot;=&quot; + value; } }} HashTable çº¿ç¨‹å®‰å…¨ï¼Œå†…éƒ¨çš„æ–¹æ³•åŸºæœ¬éƒ½ç»è¿‡ synchronizedï¼Œä¿ç•™ç±»ä¸å»ºè®®ä½¿ç”¨ ConcurrentHashMap ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ åº•å±‚æ•°ç»„ã€é“¾è¡¨ã€çº¢é»‘æ ‘ åº•å±‚ çº¿ç¨‹å®‰å…¨ çº¿ç¨‹å®‰å…¨ åŠ¨æ€æ‰©å®¹ä¸ºåŸæ¥çš„2å€ int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ? capacityIncrement : oldCapacity); éƒ½å®‰å…¨ä½†æ˜¯ConcurrentHashMap æ¯” HashTable æ•ˆç‡è¦é«˜ ConcurrentHashMap é”ç²’åº¦æ›´ç»† éç©º JDK1.7 : ã€æ•°ç»„ï¼ˆSegmentï¼‰ + æ•°ç»„ï¼ˆHashEntryï¼‰ + é“¾è¡¨ï¼ˆHashEntryèŠ‚ç‚¹ï¼‰ã€‘ ConcurrentHashMapï¼ˆåˆ†æ®µé”ï¼‰ å¯¹æ•´ä¸ªæ¡¶æ•°ç»„è¿›è¡Œäº†åˆ†å‰²åˆ†æ®µ(Segment)ï¼Œæ¯ä¸€æŠŠé”åªé”å®¹å™¨å…¶ä¸­ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå¤šçº¿ç¨‹è®¿é—®å®¹å™¨é‡Œä¸åŒæ•°æ®æ®µçš„æ•°æ®ï¼Œå°±ä¸ä¼šå­˜åœ¨é”ç«äº‰ï¼Œæé«˜å¹¶å‘è®¿é—®ç‡ã€‚Segmentæ˜¯ä¸€ç§å¯é‡å…¥é”ReentrantLockï¼Œåœ¨ConcurrentHashMapé‡Œæ‰®æ¼”é”çš„è§’è‰²ï¼ŒHashEntryåˆ™ç”¨äºå­˜å‚¨é”®å€¼å¯¹æ•°æ®ã€‚ JDK1.8 : Nodeæ•°ç»„+é“¾è¡¨ / çº¢é»‘æ ‘ åˆ©ç”¨CAS+Synchronizedæ¥ä¿è¯å¹¶å‘æ›´æ–°çš„å®‰å…¨ï¼Œåº•å±‚ä¾ç„¶é‡‡ç”¨æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘çš„å­˜å‚¨ç»“æ„ã€‚ åº•å±‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** * The array of bins. Lazily initialized upon first insertion. * Size is always a power of two. Accessed directly by iterators. */ transient volatile Node&lt;K,V&gt;[] table; /** * The next table to use; non-null only while resizing. */ private transient volatile Node&lt;K,V&gt;[] nextTable; /** * Base counter value, used mainly when there is no contention, * but also as a fallback during table initialization * races. Updated via CAS. */ private transient volatile long baseCount; /** * hashè¡¨åˆå§‹åŒ–æˆ–æ‰©å®¹æ—¶çš„ä¸€ä¸ªæ§åˆ¶ä½æ ‡è¯†é‡ã€‚ * è´Ÿæ•°ä»£è¡¨æ­£åœ¨è¿›è¡Œåˆå§‹åŒ–æˆ–æ‰©å®¹æ“ä½œ * -1ä»£è¡¨æ­£åœ¨åˆå§‹åŒ– * -N è¡¨ç¤ºæœ‰N-1ä¸ªçº¿ç¨‹æ­£åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œ * æ­£æ•°æˆ–0ä»£è¡¨hashè¡¨è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œè¿™ä¸ªæ•°å€¼è¡¨ç¤ºåˆå§‹åŒ–æˆ–ä¸‹ä¸€æ¬¡è¿›è¡Œæ‰©å®¹çš„å¤§å° * Table initialization and resizing control. When negative, the * table is being initialized or resized: -1 for initialization, * else -(1 + the number of active resizing threads). Otherwise, * when table is null, holds the initial table size to use upon * creation, or 0 for default. After initialization, holds the * next element count value upon which to resize the table. */ private transient volatile int sizeCtl; /** * The next table index (plus one) to split while resizing. */ private transient volatile int transferIndex; /** * Spinlock (locked via CAS) used when resizing and/or creating CounterCells. */ private transient volatile int cellsBusy; /** * Table of counter cells. When non-null, size is a power of 2. */ private transient volatile CounterCell[] counterCells; Queue å…ˆè¿›å…ˆå‡º PriorityQueue ç‰¹ç‚¹ åŸå› ï¼ˆæºç ï¼‰ åº•å±‚äºŒå‰å°é¡¶å † ä¿è¯æ¯æ¬¡å–å‡ºçš„å…ƒç´ æ˜¯é˜Ÿåˆ—ä¸­æƒå€¼æœ€å°çš„ æ–¹æ³•ä¸­æœ‰synchronizedï¼Œæ‰€ä»¥æ€§èƒ½ä¸å¦‚ArrayList énull int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ? capacityIncrement : oldCapacity); å·¥å…·ç±» Collections ç¡®ä¿å†…å®¹ä¸è¢«ä¿®æ”¹ unmodifiableMap unmodifiableList unmodifiableSet Arrays Comparableå’ŒComparator â€‹ Comparableæ˜¯æ’åºæ¥å£ï¼›è‹¥ä¸€ä¸ªç±»å®ç°äº†Comparableæ¥å£ï¼Œå°±æ„å‘³ç€â€œè¯¥ç±»æ”¯æŒæ’åºâ€ã€‚è€ŒComparatoræ˜¯æ¯”è¾ƒå™¨ï¼›æˆ‘ä»¬è‹¥éœ€è¦æ§åˆ¶æŸä¸ªç±»çš„æ¬¡åºï¼Œå¯ä»¥å»ºç«‹ä¸€ä¸ªâ€œè¯¥ç±»çš„æ¯”è¾ƒå™¨â€æ¥è¿›è¡Œæ’åºã€‚Comparableç›¸å½“äºâ€œå†…éƒ¨æ¯”è¾ƒå™¨â€ï¼Œè€ŒComparatorç›¸å½“äºâ€œå¤–éƒ¨æ¯”è¾ƒå™¨â€ã€‚ å®¹å™¨ç»¼åˆé—®é¢˜ JUC é—®é¢˜ï¼šä»€ä¹ˆæ—¶å€™è¯¥ç”¨å¤šçº¿ç¨‹ï¼Ÿ â€‹ åœ¨Javaä¸­ï¼Œçº¿ç¨‹éƒ¨åˆ†æ˜¯ä¸€ä¸ªé‡ç‚¹ï¼Œæœ¬ç¯‡æ–‡ç« è¯´çš„JUCä¹Ÿæ˜¯å…³äºçº¿ç¨‹çš„ã€‚JUCå°±æ˜¯java.util .concurrentå·¥å…·åŒ…çš„ç®€ç§°ã€‚è¿™æ˜¯ä¸€ä¸ªå¤„ç†çº¿ç¨‹çš„å·¥å…·åŒ…ï¼ŒJDK 1.5å¼€å§‹å‡ºç°çš„ã€‚ å¤šçº¿ç¨‹åŸºç¡€ è¿›ç¨‹(Process) æŠŠä¸€ä¸ªä»»åŠ¡ç§°ä¸ºä¸€ä¸ªè¿›ç¨‹ è¿›ç¨‹å†…éƒ¨è¿˜éœ€è¦åŒæ—¶æ‰§è¡Œå¤šä¸ªå­ä»»åŠ¡ç§°ä¸ºçº¿ç¨‹ è¿›ç¨‹å’Œçº¿ç¨‹çš„å…³ç³»å°±æ˜¯ï¼šä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼ˆThreadï¼‰ï¼Œä½†è‡³å°‘ä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚ å¤šè¿›ç¨‹æ¨¡å¼ï¼ˆæ¯ä¸ªè¿›ç¨‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼‰ å¤šçº¿ç¨‹æ¨¡å¼ï¼ˆä¸€ä¸ªè¿›ç¨‹æœ‰å¤šä¸ªçº¿ç¨‹ï¼‰ å¤šè¿›ç¨‹ï¼‹å¤šçº¿ç¨‹æ¨¡å¼ï¼ˆå¤æ‚åº¦æœ€é«˜ï¼‰ å’Œå¤šçº¿ç¨‹ç›¸æ¯”ï¼Œ å¤šè¿›ç¨‹ç¼ºç‚¹åœ¨äºï¼šåˆ›å»ºè¿›ç¨‹æ¯”åˆ›å»ºçº¿ç¨‹å¼€é”€å¤§ï¼Œå°¤å…¶æ˜¯åœ¨Windowsç³»ç»Ÿä¸Šï¼›è¿›ç¨‹é—´é€šä¿¡æ¯”çº¿ç¨‹é—´é€šä¿¡è¦æ…¢ï¼Œå› ä¸ºçº¿ç¨‹é—´é€šä¿¡å°±æ˜¯è¯»å†™åŒä¸€ä¸ªå˜é‡ï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚ å¤šè¿›ç¨‹çš„ä¼˜ç‚¹åœ¨äºï¼šå¤šè¿›ç¨‹ç¨³å®šæ€§æ¯”å¤šçº¿ç¨‹é«˜ï¼Œå› ä¸ºåœ¨å¤šè¿›ç¨‹çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹ï¼Œè€Œåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œä»»ä½•ä¸€ä¸ªçº¿ç¨‹å´©æºƒä¼šç›´æ¥å¯¼è‡´æ•´ä¸ªè¿›ç¨‹å´©æºƒã€‚ å¤šçº¿ç¨‹ Javaè¯­è¨€å†…ç½®äº†å¤šçº¿ç¨‹æ”¯æŒï¼šä¸€ä¸ªJavaç¨‹åºå®é™…ä¸Šæ˜¯ä¸€ä¸ªJVMè¿›ç¨‹ï¼ŒJVMè¿›ç¨‹ç”¨ä¸€ä¸ªä¸»çº¿ç¨‹æ¥æ‰§è¡Œmain()æ–¹æ³•ï¼Œåœ¨main()æ–¹æ³•å†…éƒ¨ï¼Œæˆ‘ä»¬åˆå¯ä»¥å¯åŠ¨å¤šä¸ªçº¿ç¨‹ã€‚æ­¤å¤–ï¼ŒJVMè¿˜æœ‰è´Ÿè´£åƒåœ¾å›æ”¶çš„å…¶ä»–å·¥ä½œçº¿ç¨‹ç­‰ã€‚ å› æ­¤ï¼Œå¯¹äºå¤§å¤šæ•°Javaç¨‹åºæ¥è¯´ï¼Œæˆ‘ä»¬è¯´å¤šä»»åŠ¡ï¼Œå®é™…ä¸Šæ˜¯è¯´å¦‚ä½•ä½¿ç”¨å¤šçº¿ç¨‹å®ç°å¤šä»»åŠ¡ã€‚ â€‹ å’Œå•çº¿ç¨‹ç›¸æ¯”ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹çš„ç‰¹ç‚¹åœ¨äºï¼šå¤šçº¿ç¨‹ç»å¸¸éœ€è¦è¯»å†™å…±äº«æ•°æ®ï¼Œå¹¶ä¸”éœ€è¦åŒæ­¥ã€‚ä¾‹å¦‚ï¼Œæ’­æ”¾ç”µå½±æ—¶ï¼Œå°±å¿…é¡»ç”±ä¸€ä¸ªçº¿ç¨‹æ’­æ”¾è§†é¢‘ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ’­æ”¾éŸ³é¢‘ï¼Œä¸¤ä¸ªçº¿ç¨‹éœ€è¦åè°ƒè¿è¡Œï¼Œå¦åˆ™ç”»é¢å’Œå£°éŸ³å°±ä¸åŒæ­¥ã€‚å› æ­¤ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹çš„å¤æ‚åº¦é«˜ï¼Œè°ƒè¯•æ›´å›°éš¾ã€‚ â€‹ Javaå¤šçº¿ç¨‹ç¼–ç¨‹çš„ç‰¹ç‚¹åˆåœ¨äºï¼šå¤šçº¿ç¨‹æ¨¡å‹æ˜¯Javaç¨‹åºæœ€åŸºæœ¬çš„å¹¶å‘æ¨¡å‹ï¼›åç»­è¯»å†™ç½‘ç»œã€æ•°æ®åº“ã€Webå¼€å‘ç­‰éƒ½ä¾èµ–Javaå¤šçº¿ç¨‹æ¨¡å‹ã€‚ ç®¡ç¨‹ â€‹ ç®¡ç¨‹(monitor)æ˜¯ä¿è¯äº†åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨ç®¡ç¨‹å†…æ´»åŠ¨,å³ç®¡ç¨‹å†…å®šä¹‰çš„æ“ä½œåœ¨åŒä¸€æ—¶åˆ»åªè¢«ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨(ç”±ç¼–è¯‘å™¨å®ç°).ä½†æ˜¯è¿™æ ·å¹¶ä¸èƒ½ä¿è¯è¿›ç¨‹ä»¥è®¾è®¡çš„é¡ºåºæ‰§è¡Œã€‚JVMä¸­åŒæ­¥æ˜¯åŸºäºè¿›å…¥å’Œé€€å‡ºç®¡ç¨‹(monitor)å¯¹è±¡å®ç°çš„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªç®¡ç¨‹(monitor)å¯¹è±¡ï¼Œç®¡ç¨‹(monitor)ä¼šéšç€javaå¯¹è±¡ä¸€åŒåˆ›å»ºå’Œé”€æ¯ã€‚æ‰§è¡Œçº¿ç¨‹é¦–å…ˆè¦æŒæœ‰ç®¡ç¨‹å¯¹è±¡ï¼Œç„¶åæ‰èƒ½æ‰§è¡Œæ–¹æ³•ï¼Œå½“æ–¹æ³•å®Œæˆä¹‹åä¼šé‡Šæ”¾ç®¡ç¨‹ï¼Œæ–¹æ³•åœ¨æ‰§è¡Œæ—¶å€™ä¼šæŒæœ‰ç®¡ç¨‹ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•å†è·å–åŒä¸€ä¸ªç®¡ç¨‹ æ˜¾å¼åˆ›å»ºæ–°çº¿ç¨‹ ç»§æ‰¿Threadç±»ï¼Œå®ä¾‹åŒ–ä¸€ä¸ªThreadå®ä¾‹å¹¶é‡å†™runï¼ˆï¼‰ï¼Œç„¶åè°ƒç”¨å®ƒçš„start()æ–¹æ³•ï¼š å¸Œæœ›æ–°çº¿ç¨‹èƒ½æ‰§è¡ŒæŒ‡å®šçš„ä»£ç  æ–¹æ³•ä¸€ï¼šä»Threadæ´¾ç”Ÿä¸€ä¸ªè‡ªå®šä¹‰ç±»ï¼Œç„¶åè¦†å†™run()æ–¹æ³•ï¼š æ–¹æ³•äºŒï¼šåˆ›å»ºThreadå®ä¾‹æ—¶ï¼Œä¼ å…¥ä¸€ä¸ªRunnableå®ä¾‹ï¼š çº¿ç¨‹çš„ä¼˜å…ˆçº§ å¯ä»¥å¯¹çº¿ç¨‹è®¾å®šä¼˜å…ˆçº§ï¼Œè®¾å®šä¼˜å…ˆçº§çš„æ–¹æ³•æ˜¯ï¼š Thread.setPriority(int n) // 1~10, é»˜è®¤å€¼5 å®ç°Runnableæ¥å£ ä¸Callableä¸åŒ æ— è¿”å›å€¼ æ— è¿”å›å¼‚å¸¸ å®ç°run() å®ç°Callableæ¥å£ï¼ˆjdk1.5ï¼‰ å®ç° Callableæ¥å£ 1.å®ç° Callableæ¥å£,éœ€è¦è¿”å›å€¼ç±»å‹ 2.é‡å†™callæ–¹æ³•,éœ€è¦æŠ›å‡ºå¼‚å¸¸ 3.åˆ›å»ºç›®æ ‡å¯¹è±¡ 4.åˆ›å»ºæ‰§è¡ŒæœåŠ¡: Executorservice ser= Executors. newfixed Threadpool(1) 5.æäº¤æ‰§è¡Œ: Future&lt; Boolean&gt; result1=ser. submit(t1); 6.è·å–ç»“æœ: boolean r1= result1.get() 7.å…³é—­æœåŠ¡:ser. shutdownNow() æ€»ç»“ï¼šThreadä¸ºåŸºï¼Œå¦å¤–ä¸¤ä¸ªé€šè¿‡Thread å®ä¾‹å®ç°ï¼Œé€šè¿‡æ¥å£é¿å…å•ç»§æ‰¿å±€é™æ€§ï¼Œçµæ´»æ–¹ä¾¿åŒä¸€ä¸ªå¯¹è±¡è¢«å¤šä¸ªçº¿ç¨‹ä½¿ç”¨ï¼ŒåŒºåˆ«åœ¨Callable æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼é€šè¿‡FutureTaskå°è£…å†ç»™Threadå®ä¾‹ï¼Œè€ŒRunnableå®ä¾‹ç›´æ¥ç»™Thread å®ä¾‹å®ç°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118package pers.lxl.mylearnproject.javase.thread;import java.util.concurrent.Callable;import java.util.concurrent.ExecutionException;import java.util.concurrent.FutureTask;/** * å¿«é€Ÿäº¤æ›¿æ‰§è¡Œçœ‹èµ·æ¥åƒæ˜¯åŒæ—¶æ‰§è¡Œ * è¿›ç¨‹å’Œçº¿ç¨‹çš„å…³ç³»ï¼šä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼Œä½†è‡³å°‘ä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹ * å¤šè¿›ç¨‹æ¨¡å¼ï¼ˆæ¯ä¸ªè¿›ç¨‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼‰ * å¤šçº¿ç¨‹æ¨¡å¼ï¼ˆä¸€ä¸ªè¿›ç¨‹æœ‰å¤šä¸ªçº¿ç¨‹ï¼‰ * å¤šè¿›ç¨‹ï¼‹å¤šçº¿ç¨‹æ¨¡å¼ï¼ˆå¤æ‚åº¦æœ€é«˜ï¼‰ * å’Œå¤šçº¿ç¨‹ç›¸æ¯”ï¼Œå¤šè¿›ç¨‹çš„ç¼ºç‚¹åœ¨äºï¼š * åˆ›å»ºè¿›ç¨‹æ¯”åˆ›å»ºçº¿ç¨‹å¼€é”€å¤§ï¼Œå°¤å…¶æ˜¯åœ¨Windowsç³»ç»Ÿä¸Šï¼› * è¿›ç¨‹é—´é€šä¿¡æ¯”çº¿ç¨‹é—´é€šä¿¡è¦æ…¢ï¼Œå› ä¸ºçº¿ç¨‹é—´é€šä¿¡å°±æ˜¯è¯»å†™åŒä¸€ä¸ªå˜é‡ï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚ * å¤šè¿›ç¨‹çš„ä¼˜ç‚¹åœ¨äºï¼š * å¤šè¿›ç¨‹ç¨³å®šæ€§æ¯”å¤šçº¿ç¨‹é«˜ï¼Œå› ä¸ºåœ¨å¤šè¿›ç¨‹çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹ï¼Œè€Œåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œä»»ä½•ä¸€ä¸ªçº¿ç¨‹å´©æºƒä¼šç›´æ¥å¯¼è‡´æ•´ä¸ªè¿›ç¨‹å´©æºƒã€‚ * Javaè¯­è¨€å†…ç½®äº†å¤šçº¿ç¨‹æ”¯æŒï¼šä¸€ä¸ªJavaç¨‹åºå®é™…ä¸Šæ˜¯ä¸€ä¸ªJVMè¿›ç¨‹ï¼ŒJVMè¿›ç¨‹ç”¨ä¸€ä¸ªä¸»çº¿ç¨‹æ¥æ‰§è¡Œmain()æ–¹æ³•ï¼Œåœ¨main()æ–¹æ³•å†…éƒ¨ï¼Œæˆ‘ä»¬åˆå¯ä»¥å¯åŠ¨å¤šä¸ªçº¿ç¨‹ã€‚æ­¤å¤–ï¼ŒJVMè¿˜æœ‰è´Ÿè´£åƒåœ¾å›æ”¶çš„å…¶ä»–å·¥ä½œçº¿ç¨‹ç­‰ã€‚ * å› æ­¤ï¼Œå¯¹äºå¤§å¤šæ•°Javaç¨‹åºæ¥è¯´ï¼Œæˆ‘ä»¬è¯´å¤šä»»åŠ¡ï¼Œå®é™…ä¸Šæ˜¯è¯´å¦‚ä½•ä½¿ç”¨å¤šçº¿ç¨‹å®ç°å¤šä»»åŠ¡ã€‚ * å’Œå•çº¿ç¨‹ç›¸æ¯”ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹çš„ç‰¹ç‚¹åœ¨äºï¼šå¤šçº¿ç¨‹ç»å¸¸éœ€è¦è¯»å†™å…±äº«æ•°æ®ï¼Œå¹¶ä¸”éœ€è¦åŒæ­¥ã€‚ä¾‹å¦‚ï¼Œæ’­æ”¾ç”µå½±æ—¶ï¼Œå°±å¿…é¡»ç”±ä¸€ä¸ªçº¿ç¨‹æ’­æ”¾è§†é¢‘ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ’­æ”¾éŸ³é¢‘ï¼Œä¸¤ä¸ªçº¿ç¨‹éœ€è¦åè°ƒè¿è¡Œï¼Œå¦åˆ™ç”»é¢å’Œå£°éŸ³å°±ä¸åŒæ­¥ã€‚å› æ­¤ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹çš„å¤æ‚åº¦é«˜ï¼Œè°ƒè¯•æ›´å›°éš¾ã€‚ * Javaå¤šçº¿ç¨‹ç¼–ç¨‹çš„ç‰¹ç‚¹åˆåœ¨äºï¼š * å¤šçº¿ç¨‹æ¨¡å‹æ˜¯Javaç¨‹åºæœ€åŸºæœ¬çš„å¹¶å‘æ¨¡å‹ï¼› * åç»­è¯»å†™ç½‘ç»œã€æ•°æ®åº“ã€Webå¼€å‘ç­‰éƒ½ä¾èµ–Javaå¤šçº¿ç¨‹æ¨¡å‹ã€‚ * * @author lxl **/public class HelloClass { //å¸Œæœ›æ–°çº¿ç¨‹èƒ½æ‰§è¡ŒæŒ‡å®šçš„ä»£ç ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š /** * æ–¹æ³•ä¸€ï¼šä»Threadæ´¾ç”Ÿä¸€ä¸ªè‡ªå®šä¹‰ç±»ï¼Œç„¶åè¦†å†™run()æ–¹æ³•ï¼Œå¯åŠ¨ï¼šå­ç±»å¯¹è±¡.start(),ä¸ºé¿å…OOPå•ç»§æ‰¿å±€é™æ€§ï¼Œä¸å»ºè®®ä½¿ç”¨ */ static class MyThread extends Thread { @Override public void run() { System.out.println(&quot;start new thread!extends Thread&quot;); } } /** * æ–¹æ³•äºŒï¼šåˆ›å»ºThreadå®ä¾‹æ—¶ï¼Œä¼ å…¥ä¸€ä¸ªRunnableå®ä¾‹ï¼šå¯åŠ¨ï¼šä¼ å…¥ç›®æ ‡å¯¹è±¡+Threadå¯¹è±¡.start()ï¼Œå»ºè®®ä½¿ç”¨:é¿å…å•ç»§æ‰¿å±€é™æ€§ï¼Œçµæ´»æ–¹ä¾¿åŒä¸€ä¸ªå¯¹è±¡è¢«å¤šä¸ªçº¿ç¨‹ä½¿ç”¨ */ static class MyRunnable implements Runnable { @Override public void run() { System.out.println(&quot;start new thread!implements Runnable&quot;); try { Thread.sleep(10); } catch (InterruptedException e) { } System.out.println(&quot;thread end.&quot;); } } /** * æ–¹æ³•ä¸‰ï¼šå®ç°Callableæ¥å£,ä¸Runnableç›¸æ¯”,Callableå¯ä»¥æœ‰è¿”å›å€¼,è¿”å›å€¼é€šè¿‡FutureTaskã€æœªæ¥ä»»åŠ¡ã€‘è¿›è¡Œå°è£… */ static class MyCallable implements Callable&lt;Integer&gt; { @Override public Integer call() { return 123; } }//ç›¸æ¯”ä¹‹ä¸‹,æ¥å£å¯ä»¥å®ç°å¤šä¸ª,è€ŒThreadåªèƒ½å•ç»§æ‰¿,// ç»§æ‰¿æ•´ä¸ªThreaç±»å¼€é”€è¿‡å¤§,æ‰€ä»¥å®ç°æ¥å£æ–¹å¼æ›´å¥½ä¸€äº› /** * å½“Javaç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯å¯åŠ¨äº†ä¸€ä¸ªJVMè¿›ç¨‹ï¼Œç„¶åï¼ŒJVMå¯åŠ¨ä¸»çº¿ç¨‹æ¥æ‰§è¡Œmain()æ–¹æ³•ã€‚åœ¨main()æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆå¯ä»¥å¯åŠ¨å…¶ä»–çº¿ç¨‹ã€‚ */ public static void main(String[] args) throws ExecutionException, InterruptedException { //åˆ›å»ºæ–°çº¿ç¨‹ System.out.println(&quot;main start...&quot;); //Thread thread = new Thread();//ä¸èƒ½æ‰§è¡ŒæŒ‡å®šä»£ç //extends Thread============== // Thread thread = new MyThread();//implements Callable============= MyCallable mc = new MyCallable(); FutureTask&lt;Integer&gt; ft = new FutureTask&lt;&gt;(mc); Thread thread1 = new Thread(ft); thread1.start(); System.out.println(ft.get());//lambda Callbale FutureTask&lt;Integer&gt; futureTask2 = new FutureTask&lt;&gt;(()-&gt;{ System.out.println(Thread.currentThread().getName()+&quot;come in callbale&quot;); return 111; }); new thread(futureTask2,&quot;hahha&quot;).start();//hahha come in callbale while(!futuretask2.isDone()){ System.out.println(&quot;wait....&quot;) } System.out.println(futureTask2.get());//111//implements Runnable=============== Thread thread = new Thread(new MyRunnable()); //Thread thread = new Thread(() -&gt; {System.out.println(&quot;start new thread!&quot;); });//Java8å¼•å…¥çš„lambdaå†™æ³• thread.start();// å¯åŠ¨æ–°çº¿ç¨‹ï¼Œç›´æ¥è°ƒç”¨Threadå®ä¾‹çš„run()æ–¹æ³•æ˜¯æ— æ•ˆçš„ï¼Œçº¿ç¨‹å¼€å¯ä¸ä¸€å®šç«‹å³æ‰§è¡Œï¼Œç”±CPUè°ƒåº¦å†³å®š// Thread.setPriority(int n) // 1~10, é»˜è®¤å€¼5 try { Thread.sleep(20);// sleep() å¯èƒ½ä¼šæŠ›å‡º InterruptedExceptionï¼Œå› ä¸ºå¼‚å¸¸ä¸èƒ½è·¨çº¿ç¨‹ä¼ æ’­å› main() ä¸­ï¼Œå› æ­¤å¿…é¡»åœ¨æœ¬åœ°è¿›è¡Œå¤„ç†ã€‚çº¿ç¨‹ä¸­æŠ›å‡ºçš„å…¶å®ƒå¼‚å¸¸ä¹ŸåŒæ ·éœ€è¦åœ¨æœ¬åœ°è¿›è¡Œå¤„ç†ã€‚ } catch (InterruptedException e) { } System.out.println(&quot;main end...&quot;); }} çº¿ç¨‹çš„çŠ¶æ€ åœ¨Javaç¨‹åºä¸­ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹è±¡åªèƒ½è°ƒç”¨ä¸€æ¬¡start()æ–¹æ³•å¯åŠ¨æ–°çº¿ç¨‹ï¼Œå¹¶åœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œrun()æ–¹æ³•ã€‚ä¸€æ—¦run()æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œçº¿ç¨‹å°±ç»“æŸäº†ã€‚å› æ­¤ï¼ŒJavaçº¿ç¨‹çš„çŠ¶æ€æœ‰ä»¥ä¸‹å‡ ç§ï¼š Newï¼šæ–°åˆ›å»ºçš„çº¿ç¨‹ï¼Œå°šæœªæ‰§è¡Œï¼› Runnableï¼šè¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œæ­£åœ¨æ‰§è¡Œrun()æ–¹æ³•çš„Javaä»£ç ï¼› Blockedï¼šè¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œå› ä¸ºæŸäº›æ“ä½œè¢«é˜»å¡è€ŒæŒ‚èµ·ï¼› Waitingï¼ˆä¸è§ä¸æ•£ï¼‰ï¼šè¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œå› ä¸ºæŸäº›æ“ä½œåœ¨ç­‰å¾…ä¸­ï¼› Timed Waitingï¼ˆè¿‡æ—¶ä¸å€™ï¼‰ï¼šè¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œå› ä¸ºæ‰§è¡Œsleep()æ–¹æ³•æ­£åœ¨è®¡æ—¶ç­‰å¾…ï¼› Terminatedï¼šçº¿ç¨‹å·²ç»ˆæ­¢ï¼Œå› ä¸ºrun()æ–¹æ³•æ‰§è¡Œå®Œæ¯•ã€‚ çº¿ç¨‹ç»ˆæ­¢çš„åŸå› æœ‰ï¼š çº¿ç¨‹æ­£å¸¸ç»ˆæ­¢ï¼šrun()æ–¹æ³•æ‰§è¡Œåˆ°returnè¯­å¥è¿”å›ï¼› çº¿ç¨‹æ„å¤–ç»ˆæ­¢ï¼šrun()æ–¹æ³•å› ä¸ºæœªæ•è·çš„å¼‚å¸¸å¯¼è‡´çº¿ç¨‹ç»ˆæ­¢ï¼› å¯¹æŸä¸ªçº¿ç¨‹çš„Threadå®ä¾‹è°ƒç”¨stop()æ–¹æ³•å¼ºåˆ¶ç»ˆæ­¢ï¼ˆå¼ºçƒˆä¸æ¨èä½¿ç”¨ï¼‰ã€‚ é€šè¿‡å¯¹å¦ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡è°ƒç”¨join()æ–¹æ³•å¯ä»¥ç­‰å¾…å…¶æ‰§è¡Œç»“æŸï¼› å¯ä»¥æŒ‡å®šç­‰å¾…æ—¶é—´ï¼Œè¶…è¿‡ç­‰å¾…æ—¶é—´çº¿ç¨‹ä»ç„¶æ²¡æœ‰ç»“æŸå°±ä¸å†ç­‰å¾…ï¼› å¯¹å·²ç»è¿è¡Œç»“æŸçš„çº¿ç¨‹è°ƒç”¨join()æ–¹æ³•ä¼šç«‹åˆ»è¿”å›ã€‚ ä¸­æ–­çº¿ç¨‹ å¯¹ç›®æ ‡çº¿ç¨‹è°ƒç”¨interrupt()æ–¹æ³•å¯ä»¥è¯·æ±‚ä¸­æ–­ä¸€ä¸ªçº¿ç¨‹ï¼Œç›®æ ‡çº¿ç¨‹é€šè¿‡æ£€æµ‹isInterrupted()æ ‡å¿—è·å–è‡ªèº«æ˜¯å¦å·²ä¸­æ–­ã€‚å¦‚æœç›®æ ‡çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œè¯¥çº¿ç¨‹ä¼šæ•è·åˆ°InterruptedExceptionï¼› ç›®æ ‡çº¿ç¨‹æ£€æµ‹åˆ°isInterrupted()ä¸ºtrueæˆ–è€…æ•è·äº†InterruptedExceptionéƒ½åº”è¯¥ç«‹åˆ»ç»“æŸè‡ªèº«çº¿ç¨‹ï¼› é€šè¿‡æ ‡å¿—ä½åˆ¤æ–­éœ€è¦æ­£ç¡®ä½¿ç”¨volatileå…³é”®å­—ï¼› volatileå…³é”®å­—è§£å†³äº†å…±äº«å˜é‡åœ¨çº¿ç¨‹é—´çš„å¯è§æ€§é—®é¢˜ã€‚ çº¿ç¨‹å±æ€§ çº¿ç¨‹ä¼˜å…ˆçº§ setPriority å®ˆæŠ¤çº¿ç¨‹ å®ˆæŠ¤çº¿ç¨‹æ˜¯æŒ‡ä¸ºå…¶ä»–çº¿ç¨‹æœåŠ¡çš„çº¿ç¨‹ã€‚åœ¨JVMä¸­ï¼Œæ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œæ— è®ºæœ‰æ²¡æœ‰å®ˆæŠ¤çº¿ç¨‹ï¼Œè™šæ‹Ÿæœºéƒ½ä¼šè‡ªåŠ¨é€€å‡ºã€‚å› æ­¤ï¼ŒJVMé€€å‡ºæ—¶ï¼Œä¸å¿…å…³å¿ƒå®ˆæŠ¤çº¿ç¨‹æ˜¯å¦å·²ç»“æŸã€‚å¦‚ä½•åˆ›å»ºå®ˆæŠ¤çº¿ç¨‹å‘¢ï¼Ÿæ–¹æ³•å’Œæ™®é€šçº¿ç¨‹ä¸€æ ·ï¼Œåªæ˜¯åœ¨è°ƒç”¨start()æ–¹æ³•å‰ï¼Œè°ƒç”¨setDaemon(true)æŠŠè¯¥çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼š å®ˆæŠ¤çº¿ç¨‹ä¸èƒ½æŒæœ‰ä»»ä½•éœ€è¦å…³é—­çš„èµ„æºï¼Œä¾‹å¦‚æ‰“å¼€æ–‡ä»¶ç­‰ï¼Œå› ä¸ºè™šæ‹Ÿæœºé€€å‡ºæ—¶ï¼Œå®ˆæŠ¤çº¿ç¨‹æ²¡æœ‰ä»»ä½•æœºä¼šæ¥å…³é—­æ–‡ä»¶ï¼Œè¿™ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚ åº”ç”¨ï¼šJVMåƒåœ¾å›æ”¶ã€äº‹ä»¶ç›‘å¬ã€å¿ƒè·³ç›‘æµ‹ Thread t = new MyThread(); //è°ƒç”¨start()æ–¹æ³•å‰ï¼Œè°ƒç”¨setDaemon(true)æŠŠè¯¥çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹ t.setDaemon(true); //å®ˆæŠ¤çº¿ç¨‹ä¸èƒ½æŒæœ‰ä»»ä½•éœ€è¦å…³é—­çš„èµ„æºï¼Œä¾‹å¦‚æ‰“å¼€æ–‡ä»¶ç­‰ï¼Œå› ä¸ºè™šæ‹Ÿæœºé€€å‡ºæ—¶ï¼Œå®ˆæŠ¤çº¿ç¨‹æ²¡æœ‰ä»»ä½•æœºä¼šæ¥å…³é—­æ–‡ä»¶ï¼Œè¿™ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚ t.start(); //åˆ¤æ–­æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ System.out.println(t.isDaemon()); 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788### çº¿ç¨‹ç»„### å¤„ç†æœªæ•è·å¼‚å¸¸å¤„ç†å™¨## å¤šçº¿ç¨‹ç¼–ç¨‹æ­¥éª¤1. åˆ›å»ºèµ„æºç±»ï¼Œåœ¨èµ„æºç±»åˆ›å»ºå±æ€§å’Œæ“ä½œæ–¹æ³•2. åœ¨èµ„æºç±»ä¸­æ·»åŠ æ“ä½œæ–¹æ³•ã€åˆ¤æ–­ã€å¹²æ´»ã€é€šçŸ¥ã€‘3. åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œè°ƒç”¨èµ„æºç±»çš„æ“ä½œæ–¹æ³•## synchronizedsynchronizedæ˜¯Javaä¸­çš„å…³é”®å­—ï¼Œæ˜¯ä¸€ç§**åŒæ­¥é”**ã€‚å®ƒä¿®é¥°çš„å¯¹è±¡æœ‰ä»¥ä¸‹å‡ ç§ï¼š1. ä¿®é¥°ä¸€ä¸ª**ä»£ç å—**ï¼Œè¢«ä¿®é¥°çš„ä»£ç å—ç§°ä¸ºåŒæ­¥è¯­å¥å—ï¼Œå…¶ä½œç”¨çš„èŒƒå›´æ˜¯å¤§æ‹¬å·{}æ‹¬èµ·æ¥çš„ä»£ç ï¼Œä½œç”¨çš„å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªä»£ç å—çš„å¯¹è±¡ï¼›2. ä¿®é¥°ä¸€ä¸ª**æ–¹æ³•**ï¼Œè¢«ä¿®é¥°çš„æ–¹æ³•ç§°ä¸ºåŒæ­¥æ–¹æ³•ï¼Œå…¶ä½œç”¨çš„èŒƒå›´æ˜¯æ•´ä¸ªæ–¹æ³•ï¼Œä½œç”¨çš„å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ï¼›è™½ç„¶å¯ä»¥ä½¿ç”¨synchronizedæ¥å®šä¹‰æ–¹æ³•ï¼Œä½†synchronizedå¹¶ä¸å±äºæ–¹æ³•å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ï¼Œsynchronizedå…³é”®å­—**ä¸èƒ½è¢«ç»§æ‰¿**ã€‚å¦‚æœåœ¨çˆ¶ç±»ä¸­çš„æŸä¸ªæ–¹æ³•ä½¿ç”¨äº†synchronizedå…³é”®å­—ï¼Œè€Œåœ¨å­ç±»ä¸­è¦†ç›–äº†è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨å­ç±»ä¸­çš„è¿™ä¸ªæ–¹æ³•é»˜è®¤æƒ…å†µä¸‹å¹¶ä¸æ˜¯åŒæ­¥çš„ï¼Œè€Œå¿…é¡»æ˜¾å¼åœ°åœ¨å­ç±»çš„è¿™ä¸ªæ–¹æ³•ä¸­åŠ ä¸Šsynchronizedå…³é”®å­—æ‰å¯ä»¥ã€‚å½“ç„¶ï¼Œè¿˜å¯ä»¥åœ¨å­ç±»æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»ä¸­ç›¸åº”çš„æ–¹æ³•ï¼Œè¿™æ ·è™½ç„¶å­ç±»ä¸­çš„æ–¹æ³•ä¸æ˜¯åŒæ­¥çš„ï¼Œä½†å­ç±»è°ƒç”¨äº†çˆ¶ç±»çš„åŒæ­¥æ–¹æ³•ï¼Œå› æ­¤ï¼Œå­ç±»çš„æ–¹æ³•ä¹Ÿå°±ç›¸å½“äºåŒæ­¥äº†ã€‚3. ä¿®é¥°ä¸€ä¸ª**é™æ€çš„æ–¹æ³•**ï¼Œå…¶ä½œç”¨çš„èŒƒå›´æ˜¯æ•´ä¸ªé™æ€æ–¹æ³•ï¼Œä½œç”¨çš„å¯¹è±¡æ˜¯è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ï¼›4. ä¿®é¥°ä¸€ä¸ª**ç±»**ï¼Œå…¶ä½œç”¨çš„èŒƒå›´æ˜¯synchronizedåé¢æ‹¬å·æ‹¬èµ·æ¥çš„éƒ¨åˆ†ï¼Œä½œç”¨ä¸»çš„å¯¹è±¡æ˜¯è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ã€‚â€‹ ä¸€ä¸ªå¯¹è±¡é‡Œé¢å¦‚æœæœ‰å¤šä¸ªsynchronizedæ–¹æ³•ï¼ŒæŸä¸€ä¸ªæ—¶åˆ»å†…ï¼Œåªè¦ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨å…¶ä¸­çš„ä¸€ä¸ªsynchronizedæ–¹æ³•äº†ï¼Œå…¶å®ƒçš„çº¿ç¨‹éƒ½åªèƒ½ç­‰å¾…ï¼Œæ¢å¥è¯è¯´ï¼ŒæŸä¸€ä¸ªæ—¶åˆ»å†…ï¼Œåªèƒ½æœ‰å”¯ä¸€ä¸€ä¸ªçº¿ç¨‹å»è®¿é—®è¿™äº›synchronizedæ–¹æ³•ï¼Œé”çš„æ˜¯å½“å‰å¯¹è±¡thisï¼Œè¢«é”å®šåï¼Œå…¶å®ƒçš„çº¿ç¨‹éƒ½ä¸èƒ½è¿›å…¥åˆ°å½“å‰å¯¹è±¡çš„å…¶å®ƒçš„synchronizedæ–¹æ³•ï¼ŒåŠ ä¸ªæ™®é€šæ–¹æ³•åå‘ç°å’ŒåŒæ­¥é”æ— å…³ï¼Œæ¢æˆä¸¤ä¸ªå¯¹è±¡åï¼Œä¸æ˜¯åŒä¸€æŠŠé”äº†ï¼Œæƒ…å†µç«‹åˆ»å˜åŒ–ã€‚synchronizedå®ç°åŒæ­¥çš„åŸºç¡€ï¼šJavaä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ã€‚**å…·ä½“è¡¨ç°ä¸ºä»¥ä¸‹3ç§å½¢å¼ã€‚****å¯¹äºæ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰å®ä¾‹å¯¹è±¡ã€‚****å¯¹äºé™æ€åŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰ç±»çš„Classå¯¹è±¡ã€‚****å¯¹äºåŒæ­¥æ–¹æ³•å—ï¼Œé”æ˜¯Synchonizedæ‹¬å·é‡Œé…ç½®çš„å¯¹è±¡**â€‹ å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è®¿é—®åŒæ­¥ä»£ç å—æ—¶ï¼Œå®ƒé¦–å…ˆå¿…é¡»å¾—åˆ°é”ï¼Œé€€å‡ºæˆ–æŠ›å‡ºå¼‚å¸¸æ—¶å¿…é¡»é‡Šæ”¾é”ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„éé™æ€åŒæ­¥æ–¹æ³•è·å–é”åï¼Œè¯¥å®ä¾‹å¯¹è±¡çš„å…¶ä»–éé™æ€åŒæ­¥æ–¹æ³•å¿…é¡»ç­‰å¾…è·å–é”çš„æ–¹æ³•é‡Šæ”¾é”åæ‰èƒ½è·å–é”ï¼Œå¯æ˜¯åˆ«çš„å®ä¾‹å¯¹è±¡çš„éé™æ€åŒæ­¥æ–¹æ³•å› ä¸ºè·Ÿè¯¥å®ä¾‹å¯¹è±¡çš„éé™æ€åŒæ­¥æ–¹æ³•ç”¨çš„æ˜¯ä¸åŒçš„é”ï¼Œæ‰€ä»¥æ¯‹é¡»ç­‰å¾…è¯¥å®ä¾‹å¯¹è±¡å·²è·å–é”çš„éé™æ€åŒæ­¥æ–¹æ³•é‡Šæ”¾é”å°±å¯ä»¥è·å–ä»–ä»¬è‡ªå·±çš„é”ã€‚æ‰€æœ‰çš„é™æ€åŒæ­¥æ–¹æ³•ç”¨çš„ä¹Ÿæ˜¯åŒä¸€æŠŠé”â€”â€”ç±»å¯¹è±¡æœ¬èº«ï¼Œè¿™ä¸¤æŠŠé”æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œæ‰€ä»¥**é™æ€åŒæ­¥æ–¹æ³•ä¸éé™æ€åŒæ­¥æ–¹æ³•ä¹‹é—´æ˜¯ä¸ä¼šæœ‰ç«æ€æ¡ä»¶çš„ã€‚**â€‹ ä½†æ˜¯ä¸€æ—¦ä¸€ä¸ªé™æ€åŒæ­¥æ–¹æ³•è·å–é”åï¼Œå…¶ä»–çš„é™æ€åŒæ­¥æ–¹æ³•éƒ½å¿…é¡»ç­‰å¾…è¯¥æ–¹æ³•é‡Šæ”¾é”åæ‰èƒ½è·å–é”ï¼Œè€Œä¸ç®¡æ˜¯åŒä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„é™æ€åŒæ­¥æ–¹æ³•ä¹‹é—´ï¼Œè¿˜æ˜¯ä¸åŒçš„å®ä¾‹å¯¹è±¡çš„é™æ€åŒæ­¥æ–¹æ³•ä¹‹é—´ï¼Œåªè¦å®ƒä»¬åŒä¸€ä¸ªç±»çš„å®ä¾‹å¯¹è±¡ï¼## çº¿ç¨‹åŒæ­¥- å¤šçº¿ç¨‹åŒæ—¶è¯»å†™å…±äº«å˜é‡æ—¶ï¼Œä¼šé€ æˆé€»è¾‘é”™è¯¯ï¼Œå› æ­¤éœ€è¦é€šè¿‡synchronizedåŒæ­¥ï¼›åŒæ­¥çš„æœ¬è´¨å°±æ˜¯ç»™æŒ‡å®šå¯¹è±¡åŠ é”ï¼ŒåŠ é”åæ‰èƒ½ç»§ç»­æ‰§è¡Œåç»­ä»£ç ï¼›æ³¨æ„åŠ é”å¯¹è±¡å¿…é¡»æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼›å¯¹JVMå®šä¹‰çš„å•ä¸ªåŸå­æ“ä½œä¸éœ€è¦åŒæ­¥ã€‚## åŒæ­¥æ–¹æ³•- ç”¨synchronizedä¿®é¥°æ–¹æ³•å¯ä»¥æŠŠæ•´ä¸ªæ–¹æ³•å˜ä¸ºåŒæ­¥ä»£ç å—ï¼Œsynchronizedæ–¹æ³•åŠ é”å¯¹è±¡æ˜¯thisï¼› é€šè¿‡åˆç†çš„è®¾è®¡å’Œæ•°æ®å°è£…å¯ä»¥è®©ä¸€ä¸ªç±»å˜ä¸ºâ€œçº¿ç¨‹å®‰å…¨â€ï¼› ä¸€ä¸ªç±»æ²¡æœ‰ç‰¹æ®Šè¯´æ˜ï¼Œé»˜è®¤ä¸æ˜¯thread-safeï¼› å¤šçº¿ç¨‹èƒ½å¦å®‰å…¨è®¿é—®æŸä¸ªéçº¿ç¨‹å®‰å…¨çš„å®ä¾‹ï¼Œéœ€è¦å…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚## æ­»é”- Javaçš„synchronizedé”æ˜¯éšå¼ã€è‡ªåŠ¨ä¸Šé”è§£é”ã€‘çš„**å¯é‡å…¥é”ï¼ˆé€’å½’é”ï¼‰**ï¼ŒLockæ˜¯æ˜¾å¼çš„å¯é‡å…¥é”ï¼›æ­»é”äº§ç”Ÿçš„æ¡ä»¶æ˜¯å¤šçº¿ç¨‹å„è‡ªæŒæœ‰ä¸åŒçš„é”ï¼Œå¹¶äº’ç›¸è¯•å›¾è·å–å¯¹æ–¹å·²æŒæœ‰çš„é”ï¼Œå¯¼è‡´æ— é™ç­‰å¾…ï¼›é¿å…æ­»é”çš„æ–¹æ³•æ˜¯å¤šçº¿ç¨‹è·å–é”çš„é¡ºåºè¦ä¸€è‡´ã€‚```javapackage com.atguigu.sync;import java.util.concurrent.TimeUnit;/** * æ¼”ç¤ºæ­»é” */public class DeadLock { //åˆ›å»ºä¸¤ä¸ªå¯¹è±¡ static Object a = new Object(); static Object b = new Object(); public static void main(String[] args) { new Thread(()-&gt;{ synchronized (a) { System.out.println(Thread.currentThread().getName()+&quot; æŒæœ‰é”aï¼Œè¯•å›¾è·å–é”b&quot;); try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { e.printStackTrace(); } synchronized (b) { System.out.println(Thread.currentThread().getName()+&quot; è·å–é”b&quot;); } } },&quot;A&quot;).start(); new Thread(()-&gt;{ synchronized (b) { System.out.println(Thread.currentThread().getName()+&quot; æŒæœ‰é”bï¼Œè¯•å›¾è·å–é”a&quot;); try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { e.printStackTrace(); } synchronized (a) { System.out.println(Thread.currentThread().getName()+&quot; è·å–é”a&quot;); } } },&quot;B&quot;).start(); }} éªŒè¯æ˜¯å¦ä¸ºæ­»é” é…ç½®JDKç¯å¢ƒå˜é‡ é¡¹ç›®ä¸­æ‰“å¼€ç»ˆç«¯ è¾“å…¥jps -l æŸ¥çœ‹å½“å‰ç±»çš„è¿›ç¨‹å· jstack -è¿›ç¨‹å·å¯æŸ¥çœ‹æ˜¯å¦æœ‰æ­»é”åŠç›¸å…³ä¿¡æ¯ ä½¿ç”¨waitå’Œnotify waitå’Œnotifyç”¨äºå¤šçº¿ç¨‹åè°ƒè¿è¡Œï¼š åœ¨synchronizedå†…éƒ¨å¯ä»¥è°ƒç”¨wait()ä½¿çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼› å¿…é¡»åœ¨å·²è·å¾—çš„é”å¯¹è±¡ä¸Šè°ƒç”¨wait()æ–¹æ³•ï¼› åœ¨synchronizedå†…éƒ¨å¯ä»¥è°ƒç”¨notify()æˆ–notifyAll()å”¤é†’å…¶ä»–ç­‰å¾…çº¿ç¨‹ï¼› å¿…é¡»åœ¨å·²è·å¾—çš„é”å¯¹è±¡ä¸Šè°ƒç”¨notify()æˆ–notifyAll()æ–¹æ³•ï¼› å·²å”¤é†’çš„çº¿ç¨‹è¿˜éœ€è¦é‡æ–°è·å¾—é”åæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚ è™šå‡å”¤é†’ wait()åœ¨å“ªé‡Œç¡å°±åœ¨é‚£é‡Œé†’ä½¿ç”¨æ—¶åº”ä½¿ç”¨whileè€Œä¸æ˜¯if 123456if(num!=1){ this.wait(); //notifyAllï¼ˆï¼‰å”¤é†’ä¹‹åä¼šç›´æ¥ä»this.waitï¼ˆï¼‰è¯­å¥å¼€å§‹æ‰§è¡Œï¼Œè·³è¿‡äº†ifåˆ¤æ–­}while(num!=1){ this.wait();} ä½¿ç”¨ReentrantLock ReentrantLockå¯ä»¥æ›¿ä»£synchronizedè¿›è¡ŒåŒæ­¥ï¼› ReentrantLockè·å–é”æ›´å®‰å…¨ï¼› å¿…é¡»å…ˆè·å–åˆ°é”ï¼Œå†è¿›å…¥try {...}ä»£ç å—ï¼Œæœ€åä½¿ç”¨finallyä¿è¯é‡Šæ”¾é”ï¼› å¯ä»¥ä½¿ç”¨tryLock()å°è¯•è·å–é”ã€‚ è®¾ç½®ä¸ºReentrantLockï¼ˆtrueï¼‰ä½¿å…¶æˆä¸ºå…¬å¹³é” 123456789101112131415161718192021222324252627Lock lock = new ReentrantLock(); Thread t1 = new Thread() { @Override public void run() { try { log(&quot;çº¿ç¨‹å¯åŠ¨&quot;); log(&quot;è¯•å›¾å æœ‰å¯¹è±¡ï¼šlock&quot;); //lockåŒæ­¥ lock.lock(); log(&quot;å æœ‰å¯¹è±¡ï¼šlock&quot;); log(&quot;è¿›è¡Œ5ç§’çš„ä¸šåŠ¡æ“ä½œ&quot;); Thread.sleep(5000); } catch (InterruptedException e) { e.printStackTrace(); } finally { log(&quot;é‡Šæ”¾å¯¹è±¡ï¼šlock&quot;); //æ‰‹åŠ¨é‡Šæ”¾ lock.unlock(); } log(&quot;çº¿ç¨‹ç»“æŸ&quot;); } }; t1.setName(&quot;t1&quot;); t1.start(); ä½¿ç”¨Condition Conditionå¯ä»¥æ›¿ä»£waitå’Œnotifyï¼› Conditionå¯¹è±¡å¿…é¡»ä»Lockå¯¹è±¡è·å–ã€‚ 12private Lock lock=new ReentrantLock();private Condition condition=lock.newCondition(); é” ä¸€ç§è®¾è®¡æ€æƒ³ã€ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„é”ä»¥è¾¾åˆ°èµ„æºæœ€ä¼˜åˆ©ç”¨ã€‚ ä¹è§‚é” VS æ‚²è§‚é” æ‚²è§‚é”å…ˆåŠ é”å†æ“ä½œèµ„æºï¼Œä¹è§‚é”ç›´æ¥æ“ä½œèµ„æºã€‚ ä¸ºä½•ä¹è§‚é”èƒ½å¤Ÿåšåˆ°ä¸é”å®šåŒæ­¥èµ„æºä¹Ÿå¯ä»¥æ­£ç¡®çš„å®ç°çº¿ç¨‹åŒæ­¥å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡ä»‹ç»ä¹è§‚é”çš„ä¸»è¦å®ç°æ–¹å¼ â€œCASâ€ çš„æŠ€æœ¯åŸç†æ¥ä¸ºå¤§å®¶è§£æƒ‘ã€‚ CASå…¨ç§° Compare And Swapï¼ˆæ¯”è¾ƒä¸äº¤æ¢ï¼‰ï¼Œæ˜¯ä¸€ç§æ— é”ç®—æ³•ã€‚åœ¨ä¸ä½¿ç”¨é”ï¼ˆæ²¡æœ‰çº¿ç¨‹è¢«é˜»å¡ï¼‰çš„æƒ…å†µä¸‹å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„å˜é‡åŒæ­¥ã€‚java.util.concurrentåŒ…ä¸­çš„åŸå­ç±»å°±æ˜¯é€šè¿‡CASæ¥å®ç°äº†ä¹è§‚é”ã€‚ CASç®—æ³•æ¶‰åŠåˆ°ä¸‰ä¸ªæ“ä½œæ•°ï¼š éœ€è¦è¯»å†™çš„å†…å­˜å€¼ Vã€‚ è¿›è¡Œæ¯”è¾ƒçš„å€¼ Aã€‚ è¦å†™å…¥çš„æ–°å€¼ Bã€‚ å½“ä¸”ä»…å½“ V çš„å€¼ç­‰äº A æ—¶ï¼ŒCASé€šè¿‡åŸå­æ–¹å¼ç”¨æ–°å€¼Bæ¥æ›´æ–°Vçš„å€¼ï¼ˆâ€œæ¯”è¾ƒ+æ›´æ–°â€æ•´ä½“æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼‰ï¼Œå¦åˆ™ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œâ€œæ›´æ–°â€æ˜¯ä¸€ä¸ªä¸æ–­é‡è¯•çš„æ“ä½œã€‚ CASé—®é¢˜ï¼š ABAé—®é¢˜ ã€‚CASéœ€è¦åœ¨æ“ä½œå€¼çš„æ—¶å€™æ£€æŸ¥å†…å­˜å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œæ²¡æœ‰å‘ç”Ÿå˜åŒ–æ‰ä¼šæ›´æ–°å†…å­˜å€¼ã€‚ä½†æ˜¯å¦‚æœå†…å­˜å€¼åŸæ¥æ˜¯Aï¼Œåæ¥å˜æˆäº†Bï¼Œç„¶ååˆå˜æˆäº†Aï¼Œé‚£ä¹ˆCASè¿›è¡Œæ£€æŸ¥æ—¶ä¼šå‘ç°å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯æœ‰å˜åŒ–çš„ã€‚ABAé—®é¢˜çš„è§£å†³æ€è·¯å°±æ˜¯åœ¨å˜é‡å‰é¢æ·»åŠ ç‰ˆæœ¬å·ï¼Œæ¯æ¬¡å˜é‡æ›´æ–°çš„æ—¶å€™éƒ½æŠŠç‰ˆæœ¬å·åŠ ä¸€ï¼Œè¿™æ ·å˜åŒ–è¿‡ç¨‹å°±ä»â€œAï¼Bï¼Aâ€å˜æˆäº†â€œ1Aï¼2Bï¼3Aâ€ã€‚ JDKä»1.5å¼€å§‹æä¾›äº†AtomicStampedReferenceç±»æ¥è§£å†³ABAé—®é¢˜ï¼Œå…·ä½“æ“ä½œå°è£…åœ¨compareAndSet()ä¸­ã€‚compareAndSet()é¦–å…ˆæ£€æŸ¥å½“å‰å¼•ç”¨å’Œå½“å‰æ ‡å¿—ä¸é¢„æœŸå¼•ç”¨å’Œé¢„æœŸæ ‡å¿—æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœéƒ½ç›¸ç­‰ï¼Œåˆ™ä»¥åŸå­æ–¹å¼å°†å¼•ç”¨å€¼å’Œæ ‡å¿—çš„å€¼è®¾ç½®ä¸ºç»™å®šçš„æ›´æ–°å€¼ã€‚ å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§ã€‚CASæ“ä½œå¦‚æœé•¿æ—¶é—´ä¸æˆåŠŸï¼Œä¼šå¯¼è‡´å…¶ä¸€ç›´è‡ªæ—‹ï¼Œç»™CPUå¸¦æ¥éå¸¸å¤§çš„å¼€é”€ã€‚ åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ å¯¹ä¸€ä¸ªå…±äº«å˜é‡æ‰§è¡Œæ“ä½œæ—¶ï¼ŒCASèƒ½å¤Ÿä¿è¯åŸå­æ“ä½œï¼Œä½†æ˜¯å¯¹å¤šä¸ªå…±äº«å˜é‡æ“ä½œæ—¶ï¼ŒCASæ˜¯æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§çš„ã€‚ Javaä»1.5å¼€å§‹JDKæä¾›äº†AtomicReferenceç±»æ¥ä¿è¯å¼•ç”¨å¯¹è±¡ä¹‹é—´çš„åŸå­æ€§ï¼Œå¯ä»¥æŠŠå¤šä¸ªå˜é‡æ”¾åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œæ¥è¿›è¡ŒCASæ“ä½œã€‚ è‡ªæ—‹é” VS é€‚åº”æ€§è‡ªæ—‹é” â€‹ è‡ªæ—‹é”ä¸æ”¾å¼ƒCPUæ—¶é—´ç‰‡ï¼Œè‡ªæ—‹ç­‰å¾…é”é‡Šæ”¾ï¼Œå¦‚æœè‡ªæ—‹è¶…è¿‡äº†é™å®šæ¬¡æ•°ï¼ˆé»˜è®¤æ˜¯10æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨-XX:PreBlockSpinæ¥æ›´æ”¹ï¼‰æ²¡æœ‰æˆåŠŸè·å¾—é”ï¼Œå°±åº”å½“æŒ‚èµ·çº¿ç¨‹ã€‚ â€‹ é€‚åº”æ€§è‡ªæ—‹é”çš„è‡ªé€‚åº”æ„å‘³ç€è‡ªæ—‹çš„æ—¶é—´ï¼ˆæ¬¡æ•°ï¼‰ä¸å†å›ºå®šï¼Œè€Œæ˜¯ç”±å‰ä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”ä¸Šçš„è‡ªæ—‹æ—¶é—´åŠé”çš„æ‹¥æœ‰è€…çš„çŠ¶æ€æ¥å†³å®šã€‚å¦‚æœåœ¨åŒä¸€ä¸ªé”å¯¹è±¡ä¸Šï¼Œè‡ªæ—‹ç­‰å¾…åˆšåˆšæˆåŠŸè·å¾—è¿‡é”ï¼Œå¹¶ä¸”æŒæœ‰é”çš„çº¿ç¨‹æ­£åœ¨è¿è¡Œä¸­ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°±ä¼šè®¤ä¸ºè¿™æ¬¡è‡ªæ—‹ä¹Ÿæ˜¯å¾ˆæœ‰å¯èƒ½å†æ¬¡æˆåŠŸï¼Œè¿›è€Œå®ƒå°†å…è®¸è‡ªæ—‹ç­‰å¾…æŒç»­ç›¸å¯¹æ›´é•¿çš„æ—¶é—´ã€‚å¦‚æœå¯¹äºæŸä¸ªé”ï¼Œè‡ªæ—‹å¾ˆå°‘æˆåŠŸè·å¾—è¿‡ï¼Œé‚£åœ¨ä»¥åå°è¯•è·å–è¿™ä¸ªé”æ—¶å°†å¯èƒ½çœç•¥æ‰è‡ªæ—‹è¿‡ç¨‹ï¼Œç›´æ¥é˜»å¡çº¿ç¨‹ï¼Œé¿å…æµªè´¹å¤„ç†å™¨èµ„æºã€‚åœ¨è‡ªæ—‹é”ä¸­ å¦æœ‰ä¸‰ç§å¸¸è§çš„é”å½¢å¼:TicketLockã€CLHlockå’ŒMCSlock æ— é” VS åå‘é” VS è½»é‡çº§é” VS é‡é‡çº§é” æ— é”ï¼Œæ²¡æœ‰å¯¹èµ„æºè¿›è¡Œé”å®šï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½èƒ½è®¿é—®å¹¶ä¿®æ”¹åŒä¸€ä¸ªèµ„æºï¼Œä½†åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½ä¿®æ”¹æˆåŠŸã€‚ åå‘é”ï¼Œä¸€æ®µä»£ç ä¸€ç›´è¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹ä¼šè‡ªåŠ¨è·å–é”ï¼Œé™ä½è·å–é”çš„ä»£ä»·ã€‚ åå‘é”æ—¶ï¼Œè¢«å¦å¤–çš„çº¿ç¨‹æ‰€è®¿é—®ï¼Œåå‘é”å°±ä¼šå‡çº§ä¸ºè½»é‡çº§é”ï¼Œå…¶ä»–çº¿ç¨‹ä¼šé€šè¿‡è‡ªæ—‹çš„å½¢å¼å°è¯•è·å–é”ï¼Œä¸ä¼šé˜»å¡ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ è‹¥å½“å‰åªæœ‰ä¸€ä¸ªç­‰å¾…çº¿ç¨‹ï¼Œåˆ™è¯¥çº¿ç¨‹é€šè¿‡è‡ªæ—‹è¿›è¡Œç­‰å¾…ã€‚ä½†æ˜¯å½“è‡ªæ—‹è¶…è¿‡ä¸€å®šçš„æ¬¡æ•°ï¼Œæˆ–è€…ä¸€ä¸ªçº¿ç¨‹åœ¨æŒæœ‰é”ï¼Œä¸€ä¸ªåœ¨è‡ªæ—‹ï¼Œåˆæœ‰ç¬¬ä¸‰ä¸ªæ¥è®¿æ—¶ï¼ˆæˆ–è½»é‡çº§é”æ—¶æœ‰ç¬¬ä¸‰è€…ï¼‰ï¼Œè½»é‡çº§é”å‡çº§ä¸ºé‡é‡çº§é”ã€‚ å…¬å¹³é” VS éå…¬å¹³é” å…¬å¹³é”é€šè¿‡ç”³è¯·é”çš„é¡ºåºæ¥è·å–é” éå…¬å¹³é”ç›´æ¥è·å–é”ï¼Œè·å–ä¸åˆ°ä¼šåˆ°ç­‰å¾…é˜Ÿåˆ—æœ«å°¾ç­‰å¾…ï¼ŒèŠ‚çº¦å”¤èµ·çº¿ç¨‹çš„å¼€é”€ï¼Œæé«˜ååç‡ï¼Œä½†æ˜¯éƒ¨åˆ†çº¿ç¨‹å¯èƒ½ä¼šè¢«é¥¿æ­»ï¼Œæˆ–ç­‰å¾…æ—¶é—´å¾ˆé•¿ã€‚ å¯é‡å…¥é” VS éå¯é‡å…¥é” å¯é‡å…¥é”ï¼ˆé€’å½’é”ï¼‰ï¼Œæ˜¯æŒ‡åœ¨åŒä¸€ä¸ªçº¿ç¨‹åœ¨å¤–å±‚æ–¹æ³•è·å–é”çš„æ—¶å€™ï¼Œå†è¿›å…¥è¯¥çº¿ç¨‹çš„å†…å±‚æ–¹æ³•ä¼šè‡ªåŠ¨è·å–é”ï¼ˆå‰æé”å¯¹è±¡å¾—æ˜¯åŒä¸€ä¸ªå¯¹è±¡æˆ–è€…classï¼‰ï¼Œä¸ä¼šå› ä¸ºä¹‹å‰å·²ç»è·å–è¿‡è¿˜æ²¡é‡Šæ”¾è€Œé˜»å¡ã€‚ éå¯é‡å…¥é”ï¼Œåä¹‹åŒçº¿ç¨‹åœ¨å¤–å±‚è·å–é”æ—¶åœ¨è¿›å…¥å†…å±‚éœ€è¦å…ˆé‡Šæ”¾é”ï¼Œé‡å¤è°ƒç”¨åŒæ­¥æ•°æ®æ—¶å¯èƒ½ä¼šå¯¼è‡´æ­»é”ã€‚ ç‹¬äº«é” VS å…±äº«é” ç‹¬äº«é”ï¼ˆæ’ä»–é”ï¼‰ï¼Œè¯¥é”ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‹¥æœ‰ï¼ŒåŠ é”åä¸èƒ½å†åŠ å…¶ä»–é”ï¼Œçº¿ç¨‹æ‹¥æœ‰åå¯è¯»ä¸æ”¹ã€‚ å…±äº«é”ï¼Œè¯¥é”èƒ½è¢«å¤šä¸ªçº¿ç¨‹æ‰€æ‹¥æœ‰çš„ï¼Œæ‹¥æœ‰ååªèƒ½è¯»ä¸å¯æ”¹ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥åŠ å…±äº«é”ä¸èƒ½åŠ ç‹¬äº«é”ï¼ˆæ’å®ƒé”ï¼‰ã€‚ è¯»é”å†™é” ReentrantReadWriteLock é‡Œçš„ä¸¤æŠŠé” ReadLock å’Œ WriteLockï¼Œè¯»é”æ˜¯å…±äº«é”ï¼Œå†™é”æ˜¯ç‹¬äº«é”ï¼Œéƒ½ä¼šå‘ç”Ÿæ­»é”ã€‚ ç°å®ä¸­æœ‰è¿™æ ·ä¸€ç§åœºæ™¯ï¼šå¯¹å…±äº«èµ„æºæœ‰è¯»å’Œå†™çš„æ“ä½œï¼Œä¸”å†™æ“ä½œæ²¡æœ‰è¯»æ“ä½œé‚£ä¹ˆé¢‘ç¹ã€‚åœ¨æ²¡æœ‰å†™æ“ä½œçš„æ—¶å€™ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»ä¸€ä¸ªèµ„æºæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œæ‰€ä»¥åº”è¯¥å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å–å…±äº«èµ„æºï¼›ä½†æ˜¯å¦‚æœä¸€ä¸ªçº¿ç¨‹æƒ³å»å†™è¿™äº›å…±äº«èµ„æºï¼Œå°±ä¸åº”è¯¥å…è®¸å…¶ä»–çº¿ç¨‹å¯¹è¯¥èµ„æºè¿›è¡Œè¯»å’Œå†™çš„æ“ä½œäº†ã€‚ é’ˆå¯¹è¿™ç§åœºæ™¯ï¼ŒJAVAçš„å¹¶å‘åŒ…æä¾›äº†è¯»å†™é”ReentrantReadWriteLockï¼Œå®ƒè¡¨ç¤ºä¸¤ä¸ªé”ï¼Œä¸€ä¸ªæ˜¯è¯»æ“ä½œç›¸å…³çš„é”ï¼Œç§°ä¸ºå…±äº«é”ï¼›ä¸€ä¸ªæ˜¯å†™ç›¸å…³çš„é”ï¼Œç§°ä¸ºæ’ä»–é” çº¿ç¨‹è¿›å…¥è¯»é”çš„å‰ææ¡ä»¶ï¼š â€¢ æ²¡æœ‰å…¶ä»–çº¿ç¨‹çš„å†™é” â€¢ æ²¡æœ‰å†™è¯·æ±‚, æˆ–è€…æœ‰å†™è¯·æ±‚ï¼Œä½†è°ƒç”¨çº¿ç¨‹å’ŒæŒæœ‰é”çš„çº¿ç¨‹æ˜¯åŒä¸€ä¸ª(å¯é‡å…¥é”)ã€‚ çº¿ç¨‹è¿›å…¥å†™é”çš„å‰ææ¡ä»¶ï¼š â€¢ æ²¡æœ‰å…¶ä»–çº¿ç¨‹çš„è¯»é” â€¢ æ²¡æœ‰å…¶ä»–çº¿ç¨‹çš„å†™é” è€Œè¯»å†™é”æœ‰ä»¥ä¸‹ä¸‰ä¸ªé‡è¦çš„ç‰¹æ€§ï¼š ï¼ˆ1ï¼‰å…¬å¹³é€‰æ‹©æ€§ï¼šæ”¯æŒéå…¬å¹³ï¼ˆé»˜è®¤ï¼‰å’Œå…¬å¹³çš„é”è·å–æ–¹å¼ï¼Œååé‡è¿˜æ˜¯éå…¬å¹³ä¼˜äºå…¬å¹³ã€‚ ï¼ˆ2ï¼‰é‡è¿›å…¥ï¼šè¯»é”å’Œå†™é”éƒ½æ”¯æŒçº¿ç¨‹é‡è¿›å…¥ã€‚ ï¼ˆ3ï¼‰é”é™çº§ï¼šéµå¾ªè·å–å†™é”ã€è·å–è¯»é”å†é‡Šæ”¾å†™é”çš„æ¬¡åºï¼Œå†™é”èƒ½å¤Ÿé™çº§æˆä¸ºè¯»é”ã€‚ è¡¨é”è¡Œé” è¡¨é”æ•´å¼ è¡¨ï¼Œè€Œè¡Œé”é”å•æ¡æ•°æ®ä¸”å¯èƒ½å‘ç”Ÿæ­»é”ã€‚ ä½¿ç”¨ReadWriteLock ä½¿ç”¨ReadWriteLockå¯ä»¥æé«˜è¯»å–æ•ˆç‡ï¼š ReadWriteLockåªå…è®¸ä¸€ä¸ªçº¿ç¨‹å†™å…¥ï¼› ReadWriteLockå…è®¸å¤šä¸ªçº¿ç¨‹åœ¨æ²¡æœ‰å†™å…¥æ—¶åŒæ—¶è¯»å–ï¼› ReadWriteLocké€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081package com.atguigu.readwrite;import java.util.HashMap;import java.util.Map;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReadWriteLock;import java.util.concurrent.locks.ReentrantReadWriteLock;//èµ„æºç±»class MyCache { //åˆ›å»ºmapé›†åˆ private volatile Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); //åˆ›å»ºè¯»å†™é”å¯¹è±¡ private ReadWriteLock rwLock = new ReentrantReadWriteLock(); //æ”¾æ•°æ® public void put(String key,Object value) { //æ·»åŠ å†™é” rwLock.writeLock().lock(); try { System.out.println(Thread.currentThread().getName()+&quot; æ­£åœ¨å†™æ“ä½œ&quot;+key); //æš‚åœä¸€ä¼š TimeUnit.MICROSECONDS.sleep(300); //æ”¾æ•°æ® map.put(key,value); System.out.println(Thread.currentThread().getName()+&quot; å†™å®Œäº†&quot;+key); } catch (InterruptedException e) { e.printStackTrace(); } finally { //é‡Šæ”¾å†™é” rwLock.writeLock().unlock(); } } //å–æ•°æ® public Object get(String key) { //æ·»åŠ è¯»é” rwLock.readLock().lock(); Object result = null; try { System.out.println(Thread.currentThread().getName()+&quot; æ­£åœ¨è¯»å–æ“ä½œ&quot;+key); //æš‚åœä¸€ä¼š TimeUnit.MICROSECONDS.sleep(300); result = map.get(key); System.out.println(Thread.currentThread().getName()+&quot; å–å®Œäº†&quot;+key); } catch (InterruptedException e) { e.printStackTrace(); } finally { //é‡Šæ”¾è¯»é” rwLock.readLock().unlock(); } return result; }}public class ReadWriteLockDemo { public static void main(String[] args) throws InterruptedException { MyCache myCache = new MyCache(); //åˆ›å»ºçº¿ç¨‹æ”¾æ•°æ® for (int i = 1; i &lt;=5; i++) { final int num = i; new Thread(()-&gt;{ myCache.put(num+&quot;&quot;,num+&quot;&quot;); },String.valueOf(i)).start(); } TimeUnit.MICROSECONDS.sleep(300); //åˆ›å»ºçº¿ç¨‹å–æ•°æ® for (int i = 1; i &lt;=5; i++) { final int num = i; new Thread(()-&gt;{ myCache.get(num+&quot;&quot;); },String.valueOf(i)).start(); } }} ä½¿ç”¨StampedLock StampedLockæä¾›äº†ä¹è§‚è¯»é”ï¼Œå¯å–ä»£ReadWriteLockä»¥è¿›ä¸€æ­¥æå‡å¹¶å‘æ€§èƒ½ï¼›StampedLockæ˜¯ä¸å¯é‡å…¥é”ã€‚ ä½¿ç”¨Concurrenté›†åˆ ä½¿ç”¨java.util.concurrentåŒ…æä¾›çš„çº¿ç¨‹å®‰å…¨çš„å¹¶å‘é›†åˆå¯ä»¥å¤§å¤§ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼š å¤šçº¿ç¨‹åŒæ—¶è¯»å†™å¹¶å‘é›†åˆæ˜¯å®‰å…¨çš„ï¼› å°½é‡ä½¿ç”¨Javaæ ‡å‡†åº“æä¾›çš„å¹¶å‘é›†åˆï¼Œé¿å…è‡ªå·±ç¼–å†™åŒæ­¥ä»£ç ã€‚ ä½¿ç”¨Atomic ä½¿ç”¨java.util.concurrent.atomicæä¾›çš„åŸå­æ“ä½œå¯ä»¥ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼š åŸå­æ“ä½œå®ç°äº†æ— é”çš„çº¿ç¨‹å®‰å…¨ï¼› é€‚ç”¨äºè®¡æ•°å™¨ï¼Œç´¯åŠ å™¨ç­‰ã€‚ å¢åŠ å€¼å¹¶è¿”å›æ–°å€¼ï¼šint addAndGet(int delta) åŠ 1åè¿”å›æ–°å€¼ï¼šint incrementAndGet() è·å–å½“å‰å€¼ï¼šint get() ç”¨CASæ–¹å¼è®¾ç½®ï¼šint compareAndSet(int expect, int update) ä½¿ç”¨ Future å¯¹çº¿ç¨‹æ± æäº¤ä¸€ä¸ªCallableä»»åŠ¡ï¼Œå¯ä»¥è·å¾—ä¸€ä¸ªFutureå¯¹è±¡ï¼› å¯ä»¥ç”¨Futureåœ¨å°†æ¥æŸä¸ªæ—¶åˆ»è·å–ç»“æœã€‚ ä½¿ç”¨ CompletableFuture CompletableFutureå¯ä»¥æŒ‡å®šå¼‚æ­¥å¤„ç†æµç¨‹ï¼š thenAccept()å¤„ç†æ­£å¸¸ç»“æœï¼› exceptional()å¤„ç†å¼‚å¸¸ç»“æœï¼› thenApplyAsync()ç”¨äºä¸²è¡ŒåŒ–å¦ä¸€ä¸ªCompletableFutureï¼› anyOf()å’ŒallOf()ç”¨äºå¹¶è¡ŒåŒ–å¤šä¸ªCompletableFutureã€‚ ä½¿ç”¨ ForkJoin Fork/Joinæ˜¯ä¸€ç§åŸºäºâ€œåˆ†æ²»â€çš„ç®—æ³•ï¼šé€šè¿‡åˆ†è§£ä»»åŠ¡ï¼Œå¹¶è¡Œæ‰§è¡Œï¼Œæœ€ååˆå¹¶ç»“æœå¾—åˆ°æœ€ç»ˆç»“æœã€‚ ForkJoinPoolçº¿ç¨‹æ± å¯ä»¥æŠŠä¸€ä¸ªå¤§ä»»åŠ¡åˆ†æ‹†æˆå°ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œï¼Œä»»åŠ¡ç±»å¿…é¡»ç»§æ‰¿è‡ªRecursiveTaskæˆ–RecursiveActionã€‚ ä½¿ç”¨Fork/Joinæ¨¡å¼å¯ä»¥è¿›è¡Œå¹¶è¡Œè®¡ç®—ä»¥æé«˜æ•ˆç‡ã€‚ ä½¿ç”¨ ThreadLocal ThreadLocalè¡¨ç¤ºçº¿ç¨‹çš„â€œå±€éƒ¨å˜é‡â€ï¼Œå®ƒç¡®ä¿æ¯ä¸ªçº¿ç¨‹çš„ThreadLocalå˜é‡éƒ½æ˜¯å„è‡ªç‹¬ç«‹çš„ï¼› ThreadLocalé€‚åˆåœ¨ä¸€ä¸ªçº¿ç¨‹çš„å¤„ç†æµç¨‹ä¸­ä¿æŒä¸Šä¸‹æ–‡ï¼ˆé¿å…äº†åŒä¸€å‚æ•°åœ¨æ‰€æœ‰æ–¹æ³•ä¸­ä¼ é€’ï¼‰ï¼› ä½¿ç”¨ThreadLocalè¦ç”¨try ... finallyç»“æ„ï¼Œå¹¶åœ¨finallyä¸­æ¸…é™¤ã€‚ é›†åˆçº¿ç¨‹å®‰å…¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public static void main(String[] args) { //åˆ›å»ºArrayListé›†åˆ// List&lt;String&gt; list = new ArrayList&lt;&gt;(); // Vectorè§£å†³// List&lt;String&gt; list = new Vector&lt;&gt;(); //Collectionsè§£å†³// List&lt;String&gt; list = Collections.synchronizedList(new ArrayList&lt;&gt;()); // CopyOnWriteArrayListå†™æ—¶å¤åˆ¶æŠ€æœ¯è§£å†³// List&lt;String&gt; list = new CopyOnWriteArrayList&lt;&gt;();// for (int i = 0; i &lt;30; i++) {// new Thread(()-&gt;{// //å‘é›†åˆæ·»åŠ å†…å®¹// list.add(UUID.randomUUID().toString().substring(0,8));// //ä»é›†åˆè·å–å†…å®¹// System.out.println(list);// },String.valueOf(i)).start();// } //æ¼”ç¤ºHashset// Set&lt;String&gt; set = new HashSet&lt;&gt;();// Set&lt;String&gt; set = new CopyOnWriteArraySet&lt;&gt;();// for (int i = 0; i &lt;30; i++) {// new Thread(()-&gt;{// //å‘é›†åˆæ·»åŠ å†…å®¹// set.add(UUID.randomUUID().toString().substring(0,8));// //ä»é›†åˆè·å–å†…å®¹// System.out.println(set);// },String.valueOf(i)).start();// } //æ¼”ç¤ºHashMap// Map&lt;String,String&gt; map = new HashMap&lt;&gt;(); Map&lt;String,String&gt; map = new ConcurrentHashMap&lt;&gt;(); for (int i = 0; i &lt;30; i++) { String key = String.valueOf(i); new Thread(()-&gt;{ //å‘é›†åˆæ·»åŠ å†…å®¹ map.put(key,UUID.randomUUID().toString().substring(0,8)); //ä»é›†åˆè·å–å†…å®¹ System.out.println(map); },String.valueOf(i)).start(); } } JUCä¸‰å¤§è¾…åŠ©ç±» JUCä¸­æä¾›äº†ä¸‰ç§å¸¸ç”¨çš„è¾…åŠ©ç±»ï¼Œé€šè¿‡è¿™äº›è¾…åŠ©ç±»å¯ä»¥å¾ˆå¥½çš„è§£å†³çº¿ç¨‹æ•°é‡è¿‡å¤šæ—¶Locké”çš„é¢‘ç¹æ“ä½œã€‚è¿™ä¸‰ç§è¾…åŠ©ç±»ä¸ºï¼š â€¢ CountDownLatch: å‡å°‘è®¡æ•° â€¢ CyclicBarrier: å¾ªç¯æ …æ  â€¢ Semaphore: ä¿¡å·ç¯ CountDownLatch:å‡å°‘è®¡æ•° CountDownLatchç±»å¯ä»¥è®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç„¶åé€šè¿‡countDownæ–¹æ³•æ¥è¿›è¡Œå‡1çš„æ“ä½œï¼Œä½¿ç”¨awaitæ–¹æ³•ç­‰å¾…è®¡æ•°å™¨ä¸å¤§äº0ï¼Œç„¶åç»§ç»­æ‰§è¡Œawaitæ–¹æ³•ä¹‹åçš„è¯­å¥ã€‚ â€¢ CountDownLatchä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œå½“ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹è°ƒç”¨awaitæ–¹æ³•æ—¶ï¼Œè¿™äº›çº¿ç¨‹ä¼šé˜»å¡ â€¢ å…¶å®ƒçº¿ç¨‹è°ƒç”¨countDownæ–¹æ³•ä¼šå°†è®¡æ•°å™¨å‡1(è°ƒç”¨countDownæ–¹æ³•çš„çº¿ç¨‹ä¸ä¼šé˜»å¡) â€¢ å½“è®¡æ•°å™¨çš„å€¼å˜ä¸º0æ—¶ï¼Œå› awaitæ–¹æ³•é˜»å¡çš„çº¿ç¨‹ä¼šè¢«å”¤é†’ï¼Œç»§ç»­æ‰§è¡Œ 12345678910111213141516171819202122232425262728package com.atguigu.juc;import java.util.concurrent.CountDownLatch;//æ¼”ç¤º CountDownLatchpublic class CountDownLatchDemo { //6ä¸ªåŒå­¦é™†ç»­ç¦»å¼€æ•™å®¤ä¹‹åï¼Œç­é•¿é”é—¨ public static void main(String[] args) throws InterruptedException { //åˆ›å»ºCountDownLatchå¯¹è±¡ï¼Œè®¾ç½®åˆå§‹å€¼ CountDownLatch countDownLatch = new CountDownLatch(6); //6ä¸ªåŒå­¦é™†ç»­ç¦»å¼€æ•™å®¤ä¹‹å for (int i = 1; i &lt;=6; i++) { new Thread(()-&gt;{ System.out.println(Thread.currentThread().getName()+&quot; å·åŒå­¦ç¦»å¼€äº†æ•™å®¤&quot;); //è®¡æ•° -1 countDownLatch.countDown(); },String.valueOf(i)).start(); } //ç­‰å¾… countDownLatch.await(); System.out.println(Thread.currentThread().getName()+&quot; ç­é•¿é”é—¨èµ°äººäº†&quot;);}} CyclicBarrier: å¾ªç¯æ …æ  â€‹ CyclicBarrierçœ‹è‹±æ–‡å•è¯å¯ä»¥çœ‹å‡ºå¤§æ¦‚å°±æ˜¯å¾ªç¯é˜»å¡çš„æ„æ€ï¼Œåœ¨ä½¿ç”¨ä¸­CyclicBarrierçš„æ„é€ æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡éšœç¢æ•°ï¼Œæ¯æ¬¡æ‰§è¡ŒCyclicBarrierä¸€æ¬¡éšœç¢æ•°ä¼šåŠ ä¸€ï¼Œå¦‚æœè¾¾åˆ°äº†ç›®æ ‡éšœç¢æ•°ï¼Œæ‰ä¼šæ‰§è¡ŒcyclicBarrier.await()ä¹‹åçš„è¯­å¥ã€‚å¯ä»¥å°†CyclicBarrierç†è§£ä¸ºåŠ 1æ“ä½œ 12345678910111213141516171819202122232425262728293031package com.atguigu.juc;import java.util.concurrent.BrokenBarrierException;import java.util.concurrent.CyclicBarrier;//é›†é½7é¢—é¾™ç å°±å¯ä»¥å¬å”¤ç¥é¾™public class CyclicBarrierDemo {//åˆ›å»ºå›ºå®šå€¼private static final int NUMBER = 7;public static void main(String[] args) { //åˆ›å»ºCyclicBarrier CyclicBarrier cyclicBarrier = new CyclicBarrier(NUMBER,()-&gt;{ System.out.println(&quot;*****é›†é½7é¢—é¾™ç å°±å¯ä»¥å¬å”¤ç¥é¾™&quot;); }); //é›†é½ä¸ƒé¢—é¾™ç è¿‡ç¨‹ for (int i = 1; i &lt;=7; i++) { new Thread(()-&gt;{ try { System.out.println(Thread.currentThread().getName()+&quot; æ˜Ÿé¾™è¢«æ”¶é›†åˆ°äº†&quot;); //ç­‰å¾… cyclicBarrier.await(); } catch (Exception e) { e.printStackTrace(); } },String.valueOf(i)).start(); }}} Semaphore: ä¿¡å·ç¯ â€‹ Semaphoreçš„æ„é€ æ–¹æ³•ä¸­ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœ€å¤§ä¿¡å·é‡ï¼ˆå¯ä»¥çœ‹æˆæœ€å¤§çº¿ç¨‹æ± ï¼‰ï¼Œæ¯ä¸ªä¿¡å·é‡åˆå§‹åŒ–ä¸ºä¸€ä¸ªæœ€å¤šåªèƒ½åˆ†å‘ä¸€ä¸ªè®¸å¯è¯ã€‚ä½¿ç”¨acquireæ–¹æ³•è·å¾—è®¸å¯è¯ï¼Œreleaseæ–¹æ³•é‡Šæ”¾è®¸å¯ã€‚åœºæ™¯: æŠ¢è½¦ä½, 6éƒ¨æ±½è½¦3ä¸ªåœè½¦ä½ 123456789101112131415161718192021222324252627282930313233343536package com.atguigu.juc;import java.util.Random;import java.util.concurrent.Semaphore;import java.util.concurrent.TimeUnit;//6è¾†æ±½è½¦ï¼Œåœ3ä¸ªè½¦ä½public class SemaphoreDemo { public static void main(String[] args) { //åˆ›å»ºSemaphoreï¼Œè®¾ç½®è®¸å¯æ•°é‡ Semaphore semaphore = new Semaphore(3); //æ¨¡æ‹Ÿ6è¾†æ±½è½¦ for (int i = 1; i &lt;=6; i++) { new Thread(()-&gt;{ try { //æŠ¢å  semaphore.acquire(); System.out.println(Thread.currentThread().getName()+&quot; æŠ¢åˆ°äº†è½¦ä½&quot;); //è®¾ç½®éšæœºåœè½¦æ—¶é—´ TimeUnit.SECONDS.sleep(new Random().nextInt(5)); System.out.println(Thread.currentThread().getName()+&quot; ------ç¦»å¼€äº†è½¦ä½&quot;); } catch (InterruptedException e) { e.printStackTrace(); } finally { //é‡Šæ”¾ semaphore.release(); } },String.valueOf(i)).start(); } }} é˜»å¡é˜Ÿåˆ— BlockingQueue ConcurrentåŒ…ä¸­ï¼ŒBlockingQueueå¾ˆå¥½çš„è§£å†³äº†å¤šçº¿ç¨‹ä¸­ï¼Œå¦‚ä½•é«˜æ•ˆå®‰å…¨â€œä¼ è¾“â€æ•°æ®çš„é—®é¢˜ã€‚é€šè¿‡è¿™äº›é«˜æ•ˆå¹¶ä¸”çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—ç±»ï¼Œä¸ºæˆ‘ä»¬å¿«é€Ÿæ­å»ºé«˜è´¨é‡çš„å¤šçº¿ç¨‹ç¨‹åºå¸¦æ¥æå¤§çš„ä¾¿åˆ©ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†BlockingQueueå®¶åº­ä¸­çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬ä»–ä»¬å„è‡ªçš„åŠŸèƒ½ä»¥åŠå¸¸è§ä½¿ç”¨åœºæ™¯ã€‚ é˜»å¡é˜Ÿåˆ—ï¼Œé¡¾åæ€ä¹‰ï¼Œé¦–å…ˆå®ƒæ˜¯ä¸€ä¸ªé˜Ÿåˆ—, é€šè¿‡ä¸€ä¸ªå…±äº«çš„é˜Ÿåˆ—ï¼Œå¯ä»¥ä½¿å¾—æ•°æ®ç”±é˜Ÿåˆ—çš„ä¸€ç«¯è¾“å…¥ï¼Œä»å¦å¤–ä¸€ç«¯è¾“å‡ºï¼› å½“é˜Ÿåˆ—æ˜¯ç©ºçš„ï¼Œä»é˜Ÿåˆ—ä¸­è·å–å…ƒç´ çš„æ“ä½œå°†ä¼šè¢«é˜»å¡ å½“é˜Ÿåˆ—æ˜¯æ»¡çš„ï¼Œä»é˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´ çš„æ“ä½œå°†ä¼šè¢«é˜»å¡ è¯•å›¾ä»ç©ºçš„é˜Ÿåˆ—ä¸­è·å–å…ƒç´ çš„çº¿ç¨‹å°†ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹å¾€ç©ºçš„é˜Ÿåˆ—æ’å…¥æ–°çš„å…ƒç´  è¯•å›¾å‘å·²æ»¡çš„é˜Ÿåˆ—ä¸­æ·»åŠ æ–°å…ƒç´ çš„çº¿ç¨‹å°†ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æˆ–è€…å®Œå…¨æ¸…ç©ºï¼Œä½¿é˜Ÿåˆ—å˜å¾—ç©ºé—²èµ·æ¥å¹¶åç»­æ–°å¢ å¸¸ç”¨çš„é˜Ÿåˆ—ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š â€¢ å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ï¼šå…ˆæ’å…¥çš„é˜Ÿåˆ—çš„å…ƒç´ ä¹Ÿæœ€å…ˆå‡ºé˜Ÿåˆ—ï¼Œç±»ä¼¼äºæ’é˜Ÿçš„åŠŸèƒ½ã€‚ä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´è¿™ç§é˜Ÿåˆ—ä¹Ÿä½“ç°äº†ä¸€ç§å…¬å¹³æ€§ â€¢ åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰ï¼šåæ’å…¥é˜Ÿåˆ—çš„å…ƒç´ æœ€å…ˆå‡ºé˜Ÿåˆ—ï¼Œè¿™ç§é˜Ÿåˆ—ä¼˜å…ˆå¤„ç†æœ€è¿‘å‘ç”Ÿçš„äº‹ä»¶(æ ˆ) åœ¨å¤šçº¿ç¨‹é¢†åŸŸï¼šæ‰€è°“é˜»å¡ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä¼šæŒ‚èµ·çº¿ç¨‹ï¼ˆå³é˜»å¡ï¼‰ï¼Œä¸€æ—¦æ¡ä»¶æ»¡è¶³ï¼Œè¢«æŒ‚èµ·çš„çº¿ç¨‹åˆä¼šè‡ªåŠ¨è¢«å”¤èµ· ä¸ºä»€ä¹ˆéœ€è¦BlockingQueue å¥½å¤„æ˜¯æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒä»€ä¹ˆæ—¶å€™éœ€è¦é˜»å¡çº¿ç¨‹ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦å”¤é†’çº¿ç¨‹ï¼Œå› ä¸ºè¿™ä¸€åˆ‡BlockingQueueéƒ½ç»™ä½ ä¸€æ‰‹åŒ…åŠäº† åœ¨concurrentåŒ…å‘å¸ƒä»¥å‰ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»å»è‡ªå·±æ§åˆ¶è¿™äº›ç»†èŠ‚ï¼Œå°¤å…¶è¿˜è¦å…¼é¡¾æ•ˆç‡å’Œçº¿ç¨‹å®‰å…¨ï¼Œè€Œè¿™ä¼šç»™æˆ‘ä»¬çš„ç¨‹åºå¸¦æ¥ä¸å°çš„å¤æ‚åº¦ã€‚ å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œé€šè¿‡é˜Ÿåˆ—å¯ä»¥å¾ˆå®¹æ˜“å®ç°æ•°æ®å…±äº«ï¼Œæ¯”å¦‚ç»å…¸çš„â€œç”Ÿäº§è€…â€å’Œâ€œæ¶ˆè´¹è€…â€æ¨¡å‹ä¸­ï¼Œé€šè¿‡é˜Ÿåˆ—å¯ä»¥å¾ˆä¾¿åˆ©åœ°å®ç°ä¸¤è€…ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚å‡è®¾æˆ‘ä»¬æœ‰è‹¥å¹²ç”Ÿäº§è€…çº¿ç¨‹ï¼Œå¦å¤–åˆæœ‰è‹¥å¹²ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ã€‚å¦‚æœç”Ÿäº§è€…çº¿ç¨‹éœ€è¦æŠŠå‡†å¤‡å¥½çš„æ•°æ®å…±äº«ç»™æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œåˆ©ç”¨é˜Ÿåˆ—çš„æ–¹å¼æ¥ä¼ é€’æ•°æ®ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è§£å†³ä»–ä»¬ä¹‹é—´çš„æ•°æ®å…±äº«é—®é¢˜ã€‚ä½†å¦‚æœç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åœ¨æŸä¸ªæ—¶é—´æ®µå†…ï¼Œä¸‡ä¸€å‘ç”Ÿæ•°æ®å¤„ç†é€Ÿåº¦ä¸åŒ¹é…çš„æƒ…å†µå‘¢ï¼Ÿç†æƒ³æƒ…å†µä¸‹ï¼Œå¦‚æœç”Ÿäº§è€…äº§å‡ºæ•°æ®çš„é€Ÿåº¦å¤§äºæ¶ˆè´¹è€…æ¶ˆè´¹çš„é€Ÿåº¦ï¼Œå¹¶ä¸”å½“ç”Ÿäº§å‡ºæ¥çš„æ•°æ®ç´¯ç§¯åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œé‚£ä¹ˆç”Ÿäº§è€…å¿…é¡»æš‚åœç­‰å¾…ä¸€ä¸‹ï¼ˆé˜»å¡ç”Ÿäº§è€…çº¿ç¨‹ï¼‰ï¼Œä»¥ä¾¿ç­‰å¾…æ¶ˆè´¹è€…çº¿ç¨‹æŠŠç´¯ç§¯çš„æ•°æ®å¤„ç†å®Œæ¯•ï¼Œåä¹‹äº¦ç„¶ã€‚ â€¢ å½“é˜Ÿåˆ—ä¸­æ²¡æœ‰æ•°æ®çš„æƒ…å†µä¸‹ï¼Œæ¶ˆè´¹è€…ç«¯çš„æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šè¢«è‡ªåŠ¨é˜»å¡ï¼ˆæŒ‚èµ·ï¼‰ï¼Œç›´åˆ°æœ‰æ•°æ®æ”¾å…¥é˜Ÿåˆ— â€¢ å½“é˜Ÿåˆ—ä¸­å¡«æ»¡æ•°æ®çš„æƒ…å†µä¸‹ï¼Œç”Ÿäº§è€…ç«¯çš„æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šè¢«è‡ªåŠ¨é˜»å¡ï¼ˆæŒ‚èµ·ï¼‰ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰ç©ºçš„ä½ç½®ï¼Œçº¿ç¨‹è¢«è‡ªåŠ¨å”¤é†’ BlockingQueueæ ¸å¿ƒæ–¹æ³• 1.æ”¾å…¥æ•°æ® â€¢ offer(anObject):è¡¨ç¤ºå¦‚æœå¯èƒ½çš„è¯,å°†anObjectåŠ åˆ°BlockingQueueé‡Œ,å³å¦‚æœBlockingQueueå¯ä»¥å®¹çº³,åˆ™è¿”å›true,å¦åˆ™è¿”å›false.ï¼ˆæœ¬æ–¹æ³•ä¸é˜»å¡å½“å‰æ‰§è¡Œæ–¹æ³•çš„çº¿ç¨‹ï¼‰ â€¢ offer(E o, long timeout, TimeUnit unit)ï¼šå¯ä»¥è®¾å®šç­‰å¾…çš„æ—¶é—´ï¼Œå¦‚æœåœ¨æŒ‡å®šçš„æ—¶é—´å†…ï¼Œè¿˜ä¸èƒ½å¾€é˜Ÿåˆ—ä¸­åŠ å…¥BlockingQueueï¼Œåˆ™è¿”å›å¤±è´¥ â€¢ put(anObject):æŠŠanObjectåŠ åˆ°BlockingQueueé‡Œ,å¦‚æœBlockQueueæ²¡æœ‰ç©ºé—´,åˆ™è°ƒç”¨æ­¤æ–¹æ³•çš„çº¿ç¨‹è¢«é˜»æ–­ç›´åˆ°BlockingQueueé‡Œé¢æœ‰ç©ºé—´å†ç»§ç»­. 2.è·å–æ•°æ® â€¢ poll(time): å–èµ°BlockingQueueé‡Œæ’åœ¨é¦–ä½çš„å¯¹è±¡,è‹¥ä¸èƒ½ç«‹å³å–å‡º,åˆ™å¯ä»¥ç­‰timeå‚æ•°è§„å®šçš„æ—¶é—´,å–ä¸åˆ°æ—¶è¿”å›null â€¢ poll(long timeout, TimeUnit unit)ï¼šä»BlockingQueueå–å‡ºä¸€ä¸ªé˜Ÿé¦–çš„å¯¹è±¡ï¼Œå¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…ï¼Œé˜Ÿåˆ—ä¸€æ—¦æœ‰æ•°æ®å¯å–ï¼Œåˆ™ç«‹å³è¿”å›é˜Ÿåˆ—ä¸­çš„æ•°æ®ã€‚å¦åˆ™çŸ¥é“æ—¶é—´è¶…æ—¶è¿˜æ²¡æœ‰æ•°æ®å¯å–ï¼Œè¿”å›å¤±è´¥ã€‚ â€¢ take(): å–èµ°BlockingQueueé‡Œæ’åœ¨é¦–ä½çš„å¯¹è±¡,è‹¥BlockingQueueä¸ºç©º,é˜»æ–­è¿›å…¥ç­‰å¾…çŠ¶æ€ç›´åˆ°BlockingQueueæœ‰æ–°çš„æ•°æ®è¢«åŠ å…¥; â€¢ drainTo(): ä¸€æ¬¡æ€§ä»BlockingQueueè·å–æ‰€æœ‰å¯ç”¨çš„æ•°æ®å¯¹è±¡ï¼ˆè¿˜å¯ä»¥æŒ‡å®šè·å–æ•°æ®çš„ä¸ªæ•°ï¼‰ï¼Œé€šè¿‡è¯¥æ–¹æ³•ï¼Œå¯ä»¥æå‡è·å–æ•°æ®æ•ˆç‡ï¼›ä¸éœ€è¦å¤šæ¬¡åˆ†æ‰¹åŠ é”æˆ–é‡Šæ”¾é”ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package com.atguigu.queue;import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.BlockingQueue;import java.util.concurrent.Executors;import java.util.concurrent.TimeUnit;//é˜»å¡é˜Ÿåˆ—public class BlockingQueueDemo { public static void main(String[] args) throws InterruptedException { //åˆ›å»ºé˜»å¡é˜Ÿåˆ— BlockingQueue&lt;String&gt; blockingQueue = new ArrayBlockingQueue&lt;&gt;(3); //ç¬¬ä¸€ç»„// System.out.println(blockingQueue.add(&quot;a&quot;));//// System.out.println(blockingQueue.add(&quot;b&quot;));//// System.out.println(blockingQueue.add(&quot;c&quot;));//// //System.out.println(blockingQueue.element());//////// //System.out.println(blockingQueue.add(&quot;w&quot;));//// System.out.println(blockingQueue.remove());//// System.out.println(blockingQueue.remove());//// System.out.println(blockingQueue.remove());//// System.out.println(blockingQueue.remove()); //ç¬¬äºŒç»„// System.out.println(blockingQueue.offer(&quot;a&quot;));// System.out.println(blockingQueue.offer(&quot;b&quot;));// System.out.println(blockingQueue.offer(&quot;c&quot;));// System.out.println(blockingQueue.offer(&quot;www&quot;));//// System.out.println(blockingQueue.poll());// System.out.println(blockingQueue.poll());// System.out.println(blockingQueue.poll());// System.out.println(blockingQueue.poll()); //ç¬¬ä¸‰ç»„ put æ²¡ç©ºé—´é˜»å¡ take æ²¡æ•°æ®é˜»å¡// blockingQueue.put(&quot;a&quot;);// blockingQueue.put(&quot;b&quot;);// blockingQueue.put(&quot;c&quot;);// //blockingQueue.put(&quot;w&quot;);//// System.out.println(blockingQueue.take());// System.out.println(blockingQueue.take());// System.out.println(blockingQueue.take());// System.out.println(blockingQueue.take()); //ç¬¬å››ç»„ System.out.println(blockingQueue.offer(&quot;a&quot;)); System.out.println(blockingQueue.offer(&quot;b&quot;)); System.out.println(blockingQueue.offer(&quot;c&quot;)); System.out.println(blockingQueue.offer(&quot;w&quot;,3L, TimeUnit.SECONDS)); }} ArrayBlockingQueue(å¸¸ç”¨) åŸºäºæ•°ç»„çš„é˜»å¡é˜Ÿåˆ—å®ç°ï¼Œåœ¨ArrayBlockingQueueå†…éƒ¨ï¼Œç»´æŠ¤äº†ä¸€ä¸ªå®šé•¿æ•°ç»„ï¼Œä»¥ä¾¿ç¼“å­˜é˜Ÿåˆ—ä¸­çš„æ•°æ®å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„é˜»å¡é˜Ÿåˆ—ï¼Œé™¤äº†ä¸€ä¸ªå®šé•¿æ•°ç»„å¤–ï¼ŒArrayBlockingQueueå†…éƒ¨è¿˜ä¿å­˜ç€ä¸¤ä¸ªæ•´å½¢å˜é‡ï¼Œåˆ†åˆ«æ ‡è¯†ç€é˜Ÿåˆ—çš„å¤´éƒ¨å’Œå°¾éƒ¨åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚ ArrayBlockingQueueåœ¨ç”Ÿäº§è€…æ”¾å…¥æ•°æ®å’Œæ¶ˆè´¹è€…è·å–æ•°æ®ï¼Œéƒ½æ˜¯å…±ç”¨åŒä¸€ä¸ªé”å¯¹è±¡ï¼Œç”±æ­¤ä¹Ÿæ„å‘³ç€ä¸¤è€…æ— æ³•çœŸæ­£å¹¶è¡Œè¿è¡Œï¼Œè¿™ç‚¹å°¤å…¶ä¸åŒäºLinkedBlockingQueueï¼›æŒ‰ç…§å®ç°åŸç†æ¥åˆ†æï¼ŒArrayBlockingQueueå®Œå…¨å¯ä»¥é‡‡ç”¨åˆ†ç¦»é”ï¼Œä»è€Œå®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ“ä½œçš„å®Œå…¨å¹¶è¡Œè¿è¡Œã€‚Doug Leaä¹‹æ‰€ä»¥æ²¡è¿™æ ·å»åšï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºArrayBlockingQueueçš„æ•°æ®å†™å…¥å’Œè·å–æ“ä½œå·²ç»è¶³å¤Ÿè½»å·§ï¼Œä»¥è‡³äºå¼•å…¥ç‹¬ç«‹çš„é”æœºåˆ¶ï¼Œé™¤äº†ç»™ä»£ç å¸¦æ¥é¢å¤–çš„å¤æ‚æ€§å¤–ï¼Œå…¶åœ¨æ€§èƒ½ä¸Šå®Œå…¨å ä¸åˆ°ä»»ä½•ä¾¿å®œã€‚ ArrayBlockingQueueå’ŒLinkedBlockingQueueé—´è¿˜æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå‰è€…åœ¨æ’å…¥æˆ–åˆ é™¤å…ƒç´ æ—¶ä¸ä¼šäº§ç”Ÿæˆ–é”€æ¯ä»»ä½•é¢å¤–çš„å¯¹è±¡å®ä¾‹ï¼Œè€Œåè€…åˆ™ä¼šç”Ÿæˆä¸€ä¸ªé¢å¤–çš„Nodeå¯¹è±¡ã€‚è¿™åœ¨é•¿æ—¶é—´å†…éœ€è¦é«˜æ•ˆå¹¶å‘åœ°å¤„ç†å¤§æ‰¹é‡æ•°æ®çš„ç³»ç»Ÿä¸­ï¼Œå…¶å¯¹äºGCçš„å½±å“è¿˜æ˜¯å­˜åœ¨ä¸€å®šçš„åŒºåˆ«ã€‚è€Œåœ¨åˆ›å»ºArrayBlockingQueueæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ§åˆ¶å¯¹è±¡çš„å†…éƒ¨é”æ˜¯å¦é‡‡ç”¨å…¬å¹³é”ï¼Œé»˜è®¤é‡‡ç”¨éå…¬å¹³é”ã€‚ ä¸€å¥è¯æ€»ç»“: ç”±æ•°ç»„ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚ LinkedBlockingQueue(å¸¸ç”¨) åŸºäºé“¾è¡¨çš„é˜»å¡é˜Ÿåˆ—ï¼ŒåŒArrayListBlockingQueueç±»ä¼¼ï¼Œå…¶å†…éƒ¨ä¹Ÿç»´æŒç€ä¸€ä¸ªæ•°æ®ç¼“å†²é˜Ÿåˆ—ï¼ˆè¯¥é˜Ÿåˆ—ç”±ä¸€ä¸ªé“¾è¡¨æ„æˆï¼‰ï¼Œå½“ç”Ÿäº§è€…å¾€é˜Ÿåˆ—ä¸­æ”¾å…¥ä¸€ä¸ªæ•°æ®æ—¶ï¼Œé˜Ÿåˆ—ä¼šä»ç”Ÿäº§è€…æ‰‹ä¸­è·å–æ•°æ®ï¼Œå¹¶ç¼“å­˜åœ¨é˜Ÿåˆ—å†…éƒ¨ï¼Œè€Œç”Ÿäº§è€…ç«‹å³è¿”å›ï¼›åªæœ‰å½“é˜Ÿåˆ—ç¼“å†²åŒºè¾¾åˆ°æœ€å¤§å€¼ç¼“å­˜å®¹é‡æ—¶ï¼ˆLinkedBlockingQueueå¯ä»¥é€šè¿‡æ„é€ å‡½æ•°æŒ‡å®šè¯¥å€¼ï¼‰ï¼Œæ‰ä¼šé˜»å¡ç”Ÿäº§è€…é˜Ÿåˆ—ï¼Œç›´åˆ°æ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­æ¶ˆè´¹æ‰ä¸€ä»½ æ•°æ®ï¼Œç”Ÿäº§è€…çº¿ç¨‹ä¼šè¢«å”¤é†’ï¼Œåä¹‹å¯¹äºæ¶ˆè´¹è€…è¿™ç«¯çš„å¤„ç†ä¹ŸåŸºäºåŒæ ·çš„åŸç†ã€‚è€ŒLinkedBlockingQueueä¹‹æ‰€ä»¥èƒ½å¤Ÿé«˜æ•ˆçš„å¤„ç†å¹¶å‘æ•°æ®ï¼Œè¿˜å› ä¸ºå…¶å¯¹äºç”Ÿäº§è€…ç«¯å’Œæ¶ˆè´¹è€…ç«¯åˆ†åˆ«é‡‡ç”¨äº†ç‹¬ç«‹çš„é”æ¥æ§åˆ¶æ•°æ®åŒæ­¥ï¼Œè¿™ä¹Ÿæ„å‘³ç€åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å¯ä»¥å¹¶è¡Œåœ°æ“ä½œé˜Ÿåˆ—ä¸­çš„æ•°æ®ï¼Œä»¥æ­¤æ¥æé«˜æ•´ä¸ªé˜Ÿåˆ—çš„å¹¶å‘æ€§èƒ½ã€‚ ArrayBlockingQueueå’ŒLinkedBlockingQueueæ˜¯ä¸¤ä¸ªæœ€æ™®é€šä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„é˜»å¡é˜Ÿåˆ—ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨å¤„ç†å¤šçº¿ç¨‹é—´çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œä½¿ç”¨è¿™ä¸¤ä¸ªç±»è¶³ä»¥ã€‚ ä¸€å¥è¯æ€»ç»“: ç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æœ‰ç•Œï¼ˆä½†å¤§å°é»˜è®¤å€¼ä¸ºinteger.MAX_VALUEï¼‰é˜»å¡é˜Ÿåˆ—ã€‚ DelayQueue DelayQueueä¸­çš„å…ƒç´ åªæœ‰å½“å…¶æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´åˆ°äº†ï¼Œæ‰èƒ½å¤Ÿä»é˜Ÿåˆ—ä¸­è·å–åˆ°è¯¥å…ƒç´ ã€‚DelayQueueæ˜¯ä¸€ä¸ªæ²¡æœ‰å¤§å°é™åˆ¶çš„é˜Ÿåˆ—ï¼Œå› æ­¤å¾€é˜Ÿåˆ—ä¸­æ’å…¥æ•°æ®çš„æ“ä½œï¼ˆç”Ÿäº§è€…ï¼‰æ°¸è¿œä¸ä¼šè¢«é˜»å¡ï¼Œè€Œåªæœ‰è·å–æ•°æ®çš„æ“ä½œï¼ˆæ¶ˆè´¹è€…ï¼‰æ‰ä¼šè¢«é˜»å¡ã€‚ ä¸€å¥è¯æ€»ç»“: ä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°çš„å»¶è¿Ÿæ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚ PriorityBlockingQueue åŸºäºä¼˜å…ˆçº§çš„é˜»å¡é˜Ÿåˆ—ï¼ˆä¼˜å…ˆçº§çš„åˆ¤æ–­é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥çš„Compatorå¯¹è±¡æ¥å†³å®šï¼‰ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯PriorityBlockingQueueå¹¶ä¸ä¼šé˜»å¡æ•°æ®ç”Ÿäº§è€…ï¼Œè€Œåªä¼šåœ¨æ²¡æœ‰å¯æ¶ˆè´¹çš„æ•°æ®æ—¶ï¼Œé˜»å¡æ•°æ®çš„æ¶ˆè´¹è€…ã€‚ å› æ­¤ä½¿ç”¨çš„æ—¶å€™è¦ç‰¹åˆ«æ³¨æ„ï¼Œç”Ÿäº§è€…ç”Ÿäº§æ•°æ®çš„é€Ÿåº¦ç»å¯¹ä¸èƒ½å¿«äºæ¶ˆè´¹è€…æ¶ˆè´¹æ•°æ®çš„é€Ÿåº¦ï¼Œå¦åˆ™æ—¶é—´ä¸€é•¿ï¼Œä¼šæœ€ç»ˆè€—å°½æ‰€æœ‰çš„å¯ç”¨å †å†…å­˜ç©ºé—´ã€‚ åœ¨å®ç°PriorityBlockingQueueæ—¶ï¼Œå†…éƒ¨æ§åˆ¶çº¿ç¨‹åŒæ­¥çš„é”é‡‡ç”¨çš„æ˜¯å…¬å¹³é”ã€‚ ä¸€å¥è¯æ€»ç»“: æ”¯æŒä¼˜å…ˆçº§æ’åºçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚ SynchronousQueue ä¸€ç§æ— ç¼“å†²çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œç±»ä¼¼äºæ— ä¸­ä»‹çš„ç›´æ¥äº¤æ˜“ï¼Œæœ‰ç‚¹åƒåŸå§‹ç¤¾ä¼šä¸­çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œç”Ÿäº§è€…æ‹¿ç€äº§å“å»é›†å¸‚é”€å”®ç»™äº§å“çš„æœ€ç»ˆæ¶ˆè´¹è€…ï¼Œè€Œæ¶ˆè´¹è€…å¿…é¡»äº²è‡ªå»é›†å¸‚æ‰¾åˆ°æ‰€è¦å•†å“çš„ç›´æ¥ç”Ÿäº§è€…ï¼Œå¦‚æœä¸€æ–¹æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„ç›®æ ‡ï¼Œé‚£ä¹ˆå¯¹ä¸èµ·ï¼Œå¤§å®¶éƒ½åœ¨é›†å¸‚ç­‰å¾…ã€‚ç›¸å¯¹äºæœ‰ç¼“å†²çš„BlockingQueueæ¥è¯´ï¼Œå°‘äº†ä¸€ä¸ªä¸­é—´ç»é”€å•†çš„ç¯èŠ‚ï¼ˆç¼“å†²åŒºï¼‰ï¼Œå¦‚æœæœ‰ç»é”€å•†ï¼Œç”Ÿäº§è€…ç›´æ¥æŠŠäº§å“æ‰¹å‘ç»™ç»é”€å•†ï¼Œè€Œæ— éœ€åœ¨æ„ç»é”€å•†æœ€ç»ˆä¼šå°†è¿™äº›äº§å“å–ç»™é‚£äº›æ¶ˆè´¹è€…ï¼Œç”±äºç»é”€å•†å¯ä»¥åº“å­˜ä¸€éƒ¨åˆ†å•†å“ï¼Œå› æ­¤ç›¸å¯¹äºç›´æ¥äº¤æ˜“æ¨¡å¼ï¼Œæ€»ä½“æ¥è¯´é‡‡ç”¨ä¸­é—´ç»é”€å•†çš„æ¨¡å¼ä¼šååé‡é«˜ä¸€äº›ï¼ˆå¯ä»¥æ‰¹é‡ä¹°å–ï¼‰ï¼›ä½†å¦ä¸€æ–¹é¢ï¼Œåˆå› ä¸ºç»é”€å•†çš„å¼•å…¥ï¼Œä½¿å¾—äº§å“ä»ç”Ÿäº§è€…åˆ°æ¶ˆè´¹è€…ä¸­é—´å¢åŠ äº†é¢å¤–çš„äº¤æ˜“ç¯èŠ‚ï¼Œå•ä¸ªäº§å“çš„åŠæ—¶å“åº”æ€§èƒ½å¯èƒ½ä¼šé™ä½ã€‚ å£°æ˜ä¸€ä¸ªSynchronousQueueæœ‰ä¸¤ç§ä¸åŒçš„æ–¹å¼ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ç€ä¸å¤ªä¸€æ ·çš„è¡Œä¸ºã€‚ å…¬å¹³æ¨¡å¼å’Œéå…¬å¹³æ¨¡å¼çš„åŒºåˆ«: â€¢ å…¬å¹³æ¨¡å¼ï¼šSynchronousQueueä¼šé‡‡ç”¨å…¬å¹³é”ï¼Œå¹¶é…åˆä¸€ä¸ªFIFOé˜Ÿåˆ—æ¥é˜»å¡å¤šä½™çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œä»è€Œä½“ç³»æ•´ä½“çš„å…¬å¹³ç­–ç•¥ï¼› â€¢ éå…¬å¹³æ¨¡å¼ï¼ˆSynchronousQueueé»˜è®¤ï¼‰ï¼šSynchronousQueueé‡‡ç”¨éå…¬å¹³é”ï¼ŒåŒæ—¶é…åˆä¸€ä¸ªLIFOé˜Ÿåˆ—æ¥ç®¡ç†å¤šä½™çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œè€Œåä¸€ç§æ¨¡å¼ï¼Œå¦‚æœç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å¤„ç†é€Ÿåº¦æœ‰å·®è·ï¼Œåˆ™å¾ˆå®¹æ˜“å‡ºç°é¥¥æ¸´çš„æƒ…å†µï¼Œå³å¯èƒ½æœ‰æŸäº›ç”Ÿäº§è€…æˆ–è€…æ˜¯æ¶ˆè´¹è€…çš„æ•°æ®æ°¸è¿œéƒ½å¾—ä¸åˆ°å¤„ç†ã€‚ ä¸€å¥è¯æ€»ç»“: ä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ï¼Œä¹Ÿå³å•ä¸ªå…ƒç´ çš„é˜Ÿåˆ—ã€‚ LinkedTransferQueue LinkedTransferQueueæ˜¯ä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æ— ç•Œé˜»å¡TransferQueueé˜Ÿåˆ—ã€‚ç›¸å¯¹äºå…¶ä»–é˜»å¡é˜Ÿåˆ—ï¼ŒLinkedTransferQueueå¤šäº†tryTransferå’Œtransferæ–¹æ³•ã€‚ LinkedTransferQueueé‡‡ç”¨ä¸€ç§é¢„å æ¨¡å¼ã€‚æ„æ€å°±æ˜¯æ¶ˆè´¹è€…çº¿ç¨‹å–å…ƒç´ æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œåˆ™ç›´æ¥å–èµ°æ•°æ®ï¼Œè‹¥é˜Ÿåˆ—ä¸ºç©ºï¼Œé‚£å°±ç”Ÿæˆä¸€ä¸ªèŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹å…ƒç´ ä¸ºnullï¼‰å…¥é˜Ÿï¼Œç„¶åæ¶ˆè´¹è€…çº¿ç¨‹è¢«ç­‰å¾…åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šï¼Œåé¢ç”Ÿäº§è€…çº¿ç¨‹å…¥é˜Ÿæ—¶å‘ç°æœ‰ä¸€ä¸ªå…ƒç´ ä¸ºnullçš„èŠ‚ç‚¹ï¼Œç”Ÿäº§è€…çº¿ç¨‹å°±ä¸å…¥é˜Ÿäº†ï¼Œç›´æ¥å°±å°†å…ƒç´ å¡«å……åˆ°è¯¥èŠ‚ç‚¹ï¼Œå¹¶å”¤é†’è¯¥èŠ‚ç‚¹ç­‰å¾…çš„çº¿ç¨‹ï¼Œè¢«å”¤é†’çš„æ¶ˆè´¹è€…çº¿ç¨‹å–èµ°å…ƒç´ ï¼Œä»è°ƒç”¨çš„æ–¹æ³•è¿”å›ã€‚ ä¸€å¥è¯æ€»ç»“: ç”±é“¾è¡¨ç»„æˆçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚ LinkedBlockingDeque LinkedBlockingDequeæ˜¯ä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—ï¼Œå³å¯ä»¥ä»é˜Ÿåˆ—çš„ä¸¤ç«¯æ’å…¥å’Œç§»é™¤å…ƒç´ ã€‚ å¯¹äºä¸€äº›æŒ‡å®šçš„æ“ä½œï¼Œåœ¨æ’å…¥æˆ–è€…è·å–é˜Ÿåˆ—å…ƒç´ æ—¶å¦‚æœé˜Ÿåˆ—çŠ¶æ€ä¸å…è®¸è¯¥æ“ä½œå¯èƒ½ä¼šé˜»å¡ä½è¯¥çº¿ç¨‹ç›´åˆ°é˜Ÿåˆ—çŠ¶æ€å˜æ›´ä¸ºå…è®¸æ“ä½œï¼Œè¿™é‡Œçš„é˜»å¡ä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å†µ â€¢ æ’å…¥å…ƒç´ æ—¶: å¦‚æœå½“å‰é˜Ÿåˆ—å·²æ»¡å°†ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä¸€ç›´ç­‰åˆ°é˜Ÿåˆ—æœ‰ç©ºçš„ä½ç½®æ—¶å†è®²è¯¥å…ƒç´ æ’å…¥ï¼Œè¯¥æ“ä½œå¯ä»¥é€šè¿‡è®¾ç½®è¶…æ—¶å‚æ•°ï¼Œè¶…æ—¶åè¿”å› false è¡¨ç¤ºæ“ä½œå¤±è´¥ï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®è¶…æ—¶å‚æ•°ä¸€ç›´é˜»å¡ï¼Œä¸­æ–­åæŠ›å‡ºInterruptedExceptionå¼‚å¸¸ â€¢ è¯»å–å…ƒç´ æ—¶: å¦‚æœå½“å‰é˜Ÿåˆ—ä¸ºç©ºä¼šé˜»å¡ä½ç›´åˆ°é˜Ÿåˆ—ä¸ä¸ºç©ºç„¶åè¿”å›å…ƒç´ ï¼ŒåŒæ ·å¯ä»¥é€šè¿‡è®¾ç½®è¶…æ—¶å‚æ•° ä¸€å¥è¯æ€»ç»“: ç”±é“¾è¡¨ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ— å°ç»“ åœ¨å¤šçº¿ç¨‹é¢†åŸŸï¼šæ‰€è°“é˜»å¡ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä¼šæŒ‚èµ·çº¿ç¨‹ï¼ˆå³é˜»å¡ï¼‰ï¼Œä¸€æ—¦æ¡ä»¶æ»¡è¶³ï¼Œè¢«æŒ‚èµ·çš„çº¿ç¨‹åˆä¼šè‡ªåŠ¨è¢«å”¤èµ· ä¸ºä»€ä¹ˆéœ€è¦BlockingQueue? åœ¨concurrentåŒ…å‘å¸ƒä»¥å‰ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬æ¯ä¸ªç¨‹åºå‘˜éƒ½å¿…é¡»å»è‡ªå·±æ§åˆ¶è¿™äº›ç»†èŠ‚ï¼Œå°¤å…¶è¿˜è¦å…¼é¡¾æ•ˆç‡å’Œçº¿ç¨‹å®‰å…¨ï¼Œè€Œè¿™ä¼šç»™æˆ‘ä»¬çš„ç¨‹åºå¸¦æ¥ä¸å°çš„å¤æ‚åº¦ã€‚ä½¿ç”¨åæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒä»€ä¹ˆæ—¶å€™éœ€è¦é˜»å¡çº¿ç¨‹ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦å”¤é†’çº¿ç¨‹ï¼Œå› ä¸ºè¿™ä¸€åˆ‡BlockingQueueéƒ½ç»™ä½ ä¸€æ‰‹åŒ…åŠäº† çº¿ç¨‹æ±  â€‹ çº¿ç¨‹æ± ï¼ˆThread Poolï¼‰ï¼šä¸€ç§çº¿ç¨‹ä½¿ç”¨æ¨¡å¼ã€‚çº¿ç¨‹è¿‡å¤šä¼šå¸¦æ¥è°ƒåº¦å¼€é”€ï¼Œè¿›è€Œå½±å“ç¼“å­˜å±€éƒ¨æ€§å’Œæ•´ä½“æ€§èƒ½ã€‚è€Œçº¿ç¨‹æ± ç»´æŠ¤ç€å¤šä¸ªçº¿ç¨‹ï¼Œç­‰å¾…ç€ç›‘ç£ç®¡ç†è€…åˆ†é…å¯å¹¶å‘æ‰§è¡Œçš„ä»»åŠ¡ã€‚è¿™é¿å…äº†åœ¨å¤„ç†çŸ­æ—¶é—´ä»»åŠ¡æ—¶åˆ›å»ºä¸é”€æ¯çº¿ç¨‹çš„ä»£ä»·ã€‚çº¿ç¨‹æ± ä¸ä»…èƒ½å¤Ÿä¿è¯å†…æ ¸çš„å……åˆ†åˆ©ç”¨ï¼Œè¿˜èƒ½é˜²æ­¢è¿‡åˆ†è°ƒåº¦ã€‚ â€‹ ä¾‹å­ï¼šä»¥å‰å•æ ¸CPUç”µè„‘ï¼Œå‡çš„å¤šçº¿ç¨‹ï¼Œåƒé©¬æˆå›¢å°ä¸‘ç©å¤šä¸ªçƒï¼ŒCPUéœ€è¦æ¥å›åˆ‡æ¢ã€‚ ç°åœ¨å¤šæ ¸ç”µè„‘ï¼Œå¤šä¸ªçº¿ç¨‹å„è‡ªè·‘åœ¨ç‹¬ç«‹çš„CPUä¸Šï¼Œä¸ç”¨åˆ‡æ¢æ•ˆç‡é«˜ã€‚ ä¼˜åŠ¿ï¼š çº¿ç¨‹æ± åšçš„å·¥ä½œåªè¦æ˜¯æ§åˆ¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡ï¼Œå¤„ç†è¿‡ç¨‹ä¸­å°†ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼Œç„¶ååœ¨çº¿ç¨‹åˆ›å»ºåå¯åŠ¨è¿™äº›ä»»åŠ¡ï¼Œå¦‚æœçº¿ç¨‹æ•°é‡è¶…è¿‡äº†æœ€å¤§æ•°é‡ï¼Œè¶…å‡ºæ•°é‡çš„çº¿ç¨‹æ’é˜Ÿç­‰å€™ï¼Œç­‰å…¶ä»–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå†ä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ¥æ‰§è¡Œã€‚ ç‰¹ç‚¹ï¼š â€¢ é™ä½èµ„æºæ¶ˆè€—: é€šè¿‡é‡å¤åˆ©ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹é™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯é€ æˆçš„é”€è€—ã€‚ â€¢ æé«˜å“åº”é€Ÿåº¦: å½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦ç­‰å¾…çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œã€‚ â€¢ æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§: çº¿ç¨‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œå¦‚æœæ— é™åˆ¶çš„åˆ›å»ºï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡å¤šè€Œäº§ç”ŸOOMï¼Œå¹¶ä¸”ä¼šé€ æˆcpuè¿‡åº¦åˆ‡æ¢ï¼ˆcpuåˆ‡æ¢çº¿ç¨‹æ˜¯æœ‰æ—¶é—´æˆæœ¬çš„ï¼ˆéœ€è¦ä¿æŒå½“å‰æ‰§è¡Œçº¿ç¨‹çš„ç°åœºï¼Œå¹¶æ¢å¤è¦æ‰§è¡Œçº¿ç¨‹çš„ç°åœºï¼‰ï¼‰,ä¸ä»…ä¼šé”€è€—ç³»ç»Ÿèµ„æºï¼Œè¿˜ä¼šé™ä½ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§ã€‚æ–¹ä¾¿çº¿ç¨‹å¹¶å‘æ•°çš„ç®¡æ§ã€‚ â€¢ æä¾›æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå»¶æ—¶å®šæ—¶çº¿ç¨‹æ± ã€‚ â€¢ Javaä¸­çš„çº¿ç¨‹æ± æ˜¯é€šè¿‡Executoræ¡†æ¶å®ç°çš„ï¼Œè¯¥æ¡†æ¶ä¸­ç”¨åˆ°äº†Executorï¼ŒExecutorsï¼ŒExecutorServiceï¼ŒThreadPoolExecutorè¿™å‡ ä¸ªç±»ã€‚ åˆ›å»ºå¸¸ç”¨ä¸‰ç§çº¿ç¨‹æ± çš„æ–¹å¼ 12345678910111213141516171819202122232425262728293031323334package com.atguigu.pool;import java.util.concurrent.ExecutorService;import java.util.concurrent.Executors;//æ¼”ç¤ºçº¿ç¨‹æ± ä¸‰ç§å¸¸ç”¨åˆ†ç±»public class ThreadPoolDemo1 { public static void main(String[] args) { //ä¸€æ± äº”çº¿ç¨‹ ExecutorService threadPool1 = Executors.newFixedThreadPool(5); //5ä¸ªçª—å£ //ä¸€æ± ä¸€çº¿ç¨‹ ExecutorService threadPool2 = Executors.newSingleThreadExecutor(); //ä¸€ä¸ªçª—å£ //ä¸€æ± å¯æ‰©å®¹çº¿ç¨‹ ExecutorService threadPool3 = Executors.newCachedThreadPool(); //10ä¸ªé¡¾å®¢è¯·æ±‚ try { for (int i = 1; i &lt;=10; i++) { //æ‰§è¡Œ threadPool3.execute(()-&gt;{ System.out.println(Thread.currentThread().getName()+&quot; åŠç†ä¸šåŠ¡&quot;); }); } }catch (Exception e) { e.printStackTrace(); }finally { //å…³é—­ threadPool3.shutdown(); } }} å¸¸ç”¨å‚æ•° (é‡ç‚¹) â€‹ å½“æäº¤ä»»åŠ¡æ•°å¤§äº corePoolSize çš„æ—¶å€™ï¼Œä¼šä¼˜å…ˆå°†ä»»åŠ¡æ”¾åˆ° workQueue é˜»å¡é˜Ÿåˆ—ä¸­ã€‚å½“é˜»å¡é˜Ÿåˆ—é¥±å’Œåï¼Œä¼šæ‰©å……çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°ï¼Œç›´åˆ°è¾¾åˆ° maximumPoolSize æœ€å¤§çº¿ç¨‹æ•°é…ç½®ã€‚æ­¤æ—¶ï¼Œå†å¤šä½™çš„ä»»åŠ¡ï¼Œåˆ™ä¼šè§¦å‘çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥äº†ã€‚ â€‹ å³ï¼Œå½“æäº¤çš„ä»»åŠ¡æ•°å¤§äºï¼ˆworkQueue.size() + maximumPoolSize ï¼‰ï¼Œå°±ä¼šè§¦å‘çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥ã€‚ 1234public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue) { this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, Executors.defaultThreadFactory(), defaultHandler);} 1ã€corePoolSizeï¼ˆçº¿ç¨‹æ± åŸºæœ¬å¤§å°ï¼‰ï¼šå½“å‘çº¿ç¨‹æ± æäº¤ä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œè‹¥çº¿ç¨‹æ± å·²åˆ›å»ºçš„çº¿ç¨‹æ•°å°äºcorePoolSizeï¼Œå³ä¾¿æ­¤æ—¶å­˜åœ¨ç©ºé—²çº¿ç¨‹ï¼Œä¹Ÿä¼šé€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ¥æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œç›´åˆ°å·²åˆ›å»ºçš„çº¿ç¨‹æ•°å¤§äºæˆ–ç­‰äºcorePoolSizeæ—¶ï¼Œï¼ˆé™¤äº†åˆ©ç”¨æäº¤æ–°ä»»åŠ¡æ¥åˆ›å»ºå’Œå¯åŠ¨çº¿ç¨‹ï¼ˆæŒ‰éœ€æ„é€ ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ prestartCoreThread() æˆ– prestartAllCoreThreads() æ–¹æ³•æ¥æå‰å¯åŠ¨çº¿ç¨‹æ± ä¸­çš„åŸºæœ¬çº¿ç¨‹ã€‚ï¼‰ 2ã€maximumPoolSizeï¼ˆçº¿ç¨‹æ± æœ€å¤§å¤§å°ï¼‰ï¼šçº¿ç¨‹æ± æ‰€å…è®¸çš„æœ€å¤§çº¿ç¨‹ä¸ªæ•°ã€‚å½“é˜Ÿåˆ—æ»¡äº†ï¼Œä¸”å·²åˆ›å»ºçš„çº¿ç¨‹æ•°å°äºmaximumPoolSizeï¼Œåˆ™çº¿ç¨‹æ± ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚å¦å¤–ï¼Œå¯¹äºæ— ç•Œé˜Ÿåˆ—ï¼Œå¯å¿½ç•¥è¯¥å‚æ•°ã€‚ 3ã€keepAliveTimeï¼ˆçº¿ç¨‹å­˜æ´»ä¿æŒæ—¶é—´ï¼‰ï¼ˆç§’ï¼‰å½“çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œçº¿ç¨‹çš„ç©ºé—²æ—¶é—´å¦‚æœè¶…è¿‡çº¿ç¨‹å­˜æ´»æ—¶é—´ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±ä¼šè¢«é”€æ¯ï¼Œç›´åˆ°çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å°äºç­‰äºæ ¸å¿ƒçº¿ç¨‹æ•°ã€‚ 4ã€workQueueï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰ï¼šç”¨äºä¼ è¾“å’Œä¿å­˜ç­‰å¾…æ‰§è¡Œä»»åŠ¡çš„é˜»å¡é˜Ÿåˆ—ã€‚ 5ã€threadFactoryï¼ˆçº¿ç¨‹å·¥å‚ï¼‰ï¼šç”¨äºåˆ›å»ºæ–°çº¿ç¨‹ã€‚threadFactoryåˆ›å»ºçš„çº¿ç¨‹ä¹Ÿæ˜¯é‡‡ç”¨new Thread()æ–¹å¼ï¼ŒthreadFactoryåˆ›å»ºçš„çº¿ç¨‹åéƒ½å…·æœ‰ç»Ÿä¸€çš„é£æ ¼ï¼špool-m-thread-nï¼ˆmä¸ºçº¿ç¨‹æ± çš„ç¼–å·ï¼Œnä¸ºçº¿ç¨‹æ± å†…çš„çº¿ç¨‹ç¼–å·ï¼‰ã€‚ 6ã€handlerï¼ˆçº¿ç¨‹é¥±å’Œç­–ç•¥ï¼‰ï¼šå½“çº¿ç¨‹æ± å’Œé˜Ÿåˆ—éƒ½æ»¡äº†ï¼Œå†åŠ å…¥çº¿ç¨‹ä¼šæ‰§è¡Œæ­¤ç­–ç•¥ã€‚ 7ã€unit å­˜æ´»çš„æ—¶é—´å•ä½ 1ThreadPoolExecutor threadPool = new ThreadPoolExecutor(corePoolSizeï¼š10, maximumPoolSizeï¼š15, keepAliveTimeï¼š6060, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;()); å³åˆå§‹åŒ–10ä¸ªï¼Œæœ€å¤§15ä¸ªï¼Œå­˜æ´»6060ï¼Œå•ä½ä¸ºç§’ï¼Œæœ‰å“ªäº›å¾…æ‰§è¡Œä»»åŠ¡ã€‚ æ‹’ç»ç­–ç•¥(é‡ç‚¹) CallerRunsPolicy: å½“è§¦å‘æ‹’ç»ç­–ç•¥ï¼Œåªè¦çº¿ç¨‹æ± æ²¡æœ‰å…³é—­çš„è¯ï¼Œåˆ™ä½¿ç”¨è°ƒç”¨çº¿ç¨‹ç›´æ¥è¿è¡Œä»»åŠ¡ã€‚ä¸€èˆ¬å¹¶å‘æ¯”è¾ƒå°ï¼Œæ€§èƒ½è¦æ±‚ä¸é«˜ï¼Œä¸å…è®¸å¤±è´¥ã€‚ä½†æ˜¯ï¼Œç”±äºè°ƒç”¨è€…è‡ªå·±è¿è¡Œä»»åŠ¡ï¼Œå¦‚æœä»»åŠ¡æäº¤é€Ÿåº¦è¿‡å¿«ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºé˜»å¡ï¼Œæ€§èƒ½æ•ˆç‡ä¸Šå¿…ç„¶çš„æŸå¤±è¾ƒå¤§ AbortPolicy: ä¸¢å¼ƒä»»åŠ¡ï¼Œå¹¶æŠ›å‡ºæ‹’ç»æ‰§è¡Œ RejectedExecutionException å¼‚å¸¸ä¿¡æ¯ã€‚çº¿ç¨‹æ± é»˜è®¤çš„æ‹’ç»ç­–ç•¥ã€‚å¿…é¡»å¤„ç†å¥½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¦åˆ™ä¼šæ‰“æ–­å½“å‰çš„æ‰§è¡Œæµç¨‹ï¼Œå½±å“åç»­çš„ä»»åŠ¡æ‰§è¡Œã€‚ DiscardPolicy: ç›´æ¥ä¸¢å¼ƒï¼Œå…¶ä»–å•¥éƒ½æ²¡æœ‰ DiscardOldestPolicy: å½“è§¦å‘æ‹’ç»ç­–ç•¥ï¼Œåªè¦çº¿ç¨‹æ± æ²¡æœ‰å…³é—­çš„è¯ï¼Œä¸¢å¼ƒé˜»å¡é˜Ÿåˆ— workQueue ä¸­æœ€è€çš„ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶å°†æ–°ä»»åŠ¡åŠ å…¥ çº¿ç¨‹æ± çš„ç§ç±»ä¸åˆ›å»º çº¿ç¨‹æ± æ€»å¯¹æ¯” 1ã€newCachedThreadPoolï¼šç”¨æ¥åˆ›å»ºä¸€ä¸ªå¯ä»¥æ— é™æ‰©å¤§çš„çº¿ç¨‹æ± ï¼Œé€‚ç”¨äºè´Ÿè½½è¾ƒè½»çš„åœºæ™¯ï¼Œæ‰§è¡ŒçŸ­æœŸå¼‚æ­¥ä»»åŠ¡ã€‚ï¼ˆå¯ä»¥ä½¿å¾—ä»»åŠ¡å¿«é€Ÿå¾—åˆ°æ‰§è¡Œï¼Œå› ä¸ºä»»åŠ¡æ—¶é—´æ‰§è¡ŒçŸ­ï¼Œå¯ä»¥å¾ˆå¿«ç»“æŸï¼Œä¹Ÿä¸ä¼šé€ æˆcpuè¿‡åº¦åˆ‡æ¢ï¼‰ 2ã€newFixedThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œå› ä¸ºé‡‡ç”¨æ— ç•Œçš„é˜»å¡é˜Ÿåˆ—ï¼Œæ‰€ä»¥å®é™…çº¿ç¨‹æ•°é‡æ°¸è¿œä¸ä¼šå˜åŒ–ï¼Œé€‚ç”¨äºè´Ÿè½½è¾ƒé‡çš„åœºæ™¯ï¼Œå¯¹å½“å‰çº¿ç¨‹æ•°é‡è¿›è¡Œé™åˆ¶ã€‚ï¼ˆä¿è¯çº¿ç¨‹æ•°å¯æ§ï¼Œä¸ä¼šé€ æˆçº¿ç¨‹è¿‡å¤šï¼Œå¯¼è‡´ç³»ç»Ÿè´Ÿè½½æ›´ä¸ºä¸¥é‡ï¼‰ 3ã€newSingleThreadExecutorï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œé€‚ç”¨äºéœ€è¦ä¿è¯é¡ºåºæ‰§è¡Œå„ä¸ªä»»åŠ¡ã€‚ 4ã€newScheduledThreadPoolï¼šé€‚ç”¨äºæ‰§è¡Œå»¶æ—¶æˆ–è€…å‘¨æœŸæ€§ä»»åŠ¡ã€‚ newCachedThreadPool(å¸¸ç”¨) ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹. ç‰¹ç‚¹: â€¢ çº¿ç¨‹æ± ä¸­æ•°é‡æ²¡æœ‰å›ºå®šï¼Œå¯è¾¾åˆ°æœ€å¤§å€¼ï¼ˆInterger. MAX_VALUEï¼‰ â€¢ çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å¯è¿›è¡Œç¼“å­˜é‡å¤åˆ©ç”¨å’Œå›æ”¶ï¼ˆå›æ”¶é»˜è®¤æ—¶é—´ä¸º1åˆ†é’Ÿï¼‰ â€¢ å½“çº¿ç¨‹æ± ä¸­ï¼Œæ²¡æœ‰å¯ç”¨çº¿ç¨‹ï¼Œä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ åˆ›å»ºæ–¹å¼ï¼š 1234567891011/** * å¯ç¼“å­˜çº¿ç¨‹æ±  * @return */public static ExecutorService newCachedThreadPool(){ /** * corePoolSizeçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•° * maximumPoolSizeèƒ½å®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•° * keepAliveTimeç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´ * unit å­˜æ´»çš„æ—¶é—´å•ä½ * workQueue å­˜æ”¾æäº¤ä½†æœªæ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ— * threadFactory åˆ›å»ºçº¿ç¨‹çš„å·¥å‚ç±»:å¯ä»¥çœç•¥ * handler ç­‰å¾…é˜Ÿåˆ—æ»¡åçš„æ‹’ç»ç­–ç•¥:å¯ä»¥çœç•¥ */ return new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;&gt;(), Executors.defaultThreadFactory(), new ThreadPoolExecutor.AbortPolicy()); } newFixedThreadPool(å¸¸ç”¨) ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªå¯é‡ç”¨å›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ï¼Œä»¥å…±äº«çš„æ— ç•Œé˜Ÿåˆ—æ–¹å¼æ¥è¿è¡Œè¿™äº›çº¿ç¨‹ã€‚åœ¨ä»»æ„ç‚¹ï¼Œåœ¨å¤§å¤šæ•°çº¿ç¨‹ä¼šå¤„äºå¤„ç†ä»»åŠ¡çš„æ´»åŠ¨çŠ¶æ€ã€‚å¦‚æœåœ¨æ‰€æœ‰çº¿ç¨‹å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶æäº¤é™„åŠ ä»»åŠ¡ï¼Œåˆ™åœ¨æœ‰å¯ç”¨çº¿ç¨‹ä¹‹å‰ï¼Œé™„åŠ ä»»åŠ¡å°†åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚å¦‚æœåœ¨å…³é—­å‰çš„æ‰§è¡ŒæœŸé—´ç”±äºå¤±è´¥è€Œå¯¼è‡´ä»»ä½•çº¿ç¨‹ç»ˆæ­¢ï¼Œé‚£ä¹ˆä¸€ä¸ªæ–°çº¿ç¨‹å°†ä»£æ›¿å®ƒæ‰§è¡Œåç»­çš„ä»»åŠ¡ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚åœ¨æŸä¸ªçº¿ç¨‹è¢«æ˜¾å¼åœ°å…³é—­ä¹‹å‰ï¼Œæ± ä¸­çš„çº¿ç¨‹å°†ä¸€ç›´å­˜åœ¨ã€‚åœºæ™¯: é€‚ç”¨äºå¯ä»¥é¢„æµ‹çº¿ç¨‹æ•°é‡çš„ä¸šåŠ¡ä¸­ï¼Œæˆ–è€…æœåŠ¡å™¨è´Ÿè½½è¾ƒé‡ï¼Œå¯¹çº¿ç¨‹æ•°æœ‰ä¸¥æ ¼é™åˆ¶çš„åœºæ™¯ ç‰¹å¾ï¼š â€¢ çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å¤„äºä¸€å®šçš„é‡ï¼Œå¯ä»¥å¾ˆå¥½çš„æ§åˆ¶çº¿ç¨‹çš„å¹¶å‘é‡ â€¢ çº¿ç¨‹å¯ä»¥é‡å¤è¢«ä½¿ç”¨ï¼Œåœ¨æ˜¾ç¤ºå…³é—­ä¹‹å‰ï¼Œéƒ½å°†ä¸€ç›´å­˜åœ¨ â€¢ è¶…å‡ºä¸€å®šé‡çš„çº¿ç¨‹è¢«æäº¤æ—¶å€™éœ€åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾… åˆ›å»ºæ–¹å¼ï¼š 123456789101112/** * å›ºå®šé•¿åº¦çº¿ç¨‹æ±  * @return */ public static ExecutorService newFixedThreadPool(){ /** * corePoolSizeçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•° * maximumPoolSizeèƒ½å®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•° * keepAliveTimeç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´ * unit å­˜æ´»çš„æ—¶é—´å•ä½ * workQueue å­˜æ”¾æäº¤ä½†æœªæ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ— * threadFactory åˆ›å»ºçº¿ç¨‹çš„å·¥å‚ç±»:å¯ä»¥çœç•¥ * handler ç­‰å¾…é˜Ÿåˆ—æ»¡åçš„æ‹’ç»ç­–ç•¥:å¯ä»¥çœç•¥ */ return new ThreadPoolExecutor(10, 10, 0L, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;&gt;(), Executors.defaultThreadFactory(), new ThreadPoolExecutor.AbortPolicy()); } newSingleThreadExecutor(å¸¸ç”¨) ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªä½¿ç”¨å•ä¸ª worker çº¿ç¨‹çš„ Executorï¼Œä»¥æ— ç•Œé˜Ÿåˆ—æ–¹å¼æ¥è¿è¡Œè¯¥çº¿ç¨‹ã€‚ï¼ˆæ³¨æ„ï¼Œå¦‚æœå› ä¸ºåœ¨å…³é—­å‰çš„æ‰§è¡ŒæœŸé—´å‡ºç°å¤±è´¥è€Œç»ˆæ­¢äº†æ­¤å•ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå¦‚æœéœ€è¦ï¼Œä¸€ä¸ªæ–°çº¿ç¨‹å°†ä»£æ›¿å®ƒæ‰§è¡Œåç»­çš„ä»»åŠ¡ï¼‰ã€‚å¯ä¿è¯é¡ºåºåœ°æ‰§è¡Œå„ä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨ä»»æ„ç»™å®šçš„æ—¶é—´ä¸ä¼šæœ‰å¤šä¸ªçº¿ç¨‹æ˜¯æ´»åŠ¨çš„ã€‚ä¸å…¶ä»–ç­‰æ•ˆçš„newFixedThreadPoolä¸åŒï¼Œå¯ä¿è¯æ— éœ€é‡æ–°é…ç½®æ­¤æ–¹æ³•æ‰€è¿”å›çš„æ‰§è¡Œç¨‹åºå³å¯ä½¿ç”¨å…¶ä»–çš„çº¿ç¨‹ã€‚åœºæ™¯: é€‚ç”¨äºéœ€è¦ä¿è¯é¡ºåºæ‰§è¡Œå„ä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨ä»»æ„æ—¶é—´ç‚¹ï¼Œä¸ä¼šåŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹çš„åœºæ™¯ã€‚ ç‰¹å¾ï¼š çº¿ç¨‹æ± ä¸­æœ€å¤šæ‰§è¡Œ1ä¸ªçº¿ç¨‹ï¼Œä¹‹åæäº¤çš„çº¿ç¨‹æ´»åŠ¨å°†ä¼šæ’åœ¨é˜Ÿåˆ—ä¸­ä»¥æ­¤æ‰§è¡Œ åˆ›å»ºæ–¹å¼ï¼š 1234567891011/** * å•ä¸€çº¿ç¨‹æ±  * @return */ /** * corePoolSizeçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•° * maximumPoolSizeèƒ½å®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•° * keepAliveTimeç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´ * unit å­˜æ´»çš„æ—¶é—´å•ä½ * workQueue å­˜æ”¾æäº¤ä½†æœªæ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ— * threadFactory åˆ›å»ºçº¿ç¨‹çš„å·¥å‚ç±»:å¯ä»¥çœç•¥ * handler ç­‰å¾…é˜Ÿåˆ—æ»¡åçš„æ‹’ç»ç­–ç•¥:å¯ä»¥çœç•¥ */public static ExecutorService newSingleThreadExecutor(){ return new ThreadPoolExecutor(1, 1, 0L, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;&gt;(), Executors.defaultThreadFactory(), new ThreadPoolExecutor.AbortPolicy()); } newScheduleThreadPool(äº†è§£) ä½œç”¨: çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªcorePoolSizeä¸ºä¼ å…¥å‚æ•°ï¼Œæœ€å¤§çº¿ç¨‹æ•°ä¸ºæ•´å½¢çš„æœ€å¤§æ•°çš„çº¿ç¨‹æ± ã€‚åœºæ™¯: é€‚ç”¨äºéœ€è¦å¤šä¸ªåå°çº¿ç¨‹æ‰§è¡Œå‘¨æœŸä»»åŠ¡çš„åœºæ™¯ã€‚ ç‰¹å¾: ï¼ˆ1ï¼‰çº¿ç¨‹æ± ä¸­å…·æœ‰æŒ‡å®šæ•°é‡çš„çº¿ç¨‹ï¼Œå³ä¾¿æ˜¯ç©ºçº¿ç¨‹ä¹Ÿå°†ä¿ç•™ ï¼ˆ2ï¼‰å¯å®šæ—¶æˆ–è€…å»¶è¿Ÿæ‰§è¡Œçº¿ç¨‹æ´»åŠ¨ åˆ›å»ºæ–¹å¼: 12public static ScheduledExecutorService newScheduledThreadPool(int corePoolSize, ThreadFactory threadFactory) { return new ScheduledThreadPoolExecutor(corePoolSize, threadFactory); } newWorkStealingPool jdk1.8æä¾›çš„çº¿ç¨‹æ± ï¼Œåº•å±‚ä½¿ç”¨çš„æ˜¯ForkJoinPoolå®ç°ï¼Œåˆ›å»ºä¸€ä¸ªæ‹¥æœ‰å¤šä¸ªä»»åŠ¡é˜Ÿåˆ—çš„çº¿ç¨‹æ± ï¼Œå¯ä»¥å‡å°‘è¿æ¥æ•°ï¼Œåˆ›å»ºå½“å‰å¯ç”¨cpuæ ¸æ•°çš„çº¿ç¨‹æ¥å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ã€‚åœºæ™¯: é€‚ç”¨äºå¤§è€—æ—¶ï¼Œå¯å¹¶è¡Œæ‰§è¡Œçš„åœºæ™¯ åˆ›å»ºæ–¹å¼: 12345678public static ExecutorService newWorkStealingPool(int parallelism) { /** * parallelismï¼šå¹¶è¡Œçº§åˆ«ï¼Œé€šå¸¸é»˜è®¤ä¸ºJVMå¯ç”¨çš„å¤„ç†å™¨ä¸ªæ•° * factoryï¼šç”¨äºåˆ›å»ºForkJoinPoolä¸­ä½¿ç”¨çš„çº¿ç¨‹ã€‚ * handlerï¼šç”¨äºå¤„ç†å·¥ä½œçº¿ç¨‹æœªå¤„ç†çš„å¼‚å¸¸ï¼Œé»˜è®¤ä¸ºnull * asyncModeï¼šç”¨äºæ§åˆ¶WorkQueueçš„å·¥ä½œæ¨¡å¼:é˜Ÿåˆ—---åé˜Ÿåˆ—*/ return new ForkJoinPool(parallelism, ForkJoinPool.defaultForkJoinWorkerThreadFactory, null, true); } åº•å±‚åŸç† åœ¨åˆ›å»ºäº†çº¿ç¨‹æ± åï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸ºé›¶ å½“è°ƒç”¨execute()æ–¹æ³•æ·»åŠ ä¸€ä¸ªè¯·æ±‚ä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹æ± ä¼šåšå‡ºå¦‚ä¸‹åˆ¤æ–­ï¼š 2.1 å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡å°äºcorePoolSizeï¼Œé‚£ä¹ˆé©¬ä¸Šåˆ›å»ºçº¿ç¨‹è¿è¡Œè¿™ä¸ªä»»åŠ¡ï¼› 2.2 å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡å¤§äºæˆ–ç­‰äºcorePoolSizeï¼Œé‚£ä¹ˆå°†è¿™ä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼› 2.3 å¦‚æœè¿™ä¸ªæ—¶å€™é˜Ÿåˆ—æ»¡äº†ä¸”æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡è¿˜å°äºmaximumPoolSizeï¼Œé‚£ä¹ˆè¿˜æ˜¯è¦åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹ç«‹åˆ»è¿è¡Œè¿™ä¸ªä»»åŠ¡ï¼› 2.4 å¦‚æœé˜Ÿåˆ—æ»¡äº†ä¸”æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡å¤§äºæˆ–ç­‰äºmaximumPoolSizeï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šå¯åŠ¨é¥±å’Œæ‹’ç»ç­–ç•¥æ¥æ‰§è¡Œã€‚ å½“ä¸€ä¸ªçº¿ç¨‹å®Œæˆä»»åŠ¡æ—¶ï¼Œå®ƒä¼šä»é˜Ÿåˆ—ä¸­å–ä¸‹ä¸€ä¸ªä»»åŠ¡æ¥æ‰§è¡Œ å½“ä¸€ä¸ªçº¿ç¨‹æ— äº‹å¯åšè¶…è¿‡ä¸€å®šçš„æ—¶é—´ï¼ˆkeepAliveTimeï¼‰æ—¶ï¼Œçº¿ç¨‹ä¼šåˆ¤æ–­ï¼š 4.1 å¦‚æœå½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°å¤§äºcorePoolSizeï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±è¢«åœæ‰ã€‚ 4.2 æ‰€ä»¥çº¿ç¨‹æ± çš„æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼Œå®ƒæœ€ç»ˆä¼šæ”¶ç¼©åˆ°corePoolSizeçš„å¤§å°ã€‚ æ³¨æ„äº‹é¡¹(é‡è¦) é¡¹ç›®ä¸­åˆ›å»ºå¤šçº¿ç¨‹æ—¶ï¼Œä½¿ç”¨å¸¸è§çš„ä¸‰ç§çº¿ç¨‹æ± åˆ›å»ºæ–¹å¼ï¼Œå•ä¸€ã€å¯å˜ã€å®šé•¿éƒ½æœ‰ä¸€å®šé—®é¢˜ï¼ŒåŸå› æ˜¯FixedThreadPoolå’ŒSingleThreadExecutoråº•å±‚éƒ½æ˜¯ç”¨LinkedBlockingQueueå®ç°çš„ï¼Œè¿™ä¸ªé˜Ÿåˆ—æœ€å¤§é•¿åº¦ä¸ºInteger.MAX_VALUEï¼Œå®¹æ˜“å¯¼è‡´OOMã€‚æ‰€ä»¥å®é™…ç”Ÿäº§ä¸€èˆ¬è‡ªå·±é€šè¿‡ThreadPoolExecutorçš„7ä¸ªå‚æ•°ï¼Œè‡ªå®šä¹‰çº¿ç¨‹æ±  åˆ›å»ºçº¿ç¨‹æ± æ¨èé€‚ç”¨ThreadPoolExecutoråŠå…¶7ä¸ªå‚æ•°æ‰‹åŠ¨åˆ›å»º corePoolSizeçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•° maximumPoolSizeèƒ½å®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•° keepAliveTimeç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´ unit å­˜æ´»çš„æ—¶é—´å•ä½ workQueue å­˜æ”¾æäº¤ä½†æœªæ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ— threadFactory åˆ›å»ºçº¿ç¨‹çš„å·¥å‚ç±» handler ç­‰å¾…é˜Ÿåˆ—æ»¡åçš„æ‹’ç»ç­–ç•¥ â€‹ æ‰‹åŠ¨åˆ›å»ºç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031323334package com.atguigu.pool;import java.util.concurrent.*;//è‡ªå®šä¹‰æ‰‹åŠ¨çº¿ç¨‹æ± åˆ›å»ºpublic class ThreadPoolDemo2 { public static void main(String[] args) { ExecutorService threadPool = new ThreadPoolExecutor( 2, 5, 2L, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;&gt;(3), Executors.defaultThreadFactory(), new ThreadPoolExecutor.AbortPolicy() ); //10ä¸ªé¡¾å®¢è¯·æ±‚ try { for (int i = 1; i &lt;=10; i++) { //æ‰§è¡Œ threadPool.execute(()-&gt;{ System.out.println(Thread.currentThread().getName()+&quot; åŠç†ä¸šåŠ¡&quot;); }); } }catch (Exception e) { e.printStackTrace(); }finally { //å…³é—­ threadPool.shutdown(); } }} ä¸ºä»€ä¹ˆä¸å…è®¸é€‚ç”¨ä¸å…è®¸Executors.çš„æ–¹å¼æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹æ± ,å¦‚ä¸‹å›¾ 123456789101112131415161718192021222324252627282930313233343536373839404142 /**ä½¿ç”¨Executorsåˆ›å»ºçº¿ç¨‹æ± ï¼Œå»ºè®®æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹æ±  * çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨Executorså»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ThreadPoolExecutorçš„æ–¹å¼ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚ è¯´æ˜ï¼šExecutorsè¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯å¦‚ä¸‹ï¼š * 1ï¼‰FixedThreadPoolå’ŒSingleThreadPool: * å…è®¸çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ä¸ºInteger.MAX_VALUEï¼Œå¯èƒ½ä¼šå †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´OOMã€‚ * 2ï¼‰CachedThreadPool: * å…è®¸çš„åˆ›å»ºçº¿ç¨‹æ•°é‡ä¸ºInteger.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´OOMã€‚*/ Positive example 1ï¼š //org.apache.commons.lang3.concurrent.BasicThreadFactory ScheduledExecutorService executorService = new ScheduledThreadPoolExecutor(1, new BasicThreadFactory.Builder().namingPattern(&quot;example-schedule-pool-%d&quot;).daemon(true).build()); Positive example 2ï¼š ThreadFactory namedThreadFactory = new ThreadFactoryBuilder() .setNameFormat(&quot;demo-pool-%d&quot;).build(); //Common Thread Pool ExecutorService pool = new ThreadPoolExecutor(5, 200, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;(1024), namedThreadFactory, new ThreadPoolExecutor.AbortPolicy()); pool.execute(()-&gt; System.out.println(Thread.currentThread().getName())); pool.shutdown();//gracefully shutdown Positive example 3ï¼š &lt;bean id=&quot;userThreadPool&quot; class=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;&gt; &lt;property name=&quot;corePoolSize&quot; value=&quot;10&quot; /&gt; &lt;property name=&quot;maxPoolSize&quot; value=&quot;100&quot; /&gt; &lt;property name=&quot;queueCapacity&quot; value=&quot;2000&quot; /&gt; &lt;property name=&quot;threadFactory&quot; value= threadFactory /&gt; &lt;property name=&quot;rejectedExecutionHandler&quot;&gt; &lt;ref local=&quot;rejectedExecutionHandler&quot; /&gt; &lt;/property&gt; &lt;/bean&gt; //in code userThreadPool.execute(thread); çº¿ç¨‹æ± æµç¨‹ çº¿ç¨‹æ± æµç¨‹ 1ã€åˆ¤æ–­æ ¸å¿ƒçº¿ç¨‹æ± æ˜¯å¦å·²æ»¡ï¼Œæ²¡æ»¡åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚å·²æ»¡åˆ™ã€‚ 2ã€åˆ¤æ–­ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼Œæ²¡æ»¡åˆ™å°†æ–°æäº¤çš„ä»»åŠ¡æ·»åŠ åœ¨å·¥ä½œé˜Ÿåˆ—ï¼Œå·²æ»¡åˆ™ã€‚ 3ã€åˆ¤æ–­æ•´ä¸ªçº¿ç¨‹æ± æ˜¯å¦å·²æ»¡ï¼Œæ²¡æ»¡åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå·²æ»¡åˆ™æ‰§è¡Œé¥±å’Œç­–ç•¥ã€‚ ï¼ˆ1ã€åˆ¤æ–­çº¿ç¨‹æ± ä¸­å½“å‰çº¿ç¨‹æ•°æ˜¯å¦å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå¦‚æœå°äºï¼Œåœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœå¤§äºåˆ™ 2ã€åˆ¤æ–­ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼Œæ²¡æ»¡åˆ™å°†æ–°æäº¤çš„ä»»åŠ¡æ·»åŠ åœ¨å·¥ä½œé˜Ÿåˆ—ï¼Œå·²æ»¡åˆ™ã€‚ 3ã€åˆ¤æ–­çº¿ç¨‹æ± ä¸­å½“å‰çº¿ç¨‹æ•°æ˜¯å¦å¤§äºæœ€å¤§çº¿ç¨‹æ•°ï¼Œå¦‚æœå°äºï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœå¤§äºï¼Œåˆ™æ‰§è¡Œé¥±å’Œç­–ç•¥ã€‚ï¼‰ çº¿ç¨‹æ± ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨ï¼ˆé˜»å¡ï¼‰é˜Ÿåˆ—ï¼Ÿ å›åˆ°äº†éçº¿ç¨‹æ± ç¼ºç‚¹ä¸­çš„ç¬¬3ç‚¹ï¼š 1ã€å› ä¸ºçº¿ç¨‹è‹¥æ˜¯æ— é™åˆ¶çš„åˆ›å»ºï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡å¤šè€Œäº§ç”ŸOOMï¼Œå¹¶ä¸”ä¼šé€ æˆcpuè¿‡åº¦åˆ‡æ¢ã€‚ å¦å¤–å›åˆ°äº†éçº¿ç¨‹æ± ç¼ºç‚¹ä¸­çš„ç¬¬1ç‚¹ï¼š 2ã€åˆ›å»ºçº¿ç¨‹çš„æ¶ˆè€—è¾ƒé«˜ã€‚ æˆ–è€…ä¸‹é¢è¿™ä¸ªç½‘ä¸Šå¹¶ä¸é«˜æ˜çš„å›ç­”ï¼š 2ã€çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹éœ€è¦è·å–mainlockè¿™ä¸ªå…¨å±€é”ï¼Œå½±å“å¹¶å‘æ•ˆç‡ï¼Œé˜»å¡é˜Ÿåˆ—å¯ä»¥å¾ˆå¥½çš„ç¼“å†²ã€‚ çº¿ç¨‹æ± ä¸ºä»€ä¹ˆè¦ä½¿ç”¨é˜»å¡é˜Ÿåˆ—è€Œä¸ä½¿ç”¨éé˜»å¡é˜Ÿåˆ—ï¼Ÿ é˜»å¡é˜Ÿåˆ—å¯ä»¥ä¿è¯ä»»åŠ¡é˜Ÿåˆ—ä¸­æ²¡æœ‰ä»»åŠ¡æ—¶é˜»å¡è·å–ä»»åŠ¡çš„çº¿ç¨‹ï¼Œä½¿å¾—çº¿ç¨‹è¿›å…¥waitçŠ¶æ€ï¼Œé‡Šæ”¾cpuèµ„æºã€‚ å½“é˜Ÿåˆ—ä¸­æœ‰ä»»åŠ¡æ—¶æ‰å”¤é†’å¯¹åº”çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯è¿›è¡Œæ‰§è¡Œã€‚ ä½¿å¾—åœ¨çº¿ç¨‹ä¸è‡³äºä¸€ç›´å ç”¨cpuèµ„æºã€‚ ï¼ˆçº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡åé€šè¿‡å¾ªç¯å†æ¬¡ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡è¿›è¡Œæ‰§è¡Œï¼Œä»£ç ç‰‡æ®µå¦‚ä¸‹ while (task != null || (task = getTask()) != null) {}ï¼‰ã€‚ ä¸ç”¨é˜»å¡é˜Ÿåˆ—ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡å®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦è€Œå·²ï¼Œæœ‰å¥½ç”¨çš„ä¸ºå•¥ä¸ç”¨å‘¢ï¼Ÿ å¦‚ä½•é…ç½®çº¿ç¨‹æ±  CPUå¯†é›†å‹ä»»åŠ¡ å°½é‡ä½¿ç”¨è¾ƒå°çš„çº¿ç¨‹æ± ï¼Œä¸€èˆ¬ä¸ºCPUæ ¸å¿ƒæ•°+1ã€‚ å› ä¸ºCPUå¯†é›†å‹ä»»åŠ¡ä½¿å¾—CPUä½¿ç”¨ç‡å¾ˆé«˜ï¼Œè‹¥å¼€è¿‡å¤šçš„çº¿ç¨‹æ•°ï¼Œä¼šé€ æˆCPUè¿‡åº¦åˆ‡æ¢ã€‚ IOå¯†é›†å‹ä»»åŠ¡ å¯ä»¥ä½¿ç”¨ç¨å¤§çš„çº¿ç¨‹æ± ï¼Œä¸€èˆ¬ä¸º2*CPUæ ¸å¿ƒæ•°ã€‚ IOå¯†é›†å‹ä»»åŠ¡CPUä½¿ç”¨ç‡å¹¶ä¸é«˜ï¼Œå› æ­¤å¯ä»¥è®©CPUåœ¨ç­‰å¾…IOçš„æ—¶å€™æœ‰å…¶ä»–çº¿ç¨‹å»å¤„ç†åˆ«çš„ä»»åŠ¡ï¼Œå……åˆ†åˆ©ç”¨CPUæ—¶é—´ã€‚ æ··åˆå‹ä»»åŠ¡ å¯ä»¥å°†ä»»åŠ¡åˆ†æˆIOå¯†é›†å‹å’ŒCPUå¯†é›†å‹ä»»åŠ¡ï¼Œç„¶ååˆ†åˆ«ç”¨ä¸åŒçš„çº¿ç¨‹æ± å»å¤„ç†ã€‚ åªè¦åˆ†å®Œä¹‹åä¸¤ä¸ªä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´ç›¸å·®ä¸å¤§ï¼Œé‚£ä¹ˆå°±ä¼šæ¯”ä¸²è¡Œæ‰§è¡Œæ¥çš„é«˜æ•ˆã€‚ å› ä¸ºå¦‚æœåˆ’åˆ†ä¹‹åä¸¤ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´æœ‰æ•°æ®çº§çš„å·®è·ï¼Œé‚£ä¹ˆæ‹†åˆ†æ²¡æœ‰æ„ä¹‰ã€‚ å› ä¸ºå…ˆæ‰§è¡Œå®Œçš„ä»»åŠ¡å°±è¦ç­‰åæ‰§è¡Œå®Œçš„ä»»åŠ¡ï¼Œæœ€ç»ˆçš„æ—¶é—´ä»ç„¶å–å†³äºåæ‰§è¡Œå®Œçš„ä»»åŠ¡ï¼Œè€Œä¸”è¿˜è¦åŠ ä¸Šä»»åŠ¡æ‹†åˆ†ä¸åˆå¹¶çš„å¼€é”€ï¼Œå¾—ä¸å¿å¤±ã€‚ execute()å’Œsubmit()æ–¹æ³• 1ã€execute()ï¼Œæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ 2ã€submit()ï¼Œæäº¤ä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡ï¼Œæœ‰è¿”å›å€¼ã€‚ submit(Callable task)èƒ½è·å–åˆ°å®ƒçš„è¿”å›å€¼ï¼Œé€šè¿‡future.get()è·å–ï¼ˆé˜»å¡ç›´åˆ°ä»»åŠ¡æ‰§è¡Œå®Œï¼‰ã€‚ä¸€èˆ¬ä½¿ç”¨FutureTask+Callableé…åˆä½¿ç”¨ï¼ˆIntentServiceä¸­æœ‰ä½“ç°ï¼‰ã€‚ submit(Runnable task, T result)èƒ½é€šè¿‡ä¼ å…¥çš„è½½ä½“resulté—´æ¥è·å¾—çº¿ç¨‹çš„è¿”å›å€¼ã€‚ submit(Runnable task)åˆ™æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œå°±ç®—è·å–å®ƒçš„è¿”å›å€¼ä¹Ÿæ˜¯nullã€‚ Future.getæ–¹æ³•ä¼šä½¿å–ç»“æœçš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼ŒçŸ¥é“çº¿ç¨‹æ‰§è¡Œå®Œæˆä¹‹åï¼Œå”¤é†’å–ç»“æœçš„çº¿ç¨‹ï¼Œç„¶åè¿”å›ç»“æœã€‚ Fork/Join Fork/Joinæ¡†æ¶ç®€ä»‹ Fork/Joinå®ƒå¯ä»¥å°†ä¸€ä¸ªå¤§çš„ä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªå­ä»»åŠ¡è¿›è¡Œå¹¶è¡Œå¤„ç†ï¼Œæœ€åå°†å­ä»»åŠ¡ç»“æœåˆå¹¶æˆæœ€åçš„è®¡ç®—ç»“æœï¼Œå¹¶è¿›è¡Œè¾“å‡ºã€‚Fork/Joinæ¡†æ¶è¦å®Œæˆä¸¤ä»¶äº‹æƒ…ï¼š Forkï¼šæŠŠä¸€ä¸ªå¤æ‚ä»»åŠ¡è¿›è¡Œåˆ†æ‹†ï¼Œå¤§äº‹åŒ–å° Joinï¼šæŠŠåˆ†æ‹†ä»»åŠ¡çš„ç»“æœè¿›è¡Œåˆå¹¶ ä»»åŠ¡åˆ†å‰²ï¼šé¦–å…ˆFork/Joinæ¡†æ¶éœ€è¦æŠŠå¤§çš„ä»»åŠ¡åˆ†å‰²æˆè¶³å¤Ÿå°çš„å­ä»»åŠ¡ï¼Œå¦‚æœå­ä»»åŠ¡æ¯”è¾ƒå¤§çš„è¯è¿˜è¦å¯¹å­ä»»åŠ¡è¿›è¡Œç»§ç»­åˆ†å‰² æ‰§è¡Œä»»åŠ¡å¹¶åˆå¹¶ç»“æœï¼šåˆ†å‰²çš„å­ä»»åŠ¡åˆ†åˆ«æ”¾åˆ°åŒç«¯é˜Ÿåˆ—é‡Œï¼Œç„¶åå‡ ä¸ªå¯åŠ¨çº¿ç¨‹åˆ†åˆ«ä»åŒç«¯é˜Ÿåˆ—é‡Œè·å–ä»»åŠ¡æ‰§è¡Œã€‚å­ä»»åŠ¡æ‰§è¡Œå®Œçš„ç»“æœéƒ½æ”¾åœ¨å¦å¤–ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ä»é˜Ÿåˆ—é‡Œå–æ•°æ®ï¼Œç„¶ååˆå¹¶è¿™äº›æ•°æ®ã€‚ åœ¨Javaçš„Fork/Joinæ¡†æ¶ä¸­ï¼Œä½¿ç”¨ä¸¤ä¸ªç±»å®Œæˆä¸Šè¿°æ“ä½œ â€¢ ForkJoinTask:æˆ‘ä»¬è¦ä½¿ç”¨Fork/Joinæ¡†æ¶ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªForkJoinä»»åŠ¡ã€‚è¯¥ç±»æä¾›äº†åœ¨ä»»åŠ¡ä¸­æ‰§è¡Œforkå’Œjoinçš„æœºåˆ¶ã€‚é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¸éœ€è¦ç›´æ¥é›†æˆForkJoinTaskç±»ï¼Œåªéœ€è¦ç»§æ‰¿å®ƒçš„å­ç±»ï¼ŒFork/Joinæ¡†æ¶æä¾›äº†ä¸¤ä¸ªå­ç±»ï¼š a.RecursiveActionï¼šç”¨äºæ²¡æœ‰è¿”å›ç»“æœçš„ä»»åŠ¡ b.RecursiveTask:ç”¨äºæœ‰è¿”å›ç»“æœçš„ä»»åŠ¡ â€¢ ForkJoinPool:ForkJoinTaskéœ€è¦é€šè¿‡ForkJoinPoolæ¥æ‰§è¡Œ â€¢ RecursiveTask: ç»§æ‰¿åå¯ä»¥å®ç°é€’å½’(è‡ªå·±è°ƒè‡ªå·±)è°ƒç”¨çš„ä»»åŠ¡ Fork/Joinæ¡†æ¶çš„å®ç°åŸç† â€‹ ForkJoinPoolç”±ForkJoinTaskæ•°ç»„å’ŒForkJoinWorkerThreadæ•°ç»„ç»„æˆï¼ŒForkJoinTaskæ•°ç»„è´Ÿè´£å°†å­˜æ”¾ä»¥åŠå°†ç¨‹åºæäº¤ç»™ForkJoinPoolï¼Œè€ŒForkJoinWorkerThreadè´Ÿè´£æ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚ Forkæ–¹æ³• â€‹ Forkæ–¹æ³•çš„å®ç°åŸç†ï¼š å½“æˆ‘ä»¬è°ƒç”¨ForkJoinTaskçš„forkæ–¹æ³•æ—¶ï¼Œç¨‹åºä¼šæŠŠä»»åŠ¡æ”¾åœ¨ForkJoinWorkerThreadçš„pushTaskçš„workQueueä¸­ï¼Œå¼‚æ­¥åœ°æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œç„¶åç«‹å³è¿”å›ç»“æœ 123456public final ForkJoinTask&lt;V&gt; fork() { Thread t; if ((t = Thread.currentThread()) instanceof ForkJoinWorkerThread) ((ForkJoinWorkerThread)t).workQueue.push(this); else ForkJoinPool.common.externalPush(this); return this; } pushTaskæ–¹æ³•æŠŠå½“å‰ä»»åŠ¡å­˜æ”¾åœ¨ForkJoinTaskæ•°ç»„é˜Ÿåˆ—é‡Œã€‚ç„¶åå†è°ƒç”¨ForkJoinPoolçš„signalWork()æ–¹æ³•å”¤é†’æˆ–åˆ›å»ºä¸€ä¸ªå·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚ä»£ç å¦‚ä¸‹ï¼š 123456789101112final void push(ForkJoinTask&lt;?&gt; task) { ForkJoinTask&lt;?&gt;[] a; ForkJoinPool p; int b = base, s = top, n; if ((a = array) != null) { // ignore if queue removed int m = a.length - 1; // fenced write for task visibility U.putOrderedObject(a, ((m &amp; s) &lt;&lt; ASHIFT) + ABASE, task); U.putOrderedInt(this, QTOP, s + 1); if ((n = s - b) &lt;= 1) { if ((p = pool) != null) p.signalWork(p.workQueues, this);//æ‰§è¡Œ } else if (n &gt;= m) growArray(); } } joinæ–¹æ³• Joinæ–¹æ³•çš„ä¸»è¦ä½œç”¨æ˜¯é˜»å¡å½“å‰çº¿ç¨‹å¹¶ç­‰å¾…è·å–ç»“æœã€‚è®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹ForkJoinTaskçš„joinæ–¹æ³•çš„å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456public final V join() { int s; if ((s = doJoin() &amp; DONE_MASK) != NORMAL) reportException(s); return getRawResult(); } å®ƒé¦–å…ˆè°ƒç”¨doJoinæ–¹æ³•ï¼Œé€šè¿‡doJoin()æ–¹æ³•å¾—åˆ°å½“å‰ä»»åŠ¡çš„çŠ¶æ€æ¥åˆ¤æ–­è¿”å›ä»€ä¹ˆç»“æœï¼Œä»»åŠ¡çŠ¶æ€æœ‰4ç§ï¼š å·²å®Œæˆï¼ˆNORMALï¼‰ã€è¢«å–æ¶ˆï¼ˆCANCELLEDï¼‰ã€ä¿¡å·ï¼ˆSIGNALï¼‰å’Œå‡ºç°å¼‚å¸¸ï¼ˆEXCEPTIONALï¼‰ â€¢ å¦‚æœä»»åŠ¡çŠ¶æ€æ˜¯å·²å®Œæˆï¼Œåˆ™ç›´æ¥è¿”å›ä»»åŠ¡ç»“æœã€‚ â€¢ å¦‚æœä»»åŠ¡çŠ¶æ€æ˜¯è¢«å–æ¶ˆï¼Œåˆ™ç›´æ¥æŠ›å‡ºCancellationException â€¢ å¦‚æœä»»åŠ¡çŠ¶æ€æ˜¯æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™ç›´æ¥æŠ›å‡ºå¯¹åº”çš„å¼‚å¸¸ è®©æˆ‘ä»¬åˆ†æä¸€ä¸‹doJoinæ–¹æ³•çš„å®ç° 12345678910111213141516private int doJoin() { int s; Thread t; ForkJoinWorkerThread wt; ForkJoinPool.WorkQueue w; return (s = status) &lt; 0 ? s : ((t = Thread.currentThread()) instanceof ForkJoinWorkerThread) ? (w = (wt = (ForkJoinWorkerThread)t).workQueue). tryUnpush(this) &amp;&amp; (s = doExec()) &lt; 0 ? s : wt.pool.awaitJoin(w, this, 0L) : externalAwaitDone(); } final int doExec() { int s; boolean completed; if ((s = status) &gt;= 0) { try { completed = exec(); } catch (Throwable rex) { return setExceptionalCompletion(rex); } if (completed) s = setCompletion(NORMAL); } return s; } åœ¨doJoin()æ–¹æ³•æµç¨‹å¦‚ä¸‹: é¦–å…ˆé€šè¿‡æŸ¥çœ‹ä»»åŠ¡çš„çŠ¶æ€ï¼Œçœ‹ä»»åŠ¡æ˜¯å¦å·²ç»æ‰§è¡Œå®Œæˆï¼Œå¦‚æœæ‰§è¡Œå®Œæˆï¼Œåˆ™ç›´æ¥è¿”å›ä»»åŠ¡çŠ¶æ€ï¼› å¦‚æœæ²¡æœ‰æ‰§è¡Œå®Œï¼Œåˆ™ä»ä»»åŠ¡æ•°ç»„é‡Œå–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œã€‚ å¦‚æœä»»åŠ¡é¡ºåˆ©æ‰§è¡Œå®Œæˆï¼Œåˆ™è®¾ç½®ä»»åŠ¡çŠ¶æ€ä¸ºNORMALï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ï¼Œåˆ™è®°å½•å¼‚å¸¸ï¼Œå¹¶å°†ä»»åŠ¡çŠ¶æ€è®¾ç½®ä¸ºEXCEPTIONALã€‚ Fork/Joinæ¡†æ¶çš„å¼‚å¸¸å¤„ç† ForkJoinTaskåœ¨æ‰§è¡Œçš„æ—¶å€™å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡åŠæ³•åœ¨ä¸»çº¿ç¨‹é‡Œç›´æ¥æ•è·å¼‚å¸¸ï¼Œæ‰€ä»¥ForkJoinTaskæä¾›äº†isCompletedAbnormally()æ–¹æ³•æ¥æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å·²ç»æŠ›å‡ºå¼‚å¸¸æˆ–å·²ç»è¢«å–æ¶ˆäº†ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ForkJoinTaskçš„getExceptionæ–¹æ³•è·å–å¼‚å¸¸ã€‚ getExceptionæ–¹æ³•è¿”å›Throwableå¯¹è±¡ï¼Œå¦‚æœä»»åŠ¡è¢«å–æ¶ˆäº†åˆ™è¿”å›CancellationExceptionã€‚å¦‚æœä»»åŠ¡æ²¡æœ‰å®Œæˆæˆ–è€…æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸åˆ™è¿”å›nullã€‚ å…¥é—¨æ¡ˆä¾‹ åœºæ™¯: ç”Ÿæˆä¸€ä¸ªè®¡ç®—ä»»åŠ¡ï¼Œè®¡ç®—1+2+3.........+1000,æ¯100ä¸ªæ•°åˆ‡åˆ†ä¸€ä¸ªå­ä»»åŠ¡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859package com.atguigu.forkjoin;import java.util.concurrent.*;class MyTask extends RecursiveTask&lt;Integer&gt; { //æ‹†åˆ†å·®å€¼ä¸èƒ½è¶…è¿‡10ï¼Œè®¡ç®—10ä»¥å†…è¿ç®— private static final Integer VALUE = 10; private int begin ;//æ‹†åˆ†å¼€å§‹å€¼ private int end;//æ‹†åˆ†ç»“æŸå€¼ private int result ; //è¿”å›ç»“æœ //åˆ›å»ºæœ‰å‚æ•°æ„é€  public MyTask(int begin,int end) { this.begin = begin; this.end = end; } //æ‹†åˆ†å’Œåˆå¹¶è¿‡ç¨‹ @Override protected Integer compute() { //åˆ¤æ–­ç›¸åŠ ä¸¤ä¸ªæ•°å€¼æ˜¯å¦å¤§äº10 if((end-begin)&lt;=VALUE) { //ç›¸åŠ æ“ä½œ for (int i = begin; i &lt;=end; i++) { result = result+i; } } else {//è¿›ä¸€æ­¥æ‹†åˆ† //è·å–ä¸­é—´å€¼ int middle = (begin+end)/2; //æ‹†åˆ†å·¦è¾¹ MyTask task01 = new MyTask(begin,middle); //æ‹†åˆ†å³è¾¹ MyTask task02 = new MyTask(middle+1,end); //è°ƒç”¨æ–¹æ³•æ‹†åˆ† task01.fork(); task02.fork(); //åˆå¹¶ç»“æœ result = task01.join()+task02.join(); } return result; }}public class ForkJoinDemo { public static void main(String[] args) throws ExecutionException, InterruptedException { //åˆ›å»ºMyTaskå¯¹è±¡ MyTask myTask = new MyTask(0,100); //åˆ›å»ºåˆ†æ”¯åˆå¹¶æ± å¯¹è±¡ ForkJoinPool forkJoinPool = new ForkJoinPool(); ForkJoinTask&lt;Integer&gt; forkJoinTask = forkJoinPool.submit(myTask); //è·å–æœ€ç»ˆåˆå¹¶ä¹‹åç»“æœ Integer result = forkJoinTask.get(); System.out.println(result); //å…³é—­æ± å¯¹è±¡ forkJoinPool.shutdown(); }} CompletableFuture CompletableFutureç®€ä»‹ åŒæ­¥ã€ä¸åœ¨ç­‰å¾…ã€‘ã€å¼‚æ­¥ã€ä¸åœ¨å…ˆåšå…¶ä»–çš„ã€‘ CompletableFutureåœ¨Javaé‡Œé¢è¢«ç”¨äºå¼‚æ­¥ç¼–ç¨‹ï¼Œå¼‚æ­¥é€šå¸¸æ„å‘³ç€éé˜»å¡ï¼Œå¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„ä»»åŠ¡å•ç‹¬è¿è¡Œåœ¨ä¸ä¸»çº¿ç¨‹åˆ†ç¦»çš„å…¶ä»–çº¿ç¨‹ä¸­ï¼Œå¹¶ä¸”é€šè¿‡å›è°ƒå¯ä»¥åœ¨ä¸»çº¿ç¨‹ä¸­å¾—åˆ°å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€ï¼Œæ˜¯å¦å®Œæˆï¼Œå’Œæ˜¯å¦å¼‚å¸¸ç­‰ä¿¡æ¯ã€‚ CompletableFutureå®ç°äº†Future, CompletionStageæ¥å£ï¼Œå®ç°äº†Futureæ¥å£å°±å¯ä»¥å…¼å®¹ç°åœ¨æœ‰çº¿ç¨‹æ± æ¡†æ¶ï¼Œè€ŒCompletionStageæ¥å£æ‰æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„æ¥å£æŠ½è±¡ï¼Œé‡Œé¢å®šä¹‰å¤šç§å¼‚æ­¥æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸¤è€…é›†åˆï¼Œä»è€Œæ‰“é€ å‡ºäº†å¼ºå¤§çš„CompletableFutureç±»ã€‚ Futureä¸CompletableFuture Futrueåœ¨Javaé‡Œé¢ï¼Œé€šå¸¸ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡çš„å¼•ç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬å°†ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± é‡Œé¢ï¼Œç„¶åæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªFutrueï¼Œåœ¨Futureé‡Œé¢æœ‰isDoneæ–¹æ³•æ¥ åˆ¤æ–­ä»»åŠ¡æ˜¯å¦å¤„ç†ç»“æŸï¼Œè¿˜æœ‰getæ–¹æ³•å¯ä»¥ä¸€ç›´é˜»å¡ç›´åˆ°ä»»åŠ¡ç»“æŸç„¶åè·å–ç»“æœï¼Œä½†æ•´ä½“æ¥è¯´è¿™ç§æ–¹å¼ï¼Œè¿˜æ˜¯åŒæ­¥çš„ï¼Œå› ä¸ºéœ€è¦å®¢æˆ·ç«¯ä¸æ–­é˜»å¡ç­‰å¾…æˆ–è€…ä¸æ–­è½®è¯¢æ‰èƒ½çŸ¥é“ä»»åŠ¡æ˜¯å¦å®Œæˆã€‚ Futureçš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰ä¸æ”¯æŒæ‰‹åŠ¨å®Œæˆ æˆ‘æäº¤äº†ä¸€ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯æ‰§è¡Œå¤ªæ…¢äº†ï¼Œæˆ‘é€šè¿‡å…¶ä»–è·¯å¾„å·²ç»è·å–åˆ°äº†ä»»åŠ¡ç»“æœï¼Œç°åœ¨æ²¡æ³•æŠŠè¿™ä¸ªä»»åŠ¡ç»“æœé€šçŸ¥åˆ°æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼Œæ‰€ä»¥å¿…é¡»ä¸»åŠ¨å–æ¶ˆæˆ–è€…ä¸€ç›´ç­‰å¾…å®ƒæ‰§è¡Œå®Œæˆ ï¼ˆ2ï¼‰ä¸æ”¯æŒè¿›ä¸€æ­¥çš„éé˜»å¡è°ƒç”¨ é€šè¿‡Futureçš„getæ–¹æ³•ä¼šä¸€ç›´é˜»å¡åˆ°ä»»åŠ¡å®Œæˆï¼Œä½†æ˜¯æƒ³åœ¨è·å–ä»»åŠ¡ä¹‹åæ‰§è¡Œé¢å¤–çš„ä»»åŠ¡ï¼Œå› ä¸ºFutureä¸æ”¯æŒå›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥æ— æ³•å®ç°è¿™ä¸ªåŠŸèƒ½ ï¼ˆ3ï¼‰ä¸æ”¯æŒé“¾å¼è°ƒç”¨ å¯¹äºFutureçš„æ‰§è¡Œç»“æœï¼Œæˆ‘ä»¬æƒ³ç»§ç»­ä¼ åˆ°ä¸‹ä¸€ä¸ªFutureå¤„ç†ä½¿ç”¨ï¼Œä»è€Œå½¢æˆä¸€ä¸ªé“¾å¼çš„piplineè°ƒç”¨ï¼Œè¿™åœ¨Futureä¸­æ˜¯æ²¡æ³•å®ç°çš„ã€‚ ï¼ˆ4ï¼‰ä¸æ”¯æŒå¤šä¸ªFutureåˆå¹¶ æ¯”å¦‚æˆ‘ä»¬æœ‰10ä¸ªFutureå¹¶è¡Œæ‰§è¡Œï¼Œæˆ‘ä»¬æƒ³åœ¨æ‰€æœ‰çš„Futureè¿è¡Œå®Œæ¯•ä¹‹åï¼Œæ‰§è¡ŒæŸäº›å‡½æ•°ï¼Œæ˜¯æ²¡æ³•é€šè¿‡Futureå®ç°çš„ã€‚ ï¼ˆ5ï¼‰ä¸æ”¯æŒå¼‚å¸¸å¤„ç† Futureçš„APIæ²¡æœ‰ä»»ä½•çš„å¼‚å¸¸å¤„ç†çš„apiï¼Œæ‰€ä»¥åœ¨å¼‚æ­¥è¿è¡Œæ—¶ï¼Œå¦‚æœå‡ºäº†é—®é¢˜æ˜¯ä¸å¥½å®šä½çš„ã€‚ CompletableFutureå…¥é—¨ ä½¿ç”¨CompletableFuture åœºæ™¯:ä¸»çº¿ç¨‹é‡Œé¢åˆ›å»ºä¸€ä¸ªCompletableFutureï¼Œç„¶åä¸»çº¿ç¨‹è°ƒç”¨getæ–¹æ³•ä¼šé˜»å¡ï¼Œæœ€åæˆ‘ä»¬åœ¨ä¸€ä¸ªå­çº¿ç¨‹ä¸­ä½¿å…¶ç»ˆæ­¢ã€‚ 123456789101112131415/** * ä¸»çº¿ç¨‹é‡Œé¢åˆ›å»ºä¸€ä¸ªCompletableFutureï¼Œç„¶åä¸»çº¿ç¨‹è°ƒç”¨getæ–¹æ³•ä¼šé˜»å¡ï¼Œæœ€åæˆ‘ä»¬åœ¨ä¸€ä¸ªå­çº¿ç¨‹ä¸­ä½¿å…¶ç»ˆæ­¢ * @param args */ public static void main(String[] args) throws Exception{ CompletableFuture&lt;String&gt; future = new CompletableFuture&lt;&gt;(); new Thread(() -&gt; { try{ System.out.println(Thread.currentThread().getName() + &quot;å­çº¿ç¨‹å¼€å§‹å¹²æ´»&quot;); //å­çº¿ç¨‹ç¡5ç§’ Thread.sleep(5000); //åœ¨å­çº¿ç¨‹ä¸­å®Œæˆä¸»çº¿ç¨‹ future.complete(&quot;success&quot;); }catch (Exception e){ e.printStackTrace(); } }, &quot;A&quot;).start(); //ä¸»çº¿ç¨‹è°ƒç”¨getæ–¹æ³•é˜»å¡ System.out.println(&quot;ä¸»çº¿ç¨‹è°ƒç”¨getæ–¹æ³•è·å–ç»“æœä¸º: &quot; + future.get()); System.out.println(&quot;ä¸»çº¿ç¨‹å®Œæˆ,é˜»å¡ç»“æŸ!!!!!!&quot;); } æ²¡æœ‰è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡ 12345678910111213/** * æ²¡æœ‰è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡ * @param args */ public static void main(String[] args) throws Exception{ System.out.println(&quot;ä¸»çº¿ç¨‹å¼€å§‹&quot;); //è¿è¡Œä¸€ä¸ªæ²¡æœ‰è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡ CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt; { try { System.out.println(&quot;å­çº¿ç¨‹å¯åŠ¨å¹²æ´»&quot;); Thread.sleep(5000); System.out.println(&quot;å­çº¿ç¨‹å®Œæˆ&quot;); } catch (Exception e) { e.printStackTrace(); }}); //ä¸»çº¿ç¨‹é˜»å¡ future.get(); System.out.println(&quot;ä¸»çº¿ç¨‹ç»“æŸ&quot;); } æœ‰è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡ 1234567891011121314151617/** * æ²¡æœ‰è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡ * @param args */ public static void main(String[] args) throws Exception { System.out.println(&quot;ä¸»çº¿ç¨‹å¼€å§‹&quot;); //è¿è¡Œä¸€ä¸ªæœ‰è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡ CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; { try { System.out.println(&quot;å­çº¿ç¨‹å¼€å§‹ä»»åŠ¡&quot;); Thread.sleep(5000); } catch (Exception e) { e.printStackTrace(); } return &quot;å­çº¿ç¨‹å®Œæˆäº†!&quot;; }); //ä¸»çº¿ç¨‹é˜»å¡ String s = future.get(); System.out.println(&quot;ä¸»çº¿ç¨‹ç»“æŸ, å­çº¿ç¨‹çš„ç»“æœä¸º:&quot; + s); } çº¿ç¨‹ä¾èµ– å½“ä¸€ä¸ªçº¿ç¨‹ä¾èµ–å¦ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ thenApply æ–¹æ³•æ¥æŠŠè¿™ä¸¤ä¸ªçº¿ç¨‹ä¸²è¡ŒåŒ–ã€‚ 123456789101112131415161718192021private static Integer num = 10; /** * å…ˆå¯¹ä¸€ä¸ªæ•°åŠ 10,ç„¶åå–å¹³æ–¹ * @param args */ public static void main(String[] args) throws Exception { System.out.println(&quot;ä¸»çº¿ç¨‹å¼€å§‹&quot;); CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(() -&gt; { try { System.out.println(&quot;åŠ 10ä»»åŠ¡å¼€å§‹&quot;); num += 10; } catch (Exception e) { e.printStackTrace(); } return num; }).thenApply(integer -&gt; { return num * num; }); Integer integer = future.get(); System.out.println(&quot;ä¸»çº¿ç¨‹ç»“æŸ, å­çº¿ç¨‹çš„ç»“æœä¸º:&quot; + integer); } æ¶ˆè´¹å¤„ç†ç»“æœ thenAccept æ¶ˆè´¹å¤„ç†ç»“æœ, æ¥æ”¶ä»»åŠ¡çš„å¤„ç†ç»“æœï¼Œå¹¶æ¶ˆè´¹å¤„ç†ï¼Œæ— è¿”å›ç»“æœã€‚ 12345678910111213141516171819public static void main(String[] args) throws Exception { System.out.println(&quot;ä¸»çº¿ç¨‹å¼€å§‹&quot;); CompletableFuture.supplyAsync(() -&gt; { try { System.out.println(&quot;åŠ 10ä»»åŠ¡å¼€å§‹&quot;); num += 10; } catch (Exception e) { e.printStackTrace(); } return num; }).thenApply(integer -&gt; { return num * num; }).thenAccept(new Consumer&lt;Integer&gt;() { @Override public void accept(Integer integer) { System.out.println(&quot;å­çº¿ç¨‹å…¨éƒ¨å¤„ç†å®Œæˆ,æœ€åè°ƒç”¨äº†accept,ç»“æœä¸º:&quot; + integer); } }); } å¼‚å¸¸å¤„ç† exceptionallyå¼‚å¸¸å¤„ç†,å‡ºç°å¼‚å¸¸æ—¶è§¦å‘ 12345678910111213public static void main(String[] args) throws Exception { System.out.println(&quot;ä¸»çº¿ç¨‹å¼€å§‹&quot;); CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(() -&gt; { int i = 1 / 0; System.out.println(&quot;åŠ 10ä»»åŠ¡å¼€å§‹&quot;); num += 10; return num; }).exceptionally(ex -&gt; { System.out.println(ex.getMessage()); return -1; }); System.out.println(future.get()); } handleç±»ä¼¼äºthenAccept/thenRunæ–¹æ³•,æ˜¯æœ€åä¸€æ­¥çš„å¤„ç†è°ƒç”¨,ä½†æ˜¯åŒæ—¶å¯ä»¥å¤„ç†å¼‚å¸¸ 123456789101112131415161718public static void main(String[] args) throws Exception { System.out.println(&quot;ä¸»çº¿ç¨‹å¼€å§‹&quot;); CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(() -&gt; { System.out.println(&quot;åŠ 10ä»»åŠ¡å¼€å§‹&quot;); num += 10; return num; }).handle((i, ex) -&gt; { System.out.println(&quot;è¿›å…¥handleæ–¹æ³•&quot;); if (ex != null) { System.out.println(&quot;å‘ç”Ÿäº†å¼‚å¸¸,å†…å®¹ä¸º:&quot; + ex.getMessage()); return -1; } else { System.out.println(&quot;æ­£å¸¸å®Œæˆ,å†…å®¹ä¸º: &quot; + i); return i; } }); System.out.println(future.get()); } ç»“æœåˆå¹¶ thenComposeåˆå¹¶ä¸¤ä¸ªæœ‰ä¾èµ–å…³ç³»çš„CompletableFuturesçš„æ‰§è¡Œç»“æœ 123456789101112131415public static void main(String[] args) throws Exception { System.out.println(&quot;ä¸»çº¿ç¨‹å¼€å§‹&quot;); //ç¬¬ä¸€æ­¥åŠ 10 CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(() -&gt; { System.out.println(&quot;åŠ 10ä»»åŠ¡å¼€å§‹&quot;); num += 10; return num; }); //åˆå¹¶ CompletableFuture&lt;Integer&gt; future1 = future.thenCompose(i -&gt; //å†æ¥ä¸€ä¸ªCompletableFuture CompletableFuture.supplyAsync(() -&gt; { return i + 1; })); System.out.println(future.get()); System.out.println(future1.get());} thenCombineåˆå¹¶ä¸¤ä¸ªæ²¡æœ‰ä¾èµ–å…³ç³»çš„CompletableFuturesä»»åŠ¡ 1234567891011121314151617181920212223public static void main(String[] args) throws Exception { System.out.println(&quot;ä¸»çº¿ç¨‹å¼€å§‹&quot;); CompletableFuture&lt;Integer&gt; job1 = CompletableFuture.supplyAsync(() -&gt; { System.out.println(&quot;åŠ 10ä»»åŠ¡å¼€å§‹&quot;); num += 10; return num; }); CompletableFuture&lt;Integer&gt; job2 = CompletableFuture.supplyAsync(() -&gt; { System.out.println(&quot;ä¹˜ä»¥10ä»»åŠ¡å¼€å§‹&quot;); num = num * 10; return num; }); //åˆå¹¶ä¸¤ä¸ªç»“æœ CompletableFuture&lt;Object&gt; future = job1.thenCombine(job2, new BiFunction&lt;Integer, Integer, List&lt;Integer&gt;&gt;() { @Override public List&lt;Integer&gt; apply(Integer a, Integer b) { List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(a); list.add(b); return list; } }); System.out.println(&quot;åˆå¹¶ç»“æœä¸º:&quot; + future.get()); } åˆå¹¶å¤šä¸ªä»»åŠ¡çš„ç»“æœallOfä¸anyOf allOf: ä¸€ç³»åˆ—ç‹¬ç«‹çš„futureä»»åŠ¡ï¼Œç­‰å…¶æ‰€æœ‰çš„ä»»åŠ¡æ‰§è¡Œå®Œååšä¸€äº›äº‹æƒ… 123456789101112131415161718192021222324252627282930313233/** * å…ˆå¯¹ä¸€ä¸ªæ•°åŠ 10,ç„¶åå–å¹³æ–¹ * @param args */ public static void main(String[] args) throws Exception { System.out.println(&quot;ä¸»çº¿ç¨‹å¼€å§‹&quot;); List&lt;CompletableFuture&gt; list = new ArrayList&lt;&gt;(); CompletableFuture&lt;Integer&gt; job1 = CompletableFuture.supplyAsync(() -&gt; { System.out.println(&quot;åŠ 10ä»»åŠ¡å¼€å§‹&quot;); num += 10; return num; }); list.add(job1); CompletableFuture&lt;Integer&gt; job2 = CompletableFuture.supplyAsync(() -&gt; { System.out.println(&quot;ä¹˜ä»¥10ä»»åŠ¡å¼€å§‹&quot;); num = num * 10; return num; }); list.add(job2); CompletableFuture&lt;Integer&gt; job3 = CompletableFuture.supplyAsync(() -&gt; { System.out.println(&quot;å‡ä»¥10ä»»åŠ¡å¼€å§‹&quot;); num = num * 10; return num; }); list.add(job3); CompletableFuture&lt;Integer&gt; job4 = CompletableFuture.supplyAsync(() -&gt; { System.out.println(&quot;é™¤ä»¥10ä»»åŠ¡å¼€å§‹&quot;); num = num * 10; return num; }); list.add(job4); //å¤šä»»åŠ¡åˆå¹¶ List&lt;Integer&gt; collect = list.stream().map(CompletableFuture&lt;Integer&gt;::join).collect(Collectors.toList()); System.out.println(collect); } anyOf: åªè¦åœ¨å¤šä¸ªfutureé‡Œé¢æœ‰ä¸€ä¸ªè¿”å›ï¼Œæ•´ä¸ªä»»åŠ¡å°±å¯ä»¥ç»“æŸï¼Œè€Œä¸éœ€è¦ç­‰åˆ°æ¯ä¸€ä¸ªfutureç»“æŸ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/** * å…ˆå¯¹ä¸€ä¸ªæ•°åŠ 10,ç„¶åå–å¹³æ–¹ * @param args */ public static void main(String[] args) throws Exception { System.out.println(&quot;ä¸»çº¿ç¨‹å¼€å§‹&quot;); CompletableFuture&lt;Integer&gt;[] futures = new CompletableFuture[4]; CompletableFuture&lt;Integer&gt; job1 = CompletableFuture.supplyAsync(() -&gt; { try { Thread.sleep(5000); System.out.println(&quot;åŠ 10ä»»åŠ¡å¼€å§‹&quot;); num += 10; return num; } catch (Exception e) { return 0; } }); futures[0] = job1; CompletableFuture&lt;Integer&gt; job2 = CompletableFuture.supplyAsync(() -&gt; { try { Thread.sleep(2000); System.out.println(&quot;ä¹˜ä»¥10ä»»åŠ¡å¼€å§‹&quot;); num = num * 10; return num; } catch (Exception e) { return 1; } }); futures[1] = job2; CompletableFuture&lt;Integer&gt; job3 = CompletableFuture.supplyAsync(() -&gt; { try { Thread.sleep(3000); System.out.println(&quot;å‡ä»¥10ä»»åŠ¡å¼€å§‹&quot;); num = num * 10; return num; } catch (Exception e) { return 2; } }); futures[2] = job3; CompletableFuture&lt;Integer&gt; job4 = CompletableFuture.supplyAsync(() -&gt; { try { Thread.sleep(4000); System.out.println(&quot;é™¤ä»¥10ä»»åŠ¡å¼€å§‹&quot;); num = num * 10; return num; } catch (Exception e) { return 3; } }); futures[3] = job4; CompletableFuture&lt;Object&gt; future = CompletableFuture.anyOf(futures); System.out.println(future.get()); } åå°„ è·å–ç±»çš„å­—èŠ‚ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990package pers.lxl.mylearnproject.javase.reflection;import java.lang.reflect.Field;import java.util.Arrays;/** * ä¸çŸ¥å¯¹è±¡æƒ…å†µè°ƒç”¨å¯¹è±¡æ–¹æ³•ç­‰ï¼Œé€šè¿‡Classå®ä¾‹è·å–classä¿¡æ¯çš„æ–¹æ³•ç§°ä¸ºåå°„ï¼ˆReflectionï¼‰ * * @author lxl */public class ReClass { public static void main(String[] args) {/** 1.è·å–ä¸€ä¸ªclassçš„Classå®ä¾‹çš„ä¸‰ä¸ªæ–¹æ³•ï¼š æ–¹æ³•ä¸€ï¼šclassçš„é™æ€å˜é‡.classï¼š Class cls = String.class; æ–¹æ³•äºŒï¼šå®ä¾‹å˜é‡.getClass()ï¼š String s = &quot;Hello&quot;; Class cls1 = s.getClass(); æ–¹æ³•ä¸‰ï¼šé™æ€æ–¹æ³•Class.forName(classçš„å®Œæ•´ç±»å)ï¼š åªä¼šè®©é™æ€ä»£ç å—æ‰§è¡Œ Class cls2 = Class.forName(&quot;java.lang.String&quot;); ç”¨instanceofä¸ä½†åŒ¹é…æŒ‡å®šç±»å‹ï¼Œè¿˜åŒ¹é…æŒ‡å®šç±»å‹çš„å­ç±»ã€‚è€Œç”¨==åˆ¤æ–­classå®ä¾‹å¯ä»¥ç²¾ç¡®åœ°åˆ¤æ–­æ•°æ®ç±»å‹ï¼Œä½†ä¸èƒ½ä½œå­ç±»å‹æ¯”è¾ƒ*/ printClassInfo(&quot;&quot;.getClass()); printClassInfo(Runnable.class); printClassInfo(java.time.Month.class); printClassInfo(String[].class); printClassInfo(int.class);// ReflectLearn reflectLearn=new ReflectLearn(); printClassInfo(ReflectLearn.class); } static void printClassInfo(Class cls) {// å…ˆè·å–ç±»ä¹‹åæ‰èƒ½è·å–ç±»ä¿¡æ¯// è·å–ç±»ä¿¡æ¯ System.out.println(&quot;[&quot; + cls.getSimpleName() + &quot;] begin ==================================&quot;); System.out.println(&quot;Class name: &quot; + cls.getName()); System.out.println(&quot;Simple name: &quot; + cls.getSimpleName()); if (cls.getPackage() != null) { System.out.println(&quot;Package name: &quot; + cls.getPackage().getName()); } System.out.println(&quot;is interface: &quot; + cls.isInterface()); System.out.println(&quot;is enum: &quot; + cls.isEnum()); System.out.println(&quot;is array: &quot; + cls.isArray()); System.out.println(&quot;is primitive: &quot; + cls.isPrimitive());// æ–¹æ³•ä¿¡æ¯// .newInstance() æ— å‚æ„é€ ï¼Œä¸å­˜åœ¨æŠ›å‡ºå¼‚å¸¸java.lang.InstantiationException try { System.out.println(&quot;æ— å‚æ„é€ ï¼š &quot;+cls.newInstance()); } catch (InstantiationException e) { System.out.println(&quot;æ²¡æœ‰æ— å‚æ„é€ é€ æˆInstantiationException&quot;); } catch (IllegalAccessException e) { System.out.println(&quot;æ²¡æœ‰æ— å‚æ„é€ é€ æˆIllegalAccessException&quot;); } System.out.println(&quot;æ‰€æœ‰å®ä¾‹æ–¹æ³•ï¼š &quot;+cls.getDeclaredMethods());// System.out.println(&quot;æ ¹æ®åå­—è·å–æ–¹æ³•ï¼š &quot;+ Arrays.toString(cls.getDeclaredMethods(&quot;methodShow&quot;))); System.out.println(&quot;æ‰€æœ‰æ„é€ æ–¹æ³•ï¼š &quot;+ Arrays.toString(cls.getDeclaredConstructors()));// å±æ€§ä¿¡æ¯ System.out.println(&quot;public Fields: &quot; + Arrays.toString(cls.getFields())); System.out.println(&quot;Fields public Name: &quot; + cls.getName()); System.out.println(&quot;All Fields: &quot; + Arrays.toString(cls.getDeclaredFields())); try { System.out.println(&quot;Get Fields By Name: &quot; + Arrays.toString(new Field[]{cls.getDeclaredField(&quot;publicFiled&quot;)})); } catch (NoSuchFieldException e) { System.out.println(&quot;æ²¡æœ‰è¿™æ ·ä¸€ä¸ªå±æ€§æŠ¥NoSuchFieldException&quot;); } System.out.println(&quot;[&quot; + cls.getSimpleName() + &quot;] end ==================================&quot; + &quot;\\n&quot;); }}class ReflectLearn { public String publicFiled; private String privateFiled; public int methodShow(){ return 1; }} IO ç£ç›˜æ“ä½œ Fileå¯¹è±¡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798import java.io.File;import java.io.FilenameFilter;import java.io.IOException;import java.nio.file.Path;import java.nio.file.Paths;/**ç£ç›˜æ“ä½œ**/public class FileObject { public static void main(String[] args) throws IOException {// å³ä½¿ä¼ å…¥çš„æ–‡ä»¶æˆ–ç›®å½•ä¸å­˜åœ¨ï¼Œä»£ç ä¹Ÿä¸ä¼šå‡ºé”™ï¼Œå› ä¸ºæ„é€ ä¸€ä¸ªFileå¯¹è±¡ï¼Œå¹¶ä¸ä¼šå¯¼è‡´ä»»ä½•ç£ç›˜æ“ä½œ,è°ƒç”¨æ–¹æ³•æ—¶æ‰ä¼šç£ç›˜æ“ä½œ //ç»å¯¹è·¯å¾„æ˜¯ä»¥æ ¹ç›®å½•å¼€å¤´çš„å®Œæ•´è·¯å¾„Javaå­—ç¬¦ä¸²ä¸­ä»¥//ä»£è¡¨/// Fileè¡¨ç¤ºæ–‡ä»¶æˆ–ç›®å½• //\\u202Aç³»ç»Ÿå¤åˆ¶äº§ç”Ÿ File file = new File(&quot;C:\\\\Users\\\\Administrator\\\\Desktop\\\\lixianglun\\\\fileTest.txt&quot;); //ç›¸å¯¹è·¯å¾„ï¼ˆå¯ä»¥ç”¨.è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œ..è¡¨ç¤ºä¸Šçº§ç›®å½•ï¼‰ç»å¯¹è·¯å¾„å»æ‰å½“å‰ç›®å½• File afile = new File(&quot;..\\\\fileTest.txt&quot;); File catalog=new File(&quot;C:\\\\Users\\\\Administrator\\\\Desktop&quot;); System.out.println(file); //è¿”å›æ„é€ æ–¹æ³•ä¼ å…¥çš„è·¯å¾„ System.out.println(file.getPath()); //è¿”å›ç»å¯¹è·¯å¾„ System.out.println(file.getAbsolutePath()); //è¿”å›çš„æ˜¯è§„èŒƒè·¯å¾„ã€‚ System.out.println(afile.getCanonicalPath()); //æ ¹æ®å½“å‰å¹³å°æ‰“å°&quot;\\&quot;æˆ–&quot;/&quot; System.out.println(File.separator); System.out.println(file.isFile()); //åˆ¤æ–­å½“å‰æ–‡ä»¶ï¼Œç›®å½•æ˜¯å¦å­˜åœ¨ System.out.println(file.isDirectory()); System.out.println(file.canRead()); System.out.println(file.canWrite()); System.out.println(file.canExecute()); System.out.println(afile.length()); //addã€delete// if (file.createNewFile()) {// // æ–‡ä»¶åˆ›å»ºæˆåŠŸ:// // TOD O:TODOæäº¤ä»£ç ä¼šæé†’// if (file.delete()) {// // åˆ é™¤æ–‡ä»¶æˆåŠŸ:// }// }// é€’å½’åˆ—å‡ºç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶// public static void listAllFiles(File dir) {// if (dir == null || !dir.exists()) {// return;// }// if (dir.isFile()) {// System.out.println(dir.getName());// return;// }// for (File file : dir.listFiles()) {// listAllFiles(file);// }//}//æœ‰äº›æ—¶å€™ï¼Œç¨‹åºéœ€è¦è¯»å†™ä¸€äº›ä¸´æ—¶æ–‡ä»¶ï¼ŒFileå¯¹è±¡æä¾›äº†createTempFile()æ¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œä»¥åŠdeleteOnExit()åœ¨JVMé€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤è¯¥æ–‡ä»¶ã€‚ System.out.println(catalog.list()); //ç›®å½•ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½•å System.out.println(catalog.listFiles()); //listFiles()æä¾›äº†ä¸€ç³»åˆ—é‡è½½æ–¹æ³•ï¼Œå¯ä»¥è¿‡æ»¤ä¸æƒ³è¦çš„æ–‡ä»¶å’Œç›®å½• // ä»…åˆ—å‡º.exeæ–‡ä»¶ File[] fs2 = catalog.listFiles(new FilenameFilter() { @Override public boolean accept(File dir, String name) { return name.endsWith(&quot;.exe&quot;); // è¿”å›trueè¡¨ç¤ºæ¥å—è¯¥æ–‡ä»¶ } }); printFiles(fs2); } /**boolean mkdir()ï¼šåˆ›å»ºå½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼› //boolean mkdirs()ï¼šåˆ›å»ºå½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼Œå¹¶åœ¨å¿…è¦æ—¶å°†ä¸å­˜åœ¨çš„çˆ¶ç›®å½•ä¹Ÿåˆ›å»ºå‡ºæ¥ï¼› //boolean delete()ï¼šåˆ é™¤å½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼Œå½“å‰ç›®å½•å¿…é¡»ä¸ºç©ºæ‰èƒ½åˆ é™¤æˆåŠŸã€‚*/ static void printFiles(File[] files) { System.out.println(&quot;==========&quot;); if (files != null) { for (File f : files) { System.out.println(f); } } System.out.println(&quot;==========&quot;); // æ„é€ ä¸€ä¸ªPathå¯¹è±¡ Path p1 = Paths.get(&quot;.&quot;, &quot;project&quot;, &quot;study&quot;); System.out.println(p1); // è½¬æ¢ä¸ºç»å¯¹è·¯å¾„ Path p2 = p1.toAbsolutePath(); System.out.println(p2); // è½¬æ¢ä¸ºè§„èŒƒè·¯å¾„ Path p3 = p2.normalize(); System.out.println(p3); // è½¬æ¢ä¸ºFileå¯¹è±¡ File f = p3.toFile(); System.out.println(f); // å¯ä»¥ç›´æ¥éå†Path for (Path p : Paths.get(&quot;src/main&quot;).toAbsolutePath()) { System.out.println(&quot; &quot; + p); } }} å­—èŠ‚æ“ä½œ InputStream 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273import java.io.File;import java.io.FileInputStream;import java.io.IOException;import java.io.InputStream;/**InputStreamå¹¶ä¸æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒæ˜¯æ‰€æœ‰è¾“å…¥æµçš„è¶…ç±»ã€‚è¿™ä¸ªæŠ½è±¡ç±»å®šä¹‰çš„ä¸€ä¸ªæœ€é‡è¦çš„æ–¹æ³•å°±æ˜¯int read()ï¼Œç­¾åå¦‚ä¸‹ï¼špublic abstract int read() throws IOException;è¿™ä¸ªæ–¹æ³•ä¼šè¯»å–è¾“å…¥æµçš„ä¸‹ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶è¿”å›å­—èŠ‚è¡¨ç¤ºçš„intå€¼ï¼ˆ0~255ï¼‰ã€‚å¦‚æœå·²è¯»åˆ°æœ«å°¾ï¼Œè¿”å›-1è¡¨ç¤ºä¸èƒ½ç»§ç»­è¯»å–äº†ã€‚ * @author lxl*/public class InputStreamL { public static void main(String[] args) throws IOException { //inputStreamå­—èŠ‚è¾“å…¥æµï¼ŒæŠ½è±¡ç±»ï¼Œåªæä¾›æ–¹æ³•å£°æ˜ï¼Œä¸æä¾›å…·ä½“å®ç° // åˆ›å»ºä¸€ä¸ªFileInputStreamå¯¹è±¡: InputStream inputStream = new FileInputStream(&quot;fileTest.txt&quot;); for (; ; ) {//æ­»å¾ªç¯ï¼Œæ¯”whileï¼ˆtrueï¼‰æ›´å¥½ï¼Œå› ä¸ºç¼–è¯‘åæŒ‡ä»¤æ›´å°‘ï¼Œè€Œä¸”æ²¡æœ‰åˆ¤æ–­è·³è½¬ï¼Œæ›´åŠ ç®€æ´ // åå¤è°ƒç”¨read()æ–¹æ³•ï¼Œç›´åˆ°è¿”å›-1 int n = inputStream.read(); if (n == -1) { break; } // æ‰“å°byteçš„å€¼ System.out.println(n); } inputStream.close(); // å…³é—­æµé‡Šæ”¾å¯¹åº”çš„åº•å±‚èµ„æºï¼Œä¾¿è®©æ“ä½œç³»ç»ŸæŠŠèµ„æºé‡Šæ”¾æ‰ï¼Œå¦åˆ™ï¼Œåº”ç”¨ç¨‹åºå ç”¨çš„èµ„æºä¼šè¶Šæ¥è¶Šå¤šï¼Œä¸ä½†ç™½ç™½å ç”¨å†…å­˜ï¼Œè¿˜ä¼šå½±å“å…¶ä»–åº”ç”¨ç¨‹åºçš„è¿è¡Œã€‚// åˆ©ç”¨ç¼“å†²åŒºä¸€æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚ try (InputStream input = new FileInputStream(&quot;fileTest.txt&quot;)) { // å®šä¹‰1000ä¸ªå­—èŠ‚å¤§å°çš„ç¼“å†²åŒº: byte[] buffer = new byte[1000]; int n; // è¯»å–åˆ°ç¼“å†²åŒº,read()æ–¹æ³•æ˜¯é˜»å¡çš„ï¼ˆBlockingï¼‰ï¼Œå¿…é¡»ç­‰å¾…read()æ–¹æ³•è¿”å›æ‰èƒ½æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç  while ((n = input.read(buffer)) != -1) { System.out.println(&quot;read &quot; + n + &quot; bytes.&quot;); } } try { //å‡†å¤‡æ–‡ä»¶lol.txtå…¶ä¸­çš„å†…å®¹æ˜¯ABï¼Œå¯¹åº”çš„ASCIIåˆ†åˆ«æ˜¯65 66 File f =new File(&quot;fileTest.txt&quot;); //åˆ›å»ºåŸºäºæ–‡ä»¶çš„è¾“å…¥æµ FileInputStream fis =new FileInputStream(f); //åˆ›å»ºå­—èŠ‚æ•°ç»„ï¼Œå…¶é•¿åº¦å°±æ˜¯æ–‡ä»¶çš„é•¿åº¦ byte[] all =new byte[(int) f.length()]; //ä»¥å­—èŠ‚æµçš„å½¢å¼è¯»å–æ–‡ä»¶æ‰€æœ‰å†…å®¹ fis.read(all); for (byte b : all) { //æ‰“å°å‡ºæ¥æ˜¯65 66 System.out.println(b); } //æ¯æ¬¡ä½¿ç”¨å®Œæµï¼Œéƒ½åº”è¯¥è¿›è¡Œå…³é—­ fis.close(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } }}/*è£…é¥°è€…æ¨¡å¼Java I/O ä½¿ç”¨äº†è£…é¥°è€…æ¨¡å¼æ¥å®ç°ã€‚ä»¥ InputStream ä¸ºä¾‹ï¼ŒInputStream æ˜¯æŠ½è±¡ç»„ä»¶ï¼›FileInputStream æ˜¯ InputStream çš„å­ç±»ï¼Œå±äºå…·ä½“ç»„ä»¶ï¼Œæä¾›äº†å­—èŠ‚æµçš„è¾“å…¥æ“ä½œï¼›FilterInputStream å±äºæŠ½è±¡è£…é¥°è€…ï¼Œè£…é¥°è€…ç”¨äºè£…é¥°ç»„ä»¶ï¼Œä¸ºç»„ä»¶æä¾›é¢å¤–çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ BufferedInputStream ä¸º FileInputStream æä¾›ç¼“å­˜çš„åŠŸèƒ½ã€‚å®ä¾‹åŒ–ä¸€ä¸ªå…·æœ‰ç¼“å­˜åŠŸèƒ½çš„å­—èŠ‚æµå¯¹è±¡æ—¶ï¼Œåªéœ€è¦åœ¨ FileInputStream å¯¹è±¡ä¸Šå†å¥—ä¸€å±‚ BufferedInputStream å¯¹è±¡å³å¯ã€‚FileInputStream fileInputStream = new FileInputStream(filePath);BufferedInputStream bufferedInputStream = new BufferedInputStream(fileInputStream);DataInputStream è£…é¥°è€…æä¾›äº†å¯¹æ›´å¤šæ•°æ®ç±»å‹è¿›è¡Œè¾“å…¥çš„æ“ä½œï¼Œæ¯”å¦‚ intã€double ç­‰åŸºæœ¬ç±»å‹ã€‚*/ OutputStream 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051import java.io.*;/**ä¸ºä»€ä¹ˆè¦æœ‰flush()ï¼Ÿå› ä¸ºå‘ç£ç›˜ã€ç½‘ç»œå†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œå‡ºäºæ•ˆç‡çš„è€ƒè™‘ï¼Œæ“ä½œç³»ç»Ÿå¹¶ä¸æ˜¯è¾“å‡ºä¸€ä¸ªå­—èŠ‚å°±ç«‹åˆ»å†™å…¥åˆ°æ–‡ä»¶æˆ–è€…å‘é€åˆ°ç½‘ç»œï¼Œè€Œæ˜¯æŠŠè¾“å‡ºçš„å­—èŠ‚å…ˆæ”¾åˆ°å†…å­˜çš„ä¸€ä¸ªç¼“å†²åŒºé‡Œï¼ˆæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªbyte[]æ•°ç»„ï¼‰ï¼Œç­‰åˆ°ç¼“å†²åŒºå†™æ»¡äº†ï¼Œå†ä¸€æ¬¡æ€§å†™å…¥æ–‡ä»¶æˆ–è€…ç½‘ç»œã€‚å¯¹äºå¾ˆå¤šIOè®¾å¤‡æ¥è¯´ï¼Œä¸€æ¬¡å†™ä¸€ä¸ªå­—èŠ‚å’Œä¸€æ¬¡å†™1000ä¸ªå­—èŠ‚ï¼ŒèŠ±è´¹çš„æ—¶é—´å‡ ä¹æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œæ‰€ä»¥OutputStreamæœ‰ä¸ªflush()æ–¹æ³•ï¼Œèƒ½å¼ºåˆ¶æŠŠç¼“å†²åŒºå†…å®¹è¾“å‡ºã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦è°ƒç”¨è¿™ä¸ªflush()æ–¹æ³•ï¼Œå› ä¸ºç¼“å†²åŒºå†™æ»¡äº†OutputStreamä¼šè‡ªåŠ¨è°ƒç”¨å®ƒå¹¶ä¸”ï¼Œåœ¨è°ƒç”¨close()æ–¹æ³•å…³é—­OutputStreamä¹‹å‰ï¼Œä¹Ÿä¼šè‡ªåŠ¨è°ƒç”¨flush()æ–¹æ³•ã€‚ç‰¹åˆ«æƒ…å†µï¼Œç¼“å†²åŒºè¿‡å¤§ï¼Œéœ€é©¬ä¸Šå‘é€çš„æ—¶å€™æ‰‹åŠ¨flush * @author lxl*/public class OutputStreamL { /**å®ç°æ–‡ä»¶å¤åˆ¶*/ public static void copyFile(String src, String dist) throws IOException { FileInputStream in = new FileInputStream(src); FileOutputStream out = new FileOutputStream(dist); byte[] buffer = new byte[20 * 1024]; int cnt; // read() æœ€å¤šè¯»å– buffer.length ä¸ªå­—èŠ‚ // è¿”å›çš„æ˜¯å®é™…è¯»å–çš„ä¸ªæ•° // è¿”å› -1 çš„æ—¶å€™è¡¨ç¤ºè¯»åˆ° eofï¼Œå³æ–‡ä»¶å°¾ while ((cnt = in.read(buffer, 0, buffer.length)) != -1) { out.write(buffer, 0, cnt); } in.close(); } public static void main(String[] args) throws IOException { //æ–‡ä»¶å­˜åœ¨åˆ™è¦†ç›–ï¼Œä¸å­˜åœ¨åˆ›å»º try(OutputStream output = new FileOutputStream(&quot;F:\\\\PROJECT\\\\IDEA\\\\mylearnproject\\\\src\\\\main\\\\resources\\\\fileTest.txt&quot;)){ byte[] data = {34, 35}; // H output.write(72); // e output.write(101); // l output.write(108); // l output.write(108); // o output.write(data);// output.write(111); // o // ä¸€æ¬¡æ€§å†™å…¥è‹¥å¹²å­—èŠ‚ output.write(&quot;Helloç“¦è¾¾æ— å¤š&quot;.getBytes(&quot;UTF-8&quot;)); // } output.close();//tryä¹‹åç¼–è¯‘å™¨åœ¨æ­¤è‡ªåŠ¨ä¸ºæˆ‘ä»¬å†™å…¥finallyå¹¶è°ƒç”¨close() }}} å­—ç¬¦æ“ä½œ Reader InputStreamæ˜¯ä¸€ä¸ªå­—èŠ‚æµï¼Œå³ä»¥byteä¸ºå•ä½è¯»å–ï¼Œè€ŒReaderæ˜¯ä¸€ä¸ªå­—ç¬¦æµï¼Œå³ä»¥charä¸ºå•ä½è¯»å– InputStream Reader å­—èŠ‚æµï¼Œä»¥byteä¸ºå•ä½ å­—ç¬¦æµï¼Œä»¥charä¸ºå•ä½ è¯»å–å­—èŠ‚ï¼ˆ-1ï¼Œ0~255ï¼‰ï¼šint read() è¯»å–å­—ç¬¦ï¼ˆ-1ï¼Œ0~65535ï¼‰ï¼šint read() è¯»åˆ°å­—èŠ‚æ•°ç»„ï¼šint read(byte[] b) è¯»åˆ°å­—ç¬¦æ•°ç»„ï¼šint read(char[] c) java.io.Readeræ˜¯æ‰€æœ‰å­—ç¬¦è¾“å…¥æµçš„è¶…ç±»ï¼Œå®ƒæœ€ä¸»è¦çš„æ–¹æ³•æ˜¯ï¼š public int read() throws IOException; è¿™ä¸ªæ–¹æ³•è¯»å–å­—ç¬¦æµçš„ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶è¿”å›å­—ç¬¦è¡¨ç¤ºçš„intï¼ŒèŒƒå›´æ˜¯0~65535ã€‚å¦‚æœå·²è¯»åˆ°æœ«å°¾ï¼Œè¿”å›-1ã€‚ FileReaderæ‰“å¼€æ–‡ä»¶å¹¶è·å–Reader // åˆ›å»ºä¸€ä¸ªFileReaderå¯¹è±¡: Reader reader = new FileReader(&quot;src/readme.txt&quot;); // å­—ç¬¦ç¼–ç æ˜¯??? for (;ğŸ˜‰ { int n = reader.read(); // åå¤è°ƒç”¨read()æ–¹æ³•ï¼Œç›´åˆ°è¿”å›-1 if (n == -1) { break; } System.out.println((char)n); // æ‰“å°char } reader.close(); // å…³é—­æµ é¿å…ä¹±ç é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åˆ›å»ºFileReaderæ—¶æŒ‡å®šç¼–ç ï¼š 123456789101112131415161718192021 Reader reader = new FileReader(&quot;src/readme.txt&quot;, StandardCharsets.UTF_8); - try (resource)æ¥ä¿è¯Readeråœ¨æ— è®ºæœ‰æ²¡æœ‰IOé”™è¯¯çš„æ—¶å€™éƒ½èƒ½å¤Ÿæ­£ç¡®åœ°å…³é—­ - Readerè¿˜æä¾›äº†ä¸€æ¬¡æ€§è¯»å–è‹¥å¹²å­—ç¬¦å¹¶å¡«å……åˆ°char[]æ•°ç»„çš„æ–¹æ³•ï¼špublic int read(char[] c) throws IOExceptionå®ƒè¿”å›å®é™…è¯»å…¥çš„å­—ç¬¦ä¸ªæ•°ï¼Œæœ€å¤§ä¸è¶…è¿‡char[]æ•°ç»„çš„é•¿åº¦ã€‚è¿”å›-1è¡¨ç¤ºæµç»“æŸã€‚ - CharArrayReaderæŠŠä¸€ä¸ªchar[]æ•°ç»„å˜æˆä¸€ä¸ªReader - try (Reader reader = new CharArrayReader(&quot;Hello&quot;.toCharArray())) {}- StringReader- InputStreamReader - é™¤äº†ç‰¹æ®Šçš„CharArrayReaderå’ŒStringReaderï¼Œæ™®é€šçš„Readerå®é™…ä¸Šæ˜¯åŸºäºInputStreamæ„é€ çš„ï¼Œå› ä¸ºReaderéœ€è¦ä»InputStreamä¸­è¯»å…¥å­—èŠ‚æµï¼ˆbyteï¼‰ï¼Œç„¶åï¼Œæ ¹æ®ç¼–ç è®¾ç½®ï¼Œå†è½¬æ¢ä¸ºcharå°±å¯ä»¥å®ç°å­—ç¬¦æµã€‚å¦‚æœæˆ‘ä»¬æŸ¥çœ‹FileReaderçš„æºç ï¼Œå®ƒåœ¨å†…éƒ¨å®é™…ä¸ŠæŒæœ‰ä¸€ä¸ªFileInputStreamã€‚ æ—¢ç„¶Readeræœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŸºäºInputStreamçš„byteåˆ°charçš„è½¬æ¢å™¨ï¼Œé‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªInputStreamï¼Œæƒ³æŠŠå®ƒè½¬æ¢ä¸ºReaderï¼Œæ˜¯å®Œå…¨å¯è¡Œçš„ã€‚InputStreamReaderå°±æ˜¯è¿™æ ·ä¸€ä¸ªè½¬æ¢å™¨ï¼Œå®ƒå¯ä»¥æŠŠä»»ä½•InputStreamè½¬æ¢ä¸ºReaderã€‚ - // æŒæœ‰InputStream: InputStream input = new FileInputStream(&quot;src/readme.txt&quot;);// å˜æ¢ä¸ºReader:Reader reader = new InputStreamReader(input, &quot;UTF-8&quot;); - try (Reader reader = new InputStreamReader(new FileInputStream(&quot;src/readme.txt&quot;), &quot;UTF-8&quot;)) {// TODO:} Writer Writerå°±æ˜¯å¸¦ç¼–ç è½¬æ¢å™¨çš„OutputStreamï¼Œå®ƒæŠŠcharè½¬æ¢ä¸ºbyteå¹¶è¾“å‡º OutputStream Writer å­—èŠ‚æµï¼Œä»¥byteä¸ºå•ä½ å­—ç¬¦æµï¼Œä»¥charä¸ºå•ä½ å†™å…¥å­—èŠ‚ï¼ˆ0~255ï¼‰ï¼švoid write(int b) å†™å…¥å­—ç¬¦ï¼ˆ0~65535ï¼‰ï¼švoid write(int c) å†™å…¥å­—èŠ‚æ•°ç»„ï¼švoid write(byte[] b) å†™å…¥å­—ç¬¦æ•°ç»„ï¼švoid write(char[] c) æ— å¯¹åº”æ–¹æ³• å†™å…¥Stringï¼švoid write(String s) Writeræ˜¯æ‰€æœ‰å­—ç¬¦è¾“å‡ºæµçš„è¶…ç±»ï¼Œå®ƒæä¾›çš„æ–¹æ³•ä¸»è¦æœ‰ï¼š å†™å…¥ä¸€ä¸ªå­—ç¬¦ï¼ˆ0~65535ï¼‰ï¼švoid write(int c)ï¼› å†™å…¥å­—ç¬¦æ•°ç»„çš„æ‰€æœ‰å­—ç¬¦ï¼švoid write(char[] c)ï¼› å†™å…¥Stringè¡¨ç¤ºçš„æ‰€æœ‰å­—ç¬¦ï¼švoid write(String s)ã€‚ - FileWriter 12345678 - try (Writer writer = new FileWriter(&quot;readme.txt&quot;, StandardCharsets.UTF_8)) {writer.write('H'); // å†™å…¥å•ä¸ªå­—ç¬¦writer.write(&quot;Hello&quot;.toCharArray()); // å†™å…¥char[]writer.write(&quot;Hello&quot;); // å†™å…¥String}- CharArrayWriter- StringWriter- OutputStreamWriter String çš„ç¼–ç æ–¹å¼ String å¯ä»¥çœ‹æˆä¸€ä¸ªå­—ç¬¦åºåˆ—ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç¼–ç æ–¹å¼å°†å®ƒç¼–ç ä¸ºå­—èŠ‚åºåˆ—ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªç¼–ç æ–¹å¼å°†ä¸€ä¸ªå­—èŠ‚åºåˆ—è§£ç ä¸º Stringã€‚ String str1 = &quot;ä¸­æ–‡&quot;; d byte[] bytes = str1.getBytes(&quot;UTF-8&quot;); String str2 = new String(bytes, &quot;UTF-8&quot;); System.out.println(str2); åœ¨è°ƒç”¨æ— å‚æ•° getBytes() æ–¹æ³•æ—¶ï¼Œé»˜è®¤çš„ç¼–ç æ–¹å¼ä¸æ˜¯ UTF-16beã€‚åŒå­—èŠ‚ç¼–ç çš„å¥½å¤„æ˜¯å¯ä»¥ä½¿ç”¨ä¸€ä¸ª char å­˜å‚¨ä¸­æ–‡å’Œè‹±æ–‡ï¼Œè€Œå°† String è½¬ä¸º bytes[] å­—èŠ‚æ•°ç»„å°±ä¸å†éœ€è¦è¿™ä¸ªå¥½å¤„ï¼Œå› æ­¤ä¹Ÿå°±ä¸å†éœ€è¦åŒå­—èŠ‚ç¼–ç ã€‚getBytes() çš„é»˜è®¤ç¼–ç æ–¹å¼ä¸å¹³å°æœ‰å…³ï¼Œä¸€èˆ¬ä¸º UTF-8ã€‚ byte[] bytes = str1.getBytes(); å¯¹è±¡æ“ä½œ 1234567891011121314151617181920212223242526272829303132333435- åºåˆ—åŒ–æ˜¯æŒ‡æŠŠä¸€ä¸ªJavaå¯¹è±¡å˜æˆäºŒè¿›åˆ¶å†…å®¹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªbyte[]æ•°ç»„,åºåˆ—åŒ–åå¯ä»¥æŠŠbyte[]ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œæˆ–è€…æŠŠbyte[]é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°è¿œç¨‹ï¼Œè¿™æ ·ï¼Œå°±ç›¸å½“äºæŠŠJavaå¯¹è±¡å­˜å‚¨åˆ°æ–‡ä»¶æˆ–è€…é€šè¿‡ç½‘ç»œä¼ è¾“å‡ºå»äº† - ä¸€ä¸ªJavaå¯¹è±¡è¦èƒ½åºåˆ—åŒ–ï¼Œå¿…é¡»å®ç°ä¸€ä¸ªç‰¹æ®Šçš„java.io.Serializableæ¥å£ - æŠŠä¸€ä¸ªJavaå¯¹è±¡å˜ä¸ºbyte[]æ•°ç»„ï¼Œéœ€è¦ä½¿ç”¨ObjectOutputStreamã€‚å®ƒè´Ÿè´£æŠŠä¸€ä¸ªJavaå¯¹è±¡å†™å…¥ä¸€ä¸ªå­—èŠ‚æµ - public class Main { public static void main(String[] args) throws IOException { ByteArrayOutputStream buffer = new ByteArrayOutputStream(); try (ObjectOutputStream output = new ObjectOutputStream(buffer)) { // å†™å…¥int: output.writeInt(12345); // å†™å…¥String: output.writeUTF(&quot;Hello&quot;); // å†™å…¥Object: output.writeObject(Double.valueOf(123.456)); } System.out.println(Arrays.toString(buffer.toByteArray())); } }- ååºåˆ—åŒ–ï¼Œå³æŠŠä¸€ä¸ªäºŒè¿›åˆ¶å†…å®¹ï¼ˆä¹Ÿå°±æ˜¯byte[]æ•°ç»„ï¼‰å˜å›Javaå¯¹è±¡ã€‚æœ‰äº†ååºåˆ—åŒ–ï¼Œä¿å­˜åˆ°æ–‡ä»¶ä¸­çš„byte[]æ•°ç»„åˆå¯ä»¥â€œå˜å›â€Javaå¯¹è±¡ï¼Œæˆ–è€…ä»ç½‘ç»œä¸Šè¯»å–byte[]å¹¶æŠŠå®ƒâ€œå˜å›â€Javaå¯¹è±¡ã€‚ - ObjectInputStreamè´Ÿè´£ä»ä¸€ä¸ªå­—èŠ‚æµè¯»å–Javaå¯¹è±¡ - try (ObjectInputStream input = new ObjectInputStream(...)) { int n = input.readInt(); String s = input.readUTF(); Double d = (Double) input.readObject(); } - readObject()å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸æœ‰ï¼šClassNotFoundExceptionï¼šæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„Classï¼›InvalidClassExceptionï¼šClassä¸åŒ¹é…ã€‚- å®‰å…¨æ€§ - Javaçš„åºåˆ—åŒ–æœºåˆ¶ä»…é€‚ç”¨äºJavaï¼Œå¦‚æœéœ€è¦ä¸å…¶å®ƒè¯­è¨€äº¤æ¢æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨é€šç”¨çš„åºåˆ—åŒ–æ–¹æ³•ï¼Œä¾‹å¦‚JSONã€‚ ç½‘ç»œæ“ä½œ NIO æµä¸å— I/O ä¸ NIO æœ€é‡è¦çš„åŒºåˆ«æ˜¯æ•°æ®æ‰“åŒ…å’Œä¼ è¾“çš„æ–¹å¼ï¼ŒI/O ä»¥æµçš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œè€Œ NIO ä»¥å—çš„æ–¹å¼å¤„ç†æ•°æ®ã€‚ é¢å‘æµçš„ I/O ä¸€æ¬¡å¤„ç†ä¸€ä¸ªå­—èŠ‚æ•°æ®ï¼šä¸€ä¸ªè¾“å…¥æµäº§ç”Ÿä¸€ä¸ªå­—èŠ‚æ•°æ®ï¼Œä¸€ä¸ªè¾“å‡ºæµæ¶ˆè´¹ä¸€ä¸ªå­—èŠ‚æ•°æ®ã€‚ä¸ºæµå¼æ•°æ®åˆ›å»ºè¿‡æ»¤å™¨éå¸¸å®¹æ˜“ï¼Œé“¾æ¥å‡ ä¸ªè¿‡æ»¤å™¨ï¼Œä»¥ä¾¿æ¯ä¸ªè¿‡æ»¤å™¨åªè´Ÿè´£å¤æ‚å¤„ç†æœºåˆ¶çš„ä¸€éƒ¨åˆ†ã€‚ä¸åˆ©çš„ä¸€é¢æ˜¯ï¼Œé¢å‘æµçš„ I/O é€šå¸¸ç›¸å½“æ…¢ã€‚ é¢å‘å—çš„ I/O ä¸€æ¬¡å¤„ç†ä¸€ä¸ªæ•°æ®å—ï¼ŒæŒ‰å—å¤„ç†æ•°æ®æ¯”æŒ‰æµå¤„ç†æ•°æ®è¦å¿«å¾—å¤šã€‚ä½†æ˜¯é¢å‘å—çš„ I/O ç¼ºå°‘ä¸€äº›é¢å‘æµçš„ I/O æ‰€å…·æœ‰çš„ä¼˜é›…æ€§å’Œç®€å•æ€§ã€‚ I/O åŒ…å’Œ NIO å·²ç»å¾ˆå¥½åœ°é›†æˆäº†ï¼Œjava.io.* å·²ç»ä»¥ NIO ä¸ºåŸºç¡€é‡æ–°å®ç°äº†ï¼Œæ‰€ä»¥ç°åœ¨å®ƒå¯ä»¥åˆ©ç”¨ NIO çš„ä¸€äº›ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œjava.io.* åŒ…ä¸­çš„ä¸€äº›ç±»åŒ…å«ä»¥å—çš„å½¢å¼è¯»å†™æ•°æ®çš„æ–¹æ³•ï¼Œè¿™ä½¿å¾—å³ä½¿åœ¨é¢å‘æµçš„ç³»ç»Ÿä¸­ï¼Œå¤„ç†é€Ÿåº¦ä¹Ÿä¼šæ›´å¿«ã€‚ é€šé“ä¸ç¼“å†²åŒº é€šé“ é€šé“ Channel æ˜¯å¯¹åŸ I/O åŒ…ä¸­çš„æµçš„æ¨¡æ‹Ÿï¼Œå¯ä»¥é€šè¿‡å®ƒè¯»å–å’Œå†™å…¥æ•°æ®ã€‚ é€šé“ä¸æµçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œæµåªèƒ½åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šç§»åŠ¨(ä¸€ä¸ªæµå¿…é¡»æ˜¯ InputStream æˆ–è€… OutputStream çš„å­ç±»)ï¼Œè€Œé€šé“æ˜¯åŒå‘çš„ï¼Œå¯ä»¥ç”¨äºè¯»ã€å†™æˆ–è€…åŒæ—¶ç”¨äºè¯»å†™ã€‚ é€šé“åŒ…æ‹¬ä»¥ä¸‹ç±»å‹ï¼š FileChannelï¼šä»æ–‡ä»¶ä¸­è¯»å†™æ•°æ®ï¼› DatagramChannelï¼šé€šè¿‡ UDP è¯»å†™ç½‘ç»œä¸­æ•°æ®ï¼› SocketChannelï¼šé€šè¿‡ TCP è¯»å†™ç½‘ç»œä¸­æ•°æ®ï¼› ServerSocketChannelï¼šå¯ä»¥ç›‘å¬æ–°è¿›æ¥çš„ TCP è¿æ¥ï¼Œå¯¹æ¯ä¸€ä¸ªæ–°è¿›æ¥çš„è¿æ¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ª SocketChannel,æœ¬èº«å¹¶ä¸ä¼ æ•°æ®ã€‚ FileChannel 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package pers.lxl.mylearnproject.javase.io.nio.channel;import java.io.IOException;import java.io.RandomAccessFile;import java.nio.ByteBuffer;import java.nio.channels.FileChannel;public class FileChannelDemo { public static void main(String[] args) throws IOException { // è¯»// éœ€è¦é€šè¿‡ä½¿ç”¨ä¸€ä¸ªInputStreamã€OutputStreamæˆ–RandomAccessFileæ¥è·å–ä¸€ä¸ªFileChannelå®ä¾‹ RandomAccessFile aFile = new RandomAccessFile(&quot;src/main/resources/fileTest.txt&quot;, &quot;rw&quot;); FileChannel inChannel = aFile.getChannel(); ByteBuffer buf = ByteBuffer.allocate(48);// è·å–å½“å‰é€šé“ä½ç½® long pos = inChannel.position();// è®¾ç½®å½“å‰é€šé“ä½ç½® inChannel.position(pos + 6);// è¿”å›é€šé“å½“å‰å¤§å° System.out.println(&quot;æ­¤æ—¶é€šé“å¤§å°ï¼š&quot;+inChannel.size());// æˆªå–(åˆ é™¤)æ–‡ä»¶7å­—èŠ‚åéƒ¨åˆ† inChannel.truncate(7); int bytesRead = inChannel.read(buf); while (bytesRead != -1) { System.out.println(&quot;è¯»å–ï¼š &quot; + bytesRead); buf.flip(); while (buf.hasRemaining()) { System.out.print((char) buf.get()); } buf.clear(); bytesRead = inChannel.read(buf); } //å¼ºåˆ¶å°†é€šé“é‡Œçš„å‰©ä½™æ•°æ®å†™åˆ°ç£ç›˜ä¸­ inChannel.force(true); aFile.close(); System.out.println(&quot;æ“ä½œç»“æŸ&quot;); //è¦†ç›–èµ·å§‹ä½ç½®å¼€å§‹çš„å¯¹åº”ä½ç½® å†™ RandomAccessFile aFile1 = new RandomAccessFile(&quot;src/main/resources/fileTest.txt&quot;, &quot;rw&quot;); String newData = &quot;New String to write to file...&quot; + System.currentTimeMillis(); ByteBuffer buf1 = ByteBuffer.allocate(48); FileChannel inChannel1 = aFile1.getChannel(); buf1.clear(); buf1.put(newData.getBytes()); buf1.flip(); while (buf1.hasRemaining()) { inChannel1.write(buf1); } inChannel1.close(); RandomAccessFile aaFile = new RandomAccessFile(&quot;src/main/resources/fileTest.txt&quot;, &quot;rw&quot;); FileChannel fromChannel = aaFile.getChannel(); RandomAccessFile bbFile = new RandomAccessFile(&quot;src/main/resources/transferFrom.txt&quot;, &quot;rw&quot;); FileChannel toChannel = bbFile.getChannel(); long position = 0; long count = fromChannel.size(); // fromChannel to toChannel toChannel.transferFrom(fromChannel, position, count); // fromChannel to toChannel fromChannel.transferTo(position, count, toChannel); aaFile.close(); bbFile.close(); System.out.println(&quot;é€šé“ä¼ è¾“over!&quot;); }} ServerSocketChannel ï¼ˆ1ï¼‰æ–°çš„socketé€šé“ç±»å¯ä»¥è¿è¡Œéé˜»å¡æ¨¡å¼å¹¶ä¸”æ˜¯å¯é€‰æ‹©çš„ï¼Œå¯ä»¥æ¿€æ´»å¤§ç¨‹åºï¼ˆå¦‚ç½‘ç»œæœåŠ¡å™¨å’Œä¸­é—´ä»¶ç»„ä»¶ï¼‰å·¨å¤§çš„å¯ä¼¸ç¼©æ€§å’Œçµæ´»æ€§ã€‚æœ¬èŠ‚ä¸­æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œå†ä¹Ÿæ²¡æœ‰ä¸ºæ¯ä¸ªsocketè¿æ¥ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹çš„å¿…è¦äº†ï¼Œä¹Ÿé¿å…äº†ç®¡ç†å¤§é‡çº¿ç¨‹æ‰€éœ€çš„ä¸Šä¸‹æ–‡äº¤æ¢å¼€é”€ã€‚å€ŸåŠ©æ–°çš„NIOç±»ï¼Œä¸€ä¸ªæˆ–å‡ ä¸ªçº¿ç¨‹å°±å¯ä»¥ç®¡ç†æˆç™¾ä¸Šåƒçš„æ´»åŠ¨socketè¿æ¥äº†å¹¶ä¸”åªæœ‰å¾ˆå°‘ç”šè‡³å¯èƒ½æ²¡æœ‰æ€§èƒ½æŸå¤±ã€‚æ‰€æœ‰çš„socketé€šé“ç±»(DatagramChannelã€SocketChannelå’ŒServerSocketChannel)éƒ½ç»§æ‰¿äº†ä½äºjava.nio.channels.spiåŒ…ä¸­çš„AbstractSelectableChannelã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªSelectorå¯¹è±¡æ¥æ‰§è¡Œsocketé€šé“çš„å°±ç»ªé€‰æ‹©ï¼ˆreadiness selectionï¼‰ã€‚ ï¼ˆ2ï¼‰è¯·æ³¨æ„DatagramChannelå’ŒSocketChannelå®ç°å®šä¹‰è¯»å’Œå†™åŠŸèƒ½çš„æ¥å£è€ŒServerSocketChannelä¸å®ç°ã€‚ServerSocketChannelè´Ÿè´£ç›‘å¬ä¼ å…¥çš„è¿æ¥å’Œåˆ›å»ºæ–°çš„SocketChannelå¯¹è±¡ï¼Œå®ƒæœ¬èº«ä»ä¸ä¼ è¾“æ•°æ®ã€‚ ï¼ˆ3ï¼‰åœ¨æˆ‘ä»¬å…·ä½“è®¨è®ºæ¯ä¸€ç§socketé€šé“å‰ï¼Œæ‚¨åº”è¯¥äº†è§£socketå’Œsocketé€šé“ä¹‹é—´çš„å…³ç³»ã€‚é€šé“æ˜¯ä¸€ä¸ªè¿æ¥I/OæœåŠ¡å¯¼ç®¡å¹¶æä¾›ä¸è¯¥æœåŠ¡äº¤äº’çš„æ–¹æ³•ã€‚å°±æŸä¸ªsocketè€Œè¨€ï¼Œå®ƒä¸ä¼šå†æ¬¡å®ç°ä¸ä¹‹å¯¹åº”çš„socketé€šé“ç±»ä¸­çš„socketåè®®APIï¼Œè€Œjava.netä¸­å·²ç»å­˜åœ¨çš„socketé€šé“éƒ½å¯ä»¥è¢«å¤§å¤šæ•°åè®®æ“ä½œé‡å¤ä½¿ç”¨ã€‚ å…¨éƒ¨socketé€šé“ç±»ï¼ˆDatagramChannelã€SocketChannelå’ŒServerSocketChannelï¼‰åœ¨è¢«å®ä¾‹åŒ–æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå¯¹ç­‰socketå¯¹è±¡ã€‚è¿™äº›æ˜¯æˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„æ¥è‡ªjava.netçš„ç±»ï¼ˆSocketã€ServerSocketå’ŒDatagramSocketï¼‰ï¼Œå®ƒä»¬å·²ç»è¢«æ›´æ–°ä»¥è¯†åˆ«é€šé“ã€‚å¯¹ç­‰socketå¯ä»¥é€šè¿‡è°ƒç”¨socket( )æ–¹æ³•ä»ä¸€ä¸ªé€šé“ä¸Šè·å–ã€‚æ­¤å¤–ï¼Œè¿™ä¸‰ä¸ªjava.netç±»ç°åœ¨éƒ½æœ‰getChannel( )æ–¹æ³•ã€‚ ï¼ˆ4ï¼‰è¦æŠŠä¸€ä¸ªsocketé€šé“ç½®äºéé˜»å¡æ¨¡å¼ï¼Œæˆ‘ä»¬è¦ä¾é æ‰€æœ‰socketé€šé“ç±»çš„å…¬æœ‰è¶…çº§ç±»ï¼šSelectableChannelã€‚å°±ç»ªé€‰æ‹©ï¼ˆreadiness selectionï¼‰æ˜¯ä¸€ç§å¯ä»¥ç”¨æ¥æŸ¥è¯¢é€šé“çš„æœºåˆ¶ï¼Œè¯¥æŸ¥è¯¢å¯ä»¥åˆ¤æ–­é€šé“æ˜¯å¦å‡†å¤‡å¥½æ‰§è¡Œä¸€ä¸ªç›®æ ‡æ“ä½œï¼Œå¦‚è¯»æˆ–å†™ã€‚éé˜»å¡I/Oå’Œå¯é€‰æ‹©æ€§æ˜¯ç´§å¯†ç›¸è¿çš„ï¼Œé‚£ä¹Ÿæ­£æ˜¯ç®¡ç†é˜»å¡æ¨¡å¼çš„APIä»£ç è¦åœ¨SelectableChannelè¶…çº§ç±»ä¸­å®šä¹‰çš„åŸå› ã€‚ è®¾ç½®æˆ–é‡æ–°è®¾ç½®ä¸€ä¸ªé€šé“çš„é˜»å¡æ¨¡å¼æ˜¯å¾ˆç®€å•çš„ï¼Œåªè¦è°ƒç”¨configureBlocking( )æ–¹æ³•å³å¯ï¼Œä¼ é€’å‚æ•°å€¼ä¸ºtrueåˆ™è®¾ä¸ºé˜»å¡æ¨¡å¼ï¼Œå‚æ•°å€¼ä¸ºfalseå€¼è®¾ä¸ºéé˜»å¡æ¨¡å¼ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨isBlocking( )æ–¹æ³•æ¥åˆ¤æ–­æŸä¸ªsocketé€šé“å½“å‰å¤„äºå“ªç§æ¨¡å¼ã€‚ â€‹ éé˜»å¡socketé€šå¸¸è¢«è®¤ä¸ºæ˜¯æœåŠ¡ç«¯ä½¿ç”¨çš„ï¼Œå› ä¸ºå®ƒä»¬ä½¿åŒæ—¶ç®¡ç†å¾ˆå¤šsocketé€šé“å˜å¾—æ›´å®¹æ˜“ã€‚ä½†æ˜¯ï¼Œåœ¨å®¢æˆ·ç«¯ä½¿ç”¨ä¸€ä¸ªæˆ–å‡ ä¸ªéé˜»å¡æ¨¡å¼çš„socketé€šé“ä¹Ÿæ˜¯æœ‰ç›Šå¤„çš„ï¼Œä¾‹å¦‚ï¼Œå€ŸåŠ©éé˜»å¡socketé€šé“ï¼ŒGUIç¨‹åºå¯ä»¥ä¸“æ³¨äºç”¨æˆ·è¯·æ±‚å¹¶ä¸”åŒæ—¶ç»´æŠ¤ä¸ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡å™¨çš„ä¼šè¯ã€‚åœ¨å¾ˆå¤šç¨‹åºä¸Šï¼Œéé˜»å¡æ¨¡å¼éƒ½æ˜¯æœ‰ç”¨çš„ã€‚ å¶å°”åœ°ï¼Œæˆ‘ä»¬ä¹Ÿä¼šéœ€è¦é˜²æ­¢socketé€šé“çš„é˜»å¡æ¨¡å¼è¢«æ›´æ”¹ã€‚APIä¸­æœ‰ä¸€ä¸ªblockingLock( )æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªéé€æ˜çš„å¯¹è±¡å¼•ç”¨ã€‚è¿”å›çš„å¯¹è±¡æ˜¯é€šé“å®ç°ä¿®æ”¹é˜»å¡æ¨¡å¼æ—¶å†…éƒ¨ä½¿ç”¨çš„ã€‚åªæœ‰æ‹¥æœ‰æ­¤å¯¹è±¡çš„é”çš„çº¿ç¨‹æ‰èƒ½æ›´æ”¹é€šé“çš„é˜»å¡æ¨¡å¼ã€‚ â€‹ ServerSocketChannelæ˜¯ä¸€ä¸ªåŸºäºé€šé“çš„socketç›‘å¬å™¨ã€‚å®ƒåŒæˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„java.net.ServerSocketæ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ï¼Œä¸è¿‡å®ƒå¢åŠ äº†é€šé“è¯­ä¹‰ï¼Œå› æ­¤èƒ½å¤Ÿåœ¨éé˜»å¡æ¨¡å¼ä¸‹è¿è¡Œã€‚ â€‹ ç”±äºServerSocketChannelæ²¡æœ‰bind()æ–¹æ³•ï¼Œå› æ­¤æœ‰å¿…è¦å–å‡ºå¯¹ç­‰çš„socketå¹¶ä½¿ç”¨å®ƒæ¥ç»‘å®šåˆ°ä¸€ä¸ªç«¯å£ä»¥å¼€å§‹ç›‘å¬è¿æ¥ã€‚æˆ‘ä»¬ä¹Ÿæ˜¯ä½¿ç”¨å¯¹ç­‰ServerSocketçš„APIæ¥æ ¹æ®éœ€è¦è®¾ç½®å…¶ä»–çš„socketé€‰é¡¹ã€‚ â€‹ åŒjava.net.ServerSocketä¸€æ ·ï¼ŒServerSocketChannelä¹Ÿæœ‰accept( )æ–¹æ³•ã€‚ä¸€æ—¦åˆ›å»ºäº†ä¸€ä¸ªServerSocketChannelå¹¶ç”¨å¯¹ç­‰socketç»‘å®šäº†å®ƒï¼Œç„¶åæ‚¨å°±å¯ä»¥åœ¨å…¶ä¸­ä¸€ä¸ªä¸Šè°ƒç”¨accept()ã€‚å¦‚æœæ‚¨é€‰æ‹©åœ¨ServerSocketä¸Šè°ƒç”¨accept( )æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä¼šåŒä»»ä½•å…¶ä»–çš„ServerSocketè¡¨ç°ä¸€æ ·çš„è¡Œä¸ºï¼šæ€»æ˜¯é˜»å¡å¹¶è¿”å›ä¸€ä¸ªjava.net.Socketå¯¹è±¡ã€‚å¦‚æœæ‚¨é€‰æ‹©åœ¨ServerSocketChannelä¸Šè°ƒç”¨accept( )æ–¹æ³•åˆ™ä¼šè¿”å›SocketChannelç±»å‹çš„å¯¹è±¡ï¼Œè¿”å›çš„å¯¹è±¡èƒ½å¤Ÿåœ¨éé˜»å¡æ¨¡å¼ä¸‹è¿è¡Œã€‚ æ¢å¥è¯è¯´ï¼š â€‹ ServerSocketChannelçš„accept()æ–¹æ³•ä¼šè¿”å›SocketChannelç±»å‹å¯¹è±¡ï¼ŒSocketChannelå¯ä»¥åœ¨éé˜»å¡æ¨¡å¼ä¸‹è¿è¡Œã€‚å…¶å®ƒSocketçš„accept()æ–¹æ³•ä¼šé˜»å¡è¿”å›ä¸€ä¸ªSocketå¯¹è±¡ã€‚å¦‚æœServerSocketChannelä»¥éé˜»å¡æ¨¡å¼è¢«è°ƒç”¨ï¼Œå½“æ²¡æœ‰ä¼ å…¥è¿æ¥åœ¨ç­‰å¾…æ—¶ï¼ŒServerSocketChannel.accept( )ä¼šç«‹å³è¿”å›nullã€‚æ­£æ˜¯è¿™ç§æ£€æŸ¥è¿æ¥è€Œä¸é˜»å¡çš„èƒ½åŠ›å®ç°äº†å¯ä¼¸ç¼©æ€§å¹¶é™ä½äº†å¤æ‚æ€§ã€‚å¯é€‰æ‹©æ€§ä¹Ÿå› æ­¤å¾—åˆ°å®ç°ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé€‰æ‹©å™¨å®ä¾‹æ¥æ³¨å†ŒServerSocketChannelå¯¹è±¡ä»¥å®ç°æ–°è¿æ¥åˆ°è¾¾æ—¶è‡ªåŠ¨é€šçŸ¥çš„åŠŸèƒ½ã€‚ 12345678910111213141516171819202122232425262728293031323334353637import java.net.InetSocketAddress;import java.nio.ByteBuffer;import java.nio.channels.ServerSocketChannel;import java.nio.channels.SocketChannel;//http://localhost:1234/public class ServerSocketChannelDemo { public static final String GREETING = &quot;Hello java nio.\\r\\n&quot;; public static void main(String[] argv) throws Exception { int port = 1234; // default if (argv.length &gt; 0) { port = Integer.parseInt(argv[0]); } ByteBuffer buffer = ByteBuffer.wrap(GREETING.getBytes());// æ‰“å¼€ ServerSocketChannel ssc = ServerSocketChannel.open(); ssc.socket().bind(new InetSocketAddress(port)); ssc.configureBlocking(false); while (true) { System.out.println(&quot;Waiting for connections&quot;);// ç›‘å¬æ–°çš„é“¾æ¥ï¼Œé˜»å¡ä¼šåœ¨æ­¤é˜»å¡ä½è¿›ç¨‹éé˜»å¡ä¼šè¿”å›null SocketChannel sc = ssc.accept(); if (sc == null) { System.out.println(&quot;null&quot;); Thread.sleep(2000); } else { System.out.println(&quot;Incoming connection from: &quot; + sc.socket().getRemoteSocketAddress());// æŒ‡é’ˆæŒ‡å‘0 buffer.rewind(); sc.write(buffer);// å…³é—­ sc.close(); } } }} SocketChannel â€‹ Java NIOä¸­çš„SocketChannelæ˜¯ä¸€ä¸ªè¿æ¥åˆ°TCPç½‘ç»œå¥—æ¥å­—çš„é€šé“ã€‚ A selectable channel for stream-oriented connecting sockets. ä»¥ä¸Šæ˜¯Java docsä¸­å¯¹äºSocketChannelçš„æè¿°ï¼šSocketChannelæ˜¯ä¸€ç§é¢å‘æµè¿æ¥socketså¥—æ¥å­—çš„å¯é€‰æ‹©é€šé“ã€‚ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼š â€‹ â€¢ SocketChannelæ˜¯ç”¨æ¥è¿æ¥Socketå¥—æ¥å­— â€‹ â€¢SocketChannelä¸»è¦ç”¨é€”ç”¨æ¥å¤„ç†ç½‘ç»œI/Oçš„é€šé“ â€‹ â€¢ SocketChannelæ˜¯åŸºäºTCPè¿æ¥ä¼ è¾“ â€‹ â€¢ SocketChannelå®ç°äº†å¯é€‰æ‹©é€šé“ï¼Œå¯ä»¥è¢«å¤šè·¯å¤ç”¨çš„ â€‹ ç‰¹å¾ï¼š ï¼ˆ1ï¼‰å¯¹äºå·²ç»å­˜åœ¨çš„socketä¸èƒ½åˆ›å»ºSocketChannel ï¼ˆ2ï¼‰SocketChannelä¸­æä¾›çš„openæ¥å£åˆ›å»ºçš„Channelå¹¶æ²¡æœ‰è¿›è¡Œç½‘ç»œçº§è”ï¼Œéœ€è¦ä½¿ç”¨connectæ¥å£è¿æ¥åˆ°æŒ‡å®šåœ°å€ ï¼ˆ3ï¼‰æœªè¿›è¡Œè¿æ¥çš„SocketChannleæ‰§è¡ŒI/Oæ“ä½œæ—¶ï¼Œä¼šæŠ›å‡ºNotYetConnectedException ï¼ˆ4ï¼‰SocketChannelæ”¯æŒä¸¤ç§I/Oæ¨¡å¼ï¼šé˜»å¡å¼å’Œéé˜»å¡å¼ ï¼ˆ5ï¼‰SocketChannelæ”¯æŒå¼‚æ­¥å…³é—­ã€‚å¦‚æœSocketChannelåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šreadé˜»å¡ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯¹è¯¥SocketChannelè°ƒç”¨shutdownInputï¼Œåˆ™è¯»é˜»å¡çš„çº¿ç¨‹å°†è¿”å›-1è¡¨ç¤ºæ²¡æœ‰è¯»å–ä»»ä½•æ•°æ®ï¼›å¦‚æœSocketChannelåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šwriteé˜»å¡ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯¹è¯¥SocketChannelè°ƒç”¨shutdownWriteï¼Œåˆ™å†™é˜»å¡çš„çº¿ç¨‹å°†æŠ›å‡ºAsynchronousCloseException ï¼ˆ6ï¼‰SocketChannelæ”¯æŒè®¾å®šå‚æ•° â€‹ SO_SNDBUF å¥—æ¥å­—å‘é€ç¼“å†²åŒºå¤§å° â€‹ SO_RCVBUF å¥—æ¥å­—æ¥æ”¶ç¼“å†²åŒºå¤§å° â€‹ SO_KEEPALIVE ä¿æ´»è¿æ¥ â€‹ O_REUSEADDR å¤ç”¨åœ°å€ â€‹ SO_LINGER æœ‰æ•°æ®ä¼ è¾“æ—¶å»¶ç¼“å…³é—­Channel (åªæœ‰åœ¨éé˜»å¡æ¨¡å¼ä¸‹æœ‰ç”¨) â€‹ TCP_NODELAY ç¦ç”¨Nagleç®—æ³• 12345678910111213141516171819202122232425262728293031323334package pers.lxl.mylearnproject.javase.io.nio.channel;import java.io.IOException;import java.net.InetSocketAddress;import java.net.StandardSocketOptions;import java.nio.ByteBuffer;import java.nio.channels.SocketChannel;public class SocketChannelDemo { public static void main(String[] args) throws IOException { SocketChannel socketChannel = SocketChannel.open(new InetSocketAddress(&quot;www.baidu.com&quot;, 80)); SocketChannel socketChanne2 = SocketChannel.open(); socketChanne2.connect(new InetSocketAddress(&quot;www.baidu.com&quot;, 80));// è¿æ¥æ ¡éªŒ socketChannel.isOpen(); // æµ‹è¯•SocketChannelæ˜¯å¦ä¸ºopençŠ¶æ€ socketChannel.isConnected(); //æµ‹è¯•SocketChannelæ˜¯å¦å·²ç»è¢«è¿æ¥ socketChannel.isConnectionPending(); //æµ‹è¯•SocketChannelæ˜¯å¦æ­£åœ¨è¿›è¡Œè¿æ¥ socketChannel.finishConnect(); //æ ¡éªŒæ­£åœ¨è¿›è¡Œå¥—æ¥å­—è¿æ¥çš„SocketChannelæ˜¯å¦å·²ç»å®Œæˆè¿æ¥// è¯»å†™æ¨¡å¼ å‰é¢æåˆ°SocketChannelæ”¯æŒé˜»å¡å’Œéé˜»å¡ä¸¤ç§æ¨¡å¼ï¼š socketChannel.configureBlocking(false);// é€šè¿‡setOptionsæ–¹æ³•å¯ä»¥è®¾ç½®socketå¥—æ¥å­—çš„ç›¸å…³å‚æ•° socketChannel.setOption(StandardSocketOptions.SO_KEEPALIVE, Boolean.TRUE).setOption(StandardSocketOptions.TCP_NODELAY, Boolean.TRUE);// å¯ä»¥é€šè¿‡getOptionè·å–ç›¸å…³å‚æ•°çš„å€¼ã€‚å¦‚é»˜è®¤çš„æ¥æ”¶ç¼“å†²åŒºå¤§å°æ˜¯8192byteã€‚ socketChannel.getOption(StandardSocketOptions.SO_KEEPALIVE); socketChannel.getOption(StandardSocketOptions.SO_RCVBUF);// è¯»å†™ ByteBuffer byteBuffer = ByteBuffer.allocate(16); socketChannel.read(byteBuffer); socketChannel.close(); System.out.println(&quot;read over&quot;); }} DatagramChannel â€‹ æ­£å¦‚SocketChannelå¯¹åº”Socketï¼ŒServerSocketChannelå¯¹åº”ServerSocketï¼Œæ¯ä¸€ä¸ªDatagramChannelå¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªå…³è”çš„DatagramSocketå¯¹è±¡ã€‚æ­£å¦‚SocketChannelæ¨¡æ‹Ÿè¿æ¥å¯¼å‘çš„æµåè®®ï¼ˆå¦‚TCP/IPï¼‰ï¼ŒDatagramChannelåˆ™æ¨¡æ‹ŸåŒ…å¯¼å‘çš„æ— è¿æ¥åè®®ï¼ˆå¦‚UDP/IPï¼‰ã€‚DatagramChannelæ˜¯æ— è¿æ¥çš„ï¼Œæ¯ä¸ªæ•°æ®æŠ¥ï¼ˆdatagramï¼‰éƒ½æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„å®ä½“ï¼Œæ‹¥æœ‰å®ƒè‡ªå·±çš„ç›®çš„åœ°å€åŠä¸ä¾èµ–å…¶ä»–æ•°æ®æŠ¥çš„æ•°æ®è´Ÿè½½ã€‚ä¸é¢å‘æµçš„çš„socketä¸åŒï¼ŒDatagramChannelå¯ä»¥å‘é€å•ç‹¬çš„æ•°æ®æŠ¥ç»™ä¸åŒçš„ç›®çš„åœ°å€ã€‚åŒæ ·ï¼ŒDatagramChannelå¯¹è±¡ä¹Ÿå¯ä»¥æ¥æ”¶æ¥è‡ªä»»æ„åœ°å€çš„æ•°æ®åŒ…ã€‚æ¯ä¸ªåˆ°è¾¾çš„æ•°æ®æŠ¥éƒ½å«æœ‰å…³äºå®ƒæ¥è‡ªä½•å¤„çš„ä¿¡æ¯ï¼ˆæºåœ°å€ï¼‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869import org.junit.jupiter.api.Test;import java.io.IOException;import java.net.InetSocketAddress;import java.net.SocketAddress;import java.nio.ByteBuffer;import java.nio.channels.DatagramChannel;import java.nio.charset.Charset;public class DatagramChannelDemo { /** * å‘åŒ…çš„datagram * * @throws IOException * @throws InterruptedException */ @Test public void sendDatagram() throws IOException, InterruptedException { DatagramChannel sendChannel = DatagramChannel.open(); InetSocketAddress sendAddress = new InetSocketAddress(&quot;127.0.0.1&quot;, 9999); while (true) {// å‘é€ sendChannel.send(ByteBuffer.wrap(&quot;å‘åŒ…&quot;.getBytes(&quot;UTF-8&quot;)), sendAddress); System.out.println(&quot;å‘åŒ…ç«¯å‘åŒ…&quot;); Thread.sleep(1000); } } /** * æ”¶åŒ…ç«¯ * * @throws IOException */ @Test public void receive() throws IOException { DatagramChannel receiveChannel = DatagramChannel.open(); //æ‰“å¼€9999ç«¯å£æ¥æ”¶UDPæ•°æ®åŒ… InetSocketAddress receiveAddress = new InetSocketAddress(9999); receiveChannel.bind(receiveAddress); ByteBuffer receiveBuffer = ByteBuffer.allocate(512); while (true) { receiveBuffer.clear();// æ¥æ”¶ SocketAddress sendAddress = receiveChannel.receive(receiveBuffer); receiveBuffer.flip(); System.out.print(sendAddress.toString() + &quot; &quot;); System.out.println(Charset.forName(&quot;UTF-8&quot;).decode(receiveBuffer)); } } /** * åªæ¥æ”¶å’Œå‘é€9999çš„æ•°æ®åŒ… * * @throws IOException */ @Test public void testConect1() throws IOException { DatagramChannel connChannel = DatagramChannel.open(); connChannel.bind(new InetSocketAddress(9999)); //UDPä¸å­˜åœ¨çœŸæ­£æ„ä¹‰ä¸Šçš„è¿æ¥ï¼Œè¿™é‡Œçš„è¿æ¥æ˜¯å‘ç‰¹å®šæœåŠ¡åœ°å€ç”¨readå’Œwriteæ¥æ”¶å‘é€æ•°æ®åŒ…ã€‚ connChannel.connect(new InetSocketAddress(&quot;127.0.0.1&quot;, 9999)); connChannel.write(ByteBuffer.wrap(&quot;å‘åŒ…&quot;.getBytes(&quot;UTF-8&quot;))); ByteBuffer readBuffer = ByteBuffer.allocate(512); //read()å’Œwrite()åªæœ‰åœ¨connect()åæ‰èƒ½ä½¿ç”¨ï¼Œä¸ç„¶ä¼šæŠ›NotYetConnectedExceptionå¼‚å¸¸ã€‚ç”¨read()æ¥æ”¶æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ¥æ”¶åˆ°åŒ…ï¼Œä¼šæŠ›PortUnreachableExceptionå¼‚å¸¸ã€‚ while (true) { try { readBuffer.clear(); connChannel.read(readBuffer); readBuffer.flip(); System.out.println(Charset.forName(&quot;UTF-8&quot;).decode(readBuffer)); } catch (Exception e) { } } }} Scatter/Gather â€‹ Java NIOå¼€å§‹æ”¯æŒscatter/gatherï¼Œscatter/gatherç”¨äºæè¿°ä»Channelä¸­è¯»å–æˆ–è€…å†™å…¥åˆ°Channelçš„æ“ä½œã€‚ â€‹ **åˆ†æ•£ï¼ˆscatterï¼‰**ä»Channelä¸­è¯»å–æ˜¯æŒ‡åœ¨è¯»æ“ä½œæ—¶å°†è¯»å–çš„æ•°æ®å†™å…¥å¤šä¸ªbufferä¸­ã€‚å› æ­¤ï¼ŒChannelå°†ä»Channelä¸­è¯»å–çš„æ•°æ®â€œåˆ†æ•£ï¼ˆscatterï¼‰â€åˆ°å¤šä¸ªBufferä¸­ã€‚ â€‹ **èšé›†ï¼ˆgatherï¼‰**å†™å…¥Channelæ˜¯æŒ‡åœ¨å†™æ“ä½œæ—¶å°†å¤šä¸ªbufferçš„æ•°æ®å†™å…¥åŒä¸€ä¸ªChannelï¼Œå› æ­¤ï¼ŒChannel å°†å¤šä¸ªBufferä¸­çš„æ•°æ®â€œèšé›†ï¼ˆgatherï¼‰â€åå‘é€åˆ°Channelã€‚ scatter / gatherç»å¸¸ç”¨äºéœ€è¦å°†ä¼ è¾“çš„æ•°æ®åˆ†å¼€å¤„ç†çš„åœºåˆï¼Œä¾‹å¦‚ä¼ è¾“ä¸€ä¸ªç”±æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ç»„æˆçš„æ¶ˆæ¯ï¼Œä½ å¯èƒ½ä¼šå°†æ¶ˆæ¯ä½“å’Œæ¶ˆæ¯å¤´åˆ†æ•£åˆ°ä¸åŒçš„bufferä¸­ï¼Œè¿™æ ·ä½ å¯ä»¥æ–¹ä¾¿çš„å¤„ç†æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ã€‚ Scattering Reads Scattering Readsæ˜¯æŒ‡æ•°æ®ä»ä¸€ä¸ªchannelè¯»å–åˆ°å¤šä¸ªbufferä¸­ã€‚ 1234ByteBuffer header = ByteBuffer.allocate(128); ByteBuffer body = ByteBuffer.allocate(1024); ByteBuffer[] bufferArray = { header, body }; channel.read(bufferArray); â€‹ æ³¨æ„bufferé¦–å…ˆè¢«æ’å…¥åˆ°æ•°ç»„ï¼Œç„¶åå†å°†æ•°ç»„ä½œä¸ºchannel.read() çš„è¾“å…¥å‚æ•°ã€‚read()æ–¹æ³•æŒ‰ç…§bufferåœ¨æ•°ç»„ä¸­çš„é¡ºåºå°†ä»channelä¸­è¯»å–çš„æ•°æ®å†™å…¥åˆ°bufferï¼Œå½“ä¸€ä¸ªbufferè¢«å†™æ»¡åï¼Œchannelç´§æ¥ç€å‘å¦ä¸€ä¸ªbufferä¸­å†™ã€‚ Scattering Readsåœ¨ç§»åŠ¨ä¸‹ä¸€ä¸ªbufferå‰ï¼Œå¿…é¡»å¡«æ»¡å½“å‰çš„bufferï¼Œè¿™ä¹Ÿæ„å‘³ç€å®ƒä¸é€‚ç”¨äºåŠ¨æ€æ¶ˆæ¯(è¯‘è€…æ³¨ï¼šæ¶ˆæ¯å¤§å°ä¸å›ºå®š)ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå­˜åœ¨æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ï¼Œæ¶ˆæ¯å¤´å¿…é¡»å®Œæˆå¡«å……ï¼ˆä¾‹å¦‚ 128byteï¼‰ï¼ŒScattering Readsæ‰èƒ½æ­£å¸¸å·¥ä½œã€‚ Gathering Writes â€‹ Gathering Writesæ˜¯æŒ‡æ•°æ®ä»å¤šä¸ªbufferå†™å…¥åˆ°åŒä¸€ä¸ªchannelã€‚ 1234ByteBuffer header = ByteBuffer.allocate(128); ByteBuffer body = ByteBuffer.allocate(1024); //write data into buffers ByteBuffer[] bufferArray = { header, body };channel.write(bufferArray); â€‹ buffersæ•°ç»„æ˜¯write()æ–¹æ³•çš„å…¥å‚ï¼Œwrite()æ–¹æ³•ä¼šæŒ‰ç…§bufferåœ¨æ•°ç»„ä¸­çš„é¡ºåºï¼Œå°†æ•°æ®å†™å…¥åˆ°channelï¼Œæ³¨æ„åªæœ‰positionå’Œlimitä¹‹é—´çš„æ•°æ®æ‰ä¼šè¢«å†™å…¥ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªbufferçš„å®¹é‡ä¸º128byteï¼Œä½†æ˜¯ä»…ä»…åŒ…å«58byteçš„æ•°æ®ï¼Œé‚£ä¹ˆè¿™58byteçš„æ•°æ®å°†è¢«å†™å…¥åˆ°channelä¸­ã€‚å› æ­¤ä¸Scattering Readsç›¸åï¼ŒGathering Writesèƒ½è¾ƒå¥½çš„å¤„ç†åŠ¨æ€æ¶ˆæ¯ã€‚ ç¼“å†²åŒº å‘é€ç»™ä¸€ä¸ªé€šé“çš„æ‰€æœ‰æ•°æ®éƒ½å¿…é¡»é¦–å…ˆæ”¾åˆ°ç¼“å†²åŒºä¸­ï¼ŒåŒæ ·åœ°ï¼Œä»é€šé“ä¸­è¯»å–çš„ä»»ä½•æ•°æ®éƒ½è¦å…ˆè¯»åˆ°ç¼“å†²åŒºä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä¼šç›´æ¥å¯¹é€šé“è¿›è¡Œè¯»å†™æ•°æ®ï¼Œè€Œæ˜¯è¦å…ˆç»è¿‡ç¼“å†²åŒºã€‚ ç¼“å†²åŒºå®è´¨ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ç¼“å†²åŒºæä¾›äº†å¯¹æ•°æ®çš„ç»“æ„åŒ–è®¿é—®ï¼Œè€Œä¸”è¿˜å¯ä»¥è·Ÿè¸ªç³»ç»Ÿçš„è¯»/å†™è¿›ç¨‹ã€‚ â€‹ ç¼“å†²åŒºæœ¬è´¨ä¸Šæ˜¯ä¸€å—å¯ä»¥å†™å…¥æ•°æ®ï¼Œç„¶åå¯ä»¥ä»ä¸­è¯»å–æ•°æ®çš„å†…å­˜ã€‚è¿™å—å†…å­˜è¢«åŒ…è£…æˆNIO Bufferå¯¹è±¡ï¼Œå¹¶æä¾›äº†ä¸€ç»„æ–¹æ³•ï¼Œç”¨æ¥æ–¹ä¾¿çš„è®¿é—®è¯¥å—å†…å­˜ã€‚ç¼“å†²åŒºå®é™…ä¸Šæ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œæ›´ç›´æ¥çš„è¯´ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨NIOåº“ä¸­ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ˜¯ç”¨ç¼“å†²åŒºå¤„ç†çš„ã€‚åœ¨è¯»å–æ•°æ®æ—¶ï¼Œå®ƒæ˜¯ç›´æ¥è¯»åˆ°ç¼“å†²åŒºä¸­çš„ï¼› åœ¨å†™å…¥æ•°æ®æ—¶ï¼Œå®ƒä¹Ÿæ˜¯å†™å…¥åˆ°ç¼“å†²åŒºä¸­çš„ï¼›ä»»ä½•æ—¶å€™è®¿é—® NIO ä¸­çš„æ•°æ®ï¼Œéƒ½æ˜¯å°†å®ƒæ”¾åˆ°ç¼“å†²åŒºä¸­ã€‚è€Œåœ¨é¢å‘æµI/Oç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ˜¯ç›´æ¥å†™å…¥æˆ–è€…ç›´æ¥å°†æ•°æ®è¯»å–åˆ°Streamå¯¹è±¡ä¸­ã€‚åœ¨NIOä¸­ï¼Œæ‰€æœ‰çš„ç¼“å†²åŒºç±»å‹éƒ½ç»§æ‰¿äºæŠ½è±¡ç±»Bufferï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯ByteBufferï¼Œå¯¹äºJavaä¸­çš„åŸºæœ¬ç±»å‹ï¼ŒåŸºæœ¬éƒ½æœ‰ä¸€ä¸ªå…·ä½“Bufferç±»å‹ä¸ä¹‹ç›¸å¯¹åº”ï¼Œå®ƒä»¬ä¹‹é—´çš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç¼“å†²åŒºåŒ…æ‹¬ä»¥ä¸‹ç±»å‹ï¼š ByteBuffer CharBuffer ShortBuffer IntBuffer LongBuffer FloatBuffer DoubleBuffer ç¼“å†²åŒºçŠ¶æ€å˜é‡ capacityï¼šæœ€å¤§å®¹é‡ï¼› positionï¼šå½“å‰å·²ç»è¯»å†™çš„å­—èŠ‚æ•°ï¼› limitï¼šè¿˜å¯ä»¥è¯»å†™çš„å­—èŠ‚æ•°ã€‚ Bufferçš„åŸºæœ¬ç”¨æ³• 1ã€ä½¿ç”¨Bufferè¯»å†™æ•°æ®ï¼Œä¸€èˆ¬éµå¾ªä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š ï¼ˆ1ï¼‰å†™å…¥æ•°æ®åˆ°Buffer ï¼ˆ2ï¼‰è°ƒç”¨flip()æ–¹æ³• ï¼ˆ3ï¼‰ä»Bufferä¸­è¯»å–æ•°æ® ï¼ˆ4ï¼‰è°ƒç”¨clear()æ–¹æ³•æˆ–è€…compact()æ–¹æ³• å½“å‘bufferå†™å…¥æ•°æ®æ—¶ï¼Œbufferä¼šè®°å½•ä¸‹å†™äº†å¤šå°‘æ•°æ®ã€‚ä¸€æ—¦è¦è¯»å–æ•°æ®ï¼Œéœ€è¦é€šè¿‡flip()æ–¹æ³•å°†Bufferä»å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼ã€‚åœ¨è¯»æ¨¡å¼ä¸‹ï¼Œå¯ä»¥è¯»å–ä¹‹å‰å†™å…¥åˆ°bufferçš„æ‰€æœ‰æ•°æ®ã€‚ä¸€æ—¦è¯»å®Œäº†æ‰€æœ‰çš„æ•°æ®ï¼Œå°±éœ€è¦æ¸…ç©ºç¼“å†²åŒºï¼Œè®©å®ƒå¯ä»¥å†æ¬¡è¢«å†™å…¥ã€‚æœ‰ä¸¤ç§æ–¹å¼èƒ½æ¸…ç©ºç¼“å†²åŒºï¼šè°ƒç”¨clear()æˆ–compact()æ–¹æ³•ã€‚clear()æ–¹æ³•ä¼šæ¸…ç©ºæ•´ä¸ªç¼“å†²åŒºã€‚compact()æ–¹æ³•åªä¼šæ¸…é™¤å·²ç»è¯»è¿‡çš„æ•°æ®ã€‚ä»»ä½•æœªè¯»çš„æ•°æ®éƒ½è¢«ç§»åˆ°ç¼“å†²åŒºçš„èµ·å§‹å¤„ï¼Œæ–°å†™å…¥çš„æ•°æ®å°†æ”¾åˆ°ç¼“å†²åŒºæœªè¯»æ•°æ®çš„åé¢ã€‚ Bufferä¸IntBufferä¾‹å­ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package pers.lxl.mylearnproject.javase.io.nio.buffer;import org.junit.jupiter.api.Test;import java.io.IOException;import java.io.RandomAccessFile;import java.nio.ByteBuffer;import java.nio.IntBuffer;import java.nio.channels.FileChannel;public class BufferDemo { //ä½¿ç”¨Bufferçš„ä¾‹å­ @Test public void testConect2() throws IOException { RandomAccessFile aFile = new RandomAccessFile(&quot;src/main/resources/fileTest.txt&quot;, &quot;rw&quot;); FileChannel inChannel = aFile.getChannel(); //create buffer with capacity of 48 bytes ByteBuffer buf = ByteBuffer.allocate(48); int bytesRead = inChannel.read(buf); //read into buffer. while (bytesRead != -1) { buf.flip(); //make buffer ready for read while (buf.hasRemaining()) { System.out.print((char) buf.get()); // read 1 byte at a time } buf.clear(); //make buffer ready for writing bytesRead = inChannel.read(buf); } } //ä½¿ç”¨IntBufferçš„ä¾‹å­ @Test public void testConect3() throws IOException { // åˆ†é…æ–°çš„intç¼“å†²åŒºï¼Œå‚æ•°ä¸ºç¼“å†²åŒºå®¹é‡ // æ–°ç¼“å†²åŒºçš„å½“å‰ä½ç½®å°†ä¸ºé›¶ï¼Œå…¶ç•Œé™(é™åˆ¶ä½ç½®)å°†ä¸ºå…¶å®¹é‡ã€‚ // å®ƒå°†å…·æœ‰ä¸€ä¸ªåº•å±‚å®ç°æ•°ç»„ï¼Œå…¶æ•°ç»„åç§»é‡å°†ä¸ºé›¶ã€‚ IntBuffer buffer = IntBuffer.allocate(8); for (int i = 0; i &lt; buffer.capacity(); ++i) { int j = 2 * (i + 1); // å°†ç»™å®šæ•´æ•°å†™å…¥æ­¤ç¼“å†²åŒºçš„å½“å‰ä½ç½®ï¼Œå½“å‰ä½ç½®é€’å¢ buffer.put(j); } // é‡è®¾æ­¤ç¼“å†²åŒºï¼Œå°†é™åˆ¶è®¾ç½®ä¸ºå½“å‰ä½ç½®ï¼Œç„¶åå°†å½“å‰ä½ç½®è®¾ç½®ä¸º0 buffer.flip(); // æŸ¥çœ‹åœ¨å½“å‰ä½ç½®å’Œé™åˆ¶ä½ç½®ä¹‹é—´æ˜¯å¦æœ‰å…ƒç´  while (buffer.hasRemaining()) { // è¯»å–æ­¤ç¼“å†²åŒºå½“å‰ä½ç½®çš„æ•´æ•°ï¼Œç„¶åå½“å‰ä½ç½®é€’å¢ int j = buffer.get(); System.out.print(j + &quot; &quot;); } }} Bufferçš„capacityã€positionå’Œlimit ä¸ºäº†ç†è§£Bufferçš„å·¥ä½œåŸç†ï¼Œéœ€è¦ç†Ÿæ‚‰å®ƒçš„ä¸‰ä¸ªå±æ€§ï¼š Capacity ã€ Position ã€ limit positionå’Œlimitçš„å«ä¹‰å–å†³äºBufferå¤„åœ¨è¯»æ¨¡å¼è¿˜æ˜¯å†™æ¨¡å¼ã€‚ä¸ç®¡Bufferå¤„åœ¨ä»€ä¹ˆæ¨¡å¼ï¼Œcapacityçš„å«ä¹‰æ€»æ˜¯ä¸€æ ·çš„ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªå…³äºcapacityï¼Œpositionå’Œlimitåœ¨è¯»å†™æ¨¡å¼ä¸­çš„è¯´æ˜ ï¼ˆ1ï¼‰capacity ä½œä¸ºä¸€ä¸ªå†…å­˜å—ï¼ŒBufferæœ‰ä¸€ä¸ªå›ºå®šçš„å¤§å°å€¼ï¼Œä¹Ÿå«â€œcapacityâ€.ä½ åªèƒ½å¾€é‡Œå†™capacityä¸ªbyteã€longï¼Œcharç­‰ç±»å‹ã€‚ä¸€æ—¦Bufferæ»¡äº†ï¼Œéœ€è¦å°†å…¶æ¸…ç©ºï¼ˆé€šè¿‡è¯»æ•°æ®æˆ–è€…æ¸…é™¤æ•°æ®ï¼‰æ‰èƒ½ç»§ç»­å†™æ•°æ®å¾€é‡Œå†™æ•°æ®ã€‚ ï¼ˆ2ï¼‰position 1ï¼‰å†™æ•°æ®åˆ°Bufferä¸­æ—¶ï¼Œpositionè¡¨ç¤ºå†™å…¥æ•°æ®çš„å½“å‰ä½ç½®ï¼Œpositionçš„åˆå§‹å€¼ä¸º0ã€‚å½“ä¸€ä¸ªbyteã€longç­‰æ•°æ®å†™åˆ°Bufferåï¼Œ positionä¼šå‘ä¸‹ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå¯æ’å…¥æ•°æ®çš„Bufferå•å…ƒã€‚positionæœ€å¤§å¯ä¸ºcapacity â€“ 1ï¼ˆå› ä¸ºpositionçš„åˆå§‹å€¼ä¸º0ï¼‰. 2ï¼‰è¯»æ•°æ®åˆ°Bufferä¸­æ—¶ï¼Œpositionè¡¨ç¤ºè¯»å…¥æ•°æ®çš„å½“å‰ä½ç½®ï¼Œå¦‚position=2æ—¶è¡¨ç¤ºå·²å¼€å§‹è¯»å…¥äº†3ä¸ªbyteï¼Œæˆ–ä»ç¬¬3ä¸ªbyteå¼€å§‹è¯»å–ã€‚é€šè¿‡ByteBuffer.flip()åˆ‡æ¢åˆ°è¯»æ¨¡å¼æ—¶positionä¼šè¢«é‡ç½®ä¸º0ï¼Œå½“Bufferä»positionè¯»å…¥æ•°æ®åï¼Œpositionä¼šä¸‹ç§»åˆ°ä¸‹ä¸€ä¸ªå¯è¯»å…¥çš„æ•°æ®Bufferå•å…ƒã€‚ ï¼ˆ3ï¼‰limit 1ï¼‰å†™æ•°æ®æ—¶ï¼Œlimitè¡¨ç¤ºå¯å¯¹Bufferæœ€å¤šå†™å…¥å¤šå°‘ä¸ªæ•°æ®ã€‚å†™æ¨¡å¼ä¸‹ï¼Œlimitç­‰äºBufferçš„capacityã€‚ 2ï¼‰è¯»æ•°æ®æ—¶ï¼Œlimitè¡¨ç¤ºBufferé‡Œæœ‰å¤šå°‘å¯è¯»æ•°æ®ï¼ˆnot nullçš„æ•°æ®ï¼‰ï¼Œå› æ­¤èƒ½è¯»åˆ°ä¹‹å‰å†™å…¥çš„æ‰€æœ‰æ•°æ®ï¼ˆlimitè¢«è®¾ç½®æˆå·²å†™æ•°æ®çš„æ•°é‡ï¼Œè¿™ä¸ªå€¼åœ¨å†™æ¨¡å¼ä¸‹å°±æ˜¯positionï¼‰ã€‚ Bufferçš„ç±»å‹ Java NIO æœ‰ä»¥ä¸‹Bufferç±»å‹ ByteBuffer MappedByteBuffer CharBuffer DoubleBuffer FloatBuffer IntBuffer LongBuffer ShortBuffer è¿™äº›Bufferç±»å‹ä»£è¡¨äº†ä¸åŒçš„æ•°æ®ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯å¯ä»¥é€šè¿‡charï¼Œshortï¼Œintï¼Œlongï¼Œfloat æˆ– doubleç±»å‹æ¥æ“ä½œç¼“å†²åŒºä¸­çš„å­—èŠ‚ã€‚ Bufferåˆ†é…å’Œå†™æ•°æ® Bufferåˆ†é… è¦æƒ³è·å¾—ä¸€ä¸ªBufferå¯¹è±¡é¦–å…ˆè¦è¿›è¡Œåˆ†é…ã€‚ æ¯ä¸€ä¸ªBufferç±»éƒ½æœ‰ä¸€ä¸ªallocateæ–¹æ³•ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ†é…48å­—èŠ‚capacityçš„ByteBufferçš„ä¾‹å­ã€‚ ByteBuffer buf = ByteBuffer.allocate(48); è¿™æ˜¯åˆ†é…ä¸€ä¸ªå¯å­˜å‚¨1024ä¸ªå­—ç¬¦çš„CharBufferï¼š CharBuffer buf = CharBuffer.allocate(1024); å‘Bufferä¸­å†™æ•°æ® å†™æ•°æ®åˆ°Bufferæœ‰ä¸¤ç§æ–¹å¼ï¼š ï¼ˆ1ï¼‰ä»Channelå†™åˆ°Bufferã€‚ ï¼ˆ2ï¼‰é€šè¿‡Bufferçš„put()æ–¹æ³•å†™åˆ°Bufferé‡Œã€‚ ä»Channelå†™åˆ°Bufferçš„ä¾‹å­ int bytesRead = inChannel.read(buf); //read into buffer. é€šè¿‡putæ–¹æ³•å†™Bufferçš„ä¾‹å­ï¼š buf.put(127); putæ–¹æ³•æœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œå…è®¸ä½ ä»¥ä¸åŒçš„æ–¹å¼æŠŠæ•°æ®å†™å…¥åˆ°Bufferä¸­ã€‚ä¾‹å¦‚ï¼Œ å†™åˆ°ä¸€ä¸ªæŒ‡å®šçš„ä½ç½®ï¼Œæˆ–è€…æŠŠä¸€ä¸ªå­—èŠ‚æ•°ç»„å†™å…¥åˆ°Buffer flip()æ–¹æ³• flipæ–¹æ³•å°†Bufferä»å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼ã€‚è°ƒç”¨flip()æ–¹æ³•ä¼šå°†positionè®¾å›0ï¼Œå¹¶å°†limitè®¾ç½®æˆä¹‹å‰positionçš„å€¼ã€‚æ¢å¥è¯è¯´ï¼Œpositionç°åœ¨ç”¨äºæ ‡è®°è¯»çš„ä½ç½®ï¼Œlimitè¡¨ç¤ºä¹‹å‰å†™è¿›äº†å¤šå°‘ä¸ªbyteã€charç­‰ ï¼ˆç°åœ¨èƒ½è¯»å–å¤šå°‘ä¸ªbyteã€charç­‰ï¼‰ã€‚ ä»Bufferä¸­è¯»å–æ•°æ® ä»Bufferä¸­è¯»å–æ•°æ®æœ‰ä¸¤ç§æ–¹å¼ï¼š ï¼ˆ1ï¼‰ä»Bufferè¯»å–æ•°æ®åˆ°Channelã€‚ ï¼ˆ2ï¼‰ä½¿ç”¨get()æ–¹æ³•ä»Bufferä¸­è¯»å–æ•°æ®ã€‚ ä»Bufferè¯»å–æ•°æ®åˆ°Channelçš„ä¾‹å­ï¼š //read from buffer into channel. int bytesWritten = inChannel.write(buf); ä½¿ç”¨get()æ–¹æ³•ä»Bufferä¸­è¯»å–æ•°æ®çš„ä¾‹å­ byte aByte = buf.get(); getæ–¹æ³•æœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œå…è®¸ä½ ä»¥ä¸åŒçš„æ–¹å¼ä»Bufferä¸­è¯»å–æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä»æŒ‡å®špositionè¯»å–ï¼Œæˆ–è€…ä»Bufferä¸­è¯»å–æ•°æ®åˆ°å­—èŠ‚æ•°ç»„ã€‚ Bufferå‡ ä¸ªæ–¹æ³• rewind()æ–¹æ³•æ–¹æ³• Buffer.rewind()å°†positionè®¾å›0ï¼Œæ‰€ä»¥ä½ å¯ä»¥é‡è¯»Bufferä¸­çš„æ‰€æœ‰æ•°æ®ã€‚limitä¿æŒä¸å˜ï¼Œä»ç„¶è¡¨ç¤ºèƒ½ä»Bufferä¸­è¯»å–å¤šå°‘ä¸ªå…ƒç´ ï¼ˆbyteã€charç­‰ï¼‰ã€‚ clear()ä¸compact()æ–¹æ³•æ–¹æ³• â€‹ ä¸€æ—¦è¯»å®ŒBufferä¸­çš„æ•°æ®ï¼Œéœ€è¦è®©Bufferå‡†å¤‡å¥½å†æ¬¡è¢«å†™å…¥ã€‚å¯ä»¥é€šè¿‡clear()æˆ–compact()æ–¹æ³•æ¥å®Œæˆã€‚ å¦‚æœè°ƒç”¨çš„æ˜¯**clear()æ–¹æ³•ï¼Œpositionå°†è¢«è®¾å›0ï¼Œlimitè¢«è®¾ç½®æˆ capacityçš„å€¼ã€‚æ¢å¥è¯è¯´ï¼ŒBuffer è¢«æ¸…ç©ºäº†ã€‚Bufferä¸­çš„æ•°æ®å¹¶æœªæ¸…é™¤ï¼Œåªæ˜¯è¿™äº›æ ‡è®°å‘Šè¯‰æˆ‘ä»¬å¯ä»¥ä»å“ªé‡Œå¼€å§‹å¾€Bufferé‡Œå†™æ•°æ®ã€‚ å¦‚æœBufferä¸­æœ‰ä¸€äº›æœªè¯»çš„æ•°æ®ï¼Œè°ƒç”¨clear()æ–¹æ³•ï¼Œæ•°æ®å°†â€œè¢«é—å¿˜â€ï¼Œæ„å‘³ç€ä¸å†æœ‰ä»»ä½•æ ‡è®°ä¼šå‘Šè¯‰ä½ å“ªäº›æ•°æ®è¢«è¯»è¿‡ï¼Œå“ªäº›è¿˜æ²¡æœ‰ã€‚ å¦‚æœBufferä¸­ä»æœ‰æœªè¯»çš„æ•°æ®ï¼Œä¸”åç»­è¿˜éœ€è¦è¿™äº›æ•°æ®ï¼Œä½†æ˜¯æ­¤æ—¶æƒ³è¦å…ˆå…ˆå†™äº›æ•°æ®ï¼Œé‚£ä¹ˆä½¿ç”¨compact()**æ–¹æ³•ã€‚ compact()æ–¹æ³•å°†æ‰€æœ‰æœªè¯»çš„æ•°æ®æ‹·è´åˆ°Bufferèµ·å§‹å¤„ã€‚ç„¶åå°†positionè®¾åˆ°æœ€åä¸€ä¸ªæœªè¯»å…ƒç´ æ­£åé¢ã€‚limitå±æ€§ä¾ç„¶åƒclear()æ–¹æ³•ä¸€æ ·ï¼Œè®¾ç½®æˆcapacityã€‚ç°åœ¨Bufferå‡†å¤‡å¥½å†™æ•°æ®äº†ï¼Œä½†æ˜¯ä¸ä¼šè¦†ç›–æœªè¯»çš„æ•°æ®ã€‚ mark()ä¸reset()æ–¹æ³•æ–¹æ³• é€šè¿‡è°ƒç”¨Buffer.mark()æ–¹æ³•ï¼Œå¯ä»¥æ ‡è®°Bufferä¸­çš„ä¸€ä¸ªç‰¹å®špositionã€‚ä¹‹åå¯ä»¥é€šè¿‡è°ƒç”¨Buffer.reset()æ–¹æ³•æ¢å¤åˆ°è¿™ä¸ªpositionã€‚ä¾‹å¦‚ï¼š buffer.mark(); //call buffer.get() a couple of times, e.g. during parsing. buffer.reset(); //set position back to mark. ç¼“å†²åŒºæ“ä½œ ç¼“å†²åŒºåˆ†ç‰‡ â€‹ åœ¨NIOä¸­ï¼Œé™¤äº†å¯ä»¥åˆ†é…æˆ–è€…åŒ…è£…ä¸€ä¸ªç¼“å†²åŒºå¯¹è±¡å¤–ï¼Œè¿˜å¯ä»¥æ ¹æ®ç°æœ‰çš„ç¼“å†²åŒºå¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªå­ç¼“å†²åŒºï¼Œå³åœ¨ç°æœ‰ç¼“å†²åŒºä¸Šåˆ‡å‡ºä¸€ç‰‡æ¥ä½œä¸ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼Œä½†ç°æœ‰çš„ç¼“å†²åŒºä¸åˆ›å»ºçš„å­ç¼“å†²åŒºåœ¨åº•å±‚æ•°ç»„å±‚é¢ä¸Šæ˜¯æ•°æ®å…±äº«çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå­ç¼“å†²åŒºç›¸å½“äºæ˜¯ç°æœ‰ç¼“å†²åŒºçš„ä¸€ä¸ªè§†å›¾çª—å£ã€‚è°ƒç”¨**slice()**æ–¹æ³•å¯ä»¥åˆ›å»ºä¸€ä¸ªå­ç¼“å†²åŒºã€‚ 1234567891011121314151617181920212223@Testpublic void testConect2() throws IOException { ByteBuffer buffer = ByteBuffer.allocate(10); // ç¼“å†²åŒºä¸­çš„æ•°æ®0-9 for (int i = 0; i &lt; buffer.capacity(); ++i) { buffer.put((byte) i); } // åˆ›å»ºå­ç¼“å†²åŒº buffer.position(3); buffer.limit(7); ByteBuffer slice = buffer.slice(); // æ”¹å˜å­ç¼“å†²åŒºçš„å†…å®¹ for (int i = 0; i &lt; slice.capacity(); ++i) { byte b = slice.get(i); b *= 10; slice.put(i, b); } buffer.position(0); buffer.limit(buffer.capacity()); while (buffer.remaining() &gt; 0) { System.out.println(buffer.get()); }} åªè¯»ç¼“å†²åŒº â€‹ åªè¯»ç¼“å†²åŒºéå¸¸ç®€å•ï¼Œå¯è¯»ç¦å†™ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨ç¼“å†²åŒºçš„asReadOnlyBuffer()æ–¹æ³•ï¼Œå°†ä»»ä½•å¸¸è§„ç¼“å†²åŒºè½¬ æ¢ä¸ºåªè¯»ç¼“å†²åŒºï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªä¸åŸç¼“å†²åŒºå®Œå…¨ç›¸åŒçš„ç¼“å†²åŒºï¼Œå¹¶ä¸åŸç¼“å†²åŒºå…±äº«æ•°æ®ï¼Œåªä¸è¿‡å®ƒæ˜¯åªè¯»çš„ã€‚åŸå˜åªè¯»å˜ï¼Œå¦‚æœåŸç¼“å†²åŒºçš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–ï¼Œåªè¯»ç¼“å†²åŒºçš„å†…å®¹ä¹Ÿéšä¹‹å‘ç”Ÿå˜åŒ–ï¼š 12345678910111213141516171819202122@Test public void testConect4() throws IOException { ByteBuffer buffer = ByteBuffer.allocate(10); // ç¼“å†²åŒºä¸­çš„æ•°æ®0-9 for (int i = 0; i &lt; buffer.capacity(); ++i) { buffer.put((byte) i); } // åˆ›å»ºåªè¯»ç¼“å†²åŒº ByteBuffer readonly = buffer.asReadOnlyBuffer(); // æ”¹å˜åŸç¼“å†²åŒºçš„å†…å®¹ for (int i = 0; i &lt; buffer.capacity(); ++i) { byte b = buffer.get(i); b *= 10; buffer.put(i, b); } readonly.position(0); readonly.limit(buffer.capacity()); // åªè¯»ç¼“å†²åŒºçš„å†…å®¹ä¹Ÿéšä¹‹æ”¹å˜ while (readonly.remaining() &gt; 0) { System.out.println(readonly.get()); } } â€‹ å¦‚æœå°è¯•ä¿®æ”¹åªè¯»ç¼“å†²åŒºçš„å†…å®¹ï¼Œåˆ™ä¼šæŠ¥ReadOnlyBufferExceptionå¼‚å¸¸ã€‚åªè¯»ç¼“å†²åŒºå¯¹äºä¿æŠ¤æ•°æ®å¾ˆæœ‰ç”¨ã€‚åœ¨å°†ç¼“å†²åŒºä¼ é€’ç»™æŸä¸ª å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œæ— æ³•çŸ¥é“è¿™ä¸ªæ–¹æ³•æ˜¯å¦ä¼šä¿®æ”¹ç¼“å†²åŒºä¸­çš„æ•°æ®ã€‚åˆ›å»ºä¸€ä¸ªåªè¯»çš„ç¼“å†²åŒºå¯ä»¥ä¿è¯è¯¥ç¼“å†²åŒºä¸ä¼šè¢«ä¿®æ”¹ã€‚åªå¯ä»¥æŠŠå¸¸è§„ç¼“å†²åŒºè½¬æ¢ä¸ºåªè¯»ç¼“å†²åŒºï¼Œè€Œä¸èƒ½å°†åªè¯»çš„ç¼“å†²åŒºè½¬æ¢ä¸ºå¯å†™çš„ç¼“å†²åŒºã€‚ ç›´æ¥ç¼“å†²åŒº â€‹ ç›´æ¥ç¼“å†²åŒºæ˜¯ä¸ºåŠ å¿«I/Oé€Ÿåº¦ï¼Œä½¿ç”¨ä¸€ç§ç‰¹æ®Šæ–¹å¼ä¸ºå…¶åˆ†é…å†…å­˜çš„ç¼“å†²åŒºï¼ŒJDKæ–‡æ¡£ä¸­çš„æè¿°ä¸ºï¼šç»™å®šä¸€ä¸ªç›´æ¥å­—èŠ‚ç¼“å†²åŒºï¼ŒJavaè™šæ‹Ÿæœºå°†å°½æœ€å¤§åŠªåŠ›ç›´æ¥å¯¹å®ƒæ‰§è¡Œæœ¬æœºI/Oæ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¼šåœ¨æ¯ä¸€æ¬¡è°ƒç”¨åº•å±‚æ“ä½œç³»ç»Ÿçš„æœ¬æœºI/Oæ“ä½œä¹‹å‰(æˆ–ä¹‹å)ï¼Œå°è¯•é¿å…å°†ç¼“å†²åŒºçš„å†…å®¹æ‹·è´åˆ°ä¸€ä¸ªä¸­é—´ç¼“å†²åŒºä¸­ æˆ–è€…ä»ä¸€ä¸ªä¸­é—´ç¼“å†²åŒºä¸­æ‹·è´æ•°æ®ã€‚è¦åˆ†é…ç›´æ¥ç¼“å†²åŒºï¼Œéœ€è¦è°ƒç”¨allocateDirect()æ–¹æ³•ï¼Œè€Œä¸æ˜¯allocate()æ–¹æ³•ï¼Œä½¿ç”¨æ–¹å¼ä¸æ™®é€šç¼“å†²åŒºå¹¶æ— åŒºåˆ«ã€‚ æ‹·è´æ–‡ä»¶ç¤ºä¾‹ï¼š 1234567891011121314151617181920 @Test public void testConect5() throws IOException { String infile = &quot;d:\\\\atguigu\\\\01.txt&quot;; FileInputStream fin = new FileInputStream(infile); FileChannel fcin = fin.getChannel(); String outfile = String.format(&quot;d:\\\\atguigu\\\\02.txt&quot;); FileOutputStream fout = new FileOutputStream(outfile); FileChannel fcout = fout.getChannel();// ä½¿ç”¨allocateDirectï¼Œè€Œä¸æ˜¯allocate ByteBuffer buffer = ByteBuffer.allocateDirect(1024); while (true) { buffer.clear(); int r = fcin.read(buffer); if (r == -1) { break; } buffer.flip(); fcout.write(buffer); } } å†…å­˜æ˜ å°„æ–‡ä»¶I/O â€‹ å†…å­˜æ˜ å°„æ–‡ä»¶I/Oæ˜¯ä¸€ç§è¯»å’Œå†™æ–‡ä»¶æ•°æ®çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ¯”å¸¸è§„çš„åŸºäºæµæˆ–è€…åŸºäºé€šé“çš„I/Oå¿«çš„å¤šã€‚å†…å­˜æ˜ å°„æ–‡ä»¶I/Oæ˜¯é€šè¿‡ä½¿æ–‡ä»¶ä¸­çš„æ•°æ®å‡ºç°ä¸º å†…å­˜æ•°ç»„çš„å†…å®¹æ¥å®Œæˆçš„ï¼Œè¿™å…¶åˆå¬èµ·æ¥ä¼¼ä¹ä¸è¿‡å°±æ˜¯å°†æ•´ä¸ªæ–‡ä»¶è¯»åˆ°å†…å­˜ä¸­ï¼Œä½†æ˜¯äº‹å®ä¸Šå¹¶ä¸æ˜¯è¿™æ ·ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåªæœ‰æ–‡ä»¶ä¸­å®é™…è¯»å–æˆ–è€…å†™å…¥çš„éƒ¨åˆ†æ‰ä¼šæ˜ å°„åˆ°å†…å­˜ä¸­ã€‚ç¤ºä¾‹ä»£ç ï¼š 1234567891011static private final int start = 0; static private final int size = 1024; static public void main(String args[]) throws Exception { RandomAccessFile raf = new RandomAccessFile(&quot;d:\\\\atguigu\\\\01.txt&quot;, &quot;rw&quot;); FileChannel fc = raf.getChannel(); MappedByteBuffer mbb = fc.map(FileChannel.MapMode.READ_WRITE, start, size); mbb.put(0, (byte) 97); mbb.put(1023, (byte) 122); raf.close(); } é€‰æ‹©å™¨ Selectorç®€ä»‹ 1ã€ Selectorå’Œ Channelå…³ç³» â€‹ Selector ä¸€èˆ¬ç§° ä¸ºé€‰æ‹©å™¨ ï¼Œä¹Ÿå¯ä»¥ç¿»è¯‘ä¸º å¤šè·¯å¤ç”¨å™¨ ã€‚å®ƒæ˜¯Java NIOæ ¸å¿ƒç»„ä»¶ä¸­çš„ä¸€ä¸ªï¼Œ**ç”¨äºæ£€æŸ¥ä¸€ä¸ªæˆ–å¤šä¸ªNIO Channelï¼ˆé€šé“ï¼‰çš„çŠ¶æ€æ˜¯å¦å¤„äºå¯è¯»ã€å¯å†™ã€‚**å¦‚æ­¤å¯ä»¥å®ç°å•çº¿ç¨‹ç®¡ç†å¤šä¸ªchannels,ä¹Ÿå°±æ˜¯å¯ä»¥ç®¡ç†å¤šä¸ªç½‘ç»œé“¾æ¥ã€‚å³ä½¿ç”¨Selectorçš„å¥½å¤„åœ¨äºï¼š ä½¿ç”¨æ›´å°‘çš„çº¿ç¨‹æ¥å°±å¯ä»¥æ¥å¤„ç†é€šé“äº†ï¼Œ ç›¸æ¯”ä½¿ç”¨å¤šä¸ªçº¿ç¨‹ï¼Œé¿å…äº†çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å¸¦æ¥çš„å¼€é”€ã€‚NIO å®ç°äº† IO å¤šè·¯å¤ç”¨ä¸­çš„ Reactor æ¨¡å‹ï¼Œä¸€ä¸ªçº¿ç¨‹ Thread ä½¿ç”¨ä¸€ä¸ªé€‰æ‹©å™¨ Selector é€šè¿‡è½®è¯¢çš„æ–¹å¼å»ç›‘å¬å¤šä¸ªé€šé“ Channel ä¸Šçš„äº‹ä»¶ï¼Œä»è€Œè®©ä¸€ä¸ªçº¿ç¨‹å°±å¯ä»¥å¤„ç†å¤šä¸ªäº‹ä»¶ã€‚é€šè¿‡é…ç½®ç›‘å¬çš„é€šé“ Channel ä¸ºéé˜»å¡ï¼Œé‚£ä¹ˆå½“ Channel ä¸Šçš„ IO äº‹ä»¶è¿˜æœªåˆ°è¾¾æ—¶ï¼Œå°±ä¸ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ä¸€ç›´ç­‰å¾…ï¼Œè€Œæ˜¯ç»§ç»­è½®è¯¢å…¶å®ƒ Channelï¼Œæ‰¾åˆ° IO äº‹ä»¶å·²ç»åˆ°è¾¾çš„ Channel æ‰§è¡Œã€‚å› ä¸ºåˆ›å»ºå’Œåˆ‡æ¢çº¿ç¨‹çš„å¼€é”€å¾ˆå¤§ï¼Œå› æ­¤ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†å¤šä¸ªäº‹ä»¶è€Œä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªäº‹ä»¶ï¼Œå¯¹äº IO å¯†é›†å‹çš„åº”ç”¨å…·æœ‰å¾ˆå¥½åœ°æ€§èƒ½ã€‚ 2ã€ å¯é€‰æ‹©é€šé“ (SelectableChannel) ï¼ˆ1ï¼‰ä¸æ˜¯æ‰€æœ‰çš„Channeléƒ½å¯ä»¥è¢«Selector å¤ç”¨çš„ã€‚æ¯”æ–¹è¯´ï¼ŒFileChannelå°±ä¸èƒ½è¢«é€‰æ‹©å™¨å¤ç”¨ã€‚åˆ¤æ–­ä¸€ä¸ªChannel èƒ½è¢«Selector å¤ç”¨ï¼Œæœ‰ä¸€ä¸ªå‰æï¼šåˆ¤æ–­ä»–æ˜¯å¦ç»§æ‰¿äº†ä¸€ä¸ªæŠ½è±¡ç±»SelectableChannelã€‚å¦‚æœç»§æ‰¿äº†SelectableChannelï¼Œåˆ™å¯ä»¥è¢«å¤ç”¨ï¼Œå¦åˆ™ä¸èƒ½ã€‚ ï¼ˆ2ï¼‰SelectableChannelç±»æä¾›äº†å®ç°é€šé“çš„å¯é€‰æ‹©æ€§æ‰€éœ€è¦çš„å…¬å…±æ–¹æ³•ã€‚å®ƒæ˜¯æ‰€æœ‰æ”¯æŒå°±ç»ªæ£€æŸ¥çš„é€šé“ç±»çš„çˆ¶ç±»ã€‚æ‰€æœ‰socketé€šé“ï¼Œéƒ½ç»§æ‰¿äº†SelectableChannelç±»éƒ½æ˜¯å¯é€‰æ‹©çš„ï¼ŒåŒ…æ‹¬ä»ç®¡é“(Pipe)å¯¹è±¡çš„ä¸­è·å¾—çš„é€šé“ã€‚è€ŒFileChannelç±»ï¼Œæ²¡æœ‰ç»§æ‰¿SelectableChannelï¼Œå› æ­¤æ˜¯ä¸æ˜¯å¯é€‰é€šé“ã€‚ ï¼ˆ3ï¼‰ä¸€ä¸ªé€šé“å¯ä»¥è¢«æ³¨å†Œåˆ°å¤šä¸ªé€‰æ‹©å™¨ä¸Šï¼Œä½†å¯¹æ¯ä¸ªé€‰æ‹©å™¨è€Œè¨€åªèƒ½è¢«æ³¨å†Œä¸€æ¬¡,å³é€šé“ä¸é€‰æ‹©å™¨ä¸€å¯¹å¤šã€‚é€šé“å’Œé€‰æ‹©å™¨ä¹‹é—´çš„å…³ç³»ï¼Œä½¿ç”¨æ³¨å†Œçš„æ–¹å¼å®Œæˆã€‚SelectableChannelå¯ä»¥è¢«æ³¨å†Œåˆ°Selectorå¯¹è±¡ä¸Šï¼Œåœ¨æ³¨å†Œçš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šé€šé“çš„å“ªäº›æ“ä½œï¼Œæ˜¯Selectoræ„Ÿå…´è¶£çš„ã€‚ 3ã€Channelæ³¨å†Œåˆ°æ³¨å†Œåˆ°Selector ï¼ˆ1ï¼‰ä½¿ç”¨Channel.registerï¼ˆSelector selï¼Œint opsï¼‰æ–¹æ³•ï¼Œå°†ä¸€ä¸ªé€šé“æ³¨å†Œåˆ°ä¸€ä¸ªé€‰æ‹©å™¨æ—¶ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡å®šé€šé“è¦æ³¨å†Œçš„é€‰æ‹©å™¨ã€‚ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šé€‰æ‹©å™¨éœ€è¦æŸ¥è¯¢çš„é€šé“æ“ä½œã€‚ ï¼ˆ2ï¼‰å¯ä»¥ä¾›é€‰æ‹©å™¨æŸ¥è¯¢çš„é€šé“æ“ä½œå››ç±»ï¼š å¯è¯» : SelectionKey.OP_READ å¯å†™ : SelectionKey.OP_WRITE è¿æ¥ : SelectionKey.OP_CONNECT æ¥æ”¶ : SelectionKey.OP_ACCEPT Selectorå¯¹é€šé“çš„å¤šæ“ä½œç±»å‹ç”¨â€œä½æˆ–â€æ“ä½œç¬¦å®ç°ï¼š æ¯”å¦‚ï¼šint key = SelectionKey.OP_READ | SelectionKey.OP_WRITE ; ï¼ˆ3ï¼‰é€‰æ‹©å™¨æŸ¥è¯¢çš„ä¸æ˜¯é€šé“çš„æ“ä½œï¼Œè€Œæ˜¯é€šé“çš„æŸä¸ªæ“ä½œçš„ä¸€ç§å°±ç»ªçŠ¶æ€ã€‚ä»€ä¹ˆæ˜¯æ“ä½œçš„å°±ç»ªçŠ¶æ€ï¼Ÿä¸€æ—¦é€šé“å…·å¤‡å®ŒæˆæŸä¸ªæ“ä½œçš„æ¡ä»¶ï¼Œè¡¨ç¤ºè¯¥é€šé“çš„æŸä¸ªæ“ä½œå·²ç»å°±ç»ªï¼Œå°±å¯ä»¥è¢«SelectoræŸ¥è¯¢åˆ°ï¼Œç¨‹åºå¯ä»¥å¯¹é€šé“è¿›è¡Œå¯¹åº”çš„æ“ä½œã€‚æ¯”æ–¹è¯´ï¼ŒæŸä¸ªSocketChannelé€šé“å¯ä»¥è¿æ¥åˆ°ä¸€ä¸ªæœåŠ¡å™¨ï¼Œåˆ™å¤„äºâ€œè¿æ¥å°±ç»ªâ€(OP_CONNECT)ã€‚å†æ¯”æ–¹è¯´ï¼Œä¸€ä¸ªServerSocketChannelæœåŠ¡å™¨é€šé“å‡†å¤‡å¥½æ¥æ”¶æ–°è¿›å…¥çš„è¿æ¥ï¼Œåˆ™å¤„äºâ€œæ¥æ”¶å°±ç»ªâ€ï¼ˆOP_ACCEPTï¼‰çŠ¶æ€ã€‚è¿˜æ¯”æ–¹è¯´ï¼Œä¸€ä¸ªæœ‰æ•°æ®å¯è¯»çš„é€šé“ï¼Œå¯ä»¥è¯´æ˜¯â€œè¯»å°±ç»ªâ€(OP_READ)ã€‚ä¸€ä¸ªç­‰å¾…å†™æ•°æ®çš„é€šé“å¯ä»¥è¯´æ˜¯â€œå†™å°±ç»ªâ€(OP_WRITE)ã€‚ 4ã€é€‰æ‹©é”®(SelectionKey) ï¼ˆ1ï¼‰Channelæ³¨å†Œåˆ°åï¼Œå¹¶ä¸”ä¸€æ—¦é€šé“å¤„äºæŸç§å°±ç»ªçš„çŠ¶æ€ï¼Œå°±å¯ä»¥è¢«é€‰æ‹©å™¨æŸ¥è¯¢åˆ°ã€‚è¿™ä¸ªå·¥ä½œï¼Œä½¿ç”¨é€‰æ‹©å™¨Selectorçš„selectï¼ˆï¼‰æ–¹æ³•å®Œæˆã€‚selectæ–¹æ³•çš„ä½œç”¨ï¼Œå¯¹æ„Ÿå…´è¶£çš„é€šé“æ“ä½œï¼Œè¿›è¡Œå°±ç»ªçŠ¶æ€çš„æŸ¥è¯¢ã€‚ ï¼ˆ2ï¼‰Selectorå¯ä»¥ä¸æ–­çš„æŸ¥è¯¢Channelä¸­å‘ç”Ÿçš„æ“ä½œçš„å°±ç»ªçŠ¶æ€ã€‚å¹¶ä¸”æŒ‘é€‰æ„Ÿå…´è¶£çš„æ“ä½œå°±ç»ªçŠ¶æ€ã€‚ä¸€æ—¦é€šé“æœ‰æ“ä½œçš„å°±ç»ªçŠ¶æ€è¾¾æˆï¼Œå¹¶ä¸”æ˜¯Selectoræ„Ÿå…´è¶£çš„æ“ä½œï¼Œå°±ä¼šè¢«Selectoré€‰ä¸­ï¼Œæ”¾å…¥é€‰æ‹©é”®é›†åˆä¸­ã€‚ ï¼ˆ3ï¼‰ä¸€ä¸ªé€‰æ‹©é”®ï¼Œé¦–å…ˆæ˜¯åŒ…å«äº†æ³¨å†Œåœ¨Selectorçš„é€šé“æ“ä½œçš„ç±»å‹ï¼Œæ¯”æ–¹è¯´SelectionKey.OP_READã€‚ä¹ŸåŒ…å«äº†ç‰¹å®šçš„é€šé“ä¸ç‰¹å®šçš„é€‰æ‹©å™¨ä¹‹é—´çš„æ³¨å†Œå…³ç³»ã€‚ å¼€å‘åº”ç”¨ç¨‹åºæ˜¯ï¼Œé€‰æ‹©é”®æ˜¯ç¼–ç¨‹çš„å…³é”®ã€‚NIOçš„ç¼–ç¨‹ï¼Œå°±æ˜¯æ ¹æ®å¯¹åº”çš„é€‰æ‹©é”®ï¼Œè¿›è¡Œä¸åŒçš„ä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚ ï¼ˆ4ï¼‰é€‰æ‹©é”®çš„æ¦‚å¿µï¼Œå’Œäº‹ä»¶çš„æ¦‚å¿µæ¯”è¾ƒç›¸ä¼¼ã€‚ä¸€ä¸ªé€‰æ‹©é”®ç±»ä¼¼ç›‘å¬å™¨æ¨¡å¼é‡Œè¾¹çš„ä¸€ä¸ªäº‹ä»¶ã€‚ç”±äºSelectorä¸æ˜¯äº‹ä»¶è§¦å‘çš„æ¨¡å¼ï¼Œè€Œæ˜¯ä¸»åŠ¨å»æŸ¥è¯¢çš„æ¨¡å¼ï¼Œæ‰€ä»¥ä¸å«äº‹ä»¶Eventï¼Œè€Œæ˜¯å«SelectionKeyé€‰æ‹©é”®ã€‚ NIO å¸¸å¸¸è¢«å«åšéé˜»å¡ IOï¼Œä¸»è¦æ˜¯å› ä¸º NIO åœ¨ç½‘ç»œé€šä¿¡ä¸­çš„éé˜»å¡ç‰¹æ€§è¢«å¹¿æ³›ä½¿ç”¨ã€‚ Selectorçš„ä½¿ç”¨æ–¹æ³• 1.Selector çš„åˆ›å»º é€šè¿‡è°ƒç”¨Selector.open()æ–¹æ³•åˆ›å»ºä¸€ä¸ªSelectorå¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š // 1ã€è·å–Selectoré€‰æ‹©å™¨ Selector selector = Selector.open(); 2.æ³¨å†Œ Channel åˆ° Selector è¦å®ç°Selectorç®¡ç†Channelï¼Œéœ€è¦å°†channelæ³¨å†Œåˆ°ç›¸åº”çš„Selectorä¸Š 12345// 1ã€è·å–Selectoré€‰æ‹©å™¨ Selector selector = Selector.open(); // 2ã€è·å–é€šé“ ServerSocketChannel serverSocketChannel = ServerSocketChannel.open(); // 3.è®¾ç½®ä¸ºéé˜»å¡ serverSocketChannel.configureBlocking(false); // 4ã€ç»‘å®šè¿æ¥ serverSocketChannel.bind(new InetSocketAddress(9999)); // 5ã€å°†é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š,å¹¶åˆ¶å®šç›‘å¬äº‹ä»¶ä¸ºï¼šâ€œæ¥æ”¶â€äº‹ä»¶ serverSocketChannel.register(selector,SelectionKey.OP_ACCEPT); ä¸Šé¢é€šè¿‡è°ƒç”¨é€šé“çš„register()æ–¹æ³•ä¼šå°†å®ƒæ³¨å†Œåˆ°ä¸€ä¸ªé€‰æ‹©å™¨ä¸Šã€‚ é¦–å…ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼š ï¼ˆ1ï¼‰ä¸Selectorä¸€èµ·ä½¿ç”¨æ—¶ï¼ŒChannelå¿…é¡»å¤„äºéé˜»å¡æ¨¡å¼ä¸‹ï¼Œå¦åˆ™å°†æŠ›å‡ºå¼‚å¸¸IllegalBlockingModeExceptionã€‚è¿™æ„å‘³ç€ï¼ŒFileChannelä¸èƒ½ä¸Selectorä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºFileChannelä¸èƒ½åˆ‡æ¢åˆ°éé˜»å¡æ¨¡å¼ï¼Œè€Œå¥—æ¥å­—ç›¸å…³çš„æ‰€æœ‰çš„é€šé“éƒ½å¯ä»¥ã€‚ ï¼ˆ2ï¼‰ä¸€ä¸ªé€šé“ï¼Œå¹¶æ²¡æœ‰ä¸€å®šè¦æ”¯æŒæ‰€æœ‰çš„å››ç§æ“ä½œã€‚æ¯”å¦‚æœåŠ¡å™¨é€šé“ServerSocketChannelæ”¯æŒAccept æ¥å—æ“ä½œï¼Œè€ŒSocketChannelå®¢æˆ·ç«¯é€šé“åˆ™ä¸æ”¯æŒã€‚å¯ä»¥é€šè¿‡é€šé“ä¸Šçš„validOps()æ–¹æ³•ï¼Œæ¥è·å–ç‰¹å®šé€šé“ä¸‹æ‰€æœ‰æ”¯æŒçš„æ“ä½œé›†åˆã€‚ 3.è½®è¯¢æŸ¥è¯¢å°±ç»ªæ“ä½œè½®è¯¢æŸ¥è¯¢å°±ç»ªæ“ä½œ ï¼ˆ1ï¼‰é€šè¿‡Selectorçš„selectï¼ˆï¼‰æ–¹æ³•ï¼Œå¯ä»¥æŸ¥è¯¢å‡ºå·²ç»å°±ç»ªçš„é€šé“æ“ä½œï¼Œè¿™äº›å°±ç»ªçš„çŠ¶æ€é›†åˆï¼ŒåŒ…å­˜åœ¨ä¸€ä¸ªå…ƒç´ æ˜¯SelectionKeyå¯¹è±¡çš„Seté›†åˆä¸­ã€‚ ï¼ˆ2ï¼‰ä¸‹é¢æ˜¯Selectorå‡ ä¸ªé‡è½½çš„æŸ¥è¯¢select()æ–¹æ³•ï¼š select():é˜»å¡åˆ°è‡³å°‘æœ‰ä¸€ä¸ªé€šé“åœ¨ä½ æ³¨å†Œçš„äº‹ä»¶ä¸Šå°±ç»ªäº†ã€‚ select(long timeout)ï¼šå’Œselect()ä¸€æ ·ï¼Œä½†æœ€é•¿é˜»å¡äº‹ä»¶ä¸ºtimeoutæ¯«ç§’ã€‚ selectNow():éé˜»å¡ï¼Œåªè¦æœ‰é€šé“å°±ç»ªå°±ç«‹åˆ»è¿”å›ã€‚ select()æ–¹æ³•è¿”å›çš„intå€¼ï¼Œè¡¨ç¤ºæœ‰å¤šå°‘é€šé“å·²ç»å°±ç»ªï¼Œæ›´å‡†ç¡®çš„è¯´ï¼Œæ˜¯è‡ªå‰ä¸€æ¬¡selectæ–¹æ³•ä»¥æ¥åˆ°è¿™ä¸€æ¬¡selectæ–¹æ³•ä¹‹é—´çš„æ—¶é—´æ®µä¸Šï¼Œæœ‰å¤šå°‘é€šé“å˜æˆå°±ç»ªçŠ¶æ€ã€‚ ä¾‹å¦‚ï¼šé¦–æ¬¡è°ƒç”¨select()æ–¹æ³•ï¼Œå¦‚æœæœ‰ä¸€ä¸ªé€šé“å˜æˆå°±ç»ªçŠ¶æ€ï¼Œè¿”å›äº†1ï¼Œè‹¥å†æ¬¡è°ƒç”¨select()æ–¹æ³•ï¼Œå¦‚æœå¦ä¸€ä¸ªé€šé“å°±ç»ªäº†ï¼Œå®ƒä¼šå†æ¬¡è¿”å›1ã€‚å¦‚æœå¯¹ç¬¬ä¸€ä¸ªå°±ç»ªçš„channelæ²¡æœ‰åšä»»ä½•æ“ä½œï¼Œç°åœ¨å°±æœ‰ä¸¤ä¸ªå°±ç»ªçš„é€šé“ï¼Œä½†åœ¨æ¯æ¬¡select()æ–¹æ³•è°ƒç”¨ä¹‹é—´ï¼Œåªæœ‰ä¸€ä¸ªé€šé“å°±ç»ªäº†ã€‚ ä¸€æ—¦è°ƒç”¨select()æ–¹æ³•ï¼Œå¹¶ä¸”è¿”å›å€¼ä¸ä¸º0æ—¶ï¼Œåœ¨Selectorä¸­æœ‰ä¸€ä¸ªselectedKeys()æ–¹æ³•ï¼Œç”¨æ¥è®¿é—®å·²é€‰æ‹©é”®é›†åˆï¼Œè¿­ä»£é›†åˆçš„æ¯ä¸€ä¸ªé€‰æ‹©é”®å…ƒç´ ï¼Œæ ¹æ®å°±ç»ªæ“ä½œçš„ç±»å‹ï¼Œå®Œæˆå¯¹åº”çš„æ“ä½œï¼š 12345678910111213 Set selectedKeys = selector.selectedKeys();Iterator keyIterator = selectedKeys.iterator(); while(keyIterator.hasNext()) { SelectionKey key = keyIterator.next(); if(key.isAcceptable()) { // a connection was accepted by a ServerSocketChannel. } else if (key.isConnectable()) { // a connection was established with a remote server. } else if (key.isReadable()) { // a channel is ready for reading } else if (key.isWritable()) { // a channel is ready for writing } keyIterator.remove(); } 4.åœæ­¢é€‰æ‹©çš„æ–¹æ³•åœæ­¢é€‰æ‹©çš„æ–¹æ³• â€‹ é€‰æ‹©å™¨æ‰§è¡Œé€‰æ‹©çš„è¿‡ç¨‹ï¼Œç³»ç»Ÿåº•å±‚ä¼šä¾æ¬¡è¯¢é—®æ¯ä¸ªé€šé“æ˜¯å¦å·²ç»å°±ç»ªï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šé€ æˆè°ƒç”¨çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€,é‚£ä¹ˆæˆ‘ä»¬æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼å¯ä»¥å”¤é†’åœ¨selectï¼ˆï¼‰æ–¹æ³•ä¸­é˜»å¡çš„çº¿ç¨‹ã€‚ wakeup()æ–¹æ³• ï¼šé€šè¿‡è°ƒç”¨Selectorå¯¹è±¡çš„wakeupï¼ˆï¼‰æ–¹æ³•è®©å¤„åœ¨é˜»å¡çŠ¶æ€çš„select()æ–¹æ³•ç«‹åˆ»è¿”å› è¯¥æ–¹æ³•ä½¿å¾—é€‰æ‹©å™¨ä¸Šçš„ç¬¬ä¸€ä¸ªè¿˜æ²¡æœ‰è¿”å›çš„é€‰æ‹©æ“ä½œç«‹å³è¿”å›ã€‚å¦‚æœå½“å‰æ²¡æœ‰è¿›è¡Œä¸­çš„é€‰æ‹©æ“ä½œï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡å¯¹select()æ–¹æ³•çš„ä¸€æ¬¡è°ƒç”¨å°†ç«‹å³è¿”å›ã€‚ close()æ–¹æ³• ï¼šé€šè¿‡closeï¼ˆï¼‰æ–¹æ³•å…³é—­Selectorï¼Œ è¯¥æ–¹æ³•ä½¿å¾—ä»»ä½•ä¸€ä¸ªåœ¨é€‰æ‹©æ“ä½œä¸­é˜»å¡çš„çº¿ç¨‹éƒ½è¢«å”¤é†’ï¼ˆç±»ä¼¼wakeupï¼ˆï¼‰ï¼‰ï¼ŒåŒæ—¶ä½¿å¾—æ³¨å†Œåˆ°è¯¥Selectorçš„æ‰€æœ‰Channelè¢«æ³¨é”€ï¼Œæ‰€æœ‰çš„é”®å°†è¢«å–æ¶ˆï¼Œä½†æ˜¯Channelæœ¬èº«å¹¶ä¸ä¼šå…³é—­ã€‚ ç¤ºä¾‹ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134import org.junit.jupiter.api.Test;import java.io.IOException;import java.net.InetSocketAddress;import java.nio.ByteBuffer;import java.nio.channels.SelectionKey;import java.nio.channels.Selector;import java.nio.channels.ServerSocketChannel;import java.nio.channels.SocketChannel;import java.nio.charset.StandardCharsets;import java.util.Date;import java.util.Iterator;import java.util.Scanner;import java.util.Set;public class SelectorDemo { //æœåŠ¡ç«¯ @Test public void ServerDemo() throws Exception {// 1.è·å–æœåŠ¡ç«¯é€šé“ ServerSocketChannel ssc = ServerSocketChannel.open();// 2.ç»‘å®šç«¯å£å· ssc.socket().bind(new InetSocketAddress(&quot;127.0.0.1&quot;, 8000));// 3.åˆ‡æ¢éé˜»å¡æ¨¡å¼ ssc.configureBlocking(false);// 4.åˆ›å»ºé€‰æ‹©å™¨ Selector selector = Selector.open();// 5.æ³¨å†Œchannelï¼Œå¹¶ä¸”æŒ‡å®šæ„Ÿå…´è¶£çš„äº‹ä»¶æ˜¯ Accept ssc.register(selector, SelectionKey.OP_ACCEPT);// 6.åˆ›å»ºbuffer ByteBuffer readBuff = ByteBuffer.allocate(1024); ByteBuffer writeBuff = ByteBuffer.allocate(128); writeBuff.put(&quot;received&quot;.getBytes()); writeBuff.flip(); while (true) {// 7.æ£€æµ‹é€šé“å°±ç»ªçŠ¶æ€ int nReady = selector.select();// 8.éå†é€‰æ‹©å™¨ï¼Œè·å–å°±ç»ªé€šé“é›†åˆ Set&lt;SelectionKey&gt; keys = selector.selectedKeys(); Iterator&lt;SelectionKey&gt; it = keys.iterator(); while (it.hasNext()) { SelectionKey key = it.next(); it.remove();// åˆ¤æ–­çŠ¶æ€ if (key.isAcceptable()) {// åˆ›å»ºæ–°çš„è¿æ¥ï¼Œå¹¶ä¸”æŠŠè¿æ¥æ³¨å†Œåˆ°selectorä¸Šï¼Œè¿›è¡Œç›‘å¬ï¼Œå£°æ˜è¿™ä¸ªchannelåªå¯¹è¯»æ“ä½œæ„Ÿå…´è¶£ã€‚ SocketChannel socketChannel = ssc.accept();// åˆ‡æ¢åˆ°éé˜»å¡ socketChannel.configureBlocking(false);// æ³¨å†Œ socketChannel.register(selector, SelectionKey.OP_READ); } else if (key.isReadable()) {// è·å–é€šé“ SocketChannel socketChannel = (SocketChannel) key.channel(); readBuff.clear(); socketChannel.read(readBuff); readBuff.flip(); System.out.println(&quot;received : &quot; + new String(readBuff.array())); key.interestOps(SelectionKey.OP_WRITE); } else if (key.isWritable()) { writeBuff.rewind(); SocketChannel socketChannel = (SocketChannel) key.channel(); socketChannel.write(writeBuff); key.interestOps(SelectionKey.OP_READ); } } } } //å®¢æˆ·ç«¯ä»£ç  @Test public void ClientDemo() throws Exception {// 1.è·å–é€šé“ï¼Œç»‘å®šä¸»æœºä¸ç«¯å£å· SocketChannel socketChannel = SocketChannel.open(); socketChannel.connect(new InetSocketAddress(&quot;127.0.0.1&quot;, 8000));// 2.åˆ‡æ¢åˆ°éé˜»å¡æ¨¡å¼ socketChannel.configureBlocking(false);// 3.åˆ›å»ºbuffer ByteBuffer writeBuffer = ByteBuffer.allocate(32); ByteBuffer readBuffer = ByteBuffer.allocate(32);// 4.å†™å…¥bufferæ•°æ® Scanner scanner = new Scanner(System.in); while (scanner.hasNext()) { String str = scanner.next();// writeBuffer.put(&quot;hello&quot;.getBytes()); writeBuffer.put((new Date().toString() + &quot;----&gt;&quot; + str).getBytes());// 5.æ¨¡å¼åˆ‡æ¢ writeBuffer.flip(); while (true) { // å°†positionè®¾å›0 writeBuffer.rewind();// 6.å†™å…¥é€šé“ socketChannel.write(writeBuffer);// 7.å…³é—­ readBuffer.clear(); socketChannel.read(readBuffer); } } }// è¾“å…¥æ–¹å¼ å®¢æˆ·ç«¯ public static void main(String[] args) throws Exception { // 1.è·å–é€šé“ï¼Œç»‘å®šä¸»æœºä¸ç«¯å£å· SocketChannel socketChannel = SocketChannel.open(); socketChannel.connect(new InetSocketAddress(&quot;127.0.0.1&quot;, 8000));// 2.åˆ‡æ¢åˆ°éé˜»å¡æ¨¡å¼ socketChannel.configureBlocking(false);// 3.åˆ›å»ºbuffer è¶…è¿‡ä¼šæŠ¥é”™Exception in thread &quot;main&quot; java.nio.BufferOverflowException ByteBuffer writeBuffer = ByteBuffer.allocate(1024); ByteBuffer readBuffer = ByteBuffer.allocate(1024);// 4.å†™å…¥bufferæ•°æ® Scanner scanner = new Scanner(System.in); while (scanner.hasNext()) { String str = scanner.next();// writeBuffer.put(&quot;hello&quot;.getBytes()); writeBuffer.put((new Date().toString() + &quot;----&gt;&quot; + str).getBytes());// 5.æ¨¡å¼åˆ‡æ¢ writeBuffer.flip(); while (true) { // å°†positionè®¾å›0 writeBuffer.rewind();// 6.å†™å…¥é€šé“ socketChannel.write(writeBuffer);// 7.å…³é—­ readBuffer.clear(); socketChannel.read(readBuffer); } } }} NIOç¼–ç¨‹æ­¥éª¤æ€»ç»“ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºSelectoré€‰æ‹©å™¨ ç¬¬äºŒæ­¥ï¼šåˆ›å»ºServerSocketChannelé€šé“ï¼Œå¹¶ç»‘å®šç›‘å¬ç«¯å£ ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®Channelé€šé“æ˜¯éé˜»å¡æ¨¡å¼ ç¬¬å››æ­¥ï¼šæŠŠChannelæ³¨å†Œåˆ°Socketoré€‰æ‹©å™¨ä¸Šï¼Œç›‘å¬è¿æ¥äº‹ä»¶ ç¬¬äº”æ­¥ï¼šè°ƒç”¨Selectorçš„selectæ–¹æ³•ï¼ˆå¾ªç¯è°ƒç”¨ï¼‰ï¼Œç›‘æµ‹é€šé“çš„å°±ç»ªçŠ¶å†µ ç¬¬å…­æ­¥ï¼šè°ƒç”¨selectKeysæ–¹æ³•è·å–å°±ç»ªchannelé›†åˆ ç¬¬ä¸ƒæ­¥ï¼šéå†å°±ç»ªchannelé›†åˆï¼Œåˆ¤æ–­å°±ç»ªäº‹ä»¶ç±»å‹ï¼Œå®ç°å…·ä½“çš„ä¸šåŠ¡æ“ä½œ ç¬¬å…«æ­¥ï¼šæ ¹æ®ä¸šåŠ¡ï¼Œå†³å®šæ˜¯å¦éœ€è¦å†æ¬¡æ³¨å†Œç›‘å¬äº‹ä»¶ï¼Œé‡å¤æ‰§è¡Œç¬¬ä¸‰æ­¥æ“ä½œ åˆ›å»ºé€‰æ‹©å™¨ Selector selector = Selector.open(); å°†é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š ServerSocketChannel ssChannel = ServerSocketChannel.open(); ssChannel.configureBlocking(false); ssChannel.register(selector, SelectionKey.OP_ACCEPT); é€šé“å¿…é¡»é…ç½®ä¸ºéé˜»å¡æ¨¡å¼ï¼Œå¦åˆ™ä½¿ç”¨é€‰æ‹©å™¨å°±æ²¡æœ‰ä»»ä½•æ„ä¹‰äº†ï¼Œå› ä¸ºå¦‚æœé€šé“åœ¨æŸä¸ªäº‹ä»¶ä¸Šè¢«é˜»å¡ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¸èƒ½å“åº”å…¶å®ƒäº‹ä»¶ï¼Œå¿…é¡»ç­‰å¾…è¿™ä¸ªäº‹ä»¶å¤„ç†å®Œæ¯•æ‰èƒ½å»å¤„ç†å…¶å®ƒäº‹ä»¶ï¼Œæ˜¾ç„¶è¿™å’Œé€‰æ‹©å™¨çš„ä½œç”¨èƒŒé“è€Œé©°ã€‚ åœ¨å°†é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Šæ—¶ï¼Œè¿˜éœ€è¦æŒ‡å®šè¦æ³¨å†Œçš„å…·ä½“äº‹ä»¶ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç±»ï¼š SelectionKey.OP_CONNECT SelectionKey.OP_ACCEPT SelectionKey.OP_READ SelectionKey.OP_WRITE å®ƒä»¬åœ¨ SelectionKey çš„å®šä¹‰å¦‚ä¸‹ï¼š public static final int OP_READ = 1 &lt;&lt; 0; public static final int OP_WRITE = 1 &lt;&lt; 2; public static final int OP_CONNECT = 1 &lt;&lt; 3; public static final int OP_ACCEPT = 1 &lt;&lt; 4; å¯ä»¥çœ‹å‡ºæ¯ä¸ªäº‹ä»¶å¯ä»¥è¢«å½“æˆä¸€ä¸ªä½åŸŸï¼Œä»è€Œç»„æˆäº‹ä»¶é›†æ•´æ•°ã€‚ä¾‹å¦‚ï¼š int interestSet = SelectionKey.OP_READ | SelectionKey.OP_WRITE; ç›‘å¬äº‹ä»¶ int num = selector.select(); ä½¿ç”¨ select() æ¥ç›‘å¬åˆ°è¾¾çš„äº‹ä»¶ï¼Œå®ƒä¼šä¸€ç›´é˜»å¡ç›´åˆ°æœ‰è‡³å°‘ä¸€ä¸ªäº‹ä»¶åˆ°è¾¾ã€‚ è·å–åˆ°è¾¾çš„äº‹ä»¶ Set keys = selector.selectedKeys(); Iterator keyIterator = keys.iterator(); while (keyIterator.hasNext()) { SelectionKey key = keyIterator.next(); if (key.isAcceptable()) { // ... } else if (key.isReadable()) { // ... } keyIterator.remove(); } äº‹ä»¶å¾ªç¯ å› ä¸ºä¸€æ¬¡ select() è°ƒç”¨ä¸èƒ½å¤„ç†å®Œæ‰€æœ‰çš„äº‹ä»¶ï¼Œå¹¶ä¸”æœåŠ¡å™¨ç«¯æœ‰å¯èƒ½éœ€è¦ä¸€ç›´ç›‘å¬äº‹ä»¶ï¼Œå› æ­¤æœåŠ¡å™¨ç«¯å¤„ç†äº‹ä»¶çš„ä»£ç ä¸€èˆ¬ä¼šæ”¾åœ¨ä¸€ä¸ªæ­»å¾ªç¯å†…ã€‚ while (true) { int num = selector.select(); Set keys = selector.selectedKeys(); Iterator keyIterator = keys.iterator(); while (keyIterator.hasNext()) { SelectionKey key = keyIterator.next(); if (key.isAcceptable()) { // ... } else if (key.isReadable()) { // ... } keyIterator.remove(); } } Pipe Java NIO ç®¡é“æ˜¯2ä¸ªçº¿ç¨‹ä¹‹é—´çš„å•å‘æ•°æ®è¿æ¥ã€‚Pipeæœ‰ä¸€ä¸ªsourceé€šé“å’Œä¸€ä¸ªsinké€šé“ã€‚æ•°æ®ä¼šè¢«å†™åˆ°sinké€šé“ï¼Œä»sourceé€šé“è¯»å–ã€‚ 1ã€åˆ›å»ºç®¡é“ é€šè¿‡Pipe.open()æ–¹æ³•æ‰“å¼€ç®¡é“ã€‚ Pipe pipe = Pipe.open(); 2ã€å†™å…¥ç®¡é“ è¦å‘ç®¡é“å†™æ•°æ®ï¼Œéœ€è¦è®¿é—®sinké€šé“ã€‚ï¼š Pipe.SinkChannel sinkChannel = pipe.sink(); é€šè¿‡è°ƒç”¨SinkChannelçš„write()æ–¹æ³•ï¼Œå°†æ•°æ®å†™å…¥SinkChannelï¼š String newData = &quot;New String to write to file...&quot; + System.currentTimeMillis(); ByteBuffer buf = ByteBuffer.allocate(48); buf.clear(); buf.put(newData.getBytes()); buf.flip(); while(buf.hasRemaining()) 3ã€ä»ç®¡é“è¯»å–æ•°æ® è®¿é—®sourceé€šé“ Pipe.SourceChannel sourceChannel = pipe.source(); è°ƒç”¨sourceé€šé“çš„read()æ–¹æ³•æ¥è¯»å–æ•°æ®ï¼š ByteBuffer buf = ByteBuffer.allocate(48); int bytesRead = sourceChannel.read(buf); read()æ–¹æ³•è¿”å›çš„intå€¼ä¼šå‘Šè¯‰æˆ‘ä»¬å¤šå°‘å­—èŠ‚è¢«è¯»è¿›äº†ç¼“å†²åŒºã€‚ 4ã€ä»£ç ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132333435363738394041package pers.lxl.mylearnproject.javase.io.nio.pipe;import org.junit.jupiter.api.Test;import java.io.IOException;import java.nio.ByteBuffer;import java.nio.channels.Pipe;public class PipeDemo {// 1.è·å–ç®¡é“// 2è·å–sinké€šé“// 3.åˆ›å»ºç¼“å†²åŒº// 4.å†™å…¥æ•°æ®// 5.è·å–sourceé€šé“// 6.åˆ›å»ºsourceé€šé“// 7.åˆ›å»ºç¼“å†²åŒºï¼Œè¯»å–æ•°æ®// 8.å…³é—­é€šé“ /**/ @Test public void testPipe() throws IOException { // 1ã€è·å–é€šé“ Pipe pipe = Pipe.open(); // 2ã€è·å–sinkç®¡é“ï¼Œç”¨æ¥ä¼ é€æ•°æ® Pipe.SinkChannel sinkChannel = pipe.sink(); // 3ã€ç”³è¯·ä¸€å®šå¤§å°çš„ç¼“å†²åŒº ByteBuffer byteBuffer = ByteBuffer.allocate(1024); byteBuffer.put(&quot;atguigu&quot;.getBytes()); byteBuffer.flip(); // 4ã€sinkå‘é€æ•°æ® sinkChannel.write(byteBuffer); // 5ã€åˆ›å»ºæ¥æ”¶pipeæ•°æ®çš„sourceç®¡é“ Pipe.SourceChannel sourceChannel = pipe.source(); // 6ã€æ¥æ”¶æ•°æ®ï¼Œå¹¶ä¿å­˜åˆ°ç¼“å†²åŒºä¸­ ByteBuffer byteBuffer2 = ByteBuffer.allocate(1024); int length = sourceChannel.read(byteBuffer2); System.out.println(new String(byteBuffer2.array(), 0, length)); sourceChannel.close(); sinkChannel.close(); }} FileLock 1ã€ FileLock ç®€ä»‹ â€‹ æ–‡ä»¶é”åœ¨OSä¸­å¾ˆå¸¸è§ï¼Œå¦‚æœå¤šä¸ªç¨‹åºåŒæ—¶è®¿é—®ã€ä¿®æ”¹åŒä¸€ä¸ªæ–‡ä»¶ï¼Œå¾ˆå®¹æ˜“å› ä¸ºæ–‡ä»¶æ•°æ®ä¸åŒæ­¥è€Œå‡ºç°é—®é¢˜ã€‚ç»™æ–‡ä»¶åŠ ä¸€ä¸ªé”ï¼ŒåŒä¸€æ—¶é—´ï¼Œåªèƒ½æœ‰ä¸€ä¸ªç¨‹åºä¿®æ”¹æ­¤æ–‡ä»¶ï¼Œæˆ–è€…ç¨‹åºéƒ½åªèƒ½è¯»æ­¤æ–‡ä»¶ï¼Œè¿™å°±è§£å†³äº†åŒæ­¥é—®é¢˜ã€‚ â€‹ æ–‡ä»¶é”æ˜¯è¿›ç¨‹çº§åˆ«çš„ï¼Œä¸æ˜¯çº¿ç¨‹çº§åˆ«çš„ã€‚æ–‡ä»¶é”å¯ä»¥è§£å†³å¤šä¸ªè¿›ç¨‹å¹¶å‘è®¿é—®ã€ä¿®æ”¹åŒä¸€ä¸ªæ–‡ä»¶çš„é—®é¢˜ï¼Œä½†ä¸èƒ½è§£å†³å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ã€ä¿®æ”¹åŒä¸€æ–‡ä»¶çš„é—®é¢˜ã€‚ä½¿ç”¨æ–‡ä»¶é”æ—¶ï¼ŒåŒä¸€è¿›ç¨‹å†…çš„å¤šä¸ªçº¿ç¨‹ï¼Œå¯ä»¥åŒæ—¶è®¿é—®ã€ä¿®æ”¹æ­¤æ–‡ä»¶ã€‚ â€‹ æ–‡ä»¶é”æ˜¯å½“å‰ç¨‹åºæ‰€å±çš„JVMå®ä¾‹æŒæœ‰çš„ï¼Œä¸€æ—¦è·å–åˆ°æ–‡ä»¶é”ï¼ˆå¯¹æ–‡ä»¶åŠ é”ï¼‰ï¼Œè¦è°ƒç”¨release()ï¼Œæˆ–è€…å…³é—­å¯¹åº”çš„FileChannelå¯¹è±¡ï¼Œæˆ–è€…å½“å‰JVMé€€å‡ºï¼Œæ‰ä¼šé‡Šæ”¾è¿™ä¸ªé”ã€‚ â€‹ ä¸€æ—¦æŸä¸ªè¿›ç¨‹ï¼ˆæ¯”å¦‚è¯´JVMå®ä¾‹ï¼‰å¯¹æŸä¸ªæ–‡ä»¶åŠ é”ï¼Œåˆ™åœ¨é‡Šæ”¾è¿™ä¸ªé”ä¹‹å‰ï¼Œæ­¤è¿›ç¨‹ä¸èƒ½å†å¯¹æ­¤æ–‡ä»¶åŠ é”ï¼Œå°±æ˜¯è¯´JVMå®ä¾‹åœ¨åŒä¸€æ–‡ä»¶ä¸Šçš„æ–‡ä»¶é”æ˜¯ä¸é‡å çš„ï¼ˆè¿›ç¨‹çº§åˆ«ä¸èƒ½é‡å¤åœ¨åŒä¸€æ–‡ä»¶ä¸Šè·å–é”ï¼‰ã€‚ 2ã€æ–‡ä»¶é”åˆ†ç±»ï¼šæ–‡ä»¶é”åˆ†ç±»ï¼š â€‹ æ’å®ƒé”ï¼šåˆå«ç‹¬å é”ã€‚å¯¹æ–‡ä»¶åŠ æ’å®ƒé”åï¼Œè¯¥è¿›ç¨‹å¯ä»¥å¯¹æ­¤æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œè¯¥è¿›ç¨‹ç‹¬å æ­¤æ–‡ä»¶ï¼Œå…¶ä»–è¿›ç¨‹ä¸èƒ½è¯»å†™æ­¤æ–‡ä»¶ï¼Œç›´åˆ°è¯¥è¿›ç¨‹é‡Šæ”¾æ–‡ä»¶é”ã€‚ â€‹ å…±äº«é”ï¼šæŸä¸ªè¿›ç¨‹å¯¹æ–‡ä»¶åŠ å…±äº«é”ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿå¯ä»¥è®¿é—®æ­¤æ–‡ä»¶ï¼Œä½†è¿™äº›è¿›ç¨‹éƒ½åªèƒ½è¯»æ­¤æ–‡ä»¶ï¼Œä¸èƒ½å†™ã€‚çº¿ç¨‹æ˜¯å®‰å…¨çš„ã€‚åªè¦è¿˜æœ‰ä¸€ä¸ªè¿›ç¨‹æŒæœ‰å…±äº«é”ï¼Œæ­¤æ–‡ä»¶å°±åªèƒ½è¯»ï¼Œä¸èƒ½å†™ã€‚ 3ã€ä½¿ç”¨ç¤ºä¾‹ //åˆ›å»ºFileChannelå¯¹è±¡ï¼Œæ–‡ä»¶é”åªèƒ½é€šè¿‡FileChannelå¯¹è±¡æ¥ä½¿ç”¨ FileChannel fileChannel=new FileOutputStream(&quot;./1.txt&quot;).getChannel(); //å¯¹æ–‡ä»¶åŠ é” FileLock lock=fileChannel.lock(); //å¯¹æ­¤æ–‡ä»¶è¿›è¡Œä¸€äº›è¯»å†™æ“ä½œã€‚ //....... //é‡Šæ”¾é” lock.release(); æ–‡ä»¶é”è¦é€šè¿‡FileChannelå¯¹è±¡ä½¿ç”¨ã€‚ 4ã€è·å–æ–‡ä»¶é”æ–¹æ³•ã€è·å–æ–‡ä»¶é”æ–¹æ³• æœ‰4ç§è·å–æ–‡ä»¶é”çš„æ–¹æ³•ï¼š lock() //å¯¹æ•´ä¸ªæ–‡ä»¶åŠ é”ï¼Œé»˜è®¤ä¸ºæ’å®ƒé”ã€‚ lock(long position, long size, booean shared) //è‡ªå®šä¹‰åŠ é”æ–¹å¼ã€‚å‰2ä¸ªå‚æ•°æŒ‡å®šè¦åŠ é”çš„éƒ¨åˆ†ï¼ˆå¯ä»¥åªå¯¹æ­¤æ–‡ä»¶çš„éƒ¨åˆ†å†…å®¹åŠ é”ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å€¼æŒ‡å®šæ˜¯å¦æ˜¯å…±äº«é”ã€‚ tryLock() //å¯¹æ•´ä¸ªæ–‡ä»¶åŠ é”ï¼Œé»˜è®¤ä¸ºæ’å®ƒé”ã€‚ tryLock(long position, long size, booean shared) //è‡ªå®šä¹‰åŠ é”æ–¹å¼ã€‚ å¦‚æœæŒ‡å®šä¸ºå…±äº«é”ï¼Œåˆ™å…¶å®ƒè¿›ç¨‹å¯è¯»æ­¤æ–‡ä»¶ï¼Œæ‰€æœ‰è¿›ç¨‹å‡ä¸èƒ½å†™æ­¤æ–‡ä»¶ï¼Œå¦‚æœæŸè¿›ç¨‹è¯•å›¾å¯¹æ­¤æ–‡ä»¶è¿›è¡Œå†™æ“ä½œï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ 5ã€locklockä¸tryLocktryLockçš„åŒºåˆ« lockæ˜¯é˜»å¡å¼çš„ï¼Œå¦‚æœæœªè·å–åˆ°æ–‡ä»¶é”ï¼Œä¼šä¸€ç›´é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°è·å–æ–‡ä»¶é” tryLockå’Œlockçš„ä½œç”¨ç›¸åŒï¼Œåªä¸è¿‡tryLockæ˜¯éé˜»å¡å¼çš„ï¼ŒtryLockæ˜¯å°è¯•è·å–æ–‡ä»¶é”ï¼Œè·å–æˆåŠŸå°±è¿”å›é”å¯¹è±¡ï¼Œå¦åˆ™è¿”å›nullï¼Œä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚ 6ã€FileLockä¸¤ä¸ªæ–¹æ³•ï¼š boolean isShared() //æ­¤æ–‡ä»¶é”æ˜¯å¦æ˜¯å…±äº«é” boolean isValid() //æ­¤æ–‡ä»¶é”æ˜¯å¦è¿˜æœ‰æ•ˆ åœ¨æŸäº›OSä¸Šï¼Œå¯¹æŸä¸ªæ–‡ä»¶åŠ é”åï¼Œä¸èƒ½å¯¹æ­¤æ–‡ä»¶ä½¿ç”¨é€šé“æ˜ å°„ã€‚ 7ã€å®Œæ•´ä¾‹å­ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950import java.io.BufferedReader;import java.io.FileReader;import java.io.IOException;import java.nio.ByteBuffer;import java.nio.channels.FileChannel;import java.nio.channels.FileLock;import java.nio.file.Path;import java.nio.file.Paths;import java.nio.file.StandardOpenOption;public class FileLockDemo { public static void main(String[] args) throws IOException { String input = &quot;atguigu&quot;; System.out.println(&quot;è¾“å…¥ :&quot; + input); ByteBuffer buf = ByteBuffer.wrap(input.getBytes()); String fp = &quot;D:\\\\atguigu\\\\01.txt&quot;; Path pt = Paths.get(fp); FileChannel channel = FileChannel.open(pt, StandardOpenOption.WRITE, StandardOpenOption.APPEND); channel.position(channel.size() - 1); // position of a cursor at the end of file // è·å¾—é”æ–¹æ³•ä¸€ï¼šlock()ï¼Œé˜»å¡æ–¹æ³•ï¼Œå½“æ–‡ä»¶é”ä¸å¯ç”¨æ—¶ï¼Œå½“å‰è¿›ç¨‹ä¼šè¢«æŒ‚èµ·// lock = channel.lock(); // æ— å‚lock()ä¸ºç‹¬å é”// lock = channel.lock(0L, Long.MAX_VALUE, true); //æœ‰å‚lock()ä¸ºå…±äº«é”ï¼Œæœ‰å†™æ“ä½œä¼šæŠ¥å¼‚å¸¸ // è·å¾—é”æ–¹æ³•äºŒï¼štrylock()ï¼Œéé˜»å¡çš„æ–¹æ³•ï¼Œå½“æ–‡ä»¶é”ä¸å¯ç”¨æ—¶ï¼ŒtryLock()ä¼šå¾—åˆ°nullå€¼ FileLock lock = channel.tryLock(0, Long.MAX_VALUE, false); System.out.println(&quot;å…±äº«é”shared: &quot; + lock.isShared()); channel.write(buf); channel.close(); // Releases the Lock System.out.println(&quot;å†™æ“ä½œå®Œæˆ.&quot;); //è¯»å–æ•°æ® readPrint(fp); } public static void readPrint(String path) throws IOException { FileReader filereader = new FileReader(path); BufferedReader bufferedreader = new BufferedReader(filereader); String tr = bufferedreader.readLine(); System.out.println(&quot;è¯»å–å†…å®¹: &quot;); while (tr != null) { System.out.println(&quot; &quot; + tr); tr = bufferedreader.readLine(); } filereader.close(); bufferedreader.close(); }} Path 1ã€ Path ç®€ä»‹ Java Pathæ¥å£æ˜¯Java NIOæ›´æ–°çš„ä¸€éƒ¨åˆ†ï¼ŒåŒJava NIOä¸€èµ·å·²ç»åŒ…æ‹¬åœ¨Java6å’ŒJava7ä¸­ã€‚Java Pathæ¥å£æ˜¯åœ¨Java7ä¸­æ·»åŠ åˆ°Java NIOçš„ã€‚Pathæ¥å£ä½äºjava.nio.fileåŒ…ä¸­ï¼Œæ‰€ä»¥Pathæ¥å£çš„å®Œå…¨é™å®šåç§°ä¸ºjava.nio.file.Pathã€‚ Java Pathå®ä¾‹è¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„ã€‚ä¸€ä¸ªè·¯å¾„å¯ä»¥æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶æˆ–ä¸€ä¸ªç›®å½•ã€‚è·¯å¾„å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ã€‚ç»å¯¹è·¯å¾„åŒ…å«ä»æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•åˆ°å®ƒæŒ‡å‘çš„æ–‡ä»¶æˆ–ç›®å½•çš„å®Œæ•´è·¯å¾„ã€‚ç›¸å¯¹è·¯å¾„åŒ…å«ç›¸å¯¹äºå…¶ä»–è·¯å¾„çš„æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ã€‚ åœ¨è®¸å¤šæ–¹é¢ï¼Œjava.nio.file.Pathæ¥å£ç±»ä¼¼äºjava.io.Fileç±»ï¼Œä½†æ˜¯æœ‰ä¸€äº›å·®åˆ«ã€‚ä¸è¿‡ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨Pathæ¥å£æ¥æ›¿æ¢Fileç±»çš„ä½¿ç”¨ã€‚ 2ã€åˆ›å»ºPathå®ä¾‹ ä½¿ç”¨java.nio.file.Pathå®ä¾‹å¿…é¡»åˆ›å»ºä¸€ä¸ªPathå®ä¾‹ã€‚å¯ä»¥ä½¿ç”¨Pathsç±»(java.nio.file.Paths)ä¸­çš„é™æ€æ–¹æ³•Paths.get()æ¥åˆ›å»ºè·¯å¾„å®ä¾‹ã€‚ ç¤ºä¾‹ä»£ç : 12345678import java.nio.file.Path;import java.nio.file.Paths;public class PathDemo { public static void main(String[] args) { Path path = Paths.get(&quot;d:\\\\atguigu\\\\001.txt&quot;); }} ä¸Šè¿°ä»£ç ï¼Œå¯ä»¥ç†è§£ä¸ºï¼ŒPaths.get()æ–¹æ³•æ˜¯Pathå®ä¾‹çš„å·¥å‚æ–¹æ³•ã€‚ 3ã€åˆ›å»ºç»å¯¹è·¯å¾„ ï¼ˆ1ï¼‰åˆ›å»ºç»å¯¹è·¯å¾„ï¼Œé€šè¿‡è°ƒç”¨Paths.get()æ–¹æ³•ï¼Œç»™å®šç»å¯¹è·¯å¾„æ–‡ä»¶ä½œä¸ºå‚æ•°æ¥å®Œæˆã€‚ ç¤ºä¾‹ä»£ç ï¼š Path path = Paths.get(&quot;d:\\atguigu\\001.txt&quot;); ä¸Šè¿°ä»£ç ä¸­ï¼Œç»å¯¹è·¯å¾„æ˜¯d:\\atguigu\\001.txtã€‚åœ¨Javaå­—ç¬¦ä¸²ä¸­ï¼Œ \\æ˜¯ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦ï¼Œéœ€è¦ç¼–å†™\\ï¼Œå‘Šè¯‰Javaç¼–è¯‘å™¨åœ¨å­—ç¬¦ä¸²ä¸­å†™å…¥ä¸€ä¸ª\\å­—ç¬¦ã€‚ ï¼ˆ2ï¼‰å¦‚æœåœ¨Linuxã€MacOSç­‰æ“ä½œå­—ä½“ä¸Šï¼Œä¸Šé¢çš„ç»å¯¹è·¯å¾„å¯èƒ½å¦‚ä¸‹: Path path = Paths.get(&quot;/home/jakobjenkov/myfile.txt&quot;); ç»å¯¹è·¯å¾„ç°åœ¨ä¸º/home/jakobjenkov/myfile.txt. ï¼ˆ3ï¼‰å¦‚æœåœ¨Windowsæœºå™¨ä¸Šä½¿ç”¨äº†ä»/å¼€å§‹çš„è·¯å¾„ï¼Œé‚£ä¹ˆè·¯å¾„å°†è¢«è§£é‡Šä¸ºç›¸å¯¹äºå½“å‰é©±åŠ¨å™¨ã€‚ 4ã€åˆ›å»ºç›¸å¯¹è·¯å¾„ Java NIO Pathç±»ä¹Ÿå¯ä»¥ç”¨äºå¤„ç†ç›¸å¯¹è·¯å¾„ã€‚æ‚¨å¯ä»¥ä½¿ç”¨Paths.get(basePath, relativePath)æ–¹æ³•åˆ›å»ºä¸€ä¸ªç›¸å¯¹è·¯å¾„ã€‚ ç¤ºä¾‹ä»£ç : //ä»£ç 1 Path projects = Paths.get(&quot;d:\\atguigu&quot;, &quot;projects&quot;); //ä»£ç 2 Path file = Paths.get(&quot;d:\\atguigu&quot;, &quot;projects\\002.txt&quot;); ä»£ç 1åˆ›å»ºäº†ä¸€ä¸ªJava Pathçš„å®ä¾‹ï¼ŒæŒ‡å‘è·¯å¾„(ç›®å½•):d:\\atguigu\\projects ä»£ç 2åˆ›å»ºäº†ä¸€ä¸ªPathçš„å®ä¾‹ï¼ŒæŒ‡å‘è·¯å¾„(æ–‡ä»¶):d:\\atguigu\\projects\\002.txt 5ã€Path.normalize() Pathæ¥å£çš„normalize()æ–¹æ³•å¯ä»¥ä½¿è·¯å¾„æ ‡å‡†åŒ–ã€‚æ ‡å‡†åŒ–æ„å‘³ç€å®ƒå°†ç§»é™¤æ‰€æœ‰åœ¨è·¯å¾„å­—ç¬¦ä¸²çš„ä¸­é—´çš„.å’Œ..ä»£ç ï¼Œå¹¶è§£æè·¯å¾„å­—ç¬¦ä¸²æ‰€å¼•ç”¨çš„è·¯å¾„ã€‚ Path.normalize()ç¤ºä¾‹: String originalPath = &quot;d:\\atguigu\\projects\\..\\yygh-project&quot;; Path path1 = Paths.get(originalPath); System.out.println(&quot;path1 = &quot; + path1); Path path2 = path1.normalize(); System.out.println(&quot;path2 = &quot; + path2); è¾“å‡ºç»“æœï¼šæ ‡å‡†åŒ–çš„è·¯å¾„ä¸åŒ…å«projects..éƒ¨åˆ† Files Java NIO Filesç±»(java.nio.file.Files)æä¾›äº†å‡ ç§æ“ä½œæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶çš„æ–¹æ³•ã€‚ä»¥ä¸‹å†…å®¹ä»‹ç»Java NIO Filesæœ€å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•ã€‚java.nio.file.Filesç±»ä¸java.nio.file.Pathå®ä¾‹ä¸€èµ·å·¥ä½œï¼Œå› æ­¤åœ¨å­¦ä¹ Filesç±»ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£Pathç±»ã€‚ 1ã€ Files.createDirectory() Files.createDirectory()æ–¹æ³•ï¼Œç”¨äºæ ¹æ®Pathå®ä¾‹åˆ›å»ºä¸€ä¸ªæ–°ç›®å½• ç¤ºä¾‹ï¼š Path path = Paths.get(&quot;d:\\sgg&quot;); try { Path newDir = Files.createDirectory(path); } catch(FileAlreadyExistsException e){ // ç›®å½•å·²ç»å­˜åœ¨ } catch (IOException e) { // å…¶ä»–å‘ç”Ÿçš„å¼‚å¸¸ e.printStackTrace(); } ç¬¬ä¸€è¡Œåˆ›å»ºè¡¨ç¤ºè¦åˆ›å»ºçš„ç›®å½•çš„Pathå®ä¾‹ã€‚åœ¨try-catchå—ä¸­ï¼Œç”¨è·¯å¾„ä½œä¸ºå‚æ•°è°ƒç”¨Files.createDirectory()æ–¹æ³•ã€‚å¦‚æœåˆ›å»ºç›®å½•æˆåŠŸï¼Œå°†è¿”å›ä¸€ä¸ªPathå®ä¾‹ï¼Œè¯¥å®ä¾‹æŒ‡å‘æ–°åˆ›å»ºçš„è·¯å¾„ã€‚ å¦‚æœè¯¥ç›®å½•å·²ç»å­˜åœ¨ï¼Œåˆ™æ˜¯æŠ›å‡ºä¸€ä¸ªjava.nio.file.FileAlreadyExistsExceptionã€‚å¦‚æœå‡ºç°å…¶ä»–é”™è¯¯ï¼Œå¯èƒ½ä¼šæŠ›å‡ºIOExceptionã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è¦çš„æ–°ç›®å½•çš„çˆ¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™å¯èƒ½ä¼šæŠ›å‡ºIOExceptionã€‚ 2ã€Files.copy() ï¼ˆ1ï¼‰Files.copy()æ–¹æ³•ä»ä¸€ä¸ªè·¯å¾„æ‹·è´ä¸€ä¸ªæ–‡ä»¶åˆ°å¦å¤–ä¸€ä¸ªç›®å½• ç¤ºä¾‹ï¼š Path sourcePath = Paths.get(&quot;d:\\atguigu\\01.txt&quot;); Path destinationPath = Paths.get(&quot;d:\\atguigu\\002.txt&quot;); try { Files.copy(sourcePath, destinationPath); } catch(FileAlreadyExistsException e) { // ç›®å½•å·²ç»å­˜åœ¨ } catch (IOException e) { // å…¶ä»–å‘ç”Ÿçš„å¼‚å¸¸ e.printStackTrace(); } é¦–å…ˆï¼Œè¯¥ç¤ºä¾‹åˆ›å»ºä¸¤ä¸ªPathå®ä¾‹ã€‚ç„¶åï¼Œè¿™ä¸ªä¾‹å­è°ƒç”¨Files.copy()ï¼Œå°†ä¸¤ä¸ªPathå®ä¾‹ä½œä¸ºå‚æ•°ä¼ é€’ã€‚è¿™å¯ä»¥è®©æºè·¯å¾„å¼•ç”¨çš„æ–‡ä»¶è¢«å¤åˆ¶åˆ°ç›®æ ‡è·¯å¾„å¼•ç”¨çš„æ–‡ä»¶ä¸­ã€‚ å¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªjava.nio.file.FileAlreadyExistsExceptionå¼‚å¸¸ã€‚å¦‚æœæœ‰å…¶ä»–é”™è¯¯ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªIOExceptionã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°†è¯¥æ–‡ä»¶å¤åˆ¶åˆ°ä¸å­˜åœ¨çš„ç›®å½•ï¼Œåˆ™ä¼šæŠ›å‡ºIOExceptionã€‚ ï¼ˆ2ï¼‰è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶ Files.copy()æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚å¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œè¿™ä¸ªå‚æ•°æŒ‡ç¤ºcopy()æ–¹æ³•è¦†ç›–ç°æœ‰çš„æ–‡ä»¶ã€‚ Files.copy(sourcePath, destinationPath, StandardCopyOption.REPLACE_EXISTING); 3ã€Files.move() Files.move()ç”¨äºå°†æ–‡ä»¶ä»ä¸€ä¸ªè·¯å¾„ç§»åŠ¨åˆ°å¦ä¸€ä¸ªè·¯å¾„ã€‚ç§»åŠ¨æ–‡ä»¶ä¸é‡å‘½åç›¸åŒï¼Œä½†æ˜¯ç§»åŠ¨æ–‡ä»¶æ—¢å¯ä»¥ç§»åŠ¨åˆ°ä¸åŒçš„ç›®å½•ï¼Œä¹Ÿå¯ä»¥åœ¨ç›¸åŒçš„æ“ä½œä¸­æ›´æ”¹å®ƒçš„åç§°ã€‚ ç¤ºä¾‹ï¼š Path sourcePath = Paths.get(&quot;d:\\atguigu\\01.txt&quot;); Path destinationPath = Paths.get(&quot;d:\\atguigu\\001.txt&quot;); try { Files.move(sourcePath, destinationPath, StandardCopyOption.REPLACE_EXISTING); } catch (IOException e) { //ç§»åŠ¨æ–‡ä»¶å¤±è´¥ e.printStackTrace(); } Files.move()çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚è¿™ä¸ªå‚æ•°å‘Šè¯‰Files.move()æ–¹æ³•æ¥è¦†ç›–ç›®æ ‡è·¯å¾„ä¸Šçš„ä»»ä½•ç°æœ‰æ–‡ä»¶ã€‚ 4ã€Files.delete() Files.delete()æ–¹æ³•å¯ä»¥åˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•ã€‚ ç¤ºä¾‹ï¼š Path path = Paths.get(&quot;d:\\atguigu\\001.txt&quot;); try { Files.delete(path); } catch (IOException e) { // åˆ é™¤æ–‡ä»¶å¤±è´¥ e.printStackTrace(); } åˆ›å»ºæŒ‡å‘è¦åˆ é™¤çš„æ–‡ä»¶çš„Pathã€‚ç„¶åè°ƒç”¨Files.delete()æ–¹æ³•ã€‚å¦‚æœFiles.delete()ä¸èƒ½åˆ é™¤æ–‡ä»¶(ä¾‹å¦‚ï¼Œæ–‡ä»¶æˆ–ç›®å½•ä¸å­˜åœ¨)ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªIOExceptionã€‚ 5.Files.walkFileTree() ï¼ˆ1ï¼‰Files.walkFileTree()æ–¹æ³•åŒ…å«é€’å½’éå†ç›®å½•æ ‘åŠŸèƒ½ï¼Œå°†Pathå®ä¾‹å’ŒFileVisitorä½œä¸ºå‚æ•°ã€‚Pathå®ä¾‹æŒ‡å‘è¦éå†çš„ç›®å½•ï¼ŒFileVisitoråœ¨éå†æœŸé—´è¢«è°ƒç”¨ã€‚ ï¼ˆ2ï¼‰FileVisitoræ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¿…é¡»è‡ªå·±å®ç°FileVisitoræ¥å£ï¼Œå¹¶å°†å®ç°çš„å®ä¾‹ä¼ é€’ç»™walkFileTree()æ–¹æ³•ã€‚åœ¨ç›®å½•éå†è¿‡ç¨‹ä¸­ï¼Œæ‚¨çš„FileVisitorå®ç°çš„æ¯ä¸ªæ–¹æ³•éƒ½å°†è¢«è°ƒç”¨ã€‚å¦‚æœä¸éœ€è¦å®ç°æ‰€æœ‰è¿™äº›æ–¹æ³•ï¼Œé‚£ä¹ˆå¯ä»¥æ‰©å±•SimpleFileVisitorç±»ï¼Œå®ƒåŒ…å«FileVisitoræ¥å£ä¸­æ‰€æœ‰æ–¹æ³•çš„é»˜è®¤å®ç°ã€‚ ï¼ˆ3ï¼‰FileVisitoræ¥å£çš„æ–¹æ³•ä¸­ï¼Œæ¯ä¸ªéƒ½è¿”å›ä¸€ä¸ªFileVisitResultæšä¸¾å®ä¾‹ã€‚FileVisitResultæšä¸¾åŒ…å«ä»¥ä¸‹å››ä¸ªé€‰é¡¹: CONTINUE ç»§ç»­ TERMINATE ç»ˆæ­¢ SKIP_SIBLING è·³è¿‡åŒçº§ SKIP_SUBTREE è·³è¿‡å­çº§ ï¼ˆ4ï¼‰æŸ¥æ‰¾ä¸€ä¸ªåä¸º001.txtçš„æ–‡ä»¶ç¤ºä¾‹ï¼š Path rootPath = Paths.get(&quot;d:\\atguigu&quot;); String fileToFind = File.separator + &quot;001.txt&quot;; try { Files.walkFileTree(rootPath, new SimpleFileVisitor() { @Override public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException { String fileString = file.toAbsolutePath().toString(); //System.out.println(&quot;pathString = &quot; + fileString); if(fileString.endsWith(fileToFind)){ System.out.println(&quot;file found at path: &quot; + file.toAbsolutePath()); return FileVisitResult.TERMINATE; } return FileVisitResult.CONTINUE; } }); } catch(IOException e){ e.printStackTrace(); } ï¼ˆ5ï¼‰java.nio.file.Filesç±»åŒ…å«è®¸å¤šå…¶ä»–çš„å‡½æ•°ï¼Œæœ‰å…³è¿™äº›æ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹java.nio.file.Filesç±»çš„JavaDocã€‚ AsynchronousFileChannel åœ¨Java 7ä¸­ï¼ŒJava NIOä¸­æ·»åŠ äº†AsynchronousFileChannelï¼Œä¹Ÿå°±æ˜¯æ˜¯å¼‚æ­¥åœ°å°†æ•°æ®å†™å…¥æ–‡ä»¶ã€‚ 1ã€åˆ›å»º AsynchronousFileChannel é€šè¿‡é™æ€æ–¹æ³•open()åˆ›å»º ç¤ºä¾‹ï¼š Path path = Paths.get(&quot;d:\\atguigu\\01.txt&quot;); try { AsynchronousFileChannel fileChannel = AsynchronousFileChannel.open(path, StandardOpenOption.READ); } catch (IOException e) { e.printStackTrace(); } open()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å‘ä¸AsynchronousFileChannelç›¸å…³è”æ–‡ä»¶çš„Pathå®ä¾‹ã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæ‰“å¼€é€‰é¡¹ï¼Œå®ƒå‘Šè¯‰AsynchronousFileChannelåœ¨æ–‡ä»¶ä¸Šæ‰§è¡Œä»€ä¹ˆæ“ä½œã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†StandardOpenOption.READé€‰é¡¹ï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶å°†è¢«æ‰“å¼€é˜…è¯»ã€‚ 2ã€é€šè¿‡Futureè¯»å–æ•°æ® å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä»AsynchronousFileChannelè¯»å–æ•°æ®ã€‚ç¬¬ä¸€ç§æ–¹å¼æ˜¯è°ƒç”¨è¿”å›Futureçš„read()æ–¹æ³• ç¤ºä¾‹ï¼š Path path = Paths.get(&quot;d:\\atguigu\\001.txt&quot;); AsynchronousFileChannel fileChannel = null; try { fileChannel = AsynchronousFileChannel.open(path, StandardOpenOption.READ); } catch (IOException e) { e.printStackTrace(); } ByteBuffer buffer = ByteBuffer.allocate(1024); long position = 0; Future operation = fileChannel.read(buffer, position); while(!operation.isDone()); buffer.flip(); byte[] data = new byte[buffer.limit()]; buffer.get(data); System.out.println(new String(data)); buffer.clear(); ä¸Šè¿°ä»£ç ï¼š ï¼ˆ1ï¼‰åˆ›å»ºäº†ä¸€ä¸ªAsynchronousFileChannelï¼Œ ï¼ˆ2ï¼‰åˆ›å»ºä¸€ä¸ªByteBufferï¼Œå®ƒè¢«ä¼ é€’ç»™read()æ–¹æ³•ä½œä¸ºå‚æ•°ï¼Œä»¥åŠä¸€ä¸ª0çš„ä½ç½®ã€‚ ï¼ˆ3ï¼‰åœ¨è°ƒç”¨read()ä¹‹åï¼Œå¾ªç¯ï¼Œç›´åˆ°è¿”å›çš„isDone()æ–¹æ³•è¿”å›trueã€‚ ï¼ˆ4ï¼‰è¯»å–æ“ä½œå®Œæˆåï¼Œæ•°æ®è¯»å–åˆ°ByteBufferä¸­ï¼Œç„¶åæ‰“å°åˆ°System.outä¸­ã€‚ 3ã€é€šè¿‡CompletionHandlerè¯»å–æ•°æ® ç¬¬äºŒç§æ–¹æ³•æ˜¯è°ƒç”¨read()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ä¸€ä¸ªCompletionHandlerä½œä¸ºå‚æ•° ç¤ºä¾‹ï¼š Path path = Paths.get(&quot;d:\\atguigu\\001.txt&quot;); AsynchronousFileChannel fileChannel = null; try { fileChannel = AsynchronousFileChannel.open(path, StandardOpenOption.READ); } catch (IOException e) { e.printStackTrace(); } ByteBuffer buffer = ByteBuffer.allocate(1024); long position = 0; fileChannel.read(buffer, position, buffer, new CompletionHandler&lt;Integer, ByteBuffer&gt;() { @Override public void completed(Integer result, ByteBuffer attachment) { System.out.println(&quot;result = &quot; + result); attachment.flip(); byte[] data = new byte[attachment.limit()]; attachment.get(data); System.out.println(new String(data)); attachment.clear(); } @Override public void failed(Throwable exc, ByteBuffer attachment) { } }); ï¼ˆ1ï¼‰è¯»å–æ“ä½œå®Œæˆï¼Œå°†è°ƒç”¨CompletionHandlerçš„completed()æ–¹æ³•ã€‚ ï¼ˆ2ï¼‰å¯¹äºcompleted()æ–¹æ³•çš„å‚æ•°ä¼ é€’ä¸€ä¸ªæ•´æ•°ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬è¯»å–äº†å¤šå°‘å­—èŠ‚ï¼Œä»¥åŠä¼ é€’ç»™read()æ–¹æ³•çš„â€œé™„ä»¶â€ã€‚â€œé™„ä»¶â€æ˜¯read()æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚åœ¨æœ¬ä»£ç ä¸­ï¼Œå®ƒæ˜¯ByteBufferï¼Œæ•°æ®ä¹Ÿè¢«è¯»å–ã€‚ ï¼ˆ3ï¼‰å¦‚æœè¯»å–æ“ä½œå¤±è´¥ï¼Œåˆ™å°†è°ƒç”¨CompletionHandlerçš„failed()æ–¹æ³•ã€‚ 4ã€é€šè¿‡Futureå†™æ•°æ® å’Œè¯»å–ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å°†æ•°æ®å†™å…¥ä¸€ä¸ªAsynchronousFileChannel ç¤ºä¾‹ï¼š Path path = Paths.get(&quot;d:\\atguigu\\001.txt&quot;); AsynchronousFileChannel fileChannel = null; try { fileChannel = AsynchronousFileChannel.open(path, StandardOpenOption.WRITE); } catch (IOException e) { e.printStackTrace(); } ByteBuffer buffer = ByteBuffer.allocate(1024); long position = 0; buffer.put(&quot;atguigu data&quot;.getBytes()); buffer.flip(); Future operation = fileChannel.write(buffer, position); buffer.clear(); while(!operation.isDone()); System.out.println(&quot;Write over&quot;); é¦–å…ˆï¼ŒAsynchronousFileChannelä»¥å†™æ¨¡å¼æ‰“å¼€ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªByteBufferï¼Œå¹¶å°†ä¸€äº›æ•°æ®å†™å…¥å…¶ä¸­ã€‚ç„¶åï¼ŒByteBufferä¸­çš„æ•°æ®è¢«å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚æœ€åï¼Œç¤ºä¾‹æ£€æŸ¥è¿”å›çš„Futureï¼Œä»¥æŸ¥çœ‹å†™æ“ä½œå®Œæˆæ—¶çš„æƒ…å†µã€‚ æ³¨æ„ï¼Œæ–‡ä»¶å¿…é¡»å·²ç»å­˜åœ¨ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆwrite()æ–¹æ³•å°†æŠ›å‡ºä¸€ä¸ªjava.nio.file.NoSuchFileExceptionã€‚ 5ã€é€šè¿‡CompletionHandlerå†™æ•°æ® ç¤ºä¾‹ï¼š Path path = Paths.get(&quot;d:\\atguigu\\001.txt&quot;); if(!Files.exists(path)){ try { Files.createFile(path); } catch (IOException e) { e.printStackTrace(); } } AsynchronousFileChannel fileChannel = null; try { fileChannel = AsynchronousFileChannel.open(path, StandardOpenOption.WRITE); } catch (IOException e) { e.printStackTrace(); } ByteBuffer buffer = ByteBuffer.allocate(1024); long position = 0; buffer.put(&quot;atguigu data&quot;.getBytes()); buffer.flip(); fileChannel.write(buffer, position, buffer, new CompletionHandler&lt;Integer, ByteBuffer&gt;() { @Override public void completed(Integer result, ByteBuffer attachment) { System.out.println(&quot;bytes written: &quot; + result); } @Override public void failed(Throwable exc, ByteBuffer attachment) { System.out.println(&quot;Write failed&quot;); exc.printStackTrace(); } }); å½“å†™æ“ä½œå®Œæˆæ—¶ï¼Œå°†ä¼šè°ƒç”¨CompletionHandlerçš„completed()æ–¹æ³•ã€‚å¦‚æœå†™å¤±è´¥ï¼Œåˆ™ä¼šè°ƒç”¨failed()æ–¹æ³•ã€‚ å­—ç¬¦é›†ï¼ˆCharsetï¼‰ javaä¸­ä½¿ç”¨Charsetæ¥è¡¨ç¤ºå­—ç¬¦é›†ç¼–ç å¯¹è±¡ Charsetå¸¸ç”¨é™æ€æ–¹æ³• public static Charset forName(String charsetName)//é€šè¿‡ç¼–ç ç±»å‹è·å¾—Charsetå¯¹è±¡ public static SortedMap&lt;String,Charset&gt; availableCharsets()//è·å¾—ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰ç¼–ç æ–¹å¼ public static Charset defaultCharset()//è·å¾—è™šæ‹Ÿæœºé»˜è®¤çš„ç¼–ç æ–¹å¼ public static boolean isSupported(String charsetName)//åˆ¤æ–­æ˜¯å¦æ”¯æŒè¯¥ç¼–ç ç±»å‹ Charsetå¸¸ç”¨æ™®é€šæ–¹æ³• public final String name()//è·å¾—Charsetå¯¹è±¡çš„ç¼–ç ç±»å‹(String) public abstract CharsetEncoder newEncoder()//è·å¾—ç¼–ç å™¨å¯¹è±¡ public abstract CharsetDecoder newDecoder()//è·å¾—è§£ç å™¨å¯¹è±¡ ä»£ç ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051import org.junit.jupiter.api.Test;import java.nio.ByteBuffer;import java.nio.CharBuffer;import java.nio.charset.CharacterCodingException;import java.nio.charset.Charset;import java.nio.charset.CharsetDecoder;import java.nio.charset.CharsetEncoder;import java.util.Map;import java.util.Set;public class CharsetDemo { @Test public void charSetEncoderAndDecoder() throws CharacterCodingException { Charset charset = Charset.forName(&quot;UTF-8&quot;); //1.è·å–ç¼–ç å™¨ CharsetEncoder charsetEncoder = charset.newEncoder(); // 2.è·å–è§£ç å™¨ CharsetDecoder charsetDecoder = charset.newDecoder(); // 3.è·å–éœ€è¦è§£ç ç¼–ç çš„æ•°æ® CharBuffer charBuffer = CharBuffer.allocate(1024); charBuffer.put(&quot;å­—ç¬¦é›†ç¼–ç è§£ç &quot;); charBuffer.flip(); //4.ç¼–ç  ByteBuffer byteBuffer = charsetEncoder.encode(charBuffer); System.out.println(&quot;ç¼–ç åï¼š&quot;); for (int i = 0; i &lt; byteBuffer.limit(); i++) { System.out.println(byteBuffer.get()); } //5.è§£ç  byteBuffer.flip(); CharBuffer charBuffer1 = charsetDecoder.decode(byteBuffer); System.out.println(&quot;è§£ç åï¼š&quot;); System.out.println(charBuffer1.toString()); System.out.println(&quot;æŒ‡å®šå…¶ä»–æ ¼å¼è§£ç :&quot;); Charset charset1 = Charset.forName(&quot;GBK&quot;); byteBuffer.flip(); CharBuffer charBuffer2 = charset1.decode(byteBuffer); System.out.println(charBuffer2.toString()); //6.è·å–Charsetæ‰€æ”¯æŒçš„å­—ç¬¦ç¼–ç  Map&lt;String, Charset&gt; map = Charset.availableCharsets(); Set&lt;Map.Entry&lt;String, Charset&gt;&gt; set = map.entrySet(); for (Map.Entry&lt;String, Charset&gt; entry : set) { System.out.println(entry.getKey() + &quot;=&quot; + entry.getValue().toString()); } }} NIOå¤šçº¿ç¨‹èŠå¤©å®¤ä¾‹å­ æœåŠ¡ç«¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113import java.io.IOException;import java.net.InetSocketAddress;import java.nio.ByteBuffer;import java.nio.channels.*;import java.nio.charset.Charset;import java.util.Iterator;import java.util.Set;//æœåŠ¡å™¨ç«¯public class ChatServer { //æœåŠ¡å™¨ç«¯å¯åŠ¨çš„æ–¹æ³• public void startServer() throws IOException { //1 åˆ›å»ºSelectoré€‰æ‹©å™¨ Selector selector = Selector.open(); //2 åˆ›å»ºServerSocketChannelé€šé“ ServerSocketChannel serverSocketChannel = ServerSocketChannel.open(); //3 ä¸ºchannelé€šé“ç»‘å®šç›‘å¬ç«¯å£ serverSocketChannel.bind(new InetSocketAddress(8000)); //è®¾ç½®éé˜»å¡æ¨¡å¼ serverSocketChannel.configureBlocking(false); //4 æŠŠchannelé€šé“æ³¨å†Œåˆ°selectoré€‰æ‹©å™¨ä¸Š serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT); System.out.println(&quot;æœåŠ¡å™¨å·²ç»å¯åŠ¨æˆåŠŸäº†&quot;); //5 å¾ªç¯ï¼Œç­‰å¾…æœ‰æ–°é“¾æ¥æ¥å…¥ while (true) for (; ; ) { //è·å–channelæ•°é‡ int readChannels = selector.select(); if (readChannels == 0) { continue; } //è·å–å¯ç”¨çš„channel Set&lt;SelectionKey&gt; selectionKeys = selector.selectedKeys(); //éå†é›†åˆ Iterator&lt;SelectionKey&gt; iterator = selectionKeys.iterator(); while (iterator.hasNext()) { SelectionKey selectionKey = iterator.next(); //ç§»é™¤seté›†åˆå½“å‰selectionKey iterator.remove(); //6 æ ¹æ®å°±ç»ªçŠ¶æ€ï¼Œè°ƒç”¨å¯¹åº”æ–¹æ³•å®ç°å…·ä½“ä¸šåŠ¡æ“ä½œ //6.1 å¦‚æœacceptçŠ¶æ€ if (selectionKey.isAcceptable()) { acceptOperator(serverSocketChannel, selector); } //6.2 å¦‚æœå¯è¯»çŠ¶æ€ if (selectionKey.isReadable()) { readOperator(selector, selectionKey); } } } } //å¤„ç†å¯è¯»çŠ¶æ€æ“ä½œ private void readOperator(Selector selector, SelectionKey selectionKey) throws IOException { //1 ä»SelectionKeyè·å–åˆ°å·²ç»å°±ç»ªçš„é€šé“ SocketChannel socketChannel = (SocketChannel) selectionKey.channel(); //2 åˆ›å»ºbuffer ByteBuffer byteBuffer = ByteBuffer.allocate(1024); //3 å¾ªç¯è¯»å–å®¢æˆ·ç«¯æ¶ˆæ¯ int readLength = socketChannel.read(byteBuffer); String message = &quot;&quot;; if (readLength &gt; 0) { //åˆ‡æ¢è¯»æ¨¡å¼ byteBuffer.flip(); //è¯»å–å†…å®¹ message += Charset.forName(&quot;UTF-8&quot;).decode(byteBuffer); } //4 å°†channelå†æ¬¡æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Šï¼Œç›‘å¬å¯è¯»çŠ¶æ€ socketChannel.register(selector, SelectionKey.OP_READ); //5 æŠŠå®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼Œå¹¿æ’­åˆ°å…¶ä»–å®¢æˆ·ç«¯ if (message.length() &gt; 0) { //å¹¿æ’­ç»™å…¶ä»–å®¢æˆ·ç«¯ System.out.println(message); castOtherClient(message, selector, socketChannel); } } //å¹¿æ’­åˆ°å…¶ä»–å®¢æˆ·ç«¯ private void castOtherClient(String message, Selector selector, SocketChannel socketChannel) throws IOException { //1 è·å–æ‰€æœ‰å·²ç»æ¥å…¥channel Set&lt;SelectionKey&gt; selectionKeySet = selector.keys(); //2 å¾ªç¯æƒ³æ‰€æœ‰channelå¹¿æ’­æ¶ˆæ¯ for (SelectionKey selectionKey : selectionKeySet) { //è·å–æ¯ä¸ªchannel Channel tarChannel = selectionKey.channel(); //ä¸éœ€è¦ç»™è‡ªå·±å‘é€ if (tarChannel instanceof SocketChannel &amp;&amp; tarChannel != socketChannel) { ((SocketChannel) tarChannel).write(Charset.forName(&quot;UTF-8&quot;).encode(message)); } } } //å¤„ç†æ¥å…¥çŠ¶æ€æ“ä½œ private void acceptOperator(ServerSocketChannel serverSocketChannel, Selector selector) throws IOException { //1 æ¥å…¥çŠ¶æ€ï¼Œåˆ›å»ºsocketChannel SocketChannel socketChannel = serverSocketChannel.accept(); //2 æŠŠsocketChannelè®¾ç½®éé˜»å¡æ¨¡å¼ socketChannel.configureBlocking(false); //3 æŠŠchannelæ³¨å†Œåˆ°selectoré€‰æ‹©å™¨ä¸Šï¼Œç›‘å¬å¯è¯»çŠ¶æ€ socketChannel.register(selector, SelectionKey.OP_READ); //4 å®¢æˆ·ç«¯å›å¤ä¿¡æ¯ socketChannel.write(Charset.forName(&quot;UTF-8&quot;).encode(&quot;æ¬¢è¿è¿›å…¥èŠå¤©å®¤ï¼Œè¯·æ³¨æ„éšç§å®‰å…¨&quot;)); } //å¯åŠ¨ä¸»æ–¹æ³• public static void main(String[] args) { try { new ChatServer().startServer(); } catch (IOException e) { e.printStackTrace(); } }} å®¢æˆ·ç«¯ä»£ç  123456789101112131415161718192021222324252627282930import java.io.IOException;import java.net.InetSocketAddress;import java.nio.channels.SelectionKey;import java.nio.channels.Selector;import java.nio.channels.SocketChannel;import java.nio.charset.Charset;import java.util.Scanner;//å®¢æˆ·ç«¯public class ChatClient { //å¯åŠ¨å®¢æˆ·ç«¯æ–¹æ³• public void startClient(String name) throws IOException { //è¿æ¥æœåŠ¡ç«¯ SocketChannel socketChannel = SocketChannel.open(new InetSocketAddress(&quot;127.0.0.1&quot;, 8000)); //æ¥æ”¶æœåŠ¡ç«¯å“åº”æ•°æ® Selector selector = Selector.open(); socketChannel.configureBlocking(false); socketChannel.register(selector, SelectionKey.OP_READ); //åˆ›å»ºçº¿ç¨‹ new Thread(new ClientThread(selector)).start(); //å‘æœåŠ¡å™¨ç«¯å‘é€æ¶ˆæ¯ Scanner scanner = new Scanner(System.in); while (scanner.hasNextLine()) { String msg = scanner.nextLine(); if (msg.length() &gt; 0) { socketChannel.write(Charset.forName(&quot;UTF-8&quot;).encode(name + &quot; : &quot; + msg)); } } }} 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869import java.io.IOException;import java.nio.ByteBuffer;import java.nio.channels.SelectionKey;import java.nio.channels.Selector;import java.nio.channels.SocketChannel;import java.nio.charset.Charset;import java.util.Iterator;import java.util.Set;public class ClientThread implements Runnable { private Selector selector; public ClientThread(Selector selector) { this.selector = selector; } @Override public void run() { try { for (; ; ) { //è·å–channelæ•°é‡ int readChannels = selector.select(); if (readChannels == 0) { continue; } //è·å–å¯ç”¨çš„channel Set&lt;SelectionKey&gt; selectionKeys = selector.selectedKeys(); //éå†é›†åˆ Iterator&lt;SelectionKey&gt; iterator = selectionKeys.iterator(); while (iterator.hasNext()) { SelectionKey selectionKey = iterator.next(); //ç§»é™¤seté›†åˆå½“å‰selectionKey iterator.remove(); //å¦‚æœå¯è¯»çŠ¶æ€ if (selectionKey.isReadable()) { readOperator(selector, selectionKey); } } } } catch (Exception e) { } } //å¤„ç†å¯è¯»çŠ¶æ€æ“ä½œ private void readOperator(Selector selector, SelectionKey selectionKey) throws IOException { //1 ä»SelectionKeyè·å–åˆ°å·²ç»å°±ç»ªçš„é€šé“ SocketChannel socketChannel = (SocketChannel) selectionKey.channel(); //2 åˆ›å»ºbuffer ByteBuffer byteBuffer = ByteBuffer.allocate(1024); //3 å¾ªç¯è¯»å–å®¢æˆ·ç«¯æ¶ˆæ¯ int readLength = socketChannel.read(byteBuffer); String message = &quot;&quot;; if (readLength &gt; 0) { //åˆ‡æ¢è¯»æ¨¡å¼ byteBuffer.flip(); //è¯»å–å†…å®¹ message += Charset.forName(&quot;UTF-8&quot;).decode(byteBuffer); } //4 å°†channelå†æ¬¡æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Šï¼Œç›‘å¬å¯è¯»çŠ¶æ€ socketChannel.register(selector, SelectionKey.OP_READ); //5 æŠŠå®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼Œå¹¿æ’­åˆ°å…¶ä»–å®¢æˆ·ç«¯ if (message.length() &gt; 0) { //å¹¿æ’­ç»™å…¶ä»–å®¢æˆ·ç«¯ System.out.println(message); } }} 12345678import java.io.IOException;public class AClient { public static void main(String[] args) throws IOException { new ChatClient().startClient(&quot;lxl&quot;); }} 12345678import java.io.IOException;public class BClient { public static void main(String[] args) throws IOException { new ChatClient().startClient(&quot;xqm&quot;); }} others Filteræ¨¡å¼ é€šè¿‡ä¸€ä¸ªâ€œåŸºç¡€â€ç»„ä»¶å†å åŠ å„ç§â€œé™„åŠ â€åŠŸèƒ½ç»„ä»¶çš„æ¨¡å¼ï¼Œç§°ä¹‹ä¸ºFilteræ¨¡å¼ï¼ˆæˆ–è€…è£…é¥°å™¨æ¨¡å¼ï¼šDecoratorï¼‰ã€‚å®ƒå¯ä»¥è®©æˆ‘ä»¬é€šè¿‡å°‘é‡çš„ç±»æ¥å®ç°å„ç§åŠŸèƒ½çš„ç»„åˆ ç¼–å†™FilterInputStream æ“ä½œZip ZipInputStream JarInputStreamæ˜¯ä»ZipInputStreamæ´¾ç”Ÿ è¯»å–zipåŒ… åˆ›å»ºä¸€ä¸ªZipInputStreamï¼Œé€šå¸¸æ˜¯ä¼ å…¥ä¸€ä¸ªFileInputStreamä½œä¸ºæ•°æ®æºï¼Œç„¶åï¼Œå¾ªç¯è°ƒç”¨getNextEntry()ï¼Œç›´åˆ°è¿”å›nullï¼Œè¡¨ç¤ºzipæµç»“æŸã€‚ ä¸€ä¸ªZipEntryè¡¨ç¤ºä¸€ä¸ªå‹ç¼©æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¦‚æœæ˜¯å‹ç¼©æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±ç”¨read()æ–¹æ³•ä¸æ–­è¯»å–ï¼Œç›´åˆ°è¿”å›-1ï¼š try (ZipInputStream zip = new ZipInputStream(new FileInputStream(...))) { ZipEntry entry = null; while ((entry = zip.getNextEntry()) != null) { String name = entry.getName(); if (!entry.isDirectory()) { int n; while ((n = zip.read()) != -1) { ... } } } } å†™å…¥zipåŒ… å¯ä»¥ç›´æ¥å†™å…¥å†…å®¹åˆ°zipåŒ…ã€‚æˆ‘ä»¬è¦å…ˆåˆ›å»ºä¸€ä¸ªZipOutputStreamï¼Œé€šå¸¸æ˜¯åŒ…è£…ä¸€ä¸ªFileOutputStreamï¼Œç„¶åï¼Œæ¯å†™å…¥ä¸€ä¸ªæ–‡ä»¶å‰ï¼Œå…ˆè°ƒç”¨putNextEntry()ï¼Œç„¶åç”¨write()å†™å…¥byte[]æ•°æ®ï¼Œå†™å…¥å®Œæ¯•åè°ƒç”¨closeEntry()ç»“æŸè¿™ä¸ªæ–‡ä»¶çš„æ‰“åŒ…ã€‚ try (ZipOutputStream zip = new ZipOutputStream(new FileOutputStream(...))) { File[] files = ... for (File file : files) { zip.putNextEntry(new ZipEntry(file.getName())); zip.write(getFileDataAsBytes(file)); zip.closeEntry(); } } è¯»å–classpathèµ„æº æŠŠèµ„æºå­˜å‚¨åœ¨classpathä¸­å¯ä»¥é¿å…æ–‡ä»¶è·¯å¾„ä¾èµ–ï¼› Classå¯¹è±¡çš„getResourceAsStream()å¯ä»¥ä»classpathä¸­è¯»å–æŒ‡å®šèµ„æºï¼› æ ¹æ®classpathè¯»å–èµ„æºæ—¶ï¼Œéœ€è¦æ£€æŸ¥è¿”å›çš„InputStreamæ˜¯å¦ä¸ºnullã€‚ ä½¿ç”¨Files byte[] data = Files.readAllBytes(Paths.get(&quot;/path/to/file.txt&quot;)); // é»˜è®¤ä½¿ç”¨UTF-8ç¼–ç è¯»å–: String content1 = Files.readString(Paths.get(&quot;/path/to/file.txt&quot;)); // å¯æŒ‡å®šç¼–ç : String content2 = Files.readString(Paths.get(&quot;/path/to/file.txt&quot;), StandardCharsets.ISO_8859_1); // æŒ‰è¡Œè¯»å–å¹¶è¿”å›æ¯è¡Œå†…å®¹: List lines = Files.readAllLines(Paths.get(&quot;/path/to/file.txt&quot;)); / å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶: byte[] data = ... Files.write(Paths.get(&quot;/path/to/file.txt&quot;), data); // å†™å…¥æ–‡æœ¬å¹¶æŒ‡å®šç¼–ç : Files.writeString(Paths.get(&quot;/path/to/file.txt&quot;), &quot;æ–‡æœ¬å†…å®¹...&quot;, StandardCharsets.ISO_8859_1); // æŒ‰è¡Œå†™å…¥æ–‡æœ¬: List lines = ... Files.write(Paths.get(&quot;/path/to/file.txt&quot;), lines); æ­¤å¤–ï¼ŒFileså·¥å…·ç±»è¿˜æœ‰copy()ã€delete()ã€exists()ã€move()ç­‰å¿«æ·æ–¹æ³•æ“ä½œæ–‡ä»¶å’Œç›®å½•ã€‚ æœ€åéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒFilesæä¾›çš„è¯»å†™æ–¹æ³•ï¼Œå—å†…å­˜é™åˆ¶ï¼Œåªèƒ½è¯»å†™å°æ–‡ä»¶ï¼Œä¾‹å¦‚é…ç½®æ–‡ä»¶ç­‰ï¼Œä¸å¯ä¸€æ¬¡è¯»å…¥å‡ ä¸ªGçš„å¤§æ–‡ä»¶ã€‚è¯»å†™å¤§å‹æ–‡ä»¶ä»ç„¶è¦ä½¿ç”¨æ–‡ä»¶æµï¼Œæ¯æ¬¡åªè¯»å†™ä¸€éƒ¨åˆ†æ–‡ä»¶å†…å®¹ã€‚ å†…å­˜æ˜ å°„æ–‡ä»¶ å†…å­˜æ˜ å°„æ–‡ä»¶ I/O æ˜¯ä¸€ç§è¯»å’Œå†™æ–‡ä»¶æ•°æ®çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ¯”å¸¸è§„çš„åŸºäºæµæˆ–è€…åŸºäºé€šé“çš„ I/O å¿«å¾—å¤šã€‚ å‘å†…å­˜æ˜ å°„æ–‡ä»¶å†™å…¥å¯èƒ½æ˜¯å±é™©çš„ï¼Œåªæ˜¯æ”¹å˜æ•°ç»„çš„å•ä¸ªå…ƒç´ è¿™æ ·çš„ç®€å•æ“ä½œï¼Œå°±å¯èƒ½ä¼šç›´æ¥ä¿®æ”¹ç£ç›˜ä¸Šçš„æ–‡ä»¶ã€‚ä¿®æ”¹æ•°æ®ä¸å°†æ•°æ®ä¿å­˜åˆ°ç£ç›˜æ˜¯æ²¡æœ‰åˆ†å¼€çš„ã€‚ ä¸‹é¢ä»£ç è¡Œå°†æ–‡ä»¶çš„å‰ 1024 ä¸ªå­—èŠ‚æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œmap() æ–¹æ³•è¿”å›ä¸€ä¸ª MappedByteBufferï¼Œå®ƒæ˜¯ ByteBuffer çš„å­ç±»ã€‚å› æ­¤ï¼Œå¯ä»¥åƒä½¿ç”¨å…¶ä»–ä»»ä½• ByteBuffer ä¸€æ ·ä½¿ç”¨æ–°æ˜ å°„çš„ç¼“å†²åŒºï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨éœ€è¦æ—¶è´Ÿè´£æ‰§è¡Œæ˜ å°„ã€‚ MappedByteBuffer mbb = fc.map(FileChannel.MapMode.READ_WRITE, 0, 1024); OFFICE PIC CSV HTML å‹ç¼©æ–‡ä»¶ IO NIO é¢å‘æµ é¢å‘ç¼“å†² é˜»å¡IO éé˜»å¡IO æ—  é€‰æ‹©å™¨ NET OSIä¸ƒå±‚æ¨¡å‹ TCP/IPäº”å±‚æ¨¡å‹ ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹ IP åŸŸå ç«¯å£ é€šä¿¡åè®® ä¸€æ¬¡è¯·æ±‚çš„è¿‡ç¨‹ æé«˜CPUï¼Œé˜²æ­¢æœåŠ¡å™¨é™é… 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576package com.atguigu.java2;import java.io.IOException;class CPUTest { public static void main(String[] args) { CPUTestThread cpuTestThread = new CPUTestThread(); //ä¿®æ”¹foræ¬¡æ•° for (int i = 0; i &lt; 20; i++) { Thread cpuTest = new Thread(cpuTestThread); cpuTest.start(); }//Windows Task Manager shows try { Runtime.getRuntime().exec(&quot;taskmgr&quot;); } catch (IOException e1) { e1.printStackTrace(); } }}class CPUTestThread implements Runnable { @Override public void run() { int busyTime = 10; int idleTime = busyTime; long startTime = 0; while (true) { startTime = System.currentTimeMillis(); System.out.println(System.currentTimeMillis()+&quot;,&quot;+startTime+&quot;,&quot;+(System.currentTimeMillis() - startTime));// busy loop while ((System.currentTimeMillis() - startTime) &lt;= busyTime) ;// idle loop try { Thread.sleep(idleTime); } catch (InterruptedException e) { System.out.println(e); } } }} å…¶ä»–åŸºç¡€ [JVMä¸ä¸Šå±‚æŠ€æœ¯](JVM ä¸ä¸Šå±‚æŠ€æœ¯) hashcodeä¸ equalsä¸ == ç›¸å…³æ¦‚å¿µ 1.equals(Object obj)æ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦â€œç›¸åŒâ€ï¼Œå¦‚æœâ€œç›¸åŒâ€åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ hashCode()æ–¹æ³•è¿”å›ä¸€ä¸ªintæ•°ï¼Œåœ¨Objectç±»ä¸­çš„é»˜è®¤å®ç°æ˜¯â€œå°†è¯¥å¯¹è±¡çš„å†…éƒ¨åœ°å€è½¬æ¢æˆä¸€ä¸ªæ•´æ•°è¿”å›â€ã€‚ 2.è‹¥ä¸¤ä¸ªå¯¹è±¡equals(Object obj)è¿”å›trueï¼Œåˆ™hashCodeï¼ˆï¼‰æœ‰å¿…è¦ä¹Ÿè¿”å›ç›¸åŒçš„intæ•°ã€‚ 3.è‹¥ä¸¤ä¸ªå¯¹è±¡equals(Object obj)è¿”å›falseï¼Œåˆ™hashCodeï¼ˆï¼‰ä¸ä¸€å®šè¿”å›ä¸åŒçš„intæ•°ã€‚ 4.è‹¥ä¸¤ä¸ªå¯¹è±¡hashCodeï¼ˆï¼‰è¿”å›ç›¸åŒintæ•°ï¼Œåˆ™equalsï¼ˆObject objï¼‰ä¸ä¸€å®šè¿”å›trueã€‚ 5.è‹¥ä¸¤ä¸ªå¯¹è±¡hashCodeï¼ˆï¼‰è¿”å›ä¸åŒintæ•°ï¼Œåˆ™equalsï¼ˆObject objï¼‰ä¸€å®šè¿”å›falseã€‚ 6.åŒä¸€å¯¹è±¡åœ¨æ‰§è¡ŒæœŸé—´è‹¥å·²ç»å­˜å‚¨åœ¨é›†åˆä¸­ï¼Œåˆ™ä¸èƒ½ä¿®æ”¹å½±å“hashCodeå€¼çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜æ³„éœ²é—®é¢˜ã€‚ 7.è‹¥é‡å†™äº†equals(Object obj)æ–¹æ³•ï¼Œåˆ™æœ‰å¿…è¦é‡å†™hashCode()æ–¹æ³•ã€‚ ä»€ä¹ˆæ—¶å€™éœ€è¦é‡å†™hashcodeä¸equalsï¼Ÿ å¯¹è±¡æ¯”è¾ƒ equalsä¸==åŒºåˆ«ï¼Ÿ åŸºæœ¬ç±»å‹ä¸­ï¼Œ==åˆ¤æ–­å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¼•ç”¨ç±»å‹ä¸­æ¯”è¾ƒçš„æ˜¯åœ°å€æ˜¯å¦ç›¸ç­‰ equalsåªèƒ½ç”¨äºå¼•ç”¨ç±»å‹ï¼Œequalså…·ä½“åˆ¤æ–­è¦åœ¨åˆ¤æ–­å¯¹è±¡ä¸­çœ‹equalså®ç°,é»˜è®¤æ˜¯åˆ¤æ–­åœ°å€ï¼Œé‡å†™ä¹‹åçœ‹å…·ä½“å®ç°ï¼Œä¸€èˆ¬æ˜¯æ¯”è¾ƒå¯¹è±¡å†…å®¹ã€‚ é¢å‘å¯¹è±¡ å°è£…ç»§æ‰¿å¤šæ€ å°è£… â€‹ å°†ä¸€ç³»åˆ—æ“ä½œå°è£…æˆä¸€ä¸ªåŠŸèƒ½ï¼Œéšè—å®ç°ç»†èŠ‚ï¼Œæ–½åŠ æƒé™æ§åˆ¶ï¼Œè®©ç”¨æˆ·ä¸å†æ“å¿ƒåŠŸèƒ½å®ç°ï¼Œå‡å°‘ä»£ç å†—ä½™ã€‚ ç»§æ‰¿ï¼ˆextendsï¼‰ â€‹ æ¶ˆé™¤é‡å¤åˆ›å»ºç›¸åŒåŠŸèƒ½ç±»ï¼Œç»§æ‰¿ä»¥å¤åˆ¶åŸºç±»åŠŸèƒ½å±æ€§å¹¶è¦†ç›–å·²è¿›è¡Œæ‰©å±•ä¿®æ”¹ã€‚ â€‹ ç»§æ‰¿åˆå§‹åŒ–é“¾ï¼š 12345678/**å­˜åœ¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œåˆå§‹åŒ–é¡ºåºä¸ºï¼š çˆ¶ç±»ï¼ˆé™æ€å˜é‡ã€é™æ€è¯­å¥å—ï¼‰ å­ç±»ï¼ˆé™æ€å˜é‡ã€é™æ€è¯­å¥å—ï¼‰ çˆ¶ç±»ï¼ˆå®ä¾‹å˜é‡ã€æ™®é€šè¯­å¥å—ï¼‰ çˆ¶ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰ å­ç±»ï¼ˆå®ä¾‹å˜é‡ã€æ™®é€šè¯­å¥å—ï¼‰ å­ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰*/ é™æ€--&gt;å®ä¾‹--ã€‹æ™®é€šè¯­å¥å—--ã€‹æ„é€  å¤šæ€ æ¥å£å’Œå®ç°ç±»ï¼Œç›¸åŒæ¥å£æœ‰ä¸åŒå®ç°ç±»ä»¥å®ç°ä¸åŒæ ·å¼çš„ç›¸åŒåŠŸèƒ½ã€‚ finalã€finallyã€finalize â€‹ finalé€šå¸¸å«ä¹‰ä¸ºä¸å¯æ”¹å˜ï¼Œæ— æ³•æ”¹å˜ç”±è®¾è®¡å’Œæ•ˆç‡ä¸¤ä¸ªæ–¹é¢ã€‚ä¿®é¥°ç±»ä¸å¯è¢«ç»§æ‰¿ï¼ˆç±»ä¸­æ–¹æ³•è¢«éšå¼ç”Ÿå‘½ä¸ºfinalï¼‰ï¼Œä¿®é¥°æ–¹æ³•ä¸å¯è¢«è¦†ç›–ï¼ˆæ•ˆæœåŒè¢«privateä¿®é¥°çš„æ–¹æ³•ï¼Œä¹Ÿè¢«éšå¼finaläº†ï¼‰ï¼Œä¿®é¥°å˜é‡ä¸å¯è¢«ä¿®æ”¹ï¼ˆåŸºæœ¬å˜é‡ä¿®é¥°åå³ä¸ºå¸¸é‡ï¼‰ï¼Œä¿®é¥°å¯¹è±¡åªæ˜¯é™åˆ¶äº†å…¶å¼•ç”¨åœ°å€ä½†ä¸ä¼šé™åˆ¶å…¶å¯¹è±¡å€¼ã€‚finallyæ˜¯åœ¨try..catchè¯­å¥ä¸­tryæ‰§è¡Œåä¸”æœªè¢«å°†ç¨‹åºç»ˆæ­¢æœ€åå¿…é¡»æ‰§è¡Œçš„è¯­å¥å—ã€finalizeç”¨äºå¯¹è±¡å›æ”¶ï¼Œå±äºObjectçš„æ–¹æ³•ï¼Œè°ƒç”¨å¹¶ä¸ä¸€å®šä¼šé©¬ä¸Šå›æ”¶å¯¹è±¡ã€‚ å‘ä¸Š/ä¸‹è½¬å‹ å‘ä¸Šå³çˆ¶ç”¨å­ï¼Œå‘ä¸‹å³å­ç”¨çˆ¶ã€‚ 123456Father f1 = new Son(); // è¿™å°±å« upcasting ï¼ˆå‘ä¸Šè½¬å‹)// ç°åœ¨ f1 å¼•ç”¨æŒ‡å‘ä¸€ä¸ªSonå¯¹è±¡//å¹¶ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥å‘ä¸‹è½¬å‹ï¼Œåªæœ‰å½“è¿™ä¸ªå¯¹è±¡åŸæœ¬å°±æ˜¯å­ç±»å¯¹è±¡é€šè¿‡å‘ä¸Šè½¬å‹å¾—åˆ°çš„æ—¶å€™æ‰èƒ½å¤ŸæˆåŠŸè½¬å‹ã€‚Son s1 = (Son)f1; // è¿™å°±å« downcasting (å‘ä¸‹è½¬å‹)// ç°åœ¨f1 è¿˜æ˜¯æŒ‡å‘ Sonå¯¹è±¡ å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±» æ²¡æœ‰åå­—çš„ç±»æˆ–æ¥å£å®ç°æ‰€ä»¥åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œæ— æ³•è¢«å…¶ä»–ç±»å®ä¾‹åŒ–ï¼Œç”¨æ¥ç®€åŒ–ä»£ç ç¼–å†™ã€‚ åŒ¿åç±»å¯ç»§æ‰¿ã€é‡å†™çˆ¶ç±»çš„æ–¹æ³• ä½¿ç”¨åŒ¿åç±»æ—¶ï¼Œå¿…ç„¶æ˜¯åœ¨æŸä¸ªç±»ä¸­ç›´æ¥ç”¨åŒ¿åç±»åˆ›å»ºå¯¹è±¡ï¼Œå› æ­¤åŒ¿åç±»ä¸€å®šæ˜¯å†…éƒ¨ç±» åŒ¿åç±»å¯ä»¥è®¿é—®å¤–åµŒç±»ä¸­çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼ŒåŒ¿åç±»çš„ç±»ä½“ä¸­ä¸å¯ä»¥å£°æ˜staticæˆå‘˜å˜é‡å’Œstaticæ–¹æ³• ç”±äºåŒ¿åç±»æ˜¯ä¸€ä¸ªå­ç±»ï¼Œä½†æ²¡æœ‰ç±»åï¼Œæ‰€ä»¥åœ¨ç”¨åŒ¿åç±»åˆ›å»ºå¯¹è±¡æ—¶ï¼Œè¦ç›´æ¥ä½¿ç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³• static â€‹ æ–¹ä¾¿åœ¨æ²¡æœ‰åˆ›å»ºå¯¹è±¡çš„æƒ…å†µä¸‹æ¥è¿›è¡Œè°ƒç”¨ï¼ˆæ–¹æ³•/å˜é‡ï¼‰ï¼Œé™æ€æ–¹æ³•ä¸­ä¸èƒ½ä¾èµ–éé™æ€æ–¹æ³•ã€å±æ€§ï¼Œåä¹‹éé™æ€æˆå‘˜æ–¹æ³•ä¸­å¯è®¿é—®é™æ€æˆå‘˜å˜é‡ã€æ–¹æ³•ã€‚ é™æ€å˜é‡åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªï¼Œéé™æ€å˜é‡éšå¯¹è±¡åˆ›å»ºè€Œåˆ›å»ºï¼Œå„ä¸ªå˜é‡ä¹‹é—´äº’ä¸å½±å“ã€‚staticä¸èƒ½ç”¨æ¥ä¿®é¥°å±€éƒ¨å˜é‡ã€‚é™æ€ä»£ç å—åªæœ‰åœ¨ç±»åŠ è½½çš„æ—¶å€™åˆ›å»ºä¸€æ¬¡ï¼Œé€‚åˆäºåªéœ€è¦è¿›è¡Œä¸€æ¬¡åˆå§‹åŒ–çš„æ“ä½œã€‚é™åªé™ï¼Œéå¯é™ CAPã€BASEç†è®º AQS JDKæ–°ç‰ˆæœ¬ç‰¹å¾ Lambda è¡¨è¾¾å¼ æµStreamï¼ˆï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960package pers.lxl.mylearnproject.programbase.newjdk;import java.util.Arrays;import java.util.IntSummaryStatistics;import java.util.List;import java.util.Random;import java.util.stream.Collectors;/** * JDK8 æ–°ç‰¹æ€§streamï¼ˆï¼‰ * ä»¥å£°æ˜çš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œç±»ä¼¼ç”¨sqlä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®çš„æ–¹å¼æ¥æä¾›å¯¹é›†åˆçš„è¿ç®—å’Œè¡¨è¾¾çš„é«˜é˜¶æŠ½è±¡ * å…¶å°†è¦å¤„ç†çš„æ•°æ®çœ‹æˆä¸€ç§æµï¼Œæµåœ¨ç®¡é“ä¸­ä¼ è¾“ï¼Œå…¶å¯ä»¥å†ç®¡é“çš„èŠ‚ç‚¹ä¸­è¿›è¡Œç­›é€‰æ’åºèšåˆç­‰ä¸€ç³»åˆ—æ“ä½œ * Streamï¼ˆæµï¼‰æ˜¯ä¸€ä¸ªæ¥è‡ªæ•°æ®æºçš„å…ƒç´ é˜Ÿåˆ—å¹¶æ”¯æŒèšåˆæ“ä½œ * å…ƒç´ æ˜¯ç‰¹å®šç±»å‹çš„å¯¹è±¡ï¼Œå½¢æˆä¸€ä¸ªé˜Ÿåˆ—ã€‚ Javaä¸­çš„Streamå¹¶ä¸ä¼šå­˜å‚¨å…ƒç´ ï¼Œè€Œæ˜¯æŒ‰éœ€è®¡ç®—ã€‚ * æ•°æ®æº æµçš„æ¥æºã€‚ å¯ä»¥æ˜¯é›†åˆï¼Œæ•°ç»„ï¼ŒI/O channelï¼Œ äº§ç”Ÿå™¨generator ç­‰ã€‚ * èšåˆæ“ä½œ ç±»ä¼¼SQLè¯­å¥ä¸€æ ·çš„æ“ä½œï¼Œ æ¯”å¦‚filter, map, reduce, find, match, sortedç­‰ã€‚ * å’Œä»¥å‰çš„Collectionæ“ä½œä¸åŒï¼Œ Streamæ“ä½œè¿˜æœ‰ä¸¤ä¸ªåŸºç¡€çš„ç‰¹å¾ï¼š * Pipelining: ä¸­é—´æ“ä½œéƒ½ä¼šè¿”å›æµå¯¹è±¡æœ¬èº«ã€‚ è¿™æ ·å¤šä¸ªæ“ä½œå¯ä»¥ä¸²è”æˆä¸€ä¸ªç®¡é“ï¼Œ å¦‚åŒæµå¼é£æ ¼ï¼ˆfluent styleï¼‰ã€‚ è¿™æ ·åšå¯ä»¥å¯¹æ“ä½œè¿›è¡Œä¼˜åŒ–ï¼Œ æ¯”å¦‚å»¶è¿Ÿæ‰§è¡Œ(laziness)å’ŒçŸ­è·¯(short-circuiting)ã€‚ * å†…éƒ¨è¿­ä»£ï¼š ä»¥å‰å¯¹é›†åˆéå†éƒ½æ˜¯é€šè¿‡Iteratoræˆ–è€…For-Eachçš„æ–¹å¼, æ˜¾å¼çš„åœ¨é›†åˆå¤–éƒ¨è¿›è¡Œè¿­ä»£ï¼Œ è¿™å«åšå¤–éƒ¨è¿­ä»£ã€‚ Streamæä¾›äº†å†…éƒ¨è¿­ä»£çš„æ–¹å¼ï¼Œ é€šè¿‡è®¿é—®è€…æ¨¡å¼(Visitor)å®ç°ã€‚ */public class StreamL { public static void main(String[] args) {// 1.ç”Ÿæˆæµ //stream() âˆ’ ä¸ºé›†åˆåˆ›å»ºä¸²è¡Œæµã€‚ //parallelStream() âˆ’ ä¸ºé›†åˆåˆ›å»ºå¹¶è¡Œæµã€‚ List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;, &quot;&quot;, &quot;jkl&quot;); List&lt;String&gt; filtered = strings.stream().filter(string -&gt; !string.isEmpty()).collect(Collectors.toList()); List&lt;String&gt; filteredParallelStream = strings.parallelStream().filter(string -&gt; !string.isEmpty()).collect(Collectors.toList());// 2.èšåˆæ“ä½œ// è¿­ä»£æ•°æ®foreach(),limit() è·å–æŒ‡å®šæ•°é‡çš„æµ,sorted() å¯¹æµè¿›è¡Œæ’åºã€‚ Random random = new Random(); random.ints().limit(10).sorted().forEach(System.out::println);// map() æ˜ å°„æ¯ä¸ªå…ƒç´ åˆ°å¯¹åº”çš„ç»“æœ List&lt;Integer&gt; numbers = Arrays.asList(3, 2, 2, 3, 7, 3, 5);// è·å–å¯¹åº”çš„å¹³æ–¹æ•° List&lt;Integer&gt; squaresList = numbers.stream().map( i -&gt; i*i).distinct().collect(Collectors.toList());// filter() é€šè¿‡è®¾ç½®çš„æ¡ä»¶è¿‡æ»¤å‡ºå…ƒç´ // è·å–ç©ºå­—ç¬¦ä¸²çš„æ•°é‡ long count = strings.stream().filter(string -&gt; string.isEmpty()).count();// å¹¶è¡Œï¼ˆparallelï¼‰ç¨‹åº// parallelStream æ˜¯æµå¹¶è¡Œå¤„ç†ç¨‹åºçš„ä»£æ›¿æ–¹æ³•ã€‚ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬ä½¿ç”¨ parallelStream æ¥è¾“å‡ºç©ºå­—ç¬¦ä¸²çš„æ•°é‡ï¼š// è·å–ç©ºå­—ç¬¦ä¸²çš„æ•°é‡// 3.Collectors// Collectors ç±»å®ç°å½’çº¦æ“ä½œï¼Œä¾‹å¦‚å°†æµè½¬æ¢æˆé›†åˆå’Œèšåˆå…ƒç´ ã€‚Collectors å¯ç”¨äºè¿”å›åˆ—è¡¨æˆ–å­—ç¬¦ä¸²ï¼š System.out.println(&quot;ç­›é€‰åˆ—è¡¨: &quot; + filtered); String mergedString = strings.stream().filter(string -&gt; !string.isEmpty()).collect(Collectors.joining(&quot;, &quot;)); System.out.println(&quot;åˆå¹¶å­—ç¬¦ä¸²: &quot; + mergedString);// 4.ç»Ÿè®¡// ä¸€äº›äº§ç”Ÿç»Ÿè®¡ç»“æœçš„æ”¶é›†å™¨ä¹Ÿéå¸¸æœ‰ç”¨ã€‚å®ƒä»¬ä¸»è¦ç”¨äºintã€doubleã€longç­‰åŸºæœ¬ç±»å‹ä¸Šï¼Œå®ƒä»¬å¯ä»¥ç”¨æ¥äº§ç”Ÿç±»ä¼¼å¦‚ä¸‹çš„ç»Ÿè®¡ç»“æœã€‚ IntSummaryStatistics stats = numbers.stream().mapToInt((x) -&gt; x).summaryStatistics(); System.out.println(&quot;åˆ—è¡¨ä¸­æœ€å¤§çš„æ•° : &quot; + stats.getMax()); System.out.println(&quot;åˆ—è¡¨ä¸­æœ€å°çš„æ•° : &quot; + stats.getMin()); System.out.println(&quot;æ‰€æœ‰æ•°ä¹‹å’Œ : &quot; + stats.getSum()); System.out.println(&quot;å¹³å‡æ•° : &quot; + stats.getAverage()); }} å…¶ä»– å±€éƒ¨å˜é‡éœ€è¦æ˜¾ç¤ºåˆå§‹åŒ– ä¿ç•™å­—ï¼š 1ï¼‰48ä¸ªå…³é”®å­—ï¼šabstractã€assertã€booleanã€breakã€byteã€caseã€catchã€charã€classã€continueã€defaultã€doã€doubleã€elseã€enumã€extendsã€finalã€finallyã€floatã€forã€ifã€implementsã€importã€intã€interfaceã€instanceofã€longã€nativeã€newã€packageã€privateã€protectedã€publicã€returnã€shortã€staticã€strictfpã€superã€switchã€synchronizedã€thisã€throwã€throwsã€transientã€tryã€voidã€volatileã€whileã€‚ 2ï¼‰2ä¸ªä¿ç•™å­—ï¼ˆç°åœ¨æ²¡ç”¨ä»¥åå¯èƒ½ç”¨åˆ°ä½œä¸ºå…³é”®å­—ï¼‰ï¼šgotoã€constã€‚ 3ï¼‰3ä¸ªç‰¹æ®Šç›´æ¥é‡ï¼štrueã€falseã€nullã€‚ åŸºç¡€ç±»åº“ï¼ˆä»ä¸Šåˆ°ä¸‹ç®€åŒ–äº†è§£ï¼‰ ã€java.io java.lang java.utilã€‘ ã€java.lang.reflect java.net javax.net.* java.nio.* java.util.concurrent.ã€‘ ã€java.lang.annotation javax.annotation.* java.lang.refjava.math java.rmi.*javax.rmi. java.security. javax.security. java.sqljavax.sql. javax.transaction. *java.text javax.xml.org.w3c.dom.org.xml.sax. javax.crypto. * javax.imageio. javax.jws. * java.util.jar java.util.logging java.util.prefs java.util.regex java.util.zipã€‘ è®¿é—®æƒé™ private default protected public åŒä¸€ä¸ªç±»ä¸­ âˆš âˆš âˆš âˆš åŒä¸€ä¸ªåŒ…ä¸­ âˆš âˆš âˆš å­ç±»ä¸­ âˆš âˆš å…¨å±€èŒƒå›´å†… âˆš åŸºæœ¬æ•°æ®ç±»å‹ æ•°æ®ç±»å‹ ä½æ•° é»˜è®¤å€¼ å–å€¼èŒƒå›´ ä¸¾ä¾‹è¯´æ˜ byte(ä½) 8 0 -2^7 --- 2^7-1 byte b = 10; boolean(å¸ƒå°”å€¼) 8 false trueã€false boolean b = true; short(çŸ­æ•´æ•°) 16 0 -2^15 --- 2^15-1 short s = 10; char(å­—ç¬¦) 16 ç©º 0 --- 2^16-1 char c = 'c'; int(æ•´æ•°) 32 0 -2^31 --- 2^31-1 int i = 10; float(å•ç²¾åº¦) 32 0.0 -2^31 --- 2^31-1 float f = 10.0f; long(é•¿æ•´æ•°) 64 0 -2^63 --- 2^63-1 long l = 10l; double(åŒç²¾åº¦) 64 0.0 -2^63 --- 2^63-1 double d = 10.0d; è‡ªåŠ¨ç±»å‹è½¬æ¢ 1.è‹¥å‚ä¸è¿ç®—çš„æ•°æ®ç±»å‹ä¸åŒï¼Œåˆ™å…ˆè½¬æ¢æˆåŒä¸€ç±»å‹ï¼Œç„¶åè¿›è¡Œè¿ç®—ã€‚ 2.è½¬æ¢æŒ‰æ•°æ®é•¿åº¦å¢åŠ çš„æ–¹å‘è¿›è¡Œï¼Œä»¥ä¿è¯ç²¾åº¦ä¸é™ä½ã€‚ä¾‹å¦‚intå‹å’Œlongå‹è¿ç®—æ—¶ï¼Œå…ˆæŠŠinté‡è½¬æˆlongå‹åå†è¿›è¡Œè¿ç®—ã€‚ 3.æ‰€æœ‰çš„æµ®ç‚¹è¿ç®—éƒ½æ˜¯ä»¥åŒç²¾åº¦è¿›è¡Œçš„ï¼Œå³ä½¿ä»…å«floatå•ç²¾åº¦é‡è¿ç®—çš„è¡¨è¾¾å¼ï¼Œä¹Ÿè¦å…ˆè½¬æ¢æˆdoubleå‹ï¼Œå†ä½œè¿ç®—ã€‚ 4.charå‹å’Œshortå‹å‚ä¸è¿ç®—æ—¶ï¼Œå¿…é¡»å…ˆè½¬æ¢æˆintå‹ã€‚ 5.åœ¨èµ‹å€¼è¿ç®—ä¸­ï¼Œèµ‹å€¼å·ä¸¤è¾¹çš„æ•°æ®ç±»å‹ä¸åŒæ—¶ï¼Œéœ€è¦æŠŠå³è¾¹è¡¨è¾¾å¼çš„ç±»å‹å°†è½¬æ¢ä¸ºå·¦è¾¹å˜é‡çš„ç±»å‹ã€‚å¦‚æœå³è¾¹è¡¨è¾¾å¼çš„æ•°æ®ç±»å‹é•¿åº¦æ¯”å·¦è¾¹é•¿æ—¶ï¼Œå°†ä¸¢å¤±ä¸€éƒ¨åˆ†æ•°æ®ï¼Œè¿™æ ·ä¼šé™ä½ç²¾åº¦ã€‚ ä¸‹å›¾è¡¨ç¤ºäº†ç±»å‹è‡ªåŠ¨è½¬æ¢çš„è§„åˆ™ï¼š Stringã€StringBufferã€StringBuilder åŒºåˆ« 1234567891011121314151617181920212223242526** * Stringä½¿ç”¨+æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨å¾ªç¯ä¸­ï¼Œåœ¨å¾ªç¯ä¸­ï¼Œ * æ¯æ¬¡å¾ªç¯éƒ½ä¼šåˆ›å»ºæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œç„¶åæ‰”æ‰æ—§çš„å­—ç¬¦ä¸²ã€‚ * è¿™æ ·ï¼Œç»å¤§éƒ¨åˆ†å­—ç¬¦ä¸²éƒ½æ˜¯ä¸´æ—¶å¯¹è±¡ï¼Œä¸ä½†æµªè´¹å†…å­˜ï¼Œè¿˜ä¼šå½±å“GCæ•ˆç‡ * ä¸ºé«˜æ•ˆæ‹¼æ¥å­—ç¬¦ä¸²Javaæ ‡å‡†åº“æä¾›äº†StringBuilderï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡ï¼Œå¯ä»¥é¢„åˆ†é…ç¼“å†²åŒº * å¯¹äºæ™®é€šçš„å­—ç¬¦ä¸²+æ“ä½œï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬å°†å…¶æ”¹å†™ä¸ºStringBuilderï¼Œ * å› ä¸ºJavaç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å°±è‡ªåŠ¨æŠŠå¤šä¸ªè¿ç»­çš„+æ“ä½œç¼–ç ä¸ºStringConcatFactoryçš„æ“ä½œã€‚ * åœ¨è¿è¡ŒæœŸï¼ŒStringConcatFactoryä¼šè‡ªåŠ¨æŠŠå­—ç¬¦ä¸²è¿æ¥æ“ä½œä¼˜åŒ–ä¸ºæ•°ç»„å¤åˆ¶æˆ–è€…StringBuilderæ“ä½œ * StringBufferé€šè¿‡åŒæ­¥æ¥ä¿è¯å¤šä¸ªçº¿ç¨‹æ“ä½œStringBufferä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯åŒæ­¥ä¼šå¸¦æ¥æ‰§è¡Œé€Ÿåº¦çš„ä¸‹é™ * StringBuilderå’ŒStringBufferæ¥å£å®Œå…¨ç›¸åŒï¼Œç°åœ¨å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨StringBuffer * @author lxl*/public class StringBuilderL { public static void main(String[] args) { StringBuffer sb = new StringBuffer(1024); for (int i = 0; i &lt; 1000; i++) { sb.append('s'); sb.append(i); } sb.append(&quot;good &quot;) .append(&quot;LXL&quot;) .insert(0, &quot;DD&quot;);//é“¾å¼æ“ä½œ String s = sb.toString(); System.out.println(s); }} JDKä¸JREåŒºåˆ« 12#æŸ¥çœ‹JDKè·¯å¾„ java -verbose JDK â€‹ JDK(Java SE Development Kit)ï¼ŒJavaæ ‡å‡†å¼€å‘åŒ…ï¼Œå®ƒæä¾›äº†ç¼–è¯‘ã€è¿è¡ŒJavaç¨‹åºæ‰€éœ€çš„å„ç§å·¥å…·å’Œèµ„æºï¼ŒåŒ…æ‹¬Javaç¼–è¯‘å™¨ã€Javaè¿è¡Œæ—¶ç¯å¢ƒï¼Œä»¥åŠå¸¸ç”¨çš„Javaç±»åº“ç­‰ã€‚ JRE â€‹ JRE( Java Runtime Environment) ã€Javaè¿è¡Œç¯å¢ƒï¼Œç”¨äºè§£é‡Šæ‰§è¡ŒJavaçš„å­—èŠ‚ç æ–‡ä»¶ã€‚æ™®é€šç”¨æˆ·è€Œåªéœ€è¦å®‰è£… JREï¼ˆJava Runtime Environmentï¼‰æ¥è¿è¡Œ Java ç¨‹åºã€‚è€Œç¨‹åºå¼€å‘è€…å¿…é¡»å®‰è£…JDKæ¥ç¼–è¯‘ã€è°ƒè¯•ç¨‹åºã€‚ å‚è€ƒèµ„æºï¼š 1.https://blog.csdn.net/xushiyu1996818/article/details/91983557","link":"/2021/02/24/Draft/2021/Java/"}],"tags":[{"name":"BUG","slug":"BUG","link":"/tags/BUG/"},{"name":"CRUD","slug":"CRUD","link":"/tags/CRUD/"},{"name":"å·¥å…·æ•™ç¨‹","slug":"å·¥å…·æ•™ç¨‹","link":"/tags/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"},{"name":"Interesting Programs","slug":"Interesting-Programs","link":"/tags/Interesting-Programs/"},{"name":"Life","slug":"Life","link":"/tags/Life/"},{"name":"Frame","slug":"Frame","link":"/tags/Frame/"},{"name":"NO GAME NO LIFE","slug":"NO-GAME-NO-LIFE","link":"/tags/NO-GAME-NO-LIFE/"},{"name":"Nginx","slug":"Nginx","link":"/tags/Nginx/"},{"name":"è®°å½•","slug":"è®°å½•","link":"/tags/%E8%AE%B0%E5%BD%95/"},{"name":"Software Engineer","slug":"Software-Engineer","link":"/tags/Software-Engineer/"},{"name":"å¾…åŠ","slug":"å¾…åŠ","link":"/tags/%E5%BE%85%E5%8A%9E/"},{"name":"æ¨¡æ¿","slug":"æ¨¡æ¿","link":"/tags/%E6%A8%A1%E6%9D%BF/"},{"name":"ä¹¦å½±éŸ³","slug":"ä¹¦å½±éŸ³","link":"/tags/%E4%B9%A6%E5%BD%B1%E9%9F%B3/"},{"name":"éŸ³ä¹","slug":"éŸ³ä¹","link":"/tags/%E9%9F%B3%E4%B9%90/"},{"name":"å¥èº«å¤–å‹","slug":"å¥èº«å¤–å‹","link":"/tags/%E5%81%A5%E8%BA%AB%E5%A4%96%E5%9E%8B/"},{"name":"æ–‡ä»¶ç›®å½•","slug":"æ–‡ä»¶ç›®å½•","link":"/tags/%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95/"},{"name":"å­¦ä¹ æ–¹æ³•","slug":"å­¦ä¹ æ–¹æ³•","link":"/tags/%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"},{"name":"ç”µè„‘çŸ¥è¯†","slug":"ç”µè„‘çŸ¥è¯†","link":"/tags/%E7%94%B5%E8%84%91%E7%9F%A5%E8%AF%86/"},{"name":"æ‘„å½±æ‘„åƒ","slug":"æ‘„å½±æ‘„åƒ","link":"/tags/%E6%91%84%E5%BD%B1%E6%91%84%E5%83%8F/"},{"name":"æ¯æ—¥ç®—æ³•","slug":"æ¯æ—¥ç®—æ³•","link":"/tags/%E6%AF%8F%E6%97%A5%E7%AE%97%E6%B3%95/"},{"name":"æ¶æ„å¸ˆ","slug":"æ¶æ„å¸ˆ","link":"/tags/%E6%9E%B6%E6%9E%84%E5%B8%88/"},{"name":"English","slug":"English","link":"/tags/English/"},{"name":"æ¯æ—¥é¢é¢˜","slug":"æ¯æ—¥é¢é¢˜","link":"/tags/%E6%AF%8F%E6%97%A5%E9%9D%A2%E9%A2%98/"},{"name":"è‡ªåª’ä½“","slug":"è‡ªåª’ä½“","link":"/tags/%E8%87%AA%E5%AA%92%E4%BD%93/"},{"name":"ä¸´æ—¶è®°å½•","slug":"ä¸´æ—¶è®°å½•","link":"/tags/%E4%B8%B4%E6%97%B6%E8%AE%B0%E5%BD%95/"},{"name":"ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè®ºæ–‡æ¨¡æ¿","slug":"ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè®ºæ–‡æ¨¡æ¿","link":"/tags/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%BA%E6%96%87%E6%A8%A1%E6%9D%BF/"},{"name":"Dubbo","slug":"Dubbo","link":"/tags/Dubbo/"},{"name":"æ–‡ä»¶ä¸Šä¼ ä¸‹è½½","slug":"æ–‡ä»¶ä¸Šä¼ ä¸‹è½½","link":"/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD/"},{"name":"SpringCloud","slug":"SpringCloud","link":"/tags/SpringCloud/"},{"name":"ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ","slug":"ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ","link":"/tags/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88/"},{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","link":"/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"å¿«æŸ¥","slug":"å¿«æŸ¥","link":"/tags/%E5%BF%AB%E6%9F%A5/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","link":"/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"RabbitMQ","slug":"RabbitMQ","link":"/tags/RabbitMQ/"},{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","link":"/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"name":"Pythonå­¦ä¹ ","slug":"Pythonå­¦ä¹ ","link":"/tags/Python%E5%AD%A6%E4%B9%A0/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","link":"/tags/%E5%89%8D%E7%AB%AF/"},{"name":"MongoDB","slug":"MongoDB","link":"/tags/MongoDB/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","link":"/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"Redis","slug":"Redis","link":"/tags/Redis/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","link":"/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åº•å±‚å­¦ä¹ ","slug":"åº•å±‚å­¦ä¹ ","link":"/tags/%E5%BA%95%E5%B1%82%E5%AD%A6%E4%B9%A0/"},{"name":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","link":"/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"}],"categories":[{"name":"BUGè®°å½•","slug":"BUGè®°å½•","link":"/categories/BUG%E8%AE%B0%E5%BD%95/"},{"name":"ç¨‹åºåŸºç¡€","slug":"ç¨‹åºåŸºç¡€","link":"/categories/%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80/"},{"name":"å·¥å…·æ•™ç¨‹","slug":"å·¥å…·æ•™ç¨‹","link":"/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"},{"name":"å…¶ä»–","slug":"å…¶ä»–","link":"/categories/%E5%85%B6%E4%BB%96/"},{"name":"BUG","slug":"BUGè®°å½•/BUG","link":"/categories/BUG%E8%AE%B0%E5%BD%95/BUG/"},{"name":"ç”Ÿæ´»è®°å½•","slug":"ç”Ÿæ´»è®°å½•","link":"/categories/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/"},{"name":"CRUD","slug":"ç¨‹åºåŸºç¡€/CRUD","link":"/categories/%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80/CRUD/"},{"name":"Frame","slug":"Frame","link":"/categories/Frame/"},{"name":"æ¸¸æˆäººç”Ÿ","slug":"æ¸¸æˆäººç”Ÿ","link":"/categories/%E6%B8%B8%E6%88%8F%E4%BA%BA%E7%94%9F/"},{"name":"ä¸»é¢˜å·¥å…·","slug":"å·¥å…·æ•™ç¨‹/ä¸»é¢˜å·¥å…·","link":"/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/%E4%B8%BB%E9%A2%98%E5%B7%A5%E5%85%B7/"},{"name":"ä¸­é—´ä»¶","slug":"ä¸­é—´ä»¶","link":"/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"name":"Office","slug":"å·¥å…·æ•™ç¨‹/Office","link":"/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/Office/"},{"name":"è®°å½•","slug":"è®°å½•","link":"/categories/%E8%AE%B0%E5%BD%95/"},{"name":"Interesting Programs","slug":"å…¶ä»–/Interesting-Programs","link":"/categories/%E5%85%B6%E4%BB%96/Interesting-Programs/"},{"name":"ç¨‹åºäººç”Ÿ","slug":"ç¨‹åºäººç”Ÿ","link":"/categories/%E7%A8%8B%E5%BA%8F%E4%BA%BA%E7%94%9F/"},{"name":"å¾…åŠ","slug":"å¾…åŠ","link":"/categories/%E5%BE%85%E5%8A%9E/"},{"name":"æ¨¡æ¿","slug":"æ¨¡æ¿","link":"/categories/%E6%A8%A1%E6%9D%BF/"},{"name":"Life","slug":"ç”Ÿæ´»è®°å½•/Life","link":"/categories/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/Life/"},{"name":"ä¹¦å½±éŸ³","slug":"ä¹¦å½±éŸ³","link":"/categories/%E4%B9%A6%E5%BD%B1%E9%9F%B3/"},{"name":"å…´è¶£çˆ±å¥½","slug":"å…´è¶£çˆ±å¥½","link":"/categories/%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD/"},{"name":"Markdown","slug":"å·¥å…·æ•™ç¨‹/Markdown","link":"/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/Markdown/"},{"name":"åšå®¢æ­å»º","slug":"å·¥å…·æ•™ç¨‹/åšå®¢æ­å»º","link":"/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"},{"name":"å¥åº·","slug":"å¥åº·","link":"/categories/%E5%81%A5%E5%BA%B7/"},{"name":"æ–‡ä»¶ç›®å½•","slug":"æ–‡ä»¶ç›®å½•","link":"/categories/%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95/"},{"name":"å­¦ä¹ æ–¹æ³•","slug":"å­¦ä¹ æ–¹æ³•","link":"/categories/%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"},{"name":"MyBatis-Plus","slug":"Frame/MyBatis-Plus","link":"/categories/Frame/MyBatis-Plus/"},{"name":"ç”µè„‘çŸ¥è¯†","slug":"ç”µè„‘çŸ¥è¯†","link":"/categories/%E7%94%B5%E8%84%91%E7%9F%A5%E8%AF%86/"},{"name":"ç”Ÿæ´»çˆ±å¥½","slug":"ç”Ÿæ´»çˆ±å¥½","link":"/categories/%E7%94%9F%E6%B4%BB%E7%88%B1%E5%A5%BD/"},{"name":"NO GAME NO LIFE","slug":"æ¸¸æˆäººç”Ÿ/NO-GAME-NO-LIFE","link":"/categories/%E6%B8%B8%E6%88%8F%E4%BA%BA%E7%94%9F/NO-GAME-NO-LIFE/"},{"name":"æ¯æ—¥ä»»åŠ¡","slug":"æ¯æ—¥ä»»åŠ¡","link":"/categories/%E6%AF%8F%E6%97%A5%E4%BB%BB%E5%8A%A1/"},{"name":"ç³»ç»Ÿè®¾è®¡","slug":"ç³»ç»Ÿè®¾è®¡","link":"/categories/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"},{"name":"English","slug":"English","link":"/categories/English/"},{"name":"Nginx","slug":"ä¸­é—´ä»¶/Nginx","link":"/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/Nginx/"},{"name":"è‡ªåª’ä½“","slug":"è‡ªåª’ä½“","link":"/categories/%E8%87%AA%E5%AA%92%E4%BD%93/"},{"name":"èµ„æºç¯‡","slug":"å·¥å…·æ•™ç¨‹/èµ„æºç¯‡","link":"/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/%E8%B5%84%E6%BA%90%E7%AF%87/"},{"name":"è®°å½•","slug":"è®°å½•/è®°å½•","link":"/categories/%E8%AE%B0%E5%BD%95/%E8%AE%B0%E5%BD%95/"},{"name":"Software Engineer","slug":"ç¨‹åºäººç”Ÿ/Software-Engineer","link":"/categories/%E7%A8%8B%E5%BA%8F%E4%BA%BA%E7%94%9F/Software-Engineer/"},{"name":"SpringMVC","slug":"Frame/SpringMVC","link":"/categories/Frame/SpringMVC/"},{"name":"Everyday-TODO","slug":"å¾…åŠ/Everyday-TODO","link":"/categories/%E5%BE%85%E5%8A%9E/Everyday-TODO/"},{"name":"æ¨¡æ¿","slug":"æ¨¡æ¿/æ¨¡æ¿","link":"/categories/%E6%A8%A1%E6%9D%BF/%E6%A8%A1%E6%9D%BF/"},{"name":"ä¹¦å½±éŸ³","slug":"ä¹¦å½±éŸ³/ä¹¦å½±éŸ³","link":"/categories/%E4%B9%A6%E5%BD%B1%E9%9F%B3/%E4%B9%A6%E5%BD%B1%E9%9F%B3/"},{"name":"éŸ³ä¹","slug":"å…´è¶£çˆ±å¥½/éŸ³ä¹","link":"/categories/%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD/%E9%9F%B3%E4%B9%90/"},{"name":"å¥èº«å¤–å‹","slug":"å¥åº·/å¥èº«å¤–å‹","link":"/categories/%E5%81%A5%E5%BA%B7/%E5%81%A5%E8%BA%AB%E5%A4%96%E5%9E%8B/"},{"name":"æ–‡ä»¶ç›®å½•","slug":"æ–‡ä»¶ç›®å½•/æ–‡ä»¶ç›®å½•","link":"/categories/%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95/%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95/"},{"name":"å¦‚ä½•å­¦ä¹ ä¸€ä¸ªæ–°çŸ¥è¯†","slug":"å­¦ä¹ æ–¹æ³•/å¦‚ä½•å­¦ä¹ ä¸€ä¸ªæ–°çŸ¥è¯†","link":"/categories/%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9F%A5%E8%AF%86/"},{"name":"å¼€å‘ä¿®ç”µè„‘","slug":"ç”µè„‘çŸ¥è¯†/å¼€å‘ä¿®ç”µè„‘","link":"/categories/%E7%94%B5%E8%84%91%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91%E4%BF%AE%E7%94%B5%E8%84%91/"},{"name":"æ‘„å½±æ‘„åƒ","slug":"ç”Ÿæ´»çˆ±å¥½/æ‘„å½±æ‘„åƒ","link":"/categories/%E7%94%9F%E6%B4%BB%E7%88%B1%E5%A5%BD/%E6%91%84%E5%BD%B1%E6%91%84%E5%83%8F/"},{"name":"ç®—æ³•åŸºç¡€","slug":"æ¯æ—¥ä»»åŠ¡/ç®—æ³•åŸºç¡€","link":"/categories/%E6%AF%8F%E6%97%A5%E4%BB%BB%E5%8A%A1/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"},{"name":"æ¶æ„å¸ˆ","slug":"ç³»ç»Ÿè®¾è®¡/æ¶æ„å¸ˆ","link":"/categories/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E6%9E%B6%E6%9E%84%E5%B8%88/"},{"name":"ç¨‹åºå‘˜è‹±è¯­","slug":"English/ç¨‹åºå‘˜è‹±è¯­","link":"/categories/English/%E7%A8%8B%E5%BA%8F%E5%91%98%E8%8B%B1%E8%AF%AD/"},{"name":"æ¯æ—¥é¢é¢˜","slug":"æ¯æ—¥ä»»åŠ¡/æ¯æ—¥é¢é¢˜","link":"/categories/%E6%AF%8F%E6%97%A5%E4%BB%BB%E5%8A%A1/%E6%AF%8F%E6%97%A5%E9%9D%A2%E9%A2%98/"},{"name":"è‡ªåª’ä½“","slug":"è‡ªåª’ä½“/è‡ªåª’ä½“","link":"/categories/%E8%87%AA%E5%AA%92%E4%BD%93/%E8%87%AA%E5%AA%92%E4%BD%93/"},{"name":"ä¸´æ—¶è®°å½•","slug":"ä¸´æ—¶è®°å½•","link":"/categories/%E4%B8%B4%E6%97%B6%E8%AE%B0%E5%BD%95/"},{"name":"è€ƒè¯","slug":"è€ƒè¯","link":"/categories/%E8%80%83%E8%AF%81/"},{"name":"Dubbo","slug":"ä¸­é—´ä»¶/Dubbo","link":"/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/Dubbo/"},{"name":"æ€ç»´é—ªå…‰","slug":"ä¸´æ—¶è®°å½•/æ€ç»´é—ªå…‰","link":"/categories/%E4%B8%B4%E6%97%B6%E8%AE%B0%E5%BD%95/%E6%80%9D%E7%BB%B4%E9%97%AA%E5%85%89/"},{"name":"JAVAåº”ç”¨","slug":"JAVAåº”ç”¨","link":"/categories/JAVA%E5%BA%94%E7%94%A8/"},{"name":"SpringCloud","slug":"Frame/SpringCloud","link":"/categories/Frame/SpringCloud/"},{"name":"ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè®ºæ–‡æ¨¡æ¿","slug":"è€ƒè¯/ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè®ºæ–‡æ¨¡æ¿","link":"/categories/%E8%80%83%E8%AF%81/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%BA%E6%96%87%E6%A8%A1%E6%9D%BF/"},{"name":"ä¸šåŠ¡æŠ€æœ¯","slug":"JAVAåº”ç”¨/ä¸šåŠ¡æŠ€æœ¯","link":"/categories/JAVA%E5%BA%94%E7%94%A8/%E4%B8%9A%E5%8A%A1%E6%8A%80%E6%9C%AF/"},{"name":"SpringBoot","slug":"Frame/SpringBoot","link":"/categories/Frame/SpringBoot/"},{"name":"ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ","slug":"è€ƒè¯/ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ","link":"/categories/%E8%80%83%E8%AF%81/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88/"},{"name":"ç¼–ç¨‹","slug":"ç¼–ç¨‹","link":"/categories/%E7%BC%96%E7%A8%8B/"},{"name":"ç¼–ç¨‹å·¥å…·","slug":"ç¼–ç¨‹å·¥å…·","link":"/categories/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7/"},{"name":"ç¼–ç¨‹åŸºç¡€","slug":"ç¼–ç¨‹åŸºç¡€","link":"/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"},{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"ç¼–ç¨‹/å¾®ä¿¡å°ç¨‹åº","link":"/categories/%E7%BC%96%E7%A8%8B/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"å¿«æŸ¥","slug":"ç¼–ç¨‹å·¥å…·/å¿«æŸ¥","link":"/categories/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7/%E5%BF%AB%E6%9F%A5/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"ç¼–ç¨‹åŸºç¡€/è®¡ç®—æœºç½‘ç»œ","link":"/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"RabbitMQ","slug":"ä¸­é—´ä»¶/RabbitMQ","link":"/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ/"},{"name":"å®æ–½ç»´æŠ¤","slug":"å®æ–½ç»´æŠ¤","link":"/categories/%E5%AE%9E%E6%96%BD%E7%BB%B4%E6%8A%A4/"},{"name":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","link":"/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"},{"name":"Spring","slug":"Frame/Spring","link":"/categories/Frame/Spring/"},{"name":"å‰ç«¯","slug":"ç¨‹åºåŸºç¡€/å‰ç«¯","link":"/categories/%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80/%E5%89%8D%E7%AB%AF/"},{"name":"æœåŠ¡å™¨","slug":"å®æ–½ç»´æŠ¤/æœåŠ¡å™¨","link":"/categories/%E5%AE%9E%E6%96%BD%E7%BB%B4%E6%8A%A4/%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"name":"Pythonå­¦ä¹ ","slug":"ç¼–ç¨‹è¯­è¨€/Pythonå­¦ä¹ ","link":"/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python%E5%AD%A6%E4%B9%A0/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","link":"/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MongoDB","slug":"æ•°æ®åº“/MongoDB","link":"/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/"},{"name":"MYSQLä¼˜åŒ–","slug":"æ•°æ®åº“/MYSQLä¼˜åŒ–","link":"/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL%E4%BC%98%E5%8C%96/"},{"name":"Redis","slug":"ç¨‹åºåŸºç¡€/Redis","link":"/categories/%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80/Redis/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"ç¨‹åºåŸºç¡€/è®¾è®¡æ¨¡å¼","link":"/categories/%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","link":"/categories/%E5%89%8D%E7%AB%AF/"},{"name":"GIS","slug":"å‰ç«¯/GIS","link":"/categories/%E5%89%8D%E7%AB%AF/GIS/"},{"name":"åº•å±‚å­¦ä¹ ","slug":"åº•å±‚å­¦ä¹ ","link":"/categories/%E5%BA%95%E5%B1%82%E5%AD%A6%E4%B9%A0/"},{"name":"JVM ä¸ä¸Šå±‚æŠ€æœ¯","slug":"åº•å±‚å­¦ä¹ /JVM-ä¸ä¸Šå±‚æŠ€æœ¯","link":"/categories/%E5%BA%95%E5%B1%82%E5%AD%A6%E4%B9%A0/JVM-%E4%B8%8E%E4%B8%8A%E5%B1%82%E6%8A%80%E6%9C%AF/"},{"name":"Java","slug":"ç¼–ç¨‹è¯­è¨€/Java","link":"/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/"}]}